(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,962157,e=>{"use strict";var t=e.i(194934);class s{constructor(e,t){this.id=e,this.listeners=t}static async connect(e,n){let a=new Set,i=new t.Channel;return i.onmessage=e=>{a.forEach(t=>{t(e)})},n?.headers&&(n.headers=Array.from(new Headers(n.headers).entries())),await (0,t.invoke)("plugin:websocket|connect",{url:e,onMessage:i,config:n}).then(e=>new s(e,a))}addListener(e){return this.listeners.add(e),()=>{this.listeners.delete(e)}}async send(e){let s;if("string"==typeof e)s={type:"Text",data:e};else if("object"==typeof e&&"type"in e)s=e;else if(Array.isArray(e))s={type:"Binary",data:e};else throw Error("invalid `message` type, expected a `{ type: string, data: any }` object, a string or a numeric array");await (0,t.invoke)("plugin:websocket|send",{id:this.id,message:s})}async disconnect(){await this.send({type:"Close",data:{code:1e3,reason:"Disconnected by client"}})}}e.s(["default",()=>s])}]);
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,301765,(e,t,r)=>{t.exports=e.r(212178)},749492,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"ReadonlyURLSearchParams",{enumerable:!0,get:function(){return i}});class n extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class i extends URLSearchParams{append(){throw new n}delete(){throw new n}set(){throw new n}sort(){throw new n}}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},188973,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{ServerInsertedHTMLContext:function(){return i},useServerInsertedHTML:function(){return a}});let n=e.r(887602)._(e.r(136960)),i=n.default.createContext(null);function a(e){let t=(0,n.useContext)(i);t&&t(e)}},88564,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{UnrecognizedActionError:function(){return n},unstable_isUnrecognizedActionError:function(){return i}});class n extends Error{constructor(...e){super(...e),this.name="UnrecognizedActionError"}}function i(e){return!!(e&&"object"==typeof e&&e instanceof n)}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},467662,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{bindSnapshot:function(){return s},createAsyncLocalStorage:function(){return o},createSnapshot:function(){return l}});let n=Object.defineProperty(Error("Invariant: AsyncLocalStorage accessed in runtime where it is not available"),"__NEXT_ERROR_CODE",{value:"E504",enumerable:!1,configurable:!0});class i{disable(){throw n}getStore(){}run(){throw n}exit(){throw n}enterWith(){throw n}static bind(e){return e}}let a="undefined"!=typeof globalThis&&globalThis.AsyncLocalStorage;function o(){return a?new a:new i}function s(e){return a?a.bind(e):i.bind(e)}function l(){return a?a.snapshot():function(e,...t){return e(...t)}}},105038,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"actionAsyncStorageInstance",{enumerable:!0,get:function(){return n}});let n=(0,e.r(467662).createAsyncLocalStorage)()},888642,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"actionAsyncStorage",{enumerable:!0,get:function(){return n.actionAsyncStorageInstance}});let n=e.r(105038)},517830,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{getRedirectError:function(){return o},getRedirectStatusCodeFromError:function(){return d},getRedirectTypeFromError:function(){return u},getURLFromRedirectError:function(){return c},permanentRedirect:function(){return l},redirect:function(){return s}});let n=e.r(376252),i=e.r(677587),a="undefined"==typeof window?e.r(888642).actionAsyncStorage:void 0;function o(e,t,r=n.RedirectStatusCode.TemporaryRedirect){let a=Object.defineProperty(Error(i.REDIRECT_ERROR_CODE),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return a.digest=`${i.REDIRECT_ERROR_CODE};${t};${e};${r};`,a}function s(e,t){throw o(e,t??=a?.getStore()?.isAction?i.RedirectType.push:i.RedirectType.replace,n.RedirectStatusCode.TemporaryRedirect)}function l(e,t=i.RedirectType.replace){throw o(e,t,n.RedirectStatusCode.PermanentRedirect)}function c(e){return(0,i.isRedirectError)(e)?e.digest.split(";").slice(2,-2).join(";"):null}function u(e){if(!(0,i.isRedirectError)(e))throw Object.defineProperty(Error("Not a redirect error"),"__NEXT_ERROR_CODE",{value:"E260",enumerable:!1,configurable:!0});return e.digest.split(";",2)[1]}function d(e){if(!(0,i.isRedirectError)(e))throw Object.defineProperty(Error("Not a redirect error"),"__NEXT_ERROR_CODE",{value:"E260",enumerable:!1,configurable:!0});return Number(e.digest.split(";").at(-2))}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},636796,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"notFound",{enumerable:!0,get:function(){return a}});let n=e.r(168931),i=`${n.HTTP_ERROR_FALLBACK_ERROR_CODE};404`;function a(){let e=Object.defineProperty(Error(i),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});throw e.digest=i,e}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},801344,(e,t,r)=>{"use strict";function n(){throw Object.defineProperty(Error("`forbidden()` is experimental and only allowed to be enabled when `experimental.authInterrupts` is enabled."),"__NEXT_ERROR_CODE",{value:"E488",enumerable:!1,configurable:!0})}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"forbidden",{enumerable:!0,get:function(){return n}}),e.r(168931).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},399672,(e,t,r)=>{"use strict";function n(){throw Object.defineProperty(Error("`unauthorized()` is experimental and only allowed to be used when `experimental.authInterrupts` is enabled."),"__NEXT_ERROR_CODE",{value:"E411",enumerable:!1,configurable:!0})}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"unauthorized",{enumerable:!0,get:function(){return n}}),e.r(168931).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},866913,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"unstable_rethrow",{enumerable:!0,get:function(){return a}});let n=e.r(402551),i=e.r(908873);function a(e){if((0,i.isNextRouterError)(e)||(0,n.isBailoutToCSRError)(e))throw e;e instanceof Error&&"cause"in e&&a(e.cause)}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},411267,(e,t,r)=>{"use strict";function n(e){return"object"==typeof e&&null!==e&&"digest"in e&&e.digest===i}Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{isHangingPromiseRejectionError:function(){return n},makeDevtoolsIOAwarePromise:function(){return c},makeHangingPromise:function(){return s}});let i="HANGING_PROMISE_REJECTION";class a extends Error{constructor(e,t){super(`During prerendering, ${t} rejects when the prerender is complete. Typically these errors are handled by React but if you move ${t} to a different context by using \`setTimeout\`, \`after\`, or similar functions you may observe this error and you should handle it in that context. This occurred at route "${e}".`),this.route=e,this.expression=t,this.digest=i}}let o=new WeakMap;function s(e,t,r){if(e.aborted)return Promise.reject(new a(t,r));{let n=new Promise((n,i)=>{let s=i.bind(null,new a(t,r)),l=o.get(e);if(l)l.push(s);else{let t=[s];o.set(e,t),e.addEventListener("abort",()=>{for(let e=0;e<t.length;e++)t[e]()},{once:!0})}});return n.catch(l),n}}function l(){}function c(e,t,r){return t.stagedRendering?t.stagedRendering.delayUntilStage(r,void 0,e):new Promise(t=>{setTimeout(()=>{t(e)},0)})}},824225,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"isPostpone",{enumerable:!0,get:function(){return i}});let n=Symbol.for("react.postpone");function i(e){return"object"==typeof e&&null!==e&&e.$$typeof===n}},928294,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{DynamicServerError:function(){return i},isDynamicServerError:function(){return a}});let n="DYNAMIC_SERVER_USAGE";class i extends Error{constructor(e){super(`Dynamic server usage: ${e}`),this.description=e,this.digest=n}}function a(e){return"object"==typeof e&&null!==e&&"digest"in e&&"string"==typeof e.digest&&e.digest===n}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},466553,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{StaticGenBailoutError:function(){return i},isStaticGenBailoutError:function(){return a}});let n="NEXT_STATIC_GEN_BAILOUT";class i extends Error{constructor(...e){super(...e),this.code=n}}function a(e){return"object"==typeof e&&null!==e&&"code"in e&&e.code===n}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},113744,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"workUnitAsyncStorageInstance",{enumerable:!0,get:function(){return n}});let n=(0,e.r(467662).createAsyncLocalStorage)()},158833,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{ACTION_HEADER:function(){return i},FLIGHT_HEADERS:function(){return f},NEXT_ACTION_NOT_FOUND_HEADER:function(){return y},NEXT_DID_POSTPONE_HEADER:function(){return b},NEXT_HMR_REFRESH_HASH_COOKIE:function(){return c},NEXT_HMR_REFRESH_HEADER:function(){return l},NEXT_HTML_REQUEST_ID_HEADER:function(){return w},NEXT_IS_PRERENDER_HEADER:function(){return v},NEXT_REQUEST_ID_HEADER:function(){return x},NEXT_REWRITTEN_PATH_HEADER:function(){return g},NEXT_REWRITTEN_QUERY_HEADER:function(){return m},NEXT_ROUTER_PREFETCH_HEADER:function(){return o},NEXT_ROUTER_SEGMENT_PREFETCH_HEADER:function(){return s},NEXT_ROUTER_STALE_TIME_HEADER:function(){return p},NEXT_ROUTER_STATE_TREE_HEADER:function(){return a},NEXT_RSC_UNION_QUERY:function(){return h},NEXT_URL:function(){return u},RSC_CONTENT_TYPE_HEADER:function(){return d},RSC_HEADER:function(){return n}});let n="rsc",i="next-action",a="next-router-state-tree",o="next-router-prefetch",s="next-router-segment-prefetch",l="next-hmr-refresh",c="__next_hmr_refresh_hash__",u="next-url",d="text/x-component",f=[n,a,o,l,s],h="_rsc",p="x-nextjs-stale-time",b="x-nextjs-postponed",g="x-nextjs-rewritten-path",m="x-nextjs-rewritten-query",v="x-nextjs-prerender",y="x-nextjs-action-not-found",x="x-nextjs-request-id",w="x-nextjs-html-request-id";("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},208119,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{getCacheSignal:function(){return p},getDraftModeProviderForCacheScope:function(){return h},getHmrRefreshHash:function(){return u},getPrerenderResumeDataCache:function(){return l},getRenderResumeDataCache:function(){return c},getRuntimeStagePromise:function(){return b},getServerComponentsHmrCache:function(){return f},isHmrRefresh:function(){return d},throwForMissingRequestStore:function(){return o},throwInvariantForMissingStore:function(){return s},workUnitAsyncStorage:function(){return n.workUnitAsyncStorageInstance}});let n=e.r(113744),i=e.r(158833),a=e.r(579646);function o(e){throw Object.defineProperty(Error(`\`${e}\` was called outside a request scope. Read more: https://nextjs.org/docs/messages/next-dynamic-api-wrong-context`),"__NEXT_ERROR_CODE",{value:"E251",enumerable:!1,configurable:!0})}function s(){throw Object.defineProperty(new a.InvariantError("Expected workUnitAsyncStorage to have a store."),"__NEXT_ERROR_CODE",{value:"E696",enumerable:!1,configurable:!0})}function l(e){switch(e.type){case"prerender":case"prerender-runtime":case"prerender-ppr":case"prerender-client":return e.prerenderResumeDataCache;case"request":if(e.prerenderResumeDataCache)return e.prerenderResumeDataCache;case"prerender-legacy":case"cache":case"private-cache":case"unstable-cache":return null;default:return e}}function c(e){switch(e.type){case"request":case"prerender":case"prerender-runtime":case"prerender-client":if(e.renderResumeDataCache)return e.renderResumeDataCache;case"prerender-ppr":return e.prerenderResumeDataCache??null;case"cache":case"private-cache":case"unstable-cache":case"prerender-legacy":return null;default:return e}}function u(e,t){if(e.dev)switch(t.type){case"cache":case"private-cache":case"prerender":case"prerender-runtime":return t.hmrRefreshHash;case"request":var r;return null==(r=t.cookies.get(i.NEXT_HMR_REFRESH_HASH_COOKIE))?void 0:r.value}}function d(e,t){if(e.dev)switch(t.type){case"cache":case"private-cache":case"request":return t.isHmrRefresh??!1}return!1}function f(e,t){if(e.dev)switch(t.type){case"cache":case"private-cache":case"request":return t.serverComponentsHmrCache}}function h(e,t){if(e.isDraftMode)switch(t.type){case"cache":case"private-cache":case"unstable-cache":case"prerender-runtime":case"request":return t.draftMode}}function p(e){switch(e.type){case"prerender":case"prerender-client":case"prerender-runtime":return e.cacheSignal;case"request":if(e.cacheSignal)return e.cacheSignal;case"prerender-ppr":case"prerender-legacy":case"cache":case"private-cache":case"unstable-cache":return null;default:return e}}function b(e){switch(e.type){case"prerender-runtime":case"private-cache":return e.runtimeStagePromise;case"prerender":case"prerender-client":case"prerender-ppr":case"prerender-legacy":case"request":case"cache":case"unstable-cache":return null;default:return e}}},469679,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"workAsyncStorageInstance",{enumerable:!0,get:function(){return n}});let n=(0,e.r(467662).createAsyncLocalStorage)()},731131,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"workAsyncStorage",{enumerable:!0,get:function(){return n.workAsyncStorageInstance}});let n=e.r(469679)},191040,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{METADATA_BOUNDARY_NAME:function(){return n},OUTLET_BOUNDARY_NAME:function(){return a},ROOT_LAYOUT_BOUNDARY_NAME:function(){return o},VIEWPORT_BOUNDARY_NAME:function(){return i}});let n="__next_metadata_boundary__",i="__next_viewport_boundary__",a="__next_outlet_boundary__",o="__next_root_layout_boundary__"},119108,(e,t,r)=>{"use strict";var n=e.i(119322);Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{atLeastOneTask:function(){return o},scheduleImmediate:function(){return a},scheduleOnNextTick:function(){return i},waitAtLeastOneReactRenderTask:function(){return s}});let i=e=>{Promise.resolve().then(()=>{n.default.nextTick(e)})},a=e=>{setImmediate(e)};function o(){return new Promise(e=>a(e))}function s(){return new Promise(e=>setImmediate(e))}},804824,(e,t,r)=>{"use strict";function n(){let e,t,r=new Promise((r,n)=>{e=r,t=n});return{resolve:e,reject:t,promise:r}}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"createPromiseWithResolvers",{enumerable:!0,get:function(){return n}})},878602,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{RenderStage:function(){return a},StagedRenderingController:function(){return o}});let n=e.r(579646),i=e.r(804824);var a=function(e){return e[e.Static=1]="Static",e[e.Runtime=2]="Runtime",e[e.Dynamic=3]="Dynamic",e}({});class o{constructor(e=null){this.abortSignal=e,this.currentStage=1,this.runtimeStagePromise=(0,i.createPromiseWithResolvers)(),this.dynamicStagePromise=(0,i.createPromiseWithResolvers)(),e&&e.addEventListener("abort",()=>{let{reason:t}=e;this.currentStage<2&&(this.runtimeStagePromise.promise.catch(s),this.runtimeStagePromise.reject(t)),this.currentStage<3&&(this.dynamicStagePromise.promise.catch(s),this.dynamicStagePromise.reject(t))},{once:!0})}advanceStage(e){!(this.currentStage>=e)&&(this.currentStage=e,e>=2&&this.runtimeStagePromise.resolve(),e>=3&&this.dynamicStagePromise.resolve())}getStagePromise(e){switch(e){case 2:return this.runtimeStagePromise.promise;case 3:return this.dynamicStagePromise.promise;default:throw Object.defineProperty(new n.InvariantError(`Invalid render stage: ${e}`),"__NEXT_ERROR_CODE",{value:"E881",enumerable:!1,configurable:!0})}}waitForStage(e){return this.getStagePromise(e)}delayUntilStage(e,t,r){let n=l(this.getStagePromise(e),t,r);return this.abortSignal&&n.catch(s),n}}function s(){}function l(e,t,r){let n=new Promise((t,n)=>{e.then(t.bind(null,r),n)});return void 0!==t&&(n.displayName=t),n}},631800,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{Postpone:function(){return N},PreludeState:function(){return Y},abortAndThrowOnSynchronousRequestDataAccess:function(){return k},abortOnSynchronousPlatformIOAccess:function(){return S},accessedDynamicData:function(){return L},annotateDynamicAccess:function(){return F},consumeDynamicAccess:function(){return I},createDynamicTrackingState:function(){return g},createDynamicValidationState:function(){return m},createHangingInputAbortSignal:function(){return z},createRenderInBrowserAbortSignal:function(){return D},delayUntilRuntimeStage:function(){return ee},formatDynamicAPIAccesses:function(){return P},getFirstDynamicReason:function(){return v},isDynamicPostpone:function(){return M},isPrerenderInterruptedError:function(){return O},logDisallowedDynamicError:function(){return J},markCurrentScopeAsDynamic:function(){return y},postponeWithTracking:function(){return j},throwIfDisallowedDynamic:function(){return Q},throwToInterruptStaticGeneration:function(){return x},trackAllowedDynamicAccess:function(){return X},trackDynamicDataInDynamicRender:function(){return w},trackSynchronousPlatformIOAccessInDev:function(){return E},useDynamicRouteParams:function(){return $},useDynamicSearchParams:function(){return U}});let n=p(e.r(136960)),i=e.r(928294),a=e.r(466553),o=e.r(208119),s=e.r(731131),l=e.r(411267),c=e.r(191040),u=e.r(119108),d=e.r(402551),f=e.r(579646),h=e.r(878602);function p(e){return e&&e.__esModule?e:{default:e}}let b="function"==typeof n.default.unstable_postpone;function g(e){return{isDebugDynamicAccesses:e,dynamicAccesses:[],syncDynamicErrorWithStack:null}}function m(){return{hasSuspenseAboveBody:!1,hasDynamicMetadata:!1,hasDynamicViewport:!1,hasAllowedDynamic:!1,dynamicErrors:[]}}function v(e){var t;return null==(t=e.dynamicAccesses[0])?void 0:t.expression}function y(e,t,r){if(t)switch(t.type){case"cache":case"unstable-cache":case"private-cache":return}if(!e.forceDynamic&&!e.forceStatic){if(e.dynamicShouldError)throw Object.defineProperty(new a.StaticGenBailoutError(`Route ${e.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`${r}\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E553",enumerable:!1,configurable:!0});if(t)switch(t.type){case"prerender-ppr":return j(e.route,r,t.dynamicTracking);case"prerender-legacy":t.revalidate=0;let n=Object.defineProperty(new i.DynamicServerError(`Route ${e.route} couldn't be rendered statically because it used ${r}. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`),"__NEXT_ERROR_CODE",{value:"E550",enumerable:!1,configurable:!0});throw e.dynamicUsageDescription=r,e.dynamicUsageStack=n.stack,n}}}function x(e,t,r){let n=Object.defineProperty(new i.DynamicServerError(`Route ${t.route} couldn't be rendered statically because it used \`${e}\`. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`),"__NEXT_ERROR_CODE",{value:"E558",enumerable:!1,configurable:!0});throw r.revalidate=0,t.dynamicUsageDescription=e,t.dynamicUsageStack=n.stack,n}function w(e){switch(e.type){case"cache":case"unstable-cache":case"private-cache":return}}function _(e,t,r){let n=T(`Route ${e} needs to bail out of prerendering at this point because it used ${t}.`);r.controller.abort(n);let i=r.dynamicTracking;i&&i.dynamicAccesses.push({stack:i.isDebugDynamicAccesses?Error().stack:void 0,expression:t})}function S(e,t,r,n){let i=n.dynamicTracking;_(e,t,n),i&&null===i.syncDynamicErrorWithStack&&(i.syncDynamicErrorWithStack=r)}function E(e){e.stagedRendering&&e.stagedRendering.advanceStage(h.RenderStage.Dynamic)}function k(e,t,r,n){if(!1===n.controller.signal.aborted){_(e,t,n);let i=n.dynamicTracking;i&&null===i.syncDynamicErrorWithStack&&(i.syncDynamicErrorWithStack=r)}throw T(`Route ${e} needs to bail out of prerendering at this point because it used ${t}.`)}function N({reason:e,route:t}){let r=o.workUnitAsyncStorage.getStore();j(t,e,r&&"prerender-ppr"===r.type?r.dynamicTracking:null)}function j(e,t,r){B(),r&&r.dynamicAccesses.push({stack:r.isDebugDynamicAccesses?Error().stack:void 0,expression:t}),n.default.unstable_postpone(C(e,t))}function C(e,t){return`Route ${e} needs to bail out of prerendering at this point because it used ${t}. React throws this special object to indicate where. It should not be caught by your own try/catch. Learn more: https://nextjs.org/docs/messages/ppr-caught-error`}function M(e){return"object"==typeof e&&null!==e&&"string"==typeof e.message&&A(e.message)}function A(e){return e.includes("needs to bail out of prerendering at this point because it used")&&e.includes("Learn more: https://nextjs.org/docs/messages/ppr-caught-error")}if(!1===A(C("%%%","^^^")))throw Object.defineProperty(Error("Invariant: isDynamicPostpone misidentified a postpone reason. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E296",enumerable:!1,configurable:!0});let R="NEXT_PRERENDER_INTERRUPTED";function T(e){let t=Object.defineProperty(Error(e),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return t.digest=R,t}function O(e){return"object"==typeof e&&null!==e&&e.digest===R&&"name"in e&&"message"in e&&e instanceof Error}function L(e){return e.length>0}function I(e,t){return e.dynamicAccesses.push(...t.dynamicAccesses),e.dynamicAccesses}function P(e){return e.filter(e=>"string"==typeof e.stack&&e.stack.length>0).map(({expression:e,stack:t})=>(t=t.split("\n").slice(4).filter(e=>!(e.includes("node_modules/next/")||e.includes(" (<anonymous>)")||e.includes(" (node:"))).join("\n"),`Dynamic API Usage Debug - ${e}:
${t}`))}function B(){if(!b)throw Object.defineProperty(Error("Invariant: React.unstable_postpone is not defined. This suggests the wrong version of React was loaded. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E224",enumerable:!1,configurable:!0})}function D(){let e=new AbortController;return e.abort(Object.defineProperty(new d.BailoutToCSRError("Render in Browser"),"__NEXT_ERROR_CODE",{value:"E721",enumerable:!1,configurable:!0})),e.signal}function z(e){switch(e.type){case"prerender":case"prerender-runtime":let t=new AbortController;if(e.cacheSignal)e.cacheSignal.inputReady().then(()=>{t.abort()});else{let r=(0,o.getRuntimeStagePromise)(e);r?r.then(()=>(0,u.scheduleOnNextTick)(()=>t.abort())):(0,u.scheduleOnNextTick)(()=>t.abort())}return t.signal;case"prerender-client":case"prerender-ppr":case"prerender-legacy":case"request":case"cache":case"private-cache":case"unstable-cache":return}}function F(e,t){let r=t.dynamicTracking;r&&r.dynamicAccesses.push({stack:r.isDebugDynamicAccesses?Error().stack:void 0,expression:e})}function $(e){let t=s.workAsyncStorage.getStore(),r=o.workUnitAsyncStorage.getStore();if(t&&r)switch(r.type){case"prerender-client":case"prerender":{let i=r.fallbackRouteParams;i&&i.size>0&&n.default.use((0,l.makeHangingPromise)(r.renderSignal,t.route,e));break}case"prerender-ppr":{let n=r.fallbackRouteParams;if(n&&n.size>0)return j(t.route,e,r.dynamicTracking);break}case"prerender-runtime":throw Object.defineProperty(new f.InvariantError(`\`${e}\` was called during a runtime prerender. Next.js should be preventing ${e} from being included in server components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E771",enumerable:!1,configurable:!0});case"cache":case"private-cache":throw Object.defineProperty(new f.InvariantError(`\`${e}\` was called inside a cache scope. Next.js should be preventing ${e} from being included in server components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E745",enumerable:!1,configurable:!0})}}function U(e){let t=s.workAsyncStorage.getStore(),r=o.workUnitAsyncStorage.getStore();if(t)switch(!r&&(0,o.throwForMissingRequestStore)(e),r.type){case"prerender-client":n.default.use((0,l.makeHangingPromise)(r.renderSignal,t.route,e));break;case"prerender-legacy":case"prerender-ppr":if(t.forceStatic)return;throw Object.defineProperty(new d.BailoutToCSRError(e),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});case"prerender":case"prerender-runtime":throw Object.defineProperty(new f.InvariantError(`\`${e}\` was called from a Server Component. Next.js should be preventing ${e} from being included in server components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E795",enumerable:!1,configurable:!0});case"cache":case"unstable-cache":case"private-cache":throw Object.defineProperty(new f.InvariantError(`\`${e}\` was called inside a cache scope. Next.js should be preventing ${e} from being included in server components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E745",enumerable:!1,configurable:!0});case"request":return}}let H=/\n\s+at Suspense \(<anonymous>\)/,V="body|div|main|section|article|aside|header|footer|nav|form|p|span|h1|h2|h3|h4|h5|h6",q=RegExp(`\\n\\s+at Suspense \\(<anonymous>\\)(?:(?!\\n\\s+at (?:${V}) \\(<anonymous>\\))[\\s\\S])*?\\n\\s+at ${c.ROOT_LAYOUT_BOUNDARY_NAME} \\([^\\n]*\\)`),W=RegExp(`\\n\\s+at ${c.METADATA_BOUNDARY_NAME}[\\n\\s]`),K=RegExp(`\\n\\s+at ${c.VIEWPORT_BOUNDARY_NAME}[\\n\\s]`),G=RegExp(`\\n\\s+at ${c.OUTLET_BOUNDARY_NAME}[\\n\\s]`);function X(e,t,r,n){if(!G.test(t)){if(W.test(t)){r.hasDynamicMetadata=!0;return}if(K.test(t)){r.hasDynamicViewport=!0;return}if(q.test(t)){r.hasAllowedDynamic=!0,r.hasSuspenseAboveBody=!0;return}else if(H.test(t)){r.hasAllowedDynamic=!0;return}else{if(n.syncDynamicErrorWithStack)return void r.dynamicErrors.push(n.syncDynamicErrorWithStack);let i=Z(`Route "${e.route}": Uncached data was accessed outside of <Suspense>. This delays the entire page from rendering, resulting in a slow user experience. Learn more: https://nextjs.org/docs/messages/blocking-route`,t);return void r.dynamicErrors.push(i)}}}function Z(e,t){let r=null,n=Object.defineProperty(Error(e),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return n.stack=n.name+": "+e+(r??t),n}var Y=function(e){return e[e.Full=0]="Full",e[e.Empty=1]="Empty",e[e.Errored=2]="Errored",e}({});function J(e,t){console.error(t),e.dev||(e.hasReadableErrorStacks?console.error(`To get a more detailed stack trace and pinpoint the issue, start the app in development mode by running \`next dev\`, then open "${e.route}" in your browser to investigate the error.`):console.error(`To get a more detailed stack trace and pinpoint the issue, try one of the following:
  - Start the app in development mode by running \`next dev\`, then open "${e.route}" in your browser to investigate the error.
  - Rerun the production build with \`next build --debug-prerender\` to generate better stack traces.`))}function Q(e,t,r,n){if(n.syncDynamicErrorWithStack)throw J(e,n.syncDynamicErrorWithStack),new a.StaticGenBailoutError;if(0!==t){if(r.hasSuspenseAboveBody)return;let n=r.dynamicErrors;if(n.length>0){for(let t=0;t<n.length;t++)J(e,n[t]);throw new a.StaticGenBailoutError}if(r.hasDynamicViewport)throw console.error(`Route "${e.route}" has a \`generateViewport\` that depends on Request data (\`cookies()\`, etc...) or uncached external data (\`fetch(...)\`, etc...) without explicitly allowing fully dynamic rendering. See more info here: https://nextjs.org/docs/messages/next-prerender-dynamic-viewport`),new a.StaticGenBailoutError;if(1===t)throw console.error(`Route "${e.route}" did not produce a static shell and Next.js was unable to determine a reason. This is a bug in Next.js.`),new a.StaticGenBailoutError}else if(!1===r.hasAllowedDynamic&&r.hasDynamicMetadata)throw console.error(`Route "${e.route}" has a \`generateMetadata\` that depends on Request data (\`cookies()\`, etc...) or uncached external data (\`fetch(...)\`, etc...) when the rest of the route does not. See more info here: https://nextjs.org/docs/messages/next-prerender-dynamic-metadata`),new a.StaticGenBailoutError}function ee(e,t){return e.runtimeStagePromise?e.runtimeStagePromise.then(()=>t):t}},554905,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"unstable_rethrow",{enumerable:!0,get:function(){return c}});let n=e.r(411267),i=e.r(824225),a=e.r(402551),o=e.r(908873),s=e.r(631800),l=e.r(928294);function c(e){if((0,o.isNextRouterError)(e)||(0,a.isBailoutToCSRError)(e)||(0,l.isDynamicServerError)(e)||(0,s.isDynamicPostpone)(e)||(0,i.isPostpone)(e)||(0,n.isHangingPromiseRejectionError)(e)||(0,s.isPrerenderInterruptedError)(e))throw e;e instanceof Error&&"cause"in e&&c(e.cause)}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},670020,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"unstable_rethrow",{enumerable:!0,get:function(){return n}});let n="undefined"==typeof window?e.r(554905).unstable_rethrow:e.r(866913).unstable_rethrow;("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},624352,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{ReadonlyURLSearchParams:function(){return n.ReadonlyURLSearchParams},RedirectType:function(){return a.RedirectType},forbidden:function(){return s.forbidden},notFound:function(){return o.notFound},permanentRedirect:function(){return i.permanentRedirect},redirect:function(){return i.redirect},unauthorized:function(){return l.unauthorized},unstable_isUnrecognizedActionError:function(){return u},unstable_rethrow:function(){return c.unstable_rethrow}});let n=e.r(749492),i=e.r(517830),a=e.r(677587),o=e.r(636796),s=e.r(801344),l=e.r(399672),c=e.r(670020);function u(){throw Object.defineProperty(Error("`unstable_isUnrecognizedActionError` can only be used on the client."),"__NEXT_ERROR_CODE",{value:"E776",enumerable:!1,configurable:!0})}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},57757,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{ReadonlyURLSearchParams:function(){return u.ReadonlyURLSearchParams},RedirectType:function(){return u.RedirectType},ServerInsertedHTMLContext:function(){return l.ServerInsertedHTMLContext},forbidden:function(){return u.forbidden},notFound:function(){return u.notFound},permanentRedirect:function(){return u.permanentRedirect},redirect:function(){return u.redirect},unauthorized:function(){return u.unauthorized},unstable_isUnrecognizedActionError:function(){return c.unstable_isUnrecognizedActionError},unstable_rethrow:function(){return u.unstable_rethrow},useParams:function(){return g},usePathname:function(){return p},useRouter:function(){return b},useSearchParams:function(){return h},useSelectedLayoutSegment:function(){return v},useSelectedLayoutSegments:function(){return m},useServerInsertedHTML:function(){return l.useServerInsertedHTML}});let n=e.r(887602)._(e.r(136960)),i=e.r(920503),a=e.r(994172),o=e.r(24594),s=e.r(749492),l=e.r(188973),c=e.r(88564),u=e.r(624352),d="undefined"==typeof window?e.r(631800).useDynamicRouteParams:void 0,f="undefined"==typeof window?e.r(631800).useDynamicSearchParams:void 0;function h(){f?.("useSearchParams()");let e=(0,n.useContext)(a.SearchParamsContext);return(0,n.useMemo)(()=>e?new s.ReadonlyURLSearchParams(e):null,[e])}function p(){return d?.("usePathname()"),(0,n.useContext)(a.PathnameContext)}function b(){let e=(0,n.useContext)(i.AppRouterContext);if(null===e)throw Object.defineProperty(Error("invariant expected app router to be mounted"),"__NEXT_ERROR_CODE",{value:"E238",enumerable:!1,configurable:!0});return e}function g(){return d?.("useParams()"),(0,n.useContext)(a.PathParamsContext)}function m(e="children"){d?.("useSelectedLayoutSegments()");let t=(0,n.useContext)(i.LayoutRouterContext);return t?(0,o.getSelectedLayoutSegmentPath)(t.parentTree,e):null}function v(e="children"){d?.("useSelectedLayoutSegment()"),(0,n.useContext)(a.NavigationPromisesContext);let t=m(e);return(0,o.computeSelectedLayoutSegment)(t,e)}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},277908,(e,t,r)=>{t.exports=e.r(57757)},424590,(e,t,r)=>{"use strict";function n({widthInt:e,heightInt:t,blurWidth:r,blurHeight:n,blurDataURL:i,objectFit:a}){let o=20,s=r?40*r:e,l=n?40*n:t,c=s&&l?`viewBox='0 0 ${s} ${l}'`:"",u=c?"none":"contain"===a?"xMidYMid":"cover"===a?"xMidYMid slice":"none";return`%3Csvg xmlns='http://www.w3.org/2000/svg' ${c}%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='${o}'/%3E%3CfeColorMatrix values='1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1' result='s'/%3E%3CfeFlood x='0' y='0' width='100%25' height='100%25'/%3E%3CfeComposite operator='out' in='s'/%3E%3CfeComposite in2='SourceGraphic'/%3E%3CfeGaussianBlur stdDeviation='${o}'/%3E%3C/filter%3E%3Cimage width='100%25' height='100%25' x='0' y='0' preserveAspectRatio='${u}' style='filter: url(%23b);' href='${i}'/%3E%3C/svg%3E`}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"getImageBlurSvg",{enumerable:!0,get:function(){return n}})},292487,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"getImgProps",{enumerable:!0,get:function(){return f}}),e.r(186072);let n=e.r(424590),i=e.r(584594),a=["-moz-initial","fill","none","scale-down",void 0];function o(e){return void 0!==e.default}function s(e){return void 0!==e.src}function l(e){return!!e&&"object"==typeof e&&(o(e)||s(e))}function c(e){return void 0===e?e:"number"==typeof e?Number.isFinite(e)?e:NaN:"string"==typeof e&&/^[0-9]+$/.test(e)?parseInt(e,10):NaN}function u({deviceSizes:e,allSizes:t},r,n){if(n){let r=/(^|\s)(1?\d?\d)vw/g,i=[];for(let e;e=r.exec(n);)i.push(parseInt(e[2]));if(i.length){let r=.01*Math.min(...i);return{widths:t.filter(t=>t>=e[0]*r),kind:"w"}}return{widths:t,kind:"w"}}return"number"!=typeof r?{widths:e,kind:"w"}:{widths:[...new Set([r,2*r].map(e=>t.find(t=>t>=e)||t[t.length-1]))],kind:"x"}}function d({config:e,src:t,unoptimized:r,width:n,quality:i,sizes:a,loader:o}){if(r)return{src:t,srcSet:void 0,sizes:void 0};let{widths:s,kind:l}=u(e,n,a),c=s.length-1;return{sizes:a||"w"!==l?a:"100vw",srcSet:s.map((r,n)=>`${o({config:e,src:t,quality:i,width:r})} ${"w"===l?r:n+1}${l}`).join(", "),src:o({config:e,src:t,quality:i,width:s[c]})}}function f({src:e,sizes:t,unoptimized:r=!1,priority:s=!1,preload:u=!1,loading:f,className:h,quality:p,width:b,height:g,fill:m=!1,style:v,overrideSrc:y,onLoad:x,onLoadingComplete:w,placeholder:_="empty",blurDataURL:S,fetchPriority:E,decoding:k="async",layout:N,objectFit:j,objectPosition:C,lazyBoundary:M,lazyRoot:A,...R},T){let O,L,I,{imgConf:P,showAltText:B,blurComplete:D,defaultLoader:z}=T,F=P||i.imageConfigDefault;if("allSizes"in F)O=F;else{let e=[...F.deviceSizes,...F.imageSizes].sort((e,t)=>e-t),t=F.deviceSizes.sort((e,t)=>e-t),r=F.qualities?.sort((e,t)=>e-t);O={...F,allSizes:e,deviceSizes:t,qualities:r}}if(void 0===z)throw Object.defineProperty(Error("images.loaderFile detected but the file is missing default export.\nRead more: https://nextjs.org/docs/messages/invalid-images-config"),"__NEXT_ERROR_CODE",{value:"E163",enumerable:!1,configurable:!0});let $=R.loader||z;delete R.loader,delete R.srcSet;let U="__next_img_default"in $;if(U){if("custom"===O.loader)throw Object.defineProperty(Error(`Image with src "${e}" is missing "loader" prop.
Read more: https://nextjs.org/docs/messages/next-image-missing-loader`),"__NEXT_ERROR_CODE",{value:"E252",enumerable:!1,configurable:!0})}else{let e=$;$=t=>{let{config:r,...n}=t;return e(n)}}if(N){"fill"===N&&(m=!0);let e={responsive:"100vw",fill:"100vw"},r={intrinsic:{maxWidth:"100%",height:"auto"},responsive:{width:"100%",height:"auto"}}[N];r&&(v={...v,...r});let n=e[N];n&&!t&&(t=n)}let H="",V=c(b),q=c(g);if(l(e)){let t=o(e)?e.default:e;if(!t.src)throw Object.defineProperty(Error(`An object should only be passed to the image component src parameter if it comes from a static image import. It must include src. Received ${JSON.stringify(t)}`),"__NEXT_ERROR_CODE",{value:"E460",enumerable:!1,configurable:!0});if(!t.height||!t.width)throw Object.defineProperty(Error(`An object should only be passed to the image component src parameter if it comes from a static image import. It must include height and width. Received ${JSON.stringify(t)}`),"__NEXT_ERROR_CODE",{value:"E48",enumerable:!1,configurable:!0});if(L=t.blurWidth,I=t.blurHeight,S=S||t.blurDataURL,H=t.src,!m)if(V||q){if(V&&!q){let e=V/t.width;q=Math.round(t.height*e)}else if(!V&&q){let e=q/t.height;V=Math.round(t.width*e)}}else V=t.width,q=t.height}let W=!s&&!u&&("lazy"===f||void 0===f);(!(e="string"==typeof e?e:H)||e.startsWith("data:")||e.startsWith("blob:"))&&(r=!0,W=!1),O.unoptimized&&(r=!0),U&&!O.dangerouslyAllowSVG&&e.split("?",1)[0].endsWith(".svg")&&(r=!0);let K=c(p),G=Object.assign(m?{position:"absolute",height:"100%",width:"100%",left:0,top:0,right:0,bottom:0,objectFit:j,objectPosition:C}:{},B?{}:{color:"transparent"},v),X=D||"empty"===_?null:"blur"===_?`url("data:image/svg+xml;charset=utf-8,${(0,n.getImageBlurSvg)({widthInt:V,heightInt:q,blurWidth:L,blurHeight:I,blurDataURL:S||"",objectFit:G.objectFit})}")`:`url("${_}")`,Z=a.includes(G.objectFit)?"fill"===G.objectFit?"100% 100%":"cover":G.objectFit,Y=X?{backgroundSize:Z,backgroundPosition:G.objectPosition||"50% 50%",backgroundRepeat:"no-repeat",backgroundImage:X}:{},J=d({config:O,src:e,unoptimized:r,width:V,quality:K,sizes:t,loader:$}),Q=W?"lazy":f;return{props:{...R,loading:Q,fetchPriority:E,width:V,height:q,decoding:k,className:h,style:{...G,...Y},sizes:J.sizes,srcSet:J.srcSet,src:y||J.src},meta:{unoptimized:r,preload:u||s,placeholder:_,fill:m}}}},480327,(e,t,r)=>{"use strict";function n(e,t){let r=e||75;return t?.qualities?.length?t.qualities.reduce((e,t)=>Math.abs(t-r)<Math.abs(e-r)?t:e,0):r}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"findClosestQuality",{enumerable:!0,get:function(){return n}})},868927,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"default",{enumerable:!0,get:function(){return a}});let n=e.r(480327);function i({config:e,src:t,width:r,quality:i}){if(t.startsWith("/")&&t.includes("?")&&e.localPatterns?.length===1&&"**"===e.localPatterns[0].pathname&&""===e.localPatterns[0].search)throw Object.defineProperty(Error(`Image with src "${t}" is using a query string which is not configured in images.localPatterns.
Read more: https://nextjs.org/docs/messages/next-image-unconfigured-localpatterns`),"__NEXT_ERROR_CODE",{value:"E871",enumerable:!1,configurable:!0});let a=(0,n.findClosestQuality)(i,e);return`${e.path}?url=${encodeURIComponent(t)}&w=${r}&q=${a}${t.startsWith("/_next/static/media/"),""}`}i.__next_img_default=!0;let a=i},599501,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"useMergedRef",{enumerable:!0,get:function(){return i}});let n=e.r(136960);function i(e,t){let r=(0,n.useRef)(null),i=(0,n.useRef)(null);return(0,n.useCallback)(n=>{if(null===n){let e=r.current;e&&(r.current=null,e());let t=i.current;t&&(i.current=null,t())}else e&&(r.current=a(e,n)),t&&(i.current=a(t,n))},[e,t])}function a(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let r=e(t);return"function"==typeof r?r:()=>e(null)}}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},287157,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"Image",{enumerable:!0,get:function(){return x}});let n=e.r(2879),i=e.r(887602),a=e.r(94601),o=i._(e.r(136960)),s=n._(e.r(905674)),l=n._(e.r(130935)),c=e.r(292487),u=e.r(584594),d=e.r(630014);e.r(186072);let f=e.r(968412),h=n._(e.r(868927)),p=e.r(599501),b={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],qualities:[75],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0};function g(e,t,r,n,i,a,o){let s=e?.src;e&&e["data-loaded-src"]!==s&&(e["data-loaded-src"]=s,("decode"in e?e.decode():Promise.resolve()).catch(()=>{}).then(()=>{if(e.parentElement&&e.isConnected){if("empty"!==t&&i(!0),r?.current){let t=new Event("load");Object.defineProperty(t,"target",{writable:!1,value:e});let n=!1,i=!1;r.current({...t,nativeEvent:t,currentTarget:e,target:e,isDefaultPrevented:()=>n,isPropagationStopped:()=>i,persist:()=>{},preventDefault:()=>{n=!0,t.preventDefault()},stopPropagation:()=>{i=!0,t.stopPropagation()}})}n?.current&&n.current(e)}}))}function m(e){return o.use?{fetchPriority:e}:{fetchpriority:e}}"undefined"==typeof window&&(globalThis.__NEXT_IMAGE_IMPORTED=!0);let v=(0,o.forwardRef)(({src:e,srcSet:t,sizes:r,height:n,width:i,decoding:s,className:l,style:c,fetchPriority:u,placeholder:d,loading:f,unoptimized:h,fill:b,onLoadRef:v,onLoadingCompleteRef:y,setBlurComplete:x,setShowAltText:w,sizesInput:_,onLoad:S,onError:E,...k},N)=>{let j=(0,o.useCallback)(e=>{e&&(E&&(e.src=e.src),e.complete&&g(e,d,v,y,x,h,_))},[e,d,v,y,x,E,h,_]),C=(0,p.useMergedRef)(N,j);return(0,a.jsx)("img",{...k,...m(u),loading:f,width:i,height:n,decoding:s,"data-nimg":b?"fill":"1",className:l,style:c,sizes:r,srcSet:t,src:e,ref:C,onLoad:e=>{g(e.currentTarget,d,v,y,x,h,_)},onError:e=>{w(!0),"empty"!==d&&x(!0),E&&E(e)}})});function y({isAppRouter:e,imgAttributes:t}){let r={as:"image",imageSrcSet:t.srcSet,imageSizes:t.sizes,crossOrigin:t.crossOrigin,referrerPolicy:t.referrerPolicy,...m(t.fetchPriority)};return e&&s.default.preload?(s.default.preload(t.src,r),null):(0,a.jsx)(l.default,{children:(0,a.jsx)("link",{rel:"preload",href:t.srcSet?void 0:t.src,...r},"__nimg-"+t.src+t.srcSet+t.sizes)})}let x=(0,o.forwardRef)((e,t)=>{let r=!(0,o.useContext)(f.RouterContext),n=(0,o.useContext)(d.ImageConfigContext),i=(0,o.useMemo)(()=>{let e=b||n||u.imageConfigDefault,t=[...e.deviceSizes,...e.imageSizes].sort((e,t)=>e-t),r=e.deviceSizes.sort((e,t)=>e-t),i=e.qualities?.sort((e,t)=>e-t);return{...e,allSizes:t,deviceSizes:r,qualities:i,localPatterns:"undefined"==typeof window?n?.localPatterns:e.localPatterns}},[n]),{onLoad:s,onLoadingComplete:l}=e,p=(0,o.useRef)(s);(0,o.useEffect)(()=>{p.current=s},[s]);let g=(0,o.useRef)(l);(0,o.useEffect)(()=>{g.current=l},[l]);let[m,x]=(0,o.useState)(!1),[w,_]=(0,o.useState)(!1),{props:S,meta:E}=(0,c.getImgProps)(e,{defaultLoader:h.default,imgConf:i,blurComplete:m,showAltText:w});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(v,{...S,unoptimized:E.unoptimized,placeholder:E.placeholder,fill:E.fill,onLoadRef:p,onLoadingCompleteRef:g,setBlurComplete:x,setShowAltText:_,sizesInput:e.sizes,ref:t}),E.preload?(0,a.jsx)(y,{isAppRouter:r,imgAttributes:S}):null]})});("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},432563,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{default:function(){return l},getImageProps:function(){return s}});let n=e.r(2879),i=e.r(292487),a=e.r(287157),o=n._(e.r(868927));function s(e){let{props:t}=(0,i.getImgProps)(e,{defaultLoader:o.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],qualities:[75],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}}let l=a.Image},736206,(e,t,r)=>{t.exports=e.r(432563)},317918,(e,t,r)=>{"use strict";t.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||0x1fffffffffffff,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}},235506,(e,t,r)=>{"use strict";var n=e.i(119322);t.exports="object"==typeof n.default&&n.default.env&&n.default.env.NODE_DEBUG&&/\bsemver\b/i.test(n.default.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{}},183708,(e,t,r)=>{"use strict";let{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:i,MAX_LENGTH:a}=e.r(317918),o=e.r(235506),s=(r=t.exports={}).re=[],l=r.safeRe=[],c=r.src=[],u=r.safeSrc=[],d=r.t={},f=0,h="[a-zA-Z0-9-]",p=[["\\s",1],["\\d",a],[h,i]],b=e=>{for(let[t,r]of p)e=e.split(`${t}*`).join(`${t}{0,${r}}`).split(`${t}+`).join(`${t}{1,${r}}`);return e},g=(e,t,r)=>{let n=b(t),i=f++;o(e,i,t),d[e]=i,c[i]=t,u[i]=n,s[i]=new RegExp(t,r?"g":void 0),l[i]=new RegExp(n,r?"g":void 0)};g("NUMERICIDENTIFIER","0|[1-9]\\d*"),g("NUMERICIDENTIFIERLOOSE","\\d+"),g("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${h}*`),g("MAINVERSION",`(${c[d.NUMERICIDENTIFIER]})\\.(${c[d.NUMERICIDENTIFIER]})\\.(${c[d.NUMERICIDENTIFIER]})`),g("MAINVERSIONLOOSE",`(${c[d.NUMERICIDENTIFIERLOOSE]})\\.(${c[d.NUMERICIDENTIFIERLOOSE]})\\.(${c[d.NUMERICIDENTIFIERLOOSE]})`),g("PRERELEASEIDENTIFIER",`(?:${c[d.NONNUMERICIDENTIFIER]}|${c[d.NUMERICIDENTIFIER]})`),g("PRERELEASEIDENTIFIERLOOSE",`(?:${c[d.NONNUMERICIDENTIFIER]}|${c[d.NUMERICIDENTIFIERLOOSE]})`),g("PRERELEASE",`(?:-(${c[d.PRERELEASEIDENTIFIER]}(?:\\.${c[d.PRERELEASEIDENTIFIER]})*))`),g("PRERELEASELOOSE",`(?:-?(${c[d.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${c[d.PRERELEASEIDENTIFIERLOOSE]})*))`),g("BUILDIDENTIFIER",`${h}+`),g("BUILD",`(?:\\+(${c[d.BUILDIDENTIFIER]}(?:\\.${c[d.BUILDIDENTIFIER]})*))`),g("FULLPLAIN",`v?${c[d.MAINVERSION]}${c[d.PRERELEASE]}?${c[d.BUILD]}?`),g("FULL",`^${c[d.FULLPLAIN]}$`),g("LOOSEPLAIN",`[v=\\s]*${c[d.MAINVERSIONLOOSE]}${c[d.PRERELEASELOOSE]}?${c[d.BUILD]}?`),g("LOOSE",`^${c[d.LOOSEPLAIN]}$`),g("GTLT","((?:<|>)?=?)"),g("XRANGEIDENTIFIERLOOSE",`${c[d.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),g("XRANGEIDENTIFIER",`${c[d.NUMERICIDENTIFIER]}|x|X|\\*`),g("XRANGEPLAIN",`[v=\\s]*(${c[d.XRANGEIDENTIFIER]})(?:\\.(${c[d.XRANGEIDENTIFIER]})(?:\\.(${c[d.XRANGEIDENTIFIER]})(?:${c[d.PRERELEASE]})?${c[d.BUILD]}?)?)?`),g("XRANGEPLAINLOOSE",`[v=\\s]*(${c[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[d.XRANGEIDENTIFIERLOOSE]})(?:${c[d.PRERELEASELOOSE]})?${c[d.BUILD]}?)?)?`),g("XRANGE",`^${c[d.GTLT]}\\s*${c[d.XRANGEPLAIN]}$`),g("XRANGELOOSE",`^${c[d.GTLT]}\\s*${c[d.XRANGEPLAINLOOSE]}$`),g("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),g("COERCE",`${c[d.COERCEPLAIN]}(?:$|[^\\d])`),g("COERCEFULL",c[d.COERCEPLAIN]+`(?:${c[d.PRERELEASE]})?`+`(?:${c[d.BUILD]})?`+"(?:$|[^\\d])"),g("COERCERTL",c[d.COERCE],!0),g("COERCERTLFULL",c[d.COERCEFULL],!0),g("LONETILDE","(?:~>?)"),g("TILDETRIM",`(\\s*)${c[d.LONETILDE]}\\s+`,!0),r.tildeTrimReplace="$1~",g("TILDE",`^${c[d.LONETILDE]}${c[d.XRANGEPLAIN]}$`),g("TILDELOOSE",`^${c[d.LONETILDE]}${c[d.XRANGEPLAINLOOSE]}$`),g("LONECARET","(?:\\^)"),g("CARETTRIM",`(\\s*)${c[d.LONECARET]}\\s+`,!0),r.caretTrimReplace="$1^",g("CARET",`^${c[d.LONECARET]}${c[d.XRANGEPLAIN]}$`),g("CARETLOOSE",`^${c[d.LONECARET]}${c[d.XRANGEPLAINLOOSE]}$`),g("COMPARATORLOOSE",`^${c[d.GTLT]}\\s*(${c[d.LOOSEPLAIN]})$|^$`),g("COMPARATOR",`^${c[d.GTLT]}\\s*(${c[d.FULLPLAIN]})$|^$`),g("COMPARATORTRIM",`(\\s*)${c[d.GTLT]}\\s*(${c[d.LOOSEPLAIN]}|${c[d.XRANGEPLAIN]})`,!0),r.comparatorTrimReplace="$1$2$3",g("HYPHENRANGE",`^\\s*(${c[d.XRANGEPLAIN]})\\s+-\\s+(${c[d.XRANGEPLAIN]})\\s*$`),g("HYPHENRANGELOOSE",`^\\s*(${c[d.XRANGEPLAINLOOSE]})\\s+-\\s+(${c[d.XRANGEPLAINLOOSE]})\\s*$`),g("STAR","(<|>)?=?\\s*\\*"),g("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),g("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")},439358,(e,t,r)=>{"use strict";let n=Object.freeze({loose:!0}),i=Object.freeze({});t.exports=e=>e?"object"!=typeof e?n:e:i},793433,(e,t,r)=>{"use strict";let n=/^[0-9]+$/,i=(e,t)=>{let r=n.test(e),i=n.test(t);return r&&i&&(e*=1,t*=1),e===t?0:r&&!i?-1:i&&!r?1:e<t?-1:1},a=(e,t)=>i(t,e);t.exports={compareIdentifiers:i,rcompareIdentifiers:a}},60583,(e,t,r)=>{"use strict";let n=e.r(235506),{MAX_LENGTH:i,MAX_SAFE_INTEGER:a}=e.r(317918),{safeRe:o,t:s}=e.r(183708),l=e.r(439358),{compareIdentifiers:c}=e.r(793433);class u{constructor(e,t){if(t=l(t),e instanceof u)if(!!t.loose===e.loose&&!!t.includePrerelease===e.includePrerelease)return e;else e=e.version;else if("string"!=typeof e)throw TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>i)throw TypeError(`version is longer than ${i} characters`);n("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const r=e.trim().match(t.loose?o[s.LOOSE]:o[s.FULL]);if(!r)throw TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>a||this.major<0)throw TypeError("Invalid major version");if(this.minor>a||this.minor<0)throw TypeError("Invalid minor version");if(this.patch>a||this.patch<0)throw TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(e=>{if(/^[0-9]+$/.test(e)){let t=+e;if(t>=0&&t<a)return t}return e}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(n("SemVer.compare",this.version,this.options,e),!(e instanceof u)){if("string"==typeof e&&e===this.version)return 0;e=new u(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof u||(e=new u(e,this.options)),c(this.major,e.major)||c(this.minor,e.minor)||c(this.patch,e.patch)}comparePre(e){if(e instanceof u||(e=new u(e,this.options)),this.prerelease.length&&!e.prerelease.length)return -1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{let r=this.prerelease[t],i=e.prerelease[t];if(n("prerelease compare",t,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return -1;else if(r===i)continue;else return c(r,i)}while(++t)}compareBuild(e){e instanceof u||(e=new u(e,this.options));let t=0;do{let r=this.build[t],i=e.build[t];if(n("build compare",t,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return -1;else if(r===i)continue;else return c(r,i)}while(++t)}inc(e,t,r){if(e.startsWith("pre")){if(!t&&!1===r)throw Error("invalid increment argument: identifier is empty");if(t){let e=`-${t}`.match(this.options.loose?o[s.PRERELEASELOOSE]:o[s.PRERELEASE]);if(!e||e[1]!==t)throw Error(`invalid identifier: ${t}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,r),this.inc("pre",t,r);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,r),this.inc("pre",t,r);break;case"release":if(0===this.prerelease.length)throw Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(0!==this.minor||0!==this.patch||0===this.prerelease.length)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(0!==this.patch||0===this.prerelease.length)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{let e=+!!Number(r);if(0===this.prerelease.length)this.prerelease=[e];else{let n=this.prerelease.length;for(;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);if(-1===n){if(t===this.prerelease.join(".")&&!1===r)throw Error("invalid increment argument: identifier already exists");this.prerelease.push(e)}}if(t){let n=[t,e];!1===r&&(n=[t]),0===c(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=n):this.prerelease=n}break}default:throw Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}t.exports=u},491684,(e,t,r)=>{"use strict";let n=e.r(60583);t.exports=(e,t,r=!1)=>{if(e instanceof n)return e;try{return new n(e,t)}catch(e){if(!r)return null;throw e}}},361536,(e,t,r)=>{"use strict";let n=e.r(491684);t.exports=(e,t)=>{let r=n(e,t);return r?r.version:null}},446082,(e,t,r)=>{"use strict";let n=e.r(491684);t.exports=(e,t)=>{let r=n(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null}},579119,(e,t,r)=>{"use strict";let n=e.r(60583);t.exports=(e,t,r,i,a)=>{"string"==typeof r&&(a=i,i=r,r=void 0);try{return new n(e instanceof n?e.version:e,r).inc(t,i,a).version}catch(e){return null}}},127511,(e,t,r)=>{"use strict";let n=e.r(491684);t.exports=(e,t)=>{let r=n(e,null,!0),i=n(t,null,!0),a=r.compare(i);if(0===a)return null;let o=a>0,s=o?r:i,l=o?i:r,c=!!s.prerelease.length;if(l.prerelease.length&&!c){if(!l.patch&&!l.minor)return"major";if(0===l.compareMain(s))return l.minor&&!l.patch?"minor":"patch"}let u=c?"pre":"";return r.major!==i.major?u+"major":r.minor!==i.minor?u+"minor":r.patch!==i.patch?u+"patch":"prerelease"}},505241,(e,t,r)=>{"use strict";let n=e.r(60583);t.exports=(e,t)=>new n(e,t).major},814373,(e,t,r)=>{"use strict";let n=e.r(60583);t.exports=(e,t)=>new n(e,t).minor},634371,(e,t,r)=>{"use strict";let n=e.r(60583);t.exports=(e,t)=>new n(e,t).patch},459644,(e,t,r)=>{"use strict";let n=e.r(491684);t.exports=(e,t)=>{let r=n(e,t);return r&&r.prerelease.length?r.prerelease:null}},953838,(e,t,r)=>{"use strict";let n=e.r(60583);t.exports=(e,t,r)=>new n(e,r).compare(new n(t,r))},617118,(e,t,r)=>{"use strict";let n=e.r(953838);t.exports=(e,t,r)=>n(t,e,r)},510361,(e,t,r)=>{"use strict";let n=e.r(953838);t.exports=(e,t)=>n(e,t,!0)},141266,(e,t,r)=>{"use strict";let n=e.r(60583);t.exports=(e,t,r)=>{let i=new n(e,r),a=new n(t,r);return i.compare(a)||i.compareBuild(a)}},949879,(e,t,r)=>{"use strict";let n=e.r(141266);t.exports=(e,t)=>e.sort((e,r)=>n(e,r,t))},35112,(e,t,r)=>{"use strict";let n=e.r(141266);t.exports=(e,t)=>e.sort((e,r)=>n(r,e,t))},169370,(e,t,r)=>{"use strict";let n=e.r(953838);t.exports=(e,t,r)=>n(e,t,r)>0},802204,(e,t,r)=>{"use strict";let n=e.r(953838);t.exports=(e,t,r)=>0>n(e,t,r)},270596,(e,t,r)=>{"use strict";let n=e.r(953838);t.exports=(e,t,r)=>0===n(e,t,r)},960549,(e,t,r)=>{"use strict";let n=e.r(953838);t.exports=(e,t,r)=>0!==n(e,t,r)},161233,(e,t,r)=>{"use strict";let n=e.r(953838);t.exports=(e,t,r)=>n(e,t,r)>=0},858590,(e,t,r)=>{"use strict";let n=e.r(953838);t.exports=(e,t,r)=>0>=n(e,t,r)},282550,(e,t,r)=>{"use strict";let n=e.r(270596),i=e.r(960549),a=e.r(169370),o=e.r(161233),s=e.r(802204),l=e.r(858590);t.exports=(e,t,r,c)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return n(e,r,c);case"!=":return i(e,r,c);case">":return a(e,r,c);case">=":return o(e,r,c);case"<":return s(e,r,c);case"<=":return l(e,r,c);default:throw TypeError(`Invalid operator: ${t}`)}}},312418,(e,t,r)=>{"use strict";let n=e.r(60583),i=e.r(491684),{safeRe:a,t:o}=e.r(183708);t.exports=(e,t)=>{if(e instanceof n)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let r=null;if((t=t||{}).rtl){let n,i=t.includePrerelease?a[o.COERCERTLFULL]:a[o.COERCERTL];for(;(n=i.exec(e))&&(!r||r.index+r[0].length!==e.length);)r&&n.index+n[0].length===r.index+r[0].length||(r=n),i.lastIndex=n.index+n[1].length+n[2].length;i.lastIndex=-1}else r=e.match(t.includePrerelease?a[o.COERCEFULL]:a[o.COERCE]);if(null===r)return null;let s=r[2],l=r[3]||"0",c=r[4]||"0",u=t.includePrerelease&&r[5]?`-${r[5]}`:"",d=t.includePrerelease&&r[6]?`+${r[6]}`:"";return i(`${s}.${l}.${c}${u}${d}`,t)}},885057,(e,t,r)=>{"use strict";class n{constructor(){this.max=1e3,this.map=new Map}get(e){let t=this.map.get(e);if(void 0!==t)return this.map.delete(e),this.map.set(e,t),t}delete(e){return this.map.delete(e)}set(e,t){if(!this.delete(e)&&void 0!==t){if(this.map.size>=this.max){let e=this.map.keys().next().value;this.delete(e)}this.map.set(e,t)}return this}}t.exports=n},106999,(e,t,r)=>{"use strict";let n=/\s+/g;class i{constructor(e,t){if(t=o(t),e instanceof i)if(!!t.loose===e.loose&&!!t.includePrerelease===e.includePrerelease)return e;else return new i(e.raw,t);if(e instanceof s)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().replace(n," "),this.set=this.raw.split("||").map(e=>this.parseRange(e.trim())).filter(e=>e.length),!this.set.length)throw TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const e=this.set[0];if(this.set=this.set.filter(e=>!m(e[0])),0===this.set.length)this.set=[e];else if(this.set.length>1){for(const e of this.set)if(1===e.length&&v(e[0])){this.set=[e];break}}}this.formatted=void 0}get range(){if(void 0===this.formatted){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let t=this.set[e];for(let e=0;e<t.length;e++)e>0&&(this.formatted+=" "),this.formatted+=t[e].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let t=((this.options.includePrerelease&&b)|(this.options.loose&&g))+":"+e,r=a.get(t);if(r)return r;let n=this.options.loose,i=n?u[d.HYPHENRANGELOOSE]:u[d.HYPHENRANGE];l("hyphen replace",e=e.replace(i,A(this.options.includePrerelease))),l("comparator trim",e=e.replace(u[d.COMPARATORTRIM],f)),l("tilde trim",e=e.replace(u[d.TILDETRIM],h)),l("caret trim",e=e.replace(u[d.CARETTRIM],p));let o=e.split(" ").map(e=>x(e,this.options)).join(" ").split(/\s+/).map(e=>M(e,this.options));n&&(o=o.filter(e=>(l("loose invalid filter",e,this.options),!!e.match(u[d.COMPARATORLOOSE])))),l("range list",o);let c=new Map;for(let e of o.map(e=>new s(e,this.options))){if(m(e))return[e];c.set(e.value,e)}c.size>1&&c.has("")&&c.delete("");let v=[...c.values()];return a.set(t,v),v}intersects(e,t){if(!(e instanceof i))throw TypeError("a Range is required");return this.set.some(r=>y(r,t)&&e.set.some(e=>y(e,t)&&r.every(r=>e.every(e=>r.intersects(e,t)))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new c(e,this.options)}catch(e){return!1}for(let t=0;t<this.set.length;t++)if(R(this.set[t],e,this.options))return!0;return!1}}t.exports=i;let a=new(e.r(885057)),o=e.r(439358),s=e.r(256131),l=e.r(235506),c=e.r(60583),{safeRe:u,t:d,comparatorTrimReplace:f,tildeTrimReplace:h,caretTrimReplace:p}=e.r(183708),{FLAG_INCLUDE_PRERELEASE:b,FLAG_LOOSE:g}=e.r(317918),m=e=>"<0.0.0-0"===e.value,v=e=>""===e.value,y=(e,t)=>{let r=!0,n=e.slice(),i=n.pop();for(;r&&n.length;)r=n.every(e=>i.intersects(e,t)),i=n.pop();return r},x=(e,t)=>(l("comp",e,t),l("caret",e=E(e,t)),l("tildes",e=_(e,t)),l("xrange",e=N(e,t)),l("stars",e=C(e,t)),e),w=e=>!e||"x"===e.toLowerCase()||"*"===e,_=(e,t)=>e.trim().split(/\s+/).map(e=>S(e,t)).join(" "),S=(e,t)=>{let r=t.loose?u[d.TILDELOOSE]:u[d.TILDE];return e.replace(r,(t,r,n,i,a)=>{let o;return l("tilde",e,t,r,n,i,a),w(r)?o="":w(n)?o=`>=${r}.0.0 <${+r+1}.0.0-0`:w(i)?o=`>=${r}.${n}.0 <${r}.${+n+1}.0-0`:a?(l("replaceTilde pr",a),o=`>=${r}.${n}.${i}-${a} <${r}.${+n+1}.0-0`):o=`>=${r}.${n}.${i} <${r}.${+n+1}.0-0`,l("tilde return",o),o})},E=(e,t)=>e.trim().split(/\s+/).map(e=>k(e,t)).join(" "),k=(e,t)=>{l("caret",e,t);let r=t.loose?u[d.CARETLOOSE]:u[d.CARET],n=t.includePrerelease?"-0":"";return e.replace(r,(t,r,i,a,o)=>{let s;return l("caret",e,t,r,i,a,o),w(r)?s="":w(i)?s=`>=${r}.0.0${n} <${+r+1}.0.0-0`:w(a)?s="0"===r?`>=${r}.${i}.0${n} <${r}.${+i+1}.0-0`:`>=${r}.${i}.0${n} <${+r+1}.0.0-0`:o?(l("replaceCaret pr",o),s="0"===r?"0"===i?`>=${r}.${i}.${a}-${o} <${r}.${i}.${+a+1}-0`:`>=${r}.${i}.${a}-${o} <${r}.${+i+1}.0-0`:`>=${r}.${i}.${a}-${o} <${+r+1}.0.0-0`):(l("no pr"),s="0"===r?"0"===i?`>=${r}.${i}.${a}${n} <${r}.${i}.${+a+1}-0`:`>=${r}.${i}.${a}${n} <${r}.${+i+1}.0-0`:`>=${r}.${i}.${a} <${+r+1}.0.0-0`),l("caret return",s),s})},N=(e,t)=>(l("replaceXRanges",e,t),e.split(/\s+/).map(e=>j(e,t)).join(" ")),j=(e,t)=>{e=e.trim();let r=t.loose?u[d.XRANGELOOSE]:u[d.XRANGE];return e.replace(r,(r,n,i,a,o,s)=>{l("xRange",e,r,n,i,a,o,s);let c=w(i),u=c||w(a),d=u||w(o),f=d;return"="===n&&f&&(n=""),s=t.includePrerelease?"-0":"",c?r=">"===n||"<"===n?"<0.0.0-0":"*":n&&f?(u&&(a=0),o=0,">"===n?(n=">=",u?(i=+i+1,a=0):a=+a+1,o=0):"<="===n&&(n="<",u?i=+i+1:a=+a+1),"<"===n&&(s="-0"),r=`${n+i}.${a}.${o}${s}`):u?r=`>=${i}.0.0${s} <${+i+1}.0.0-0`:d&&(r=`>=${i}.${a}.0${s} <${i}.${+a+1}.0-0`),l("xRange return",r),r})},C=(e,t)=>(l("replaceStars",e,t),e.trim().replace(u[d.STAR],"")),M=(e,t)=>(l("replaceGTE0",e,t),e.trim().replace(u[t.includePrerelease?d.GTE0PRE:d.GTE0],"")),A=e=>(t,r,n,i,a,o,s,l,c,u,d,f)=>(r=w(n)?"":w(i)?`>=${n}.0.0${e?"-0":""}`:w(a)?`>=${n}.${i}.0${e?"-0":""}`:o?`>=${r}`:`>=${r}${e?"-0":""}`,l=w(c)?"":w(u)?`<${+c+1}.0.0-0`:w(d)?`<${c}.${+u+1}.0-0`:f?`<=${c}.${u}.${d}-${f}`:e?`<${c}.${u}.${+d+1}-0`:`<=${l}`,`${r} ${l}`.trim()),R=(e,t,r)=>{for(let r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let r=0;r<e.length;r++)if(l(e[r].semver),e[r].semver!==s.ANY&&e[r].semver.prerelease.length>0){let n=e[r].semver;if(n.major===t.major&&n.minor===t.minor&&n.patch===t.patch)return!0}return!1}return!0}},256131,(e,t,r)=>{"use strict";let n=Symbol("SemVer ANY");class i{static get ANY(){return n}constructor(e,t){if(t=a(t),e instanceof i)if(!!t.loose===e.loose)return e;else e=e.value;c("comparator",e=e.trim().split(/\s+/).join(" "),t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===n?this.value="":this.value=this.operator+this.semver.version,c("comp",this)}parse(e){let t=this.options.loose?o[s.COMPARATORLOOSE]:o[s.COMPARATOR],r=e.match(t);if(!r)throw TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==r[1]?r[1]:"","="===this.operator&&(this.operator=""),r[2]?this.semver=new u(r[2],this.options.loose):this.semver=n}toString(){return this.value}test(e){if(c("Comparator.test",e,this.options.loose),this.semver===n||e===n)return!0;if("string"==typeof e)try{e=new u(e,this.options)}catch(e){return!1}return l(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof i))throw TypeError("a Comparator is required");return""===this.operator?""===this.value||new d(e.value,t).test(this.value):""===e.operator?""===e.value||new d(this.value,t).test(e.semver):!((t=a(t)).includePrerelease&&("<0.0.0-0"===this.value||"<0.0.0-0"===e.value)||!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0")))&&!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||l(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||l(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">"))}}t.exports=i;let a=e.r(439358),{safeRe:o,t:s}=e.r(183708),l=e.r(282550),c=e.r(235506),u=e.r(60583),d=e.r(106999)},469953,(e,t,r)=>{"use strict";let n=e.r(106999);t.exports=(e,t,r)=>{try{t=new n(t,r)}catch(e){return!1}return t.test(e)}},573698,(e,t,r)=>{"use strict";let n=e.r(106999);t.exports=(e,t)=>new n(e,t).set.map(e=>e.map(e=>e.value).join(" ").trim().split(" "))},682590,(e,t,r)=>{"use strict";let n=e.r(60583),i=e.r(106999);t.exports=(e,t,r)=>{let a=null,o=null,s=null;try{s=new i(t,r)}catch(e){return null}return e.forEach(e=>{s.test(e)&&(!a||-1===o.compare(e))&&(o=new n(a=e,r))}),a}},801995,(e,t,r)=>{"use strict";let n=e.r(60583),i=e.r(106999);t.exports=(e,t,r)=>{let a=null,o=null,s=null;try{s=new i(t,r)}catch(e){return null}return e.forEach(e=>{s.test(e)&&(!a||1===o.compare(e))&&(o=new n(a=e,r))}),a}},944049,(e,t,r)=>{"use strict";let n=e.r(60583),i=e.r(106999),a=e.r(169370);t.exports=(e,t)=>{e=new i(e,t);let r=new n("0.0.0");if(e.test(r)||(r=new n("0.0.0-0"),e.test(r)))return r;r=null;for(let t=0;t<e.set.length;++t){let i=e.set[t],o=null;i.forEach(e=>{let t=new n(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":(!o||a(t,o))&&(o=t);break;case"<":case"<=":break;default:throw Error(`Unexpected operation: ${e.operator}`)}}),o&&(!r||a(r,o))&&(r=o)}return r&&e.test(r)?r:null}},678095,(e,t,r)=>{"use strict";let n=e.r(106999);t.exports=(e,t)=>{try{return new n(e,t).range||"*"}catch(e){return null}}},210822,(e,t,r)=>{"use strict";let n=e.r(60583),i=e.r(256131),{ANY:a}=i,o=e.r(106999),s=e.r(469953),l=e.r(169370),c=e.r(802204),u=e.r(858590),d=e.r(161233);t.exports=(e,t,r,f)=>{let h,p,b,g,m;switch(e=new n(e,f),t=new o(t,f),r){case">":h=l,p=u,b=c,g=">",m=">=";break;case"<":h=c,p=d,b=l,g="<",m="<=";break;default:throw TypeError('Must provide a hilo val of "<" or ">"')}if(s(e,t,f))return!1;for(let r=0;r<t.set.length;++r){let n=t.set[r],o=null,s=null;if(n.forEach(e=>{e.semver===a&&(e=new i(">=0.0.0")),o=o||e,s=s||e,h(e.semver,o.semver,f)?o=e:b(e.semver,s.semver,f)&&(s=e)}),o.operator===g||o.operator===m||(!s.operator||s.operator===g)&&p(e,s.semver)||s.operator===m&&b(e,s.semver))return!1}return!0}},785144,(e,t,r)=>{"use strict";let n=e.r(210822);t.exports=(e,t,r)=>n(e,t,">",r)},341823,(e,t,r)=>{"use strict";let n=e.r(210822);t.exports=(e,t,r)=>n(e,t,"<",r)},66398,(e,t,r)=>{"use strict";let n=e.r(106999);t.exports=(e,t,r)=>(e=new n(e,r),t=new n(t,r),e.intersects(t,r))},360390,(e,t,r)=>{"use strict";let n=e.r(469953),i=e.r(953838);t.exports=(e,t,r)=>{let a=[],o=null,s=null,l=e.sort((e,t)=>i(e,t,r));for(let e of l)n(e,t,r)?(s=e,o||(o=e)):(s&&a.push([o,s]),s=null,o=null);o&&a.push([o,null]);let c=[];for(let[e,t]of a)e===t?c.push(e):t||e!==l[0]?t?e===l[0]?c.push(`<=${t}`):c.push(`${e} - ${t}`):c.push(`>=${e}`):c.push("*");let u=c.join(" || "),d="string"==typeof t.raw?t.raw:String(t);return u.length<d.length?u:t}},418402,(e,t,r)=>{"use strict";let n=e.r(106999),i=e.r(256131),{ANY:a}=i,o=e.r(469953),s=e.r(953838),l=(e,t,r={})=>{if(e===t)return!0;e=new n(e,r),t=new n(t,r);let i=!1;e:for(let n of e.set){for(let e of t.set){let t=d(n,e,r);if(i=i||null!==t,t)continue e}if(i)return!1}return!0},c=[new i(">=0.0.0-0")],u=[new i(">=0.0.0")],d=(e,t,r)=>{let n,i,l,d,p,b,g;if(e===t)return!0;if(1===e.length&&e[0].semver===a)if(1===t.length&&t[0].semver===a)return!0;else e=r.includePrerelease?c:u;if(1===t.length&&t[0].semver===a)if(r.includePrerelease)return!0;else t=u;let m=new Set;for(let t of e)">"===t.operator||">="===t.operator?n=f(n,t,r):"<"===t.operator||"<="===t.operator?i=h(i,t,r):m.add(t.semver);if(m.size>1)return null;if(n&&i&&((l=s(n.semver,i.semver,r))>0||0===l&&(">="!==n.operator||"<="!==i.operator)))return null;for(let e of m){if(n&&!o(e,String(n),r)||i&&!o(e,String(i),r))return null;for(let n of t)if(!o(e,String(n),r))return!1;return!0}let v=!!i&&!r.includePrerelease&&!!i.semver.prerelease.length&&i.semver,y=!!n&&!r.includePrerelease&&!!n.semver.prerelease.length&&n.semver;for(let e of(v&&1===v.prerelease.length&&"<"===i.operator&&0===v.prerelease[0]&&(v=!1),t)){if(g=g||">"===e.operator||">="===e.operator,b=b||"<"===e.operator||"<="===e.operator,n){if(y&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===y.major&&e.semver.minor===y.minor&&e.semver.patch===y.patch&&(y=!1),">"===e.operator||">="===e.operator){if((d=f(n,e,r))===e&&d!==n)return!1}else if(">="===n.operator&&!o(n.semver,String(e),r))return!1}if(i){if(v&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===v.major&&e.semver.minor===v.minor&&e.semver.patch===v.patch&&(v=!1),"<"===e.operator||"<="===e.operator){if((p=h(i,e,r))===e&&p!==i)return!1}else if("<="===i.operator&&!o(i.semver,String(e),r))return!1}if(!e.operator&&(i||n)&&0!==l)return!1}return(!n||!b||!!i||0===l)&&(!i||!g||!!n||0===l)&&!y&&!v&&!0},f=(e,t,r)=>{if(!e)return t;let n=s(e.semver,t.semver,r);return n>0?e:n<0||">"===t.operator&&">="===e.operator?t:e},h=(e,t,r)=>{if(!e)return t;let n=s(e.semver,t.semver,r);return n<0?e:n>0||"<"===t.operator&&"<="===e.operator?t:e};t.exports=l},989470,(e,t,r)=>{"use strict";let n=e.r(183708),i=e.r(317918),a=e.r(60583),o=e.r(793433),s=e.r(491684),l=e.r(361536),c=e.r(446082),u=e.r(579119),d=e.r(127511),f=e.r(505241),h=e.r(814373),p=e.r(634371),b=e.r(459644),g=e.r(953838),m=e.r(617118),v=e.r(510361),y=e.r(141266),x=e.r(949879),w=e.r(35112),_=e.r(169370),S=e.r(802204),E=e.r(270596),k=e.r(960549),N=e.r(161233),j=e.r(858590),C=e.r(282550),M=e.r(312418),A=e.r(256131),R=e.r(106999),T=e.r(469953),O=e.r(573698),L=e.r(682590),I=e.r(801995),P=e.r(944049),B=e.r(678095),D=e.r(210822),z=e.r(785144),F=e.r(341823),$=e.r(66398);t.exports={parse:s,valid:l,clean:c,inc:u,diff:d,major:f,minor:h,patch:p,prerelease:b,compare:g,rcompare:m,compareLoose:v,compareBuild:y,sort:x,rsort:w,gt:_,lt:S,eq:E,neq:k,gte:N,lte:j,cmp:C,coerce:M,Comparator:A,Range:R,satisfies:T,toComparators:O,maxSatisfying:L,minSatisfying:I,minVersion:P,validRange:B,outside:D,gtr:z,ltr:F,intersects:$,simplifyRange:e.r(360390),subset:e.r(418402),SemVer:a,re:n.re,src:n.src,tokens:n.t,SEMVER_SPEC_VERSION:i.SEMVER_SPEC_VERSION,RELEASE_TYPES:i.RELEASE_TYPES,compareIdentifiers:o.compareIdentifiers,rcompareIdentifiers:o.rcompareIdentifiers}},94161,(e,t,r)=>{},483977,(e,t,r)=>{var n=e.i(119322);e.r(94161);var i=e.r(136960),a=function(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}(i);function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}var l=void 0!==n.default&&n.default.env&&!0,c=function(e){return"[object String]"===Object.prototype.toString.call(e)},u=function(){function e(e){var t=void 0===e?{}:e,r=t.name,n=void 0===r?"stylesheet":r,i=t.optimizeForSpeed,a=void 0===i?l:i;d(c(n),"`name` must be a string"),this._name=n,this._deletedRulePlaceholder="#"+n+"-deleted-rule____{}",d("boolean"==typeof a,"`optimizeForSpeed` must be a boolean"),this._optimizeForSpeed=a,this._serverSheet=void 0,this._tags=[],this._injected=!1,this._rulesCount=0;var o="undefined"!=typeof window&&document.querySelector('meta[property="csp-nonce"]');this._nonce=o?o.getAttribute("content"):null}var t=e.prototype;return t.setOptimizeForSpeed=function(e){d("boolean"==typeof e,"`setOptimizeForSpeed` accepts a boolean"),d(0===this._rulesCount,"optimizeForSpeed cannot be when rules have already been inserted"),this.flush(),this._optimizeForSpeed=e,this.inject()},t.isOptimizeForSpeed=function(){return this._optimizeForSpeed},t.inject=function(){var e=this;if(d(!this._injected,"sheet already injected"),this._injected=!0,"undefined"!=typeof window&&this._optimizeForSpeed){this._tags[0]=this.makeStyleTag(this._name),this._optimizeForSpeed="insertRule"in this.getSheet(),this._optimizeForSpeed||(l||console.warn("StyleSheet: optimizeForSpeed mode not supported falling back to standard mode."),this.flush(),this._injected=!0);return}this._serverSheet={cssRules:[],insertRule:function(t,r){return"number"==typeof r?e._serverSheet.cssRules[r]={cssText:t}:e._serverSheet.cssRules.push({cssText:t}),r},deleteRule:function(t){e._serverSheet.cssRules[t]=null}}},t.getSheetForTag=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]},t.getSheet=function(){return this.getSheetForTag(this._tags[this._tags.length-1])},t.insertRule=function(e,t){if(d(c(e),"`insertRule` accepts only strings"),"undefined"==typeof window)return"number"!=typeof t&&(t=this._serverSheet.cssRules.length),this._serverSheet.insertRule(e,t),this._rulesCount++;if(this._optimizeForSpeed){var r=this.getSheet();"number"!=typeof t&&(t=r.cssRules.length);try{r.insertRule(e,t)}catch(t){return l||console.warn("StyleSheet: illegal rule: \n\n"+e+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),-1}}else{var n=this._tags[t];this._tags.push(this.makeStyleTag(this._name,e,n))}return this._rulesCount++},t.replaceRule=function(e,t){if(this._optimizeForSpeed||"undefined"==typeof window){var r="undefined"!=typeof window?this.getSheet():this._serverSheet;if(t.trim()||(t=this._deletedRulePlaceholder),!r.cssRules[e])return e;r.deleteRule(e);try{r.insertRule(t,e)}catch(n){l||console.warn("StyleSheet: illegal rule: \n\n"+t+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),r.insertRule(this._deletedRulePlaceholder,e)}}else{var n=this._tags[e];d(n,"old rule at index `"+e+"` not found"),n.textContent=t}return e},t.deleteRule=function(e){if("undefined"==typeof window)return void this._serverSheet.deleteRule(e);if(this._optimizeForSpeed)this.replaceRule(e,"");else{var t=this._tags[e];d(t,"rule at index `"+e+"` not found"),t.parentNode.removeChild(t),this._tags[e]=null}},t.flush=function(){this._injected=!1,this._rulesCount=0,"undefined"!=typeof window?(this._tags.forEach(function(e){return e&&e.parentNode.removeChild(e)}),this._tags=[]):this._serverSheet.cssRules=[]},t.cssRules=function(){var e=this;return"undefined"==typeof window?this._serverSheet.cssRules:this._tags.reduce(function(t,r){return r?t=t.concat(Array.prototype.map.call(e.getSheetForTag(r).cssRules,function(t){return t.cssText===e._deletedRulePlaceholder?null:t})):t.push(null),t},[])},t.makeStyleTag=function(e,t,r){t&&d(c(t),"makeStyleTag accepts only strings as second parameter");var n=document.createElement("style");this._nonce&&n.setAttribute("nonce",this._nonce),n.type="text/css",n.setAttribute("data-"+e,""),t&&n.appendChild(document.createTextNode(t));var i=document.head||document.getElementsByTagName("head")[0];return r?i.insertBefore(n,r):i.appendChild(n),n},s(e,[{key:"length",get:function(){return this._rulesCount}}]),e}();function d(e,t){if(!e)throw Error("StyleSheet: "+t+".")}var f=function(e){for(var t=5381,r=e.length;r;)t=33*t^e.charCodeAt(--r);return t>>>0},h=function(e){return e.replace(/\/style/gi,"\\/style")},p={};function b(e,t){if(!t)return"jsx-"+e;var r=String(t),n=e+r;return p[n]||(p[n]="jsx-"+f(e+"-"+r)),p[n]}function g(e,t){var r=/__jsx-style-dynamic-selector/g;"undefined"==typeof window&&(t=h(t));var n=e+t;return p[n]||(p[n]=t.replace(r,e)),p[n]}function m(e,t){return void 0===t&&(t={}),e.map(function(e){var r=e[0],n=e[1];return a.default.createElement("style",{id:"__"+r,key:"__"+r,nonce:t.nonce?t.nonce:void 0,dangerouslySetInnerHTML:{__html:n}})})}var v=function(){function e(e){var t=void 0===e?{}:e,r=t.styleSheet,n=void 0===r?null:r,i=t.optimizeForSpeed,a=void 0!==i&&i;this._sheet=n||new u({name:"styled-jsx",optimizeForSpeed:a}),this._sheet.inject(),n&&"boolean"==typeof a&&(this._sheet.setOptimizeForSpeed(a),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),this._fromServer=void 0,this._indices={},this._instancesCounts={}}var t=e.prototype;return t.add=function(e){var t=this;void 0===this._optimizeForSpeed&&(this._optimizeForSpeed=Array.isArray(e.children),this._sheet.setOptimizeForSpeed(this._optimizeForSpeed),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),"undefined"==typeof window||this._fromServer||(this._fromServer=this.selectFromServer(),this._instancesCounts=Object.keys(this._fromServer).reduce(function(e,t){return e[t]=0,e},{}));var r=this.getIdAndRules(e),n=r.styleId,i=r.rules;if(n in this._instancesCounts){this._instancesCounts[n]+=1;return}var a=i.map(function(e){return t._sheet.insertRule(e)}).filter(function(e){return -1!==e});this._indices[n]=a,this._instancesCounts[n]=1},t.remove=function(e){var t=this,r=this.getIdAndRules(e).styleId;if(y(r in this._instancesCounts,"styleId: `"+r+"` not found"),this._instancesCounts[r]-=1,this._instancesCounts[r]<1){var n=this._fromServer&&this._fromServer[r];n?(n.parentNode.removeChild(n),delete this._fromServer[r]):(this._indices[r].forEach(function(e){return t._sheet.deleteRule(e)}),delete this._indices[r]),delete this._instancesCounts[r]}},t.update=function(e,t){this.add(t),this.remove(e)},t.flush=function(){this._sheet.flush(),this._sheet.inject(),this._fromServer=void 0,this._indices={},this._instancesCounts={}},t.cssRules=function(){var e=this,t=this._fromServer?Object.keys(this._fromServer).map(function(t){return[t,e._fromServer[t]]}):[],r=this._sheet.cssRules();return t.concat(Object.keys(this._indices).map(function(t){return[t,e._indices[t].map(function(e){return r[e].cssText}).join(e._optimizeForSpeed?"":"\n")]}).filter(function(e){return!!e[1]}))},t.styles=function(e){return m(this.cssRules(),e)},t.getIdAndRules=function(e){var t=e.children,r=e.dynamic,n=e.id;if(r){var i=b(n,r);return{styleId:i,rules:Array.isArray(t)?t.map(function(e){return g(i,e)}):[g(i,t)]}}return{styleId:b(n),rules:Array.isArray(t)?t:[t]}},t.selectFromServer=function(){return Array.prototype.slice.call(document.querySelectorAll('[id^="__jsx-"]')).reduce(function(e,t){return e[t.id.slice(2)]=t,e},{})},e}();function y(e,t){if(!e)throw Error("StyleSheetRegistry: "+t+".")}var x=i.createContext(null);function w(){return new v}function _(e){var t=e.registry,r=e.children,n=i.useContext(x),o=i.useState(function(){return n||t||w()})[0];return a.default.createElement(x.Provider,{value:o},r)}function S(){return i.useContext(x)}x.displayName="StyleSheetContext";var E=a.default.useInsertionEffect||a.default.useLayoutEffect,k="undefined"!=typeof window?w():void 0;function N(e){var t=k||S();return t&&("undefined"==typeof window?t.add(e):E(function(){return t.add(e),function(){t.remove(e)}},[e.id,String(e.dynamic)])),null}N.dynamic=function(e){return e.map(function(e){return b(e[0],e[1])}).join(" ")},r.StyleRegistry=_,r.createStyleRegistry=w,r.style=N,r.useStyleRegistry=S},353678,(e,t,r)=>{t.exports=e.r(483977).style},98006,(e,t,r)=>{function n(e){return e instanceof Map?e.clear=e.delete=e.set=function(){throw Error("map is read-only")}:e instanceof Set&&(e.add=e.clear=e.delete=function(){throw Error("set is read-only")}),Object.freeze(e),Object.getOwnPropertyNames(e).forEach(t=>{let r=e[t],i=typeof r;"object"!==i&&"function"!==i||Object.isFrozen(r)||n(r)}),e}class i{constructor(e){void 0===e.data&&(e.data={}),this.data=e.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function a(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function o(e,...t){let r=Object.create(null);for(let t in e)r[t]=e[t];return t.forEach(function(e){for(let t in e)r[t]=e[t]}),r}let s="</span>",l=e=>!!e.scope,c=(e,{prefix:t})=>{if(e.startsWith("language:"))return e.replace("language:","language-");if(e.includes(".")){let r=e.split(".");return[`${t}${r.shift()}`,...r.map((e,t)=>`${e}${"_".repeat(t+1)}`)].join(" ")}return`${t}${e}`};class u{constructor(e,t){this.buffer="",this.classPrefix=t.classPrefix,e.walk(this)}addText(e){this.buffer+=a(e)}openNode(e){if(!l(e))return;let t=c(e.scope,{prefix:this.classPrefix});this.span(t)}closeNode(e){l(e)&&(this.buffer+=s)}value(){return this.buffer}span(e){this.buffer+=`<span class="${e}">`}}let d=(e={})=>{let t={children:[]};return Object.assign(t,e),t};class f{constructor(){this.rootNode=d(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(e){this.top.children.push(e)}openNode(e){let t=d({scope:e});this.add(t),this.stack.push(t)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(e){return this.constructor._walk(e,this.rootNode)}static _walk(e,t){return"string"==typeof t?e.addText(t):t.children&&(e.openNode(t),t.children.forEach(t=>this._walk(e,t)),e.closeNode(t)),e}static _collapse(e){"string"==typeof e||e.children&&(e.children.every(e=>"string"==typeof e)?e.children=[e.children.join("")]:e.children.forEach(e=>{f._collapse(e)}))}}class h extends f{constructor(e){super(),this.options=e}addText(e){""!==e&&this.add(e)}startScope(e){this.openNode(e)}endScope(){this.closeNode()}__addSublanguage(e,t){let r=e.root;t&&(r.scope=`language:${t}`),this.add(r)}toHTML(){return new u(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}}function p(e){return e?"string"==typeof e?e:e.source:null}function b(e){return v("(?=",e,")")}function g(e){return v("(?:",e,")*")}function m(e){return v("(?:",e,")?")}function v(...e){return e.map(e=>p(e)).join("")}function y(e){let t=e[e.length-1];return"object"==typeof t&&t.constructor===Object?(e.splice(e.length-1,1),t):{}}function x(...e){return"("+(y(e).capture?"":"?:")+e.map(e=>p(e)).join("|")+")"}function w(e){return RegExp(e.toString()+"|").exec("").length-1}function _(e,t){let r=e&&e.exec(t);return r&&0===r.index}let S=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function E(e,{joinWith:t}){let r=0;return e.map(e=>{let t=r+=1,n=p(e),i="";for(;n.length>0;){let e=S.exec(n);if(!e){i+=n;break}i+=n.substring(0,e.index),n=n.substring(e.index+e[0].length),"\\"===e[0][0]&&e[1]?i+="\\"+String(Number(e[1])+t):(i+=e[0],"("===e[0]&&r++)}return i}).map(e=>`(${e})`).join(t)}let k=/\b\B/,N="[a-zA-Z]\\w*",j="[a-zA-Z_]\\w*",C="\\b\\d+(\\.\\d+)?",M="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",A="\\b(0b[01]+)",R="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",T=(e={})=>{let t=/^#![ ]*\//;return e.binary&&(e.begin=v(t,/.*\b/,e.binary,/\b.*/)),o({scope:"meta",begin:t,end:/$/,relevance:0,"on:begin":(e,t)=>{0!==e.index&&t.ignoreMatch()}},e)},O={begin:"\\\\[\\s\\S]",relevance:0},L={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[O]},I={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[O]},P={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},B=function(e,t,r={}){let n=o({scope:"comment",begin:e,end:t,contains:[]},r);n.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});let i=x("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return n.contains.push({begin:v(/[ ]+/,"(",i,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),n},D=B("//","$"),z=B("/\\*","\\*/"),F=B("#","$"),$={scope:"regexp",begin:/\/(?=[^/\n]*\/)/,end:/\/[gimuy]*/,contains:[O,{begin:/\[/,end:/\]/,relevance:0,contains:[O]}]},U={scope:"title",begin:N,relevance:0},H={scope:"title",begin:j,relevance:0};var V=Object.freeze({__proto__:null,APOS_STRING_MODE:L,BACKSLASH_ESCAPE:O,BINARY_NUMBER_MODE:{scope:"number",begin:A,relevance:0},BINARY_NUMBER_RE:A,COMMENT:B,C_BLOCK_COMMENT_MODE:z,C_LINE_COMMENT_MODE:D,C_NUMBER_MODE:{scope:"number",begin:M,relevance:0},C_NUMBER_RE:M,END_SAME_AS_BEGIN:function(e){return Object.assign(e,{"on:begin":(e,t)=>{t.data._beginMatch=e[1]},"on:end":(e,t)=>{t.data._beginMatch!==e[1]&&t.ignoreMatch()}})},HASH_COMMENT_MODE:F,IDENT_RE:N,MATCH_NOTHING_RE:k,METHOD_GUARD:{begin:"\\.\\s*"+j,relevance:0},NUMBER_MODE:{scope:"number",begin:C,relevance:0},NUMBER_RE:C,PHRASAL_WORDS_MODE:P,QUOTE_STRING_MODE:I,REGEXP_MODE:$,RE_STARTERS_RE:R,SHEBANG:T,TITLE_MODE:U,UNDERSCORE_IDENT_RE:j,UNDERSCORE_TITLE_MODE:H});function q(e,t){"."===e.input[e.index-1]&&t.ignoreMatch()}function W(e,t){void 0!==e.className&&(e.scope=e.className,delete e.className)}function K(e,t){!t||e.beginKeywords&&(e.begin="\\b("+e.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",e.__beforeBegin=q,e.keywords=e.keywords||e.beginKeywords,delete e.beginKeywords,void 0===e.relevance&&(e.relevance=0))}function G(e,t){Array.isArray(e.illegal)&&(e.illegal=x(...e.illegal))}function X(e,t){if(e.match){if(e.begin||e.end)throw Error("begin & end are not supported with match");e.begin=e.match,delete e.match}}function Z(e,t){void 0===e.relevance&&(e.relevance=1)}let Y=(e,t)=>{if(!e.beforeMatch)return;if(e.starts)throw Error("beforeMatch cannot be used with starts");let r=Object.assign({},e);Object.keys(e).forEach(t=>{delete e[t]}),e.keywords=r.keywords,e.begin=v(r.beforeMatch,b(r.begin)),e.starts={relevance:0,contains:[Object.assign(r,{endsParent:!0})]},e.relevance=0,delete r.beforeMatch},J=["of","and","for","in","not","or","if","then","parent","list","value"],Q="keyword";function ee(e,t,r=Q){let n=Object.create(null);return"string"==typeof e?i(r,e.split(" ")):Array.isArray(e)?i(r,e):Object.keys(e).forEach(function(r){Object.assign(n,ee(e[r],t,r))}),n;function i(e,r){t&&(r=r.map(e=>e.toLowerCase())),r.forEach(function(t){let r=t.split("|");n[r[0]]=[e,et(r[0],r[1])]})}}function et(e,t){return t?Number(t):+!er(e)}function er(e){return J.includes(e.toLowerCase())}let en={},ei=e=>{console.error(e)},ea=(e,...t)=>{console.log(`WARN: ${e}`,...t)},eo=(e,t)=>{en[`${e}/${t}`]||(console.log(`Deprecated as of ${e}. ${t}`),en[`${e}/${t}`]=!0)},es=Error();function el(e,t,{key:r}){let n=0,i=e[r],a={},o={};for(let e=1;e<=t.length;e++)o[e+n]=i[e],a[e+n]=!0,n+=w(t[e-1]);e[r]=o,e[r]._emit=a,e[r]._multi=!0}function ec(e){if(Array.isArray(e.begin)){if(e.skip||e.excludeBegin||e.returnBegin)throw ei("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),es;if("object"!=typeof e.beginScope||null===e.beginScope)throw ei("beginScope must be object"),es;el(e,e.begin,{key:"beginScope"}),e.begin=E(e.begin,{joinWith:""})}}function eu(e){if(Array.isArray(e.end)){if(e.skip||e.excludeEnd||e.returnEnd)throw ei("skip, excludeEnd, returnEnd not compatible with endScope: {}"),es;if("object"!=typeof e.endScope||null===e.endScope)throw ei("endScope must be object"),es;el(e,e.end,{key:"endScope"}),e.end=E(e.end,{joinWith:""})}}function ed(e){e.scope&&"object"==typeof e.scope&&null!==e.scope&&(e.beginScope=e.scope,delete e.scope)}function ef(e){ed(e),"string"==typeof e.beginScope&&(e.beginScope={_wrap:e.beginScope}),"string"==typeof e.endScope&&(e.endScope={_wrap:e.endScope}),ec(e),eu(e)}function eh(e){function t(t,r){return RegExp(p(t),"m"+(e.case_insensitive?"i":"")+(e.unicodeRegex?"u":"")+(r?"g":""))}class r{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(e,t){t.position=this.position++,this.matchIndexes[this.matchAt]=t,this.regexes.push([t,e]),this.matchAt+=w(e)+1}compile(){0===this.regexes.length&&(this.exec=()=>null);let e=this.regexes.map(e=>e[1]);this.matcherRe=t(E(e,{joinWith:"|"}),!0),this.lastIndex=0}exec(e){this.matcherRe.lastIndex=this.lastIndex;let t=this.matcherRe.exec(e);if(!t)return null;let r=t.findIndex((e,t)=>t>0&&void 0!==e),n=this.matchIndexes[r];return t.splice(0,r),Object.assign(t,n)}}class n{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(e){if(this.multiRegexes[e])return this.multiRegexes[e];let t=new r;return this.rules.slice(e).forEach(([e,r])=>t.addRule(e,r)),t.compile(),this.multiRegexes[e]=t,t}resumingScanAtSamePosition(){return 0!==this.regexIndex}considerAll(){this.regexIndex=0}addRule(e,t){this.rules.push([e,t]),"begin"===t.type&&this.count++}exec(e){let t=this.getMatcher(this.regexIndex);t.lastIndex=this.lastIndex;let r=t.exec(e);if(this.resumingScanAtSamePosition())if(r&&r.index===this.lastIndex);else{let t=this.getMatcher(0);t.lastIndex=this.lastIndex+1,r=t.exec(e)}return r&&(this.regexIndex+=r.position+1,this.regexIndex===this.count&&this.considerAll()),r}}function i(e){let t=new n;return e.contains.forEach(e=>t.addRule(e.begin,{rule:e,type:"begin"})),e.terminatorEnd&&t.addRule(e.terminatorEnd,{type:"end"}),e.illegal&&t.addRule(e.illegal,{type:"illegal"}),t}function a(r,n){let o=r;if(r.isCompiled)return o;[W,X,ef,Y].forEach(e=>e(r,n)),e.compilerExtensions.forEach(e=>e(r,n)),r.__beforeBegin=null,[K,G,Z].forEach(e=>e(r,n)),r.isCompiled=!0;let s=null;return"object"==typeof r.keywords&&r.keywords.$pattern&&(r.keywords=Object.assign({},r.keywords),s=r.keywords.$pattern,delete r.keywords.$pattern),s=s||/\w+/,r.keywords&&(r.keywords=ee(r.keywords,e.case_insensitive)),o.keywordPatternRe=t(s,!0),n&&(r.begin||(r.begin=/\B|\b/),o.beginRe=t(o.begin),r.end||r.endsWithParent||(r.end=/\B|\b/),r.end&&(o.endRe=t(o.end)),o.terminatorEnd=p(o.end)||"",r.endsWithParent&&n.terminatorEnd&&(o.terminatorEnd+=(r.end?"|":"")+n.terminatorEnd)),r.illegal&&(o.illegalRe=t(r.illegal)),r.contains||(r.contains=[]),r.contains=[].concat(...r.contains.map(function(e){return eb("self"===e?r:e)})),r.contains.forEach(function(e){a(e,o)}),r.starts&&a(r.starts,n),o.matcher=i(o),o}if(e.compilerExtensions||(e.compilerExtensions=[]),e.contains&&e.contains.includes("self"))throw Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return e.classNameAliases=o(e.classNameAliases||{}),a(e)}function ep(e){return!!e&&(e.endsWithParent||ep(e.starts))}function eb(e){return(e.variants&&!e.cachedVariants&&(e.cachedVariants=e.variants.map(function(t){return o(e,{variants:null},t)})),e.cachedVariants)?e.cachedVariants:ep(e)?o(e,{starts:e.starts?o(e.starts):null}):Object.isFrozen(e)?o(e):e}var eg="11.11.1";class em extends Error{constructor(e,t){super(e),this.name="HTMLInjectionError",this.html=t}}let ev=a,ey=o,ex=Symbol("nomatch"),ew=7,e_=function(e){let t=Object.create(null),r=Object.create(null),a=[],o=!0,s="Could not find the language '{}', did you forget to load/include a language module?",l={disableAutodetect:!0,name:"Plain text",contains:[]},c={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:h};function u(e){return c.noHighlightRe.test(e)}function d(e){let t=e.className+" ";t+=e.parentNode?e.parentNode.className:"";let r=c.languageDetectRe.exec(t);if(r){let t=A(r[1]);return t||(ea(s.replace("{}",r[1])),ea("Falling back to no-highlight mode for this block.",e)),t?r[1]:"no-highlight"}return t.split(/\s+/).find(e=>u(e)||A(e))}function f(e,t,r){let n="",i="";"object"==typeof t?(n=e,r=t.ignoreIllegals,i=t.language):(eo("10.7.0","highlight(lang, code, ...args) has been deprecated."),eo("10.7.0","Please use highlight(code, options) instead.\nhttps://github.com/highlightjs/highlight.js/issues/2277"),i=e,n=t),void 0===r&&(r=!0);let a={code:n,language:i};L("before:highlight",a);let o=a.result?a.result:p(a.language,a.code,r);return o.code=a.code,L("after:highlight",o),o}function p(e,r,n,a){let l=Object.create(null);function u(e,t){return e.keywords[t]}function d(){if(!R.keywords)return void O.addText(L);let e=0;R.keywordPatternRe.lastIndex=0;let t=R.keywordPatternRe.exec(L),r="";for(;t;){r+=L.substring(e,t.index);let n=j.case_insensitive?t[0].toLowerCase():t[0],i=u(R,n);if(i){let[e,a]=i;if(O.addText(r),r="",l[n]=(l[n]||0)+1,l[n]<=ew&&(I+=a),e.startsWith("_"))r+=t[0];else{let r=j.classNameAliases[e]||e;b(t[0],r)}}else r+=t[0];e=R.keywordPatternRe.lastIndex,t=R.keywordPatternRe.exec(L)}r+=L.substring(e),O.addText(r)}function f(){if(""===L)return;let e=null;if("string"==typeof R.subLanguage){if(!t[R.subLanguage])return void O.addText(L);e=p(R.subLanguage,L,!0,T[R.subLanguage]),T[R.subLanguage]=e._top}else e=w(L,R.subLanguage.length?R.subLanguage:null);R.relevance>0&&(I+=e.relevance),O.__addSublanguage(e._emitter,e.language)}function h(){null!=R.subLanguage?f():d(),L=""}function b(e,t){""!==e&&(O.startScope(t),O.addText(e),O.endScope())}function g(e,t){let r=1,n=t.length-1;for(;r<=n;){if(!e._emit[r]){r++;continue}let n=j.classNameAliases[e[r]]||e[r],i=t[r];n?b(i,n):(L=i,d(),L=""),r++}}function m(e,t){return e.scope&&"string"==typeof e.scope&&O.openNode(j.classNameAliases[e.scope]||e.scope),e.beginScope&&(e.beginScope._wrap?(b(L,j.classNameAliases[e.beginScope._wrap]||e.beginScope._wrap),L=""):e.beginScope._multi&&(g(e.beginScope,t),L="")),R=Object.create(e,{parent:{value:R}})}function v(e,t,r){let n=_(e.endRe,r);if(n){if(e["on:end"]){let r=new i(e);e["on:end"](t,r),r.isMatchIgnored&&(n=!1)}if(n){for(;e.endsParent&&e.parent;)e=e.parent;return e}}if(e.endsWithParent)return v(e.parent,t,r)}function y(e){return 0===R.matcher.regexIndex?(L+=e[0],1):(D=!0,0)}function x(e){let t=e[0],r=e.rule,n=new i(r);for(let i of[r.__beforeBegin,r["on:begin"]])if(i&&(i(e,n),n.isMatchIgnored))return y(t);return r.skip?L+=t:(r.excludeBegin&&(L+=t),h(),r.returnBegin||r.excludeBegin||(L=t)),m(r,e),r.returnBegin?0:t.length}function S(e){let t=e[0],n=r.substring(e.index),i=v(R,e,n);if(!i)return ex;let a=R;R.endScope&&R.endScope._wrap?(h(),b(t,R.endScope._wrap)):R.endScope&&R.endScope._multi?(h(),g(R.endScope,e)):a.skip?L+=t:(a.returnEnd||a.excludeEnd||(L+=t),h(),a.excludeEnd&&(L=t));do R.scope&&O.closeNode(),R.skip||R.subLanguage||(I+=R.relevance),R=R.parent;while(R!==i.parent)return i.starts&&m(i.starts,e),a.returnEnd?0:t.length}function E(){let e=[];for(let t=R;t!==j;t=t.parent)t.scope&&e.unshift(t.scope);e.forEach(e=>O.openNode(e))}let k={};function N(t,i){let a=i&&i[0];if(L+=t,null==a)return h(),0;if("begin"===k.type&&"end"===i.type&&k.index===i.index&&""===a){if(L+=r.slice(i.index,i.index+1),!o){let t=Error(`0 width match regex (${e})`);throw t.languageName=e,t.badRule=k.rule,t}return 1}if(k=i,"begin"===i.type)return x(i);if("illegal"!==i.type||n){if("end"===i.type){let e=S(i);if(e!==ex)return e}}else{let e=Error('Illegal lexeme "'+a+'" for mode "'+(R.scope||"<unnamed>")+'"');throw e.mode=R,e}if("illegal"===i.type&&""===a)return L+="\n",1;if(B>1e5&&B>3*i.index)throw Error("potential infinite loop, way more iterations than matches");return L+=a,a.length}let j=A(e);if(!j)throw ei(s.replace("{}",e)),Error('Unknown language: "'+e+'"');let C=eh(j),M="",R=a||C,T={},O=new c.__emitter(c);E();let L="",I=0,P=0,B=0,D=!1;try{if(j.__emitTokens)j.__emitTokens(r,O);else{for(R.matcher.considerAll();;){B++,D?D=!1:R.matcher.considerAll(),R.matcher.lastIndex=P;let e=R.matcher.exec(r);if(!e)break;let t=r.substring(P,e.index),n=N(t,e);P=e.index+n}N(r.substring(P))}return O.finalize(),M=O.toHTML(),{language:e,value:M,relevance:I,illegal:!1,_emitter:O,_top:R}}catch(t){if(t.message&&t.message.includes("Illegal"))return{language:e,value:ev(r),illegal:!0,relevance:0,_illegalBy:{message:t.message,index:P,context:r.slice(P-100,P+100),mode:t.mode,resultSoFar:M},_emitter:O};if(o)return{language:e,value:ev(r),illegal:!1,relevance:0,errorRaised:t,_emitter:O,_top:R};throw t}}function y(e){let t={value:ev(e),illegal:!1,relevance:0,_top:l,_emitter:new c.__emitter(c)};return t._emitter.addText(e),t}function w(e,r){r=r||c.languages||Object.keys(t);let n=y(e),i=r.filter(A).filter(T).map(t=>p(t,e,!1));i.unshift(n);let[a,o]=i.sort((e,t)=>{if(e.relevance!==t.relevance)return t.relevance-e.relevance;if(e.language&&t.language){if(A(e.language).supersetOf===t.language)return 1;else if(A(t.language).supersetOf===e.language)return -1}return 0}),s=a;return s.secondBest=o,s}function S(e,t,n){let i=t&&r[t]||n;e.classList.add("hljs"),e.classList.add(`language-${i}`)}function E(e){let t=d(e);if(u(t))return;if(L("before:highlightElement",{el:e,language:t}),e.dataset.highlighted)return void console.log("Element previously highlighted. To highlight again, first unset `dataset.highlighted`.",e);if(e.children.length>0&&(c.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(e)),c.throwUnescapedHTML))throw new em("One of your code blocks includes unescaped HTML.",e.innerHTML);let r=e.textContent,n=t?f(r,{language:t,ignoreIllegals:!0}):w(r);e.innerHTML=n.value,e.dataset.highlighted="yes",S(e,t,n.language),e.result={language:n.language,re:n.relevance,relevance:n.relevance},n.secondBest&&(e.secondBest={language:n.secondBest.language,relevance:n.secondBest.relevance}),L("after:highlightElement",{el:e,result:n,text:r})}let k=()=>{C(),eo("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function N(){C(),eo("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let j=!1;function C(){function e(){C()}if("loading"===document.readyState){j||window.addEventListener("DOMContentLoaded",e,!1),j=!0;return}document.querySelectorAll(c.cssSelector).forEach(E)}function M(r,n){let i=null;try{i=n(e)}catch(e){if(ei("Language definition for '{}' could not be registered.".replace("{}",r)),o)ei(e);else throw e;i=l}i.name||(i.name=r),t[r]=i,i.rawDefinition=n.bind(null,e),i.aliases&&R(i.aliases,{languageName:r})}function A(e){return t[e=(e||"").toLowerCase()]||t[r[e]]}function R(e,{languageName:t}){"string"==typeof e&&(e=[e]),e.forEach(e=>{r[e.toLowerCase()]=t})}function T(e){let t=A(e);return t&&!t.disableAutodetect}function O(e){e["before:highlightBlock"]&&!e["before:highlightElement"]&&(e["before:highlightElement"]=t=>{e["before:highlightBlock"](Object.assign({block:t.el},t))}),e["after:highlightBlock"]&&!e["after:highlightElement"]&&(e["after:highlightElement"]=t=>{e["after:highlightBlock"](Object.assign({block:t.el},t))})}function L(e,t){let r=e;a.forEach(function(e){e[r]&&e[r](t)})}function I(e){return eo("10.7.0","highlightBlock will be removed entirely in v12.0"),eo("10.7.0","Please use highlightElement now."),E(e)}for(let i in Object.assign(e,{highlight:f,highlightAuto:w,highlightAll:C,highlightElement:E,highlightBlock:I,configure:function(e){c=ey(c,e)},initHighlighting:k,initHighlightingOnLoad:N,registerLanguage:M,unregisterLanguage:function(e){for(let n of(delete t[e],Object.keys(r)))r[n]===e&&delete r[n]},listLanguages:function(){return Object.keys(t)},getLanguage:A,registerAliases:R,autoDetection:T,inherit:ey,addPlugin:function(e){O(e),a.push(e)},removePlugin:function(e){let t=a.indexOf(e);-1!==t&&a.splice(t,1)}}),e.debugMode=function(){o=!1},e.safeMode=function(){o=!0},e.versionString=eg,e.regex={concat:v,lookahead:b,either:x,optional:m,anyNumberOfTimes:g},V)"object"==typeof V[i]&&n(V[i]);return Object.assign(e,V),e},eS=e_({});eS.newInstance=()=>e_({}),t.exports=eS,eS.HighlightJS=eS,eS.default=eS},440453,(e,t,r)=>{t.exports=function(e){let t=e.regex,r=t.concat(/[\p{L}_]/u,t.optional(/[\p{L}0-9_.-]*:/u),/[\p{L}0-9_.-]*/u),n=/[\p{L}0-9._:-]+/u,i={className:"symbol",begin:/&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/},a={begin:/\s/,contains:[{className:"keyword",begin:/#?[a-z_][a-z1-9_-]+/,illegal:/\n/}]},o=e.inherit(a,{begin:/\(/,end:/\)/}),s=e.inherit(e.APOS_STRING_MODE,{className:"string"}),l=e.inherit(e.QUOTE_STRING_MODE,{className:"string"}),c={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:n,relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[i]},{begin:/'/,end:/'/,contains:[i]},{begin:/[^\s"'=<>`]+/}]}]}]};return{name:"HTML, XML",aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,unicodeRegex:!0,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,relevance:10,contains:[a,l,s,o,{begin:/\[/,end:/\]/,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,contains:[a,o,l,s]}]}]},e.COMMENT(/<!--/,/-->/,{relevance:10}),{begin:/<!\[CDATA\[/,end:/\]\]>/,relevance:10},i,{className:"meta",end:/\?>/,variants:[{begin:/<\?xml/,relevance:10,contains:[l]},{begin:/<\?[a-z][a-z0-9]+/}]},{className:"tag",begin:/<style(?=\s|>)/,end:/>/,keywords:{name:"style"},contains:[c],starts:{end:/<\/style>/,returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:/<script(?=\s|>)/,end:/>/,keywords:{name:"script"},contains:[c],starts:{end:/<\/script>/,returnEnd:!0,subLanguage:["javascript","handlebars","xml"]}},{className:"tag",begin:/<>|<\/>/},{className:"tag",begin:t.concat(/</,t.lookahead(t.concat(r,t.either(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[{className:"name",begin:r,relevance:0,starts:c}]},{className:"tag",begin:t.concat(/<\//,t.lookahead(t.concat(r,/>/))),contains:[{className:"name",begin:r,relevance:0},{begin:/>/,relevance:0,endsParent:!0}]}]}}},883787,(e,t,r)=>{t.exports=function(e){let t=e.regex,r={},n={begin:/\$\{/,end:/\}/,contains:["self",{begin:/:-/,contains:[r]}]};Object.assign(r,{className:"variable",variants:[{begin:t.concat(/\$[\w\d#@][\w\d_]*/,"(?![\\w\\d])(?![$])")},n]});let i={className:"subst",begin:/\$\(/,end:/\)/,contains:[e.BACKSLASH_ESCAPE]},a=e.inherit(e.COMMENT(),{match:[/(^|\s)/,/#.*$/],scope:{2:"comment"}}),o={begin:/<<-?\s*(?=\w+)/,starts:{contains:[e.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,className:"string"})]}},s={className:"string",begin:/"/,end:/"/,contains:[e.BACKSLASH_ESCAPE,r,i]};i.contains.push(s);let l={match:/\\"/},c={className:"string",begin:/'/,end:/'/},u={match:/\\'/},d={begin:/\$?\(\(/,end:/\)\)/,contains:[{begin:/\d+#[0-9a-f]+/,className:"number"},e.NUMBER_MODE,r]},f=["fish","bash","zsh","sh","csh","ksh","tcsh","dash","scsh"],h=e.SHEBANG({binary:`(${f.join("|")})`,relevance:10}),p={className:"function",begin:/\w[\w\d_]*\s*\(\s*\)\s*\{/,returnBegin:!0,contains:[e.inherit(e.TITLE_MODE,{begin:/\w[\w\d_]*/})],relevance:0},b={match:/(\/[a-z._-]+)+/};return{name:"Bash",aliases:["sh","zsh"],keywords:{$pattern:/\b[a-z][a-z0-9._-]+\b/,keyword:["if","then","else","elif","fi","time","for","while","until","in","do","done","case","esac","coproc","function","select"],literal:["true","false"],built_in:["break","cd","continue","eval","exec","exit","export","getopts","hash","pwd","readonly","return","shift","test","times","trap","umask","unset","alias","bind","builtin","caller","command","declare","echo","enable","help","let","local","logout","mapfile","printf","read","readarray","source","sudo","type","typeset","ulimit","unalias","set","shopt","autoload","bg","bindkey","bye","cap","chdir","clone","comparguments","compcall","compctl","compdescribe","compfiles","compgroups","compquote","comptags","comptry","compvalues","dirs","disable","disown","echotc","echoti","emulate","fc","fg","float","functions","getcap","getln","history","integer","jobs","kill","limit","log","noglob","popd","print","pushd","pushln","rehash","sched","setcap","setopt","stat","suspend","ttyctl","unfunction","unhash","unlimit","unsetopt","vared","wait","whence","where","which","zcompile","zformat","zftp","zle","zmodload","zparseopts","zprof","zpty","zregexparse","zsocket","zstyle","ztcp","chcon","chgrp","chown","chmod","cp","dd","df","dir","dircolors","ln","ls","mkdir","mkfifo","mknod","mktemp","mv","realpath","rm","rmdir","shred","sync","touch","truncate","vdir","b2sum","base32","base64","cat","cksum","comm","csplit","cut","expand","fmt","fold","head","join","md5sum","nl","numfmt","od","paste","ptx","pr","sha1sum","sha224sum","sha256sum","sha384sum","sha512sum","shuf","sort","split","sum","tac","tail","tr","tsort","unexpand","uniq","wc","arch","basename","chroot","date","dirname","du","echo","env","expr","factor","groups","hostid","id","link","logname","nice","nohup","nproc","pathchk","pinky","printenv","printf","pwd","readlink","runcon","seq","sleep","stat","stdbuf","stty","tee","test","timeout","tty","uname","unlink","uptime","users","who","whoami","yes"]},contains:[h,e.SHEBANG(),p,d,a,o,b,s,l,c,u,r]}}},926822,(e,t,r)=>{t.exports=function(e){let t=e.regex,r=e.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),n="decltype\\(auto\\)",i="[a-zA-Z_]\\w*::",a="<[^<>]+>",o="("+n+"|"+t.optional(i)+"[a-zA-Z_]\\w*"+t.optional(a)+")",s={className:"type",variants:[{begin:"\\b[a-z\\d_]*_t\\b"},{match:/\batomic_[a-z]{3,6}\b/}]},l="\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)",c={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[e.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+l+"|.)",end:"'",illegal:"."},e.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},u={className:"number",variants:[{match:/\b(0b[01']+)/},{match:/(-?)\b([\d']+(\.[\d']*)?|\.[\d']+)((ll|LL|l|L)(u|U)?|(u|U)(ll|LL|l|L)?|f|F|b|B)/},{match:/(-?)\b(0[xX][a-fA-F0-9]+(?:'[a-fA-F0-9]+)*(?:\.[a-fA-F0-9]*(?:'[a-fA-F0-9]*)*)?(?:[pP][-+]?[0-9]+)?(l|L)?(u|U)?)/},{match:/(-?)\b\d+(?:'\d+)*(?:\.\d*(?:'\d*)*)?(?:[eE][-+]?\d+)?/}],relevance:0},d={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef elifdef elifndef include"},contains:[{begin:/\\\n/,relevance:0},e.inherit(c,{className:"string"}),{className:"string",begin:/<.*?>/},r,e.C_BLOCK_COMMENT_MODE]},f={className:"title",begin:t.optional(i)+e.IDENT_RE,relevance:0},h=t.optional(i)+e.IDENT_RE+"\\s*\\(",p={keyword:["asm","auto","break","case","continue","default","do","else","enum","extern","for","fortran","goto","if","inline","register","restrict","return","sizeof","typeof","typeof_unqual","struct","switch","typedef","union","volatile","while","_Alignas","_Alignof","_Atomic","_Generic","_Noreturn","_Static_assert","_Thread_local","alignas","alignof","noreturn","static_assert","thread_local","_Pragma"],type:["float","double","signed","unsigned","int","short","long","char","void","_Bool","_BitInt","_Complex","_Imaginary","_Decimal32","_Decimal64","_Decimal96","_Decimal128","_Decimal64x","_Decimal128x","_Float16","_Float32","_Float64","_Float128","_Float32x","_Float64x","_Float128x","const","static","constexpr","complex","bool","imaginary"],literal:"true false NULL",built_in:"std string wstring cin cout cerr clog stdin stdout stderr stringstream istringstream ostringstream auto_ptr deque list queue stack vector map set pair bitset multiset multimap unordered_set unordered_map unordered_multiset unordered_multimap priority_queue make_pair array shared_ptr abort terminate abs acos asin atan2 atan calloc ceil cosh cos exit exp fabs floor fmod fprintf fputs free frexp fscanf future isalnum isalpha iscntrl isdigit isgraph islower isprint ispunct isspace isupper isxdigit tolower toupper labs ldexp log10 log malloc realloc memchr memcmp memcpy memset modf pow printf putchar puts scanf sinh sin snprintf sprintf sqrt sscanf strcat strchr strcmp strcpy strcspn strlen strncat strncmp strncpy strpbrk strrchr strspn strstr tanh tan vfprintf vprintf vsprintf endl initializer_list unique_ptr"},b=[d,s,r,e.C_BLOCK_COMMENT_MODE,u,c],g={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:p,contains:b.concat([{begin:/\(/,end:/\)/,keywords:p,contains:b.concat(["self"]),relevance:0}]),relevance:0},m={begin:"("+o+"[\\*&\\s]+)+"+h,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:p,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:n,keywords:p,relevance:0},{begin:h,returnBegin:!0,contains:[e.inherit(f,{className:"title.function"})],relevance:0},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:p,relevance:0,contains:[r,e.C_BLOCK_COMMENT_MODE,c,u,s,{begin:/\(/,end:/\)/,keywords:p,relevance:0,contains:["self",r,e.C_BLOCK_COMMENT_MODE,c,u,s]}]},s,r,e.C_BLOCK_COMMENT_MODE,d]};return{name:"C",aliases:["h"],keywords:p,disableAutodetect:!0,illegal:"</",contains:[].concat(g,m,b,[d,{begin:e.IDENT_RE+"::",keywords:p},{className:"class",beginKeywords:"enum class struct union",end:/[{;:<>=]/,contains:[{beginKeywords:"final class struct"},e.TITLE_MODE]}]),exports:{preprocessor:d,strings:c,keywords:p}}}},508377,(e,t,r)=>{t.exports=function(e){let t=e.regex,r=e.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),n="decltype\\(auto\\)",i="[a-zA-Z_]\\w*::",a="<[^<>]+>",o="(?!struct)("+n+"|"+t.optional(i)+"[a-zA-Z_]\\w*"+t.optional(a)+")",s={className:"type",begin:"\\b[a-z\\d_]*_t\\b"},l="\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)",c={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[e.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'("+l+"|.)",end:"'",illegal:"."},e.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},u={className:"number",variants:[{begin:"[+-]?(?:(?:[0-9](?:'?[0-9])*\\.(?:[0-9](?:'?[0-9])*)?|\\.[0-9](?:'?[0-9])*)(?:[Ee][+-]?[0-9](?:'?[0-9])*)?|[0-9](?:'?[0-9])*[Ee][+-]?[0-9](?:'?[0-9])*|0[Xx](?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*(?:\\.(?:[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)?)?|\\.[0-9A-Fa-f](?:'?[0-9A-Fa-f])*)[Pp][+-]?[0-9](?:'?[0-9])*)(?:[Ff](?:16|32|64|128)?|(BF|bf)16|[Ll]|)"},{begin:"[+-]?\\b(?:0[Bb][01](?:'?[01])*|0[Xx][0-9A-Fa-f](?:'?[0-9A-Fa-f])*|0(?:'?[0-7])*|[1-9](?:'?[0-9])*)(?:[Uu](?:LL?|ll?)|[Uu][Zz]?|(?:LL?|ll?)[Uu]?|[Zz][Uu]|)"}],relevance:0},d={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},e.inherit(c,{className:"string"}),{className:"string",begin:/<.*?>/},r,e.C_BLOCK_COMMENT_MODE]},f={className:"title",begin:t.optional(i)+e.IDENT_RE,relevance:0},h=t.optional(i)+e.IDENT_RE+"\\s*\\(",p={type:["bool","char","char16_t","char32_t","char8_t","double","float","int","long","short","void","wchar_t","unsigned","signed","const","static"],keyword:["alignas","alignof","and","and_eq","asm","atomic_cancel","atomic_commit","atomic_noexcept","auto","bitand","bitor","break","case","catch","class","co_await","co_return","co_yield","compl","concept","const_cast|10","consteval","constexpr","constinit","continue","decltype","default","delete","do","dynamic_cast|10","else","enum","explicit","export","extern","false","final","for","friend","goto","if","import","inline","module","mutable","namespace","new","noexcept","not","not_eq","nullptr","operator","or","or_eq","override","private","protected","public","reflexpr","register","reinterpret_cast|10","requires","return","sizeof","static_assert","static_cast|10","struct","switch","synchronized","template","this","thread_local","throw","transaction_safe","transaction_safe_dynamic","true","try","typedef","typeid","typename","union","using","virtual","volatile","while","xor","xor_eq"],literal:["NULL","false","nullopt","nullptr","true"],built_in:["_Pragma"],_type_hints:["any","auto_ptr","barrier","binary_semaphore","bitset","complex","condition_variable","condition_variable_any","counting_semaphore","deque","false_type","flat_map","flat_set","future","imaginary","initializer_list","istringstream","jthread","latch","lock_guard","multimap","multiset","mutex","optional","ostringstream","packaged_task","pair","promise","priority_queue","queue","recursive_mutex","recursive_timed_mutex","scoped_lock","set","shared_future","shared_lock","shared_mutex","shared_timed_mutex","shared_ptr","stack","string_view","stringstream","timed_mutex","thread","true_type","tuple","unique_lock","unique_ptr","unordered_map","unordered_multimap","unordered_multiset","unordered_set","variant","vector","weak_ptr","wstring","wstring_view"]},b={className:"function.dispatch",relevance:0,keywords:{_hint:["abort","abs","acos","apply","as_const","asin","atan","atan2","calloc","ceil","cerr","cin","clog","cos","cosh","cout","declval","endl","exchange","exit","exp","fabs","floor","fmod","forward","fprintf","fputs","free","frexp","fscanf","future","invoke","isalnum","isalpha","iscntrl","isdigit","isgraph","islower","isprint","ispunct","isspace","isupper","isxdigit","labs","launder","ldexp","log","log10","make_pair","make_shared","make_shared_for_overwrite","make_tuple","make_unique","malloc","memchr","memcmp","memcpy","memset","modf","move","pow","printf","putchar","puts","realloc","scanf","sin","sinh","snprintf","sprintf","sqrt","sscanf","std","stderr","stdin","stdout","strcat","strchr","strcmp","strcpy","strcspn","strlen","strncat","strncmp","strncpy","strpbrk","strrchr","strspn","strstr","swap","tan","tanh","terminate","to_underlying","tolower","toupper","vfprintf","visit","vprintf","vsprintf"]},begin:t.concat(/\b/,/(?!decltype)/,/(?!if)/,/(?!for)/,/(?!switch)/,/(?!while)/,e.IDENT_RE,t.lookahead(/(<[^<>]+>|)\s*\(/))},g=[b,d,s,r,e.C_BLOCK_COMMENT_MODE,u,c],m={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:p,contains:g.concat([{begin:/\(/,end:/\)/,keywords:p,contains:g.concat(["self"]),relevance:0}]),relevance:0},v={className:"function",begin:"("+o+"[\\*&\\s]+)+"+h,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:p,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:n,keywords:p,relevance:0},{begin:h,returnBegin:!0,contains:[f],relevance:0},{begin:/::/,relevance:0},{begin:/:/,endsWithParent:!0,contains:[c,u]},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:p,relevance:0,contains:[r,e.C_BLOCK_COMMENT_MODE,c,u,s,{begin:/\(/,end:/\)/,keywords:p,relevance:0,contains:["self",r,e.C_BLOCK_COMMENT_MODE,c,u,s]}]},s,r,e.C_BLOCK_COMMENT_MODE,d]};return{name:"C++",aliases:["cc","c++","h++","hpp","hh","hxx","cxx"],keywords:p,illegal:"</",classNameAliases:{"function.dispatch":"built_in"},contains:[].concat(m,v,b,g,[d,{begin:"\\b(deque|list|queue|priority_queue|pair|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array|tuple|optional|variant|function|flat_map|flat_set)\\s*<(?!<)",end:">",keywords:p,contains:["self",s]},{begin:e.IDENT_RE+"::",keywords:p},{match:[/\b(?:enum(?:\s+(?:class|struct))?|class|struct|union)/,/\s+/,/\w+/],className:{1:"keyword",3:"title.class"}}])}}},379908,(e,t,r)=>{t.exports=function(e){let t=["bool","byte","char","decimal","delegate","double","dynamic","enum","float","int","long","nint","nuint","object","sbyte","short","string","ulong","uint","ushort"],r=["public","private","protected","static","internal","protected","abstract","async","extern","override","unsafe","virtual","new","sealed","partial"],n=["default","false","null","true"],i={keyword:["abstract","as","base","break","case","catch","class","const","continue","do","else","event","explicit","extern","finally","fixed","for","foreach","goto","if","implicit","in","interface","internal","is","lock","namespace","new","operator","out","override","params","private","protected","public","readonly","record","ref","return","scoped","sealed","sizeof","stackalloc","static","struct","switch","this","throw","try","typeof","unchecked","unsafe","using","virtual","void","volatile","while"].concat(["add","alias","and","ascending","args","async","await","by","descending","dynamic","equals","file","from","get","global","group","init","into","join","let","nameof","not","notnull","on","or","orderby","partial","record","remove","required","scoped","select","set","unmanaged","value|0","var","when","where","with","yield"]),built_in:t,literal:n},a=e.inherit(e.TITLE_MODE,{begin:"[a-zA-Z](\\.?\\w)*"}),o={className:"number",variants:[{begin:"\\b(0b[01']+)"},{begin:"(-?)\\b([\\d']+(\\.[\\d']*)?|\\.[\\d']+)(u|U|l|L|ul|UL|f|F|b|B)"},{begin:"(-?)(\\b0[xX][a-fA-F0-9']+|(\\b[\\d']+(\\.[\\d']*)?|\\.[\\d']+)([eE][-+]?[\\d']+)?)"}],relevance:0},s={className:"string",begin:/"""("*)(?!")(.|\n)*?"""\1/,relevance:1},l={className:"string",begin:'@"',end:'"',contains:[{begin:'""'}]},c=e.inherit(l,{illegal:/\n/}),u={className:"subst",begin:/\{/,end:/\}/,keywords:i},d=e.inherit(u,{illegal:/\n/}),f={className:"string",begin:/\$"/,end:'"',illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},e.BACKSLASH_ESCAPE,d]},h={className:"string",begin:/\$@"/,end:'"',contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},u]},p=e.inherit(h,{illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},d]});u.contains=[h,f,l,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,o,e.C_BLOCK_COMMENT_MODE],d.contains=[p,f,c,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,o,e.inherit(e.C_BLOCK_COMMENT_MODE,{illegal:/\n/})];let b={variants:[s,h,f,l,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},g={begin:"<",end:">",contains:[{beginKeywords:"in out"},a]},m=e.IDENT_RE+"(<"+e.IDENT_RE+"(\\s*,\\s*"+e.IDENT_RE+")*>)?(\\[\\])?",v={begin:"@"+e.IDENT_RE,relevance:0};return{name:"C#",aliases:["cs","c#"],keywords:i,illegal:/::/,contains:[e.COMMENT("///","$",{returnBegin:!0,contains:[{className:"doctag",variants:[{begin:"///",relevance:0},{begin:"<!--|-->"},{begin:"</?",end:">"}]}]}),e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,{className:"meta",begin:"#",end:"$",keywords:{keyword:"if else elif endif define undef warning error line region endregion pragma checksum"}},b,o,{beginKeywords:"class interface",relevance:0,end:/[{;=]/,illegal:/[^\s:,]/,contains:[{beginKeywords:"where class"},a,g,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{beginKeywords:"namespace",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[a,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{beginKeywords:"record",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[a,g,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{className:"meta",begin:"^\\s*\\[(?=[\\w])",excludeBegin:!0,end:"\\]",excludeEnd:!0,contains:[{className:"string",begin:/"/,end:/"/}]},{beginKeywords:"new return throw await else",relevance:0},{className:"function",begin:"("+m+"\\s+)+"+e.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,end:/\s*[{;=]/,excludeEnd:!0,keywords:i,contains:[{beginKeywords:r.join(" "),relevance:0},{begin:e.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,contains:[e.TITLE_MODE,g],relevance:0},{match:/\(\)/},{className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:i,relevance:0,contains:[b,o,e.C_BLOCK_COMMENT_MODE]},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},v]}}},198453,(e,t,r)=>{let n=e=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:e.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:e.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),i=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video","defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],a=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),o=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),s=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),l=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse();t.exports=function(e){let t=e.regex,r=n(e),c={begin:/-(webkit|moz|ms|o)-(?=[a-z])/},u="and or not only",d=/@-?\w[\w]*(-\w+)*/,f="[a-zA-Z-][a-zA-Z0-9_-]*",h=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE];return{name:"CSS",case_insensitive:!0,illegal:/[=|'\$]/,keywords:{keyframePosition:"from to"},classNameAliases:{keyframePosition:"selector-tag"},contains:[r.BLOCK_COMMENT,c,r.CSS_NUMBER_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/,relevance:0},{className:"selector-class",begin:"\\."+f,relevance:0},r.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",variants:[{begin:":("+o.join("|")+")"},{begin:":(:)?("+s.join("|")+")"}]},r.CSS_VARIABLE,{className:"attribute",begin:"\\b("+l.join("|")+")\\b"},{begin:/:/,end:/[;}{]/,contains:[r.BLOCK_COMMENT,r.HEXCOLOR,r.IMPORTANT,r.CSS_NUMBER_MODE,...h,{begin:/(url|data-uri)\(/,end:/\)/,relevance:0,keywords:{built_in:"url data-uri"},contains:[...h,{className:"string",begin:/[^)]/,endsWithParent:!0,excludeEnd:!0}]},r.FUNCTION_DISPATCH]},{begin:t.lookahead(/@/),end:"[{;]",relevance:0,illegal:/:/,contains:[{className:"keyword",begin:d},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:{$pattern:/[a-z-]+/,keyword:u,attribute:a.join(" ")},contains:[{begin:/[a-z-]+(?=:)/,className:"attribute"},...h,r.CSS_NUMBER_MODE]}]},{className:"selector-tag",begin:"\\b("+i.join("|")+")\\b"}]}}},510444,(e,t,r)=>{t.exports=function(e){let t=e.regex,r={begin:/<\/?[A-Za-z_]/,end:">",subLanguage:"xml",relevance:0},n={begin:"^[-\\*]{3,}",end:"$"},i={className:"code",variants:[{begin:"(`{3,})[^`](.|\\n)*?\\1`*[ ]*"},{begin:"(~{3,})[^~](.|\\n)*?\\1~*[ ]*"},{begin:"```",end:"```+[ ]*$"},{begin:"~~~",end:"~~~+[ ]*$"},{begin:"`.+?`"},{begin:"(?=^( {4}|\\t))",contains:[{begin:"^( {4}|\\t)",end:"(\\n)$"}],relevance:0}]},a={className:"bullet",begin:"^[ 	]*([*+-]|(\\d+\\.))(?=\\s+)",end:"\\s+",excludeEnd:!0},o={begin:/^\[[^\n]+\]:/,returnBegin:!0,contains:[{className:"symbol",begin:/\[/,end:/\]/,excludeBegin:!0,excludeEnd:!0},{className:"link",begin:/:\s*/,end:/$/,excludeBegin:!0}]},s=/[A-Za-z][A-Za-z0-9+.-]*/,l={variants:[{begin:/\[.+?\]\[.*?\]/,relevance:0},{begin:/\[.+?\]\(((data|javascript|mailto):|(?:http|ftp)s?:\/\/).*?\)/,relevance:2},{begin:t.concat(/\[.+?\]\(/,s,/:\/\/.*?\)/),relevance:2},{begin:/\[.+?\]\([./?&#].*?\)/,relevance:1},{begin:/\[.*?\]\(.*?\)/,relevance:0}],returnBegin:!0,contains:[{match:/\[(?=\])/},{className:"string",relevance:0,begin:"\\[",end:"\\]",excludeBegin:!0,returnEnd:!0},{className:"link",relevance:0,begin:"\\]\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0},{className:"symbol",relevance:0,begin:"\\]\\[",end:"\\]",excludeBegin:!0,excludeEnd:!0}]},c={className:"strong",contains:[],variants:[{begin:/_{2}(?!\s)/,end:/_{2}/},{begin:/\*{2}(?!\s)/,end:/\*{2}/}]},u={className:"emphasis",contains:[],variants:[{begin:/\*(?![*\s])/,end:/\*/},{begin:/_(?![_\s])/,end:/_/,relevance:0}]},d=e.inherit(c,{contains:[]}),f=e.inherit(u,{contains:[]});c.contains.push(f),u.contains.push(d);let h=[r,l];return[c,u,d,f].forEach(e=>{e.contains=e.contains.concat(h)}),{name:"Markdown",aliases:["md","mkdown","mkd"],contains:[{className:"section",variants:[{begin:"^#{1,6}",end:"$",contains:h=h.concat(c,u)},{begin:"(?=^.+?\\n[=-]{2,}$)",contains:[{begin:"^[=-]*$"},{begin:"^",end:"\\n",contains:h}]}]},r,a,c,u,{className:"quote",begin:"^>\\s+",contains:h,end:"$"},i,n,l,o,{scope:"literal",match:/&([a-zA-Z0-9]+|#[0-9]{1,7}|#[Xx][0-9a-fA-F]{1,6});/}]}}},649050,(e,t,r)=>{t.exports=function(e){let t=e.regex;return{name:"Diff",aliases:["patch"],contains:[{className:"meta",relevance:10,match:t.either(/^@@ +-\d+,\d+ +\+\d+,\d+ +@@/,/^\*\*\* +\d+,\d+ +\*\*\*\*$/,/^--- +\d+,\d+ +----$/)},{className:"comment",variants:[{begin:t.either(/Index: /,/^index/,/={3,}/,/^-{3}/,/^\*{3} /,/^\+{3}/,/^diff --git/),end:/$/},{match:/^\*{15}$/}]},{className:"addition",begin:/^\+/,end:/$/},{className:"deletion",begin:/^-/,end:/$/},{className:"addition",begin:/^!/,end:/$/}]}}},562084,(e,t,r)=>{t.exports=function(e){let t=e.regex,r="([a-zA-Z_]\\w*[!?=]?|[-+~]@|<<|>>|=~|===?|<=>|[<>]=?|\\*\\*|[-/+%^&*~`|]|\\[\\]=?)",n=t.either(/\b([A-Z]+[a-z0-9]+)+/,/\b([A-Z]+[a-z0-9]+)+[A-Z]+/),i=t.concat(n,/(::\w+)*/),a={"variable.constant":["__FILE__","__LINE__","__ENCODING__"],"variable.language":["self","super"],keyword:["alias","and","begin","BEGIN","break","case","class","defined","do","else","elsif","end","END","ensure","for","if","in","module","next","not","or","redo","require","rescue","retry","return","then","undef","unless","until","when","while","yield","include","extend","prepend","public","private","protected","raise","throw"],built_in:["proc","lambda","attr_accessor","attr_reader","attr_writer","define_method","private_constant","module_function"],literal:["true","false","nil"]},o={className:"doctag",begin:"@[A-Za-z]+"},s={begin:"#<",end:">"},l=[e.COMMENT("#","$",{contains:[o]}),e.COMMENT("^=begin","^=end",{contains:[o],relevance:10}),e.COMMENT("^__END__",e.MATCH_NOTHING_RE)],c={className:"subst",begin:/#\{/,end:/\}/,keywords:a},u={className:"string",contains:[e.BACKSLASH_ESCAPE,c],variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/`/,end:/`/},{begin:/%[qQwWx]?\(/,end:/\)/},{begin:/%[qQwWx]?\[/,end:/\]/},{begin:/%[qQwWx]?\{/,end:/\}/},{begin:/%[qQwWx]?</,end:/>/},{begin:/%[qQwWx]?\//,end:/\//},{begin:/%[qQwWx]?%/,end:/%/},{begin:/%[qQwWx]?-/,end:/-/},{begin:/%[qQwWx]?\|/,end:/\|/},{begin:/\B\?(\\\d{1,3})/},{begin:/\B\?(\\x[A-Fa-f0-9]{1,2})/},{begin:/\B\?(\\u\{?[A-Fa-f0-9]{1,6}\}?)/},{begin:/\B\?(\\M-\\C-|\\M-\\c|\\c\\M-|\\M-|\\C-\\M-)[\x20-\x7e]/},{begin:/\B\?\\(c|C-)[\x20-\x7e]/},{begin:/\B\?\\?\S/},{begin:t.concat(/<<[-~]?'?/,t.lookahead(/(\w+)(?=\W)[^\n]*\n(?:[^\n]*\n)*?\s*\1\b/)),contains:[e.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,contains:[e.BACKSLASH_ESCAPE,c]})]}]},d="[1-9](_?[0-9])*|0",f="[0-9](_?[0-9])*",h={className:"number",relevance:0,variants:[{begin:`\\b(${d})(\\.(${f}))?([eE][+-]?(${f})|r)?i?\\b`},{begin:"\\b0[dD][0-9](_?[0-9])*r?i?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*r?i?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*r?i?\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*r?i?\\b"},{begin:"\\b0(_?[0-7])+r?i?\\b"}]},p={variants:[{match:/\(\)/},{className:"params",begin:/\(/,end:/(?=\))/,excludeBegin:!0,endsParent:!0,keywords:a}]},b={match:[/(include|extend)\s+/,i],scope:{2:"title.class"},keywords:a},g=[u,{variants:[{match:[/class\s+/,i,/\s+<\s+/,i]},{match:[/\b(class|module)\s+/,i]}],scope:{2:"title.class",4:"title.class.inherited"},keywords:a},b,{relevance:0,match:[i,/\.new[. (]/],scope:{1:"title.class"}},{relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"},{relevance:0,match:n,scope:"title.class"},{match:[/def/,/\s+/,r],scope:{1:"keyword",3:"title.function"},contains:[p]},{begin:e.IDENT_RE+"::"},{className:"symbol",begin:e.UNDERSCORE_IDENT_RE+"(!|\\?)?:",relevance:0},{className:"symbol",begin:":(?!\\s)",contains:[u,{begin:r}],relevance:0},h,{className:"variable",begin:"(\\$\\W)|((\\$|@@?)(\\w+))(?=[^@$?])(?![A-Za-z])(?![@$?'])"},{className:"params",begin:/\|(?!=)/,end:/\|/,excludeBegin:!0,excludeEnd:!0,relevance:0,keywords:a},{begin:"("+e.RE_STARTERS_RE+"|unless)\\s*",keywords:"unless",contains:[{className:"regexp",contains:[e.BACKSLASH_ESCAPE,c],illegal:/\n/,variants:[{begin:"/",end:"/[a-z]*"},{begin:/%r\{/,end:/\}[a-z]*/},{begin:"%r\\(",end:"\\)[a-z]*"},{begin:"%r!",end:"![a-z]*"},{begin:"%r\\[",end:"\\][a-z]*"}]}].concat(s,l),relevance:0}].concat(s,l);c.contains=g,p.contains=g;let m=[{begin:/^\s*=>/,starts:{end:"$",contains:g}},{className:"meta.prompt",begin:"^([>?]>|[\\w#]+\\(\\w+\\):\\d+:\\d+[>*]|(\\w+-)?\\d+\\.\\d+\\.\\d+(p\\d+)?[^\\d][^>]+>)(?=[ ])",starts:{end:"$",keywords:a,contains:g}}];return l.unshift(s),{name:"Ruby",aliases:["rb","gemspec","podspec","thor","irb"],keywords:a,illegal:/\/\*/,contains:[e.SHEBANG({binary:"ruby"})].concat(m).concat(l).concat(g)}}},887598,(e,t,r)=>{t.exports=function(e){let t={keyword:["break","case","chan","const","continue","default","defer","else","fallthrough","for","func","go","goto","if","import","interface","map","package","range","return","select","struct","switch","type","var"],type:["bool","byte","complex64","complex128","error","float32","float64","int8","int16","int32","int64","string","uint8","uint16","uint32","uint64","int","uint","uintptr","rune"],literal:["true","false","iota","nil"],built_in:["append","cap","close","complex","copy","imag","len","make","new","panic","print","println","real","recover","delete"]};return{name:"Go",aliases:["golang"],keywords:t,illegal:"</",contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,{className:"string",variants:[e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,{begin:"`",end:"`"}]},{className:"number",variants:[{match:/-?\b0[xX]\.[a-fA-F0-9](_?[a-fA-F0-9])*[pP][+-]?\d(_?\d)*i?/,relevance:0},{match:/-?\b0[xX](_?[a-fA-F0-9])+((\.([a-fA-F0-9](_?[a-fA-F0-9])*)?)?[pP][+-]?\d(_?\d)*)?i?/,relevance:0},{match:/-?\b0[oO](_?[0-7])*i?/,relevance:0},{match:/-?\.\d(_?\d)*([eE][+-]?\d(_?\d)*)?i?/,relevance:0},{match:/-?\b\d(_?\d)*(\.(\d(_?\d)*)?)?([eE][+-]?\d(_?\d)*)?i?/,relevance:0}]},{begin:/:=/},{className:"function",beginKeywords:"func",end:"\\s*(\\{|$)",excludeEnd:!0,contains:[e.TITLE_MODE,{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:t,illegal:/["']/}]}]}}},730070,(e,t,r)=>{t.exports=function(e){let t=e.regex,r=/[_A-Za-z][_0-9A-Za-z]*/;return{name:"GraphQL",aliases:["gql"],case_insensitive:!0,disableAutodetect:!1,keywords:{keyword:["query","mutation","subscription","type","input","schema","directive","interface","union","scalar","fragment","enum","on"],literal:["true","false","null"]},contains:[e.HASH_COMMENT_MODE,e.QUOTE_STRING_MODE,e.NUMBER_MODE,{scope:"punctuation",match:/[.]{3}/,relevance:0},{scope:"punctuation",begin:/[\!\(\)\:\=\[\]\{\|\}]{1}/,relevance:0},{scope:"variable",begin:/\$/,end:/\W/,excludeEnd:!0,relevance:0},{scope:"meta",match:/@\w+/,excludeEnd:!0},{scope:"symbol",begin:t.concat(r,t.lookahead(/\s*:/)),relevance:0}],illegal:[/[;<']/,/BEGIN/]}}},634272,(e,t,r)=>{t.exports=function(e){let t=e.regex,r={className:"number",relevance:0,variants:[{begin:/([+-]+)?[\d]+_[\d_]+/},{begin:e.NUMBER_RE}]},n=e.COMMENT();n.variants=[{begin:/;/,end:/$/},{begin:/#/,end:/$/}];let i={className:"variable",variants:[{begin:/\$[\w\d"][\w\d_]*/},{begin:/\$\{(.*?)\}/}]},a={className:"literal",begin:/\bon|off|true|false|yes|no\b/},o={className:"string",contains:[e.BACKSLASH_ESCAPE],variants:[{begin:"'''",end:"'''",relevance:10},{begin:'"""',end:'"""',relevance:10},{begin:'"',end:'"'},{begin:"'",end:"'"}]},s={begin:/\[/,end:/\]/,contains:[n,a,i,o,r,"self"],relevance:0},l=/[A-Za-z0-9_-]+/,c=/"(\\"|[^"])*"/,u=/'[^']*'/,d=t.either(l,c,u);return{name:"TOML, also INI",aliases:["toml"],case_insensitive:!0,illegal:/\S/,contains:[n,{className:"section",begin:/\[+/,end:/\]+/},{begin:t.concat(d,"(\\s*\\.\\s*",d,")*",t.lookahead(/\s*=\s*[^#\s]/)),className:"attr",starts:{end:/$/,contains:[n,s,a,i,o,r]}}]}}},322888,(e,t,r)=>{var n="[0-9](_*[0-9])*",i=`\\.(${n})`,a="[0-9a-fA-F](_*[0-9a-fA-F])*",o={className:"number",variants:[{begin:`(\\b(${n})((${i})|\\.)?|(${i}))[eE][+-]?(${n})[fFdD]?\\b`},{begin:`\\b(${n})((${i})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${i})[fFdD]?\\b`},{begin:`\\b(${n})[fFdD]\\b`},{begin:`\\b0[xX]((${a})\\.?|(${a})?\\.(${a}))[pP][+-]?(${n})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${a})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};function s(e,t,r){return -1===r?"":e.replace(t,n=>s(e,t,r-1))}t.exports=function(e){let t=e.regex,r="[-a-zA-Z_$][-a-zA-Z_$0-9]*",n=r+s("(?:<"+r+"~~~(?:\\s*,\\s*"+r+"~~~)*>)?",/~~~/g,2),i={keyword:["synchronized","abstract","private","var","static","if","const ","for","while","strictfp","finally","protected","import","native","final","void","enum","else","break","transient","catch","instanceof","volatile","case","assert","package","default","public","try","switch","continue","throws","protected","public","private","module","requires","exports","do","sealed","yield","permits","goto","when"],literal:["false","true","null"],type:["char","boolean","long","float","int","byte","short","double"],built_in:["super","this"]},a={className:"meta",begin:"@"+r,contains:[{begin:/\(/,end:/\)/,contains:["self"]}]},l={className:"params",begin:/\(/,end:/\)/,keywords:i,relevance:0,contains:[e.C_BLOCK_COMMENT_MODE],endsParent:!0};return{name:"Java",aliases:["jsp"],keywords:i,illegal:/<\/|#/,contains:[e.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{begin:/\w+@/,relevance:0},{className:"doctag",begin:"@[A-Za-z]+"}]}),{begin:/import java\.[a-z]+\./,keywords:"import",relevance:2},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,{begin:/"""/,end:/"""/,className:"string",contains:[e.BACKSLASH_ESCAPE]},e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,{match:[/\b(?:class|interface|enum|extends|implements|new)/,/\s+/,r],className:{1:"keyword",3:"title.class"}},{match:/non-sealed/,scope:"keyword"},{begin:[t.concat(/(?!else)/,r),/\s+/,r,/\s+/,/=(?!=)/],className:{1:"type",3:"variable",5:"operator"}},{begin:[/record/,/\s+/,r],className:{1:"keyword",3:"title.class"},contains:[l,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{beginKeywords:"new throw return else",relevance:0},{begin:["(?:"+n+"\\s+)",e.UNDERSCORE_IDENT_RE,/\s*(?=\()/],className:{2:"title.function"},keywords:i,contains:[{className:"params",begin:/\(/,end:/\)/,keywords:i,relevance:0,contains:[a,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,o,e.C_BLOCK_COMMENT_MODE]},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},o,a]}}},738499,(e,t,r)=>{let n="[A-Za-z$_][0-9A-Za-z$_]*",i=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends","using"],a=["true","false","null","undefined","NaN","Infinity"],o=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],s=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],l=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],c=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],u=[].concat(l,o,s);t.exports=function(e){let t=e.regex,r=(e,{after:t})=>{let r="</"+e[0].slice(1);return -1!==e.input.indexOf(r,t)},d=n,f="<>",h="</>",p=/<[A-Za-z0-9\\._:-]+\s*\/>/,b=/<[A-Za-z0-9\\._:-]+/,g=/\/[A-Za-z0-9\\._:-]+>|\/>/,m=(e,t)=>{let n,i=e[0].length+e.index,a=e.input[i];if("<"===a||","===a)return void t.ignoreMatch();">"!==a||r(e,{after:i})||t.ignoreMatch();let o=e.input.substring(i);if((n=o.match(/^\s*=/))||(n=o.match(/^\s+extends\s+/))&&0===n.index)return void t.ignoreMatch()},v={$pattern:n,keyword:i,literal:a,built_in:u,"variable.language":c},y="[0-9](_?[0-9])*",x=`\\.(${y})`,w="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",_={className:"number",variants:[{begin:`(\\b(${w})((${x})|\\.)?|(${x}))[eE][+-]?(${y})\\b`},{begin:`\\b(${w})\\b((${x})\\b|\\.)?|(${x})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},S={className:"subst",begin:"\\$\\{",end:"\\}",keywords:v,contains:[]},E={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,S],subLanguage:"xml"}},k={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,S],subLanguage:"css"}},N={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,S],subLanguage:"graphql"}},j={className:"string",begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE,S]},C={className:"comment",variants:[e.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:d+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),e.C_BLOCK_COMMENT_MODE,e.C_LINE_COMMENT_MODE]},M=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,E,k,N,j,{match:/\$\d+/},_];S.contains=M.concat({begin:/\{/,end:/\}/,keywords:v,contains:["self"].concat(M)});let A=[].concat(C,S.contains),R=A.concat([{begin:/(\s*)\(/,end:/\)/,keywords:v,contains:["self"].concat(A)}]),T={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:v,contains:R},O={variants:[{match:[/class/,/\s+/,d,/\s+/,/extends/,/\s+/,t.concat(d,"(",t.concat(/\./,d),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,d],scope:{1:"keyword",3:"title.class"}}]},L={relevance:0,match:t.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...o,...s]}},I={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},P={variants:[{match:[/function/,/\s+/,d,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[T],illegal:/%/},B={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function D(e){return t.concat("(?!",e.join("|"),")")}let z={match:t.concat(/\b/,D([...l,"super","import"].map(e=>`${e}\\s*\\(`)),d,t.lookahead(/\s*\(/)),className:"title.function",relevance:0},F={begin:t.concat(/\./,t.lookahead(t.concat(d,/(?![0-9A-Za-z$_(])/))),end:d,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},$={match:[/get|set/,/\s+/,d,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},T]},U="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+e.UNDERSCORE_IDENT_RE+")\\s*=>",H={match:[/const|var|let/,/\s+/,d,/\s*/,/=\s*/,/(async\s*)?/,t.lookahead(U)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[T]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:v,exports:{PARAMS_CONTAINS:R,CLASS_REFERENCE:L},illegal:/#(?![$_A-z])/,contains:[e.SHEBANG({label:"shebang",binary:"node",relevance:5}),I,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,E,k,N,j,C,{match:/\$\d+/},_,L,{scope:"attr",match:d+t.lookahead(":"),relevance:0},H,{begin:"("+e.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[C,e.REGEXP_MODE,{className:"function",begin:U,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:e.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:v,contains:R}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:f,end:h},{match:p},{begin:b,"on:begin":m,end:g}],subLanguage:"xml",contains:[{begin:b,end:g,skip:!0,contains:["self"]}]}]},P,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+e.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[T,e.inherit(e.TITLE_MODE,{begin:d,className:"title.function"})]},{match:/\.\.\./,relevance:0},F,{match:"\\$"+d,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[T]},z,B,O,$,{match:/\$[(.]/}]}}},462533,(e,t,r)=>{t.exports=function(e){let t={className:"attr",begin:/"(\\.|[^\\"\r\n])*"(?=\s*:)/,relevance:1.01},r={match:/[{}[\],:]/,className:"punctuation",relevance:0},n=["true","false","null"],i={scope:"literal",beginKeywords:n.join(" ")};return{name:"JSON",aliases:["jsonc"],keywords:{literal:n},contains:[t,r,e.QUOTE_STRING_MODE,i,e.C_NUMBER_MODE,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE],illegal:"\\S"}}},71081,(e,t,r)=>{var n="[0-9](_*[0-9])*",i=`\\.(${n})`,a="[0-9a-fA-F](_*[0-9a-fA-F])*",o={className:"number",variants:[{begin:`(\\b(${n})((${i})|\\.)?|(${i}))[eE][+-]?(${n})[fFdD]?\\b`},{begin:`\\b(${n})((${i})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${i})[fFdD]?\\b`},{begin:`\\b(${n})[fFdD]\\b`},{begin:`\\b0[xX]((${a})\\.?|(${a})?\\.(${a}))[pP][+-]?(${n})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${a})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};t.exports=function(e){let t={keyword:"abstract as val var vararg get set class object open private protected public noinline crossinline dynamic final enum if else do while for when throw try catch finally import package is in fun override companion reified inline lateinit init interface annotation data sealed internal infix operator out by constructor super tailrec where const inner suspend typealias external expect actual",built_in:"Byte Short Char Int Long Boolean Float Double Void Unit Nothing",literal:"true false null"},r={className:"keyword",begin:/\b(break|continue|return|this)\b/,starts:{contains:[{className:"symbol",begin:/@\w+/}]}},n={className:"symbol",begin:e.UNDERSCORE_IDENT_RE+"@"},i={className:"subst",begin:/\$\{/,end:/\}/,contains:[e.C_NUMBER_MODE]},a={className:"variable",begin:"\\$"+e.UNDERSCORE_IDENT_RE},s={className:"string",variants:[{begin:'"""',end:'"""(?=[^"])',contains:[a,i]},{begin:"'",end:"'",illegal:/\n/,contains:[e.BACKSLASH_ESCAPE]},{begin:'"',end:'"',illegal:/\n/,contains:[e.BACKSLASH_ESCAPE,a,i]}]};i.contains.push(s);let l={className:"meta",begin:"@(?:file|property|field|get|set|receiver|param|setparam|delegate)\\s*:(?:\\s*"+e.UNDERSCORE_IDENT_RE+")?"},c={className:"meta",begin:"@"+e.UNDERSCORE_IDENT_RE,contains:[{begin:/\(/,end:/\)/,contains:[e.inherit(s,{className:"string"}),"self"]}]},u=o,d=e.COMMENT("/\\*","\\*/",{contains:[e.C_BLOCK_COMMENT_MODE]}),f={variants:[{className:"type",begin:e.UNDERSCORE_IDENT_RE},{begin:/\(/,end:/\)/,contains:[]}]},h=f;return h.variants[1].contains=[f],f.variants[1].contains=[h],{name:"Kotlin",aliases:["kt","kts"],keywords:t,contains:[e.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"}]}),e.C_LINE_COMMENT_MODE,d,r,n,l,c,{className:"function",beginKeywords:"fun",end:"[(]|$",returnBegin:!0,excludeEnd:!0,keywords:t,relevance:5,contains:[{begin:e.UNDERSCORE_IDENT_RE+"\\s*\\(",returnBegin:!0,relevance:0,contains:[e.UNDERSCORE_TITLE_MODE]},{className:"type",begin:/</,end:/>/,keywords:"reified",relevance:0},{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:t,relevance:0,contains:[{begin:/:/,end:/[=,\/]/,endsWithParent:!0,contains:[f,e.C_LINE_COMMENT_MODE,d],relevance:0},e.C_LINE_COMMENT_MODE,d,l,c,s,e.C_NUMBER_MODE]},d]},{begin:[/class|interface|trait/,/\s+/,e.UNDERSCORE_IDENT_RE],beginScope:{3:"title.class"},keywords:"class interface trait",end:/[:\{(]|$/,excludeEnd:!0,illegal:"extends implements",contains:[{beginKeywords:"public protected internal private constructor"},e.UNDERSCORE_TITLE_MODE,{className:"type",begin:/</,end:/>/,excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:/[,:]\s*/,end:/[<\(,){\s]|$/,excludeBegin:!0,returnEnd:!0},l,c]},s,{className:"meta",begin:"^#!/usr/bin/env",end:"$",illegal:"\n"},u]}}},413264,(e,t,r)=>{let n=e=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:e.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:e.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),i=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video","defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],a=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),o=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),s=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),l=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse(),c=o.concat(s).sort().reverse();t.exports=function(e){let t=n(e),r=c,u="[\\w-]+",d="("+u+"|@\\{"+u+"\\})",f=[],h=[],p=function(e){return{className:"string",begin:"~?"+e+".*?"+e}},b=function(e,t,r){return{className:e,begin:t,relevance:r}},g={$pattern:/[a-z-]+/,keyword:"and or not only",attribute:a.join(" ")},m={begin:"\\(",end:"\\)",contains:h,keywords:g,relevance:0};h.push(e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,p("'"),p('"'),t.CSS_NUMBER_MODE,{begin:"(url|data-uri)\\(",starts:{className:"string",end:"[\\)\\n]",excludeEnd:!0}},t.HEXCOLOR,m,b("variable","@@?"+u,10),b("variable","@\\{"+u+"\\}"),b("built_in","~?`[^`]*?`"),{className:"attribute",begin:u+"\\s*:",end:":",returnBegin:!0,excludeEnd:!0},t.IMPORTANT,{beginKeywords:"and not"},t.FUNCTION_DISPATCH);let v=h.concat({begin:/\{/,end:/\}/,contains:f}),y={beginKeywords:"when",endsWithParent:!0,contains:[{beginKeywords:"and not"}].concat(h)},x={begin:d+"\\s*:",returnBegin:!0,end:/[;}]/,relevance:0,contains:[{begin:/-(webkit|moz|ms|o)-/},t.CSS_VARIABLE,{className:"attribute",begin:"\\b("+l.join("|")+")\\b",end:/(?=:)/,starts:{endsWithParent:!0,illegal:"[<=$]",relevance:0,contains:h}}]},w={className:"keyword",begin:"@(import|media|charset|font-face|(-[a-z]+-)?keyframes|supports|document|namespace|page|viewport|host)\\b",starts:{end:"[;{}]",keywords:g,returnEnd:!0,contains:h,relevance:0}},_={className:"variable",variants:[{begin:"@"+u+"\\s*:",relevance:15},{begin:"@"+u}],starts:{end:"[;}]",returnEnd:!0,contains:v}},S={variants:[{begin:"[\\.#:&\\[>]",end:"[;{}]"},{begin:d,end:/\{/}],returnBegin:!0,returnEnd:!0,illegal:"[<='$\"]",relevance:0,contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,y,b("keyword","all\\b"),b("variable","@\\{"+u+"\\}"),{begin:"\\b("+i.join("|")+")\\b",className:"selector-tag"},t.CSS_NUMBER_MODE,b("selector-tag",d,0),b("selector-id","#"+d),b("selector-class","\\."+d,0),b("selector-tag","&",0),t.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",begin:":("+o.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+s.join("|")+")"},{begin:/\(/,end:/\)/,relevance:0,contains:v},{begin:"!important"},t.FUNCTION_DISPATCH]},E={begin:u+":(:)?"+`(${r.join("|")})`,returnBegin:!0,contains:[S]};return f.push(e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,w,_,E,x,S,y,t.FUNCTION_DISPATCH),{name:"Less",case_insensitive:!0,illegal:"[=>'/<($\"]",contains:f}}},675841,(e,t,r)=>{t.exports=function(e){let t="\\[=*\\[",r="\\]=*\\]",n={begin:t,end:r,contains:["self"]},i=[e.COMMENT("--(?!"+t+")","$"),e.COMMENT("--"+t,r,{contains:[n],relevance:10})];return{name:"Lua",aliases:["pluto"],keywords:{$pattern:e.UNDERSCORE_IDENT_RE,literal:"true false nil",keyword:"and break do else elseif end for goto if in local not or repeat return then until while",built_in:"_G _ENV _VERSION __index __newindex __mode __call __metatable __tostring __len __gc __add __sub __mul __div __mod __pow __concat __unm __eq __lt __le assert collectgarbage dofile error getfenv getmetatable ipairs load loadfile loadstring module next pairs pcall print rawequal rawget rawset require select setfenv setmetatable tonumber tostring type unpack xpcall arg self coroutine resume yield status wrap create running debug getupvalue debug sethook getmetatable gethook setmetatable setlocal traceback setfenv getinfo setupvalue getlocal getregistry getfenv io lines write close flush open output type read stderr stdin input stdout popen tmpfile math log max acos huge ldexp pi cos tanh pow deg tan cosh sinh random randomseed frexp ceil floor rad abs sqrt modf asin min mod fmod log10 atan2 exp sin atan os exit setlocale date getenv difftime remove time clock tmpname rename execute package preload loadlib loaded loaders cpath config path seeall string sub upper len gfind rep find match char dump gmatch reverse byte format gsub lower table setn insert getn foreachi maxn foreach concat sort remove"},contains:i.concat([{className:"function",beginKeywords:"function",end:"\\)",contains:[e.inherit(e.TITLE_MODE,{begin:"([_a-zA-Z]\\w*\\.)*([_a-zA-Z]\\w*:)?[_a-zA-Z]\\w*"}),{className:"params",begin:"\\(",endsWithParent:!0,contains:i}].concat(i)},e.C_NUMBER_MODE,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,{className:"string",begin:t,end:r,contains:[n],relevance:5}])}}},496483,(e,t,r)=>{t.exports=function(e){let t={className:"variable",variants:[{begin:"\\$\\("+e.UNDERSCORE_IDENT_RE+"\\)",contains:[e.BACKSLASH_ESCAPE]},{begin:/\$[@%<?\^\+\*]/}]},r={className:"string",begin:/"/,end:/"/,contains:[e.BACKSLASH_ESCAPE,t]},n={className:"variable",begin:/\$\([\w-]+\s/,end:/\)/,keywords:{built_in:"subst patsubst strip findstring filter filter-out sort word wordlist firstword lastword dir notdir suffix basename addsuffix addprefix join wildcard realpath abspath error warning shell origin flavor foreach if or and call eval file value"},contains:[t,r]},i={begin:"^"+e.UNDERSCORE_IDENT_RE+"\\s*(?=[:+?]?=)"},a={className:"meta",begin:/^\.PHONY:/,end:/$/,keywords:{$pattern:/[\.\w]+/,keyword:".PHONY"}},o={className:"section",begin:/^[^\s]+:/,end:/$/,contains:[t]};return{name:"Makefile",aliases:["mk","mak","make"],keywords:{$pattern:/[\w-]+/,keyword:"define endef undefine ifdef ifndef ifeq ifneq else endif include -include sinclude override export unexport private vpath"},contains:[e.HASH_COMMENT_MODE,t,r,n,i,a,o]}}},511132,(e,t,r)=>{t.exports=function(e){let t=e.regex,r=/[dualxmsipngr]{0,12}/,n={$pattern:/[\w.]+/,keyword:"abs accept alarm and atan2 bind binmode bless break caller chdir chmod chomp chop chown chr chroot class close closedir connect continue cos crypt dbmclose dbmopen defined delete die do dump each else elsif endgrent endhostent endnetent endprotoent endpwent endservent eof eval exec exists exit exp fcntl field fileno flock for foreach fork format formline getc getgrent getgrgid getgrnam gethostbyaddr gethostbyname gethostent getlogin getnetbyaddr getnetbyname getnetent getpeername getpgrp getpriority getprotobyname getprotobynumber getprotoent getpwent getpwnam getpwuid getservbyname getservbyport getservent getsockname getsockopt given glob gmtime goto grep gt hex if index int ioctl join keys kill last lc lcfirst length link listen local localtime log lstat lt ma map method mkdir msgctl msgget msgrcv msgsnd my ne next no not oct open opendir or ord our pack package pipe pop pos print printf prototype push q|0 qq quotemeta qw qx rand read readdir readline readlink readpipe recv redo ref rename require reset return reverse rewinddir rindex rmdir say scalar seek seekdir select semctl semget semop send setgrent sethostent setnetent setpgrp setpriority setprotoent setpwent setservent setsockopt shift shmctl shmget shmread shmwrite shutdown sin sleep socket socketpair sort splice split sprintf sqrt srand stat state study sub substr symlink syscall sysopen sysread sysseek system syswrite tell telldir tie tied time times tr truncate uc ucfirst umask undef unless unlink unpack unshift untie until use utime values vec wait waitpid wantarray warn when while write x|0 xor y|0"},i={className:"subst",begin:"[$@]\\{",end:"\\}",keywords:n},a={begin:/->\{/,end:/\}/},o={scope:"attr",match:/\s+:\s*\w+(\s*\(.*?\))?/},s={scope:"variable",variants:[{begin:/\$\d/},{begin:t.concat(/[$%@](?!")(\^\w\b|#\w+(::\w+)*|\{\w+\}|\w+(::\w*)*)/,"(?![A-Za-z])(?![@$%])")},{begin:/[$%@](?!")[^\s\w{=]|\$=/,relevance:0}],contains:[o]},l={className:"number",variants:[{match:/0?\.[0-9][0-9_]+\b/},{match:/\bv?(0|[1-9][0-9_]*(\.[0-9_]+)?|[1-9][0-9_]*)\b/},{match:/\b0[0-7][0-7_]*\b/},{match:/\b0x[0-9a-fA-F][0-9a-fA-F_]*\b/},{match:/\b0b[0-1][0-1_]*\b/}],relevance:0},c=[e.BACKSLASH_ESCAPE,i,s],u=[/!/,/\//,/\|/,/\?/,/'/,/"/,/#/],d=(e,n,i="\\1")=>{let a="\\1"===i?i:t.concat(i,n);return t.concat(t.concat("(?:",e,")"),n,/(?:\\.|[^\\\/])*?/,a,/(?:\\.|[^\\\/])*?/,i,r)},f=(e,n,i)=>t.concat(t.concat("(?:",e,")"),n,/(?:\\.|[^\\\/])*?/,i,r),h=[s,e.HASH_COMMENT_MODE,e.COMMENT(/^=\w/,/=cut/,{endsWithParent:!0}),a,{className:"string",contains:c,variants:[{begin:"q[qwxr]?\\s*\\(",end:"\\)",relevance:5},{begin:"q[qwxr]?\\s*\\[",end:"\\]",relevance:5},{begin:"q[qwxr]?\\s*\\{",end:"\\}",relevance:5},{begin:"q[qwxr]?\\s*\\|",end:"\\|",relevance:5},{begin:"q[qwxr]?\\s*<",end:">",relevance:5},{begin:"qw\\s+q",end:"q",relevance:5},{begin:"'",end:"'",contains:[e.BACKSLASH_ESCAPE]},{begin:'"',end:'"'},{begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE]},{begin:/\{\w+\}/,relevance:0},{begin:"-?\\w+\\s*=>",relevance:0}]},l,{begin:"(\\/\\/|"+e.RE_STARTERS_RE+"|\\b(split|return|print|reverse|grep)\\b)\\s*",keywords:"split return print reverse grep",relevance:0,contains:[e.HASH_COMMENT_MODE,{className:"regexp",variants:[{begin:d("s|tr|y",t.either(...u,{capture:!0}))},{begin:d("s|tr|y","\\(","\\)")},{begin:d("s|tr|y","\\[","\\]")},{begin:d("s|tr|y","\\{","\\}")}],relevance:2},{className:"regexp",variants:[{begin:/(m|qr)\/\//,relevance:0},{begin:f("(?:m|qr)?",/\//,/\//)},{begin:f("m|qr",t.either(...u,{capture:!0}),/\1/)},{begin:f("m|qr",/\(/,/\)/)},{begin:f("m|qr",/\[/,/\]/)},{begin:f("m|qr",/\{/,/\}/)}]}]},{className:"function",beginKeywords:"sub method",end:"(\\s*\\(.*?\\))?[;{]",excludeEnd:!0,relevance:5,contains:[e.TITLE_MODE,o]},{className:"class",beginKeywords:"class",end:"[;{]",excludeEnd:!0,relevance:5,contains:[e.TITLE_MODE,o,l]},{begin:"-\\w\\b",relevance:0},{begin:"^__DATA__$",end:"^__END__$",subLanguage:"mojolicious",contains:[{begin:"^@@.*",end:"$",className:"comment"}]}];return i.contains=h,a.contains=h,{name:"Perl",aliases:["pl","pm"],keywords:n,contains:h}}},386050,(e,t,r)=>{t.exports=function(e){let t=/[a-zA-Z@][a-zA-Z0-9_]*/,r={"variable.language":["this","super"],$pattern:t,keyword:["while","export","sizeof","typedef","const","struct","for","union","volatile","static","mutable","if","do","return","goto","enum","else","break","extern","asm","case","default","register","explicit","typename","switch","continue","inline","readonly","assign","readwrite","self","@synchronized","id","typeof","nonatomic","IBOutlet","IBAction","strong","weak","copy","in","out","inout","bycopy","byref","oneway","__strong","__weak","__block","__autoreleasing","@private","@protected","@public","@try","@property","@end","@throw","@catch","@finally","@autoreleasepool","@synthesize","@dynamic","@selector","@optional","@required","@encode","@package","@import","@defs","@compatibility_alias","__bridge","__bridge_transfer","__bridge_retained","__bridge_retain","__covariant","__contravariant","__kindof","_Nonnull","_Nullable","_Null_unspecified","__FUNCTION__","__PRETTY_FUNCTION__","__attribute__","getter","setter","retain","unsafe_unretained","nonnull","nullable","null_unspecified","null_resettable","class","instancetype","NS_DESIGNATED_INITIALIZER","NS_UNAVAILABLE","NS_REQUIRES_SUPER","NS_RETURNS_INNER_POINTER","NS_INLINE","NS_AVAILABLE","NS_DEPRECATED","NS_ENUM","NS_OPTIONS","NS_SWIFT_UNAVAILABLE","NS_ASSUME_NONNULL_BEGIN","NS_ASSUME_NONNULL_END","NS_REFINED_FOR_SWIFT","NS_SWIFT_NAME","NS_SWIFT_NOTHROW","NS_DURING","NS_HANDLER","NS_ENDHANDLER","NS_VALUERETURN","NS_VOIDRETURN"],literal:["false","true","FALSE","TRUE","nil","YES","NO","NULL"],built_in:["dispatch_once_t","dispatch_queue_t","dispatch_sync","dispatch_async","dispatch_once"],type:["int","float","char","unsigned","signed","short","long","double","wchar_t","unichar","void","bool","BOOL","id|0","_Bool"]},n={$pattern:t,keyword:["@interface","@class","@protocol","@implementation"]};return{name:"Objective-C",aliases:["mm","objc","obj-c","obj-c++","objective-c++"],keywords:r,illegal:"</",contains:[{className:"built_in",begin:"\\b(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)\\w+"},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,e.C_NUMBER_MODE,e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,{className:"string",variants:[{begin:'@"',end:'"',illegal:"\\n",contains:[e.BACKSLASH_ESCAPE]}]},{className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},e.inherit(e.QUOTE_STRING_MODE,{className:"string"}),{className:"string",begin:/<.*?>/,end:/$/,illegal:"\\n"},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{className:"class",begin:"("+n.keyword.join("|")+")\\b",end:/(\{|$)/,excludeEnd:!0,keywords:n,contains:[e.UNDERSCORE_TITLE_MODE]},{begin:"\\."+e.UNDERSCORE_IDENT_RE,relevance:0}]}}},701584,(e,t,r)=>{t.exports=function(e){let t=e.regex,r=/(?![A-Za-z0-9])(?![$])/,n=t.concat(/[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*/,r),i=t.concat(/(\\?[A-Z][a-z0-9_\x7f-\xff]+|\\?[A-Z]+(?=[A-Z][a-z0-9_\x7f-\xff])){1,}/,r),a=t.concat(/[A-Z]+/,r),o={scope:"variable",match:"\\$+"+n},s={scope:"meta",variants:[{begin:/<\?php/,relevance:10},{begin:/<\?=/},{begin:/<\?/,relevance:.1},{begin:/\?>/}]},l={scope:"subst",variants:[{begin:/\$\w+/},{begin:/\{\$/,end:/\}/}]},c=e.inherit(e.APOS_STRING_MODE,{illegal:null}),u=e.inherit(e.QUOTE_STRING_MODE,{illegal:null,contains:e.QUOTE_STRING_MODE.contains.concat(l)}),d={begin:/<<<[ \t]*(?:(\w+)|"(\w+)")\n/,end:/[ \t]*(\w+)\b/,contains:e.QUOTE_STRING_MODE.contains.concat(l),"on:begin":(e,t)=>{t.data._beginMatch=e[1]||e[2]},"on:end":(e,t)=>{t.data._beginMatch!==e[1]&&t.ignoreMatch()}},f=e.END_SAME_AS_BEGIN({begin:/<<<[ \t]*'(\w+)'\n/,end:/[ \t]*(\w+)\b/}),h="[ 	\n]",p={scope:"string",variants:[u,c,d,f]},b={scope:"number",variants:[{begin:"\\b0[bB][01]+(?:_[01]+)*\\b"},{begin:"\\b0[oO][0-7]+(?:_[0-7]+)*\\b"},{begin:"\\b0[xX][\\da-fA-F]+(?:_[\\da-fA-F]+)*\\b"},{begin:"(?:\\b\\d+(?:_\\d+)*(\\.(?:\\d+(?:_\\d+)*))?|\\B\\.\\d+)(?:[eE][+-]?\\d+)?"}],relevance:0},g=["false","null","true"],m=["__CLASS__","__DIR__","__FILE__","__FUNCTION__","__COMPILER_HALT_OFFSET__","__LINE__","__METHOD__","__NAMESPACE__","__TRAIT__","die","echo","exit","include","include_once","print","require","require_once","array","abstract","and","as","binary","bool","boolean","break","callable","case","catch","class","clone","const","continue","declare","default","do","double","else","elseif","empty","enddeclare","endfor","endforeach","endif","endswitch","endwhile","enum","eval","extends","final","finally","float","for","foreach","from","global","goto","if","implements","instanceof","insteadof","int","integer","interface","isset","iterable","list","match|0","mixed","new","never","object","or","private","protected","public","readonly","real","return","string","switch","throw","trait","try","unset","use","var","void","while","xor","yield"],v=["Error|0","AppendIterator","ArgumentCountError","ArithmeticError","ArrayIterator","ArrayObject","AssertionError","BadFunctionCallException","BadMethodCallException","CachingIterator","CallbackFilterIterator","CompileError","Countable","DirectoryIterator","DivisionByZeroError","DomainException","EmptyIterator","ErrorException","Exception","FilesystemIterator","FilterIterator","GlobIterator","InfiniteIterator","InvalidArgumentException","IteratorIterator","LengthException","LimitIterator","LogicException","MultipleIterator","NoRewindIterator","OutOfBoundsException","OutOfRangeException","OuterIterator","OverflowException","ParentIterator","ParseError","RangeException","RecursiveArrayIterator","RecursiveCachingIterator","RecursiveCallbackFilterIterator","RecursiveDirectoryIterator","RecursiveFilterIterator","RecursiveIterator","RecursiveIteratorIterator","RecursiveRegexIterator","RecursiveTreeIterator","RegexIterator","RuntimeException","SeekableIterator","SplDoublyLinkedList","SplFileInfo","SplFileObject","SplFixedArray","SplHeap","SplMaxHeap","SplMinHeap","SplObjectStorage","SplObserver","SplPriorityQueue","SplQueue","SplStack","SplSubject","SplTempFileObject","TypeError","UnderflowException","UnexpectedValueException","UnhandledMatchError","ArrayAccess","BackedEnum","Closure","Fiber","Generator","Iterator","IteratorAggregate","Serializable","Stringable","Throwable","Traversable","UnitEnum","WeakReference","WeakMap","Directory","__PHP_Incomplete_Class","parent","php_user_filter","self","static","stdClass"],y={keyword:m,literal:(e=>{let t=[];return e.forEach(e=>{t.push(e),e.toLowerCase()===e?t.push(e.toUpperCase()):t.push(e.toLowerCase())}),t})(g),built_in:v},x=e=>e.map(e=>e.replace(/\|\d+$/,"")),w={variants:[{match:[/new/,t.concat(h,"+"),t.concat("(?!",x(v).join("\\b|"),"\\b)"),i],scope:{1:"keyword",4:"title.class"}}]},_=t.concat(n,"\\b(?!\\()"),S={variants:[{match:[t.concat(/::/,t.lookahead(/(?!class\b)/)),_],scope:{2:"variable.constant"}},{match:[/::/,/class/],scope:{2:"variable.language"}},{match:[i,t.concat(/::/,t.lookahead(/(?!class\b)/)),_],scope:{1:"title.class",3:"variable.constant"}},{match:[i,t.concat("::",t.lookahead(/(?!class\b)/))],scope:{1:"title.class"}},{match:[i,/::/,/class/],scope:{1:"title.class",3:"variable.language"}}]},E={scope:"attr",match:t.concat(n,t.lookahead(":"),t.lookahead(/(?!::)/))},k={relevance:0,begin:/\(/,end:/\)/,keywords:y,contains:[E,o,S,e.C_BLOCK_COMMENT_MODE,p,b,w]},N={relevance:0,match:[/\b/,t.concat("(?!fn\\b|function\\b|",x(m).join("\\b|"),"|",x(v).join("\\b|"),"\\b)"),n,t.concat(h,"*"),t.lookahead(/(?=\()/)],scope:{3:"title.function.invoke"},contains:[k]};k.contains.push(N);let j=[E,S,e.C_BLOCK_COMMENT_MODE,p,b,w],C={begin:t.concat(/#\[\s*\\?/,t.either(i,a)),beginScope:"meta",end:/]/,endScope:"meta",keywords:{literal:g,keyword:["new","array"]},contains:[{begin:/\[/,end:/]/,keywords:{literal:g,keyword:["new","array"]},contains:["self",...j]},...j,{scope:"meta",variants:[{match:i},{match:a}]}]};return{case_insensitive:!1,keywords:y,contains:[C,e.HASH_COMMENT_MODE,e.COMMENT("//","$"),e.COMMENT("/\\*","\\*/",{contains:[{scope:"doctag",match:"@[A-Za-z]+"}]}),{match:/__halt_compiler\(\);/,keywords:"__halt_compiler",starts:{scope:"comment",end:e.MATCH_NOTHING_RE,contains:[{match:/\?>/,scope:"meta",endsParent:!0}]}},s,{scope:"variable.language",match:/\$this\b/},o,N,S,{match:[/const/,/\s/,n],scope:{1:"keyword",3:"variable.constant"}},w,{scope:"function",relevance:0,beginKeywords:"fn function",end:/[;{]/,excludeEnd:!0,illegal:"[$%\\[]",contains:[{beginKeywords:"use"},e.UNDERSCORE_TITLE_MODE,{begin:"=>",endsParent:!0},{scope:"params",begin:"\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0,keywords:y,contains:["self",C,o,S,e.C_BLOCK_COMMENT_MODE,p,b]}]},{scope:"class",variants:[{beginKeywords:"enum",illegal:/[($"]/},{beginKeywords:"class interface trait",illegal:/[:($"]/}],relevance:0,end:/\{/,excludeEnd:!0,contains:[{beginKeywords:"extends implements"},e.UNDERSCORE_TITLE_MODE]},{beginKeywords:"namespace",relevance:0,end:";",illegal:/[.']/,contains:[e.inherit(e.UNDERSCORE_TITLE_MODE,{scope:"title.class"})]},{beginKeywords:"use",relevance:0,end:";",contains:[{match:/\b(as|const|function)\b/,scope:"keyword"},e.UNDERSCORE_TITLE_MODE]},p,b]}}},391724,(e,t,r)=>{t.exports=function(e){return{name:"PHP template",subLanguage:"xml",contains:[{begin:/<\?(php|=)?/,end:/\?>/,subLanguage:"php",contains:[{begin:"/\\*",end:"\\*/",skip:!0},{begin:'b"',end:'"',skip:!0},{begin:"b'",end:"'",skip:!0},e.inherit(e.APOS_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0}),e.inherit(e.QUOTE_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0})]}]}}},736135,(e,t,r)=>{t.exports=function(e){return{name:"Plain text",aliases:["text","txt"],disableAutodetect:!0}}},675229,(e,t,r)=>{t.exports=function(e){let t=e.regex,r=/[\p{XID_Start}_]\p{XID_Continue}*/u,n=["and","as","assert","async","await","break","case","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","in","is","lambda","match","nonlocal|10","not","or","pass","raise","return","try","while","with","yield"],i={$pattern:/[A-Za-z]\w+|__\w+__/,keyword:n,built_in:["__import__","abs","all","any","ascii","bin","bool","breakpoint","bytearray","bytes","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","exec","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","print","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip"],literal:["__debug__","Ellipsis","False","None","NotImplemented","True"],type:["Any","Callable","Coroutine","Dict","List","Literal","Generic","Optional","Sequence","Set","Tuple","Type","Union"]},a={className:"meta",begin:/^(>>>|\.\.\.) /},o={className:"subst",begin:/\{/,end:/\}/,keywords:i,illegal:/#/},s={begin:/\{\{/,relevance:0},l={className:"string",contains:[e.BACKSLASH_ESCAPE],variants:[{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?'''/,end:/'''/,contains:[e.BACKSLASH_ESCAPE,a],relevance:10},{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?"""/,end:/"""/,contains:[e.BACKSLASH_ESCAPE,a],relevance:10},{begin:/([fF][rR]|[rR][fF]|[fF])'''/,end:/'''/,contains:[e.BACKSLASH_ESCAPE,a,s,o]},{begin:/([fF][rR]|[rR][fF]|[fF])"""/,end:/"""/,contains:[e.BACKSLASH_ESCAPE,a,s,o]},{begin:/([uU]|[rR])'/,end:/'/,relevance:10},{begin:/([uU]|[rR])"/,end:/"/,relevance:10},{begin:/([bB]|[bB][rR]|[rR][bB])'/,end:/'/},{begin:/([bB]|[bB][rR]|[rR][bB])"/,end:/"/},{begin:/([fF][rR]|[rR][fF]|[fF])'/,end:/'/,contains:[e.BACKSLASH_ESCAPE,s,o]},{begin:/([fF][rR]|[rR][fF]|[fF])"/,end:/"/,contains:[e.BACKSLASH_ESCAPE,s,o]},e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},c="[0-9](_?[0-9])*",u=`(\\b(${c}))?\\.(${c})|\\b(${c})\\.`,d=`\\b|${n.join("|")}`,f={className:"number",relevance:0,variants:[{begin:`(\\b(${c})|(${u}))[eE][+-]?(${c})[jJ]?(?=${d})`},{begin:`(${u})[jJ]?`},{begin:`\\b([1-9](_?[0-9])*|0+(_?0)*)[lLjJ]?(?=${d})`},{begin:`\\b0[bB](_?[01])+[lL]?(?=${d})`},{begin:`\\b0[oO](_?[0-7])+[lL]?(?=${d})`},{begin:`\\b0[xX](_?[0-9a-fA-F])+[lL]?(?=${d})`},{begin:`\\b(${c})[jJ](?=${d})`}]},h={className:"comment",begin:t.lookahead(/# type:/),end:/$/,keywords:i,contains:[{begin:/# type:/},{begin:/#/,end:/\b\B/,endsWithParent:!0}]},p={className:"params",variants:[{className:"",begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:i,contains:["self",a,f,l,e.HASH_COMMENT_MODE]}]};return o.contains=[l,f,a],{name:"Python",aliases:["py","gyp","ipython"],unicodeRegex:!0,keywords:i,illegal:/(<\/|\?)|=>/,contains:[a,f,{scope:"variable.language",match:/\bself\b/},{beginKeywords:"if",relevance:0},{match:/\bor\b/,scope:"keyword"},l,h,e.HASH_COMMENT_MODE,{match:[/\bdef/,/\s+/,r],scope:{1:"keyword",3:"title.function"},contains:[p]},{variants:[{match:[/\bclass/,/\s+/,r,/\s*/,/\(\s*/,r,/\s*\)/]},{match:[/\bclass/,/\s+/,r]}],scope:{1:"keyword",3:"title.class",6:"title.class.inherited"}},{className:"meta",begin:/^[\t ]*@/,end:/(?=#)|$/,contains:[f,p,l]}]}}},702974,(e,t,r)=>{t.exports=function(e){return{aliases:["pycon"],contains:[{className:"meta.prompt",starts:{end:/ |$/,starts:{end:"$",subLanguage:"python"}},variants:[{begin:/^>>>(?=[ ]|$)/},{begin:/^\.\.\.(?=[ ]|$)/}]}]}}},921058,(e,t,r)=>{t.exports=function(e){let t=e.regex,r=/(?:(?:[a-zA-Z]|\.[._a-zA-Z])[._a-zA-Z0-9]*)|\.(?!\d)/,n=t.either(/0[xX][0-9a-fA-F]+\.[0-9a-fA-F]*[pP][+-]?\d+i?/,/0[xX][0-9a-fA-F]+(?:[pP][+-]?\d+)?[Li]?/,/(?:\d+(?:\.\d*)?|\.\d+)(?:[eE][+-]?\d+)?[Li]?/),i=/[=!<>:]=|\|\||&&|:::?|<-|<<-|->>|->|\|>|[-+*\/?!$&|:<=>@^~]|\*\*/,a=t.either(/[()]/,/[{}]/,/\[\[/,/[[\]]/,/\\/,/,/);return{name:"R",keywords:{$pattern:r,keyword:"function if in break next repeat else for while",literal:"NULL NA TRUE FALSE Inf NaN NA_integer_|10 NA_real_|10 NA_character_|10 NA_complex_|10",built_in:"LETTERS letters month.abb month.name pi T F abs acos acosh all any anyNA Arg as.call as.character as.complex as.double as.environment as.integer as.logical as.null.default as.numeric as.raw asin asinh atan atanh attr attributes baseenv browser c call ceiling class Conj cos cosh cospi cummax cummin cumprod cumsum digamma dim dimnames emptyenv exp expression floor forceAndCall gamma gc.time globalenv Im interactive invisible is.array is.atomic is.call is.character is.complex is.double is.environment is.expression is.finite is.function is.infinite is.integer is.language is.list is.logical is.matrix is.na is.name is.nan is.null is.numeric is.object is.pairlist is.raw is.recursive is.single is.symbol lazyLoadDBfetch length lgamma list log max min missing Mod names nargs nzchar oldClass on.exit pos.to.env proc.time prod quote range Re rep retracemem return round seq_along seq_len seq.int sign signif sin sinh sinpi sqrt standardGeneric substitute sum switch tan tanh tanpi tracemem trigamma trunc unclass untracemem UseMethod xtfrm"},contains:[e.COMMENT(/#'/,/$/,{contains:[{scope:"doctag",match:/@examples/,starts:{end:t.lookahead(t.either(/\n^#'\s*(?=@[a-zA-Z]+)/,/\n^(?!#')/)),endsParent:!0}},{scope:"doctag",begin:"@param",end:/$/,contains:[{scope:"variable",variants:[{match:r},{match:/`(?:\\.|[^`\\])+`/}],endsParent:!0}]},{scope:"doctag",match:/@[a-zA-Z]+/},{scope:"keyword",match:/\\[a-zA-Z]+/}]}),e.HASH_COMMENT_MODE,{scope:"string",contains:[e.BACKSLASH_ESCAPE],variants:[e.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\(/,end:/\)(-*)"/}),e.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\{/,end:/\}(-*)"/}),e.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\[/,end:/\](-*)"/}),e.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\(/,end:/\)(-*)'/}),e.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\{/,end:/\}(-*)'/}),e.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\[/,end:/\](-*)'/}),{begin:'"',end:'"',relevance:0},{begin:"'",end:"'",relevance:0}]},{relevance:0,variants:[{scope:{1:"operator",2:"number"},match:[i,n]},{scope:{1:"operator",2:"number"},match:[/%[^%]*%/,n]},{scope:{1:"punctuation",2:"number"},match:[a,n]},{scope:{2:"number"},match:[/[^a-zA-Z0-9._]|^/,n]}]},{scope:{3:"operator"},match:[r,/\s+/,/<-/,/\s+/]},{scope:"operator",relevance:0,variants:[{match:i},{match:/%[^%]*%/}]},{scope:"punctuation",relevance:0,match:a},{begin:"`",end:"`",contains:[{begin:/\\./}]}]}}},411227,(e,t,r)=>{t.exports=function(e){let t=e.regex,r=/(r#)?/,n=t.concat(r,e.UNDERSCORE_IDENT_RE),i=t.concat(r,e.IDENT_RE),a={className:"title.function.invoke",relevance:0,begin:t.concat(/\b/,/(?!let|for|while|if|else|match\b)/,i,t.lookahead(/\s*\(/))},o="([ui](8|16|32|64|128|size)|f(32|64))?",s=["abstract","as","async","await","become","box","break","const","continue","crate","do","dyn","else","enum","extern","false","final","fn","for","if","impl","in","let","loop","macro","match","mod","move","mut","override","priv","pub","ref","return","self","Self","static","struct","super","trait","true","try","type","typeof","union","unsafe","unsized","use","virtual","where","while","yield"],l=["true","false","Some","None","Ok","Err"],c=["drop ","Copy","Send","Sized","Sync","Drop","Fn","FnMut","FnOnce","ToOwned","Clone","Debug","PartialEq","PartialOrd","Eq","Ord","AsRef","AsMut","Into","From","Default","Iterator","Extend","IntoIterator","DoubleEndedIterator","ExactSizeIterator","SliceConcatExt","ToString","assert!","assert_eq!","bitflags!","bytes!","cfg!","col!","concat!","concat_idents!","debug_assert!","debug_assert_eq!","env!","eprintln!","panic!","file!","format!","format_args!","include_bytes!","include_str!","line!","local_data_key!","module_path!","option_env!","print!","println!","select!","stringify!","try!","unimplemented!","unreachable!","vec!","write!","writeln!","macro_rules!","assert_ne!","debug_assert_ne!"],u=["i8","i16","i32","i64","i128","isize","u8","u16","u32","u64","u128","usize","f32","f64","str","char","bool","Box","Option","Result","String","Vec"];return{name:"Rust",aliases:["rs"],keywords:{$pattern:e.IDENT_RE+"!?",type:u,keyword:s,literal:l,built_in:c},illegal:"</",contains:[e.C_LINE_COMMENT_MODE,e.COMMENT("/\\*","\\*/",{contains:["self"]}),e.inherit(e.QUOTE_STRING_MODE,{begin:/b?"/,illegal:null}),{className:"symbol",begin:/'[a-zA-Z_][a-zA-Z0-9_]*(?!')/},{scope:"string",variants:[{begin:/b?r(#*)"(.|\n)*?"\1(?!#)/},{begin:/b?'/,end:/'/,contains:[{scope:"char.escape",match:/\\('|\w|x\w{2}|u\w{4}|U\w{8})/}]}]},{className:"number",variants:[{begin:"\\b0b([01_]+)"+o},{begin:"\\b0o([0-7_]+)"+o},{begin:"\\b0x([A-Fa-f0-9_]+)"+o},{begin:"\\b(\\d[\\d_]*(\\.[0-9_]+)?([eE][+-]?[0-9_]+)?)"+o}],relevance:0},{begin:[/fn/,/\s+/,n],className:{1:"keyword",3:"title.function"}},{className:"meta",begin:"#!?\\[",end:"\\]",contains:[{className:"string",begin:/"/,end:/"/,contains:[e.BACKSLASH_ESCAPE]}]},{begin:[/let/,/\s+/,/(?:mut\s+)?/,n],className:{1:"keyword",3:"keyword",4:"variable"}},{begin:[/for/,/\s+/,n,/\s+/,/in/],className:{1:"keyword",3:"variable",5:"keyword"}},{begin:[/type/,/\s+/,n],className:{1:"keyword",3:"title.class"}},{begin:[/(?:trait|enum|struct|union|impl|for)/,/\s+/,n],className:{1:"keyword",3:"title.class"}},{begin:e.IDENT_RE+"::",keywords:{keyword:"Self",built_in:c,type:u}},{className:"punctuation",begin:"->"},a]}}},929828,(e,t,r)=>{let n=e=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:e.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:e.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),i=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video","defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],a=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),o=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),s=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),l=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse();t.exports=function(e){let t=n(e),r=s,c=o,u="@[a-z-]+",d="and or not only",f={className:"variable",begin:"(\\$[a-zA-Z-][a-zA-Z0-9_-]*)\\b",relevance:0};return{name:"SCSS",case_insensitive:!0,illegal:"[=/|']",contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,t.CSS_NUMBER_MODE,{className:"selector-id",begin:"#[A-Za-z0-9_-]+",relevance:0},{className:"selector-class",begin:"\\.[A-Za-z0-9_-]+",relevance:0},t.ATTRIBUTE_SELECTOR_MODE,{className:"selector-tag",begin:"\\b("+i.join("|")+")\\b",relevance:0},{className:"selector-pseudo",begin:":("+c.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+r.join("|")+")"},f,{begin:/\(/,end:/\)/,contains:[t.CSS_NUMBER_MODE]},t.CSS_VARIABLE,{className:"attribute",begin:"\\b("+l.join("|")+")\\b"},{begin:"\\b(whitespace|wait|w-resize|visible|vertical-text|vertical-ideographic|uppercase|upper-roman|upper-alpha|underline|transparent|top|thin|thick|text|text-top|text-bottom|tb-rl|table-header-group|table-footer-group|sw-resize|super|strict|static|square|solid|small-caps|separate|se-resize|scroll|s-resize|rtl|row-resize|ridge|right|repeat|repeat-y|repeat-x|relative|progress|pointer|overline|outside|outset|oblique|nowrap|not-allowed|normal|none|nw-resize|no-repeat|no-drop|newspaper|ne-resize|n-resize|move|middle|medium|ltr|lr-tb|lowercase|lower-roman|lower-alpha|loose|list-item|line|line-through|line-edge|lighter|left|keep-all|justify|italic|inter-word|inter-ideograph|inside|inset|inline|inline-block|inherit|inactive|ideograph-space|ideograph-parenthesis|ideograph-numeric|ideograph-alpha|horizontal|hidden|help|hand|groove|fixed|ellipsis|e-resize|double|dotted|distribute|distribute-space|distribute-letter|distribute-all-lines|disc|disabled|default|decimal|dashed|crosshair|collapse|col-resize|circle|char|center|capitalize|break-word|break-all|bottom|both|bolder|bold|block|bidi-override|below|baseline|auto|always|all-scroll|absolute|table|table-cell)\\b"},{begin:/:/,end:/[;}{]/,relevance:0,contains:[t.BLOCK_COMMENT,f,t.HEXCOLOR,t.CSS_NUMBER_MODE,e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,t.IMPORTANT,t.FUNCTION_DISPATCH]},{begin:"@(page|font-face)",keywords:{$pattern:u,keyword:"@page @font-face"}},{begin:"@",end:"[{;]",returnBegin:!0,keywords:{$pattern:/[a-z-]+/,keyword:d,attribute:a.join(" ")},contains:[{begin:u,className:"keyword"},{begin:/[a-z-]+(?=:)/,className:"attribute"},f,e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,t.HEXCOLOR,t.CSS_NUMBER_MODE]},t.FUNCTION_DISPATCH]}}},999489,(e,t,r)=>{t.exports=function(e){return{name:"Shell Session",aliases:["console","shellsession"],contains:[{className:"meta.prompt",begin:/^\s{0,3}[/~\w\d[\]()@-]*[>%$#][ ]?/,starts:{end:/[^\\](?=\s*$)/,subLanguage:"bash"}}]}}},156007,(e,t,r)=>{t.exports=function(e){let t=e.regex,r=e.COMMENT("--","$"),n={scope:"string",variants:[{begin:/'/,end:/'/,contains:[{match:/''/}]}]},i={begin:/"/,end:/"/,contains:[{match:/""/}]},a=["true","false","unknown"],o=["double precision","large object","with timezone","without timezone"],s=["bigint","binary","blob","boolean","char","character","clob","date","dec","decfloat","decimal","float","int","integer","interval","nchar","nclob","national","numeric","real","row","smallint","time","timestamp","varchar","varying","varbinary"],l=["abs","acos","array_agg","asin","atan","avg","cast","ceil","ceiling","coalesce","corr","cos","cosh","count","covar_pop","covar_samp","cume_dist","dense_rank","deref","element","exp","extract","first_value","floor","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","last_value","lead","listagg","ln","log","log10","lower","max","min","mod","nth_value","ntile","nullif","percent_rank","percentile_cont","percentile_disc","position","position_regex","power","rank","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","row_number","sin","sinh","sqrt","stddev_pop","stddev_samp","substring","substring_regex","sum","tan","tanh","translate","translate_regex","treat","trim","trim_array","unnest","upper","value_of","var_pop","var_samp","width_bucket"],c=["current_catalog","current_date","current_default_transform_group","current_path","current_role","current_schema","current_transform_group_for_type","current_user","session_user","system_time","system_user","current_time","localtime","current_timestamp","localtimestamp"],u=["create table","insert into","primary key","foreign key","not null","alter table","add constraint","grouping sets","on overflow","character set","respect nulls","ignore nulls","nulls first","nulls last","depth first","breadth first"],d=l,f=["abs","acos","all","allocate","alter","and","any","are","array","array_agg","array_max_cardinality","as","asensitive","asin","asymmetric","at","atan","atomic","authorization","avg","begin","begin_frame","begin_partition","between","bigint","binary","blob","boolean","both","by","call","called","cardinality","cascaded","case","cast","ceil","ceiling","char","char_length","character","character_length","check","classifier","clob","close","coalesce","collate","collect","column","commit","condition","connect","constraint","contains","convert","copy","corr","corresponding","cos","cosh","count","covar_pop","covar_samp","create","cross","cube","cume_dist","current","current_catalog","current_date","current_default_transform_group","current_path","current_role","current_row","current_schema","current_time","current_timestamp","current_path","current_role","current_transform_group_for_type","current_user","cursor","cycle","date","day","deallocate","dec","decimal","decfloat","declare","default","define","delete","dense_rank","deref","describe","deterministic","disconnect","distinct","double","drop","dynamic","each","element","else","empty","end","end_frame","end_partition","end-exec","equals","escape","every","except","exec","execute","exists","exp","external","extract","false","fetch","filter","first_value","float","floor","for","foreign","frame_row","free","from","full","function","fusion","get","global","grant","group","grouping","groups","having","hold","hour","identity","in","indicator","initial","inner","inout","insensitive","insert","int","integer","intersect","intersection","interval","into","is","join","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","language","large","last_value","lateral","lead","leading","left","like","like_regex","listagg","ln","local","localtime","localtimestamp","log","log10","lower","match","match_number","match_recognize","matches","max","member","merge","method","min","minute","mod","modifies","module","month","multiset","national","natural","nchar","nclob","new","no","none","normalize","not","nth_value","ntile","null","nullif","numeric","octet_length","occurrences_regex","of","offset","old","omit","on","one","only","open","or","order","out","outer","over","overlaps","overlay","parameter","partition","pattern","per","percent","percent_rank","percentile_cont","percentile_disc","period","portion","position","position_regex","power","precedes","precision","prepare","primary","procedure","ptf","range","rank","reads","real","recursive","ref","references","referencing","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","release","result","return","returns","revoke","right","rollback","rollup","row","row_number","rows","running","savepoint","scope","scroll","search","second","seek","select","sensitive","session_user","set","show","similar","sin","sinh","skip","smallint","some","specific","specifictype","sql","sqlexception","sqlstate","sqlwarning","sqrt","start","static","stddev_pop","stddev_samp","submultiset","subset","substring","substring_regex","succeeds","sum","symmetric","system","system_time","system_user","table","tablesample","tan","tanh","then","time","timestamp","timezone_hour","timezone_minute","to","trailing","translate","translate_regex","translation","treat","trigger","trim","trim_array","true","truncate","uescape","union","unique","unknown","unnest","update","upper","user","using","value","values","value_of","var_pop","var_samp","varbinary","varchar","varying","versioning","when","whenever","where","width_bucket","window","with","within","without","year","add","asc","collation","desc","final","first","last","view"].filter(e=>!l.includes(e)),h={scope:"variable",match:/@[a-z0-9][a-z0-9_]*/},p={scope:"operator",match:/[-+*/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?/,relevance:0},b={match:t.concat(/\b/,t.either(...d),/\s*\(/),relevance:0,keywords:{built_in:d}};function g(e){return t.concat(/\b/,t.either(...e.map(e=>e.replace(/\s+/,"\\s+"))),/\b/)}let m={scope:"keyword",match:g(u),relevance:0};return{name:"SQL",case_insensitive:!0,illegal:/[{}]|<\//,keywords:{$pattern:/\b[\w\.]+/,keyword:function(e,{exceptions:t,when:r}={}){let n=r;return t=t||[],e.map(e=>e.match(/\|\d+$/)||t.includes(e)?e:n(e)?`${e}|0`:e)}(f,{when:e=>e.length<3}),literal:a,type:s,built_in:c},contains:[{scope:"type",match:g(o)},m,b,h,n,i,e.C_NUMBER_MODE,e.C_BLOCK_COMMENT_MODE,r,p]}}},569196,(e,t,r)=>{function n(e){return e?"string"==typeof e?e:e.source:null}function i(e){return a("(?=",e,")")}function a(...e){return e.map(e=>n(e)).join("")}function o(e){let t=e[e.length-1];return"object"==typeof t&&t.constructor===Object?(e.splice(e.length-1,1),t):{}}function s(...e){return"("+(o(e).capture?"":"?:")+e.map(e=>n(e)).join("|")+")"}let l=e=>a(/\b/,e,/\w$/.test(e)?/\b/:/\B/),c=["Protocol","Type"].map(l),u=["init","self"].map(l),d=["Any","Self"],f=["actor","any","associatedtype","async","await",/as\?/,/as!/,"as","borrowing","break","case","catch","class","consume","consuming","continue","convenience","copy","default","defer","deinit","didSet","distributed","do","dynamic","each","else","enum","extension","fallthrough",/fileprivate\(set\)/,"fileprivate","final","for","func","get","guard","if","import","indirect","infix",/init\?/,/init!/,"inout",/internal\(set\)/,"internal","in","is","isolated","nonisolated","lazy","let","macro","mutating","nonmutating",/open\(set\)/,"open","operator","optional","override","package","postfix","precedencegroup","prefix",/private\(set\)/,"private","protocol",/public\(set\)/,"public","repeat","required","rethrows","return","set","some","static","struct","subscript","super","switch","throws","throw",/try\?/,/try!/,"try","typealias",/unowned\(safe\)/,/unowned\(unsafe\)/,"unowned","var","weak","where","while","willSet"],h=["false","nil","true"],p=["assignment","associativity","higherThan","left","lowerThan","none","right"],b=["#colorLiteral","#column","#dsohandle","#else","#elseif","#endif","#error","#file","#fileID","#fileLiteral","#filePath","#function","#if","#imageLiteral","#keyPath","#line","#selector","#sourceLocation","#warning"],g=["abs","all","any","assert","assertionFailure","debugPrint","dump","fatalError","getVaList","isKnownUniquelyReferenced","max","min","numericCast","pointwiseMax","pointwiseMin","precondition","preconditionFailure","print","readLine","repeatElement","sequence","stride","swap","swift_unboxFromSwiftValueWithType","transcode","type","unsafeBitCast","unsafeDowncast","withExtendedLifetime","withUnsafeMutablePointer","withUnsafePointer","withVaList","withoutActuallyEscaping","zip"],m=s(/[/=\-+!*%<>&|^~?]/,/[\u00A1-\u00A7]/,/[\u00A9\u00AB]/,/[\u00AC\u00AE]/,/[\u00B0\u00B1]/,/[\u00B6\u00BB\u00BF\u00D7\u00F7]/,/[\u2016-\u2017]/,/[\u2020-\u2027]/,/[\u2030-\u203E]/,/[\u2041-\u2053]/,/[\u2055-\u205E]/,/[\u2190-\u23FF]/,/[\u2500-\u2775]/,/[\u2794-\u2BFF]/,/[\u2E00-\u2E7F]/,/[\u3001-\u3003]/,/[\u3008-\u3020]/,/[\u3030]/),v=s(m,/[\u0300-\u036F]/,/[\u1DC0-\u1DFF]/,/[\u20D0-\u20FF]/,/[\uFE00-\uFE0F]/,/[\uFE20-\uFE2F]/),y=a(m,v,"*"),x=s(/[a-zA-Z_]/,/[\u00A8\u00AA\u00AD\u00AF\u00B2-\u00B5\u00B7-\u00BA]/,/[\u00BC-\u00BE\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF]/,/[\u0100-\u02FF\u0370-\u167F\u1681-\u180D\u180F-\u1DBF]/,/[\u1E00-\u1FFF]/,/[\u200B-\u200D\u202A-\u202E\u203F-\u2040\u2054\u2060-\u206F]/,/[\u2070-\u20CF\u2100-\u218F\u2460-\u24FF\u2776-\u2793]/,/[\u2C00-\u2DFF\u2E80-\u2FFF]/,/[\u3004-\u3007\u3021-\u302F\u3031-\u303F\u3040-\uD7FF]/,/[\uF900-\uFD3D\uFD40-\uFDCF\uFDF0-\uFE1F\uFE30-\uFE44]/,/[\uFE47-\uFEFE\uFF00-\uFFFD]/),w=s(x,/\d/,/[\u0300-\u036F\u1DC0-\u1DFF\u20D0-\u20FF\uFE20-\uFE2F]/),_=a(x,w,"*"),S=a(/[A-Z]/,w,"*"),E=["attached","autoclosure",a(/convention\(/,s("swift","block","c"),/\)/),"discardableResult","dynamicCallable","dynamicMemberLookup","escaping","freestanding","frozen","GKInspectable","IBAction","IBDesignable","IBInspectable","IBOutlet","IBSegueAction","inlinable","main","nonobjc","NSApplicationMain","NSCopying","NSManaged",a(/objc\(/,_,/\)/),"objc","objcMembers","propertyWrapper","requires_stored_property_inits","resultBuilder","Sendable","testable","UIApplicationMain","unchecked","unknown","usableFromInline","warn_unqualified_access"],k=["iOS","iOSApplicationExtension","macOS","macOSApplicationExtension","macCatalyst","macCatalystApplicationExtension","watchOS","watchOSApplicationExtension","tvOS","tvOSApplicationExtension","swift"];t.exports=function(e){let t={match:/\s+/,relevance:0},r=e.COMMENT("/\\*","\\*/",{contains:["self"]}),n=[e.C_LINE_COMMENT_MODE,r],o={match:[/\./,s(...c,...u)],className:{2:"keyword"}},m={match:a(/\./,s(...f)),relevance:0},x=f.filter(e=>"string"==typeof e).concat(["_|0"]),N={variants:[{className:"keyword",match:s(...f.filter(e=>"string"!=typeof e).concat(d).map(l),...u)}]},j={$pattern:s(/\b\w+/,/#\w+/),keyword:x.concat(b),literal:h},C=[o,m,N],M=[{match:a(/\./,s(...g)),relevance:0},{className:"built_in",match:a(/\b/,s(...g),/(?=\()/)}],A={match:/->/,relevance:0},R=[A,{className:"operator",relevance:0,variants:[{match:y},{match:`\\.(\\.|${v})+`}]}],T="([0-9]_*)+",O="([0-9a-fA-F]_*)+",L={className:"number",relevance:0,variants:[{match:`\\b(${T})(\\.(${T}))?([eE][+-]?(${T}))?\\b`},{match:`\\b0x(${O})(\\.(${O}))?([pP][+-]?(${T}))?\\b`},{match:/\b0o([0-7]_*)+\b/},{match:/\b0b([01]_*)+\b/}]},I=(e="")=>({className:"subst",variants:[{match:a(/\\/,e,/[0\\tnr"']/)},{match:a(/\\/,e,/u\{[0-9a-fA-F]{1,8}\}/)}]}),P=(e="")=>({className:"subst",match:a(/\\/,e,/[\t ]*(?:[\r\n]|\r\n)/)}),B=(e="")=>({className:"subst",label:"interpol",begin:a(/\\/,e,/\(/),end:/\)/}),D=(e="")=>({begin:a(e,/"""/),end:a(/"""/,e),contains:[I(e),P(e),B(e)]}),z=(e="")=>({begin:a(e,/"/),end:a(/"/,e),contains:[I(e),B(e)]}),F={className:"string",variants:[D(),D("#"),D("##"),D("###"),z(),z("#"),z("##"),z("###")]},$=[e.BACKSLASH_ESCAPE,{begin:/\[/,end:/\]/,relevance:0,contains:[e.BACKSLASH_ESCAPE]}],U={begin:/\/[^\s](?=[^/\n]*\/)/,end:/\//,contains:$},H=e=>{let t=a(e,/\//),r=a(/\//,e);return{begin:t,end:r,contains:[...$,{scope:"comment",begin:`#(?!.*${r})`,end:/$/}]}},V={scope:"regexp",variants:[H("###"),H("##"),H("#"),U]},q={match:a(/`/,_,/`/)},W=[q,{className:"variable",match:/\$\d+/},{className:"variable",match:`\\$${w}+`}],K=[{match:/(@|#(un)?)available/,scope:"keyword",starts:{contains:[{begin:/\(/,end:/\)/,keywords:k,contains:[...R,L,F]}]}},{scope:"keyword",match:a(/@/,s(...E),i(s(/\(/,/\s+/)))},{scope:"meta",match:a(/@/,_)}],G={match:i(/\b[A-Z]/),relevance:0,contains:[{className:"type",match:a(/(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)/,w,"+")},{className:"type",match:S,relevance:0},{match:/[?!]+/,relevance:0},{match:/\.\.\./,relevance:0},{match:a(/\s+&\s+/,i(S)),relevance:0}]},X={begin:/</,end:/>/,keywords:j,contains:[...n,...C,...K,A,G]};G.contains.push(X);let Z={begin:/\(/,end:/\)/,relevance:0,keywords:j,contains:["self",{match:a(_,/\s*:/),keywords:"_|0",relevance:0},...n,V,...C,...M,...R,L,F,...W,...K,G]},Y={begin:/</,end:/>/,keywords:"repeat each",contains:[...n,G]},J={begin:/\(/,end:/\)/,keywords:j,contains:[{begin:s(i(a(_,/\s*:/)),i(a(_,/\s+/,_,/\s*:/))),end:/:/,relevance:0,contains:[{className:"keyword",match:/\b_\b/},{className:"params",match:_}]},...n,...C,...R,L,F,...K,G,Z],endsParent:!0,illegal:/["']/},Q={match:[/(func|macro)/,/\s+/,s(q.match,_,y)],className:{1:"keyword",3:"title.function"},contains:[Y,J,t],illegal:[/\[/,/%/]},ee={match:[/\b(?:subscript|init[?!]?)/,/\s*(?=[<(])/],className:{1:"keyword"},contains:[Y,J,t],illegal:/\[|%/},et={match:[/operator/,/\s+/,y],className:{1:"keyword",3:"title"}},er={begin:[/precedencegroup/,/\s+/,S],className:{1:"keyword",3:"title"},contains:[G],keywords:[...p,...h],end:/}/},en={match:[/class\b/,/\s+/,/func\b/,/\s+/,/\b[A-Za-z_][A-Za-z0-9_]*\b/],scope:{1:"keyword",3:"keyword",5:"title.function"}},ei={match:[/class\b/,/\s+/,/var\b/],scope:{1:"keyword",3:"keyword"}},ea={begin:[/(struct|protocol|class|extension|enum|actor)/,/\s+/,_,/\s*/],beginScope:{1:"keyword",3:"title.class"},keywords:j,contains:[Y,...C,{begin:/:/,end:/\{/,keywords:j,contains:[{scope:"title.class.inherited",match:S},...C],relevance:0}]};for(let e of F.variants){let t=e.contains.find(e=>"interpol"===e.label);t.keywords=j;let r=[...C,...M,...R,L,F,...W];t.contains=[...r,{begin:/\(/,end:/\)/,contains:["self",...r]}]}return{name:"Swift",keywords:j,contains:[...n,Q,ee,en,ei,ea,et,er,{beginKeywords:"import",end:/$/,contains:[...n],relevance:0},V,...C,...M,...R,L,F,...W,...K,G,Z]}}},121551,(e,t,r)=>{t.exports=function(e){let t="true false yes no null",r="[\\w#;/?:@&=+$,.~*'()[\\]]+",n={className:"attr",variants:[{begin:/[\w*@][\w*@ :()\./-]*:(?=[ \t]|$)/},{begin:/"[\w*@][\w*@ :()\./-]*":(?=[ \t]|$)/},{begin:/'[\w*@][\w*@ :()\./-]*':(?=[ \t]|$)/}]},i={className:"template-variable",variants:[{begin:/\{\{/,end:/\}\}/},{begin:/%\{/,end:/\}/}]},a={className:"string",relevance:0,begin:/'/,end:/'/,contains:[{match:/''/,scope:"char.escape",relevance:0}]},o={className:"string",relevance:0,variants:[{begin:/"/,end:/"/},{begin:/\S+/}],contains:[e.BACKSLASH_ESCAPE,i]},s=e.inherit(o,{variants:[{begin:/'/,end:/'/,contains:[{begin:/''/,relevance:0}]},{begin:/"/,end:/"/},{begin:/[^\s,{}[\]]+/}]}),l={className:"number",begin:"\\b[0-9]{4}(-[0-9][0-9]){0,2}([Tt \\t][0-9][0-9]?(:[0-9][0-9]){2})?(\\.[0-9]*)?([ \\t])*(Z|[-+][0-9][0-9]?(:[0-9][0-9])?)?\\b"},c={end:",",endsWithParent:!0,excludeEnd:!0,keywords:t,relevance:0},u={begin:/\{/,end:/\}/,contains:[c],illegal:"\\n",relevance:0},d={begin:"\\[",end:"\\]",contains:[c],illegal:"\\n",relevance:0},f=[n,{className:"meta",begin:"^---\\s*$",relevance:10},{className:"string",begin:"[\\|>]([1-9]?[+-])?[ ]*\\n( +)[^ ][^\\n]*\\n(\\2[^\\n]+\\n?)*"},{begin:"<%[%=-]?",end:"[%-]?%>",subLanguage:"ruby",excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:"!\\w+!"+r},{className:"type",begin:"!<"+r+">"},{className:"type",begin:"!"+r},{className:"type",begin:"!!"+r},{className:"meta",begin:"&"+e.UNDERSCORE_IDENT_RE+"$"},{className:"meta",begin:"\\*"+e.UNDERSCORE_IDENT_RE+"$"},{className:"bullet",begin:"-(?=[ ]|$)",relevance:0},e.HASH_COMMENT_MODE,{beginKeywords:t,keywords:{literal:t}},l,{className:"number",begin:e.C_NUMBER_RE+"\\b",relevance:0},u,d,a,o],h=[...f];return h.pop(),h.push(s),c.contains=h,{name:"YAML",case_insensitive:!0,aliases:["yml"],contains:f}}},465202,(e,t,r)=>{let n="[A-Za-z$_][0-9A-Za-z$_]*",i=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends","using"],a=["true","false","null","undefined","NaN","Infinity"],o=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],s=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],l=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],c=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],u=[].concat(l,o,s);function d(e){let t=e.regex,r=(e,{after:t})=>{let r="</"+e[0].slice(1);return -1!==e.input.indexOf(r,t)},d=n,f="<>",h="</>",p=/<[A-Za-z0-9\\._:-]+\s*\/>/,b=/<[A-Za-z0-9\\._:-]+/,g=/\/[A-Za-z0-9\\._:-]+>|\/>/,m=(e,t)=>{let n,i=e[0].length+e.index,a=e.input[i];if("<"===a||","===a)return void t.ignoreMatch();">"!==a||r(e,{after:i})||t.ignoreMatch();let o=e.input.substring(i);if((n=o.match(/^\s*=/))||(n=o.match(/^\s+extends\s+/))&&0===n.index)return void t.ignoreMatch()},v={$pattern:n,keyword:i,literal:a,built_in:u,"variable.language":c},y="[0-9](_?[0-9])*",x=`\\.(${y})`,w="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",_={className:"number",variants:[{begin:`(\\b(${w})((${x})|\\.)?|(${x}))[eE][+-]?(${y})\\b`},{begin:`\\b(${w})\\b((${x})\\b|\\.)?|(${x})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},S={className:"subst",begin:"\\$\\{",end:"\\}",keywords:v,contains:[]},E={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,S],subLanguage:"xml"}},k={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,S],subLanguage:"css"}},N={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,S],subLanguage:"graphql"}},j={className:"string",begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE,S]},C={className:"comment",variants:[e.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:d+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),e.C_BLOCK_COMMENT_MODE,e.C_LINE_COMMENT_MODE]},M=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,E,k,N,j,{match:/\$\d+/},_];S.contains=M.concat({begin:/\{/,end:/\}/,keywords:v,contains:["self"].concat(M)});let A=[].concat(C,S.contains),R=A.concat([{begin:/(\s*)\(/,end:/\)/,keywords:v,contains:["self"].concat(A)}]),T={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:v,contains:R},O={variants:[{match:[/class/,/\s+/,d,/\s+/,/extends/,/\s+/,t.concat(d,"(",t.concat(/\./,d),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,d],scope:{1:"keyword",3:"title.class"}}]},L={relevance:0,match:t.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...o,...s]}},I={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},P={variants:[{match:[/function/,/\s+/,d,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[T],illegal:/%/},B={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function D(e){return t.concat("(?!",e.join("|"),")")}let z={match:t.concat(/\b/,D([...l,"super","import"].map(e=>`${e}\\s*\\(`)),d,t.lookahead(/\s*\(/)),className:"title.function",relevance:0},F={begin:t.concat(/\./,t.lookahead(t.concat(d,/(?![0-9A-Za-z$_(])/))),end:d,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},$={match:[/get|set/,/\s+/,d,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},T]},U="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+e.UNDERSCORE_IDENT_RE+")\\s*=>",H={match:[/const|var|let/,/\s+/,d,/\s*/,/=\s*/,/(async\s*)?/,t.lookahead(U)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[T]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:v,exports:{PARAMS_CONTAINS:R,CLASS_REFERENCE:L},illegal:/#(?![$_A-z])/,contains:[e.SHEBANG({label:"shebang",binary:"node",relevance:5}),I,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,E,k,N,j,C,{match:/\$\d+/},_,L,{scope:"attr",match:d+t.lookahead(":"),relevance:0},H,{begin:"("+e.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[C,e.REGEXP_MODE,{className:"function",begin:U,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:e.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:v,contains:R}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:f,end:h},{match:p},{begin:b,"on:begin":m,end:g}],subLanguage:"xml",contains:[{begin:b,end:g,skip:!0,contains:["self"]}]}]},P,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+e.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[T,e.inherit(e.TITLE_MODE,{begin:d,className:"title.function"})]},{match:/\.\.\./,relevance:0},F,{match:"\\$"+d,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[T]},z,B,O,$,{match:/\$[(.]/}]}}t.exports=function(e){let t=e.regex,r=d(e),o=n,s=["any","void","number","boolean","string","object","never","symbol","bigint","unknown"],l={begin:[/namespace/,/\s+/,e.IDENT_RE],beginScope:{1:"keyword",3:"title.class"}},f={beginKeywords:"interface",end:/\{/,excludeEnd:!0,keywords:{keyword:"interface extends",built_in:s},contains:[r.exports.CLASS_REFERENCE]},h={className:"meta",relevance:10,begin:/^\s*['"]use strict['"]/},p=["type","interface","public","private","protected","implements","declare","abstract","readonly","enum","override","satisfies"],b={$pattern:n,keyword:i.concat(p),literal:a,built_in:u.concat(s),"variable.language":c},g={className:"meta",begin:"@"+o},m=(e,t,r)=>{let n=e.contains.findIndex(e=>e.label===t);if(-1===n)throw Error("can not find mode to replace");e.contains.splice(n,1,r)};Object.assign(r.keywords,b),r.exports.PARAMS_CONTAINS.push(g);let v=r.contains.find(e=>"attr"===e.scope),y=Object.assign({},v,{match:t.concat(o,t.lookahead(/\s*\?:/))});return r.exports.PARAMS_CONTAINS.push([r.exports.CLASS_REFERENCE,v,y]),r.contains=r.contains.concat([g,l,f,y]),m(r,"shebang",e.SHEBANG()),m(r,"use_strict",h),r.contains.find(e=>"func.def"===e.label).relevance=0,Object.assign(r,{name:"TypeScript",aliases:["ts","tsx","mts","cts"]}),r}},498038,(e,t,r)=>{t.exports=function(e){let t=e.regex,r={className:"string",begin:/"(""|[^/n])"C\b/},n={className:"string",begin:/"/,end:/"/,illegal:/\n/,contains:[{begin:/""/}]},i=/\d{1,2}\/\d{1,2}\/\d{4}/,a=/\d{4}-\d{1,2}-\d{1,2}/,o=/(\d|1[012])(:\d+){0,2} *(AM|PM)/,s=/\d{1,2}(:\d{1,2}){1,2}/,l={className:"literal",variants:[{begin:t.concat(/# */,t.either(a,i),/ *#/)},{begin:t.concat(/# */,s,/ *#/)},{begin:t.concat(/# */,o,/ *#/)},{begin:t.concat(/# */,t.either(a,i),/ +/,t.either(o,s),/ *#/)}]},c={className:"number",relevance:0,variants:[{begin:/\b\d[\d_]*((\.[\d_]+(E[+-]?[\d_]+)?)|(E[+-]?[\d_]+))[RFD@!#]?/},{begin:/\b\d[\d_]*((U?[SIL])|[%&])?/},{begin:/&H[\dA-F_]+((U?[SIL])|[%&])?/},{begin:/&O[0-7_]+((U?[SIL])|[%&])?/},{begin:/&B[01_]+((U?[SIL])|[%&])?/}]},u={className:"label",begin:/^\w+:/},d=e.COMMENT(/'''/,/$/,{contains:[{className:"doctag",begin:/<\/?/,end:/>/}]}),f=e.COMMENT(null,/$/,{variants:[{begin:/'/},{begin:/([\t ]|^)REM(?=\s)/}]}),h={className:"meta",begin:/[\t ]*#(const|disable|else|elseif|enable|end|externalsource|if|region)\b/,end:/$/,keywords:{keyword:"const disable else elseif enable end externalsource if region then"},contains:[f]};return{name:"Visual Basic .NET",aliases:["vb"],case_insensitive:!0,classNameAliases:{label:"symbol"},keywords:{keyword:"addhandler alias aggregate ansi as async assembly auto binary by byref byval call case catch class compare const continue custom declare default delegate dim distinct do each equals else elseif end enum erase error event exit explicit finally for friend from function get global goto group handles if implements imports in inherits interface into iterator join key let lib loop me mid module mustinherit mustoverride mybase myclass namespace narrowing new next notinheritable notoverridable of off on operator option optional order overloads overridable overrides paramarray partial preserve private property protected public raiseevent readonly redim removehandler resume return select set shadows shared skip static step stop structure strict sub synclock take text then throw to try unicode until using when where while widening with withevents writeonly yield",built_in:"addressof and andalso await directcast gettype getxmlnamespace is isfalse isnot istrue like mod nameof new not or orelse trycast typeof xor cbool cbyte cchar cdate cdbl cdec cint clng cobj csbyte cshort csng cstr cuint culng cushort",type:"boolean byte char date decimal double integer long object sbyte short single string uinteger ulong ushort",literal:"true false nothing"},illegal:"//|\\{|\\}|endif|gosub|variant|wend|^\\$ ",contains:[r,n,l,c,u,d,f,h]}}},173588,(e,t,r)=>{t.exports=function(e){e.regex;let t=e.COMMENT(/\(;/,/;\)/);t.contains.push("self");let r=e.COMMENT(/;;/,/$/),n={className:"number",relevance:0,match:/[+-]?\b(?:\d(?:_?\d)*(?:\.\d(?:_?\d)*)?(?:[eE][+-]?\d(?:_?\d)*)?|0x[\da-fA-F](?:_?[\da-fA-F])*(?:\.[\da-fA-F](?:_?[\da-fA-D])*)?(?:[pP][+-]?\d(?:_?\d)*)?)\b|\binf\b|\bnan(?::0x[\da-fA-F](?:_?[\da-fA-D])*)?\b/},i={match:/(i32|i64|f32|f64)(?!\.)/,className:"type"},a={className:"keyword",match:/\b(f32|f64|i32|i64)(?:\.(?:abs|add|and|ceil|clz|const|convert_[su]\/i(?:32|64)|copysign|ctz|demote\/f64|div(?:_[su])?|eqz?|extend_[su]\/i32|floor|ge(?:_[su])?|gt(?:_[su])?|le(?:_[su])?|load(?:(?:8|16|32)_[su])?|lt(?:_[su])?|max|min|mul|nearest|neg?|or|popcnt|promote\/f32|reinterpret\/[fi](?:32|64)|rem_[su]|rot[lr]|shl|shr_[su]|store(?:8|16|32)?|sqrt|sub|trunc(?:_[su]\/f(?:32|64))?|wrap\/i64|xor))\b/};return{name:"WebAssembly",keywords:{$pattern:/[\w.]+/,keyword:["anyfunc","block","br","br_if","br_table","call","call_indirect","data","drop","elem","else","end","export","func","global.get","global.set","local.get","local.set","local.tee","get_global","get_local","global","if","import","local","loop","memory","memory.grow","memory.size","module","mut","nop","offset","param","result","return","select","set_global","set_local","start","table","tee_local","then","type","unreachable"]},contains:[r,t,{match:[/(?:offset|align)/,/\s*/,/=/],className:{1:"keyword",3:"operator"}},{className:"variable",begin:/\$[\w_]+/},{match:/(\((?!;)|\))+/,className:"punctuation",relevance:0},{begin:[/(?:func|call|call_indirect)/,/\s+/,/\$[^\s)]+/],className:{1:"keyword",3:"title.function"}},e.QUOTE_STRING_MODE,i,a,n]}}},197265,(e,t,r)=>{var n=e.r(98006);n.registerLanguage("xml",e.r(440453)),n.registerLanguage("bash",e.r(883787)),n.registerLanguage("c",e.r(926822)),n.registerLanguage("cpp",e.r(508377)),n.registerLanguage("csharp",e.r(379908)),n.registerLanguage("css",e.r(198453)),n.registerLanguage("markdown",e.r(510444)),n.registerLanguage("diff",e.r(649050)),n.registerLanguage("ruby",e.r(562084)),n.registerLanguage("go",e.r(887598)),n.registerLanguage("graphql",e.r(730070)),n.registerLanguage("ini",e.r(634272)),n.registerLanguage("java",e.r(322888)),n.registerLanguage("javascript",e.r(738499)),n.registerLanguage("json",e.r(462533)),n.registerLanguage("kotlin",e.r(71081)),n.registerLanguage("less",e.r(413264)),n.registerLanguage("lua",e.r(675841)),n.registerLanguage("makefile",e.r(496483)),n.registerLanguage("perl",e.r(511132)),n.registerLanguage("objectivec",e.r(386050)),n.registerLanguage("php",e.r(701584)),n.registerLanguage("php-template",e.r(391724)),n.registerLanguage("plaintext",e.r(736135)),n.registerLanguage("python",e.r(675229)),n.registerLanguage("python-repl",e.r(702974)),n.registerLanguage("r",e.r(921058)),n.registerLanguage("rust",e.r(411227)),n.registerLanguage("scss",e.r(929828)),n.registerLanguage("shell",e.r(999489)),n.registerLanguage("sql",e.r(156007)),n.registerLanguage("swift",e.r(569196)),n.registerLanguage("yaml",e.r(121551)),n.registerLanguage("typescript",e.r(465202)),n.registerLanguage("vbnet",e.r(498038)),n.registerLanguage("wasm",e.r(173588)),n.HighlightJS=n,n.default=n,t.exports=n},338128,(e,t,r)=>{"use strict";r.byteLength=u,r.toByteArray=f,r.fromByteArray=b;for(var n=[],i=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,l=o.length;s<l;++s)n[s]=o[s],i[o.charCodeAt(s)]=s;function c(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");-1===r&&(r=t);var n=r===t?0:4-r%4;return[r,n]}function u(e){var t=c(e),r=t[0],n=t[1];return(r+n)*3/4-n}function d(e,t,r){return(t+r)*3/4-r}function f(e){var t,r,n=c(e),o=n[0],s=n[1],l=new a(d(e,o,s)),u=0,f=s>0?o-4:o;for(r=0;r<f;r+=4)t=i[e.charCodeAt(r)]<<18|i[e.charCodeAt(r+1)]<<12|i[e.charCodeAt(r+2)]<<6|i[e.charCodeAt(r+3)],l[u++]=t>>16&255,l[u++]=t>>8&255,l[u++]=255&t;return 2===s&&(t=i[e.charCodeAt(r)]<<2|i[e.charCodeAt(r+1)]>>4,l[u++]=255&t),1===s&&(t=i[e.charCodeAt(r)]<<10|i[e.charCodeAt(r+1)]<<4|i[e.charCodeAt(r+2)]>>2,l[u++]=t>>8&255,l[u++]=255&t),l}function h(e){return n[e>>18&63]+n[e>>12&63]+n[e>>6&63]+n[63&e]}function p(e,t,r){for(var n=[],i=t;i<r;i+=3)n.push(h((e[i]<<16&0xff0000)+(e[i+1]<<8&65280)+(255&e[i+2])));return n.join("")}function b(e){for(var t,r=e.length,i=r%3,a=[],o=16383,s=0,l=r-i;s<l;s+=o)a.push(p(e,s,s+o>l?l:s+o));return 1===i?a.push(n[(t=e[r-1])>>2]+n[t<<4&63]+"=="):2===i&&a.push(n[(t=(e[r-2]<<8)+e[r-1])>>10]+n[t>>4&63]+n[t<<2&63]+"="),a.join("")}i[45]=62,i[95]=63},978633,(e,t,r)=>{r.read=function(e,t,r,n,i){var a,o,s=8*i-n-1,l=(1<<s)-1,c=l>>1,u=-7,d=r?i-1:0,f=r?-1:1,h=e[t+d];for(d+=f,a=h&(1<<-u)-1,h>>=-u,u+=s;u>0;a=256*a+e[t+d],d+=f,u-=8);for(o=a&(1<<-u)-1,a>>=-u,u+=n;u>0;o=256*o+e[t+d],d+=f,u-=8);if(0===a)a=1-c;else{if(a===l)return o?NaN:1/0*(h?-1:1);o+=Math.pow(2,n),a-=c}return(h?-1:1)*o*Math.pow(2,a-n)},r.write=function(e,t,r,n,i,a){var o,s,l,c=8*a-i-1,u=(1<<c)-1,d=u>>1,f=5960464477539062e-23*(23===i),h=n?0:a-1,p=n?1:-1,b=+(t<0||0===t&&1/t<0);for(isNaN(t=Math.abs(t))||t===1/0?(s=+!!isNaN(t),o=u):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+d>=1?t+=f/l:t+=f*Math.pow(2,1-d),t*l>=2&&(o++,l/=2),o+d>=u?(s=0,o=u):o+d>=1?(s=(t*l-1)*Math.pow(2,i),o+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,i),o=0));i>=8;e[r+h]=255&s,h+=p,s/=256,i-=8);for(o=o<<i|s,c+=i;c>0;e[r+h]=255&o,h+=p,o/=256,c-=8);e[r+h-p]|=128*b}},738254,(e,t,r)=>{"use strict";let n=e.r(338128),i=e.r(978633),a="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=c,r.SlowBuffer=x,r.INSPECT_MAX_BYTES=50;let o=0x7fffffff;function s(){try{let e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}function l(e){if(e>o)throw RangeError('The value "'+e+'" is invalid for option "size"');let t=new Uint8Array(e);return Object.setPrototypeOf(t,c.prototype),t}function c(e,t,r){if("number"==typeof e){if("string"==typeof t)throw TypeError('The "string" argument must be of type string. Received type number');return h(e)}return u(e,t,r)}function u(e,t,r){if("string"==typeof e)return p(e,t);if(ArrayBuffer.isView(e))return g(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(eo(e,ArrayBuffer)||e&&eo(e.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(eo(e,SharedArrayBuffer)||e&&eo(e.buffer,SharedArrayBuffer)))return m(e,t,r);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');let n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return c.from(n,t,r);let i=v(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return c.from(e[Symbol.toPrimitive]("string"),t,r);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function d(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function f(e,t,r){return(d(e),e<=0)?l(e):void 0!==t?"string"==typeof r?l(e).fill(t,r):l(e).fill(t):l(e)}function h(e){return d(e),l(e<0?0:0|y(e))}function p(e,t){if(("string"!=typeof t||""===t)&&(t="utf8"),!c.isEncoding(t))throw TypeError("Unknown encoding: "+t);let r=0|w(e,t),n=l(r),i=n.write(e,t);return i!==r&&(n=n.slice(0,i)),n}function b(e){let t=e.length<0?0:0|y(e.length),r=l(t);for(let n=0;n<t;n+=1)r[n]=255&e[n];return r}function g(e){if(eo(e,Uint8Array)){let t=new Uint8Array(e);return m(t.buffer,t.byteOffset,t.byteLength)}return b(e)}function m(e,t,r){let n;if(t<0||e.byteLength<t)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),c.prototype),n}function v(e){if(c.isBuffer(e)){let t=0|y(e.length),r=l(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||es(e.length)?l(0):b(e):"Buffer"===e.type&&Array.isArray(e.data)?b(e.data):void 0}function y(e){if(e>=o)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|e}function x(e){return+e!=e&&(e=0),c.alloc(+e)}function w(e,t){if(c.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||eo(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);let r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return et(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return ei(e).length;default:if(i)return n?-1:et(e).length;t=(""+t).toLowerCase(),i=!0}}function _(e,t,r){let n=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===r||r>this.length)&&(r=this.length),r<=0||(r>>>=0)<=(t>>>=0)))return"";for(e||(e="utf8");;)switch(e){case"hex":return B(this,t,r);case"utf8":case"utf-8":return T(this,t,r);case"ascii":return I(this,t,r);case"latin1":case"binary":return P(this,t,r);case"base64":return R(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,t,r);default:if(n)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function S(e,t,r){let n=e[t];e[t]=e[r],e[r]=n}function E(e,t,r,n,i){if(0===e.length)return -1;if("string"==typeof r?(n=r,r=0):r>0x7fffffff?r=0x7fffffff:r<-0x80000000&&(r=-0x80000000),es(r*=1)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length)if(i)return -1;else r=e.length-1;else if(r<0)if(!i)return -1;else r=0;if("string"==typeof t&&(t=c.from(t,n)),c.isBuffer(t))return 0===t.length?-1:k(e,t,r,n,i);if("number"==typeof t){if(t&=255,"function"==typeof Uint8Array.prototype.indexOf)if(i)return Uint8Array.prototype.indexOf.call(e,t,r);else return Uint8Array.prototype.lastIndexOf.call(e,t,r);return k(e,[t],r,n,i)}throw TypeError("val must be string, number or Buffer")}function k(e,t,r,n,i){let a,o=1,s=e.length,l=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return -1;o=2,s/=2,l/=2,r/=2}function c(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){let n=-1;for(a=r;a<s;a++)if(c(e,a)===c(t,-1===n?0:a-n)){if(-1===n&&(n=a),a-n+1===l)return n*o}else -1!==n&&(a-=a-n),n=-1}else for(r+l>s&&(r=s-l),a=r;a>=0;a--){let r=!0;for(let n=0;n<l;n++)if(c(e,a+n)!==c(t,n)){r=!1;break}if(r)return a}return -1}function N(e,t,r,n){let i;r=Number(r)||0;let a=e.length-r;n?(n=Number(n))>a&&(n=a):n=a;let o=t.length;for(n>o/2&&(n=o/2),i=0;i<n;++i){let n=parseInt(t.substr(2*i,2),16);if(es(n))break;e[r+i]=n}return i}function j(e,t,r,n){return ea(et(t,e.length-r),e,r,n)}function C(e,t,r,n){return ea(er(t),e,r,n)}function M(e,t,r,n){return ea(ei(t),e,r,n)}function A(e,t,r,n){return ea(en(t,e.length-r),e,r,n)}function R(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function T(e,t,r){r=Math.min(e.length,r);let n=[],i=t;for(;i<r;){let t=e[i],a=null,o=t>239?4:t>223?3:t>191?2:1;if(i+o<=r){let r,n,s,l;switch(o){case 1:t<128&&(a=t);break;case 2:(192&(r=e[i+1]))==128&&(l=(31&t)<<6|63&r)>127&&(a=l);break;case 3:r=e[i+1],n=e[i+2],(192&r)==128&&(192&n)==128&&(l=(15&t)<<12|(63&r)<<6|63&n)>2047&&(l<55296||l>57343)&&(a=l);break;case 4:r=e[i+1],n=e[i+2],s=e[i+3],(192&r)==128&&(192&n)==128&&(192&s)==128&&(l=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&s)>65535&&l<1114112&&(a=l)}}null===a?(a=65533,o=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),i+=o}return L(n)}r.kMaxLength=0x7fffffff,c.TYPED_ARRAY_SUPPORT=s(),c.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}}),c.poolSize=8192,c.from=function(e,t,r){return u(e,t,r)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array),c.alloc=function(e,t,r){return f(e,t,r)},c.allocUnsafe=function(e){return h(e)},c.allocUnsafeSlow=function(e){return h(e)},c.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==c.prototype},c.compare=function(e,t){if(eo(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),eo(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),!c.isBuffer(e)||!c.isBuffer(t))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,n=t.length;for(let i=0,a=Math.min(r,n);i<a;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:+(n<r)},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){let r;if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);if(void 0===t)for(r=0,t=0;r<e.length;++r)t+=e[r].length;let n=c.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){let t=e[r];if(eo(t,Uint8Array))i+t.length>n.length?(c.isBuffer(t)||(t=c.from(t)),t.copy(n,i)):Uint8Array.prototype.set.call(n,t,i);else if(c.isBuffer(t))t.copy(n,i);else throw TypeError('"list" argument must be an Array of Buffers');i+=t.length}return n},c.byteLength=w,c.prototype._isBuffer=!0,c.prototype.swap16=function(){let e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)S(this,t,t+1);return this},c.prototype.swap32=function(){let e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)S(this,t,t+3),S(this,t+1,t+2);return this},c.prototype.swap64=function(){let e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)S(this,t,t+7),S(this,t+1,t+6),S(this,t+2,t+5),S(this,t+3,t+4);return this},c.prototype.toString=function(){let e=this.length;return 0===e?"":0==arguments.length?T(this,0,e):_.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(e){if(!c.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){let e="",t=r.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},a&&(c.prototype[a]=c.prototype.inspect),c.prototype.compare=function(e,t,r,n,i){if(eo(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),!c.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return -1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,i>>>=0,this===e)return 0;let a=i-n,o=r-t,s=Math.min(a,o),l=this.slice(n,i),u=e.slice(t,r);for(let e=0;e<s;++e)if(l[e]!==u[e]){a=l[e],o=u[e];break}return a<o?-1:+(o<a)},c.prototype.includes=function(e,t,r){return -1!==this.indexOf(e,t,r)},c.prototype.indexOf=function(e,t,r){return E(this,e,t,r,!0)},c.prototype.lastIndexOf=function(e,t,r){return E(this,e,t,r,!1)},c.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let a=!1;for(;;)switch(n){case"hex":return N(this,e,t,r);case"utf8":case"utf-8":return j(this,e,t,r);case"ascii":case"latin1":case"binary":return C(this,e,t,r);case"base64":return M(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,e,t,r);default:if(a)throw TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),a=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};let O=4096;function L(e){let t=e.length;if(t<=O)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=O));return r}function I(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function P(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function B(e,t,r){let n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let i="";for(let n=t;n<r;++n)i+=el[e[n]];return i}function D(e,t,r){let n=e.slice(t,r),i="";for(let e=0;e<n.length-1;e+=2)i+=String.fromCharCode(n[e]+256*n[e+1]);return i}function z(e,t,r){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>r)throw RangeError("Trying to access beyond buffer length")}function F(e,t,r,n,i,a){if(!c.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw RangeError('"value" argument is out of bounds');if(r+n>e.length)throw RangeError("Index out of range")}function $(e,t,r,n,i){Z(t,n,i,e,r,7);let a=Number(t&BigInt(0xffffffff));e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a;let o=Number(t>>BigInt(32)&BigInt(0xffffffff));return e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,r}function U(e,t,r,n,i){Z(t,n,i,e,r,7);let a=Number(t&BigInt(0xffffffff));e[r+7]=a,a>>=8,e[r+6]=a,a>>=8,e[r+5]=a,a>>=8,e[r+4]=a;let o=Number(t>>BigInt(32)&BigInt(0xffffffff));return e[r+3]=o,o>>=8,e[r+2]=o,o>>=8,e[r+1]=o,o>>=8,e[r]=o,r+8}function H(e,t,r,n,i,a){if(r+n>e.length||r<0)throw RangeError("Index out of range")}function V(e,t,r,n,a){return t*=1,r>>>=0,a||H(e,t,r,4,34028234663852886e22,-34028234663852886e22),i.write(e,t,r,n,23,4),r+4}function q(e,t,r,n,a){return t*=1,r>>>=0,a||H(e,t,r,8,17976931348623157e292,-17976931348623157e292),i.write(e,t,r,n,52,8),r+8}c.prototype.slice=function(e,t){let r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);let n=this.subarray(e,t);return Object.setPrototypeOf(n,c.prototype),n},c.prototype.readUintLE=c.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||z(e,t,this.length);let n=this[e],i=1,a=0;for(;++a<t&&(i*=256);)n+=this[e+a]*i;return n},c.prototype.readUintBE=c.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||z(e,t,this.length);let n=this[e+--t],i=1;for(;t>0&&(i*=256);)n+=this[e+--t]*i;return n},c.prototype.readUint8=c.prototype.readUInt8=function(e,t){return e>>>=0,t||z(e,1,this.length),this[e]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(e,t){return e>>>=0,t||z(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(e,t){return e>>>=0,t||z(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(e,t){return e>>>=0,t||z(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+0x1000000*this[e+3]},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(e,t){return e>>>=0,t||z(e,4,this.length),0x1000000*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readBigUInt64LE=ec(function(e){Y(e>>>=0,"offset");let t=this[e],r=this[e+7];(void 0===t||void 0===r)&&J(e,this.length-8);let n=t+256*this[++e]+65536*this[++e]+0x1000000*this[++e],i=this[++e]+256*this[++e]+65536*this[++e]+0x1000000*r;return BigInt(n)+(BigInt(i)<<BigInt(32))}),c.prototype.readBigUInt64BE=ec(function(e){Y(e>>>=0,"offset");let t=this[e],r=this[e+7];(void 0===t||void 0===r)&&J(e,this.length-8);let n=0x1000000*t+65536*this[++e]+256*this[++e]+this[++e],i=0x1000000*this[++e]+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)}),c.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||z(e,t,this.length);let n=this[e],i=1,a=0;for(;++a<t&&(i*=256);)n+=this[e+a]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},c.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||z(e,t,this.length);let n=t,i=1,a=this[e+--n];for(;n>0&&(i*=256);)a+=this[e+--n]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*t)),a},c.prototype.readInt8=function(e,t){return(e>>>=0,t||z(e,1,this.length),128&this[e])?-((255-this[e]+1)*1):this[e]},c.prototype.readInt16LE=function(e,t){e>>>=0,t||z(e,2,this.length);let r=this[e]|this[e+1]<<8;return 32768&r?0xffff0000|r:r},c.prototype.readInt16BE=function(e,t){e>>>=0,t||z(e,2,this.length);let r=this[e+1]|this[e]<<8;return 32768&r?0xffff0000|r:r},c.prototype.readInt32LE=function(e,t){return e>>>=0,t||z(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return e>>>=0,t||z(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readBigInt64LE=ec(function(e){Y(e>>>=0,"offset");let t=this[e],r=this[e+7];return(void 0===t||void 0===r)&&J(e,this.length-8),(BigInt(this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24))<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+0x1000000*this[++e])}),c.prototype.readBigInt64BE=ec(function(e){Y(e>>>=0,"offset");let t=this[e],r=this[e+7];return(void 0===t||void 0===r)&&J(e,this.length-8),(BigInt((t<<24)+65536*this[++e]+256*this[++e]+this[++e])<<BigInt(32))+BigInt(0x1000000*this[++e]+65536*this[++e]+256*this[++e]+r)}),c.prototype.readFloatLE=function(e,t){return e>>>=0,t||z(e,4,this.length),i.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return e>>>=0,t||z(e,4,this.length),i.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return e>>>=0,t||z(e,8,this.length),i.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return e>>>=0,t||z(e,8,this.length),i.read(this,e,!1,52,8)},c.prototype.writeUintLE=c.prototype.writeUIntLE=function(e,t,r,n){if(e*=1,t>>>=0,r>>>=0,!n){let n=Math.pow(2,8*r)-1;F(this,e,t,r,n,0)}let i=1,a=0;for(this[t]=255&e;++a<r&&(i*=256);)this[t+a]=e/i&255;return t+r},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(e,t,r,n){if(e*=1,t>>>=0,r>>>=0,!n){let n=Math.pow(2,8*r)-1;F(this,e,t,r,n,0)}let i=r-1,a=1;for(this[t+i]=255&e;--i>=0&&(a*=256);)this[t+i]=e/a&255;return t+r},c.prototype.writeUint8=c.prototype.writeUInt8=function(e,t,r){return e*=1,t>>>=0,r||F(this,e,t,1,255,0),this[t]=255&e,t+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(e,t,r){return e*=1,t>>>=0,r||F(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(e,t,r){return e*=1,t>>>=0,r||F(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(e,t,r){return e*=1,t>>>=0,r||F(this,e,t,4,0xffffffff,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(e,t,r){return e*=1,t>>>=0,r||F(this,e,t,4,0xffffffff,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeBigUInt64LE=ec(function(e,t=0){return $(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeBigUInt64BE=ec(function(e,t=0){return U(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeIntLE=function(e,t,r,n){if(e*=1,t>>>=0,!n){let n=Math.pow(2,8*r-1);F(this,e,t,r,n-1,-n)}let i=0,a=1,o=0;for(this[t]=255&e;++i<r&&(a*=256);)e<0&&0===o&&0!==this[t+i-1]&&(o=1),this[t+i]=(e/a|0)-o&255;return t+r},c.prototype.writeIntBE=function(e,t,r,n){if(e*=1,t>>>=0,!n){let n=Math.pow(2,8*r-1);F(this,e,t,r,n-1,-n)}let i=r-1,a=1,o=0;for(this[t+i]=255&e;--i>=0&&(a*=256);)e<0&&0===o&&0!==this[t+i+1]&&(o=1),this[t+i]=(e/a|0)-o&255;return t+r},c.prototype.writeInt8=function(e,t,r){return e*=1,t>>>=0,r||F(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,r){return e*=1,t>>>=0,r||F(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeInt16BE=function(e,t,r){return e*=1,t>>>=0,r||F(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeInt32LE=function(e,t,r){return e*=1,t>>>=0,r||F(this,e,t,4,0x7fffffff,-0x80000000),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},c.prototype.writeInt32BE=function(e,t,r){return e*=1,t>>>=0,r||F(this,e,t,4,0x7fffffff,-0x80000000),e<0&&(e=0xffffffff+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeBigInt64LE=ec(function(e,t=0){return $(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeBigInt64BE=ec(function(e,t=0){return U(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeFloatLE=function(e,t,r){return V(this,e,t,!0,r)},c.prototype.writeFloatBE=function(e,t,r){return V(this,e,t,!1,r)},c.prototype.writeDoubleLE=function(e,t,r){return q(this,e,t,!0,r)},c.prototype.writeDoubleBE=function(e,t,r){return q(this,e,t,!1,r)},c.prototype.copy=function(e,t,r,n){if(!c.isBuffer(e))throw TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw RangeError("Index out of range");if(n<0)throw RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);let i=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),i},c.prototype.fill=function(e,t,r,n){let i;if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw TypeError("encoding must be a string");if("string"==typeof n&&!c.isEncoding(n))throw TypeError("Unknown encoding: "+n);if(1===e.length){let t=e.charCodeAt(0);("utf8"===n&&t<128||"latin1"===n)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw RangeError("Out of range index");if(r<=t)return this;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{let a=c.isBuffer(e)?e:c.from(e,n),o=a.length;if(0===o)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=a[i%o]}return this};let W={};function K(e,t,r){W[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function G(e){let t="",r=e.length,n=+("-"===e[0]);for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function X(e,t,r){Y(t,"offset"),(void 0===e[t]||void 0===e[t+r])&&J(t,e.length-(r+1))}function Z(e,t,r,n,i,a){if(e>r||e<t){let n,i="bigint"==typeof t?"n":"";throw n=a>3?0===t||t===BigInt(0)?`>= 0${i} and < 2${i} ** ${(a+1)*8}${i}`:`>= -(2${i} ** ${(a+1)*8-1}${i}) and < 2 ** ${(a+1)*8-1}${i}`:`>= ${t}${i} and <= ${r}${i}`,new W.ERR_OUT_OF_RANGE("value",n,e)}X(n,i,a)}function Y(e,t){if("number"!=typeof e)throw new W.ERR_INVALID_ARG_TYPE(t,"number",e)}function J(e,t,r){if(Math.floor(e)!==e)throw Y(e,r),new W.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new W.ERR_BUFFER_OUT_OF_BOUNDS;throw new W.ERR_OUT_OF_RANGE(r||"offset",`>= ${+!!r} and <= ${t}`,e)}K("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),K("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError),K("ERR_OUT_OF_RANGE",function(e,t,r){let n=`The value of "${e}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>0x100000000?i=G(String(r)):"bigint"==typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=G(i)),i+="n"),n+=` It must be ${t}. Received ${i}`},RangeError);let Q=/[^+/0-9A-Za-z-_]/g;function ee(e){if((e=(e=e.split("=")[0]).trim().replace(Q,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}function et(e,t){let r;t=t||1/0;let n=e.length,i=null,a=[];for(let o=0;o<n;++o){if((r=e.charCodeAt(o))>55295&&r<57344){if(!i){if(r>56319||o+1===n){(t-=3)>-1&&a.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&a.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;a.push(r)}else if(r<2048){if((t-=2)<0)break;a.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;a.push(r>>12|224,r>>6&63|128,63&r|128)}else if(r<1114112){if((t-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}else throw Error("Invalid code point")}return a}function er(e){let t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function en(e,t){let r,n,i=[];for(let a=0;a<e.length&&!((t-=2)<0);++a)n=(r=e.charCodeAt(a))>>8,i.push(r%256),i.push(n);return i}function ei(e){return n.toByteArray(ee(e))}function ea(e,t,r,n){let i;for(i=0;i<n&&!(i+r>=t.length)&&!(i>=e.length);++i)t[i+r]=e[i];return i}function eo(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function es(e){return e!=e}let el=function(){let e="0123456789abcdef",t=Array(256);for(let r=0;r<16;++r){let n=16*r;for(let i=0;i<16;++i)t[n+i]=e[r]+e[i]}return t}();function ec(e){return"undefined"==typeof BigInt?eu:e}function eu(){throw Error("BigInt not supported")}},379666,(e,t,r)=>{"use strict";var n,i="object"==typeof Reflect?Reflect:null,a=i&&"function"==typeof i.apply?i.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};function o(e){console&&console.warn&&console.warn(e)}n=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!=e};function l(){l.init.call(this)}t.exports=l,t.exports.once=x,l.EventEmitter=l,l.prototype._events=void 0,l.prototype._eventsCount=0,l.prototype._maxListeners=void 0;var c=10;function u(e){if("function"!=typeof e)throw TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function d(e){return void 0===e._maxListeners?l.defaultMaxListeners:e._maxListeners}function f(e,t,r,n){if(u(r),void 0===(a=e._events)?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),a=e._events),s=a[t]),void 0===s)s=a[t]=r,++e._eventsCount;else if("function"==typeof s?s=a[t]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),(i=d(e))>0&&s.length>i&&!s.warned){s.warned=!0;var i,a,s,l=Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=s.length,o(l)}return e}function h(){if(!this.fired)return(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0==arguments.length)?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=h.bind(n);return i.listener=r,n.wrapFn=i,i}function b(e,t,r){var n=e._events;if(void 0===n)return[];var i=n[t];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?y(i):m(i,i.length)}function g(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function m(e,t){for(var r=Array(t),n=0;n<t;++n)r[n]=e[n];return r}function v(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function y(e){for(var t=Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}function x(e,t){return new Promise(function(r,n){function i(r){e.removeListener(t,a),n(r)}function a(){"function"==typeof e.removeListener&&e.removeListener("error",i),r([].slice.call(arguments))}_(e,t,a,{once:!0}),"error"!==t&&w(e,i,{once:!0})})}function w(e,t,r){"function"==typeof e.on&&_(e,"error",t,r)}function _(e,t,r,n){if("function"==typeof e.on)n.once?e.once(t,r):e.on(t,r);else if("function"==typeof e.addEventListener)e.addEventListener(t,function i(a){n.once&&e.removeEventListener(t,i),r(a)});else throw TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}Object.defineProperty(l,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(e){if("number"!=typeof e||e<0||s(e))throw RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");c=e}}),l.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},l.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||s(e))throw RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},l.prototype.getMaxListeners=function(){return d(this)},l.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var o,s=Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var l=i[e];if(void 0===l)return!1;if("function"==typeof l)a(l,this,t);else for(var c=l.length,u=m(l,c),r=0;r<c;++r)a(u[r],this,t);return!0},l.prototype.addListener=function(e,t){return f(this,e,t,!1)},l.prototype.on=l.prototype.addListener,l.prototype.prependListener=function(e,t){return f(this,e,t,!0)},l.prototype.once=function(e,t){return u(t),this.on(e,p(this,e,t)),this},l.prototype.prependOnceListener=function(e,t){return u(t),this.prependListener(e,p(this,e,t)),this},l.prototype.removeListener=function(e,t){var r,n,i,a,o;if(u(t),void 0===(n=this._events)||void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,a=r.length-1;a>=0;a--)if(r[a]===t||r[a].listener===t){o=r[a].listener,i=a;break}if(i<0)return this;0===i?r.shift():v(r,i),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,o||t)}return this},l.prototype.off=l.prototype.removeListener,l.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0==arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0==arguments.length){var i,a=Object.keys(r);for(n=0;n<a.length;++n)"removeListener"!==(i=a[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},l.prototype.listeners=function(e){return b(this,e,!0)},l.prototype.rawListeners=function(e){return b(this,e,!1)},l.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):g.call(e,t)},l.prototype.listenerCount=g,l.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},227995,(e,t,r)=>{var n=e.i(582538),i=e.i(119322);!function(){var r={8992:function(e){e.exports=function(e,r,n){if(e.filter)return e.filter(r,n);if(null==e||"function"!=typeof r)throw TypeError();for(var i=[],a=0;a<e.length;a++)if(t.call(e,a)){var o=e[a];r.call(n,o,a,e)&&i.push(o)}return i};var t=Object.prototype.hasOwnProperty},5555:function(e,t,r){"use strict";var n=r(1212),i=r(1909),a=r(8737);e.exports=r(8772)||n.call(a,i)},9905:function(e,t,r){"use strict";var n=r(1212),i=r(1909),a=r(5555);e.exports=function(){return a(n,i,arguments)}},1909:function(e){"use strict";e.exports=Function.prototype.apply},8737:function(e){"use strict";e.exports=Function.prototype.call},7152:function(e,t,r){"use strict";var n=r(1212),i=r(8202),a=r(8737),o=r(5555);e.exports=function(e){if(e.length<1||"function"!=typeof e[0])throw new i("a function is required");return o(n,a,e)}},8772:function(e){"use strict";e.exports="undefined"!=typeof Reflect&&Reflect&&Reflect.apply},516:function(e,t,r){"use strict";var n=r(3197),i=r(9042),a=i(n("String.prototype.indexOf"));e.exports=function(e,t){var r=n(e,!!t);return"function"==typeof r&&a(e,".prototype.")>-1?i(r):r}},9042:function(e,t,r){"use strict";var n=r(3143),i=r(446),a=r(7152),o=r(9905);e.exports=function(e){var t=a(arguments),r=e.length-(arguments.length-1);return n(t,1+(r>0?r:0),!0)},i?i(e.exports,"apply",{value:o}):e.exports.apply=o},819:function(e,t,r){"use strict";var n=r(446),i=r(5182),a=r(8202),o=r(3990);e.exports=function(e,t,r){if(!e||"object"!=typeof e&&"function"!=typeof e)throw new a("`obj` must be an object or a function`");if("string"!=typeof t&&"symbol"!=typeof t)throw new a("`property` must be a string or a symbol`");if(arguments.length>3&&"boolean"!=typeof arguments[3]&&null!==arguments[3])throw new a("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&"boolean"!=typeof arguments[4]&&null!==arguments[4])throw new a("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&"boolean"!=typeof arguments[5]&&null!==arguments[5])throw new a("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&"boolean"!=typeof arguments[6])throw new a("`loose`, if provided, must be a boolean");var s=arguments.length>3?arguments[3]:null,l=arguments.length>4?arguments[4]:null,c=arguments.length>5?arguments[5]:null,u=arguments.length>6&&arguments[6],d=!!o&&o(e,t);if(n)n(e,t,{configurable:null===c&&d?d.configurable:!c,enumerable:null===s&&d?d.enumerable:!s,value:r,writable:null===l&&d?d.writable:!l});else if(!u&&(s||l||c))throw new i("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");else e[t]=r}},6211:function(e,t,r){"use strict";var n,i=r(7152),a=r(3990);try{n=[].__proto__===Array.prototype}catch(e){if(!e||"object"!=typeof e||!("code"in e)||"ERR_PROTO_ACCESS"!==e.code)throw e}var o=!!n&&a&&a(Object.prototype,"__proto__"),s=Object,l=s.getPrototypeOf;e.exports=o&&"function"==typeof o.get?i([o.get]):"function"==typeof l&&function(e){return l(null==e?e:s(e))}},446:function(e){"use strict";var t=Object.defineProperty||!1;if(t)try{t({},"a",{value:1})}catch(e){t=!1}e.exports=t},7181:function(e){"use strict";e.exports=EvalError},1545:function(e){"use strict";e.exports=Error},22:function(e){"use strict";e.exports=RangeError},2803:function(e){"use strict";e.exports=ReferenceError},5182:function(e){"use strict";e.exports=SyntaxError},8202:function(e){"use strict";e.exports=TypeError},3284:function(e){"use strict";e.exports=URIError},2811:function(e){"use strict";e.exports=Object},6144:function(e){var t=Object.prototype.hasOwnProperty,r=Object.prototype.toString;e.exports=function(e,n,i){if("[object Function]"!==r.call(n))throw TypeError("iterator must be a function");var a=e.length;if(a===+a)for(var o=0;o<a;o++)n.call(i,e[o],o,e);else for(var s in e)t.call(e,s)&&n.call(i,e[s],s,e)}},3136:function(e){"use strict";var t="Function.prototype.bind called on incompatible ",r=Object.prototype.toString,n=Math.max,i="[object Function]",a=function(e,t){for(var r=[],n=0;n<e.length;n+=1)r[n]=e[n];for(var i=0;i<t.length;i+=1)r[i+e.length]=t[i];return r},o=function(e,t){for(var r=[],n=t||0,i=0;n<e.length;n+=1,i+=1)r[i]=e[n];return r},s=function(e,t){for(var r="",n=0;n<e.length;n+=1)r+=e[n],n+1<e.length&&(r+=t);return r};e.exports=function(e){var l,c=this;if("function"!=typeof c||r.apply(c)!==i)throw TypeError(t+c);for(var u=o(arguments,1),d=function(){if(this instanceof l){var t=c.apply(this,a(u,arguments));return Object(t)===t?t:this}return c.apply(e,a(u,arguments))},f=n(0,c.length-u.length),h=[],p=0;p<f;p++)h[p]="$"+p;if(l=Function("binder","return function ("+s(h,",")+"){ return binder.apply(this,arguments); }")(d),c.prototype){var b=function(){};b.prototype=c.prototype,l.prototype=new b,b.prototype=null}return l}},1212:function(e,t,r){"use strict";var n=r(3136);e.exports=Function.prototype.bind||n},3197:function(e,t,r){"use strict";var n,i=r(2811),a=r(1545),o=r(7181),s=r(22),l=r(2803),c=r(5182),u=r(8202),d=r(3284),f=r(7173),h=r(847),p=r(2916),b=r(9882),g=r(3291),m=r(553),v=r(8629),y=Function,x=function(e){try{return y('"use strict"; return ('+e+").constructor;")()}catch(e){}},w=r(3990),_=r(446),S=function(){throw new u},E=w?function(){try{return arguments.callee,S}catch(e){try{return w(arguments,"callee").get}catch(e){return S}}}():S,k=r(4871)(),N=r(699),j=r(7823),C=r(7904),M=r(1909),A=r(8737),R={},T="undefined"!=typeof Uint8Array&&N?N(Uint8Array):n,O={__proto__:null,"%AggregateError%":"undefined"==typeof AggregateError?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?n:ArrayBuffer,"%ArrayIteratorPrototype%":k&&N?N([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":R,"%AsyncGenerator%":R,"%AsyncGeneratorFunction%":R,"%AsyncIteratorPrototype%":R,"%Atomics%":"undefined"==typeof Atomics?n:Atomics,"%BigInt%":"undefined"==typeof BigInt?n:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?n:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?n:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":a,"%eval%":eval,"%EvalError%":o,"%Float16Array%":"undefined"==typeof Float16Array?n:Float16Array,"%Float32Array%":"undefined"==typeof Float32Array?n:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?n:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?n:FinalizationRegistry,"%Function%":y,"%GeneratorFunction%":R,"%Int8Array%":"undefined"==typeof Int8Array?n:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?n:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":k&&N?N(N([][Symbol.iterator]())):n,"%JSON%":"object"==typeof JSON?JSON:n,"%Map%":"undefined"==typeof Map?n:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&k&&N?N((new Map)[Symbol.iterator]()):n,"%Math%":Math,"%Number%":Number,"%Object%":i,"%Object.getOwnPropertyDescriptor%":w,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?n:Promise,"%Proxy%":"undefined"==typeof Proxy?n:Proxy,"%RangeError%":s,"%ReferenceError%":l,"%Reflect%":"undefined"==typeof Reflect?n:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?n:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&k&&N?N((new Set)[Symbol.iterator]()):n,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":k&&N?N(""[Symbol.iterator]()):n,"%Symbol%":k?Symbol:n,"%SyntaxError%":c,"%ThrowTypeError%":E,"%TypedArray%":T,"%TypeError%":u,"%Uint8Array%":"undefined"==typeof Uint8Array?n:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?n:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?n:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?n:Uint32Array,"%URIError%":d,"%WeakMap%":"undefined"==typeof WeakMap?n:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?n:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?n:WeakSet,"%Function.prototype.call%":A,"%Function.prototype.apply%":M,"%Object.defineProperty%":_,"%Object.getPrototypeOf%":j,"%Math.abs%":f,"%Math.floor%":h,"%Math.max%":p,"%Math.min%":b,"%Math.pow%":g,"%Math.round%":m,"%Math.sign%":v,"%Reflect.getPrototypeOf%":C};if(N)try{null.error}catch(e){var L=N(N(e));O["%Error.prototype%"]=L}var I=function e(t){var r;if("%AsyncFunction%"===t)r=x("async function () {}");else if("%GeneratorFunction%"===t)r=x("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=x("async function* () {}");else if("%AsyncGenerator%"===t){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===t){var i=e("%AsyncGenerator%");i&&N&&(r=N(i.prototype))}return O[t]=r,r},P={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},B=r(1212),D=r(3270),z=B.call(A,Array.prototype.concat),F=B.call(M,Array.prototype.splice),$=B.call(A,String.prototype.replace),U=B.call(A,String.prototype.slice),H=B.call(A,RegExp.prototype.exec),V=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,q=/\\(\\)?/g,W=function(e){var t=U(e,0,1),r=U(e,-1);if("%"===t&&"%"!==r)throw new c("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new c("invalid intrinsic syntax, expected opening `%`");var n=[];return $(e,V,function(e,t,r,i){n[n.length]=r?$(i,q,"$1"):t||e}),n},K=function(e,t){var r,n=e;if(D(P,n)&&(n="%"+(r=P[n])[0]+"%"),D(O,n)){var i=O[n];if(i===R&&(i=I(n)),void 0===i&&!t)throw new u("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:i}}throw new c("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new u("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new u('"allowMissing" argument must be a boolean');if(null===H(/^%?[^%]*%?$/,e))throw new c("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=W(e),n=r.length>0?r[0]:"",i=K("%"+n+"%",t),a=i.name,o=i.value,s=!1,l=i.alias;l&&(n=l[0],F(r,z([0,1],l)));for(var d=1,f=!0;d<r.length;d+=1){var h=r[d],p=U(h,0,1),b=U(h,-1);if(('"'===p||"'"===p||"`"===p||'"'===b||"'"===b||"`"===b)&&p!==b)throw new c("property names with quotes must have matching quotes");if("constructor"!==h&&f||(s=!0),n+="."+h,D(O,a="%"+n+"%"))o=O[a];else if(null!=o){if(!(h in o)){if(!t)throw new u("base intrinsic for "+e+" exists, but the property is not available.");return}if(w&&d+1>=r.length){var g=w(o,h);o=(f=!!g)&&"get"in g&&!("originalValue"in g.get)?g.get:o[h]}else f=D(o,h),o=o[h];f&&!s&&(O[a]=o)}}return o}},7823:function(e,t,r){"use strict";e.exports=r(2811).getPrototypeOf||null},7904:function(e){"use strict";e.exports="undefined"!=typeof Reflect&&Reflect.getPrototypeOf||null},699:function(e,t,r){"use strict";var n=r(7904),i=r(7823),a=r(6211);e.exports=n?function(e){return n(e)}:i?function(e){if(!e||"object"!=typeof e&&"function"!=typeof e)throw TypeError("getProto: not an object");return i(e)}:a?function(e){return a(e)}:null},4596:function(e){"use strict";e.exports=Object.getOwnPropertyDescriptor},3990:function(e,t,r){"use strict";var n=r(4596);if(n)try{n([],"length")}catch(e){n=null}e.exports=n},7122:function(e,t,r){"use strict";var n=r(446),i=function(){return!!n};i.hasArrayLengthDefineBug=function(){if(!n)return null;try{return 1!==n([],"length",{value:1}).length}catch(e){return!0}},e.exports=i},9942:function(e,t,r){"use strict";var n="undefined"!=typeof Symbol&&Symbol,i=r(3773);e.exports=function(){return"function"==typeof n&&"function"==typeof Symbol&&"symbol"==typeof n("foo")&&"symbol"==typeof Symbol("bar")&&i()}},3773:function(e){"use strict";e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"==typeof t||"[object Symbol]"!==Object.prototype.toString.call(t)||"[object Symbol]"!==Object.prototype.toString.call(r))return!1;var n=42;for(t in e[t]=n,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var i=Object.getOwnPropertySymbols(e);if(1!==i.length||i[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var a=Object.getOwnPropertyDescriptor(e,t);if(a.value!==n||!0!==a.enumerable)return!1}return!0}},4871:function(e,t,r){"use strict";var n="undefined"!=typeof Symbol&&Symbol,i=r(5960);e.exports=function(){return"function"==typeof n&&"function"==typeof Symbol&&"symbol"==typeof n("foo")&&"symbol"==typeof Symbol("bar")&&i()}},5960:function(e){"use strict";e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"==typeof t||"[object Symbol]"!==Object.prototype.toString.call(t)||"[object Symbol]"!==Object.prototype.toString.call(r))return!1;var n=42;for(var i in e[t]=n,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var a=Object.getOwnPropertySymbols(e);if(1!==a.length||a[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(e,t);if(o.value!==n||!0!==o.enumerable)return!1}return!0}},3270:function(e,t,r){"use strict";var n=Function.prototype.call,i=Object.prototype.hasOwnProperty;e.exports=r(1212).call(n,i)},3782:function(e){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},5157:function(e){"use strict";var t="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,r=Object.prototype.toString,n=function(e){return(!t||!e||"object"!=typeof e||!(Symbol.toStringTag in e))&&"[object Arguments]"===r.call(e)},i=function(e){return!!n(e)||null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Array]"!==r.call(e)&&"[object Function]"===r.call(e.callee)},a=function(){return n(arguments)}();n.isLegacyArguments=i,e.exports=a?n:i},3391:function(e){"use strict";var t=Object.prototype.toString,r=Function.prototype.toString,n=/^\s*(?:function)?\*/,i="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,a=Object.getPrototypeOf,o=function(){if(!i)return!1;try{return Function("return function*() {}")()}catch(e){}}(),s=o?a(o):{};e.exports=function(e){return"function"==typeof e&&(!!n.test(r.call(e))||(i?a(e)===s:"[object GeneratorFunction]"===t.call(e)))}},994:function(t,r,n){"use strict";var i=n(6144),a=n(1349),o=n(516),s=o("Object.prototype.toString"),l=n(9942)()&&"symbol"==typeof Symbol.toStringTag,c=a(),u=o("Array.prototype.indexOf",!0)||function(e,t){for(var r=0;r<e.length;r+=1)if(e[r]===t)return r;return -1},d=o("String.prototype.slice"),f={},h=n(2154),p=Object.getPrototypeOf;l&&h&&p&&i(c,function(t){var r=new e.g[t];if(!(Symbol.toStringTag in r))throw EvalError("this engine has support for Symbol.toStringTag, but "+t+" does not have the property! Please report this.");var n=p(r),i=h(n,Symbol.toStringTag);i||(i=h(p(n),Symbol.toStringTag)),f[t]=i.get});var b=function(e){var t=!1;return i(f,function(r,n){if(!t)try{t=r.call(e)===n}catch(e){}}),t};t.exports=function(e){return!!e&&"object"==typeof e&&(l?!!h&&b(e):u(c,d(s(e),8,-1))>-1)}},7173:function(e){"use strict";e.exports=Math.abs},847:function(e){"use strict";e.exports=Math.floor},219:function(e){"use strict";e.exports=Number.isNaN||function(e){return e!=e}},2916:function(e){"use strict";e.exports=Math.max},9882:function(e){"use strict";e.exports=Math.min},3291:function(e){"use strict";e.exports=Math.pow},553:function(e){"use strict";e.exports=Math.round},8629:function(e,t,r){"use strict";var n=r(219);e.exports=function(e){return n(e)||0===e?e:e<0?-1:1}},3143:function(e,t,r){"use strict";var n=r(3197),i=r(819),a=r(7122)(),o=r(3990),s=r(8202),l=n("%Math.floor%");e.exports=function(e,t){if("function"!=typeof e)throw new s("`fn` is not a function");if("number"!=typeof t||t<0||t>0xffffffff||l(t)!==t)throw new s("`length` must be a positive 32-bit integer");var r=arguments.length>2&&!!arguments[2],n=!0,c=!0;if("length"in e&&o){var u=o(e,"length");u&&!u.configurable&&(n=!1),u&&!u.writable&&(c=!1)}return(n||c||!r)&&(a?i(e,"length",t,!0,!0):i(e,"length",t)),e}},2369:function(e){e.exports=function(e){return e instanceof n.Buffer}},5584:function(e,t,r){"use strict";var n=r(5157),i=r(3391),a=r(1490),o=r(994);function s(e){return e.call.bind(e)}var l="undefined"!=typeof BigInt,c="undefined"!=typeof Symbol,u=s(Object.prototype.toString),d=s(Number.prototype.valueOf),f=s(String.prototype.valueOf),h=s(Boolean.prototype.valueOf);if(l)var p=s(BigInt.prototype.valueOf);if(c)var b=s(Symbol.prototype.valueOf);function g(e,t){if("object"!=typeof e)return!1;try{return t(e),!0}catch(e){return!1}}function m(e){return"[object Map]"===u(e)}function v(e){return"[object Set]"===u(e)}function y(e){return"[object WeakMap]"===u(e)}function x(e){return"[object WeakSet]"===u(e)}function w(e){return"[object ArrayBuffer]"===u(e)}function _(e){return"undefined"!=typeof ArrayBuffer&&(w.working?w(e):e instanceof ArrayBuffer)}function S(e){return"[object DataView]"===u(e)}function E(e){return"undefined"!=typeof DataView&&(S.working?S(e):e instanceof DataView)}t.isArgumentsObject=n,t.isGeneratorFunction=i,t.isTypedArray=o,t.isPromise=function(e){return"undefined"!=typeof Promise&&e instanceof Promise||null!==e&&"object"==typeof e&&"function"==typeof e.then&&"function"==typeof e.catch},t.isArrayBufferView=function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):o(e)||E(e)},t.isUint8Array=function(e){return"Uint8Array"===a(e)},t.isUint8ClampedArray=function(e){return"Uint8ClampedArray"===a(e)},t.isUint16Array=function(e){return"Uint16Array"===a(e)},t.isUint32Array=function(e){return"Uint32Array"===a(e)},t.isInt8Array=function(e){return"Int8Array"===a(e)},t.isInt16Array=function(e){return"Int16Array"===a(e)},t.isInt32Array=function(e){return"Int32Array"===a(e)},t.isFloat32Array=function(e){return"Float32Array"===a(e)},t.isFloat64Array=function(e){return"Float64Array"===a(e)},t.isBigInt64Array=function(e){return"BigInt64Array"===a(e)},t.isBigUint64Array=function(e){return"BigUint64Array"===a(e)},m.working="undefined"!=typeof Map&&m(new Map),t.isMap=function(e){return"undefined"!=typeof Map&&(m.working?m(e):e instanceof Map)},v.working="undefined"!=typeof Set&&v(new Set),t.isSet=function(e){return"undefined"!=typeof Set&&(v.working?v(e):e instanceof Set)},y.working="undefined"!=typeof WeakMap&&y(new WeakMap),t.isWeakMap=function(e){return"undefined"!=typeof WeakMap&&(y.working?y(e):e instanceof WeakMap)},x.working="undefined"!=typeof WeakSet&&x(new WeakSet),t.isWeakSet=function(e){return x(e)},w.working="undefined"!=typeof ArrayBuffer&&w(new ArrayBuffer),t.isArrayBuffer=_,S.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&S(new DataView(new ArrayBuffer(1),0,1)),t.isDataView=E;var k="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function N(e){return"[object SharedArrayBuffer]"===u(e)}function j(e){return void 0!==k&&(void 0===N.working&&(N.working=N(new k)),N.working?N(e):e instanceof k)}function C(e){return g(e,d)}function M(e){return g(e,f)}function A(e){return g(e,h)}function R(e){return l&&g(e,p)}function T(e){return c&&g(e,b)}t.isSharedArrayBuffer=j,t.isAsyncFunction=function(e){return"[object AsyncFunction]"===u(e)},t.isMapIterator=function(e){return"[object Map Iterator]"===u(e)},t.isSetIterator=function(e){return"[object Set Iterator]"===u(e)},t.isGeneratorObject=function(e){return"[object Generator]"===u(e)},t.isWebAssemblyCompiledModule=function(e){return"[object WebAssembly.Module]"===u(e)},t.isNumberObject=C,t.isStringObject=M,t.isBooleanObject=A,t.isBigIntObject=R,t.isSymbolObject=T,t.isBoxedPrimitive=function(e){return C(e)||M(e)||A(e)||R(e)||T(e)},t.isAnyArrayBuffer=function(e){return"undefined"!=typeof Uint8Array&&(_(e)||j(e))},["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(e){Object.defineProperty(t,e,{enumerable:!1,value:function(){throw Error(e+" is not supported in userland")}})})},8177:function(e,t,r){var n=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++)r[t[n]]=Object.getOwnPropertyDescriptor(e,t[n]);return r},a=/%[sdj%]/g;t.format=function(e){if(!S(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(c(arguments[r]));return t.join(" ")}for(var r=1,n=arguments,i=n.length,o=String(e).replace(a,function(e){if("%%"===e)return"%";if(r>=i)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}}),s=n[r];r<i;s=n[++r])w(s)||!N(s)?o+=" "+s:o+=" "+c(s);return o},t.deprecate=function(e,r){if(void 0!==i.default&&!0===i.default.noDeprecation)return e;if(void 0===i.default)return function(){return t.deprecate(e,r).apply(this,arguments)};var n=!1;return function(){if(!n){if(i.default.throwDeprecation)throw Error(r);i.default.traceDeprecation?console.trace(r):console.error(r),n=!0}return e.apply(this,arguments)}};var o={},s=/^$/;if(i.default.env.NODE_DEBUG){var l=i.default.env.NODE_DEBUG;s=RegExp("^"+(l=l.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase())+"$","i")}function c(e,r){var n={seen:[],stylize:d};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),x(r)?n.showHidden=r:r&&t._extend(n,r),E(n.showHidden)&&(n.showHidden=!1),E(n.depth)&&(n.depth=2),E(n.colors)&&(n.colors=!1),E(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=u),h(n,e,n.depth)}function u(e,t){var r=c.styles[t];return r?"\x1b["+c.colors[r][0]+"m"+e+"\x1b["+c.colors[r][1]+"m":e}function d(e,t){return e}function f(e){var t={};return e.forEach(function(e,r){t[e]=!0}),t}function h(e,r,n){if(e.customInspect&&r&&M(r.inspect)&&r.inspect!==t.inspect&&!(r.constructor&&r.constructor.prototype===r)){var i,a=r.inspect(n,e);return S(a)||(a=h(e,a,n)),a}var o=p(e,r);if(o)return o;var s=Object.keys(r),l=f(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(r)),C(r)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return b(r);if(0===s.length){if(M(r)){var c=r.name?": "+r.name:"";return e.stylize("[Function"+c+"]","special")}if(k(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(j(r))return e.stylize(Date.prototype.toString.call(r),"date");if(C(r))return b(r)}var u="",d=!1,x=["{","}"];if(y(r)&&(d=!0,x=["[","]"]),M(r)&&(u=" [Function"+(r.name?": "+r.name:"")+"]"),k(r)&&(u=" "+RegExp.prototype.toString.call(r)),j(r)&&(u=" "+Date.prototype.toUTCString.call(r)),C(r)&&(u=" "+b(r)),0===s.length&&(!d||0==r.length))return x[0]+u+x[1];if(n<0)if(k(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");else return e.stylize("[Object]","special");return e.seen.push(r),i=d?g(e,r,n,l,s):s.map(function(t){return m(e,r,n,l,t,d)}),e.seen.pop(),v(i,u,x)}function p(e,t){if(E(t))return e.stylize("undefined","undefined");if(S(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return _(t)?e.stylize(""+t,"number"):x(t)?e.stylize(""+t,"boolean"):w(t)?e.stylize("null","null"):void 0}function b(e){return"["+Error.prototype.toString.call(e)+"]"}function g(e,t,r,n,i){for(var a=[],o=0,s=t.length;o<s;++o)L(t,String(o))?a.push(m(e,t,r,n,String(o),!0)):a.push("");return i.forEach(function(i){i.match(/^\d+$/)||a.push(m(e,t,r,n,i,!0))}),a}function m(e,t,r,n,i,a){var o,s,l;if((l=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?s=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(s=e.stylize("[Setter]","special")),L(n,i)||(o="["+i+"]"),!s&&(0>e.seen.indexOf(l.value)?(s=w(r)?h(e,l.value,null):h(e,l.value,r-1)).indexOf("\n")>-1&&(s=a?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n")):s=e.stylize("[Circular]","special")),E(o)){if(a&&i.match(/^\d+$/))return s;(o=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+s}function v(e,t,r){var n=0;return e.reduce(function(e,t){return n++,t.indexOf("\n")>=0&&n++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}function y(e){return Array.isArray(e)}function x(e){return"boolean"==typeof e}function w(e){return null===e}function _(e){return"number"==typeof e}function S(e){return"string"==typeof e}function E(e){return void 0===e}function k(e){return N(e)&&"[object RegExp]"===A(e)}function N(e){return"object"==typeof e&&null!==e}function j(e){return N(e)&&"[object Date]"===A(e)}function C(e){return N(e)&&("[object Error]"===A(e)||e instanceof Error)}function M(e){return"function"==typeof e}function A(e){return Object.prototype.toString.call(e)}function R(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(e){if(!o[e=e.toUpperCase()])if(s.test(e)){var r=i.default.pid;o[e]=function(){var n=t.format.apply(t,arguments);console.error("%s %d: %s",e,r,n)}}else o[e]=function(){};return o[e]},t.inspect=c,c.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},c.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.types=r(5584),t.isArray=y,t.isBoolean=x,t.isNull=w,t.isNullOrUndefined=function(e){return null==e},t.isNumber=_,t.isString=S,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=E,t.isRegExp=k,t.types.isRegExp=k,t.isObject=N,t.isDate=j,t.types.isDate=j,t.isError=C,t.types.isNativeError=C,t.isFunction=M,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=r(2369);var T=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function O(){var e=new Date,t=[R(e.getHours()),R(e.getMinutes()),R(e.getSeconds())].join(":");return[e.getDate(),T[e.getMonth()],t].join(" ")}function L(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",O(),t.format.apply(t,arguments))},t.inherits=r(3782),t._extend=function(e,t){if(!t||!N(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e};var I="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function P(e,t){if(!e){var r=Error("Promise was rejected with a falsy value");r.reason=e,e=r}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw TypeError('The "original" argument must be of type Function');if(I&&e[I]){var t=e[I];if("function"!=typeof t)throw TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,I,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,r,n=new Promise(function(e,n){t=e,r=n}),i=[],a=0;a<arguments.length;a++)i.push(arguments[a]);i.push(function(e,n){e?r(e):t(n)});try{e.apply(this,i)}catch(e){r(e)}return n}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),I&&Object.defineProperty(t,I,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,n(e))},t.promisify.custom=I,t.callbackify=function(e){if("function"!=typeof e)throw TypeError('The "original" argument must be of type Function');function t(){for(var t=[],r=0;r<arguments.length;r++)t.push(arguments[r]);var n=t.pop();if("function"!=typeof n)throw TypeError("The last argument must be of type Function");var a=this,o=function(){return n.apply(a,arguments)};e.apply(this,t).then(function(e){i.default.nextTick(o.bind(null,null,e))},function(e){i.default.nextTick(P.bind(null,e,o))})}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),Object.defineProperties(t,n(e)),t}},1490:function(t,r,n){"use strict";var i=n(6144),a=n(1349),o=n(516),s=o("Object.prototype.toString"),l=n(9942)()&&"symbol"==typeof Symbol.toStringTag,c=a(),u=o("String.prototype.slice"),d={},f=n(2154),h=Object.getPrototypeOf;l&&f&&h&&i(c,function(t){if("function"==typeof e.g[t]){var r=new e.g[t];if(!(Symbol.toStringTag in r))throw EvalError("this engine has support for Symbol.toStringTag, but "+t+" does not have the property! Please report this.");var n=h(r),i=f(n,Symbol.toStringTag);i||(i=f(h(n),Symbol.toStringTag)),d[t]=i.get}});var p=function(e){var t=!1;return i(d,function(r,n){if(!t)try{var i=r.call(e);i===n&&(t=i)}catch(e){}}),t},b=n(994);t.exports=function(e){return!!b(e)&&(l?p(e):u(s(e),8,-1))}},1349:function(t,r,n){"use strict";var i=n(8992);t.exports=function(){return i(["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],function(t){return"function"==typeof e.g[t]})}},2154:function(e,t,r){"use strict";e.exports=r(3990)}},a={};function o(e){var t=a[e];if(void 0!==t)return t.exports;var n=a[e]={exports:{}},i=!0;try{r[e](n,n.exports,o),i=!1}finally{i&&delete a[e]}return n.exports}o.ab="/ROOT/node_modules/.pnpm/next@16.0.10_@babel+core@7.28.0_react-dom@19.2.0_react@19.2.0__react@19.2.0/node_modules/next/dist/compiled/util/",t.exports=o(8177)}()},791566,(e,t,r)=>{var n=e.i(119322);!function(){var r={782:function(e){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},646:function(e){"use strict";let t={};function r(e,r,n){function i(e,t,n){return"string"==typeof r?r:r(e,t,n)}n||(n=Error);class a extends n{constructor(e,t,r){super(i(e,t,r))}}a.prototype.name=n.name,a.prototype.code=e,t[e]=a}function n(e,t){if(!Array.isArray(e))return`of ${t} ${String(e)}`;{let r=e.length;return(e=e.map(e=>String(e)),r>2)?`one of ${t} ${e.slice(0,r-1).join(", ")}, or `+e[r-1]:2===r?`one of ${t} ${e[0]} or ${e[1]}`:`of ${t} ${e[0]}`}}function i(e,t,r){return e.substr(!r||r<0?0:+r,t.length)===t}function a(e,t,r){return(void 0===r||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}function o(e,t,r){return"number"!=typeof r&&(r=0),!(r+t.length>e.length)&&-1!==e.indexOf(t,r)}r("ERR_INVALID_OPT_VALUE",function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'},TypeError),r("ERR_INVALID_ARG_TYPE",function(e,t,r){let s,l;if("string"==typeof t&&i(t,"not ")?(s="must not be",t=t.replace(/^not /,"")):s="must be",a(e," argument"))l=`The ${e} ${s} ${n(t,"type")}`;else{let r=o(e,".")?"property":"argument";l=`The "${e}" ${r} ${s} ${n(t,"type")}`}return l+`. Received type ${typeof r}`},TypeError),r("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),r("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"}),r("ERR_STREAM_PREMATURE_CLOSE","Premature close"),r("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"}),r("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),r("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),r("ERR_STREAM_WRITE_AFTER_END","write after end"),r("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),r("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError),r("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.q=t},403:function(e,t,r){"use strict";var i=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=u;var a=r(709),o=r(337);r(782)(u,a);for(var s=i(o.prototype),l=0;l<s.length;l++){var c=s[l];u.prototype[c]||(u.prototype[c]=o.prototype[c])}function u(e){if(!(this instanceof u))return new u(e);a.call(this,e),o.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",d)))}function d(){this._writableState.ended||n.default.nextTick(f,this)}function f(e){e.end()}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(u.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(u.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})},889:function(e,t,r){"use strict";e.exports=i;var n=r(170);function i(e){if(!(this instanceof i))return new i(e);n.call(this,e)}r(782)(i,n),i.prototype._transform=function(e,t,r){r(null,e)}},709:function(t,r,i){"use strict";t.exports=M,M.ReadableState=C,i(361).EventEmitter;var a,o,s,l,c,u=function(e,t){return e.listeners(t).length},d=i(678),f=i(300).Buffer,h=e.g.Uint8Array||function(){};function p(e){return f.from(e)}function b(e){return f.isBuffer(e)||e instanceof h}var g=i(837);o=g&&g.debuglog?g.debuglog("stream"):function(){};var m=i(379),v=i(25),y=i(776).getHighWaterMark,x=i(646).q,w=x.ERR_INVALID_ARG_TYPE,_=x.ERR_STREAM_PUSH_AFTER_EOF,S=x.ERR_METHOD_NOT_IMPLEMENTED,E=x.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;i(782)(M,d);var k=v.errorOrDestroy,N=["error","close","destroy","pause","resume"];function j(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}function C(e,t,r){a=a||i(403),e=e||{},"boolean"!=typeof r&&(r=t instanceof a),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=y(this,e,"readableHighWaterMark",r),this.buffer=new m,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(s||(s=i(704).s),this.decoder=new s(e.encoding),this.encoding=e.encoding)}function M(e){if(a=a||i(403),!(this instanceof M))return new M(e);var t=this instanceof a;this._readableState=new C(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),d.call(this)}function A(e,t,r,n,i){o("readableAddChunk",t);var a,s=e._readableState;if(null===t)s.reading=!1,P(e,s);else if(i||(a=T(s,t)),a)k(e,a);else if(s.objectMode||t&&t.length>0)if("string"==typeof t||s.objectMode||Object.getPrototypeOf(t)===f.prototype||(t=p(t)),n)s.endEmitted?k(e,new E):R(e,s,t,!0);else if(s.ended)k(e,new _);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!r?(t=s.decoder.write(t),s.objectMode||0!==t.length?R(e,s,t,!1):z(e,s)):R(e,s,t,!1)}else n||(s.reading=!1,z(e,s));return!s.ended&&(s.length<s.highWaterMark||0===s.length)}function R(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&B(e)),z(e,t)}function T(e,t){var r;return b(t)||"string"==typeof t||void 0===t||e.objectMode||(r=new w("chunk",["string","Buffer","Uint8Array"],t)),r}Object.defineProperty(M.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),M.prototype.destroy=v.destroy,M.prototype._undestroy=v.undestroy,M.prototype._destroy=function(e,t){t(e)},M.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=f.from(e,t),t=""),r=!0),A(this,e,t,!1,r)},M.prototype.unshift=function(e){return A(this,e,null,!0,!1)},M.prototype.isPaused=function(){return!1===this._readableState.flowing},M.prototype.setEncoding=function(e){s||(s=i(704).s);var t=new s(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,n="";null!==r;)n+=t.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==n&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var O=0x40000000;function L(e){return e>=O?e=O:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function I(e,t){if(e<=0||0===t.length&&t.ended)return 0;if(t.objectMode)return 1;if(e!=e)if(t.flowing&&t.length)return t.buffer.head.data.length;else return t.length;return(e>t.highWaterMark&&(t.highWaterMark=L(e)),e<=t.length)?e:t.ended?t.length:(t.needReadable=!0,0)}function P(e,t){if(o("onEofChunk"),!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?B(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,D(e)))}}function B(e){var t=e._readableState;o("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(o("emitReadable",t.flowing),t.emittedReadable=!0,n.default.nextTick(D,e))}function D(e){var t=e._readableState;o("emitReadable_",t.destroyed,t.length,t.ended),!t.destroyed&&(t.length||t.ended)&&(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,W(e)}function z(e,t){t.readingMore||(t.readingMore=!0,n.default.nextTick(F,e,t))}function F(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(o("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function $(e){return function(){var t=e._readableState;o("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&u(e,"data")&&(t.flowing=!0,W(e))}}function U(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function H(e){o("readable nexttick read 0"),e.read(0)}function V(e,t){t.resumeScheduled||(t.resumeScheduled=!0,n.default.nextTick(q,e,t))}function q(e,t){o("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),W(e),t.flowing&&!t.reading&&e.read(0)}function W(e){var t=e._readableState;for(o("flow",t.flowing);t.flowing&&null!==e.read(););}function K(e,t){var r;return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r)}function G(e){var t=e._readableState;o("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,n.default.nextTick(X,t,e))}function X(e,t){if(o("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy()}}function Z(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return -1}M.prototype.read=function(e){o("read",e),e=parseInt(e,10);var t,r=this._readableState,n=e;if(0!==e&&(r.emittedReadable=!1),0===e&&r.needReadable&&((0!==r.highWaterMark?r.length>=r.highWaterMark:r.length>0)||r.ended))return o("read: emitReadable",r.length,r.ended),0===r.length&&r.ended?G(this):B(this),null;if(0===(e=I(e,r))&&r.ended)return 0===r.length&&G(this),null;var i=r.needReadable;return o("need readable",i),(0===r.length||r.length-e<r.highWaterMark)&&o("length less than watermark",i=!0),r.ended||r.reading?o("reading or ended",i=!1):i&&(o("do read"),r.reading=!0,r.sync=!0,0===r.length&&(r.needReadable=!0),this._read(r.highWaterMark),r.sync=!1,r.reading||(e=I(n,r))),null===(t=e>0?K(e,r):null)?(r.needReadable=r.length<=r.highWaterMark,e=0):(r.length-=e,r.awaitDrain=0),0===r.length&&(r.ended||(r.needReadable=!0),n!==e&&r.ended&&G(this)),null!==t&&this.emit("data",t),t},M.prototype._read=function(e){k(this,new S("_read()"))},M.prototype.pipe=function(e,t){var r=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e)}i.pipesCount+=1,o("pipe count=%d opts=%j",i.pipesCount,t);var a=t&&!1===t.end||e===n.default.stdout||e===n.default.stderr?m:l;function s(e,t){o("onunpipe"),e===r&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,f())}function l(){o("onend"),e.end()}i.endEmitted?n.default.nextTick(a):r.once("end",a),e.on("unpipe",s);var c=$(r);e.on("drain",c);var d=!1;function f(){o("cleanup"),e.removeListener("close",b),e.removeListener("finish",g),e.removeListener("drain",c),e.removeListener("error",p),e.removeListener("unpipe",s),r.removeListener("end",l),r.removeListener("end",m),r.removeListener("data",h),d=!0,i.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&c()}function h(t){o("ondata");var n=e.write(t);o("dest.write",n),!1===n&&((1===i.pipesCount&&i.pipes===e||i.pipesCount>1&&-1!==Z(i.pipes,e))&&!d&&(o("false write response, pause",i.awaitDrain),i.awaitDrain++),r.pause())}function p(t){o("onerror",t),m(),e.removeListener("error",p),0===u(e,"error")&&k(e,t)}function b(){e.removeListener("finish",g),m()}function g(){o("onfinish"),e.removeListener("close",b),m()}function m(){o("unpipe"),r.unpipe(e)}return r.on("data",h),j(e,"error",p),e.once("close",b),e.once("finish",g),e.emit("pipe",r),i.flowing||(o("pipe resume"),r.resume()),e},M.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<i;a++)n[a].emit("unpipe",this,{hasUnpiped:!1});return this}var o=Z(t.pipes,e);return -1===o||(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},M.prototype.on=function(e,t){var r=d.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"!==e||i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,o("on readable",i.length,i.reading),i.length?B(this):i.reading||n.default.nextTick(H,this)),r},M.prototype.addListener=M.prototype.on,M.prototype.removeListener=function(e,t){var r=d.prototype.removeListener.call(this,e,t);return"readable"===e&&n.default.nextTick(U,this),r},M.prototype.removeAllListeners=function(e){var t=d.prototype.removeAllListeners.apply(this,arguments);return("readable"===e||void 0===e)&&n.default.nextTick(U,this),t},M.prototype.resume=function(){var e=this._readableState;return e.flowing||(o("resume"),e.flowing=!e.readableListening,V(this,e)),e.paused=!1,this},M.prototype.pause=function(){return o("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(o("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},M.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var i in e.on("end",function(){if(o("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(i){o("wrapped data"),r.decoder&&(i=r.decoder.write(i)),r.objectMode&&null==i||(r.objectMode||i&&i.length)&&(t.push(i)||(n=!0,e.pause()))}),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var a=0;a<N.length;a++)e.on(N[a],this.emit.bind(this,N[a]));return this._read=function(t){o("wrapped _read",t),n&&(n=!1,e.resume())},this},"function"==typeof Symbol&&(M.prototype[Symbol.asyncIterator]=function(){return void 0===l&&(l=i(871)),l(this)}),Object.defineProperty(M.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(M.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(M.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),M._fromList=K,Object.defineProperty(M.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(M.from=function(e,t){return void 0===c&&(c=i(727)),c(M,e,t)})},170:function(e,t,r){"use strict";e.exports=u;var n=r(646).q,i=n.ERR_METHOD_NOT_IMPLEMENTED,a=n.ERR_MULTIPLE_CALLBACK,o=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=n.ERR_TRANSFORM_WITH_LENGTH_0,l=r(403);function c(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new a);r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function u(e){if(!(this instanceof u))return new u(e);l.call(this,e),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",d)}function d(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?f(this,null,null):this._flush(function(t,r){f(e,t,r)})}function f(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new s;if(e._transformState.transforming)throw new o;return e.push(null)}r(782)(u,l),u.prototype.push=function(e,t){return this._transformState.needTransform=!1,l.prototype.push.call(this,e,t)},u.prototype._transform=function(e,t,r){r(new i("_transform()"))},u.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},u.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},u.prototype._destroy=function(e,t){l.prototype._destroy.call(this,e,function(e){t(e)})}},337:function(t,r,i){"use strict";function a(e){var t=this;this.next=null,this.entry=null,this.finish=function(){q(t,e)}}t.exports=C,C.WritableState=j;var o,s,l={deprecate:i(769)},c=i(678),u=i(300).Buffer,d=e.g.Uint8Array||function(){};function f(e){return u.from(e)}function h(e){return u.isBuffer(e)||e instanceof d}var p=i(25),b=i(776).getHighWaterMark,g=i(646).q,m=g.ERR_INVALID_ARG_TYPE,v=g.ERR_METHOD_NOT_IMPLEMENTED,y=g.ERR_MULTIPLE_CALLBACK,x=g.ERR_STREAM_CANNOT_PIPE,w=g.ERR_STREAM_DESTROYED,_=g.ERR_STREAM_NULL_VALUES,S=g.ERR_STREAM_WRITE_AFTER_END,E=g.ERR_UNKNOWN_ENCODING,k=p.errorOrDestroy;function N(){}function j(e,t,r){o=o||i(403),e=e||{},"boolean"!=typeof r&&(r=t instanceof o),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=b(this,e,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var n=!1===e.decodeStrings;this.decodeStrings=!n,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){P(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}function C(e){var t=this instanceof(o=o||i(403));if(!t&&!s.call(C,this))return new C(e);this._writableState=new j(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),c.call(this)}function M(e,t){var r=new S;k(e,r),n.default.nextTick(t,r)}function A(e,t,r,i){var a;return null===r?a=new _:"string"==typeof r||t.objectMode||(a=new m("chunk",["string","Buffer"],r)),!a||(k(e,a),n.default.nextTick(i,a),!1)}function R(e,t,r){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=u.from(t,r)),t}function T(e,t,r,n,i,a){if(!r){var o=R(t,n,i);n!==o&&(r=!0,i="buffer",n=o)}var s=t.objectMode?1:n.length;t.length+=s;var l=t.length<t.highWaterMark;if(l||(t.needDrain=!0),t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:a,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else O(e,t,!1,s,n,i,a);return l}function O(e,t,r,n,i,a,o){t.writelen=n,t.writecb=o,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new w("write")):r?e._writev(i,t.onwrite):e._write(i,a,t.onwrite),t.sync=!1}function L(e,t,r,i,a){--t.pendingcb,r?(n.default.nextTick(a,i),n.default.nextTick(H,e,t),e._writableState.errorEmitted=!0,k(e,i)):(a(i),e._writableState.errorEmitted=!0,k(e,i),H(e,t))}function I(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function P(e,t){var r=e._writableState,i=r.sync,a=r.writecb;if("function"!=typeof a)throw new y;if(I(r),t)L(e,r,i,t,a);else{var o=F(r)||e.destroyed;o||r.corked||r.bufferProcessing||!r.bufferedRequest||z(e,r),i?n.default.nextTick(B,e,r,o,a):B(e,r,o,a)}}function B(e,t,r,n){r||D(e,t),t.pendingcb--,n(),H(e,t)}function D(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function z(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=Array(t.bufferedRequestCount),i=t.corkedRequestsFree;i.entry=r;for(var o=0,s=!0;r;)n[o]=r,r.isBuf||(s=!1),r=r.next,o+=1;n.allBuffers=s,O(e,t,!0,t.length,n,"",i.finish),t.pendingcb++,t.lastBufferedRequest=null,i.next?(t.corkedRequestsFree=i.next,i.next=null):t.corkedRequestsFree=new a(t),t.bufferedRequestCount=0}else{for(;r;){var l=r.chunk,c=r.encoding,u=r.callback,d=t.objectMode?1:l.length;if(O(e,t,!1,d,l,c,u),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function F(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function $(e,t){e._final(function(r){t.pendingcb--,r&&k(e,r),t.prefinished=!0,e.emit("prefinish"),H(e,t)})}function U(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,n.default.nextTick($,e,t)))}function H(e,t){var r=F(t);if(r&&(U(e,t),0===t.pendingcb)&&(t.finished=!0,e.emit("finish"),t.autoDestroy)){var n=e._readableState;(!n||n.autoDestroy&&n.endEmitted)&&e.destroy()}return r}function V(e,t,r){t.ending=!0,H(e,t),r&&(t.finished?n.default.nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function q(e,t,r){var n=e.entry;for(e.entry=null;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree.next=e}i(782)(C,c),j.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(j.prototype,"buffer",{get:l.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(s=Function.prototype[Symbol.hasInstance],Object.defineProperty(C,Symbol.hasInstance,{value:function(e){return!!s.call(this,e)||this===C&&e&&e._writableState instanceof j}})):s=function(e){return e instanceof this},C.prototype.pipe=function(){k(this,new x)},C.prototype.write=function(e,t,r){var n=this._writableState,i=!1,a=!n.objectMode&&h(e);return a&&!u.isBuffer(e)&&(e=f(e)),"function"==typeof t&&(r=t,t=null),a?t="buffer":t||(t=n.defaultEncoding),"function"!=typeof r&&(r=N),n.ending?M(this,r):(a||A(this,n,e,r))&&(n.pendingcb++,i=T(this,n,a,e,t,r)),i},C.prototype.cork=function(){this._writableState.corked++},C.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||z(this,e))},C.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new E(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(C.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(C.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),C.prototype._write=function(e,t,r){r(new v("_write()"))},C.prototype._writev=null,C.prototype.end=function(e,t,r){var n=this._writableState;return"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||V(this,n,r),this},Object.defineProperty(C.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(C.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),C.prototype.destroy=p.destroy,C.prototype._undestroy=p.undestroy,C.prototype._destroy=function(e,t){t(e)}},871:function(e,t,r){"use strict";function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a,o=r(698),s=Symbol("lastResolve"),l=Symbol("lastReject"),c=Symbol("error"),u=Symbol("ended"),d=Symbol("lastPromise"),f=Symbol("handlePromise"),h=Symbol("stream");function p(e,t){return{value:e,done:t}}function b(e){var t=e[s];if(null!==t){var r=e[h].read();null!==r&&(e[d]=null,e[s]=null,e[l]=null,t(p(r,!1)))}}function g(e){n.default.nextTick(b,e)}function m(e,t){return function(r,n){e.then(function(){t[u]?r(p(void 0,!0)):t[f](r,n)},n)}}var v=Object.getPrototypeOf(function(){}),y=Object.setPrototypeOf((i(a={get stream(){return this[h]},next:function(){var e,t=this,r=this[c];if(null!==r)return Promise.reject(r);if(this[u])return Promise.resolve(p(void 0,!0));if(this[h].destroyed)return new Promise(function(e,r){n.default.nextTick(function(){t[c]?r(t[c]):e(p(void 0,!0))})});var i=this[d];if(i)e=new Promise(m(i,this));else{var a=this[h].read();if(null!==a)return Promise.resolve(p(a,!1));e=new Promise(this[f])}return this[d]=e,e}},Symbol.asyncIterator,function(){return this}),i(a,"return",function(){var e=this;return new Promise(function(t,r){e[h].destroy(null,function(e){e?r(e):t(p(void 0,!0))})})}),a),v);e.exports=function(e){var t,r=Object.create(y,(i(t={},h,{value:e,writable:!0}),i(t,s,{value:null,writable:!0}),i(t,l,{value:null,writable:!0}),i(t,c,{value:null,writable:!0}),i(t,u,{value:e._readableState.endEmitted,writable:!0}),i(t,f,{value:function(e,t){var n=r[h].read();n?(r[d]=null,r[s]=null,r[l]=null,e(p(n,!1))):(r[s]=e,r[l]=t)},writable:!0}),t));return r[d]=null,o(e,function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=r[l];null!==t&&(r[d]=null,r[s]=null,r[l]=null,t(e)),r[c]=e;return}var n=r[s];null!==n&&(r[d]=null,r[s]=null,r[l]=null,n(p(void 0,!0))),r[u]=!0}),e.on("readable",g.bind(null,r)),r}},379:function(e,t,r){"use strict";function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach(function(t){a(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),e}var c=r(300).Buffer,u=r(837).inspect,d=u&&u.custom||"inspect";function f(e,t,r){c.prototype.copy.call(e,t,r)}e.exports=function(){function e(){o(this,e),this.head=null,this.tail=null,this.length=0}return l(e,[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r}},{key:"concat",value:function(e){if(0===this.length)return c.alloc(0);for(var t=c.allocUnsafe(e>>>0),r=this.head,n=0;r;)f(r.data,t,n),n+=r.data.length,r=r.next;return t}},{key:"consume",value:function(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):r=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,r=1,n=t.data;for(e-=n.length;t=t.next;){var i=t.data,a=e>i.length?i.length:e;if(a===i.length?n+=i:n+=i.slice(0,e),0==(e-=a)){a===i.length?(++r,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(a));break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(e){var t=c.allocUnsafe(e),r=this.head,n=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var i=r.data,a=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,a),0==(e-=a)){a===i.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=i.slice(a));break}++n}return this.length-=n,t}},{key:d,value:function(e,t){return u(this,i({},t,{depth:0,customInspect:!1}))}}]),e}()},25:function(e){"use strict";function t(e,t){i(e,t),r(e)}function r(e){e._writableState&&!e._writableState.emitClose||(!e._readableState||e._readableState.emitClose)&&e.emit("close")}function i(e,t){e.emit("error",t)}e.exports={destroy:function(e,a){var o=this,s=this._readableState&&this._readableState.destroyed,l=this._writableState&&this._writableState.destroyed;return s||l?a?a(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,n.default.nextTick(i,this,e)):n.default.nextTick(i,this,e)):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!a&&e?o._writableState?o._writableState.errorEmitted?n.default.nextTick(r,o):(o._writableState.errorEmitted=!0,n.default.nextTick(t,o,e)):n.default.nextTick(t,o,e):a?(n.default.nextTick(r,o),a(e)):n.default.nextTick(r,o)})),this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}}},698:function(e,t,r){"use strict";var n=r(646).q.ERR_STREAM_PREMATURE_CLOSE;function i(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];e.apply(this,n)}}}function a(){}function o(e){return e.setHeader&&"function"==typeof e.abort}function s(e,t,r){if("function"==typeof t)return s(e,null,t);t||(t={}),r=i(r||a);var l=t.readable||!1!==t.readable&&e.readable,c=t.writable||!1!==t.writable&&e.writable,u=function(){e.writable||f()},d=e._writableState&&e._writableState.finished,f=function(){c=!1,d=!0,l||r.call(e)},h=e._readableState&&e._readableState.endEmitted,p=function(){l=!1,h=!0,c||r.call(e)},b=function(t){r.call(e,t)},g=function(){var t;return l&&!h?(e._readableState&&e._readableState.ended||(t=new n),r.call(e,t)):c&&!d?(e._writableState&&e._writableState.ended||(t=new n),r.call(e,t)):void 0},m=function(){e.req.on("finish",f)};return o(e)?(e.on("complete",f),e.on("abort",g),e.req?m():e.on("request",m)):c&&!e._writableState&&(e.on("end",u),e.on("close",u)),e.on("end",p),e.on("finish",f),!1!==t.error&&e.on("error",b),e.on("close",g),function(){e.removeListener("complete",f),e.removeListener("abort",g),e.removeListener("request",m),e.req&&e.req.removeListener("finish",f),e.removeListener("end",u),e.removeListener("close",u),e.removeListener("finish",f),e.removeListener("end",p),e.removeListener("error",b),e.removeListener("close",g)}}e.exports=s},727:function(e,t,r){"use strict";function n(e,t,r,n,i,a,o){try{var s=e[a](o),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function i(e){return function(){var t=this,r=arguments;return new Promise(function(i,a){var o=e.apply(t,r);function s(e){n(o,i,a,s,l,"next",e)}function l(e){n(o,i,a,s,l,"throw",e)}s(void 0)})}}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach(function(t){s(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l=r(646).q.ERR_INVALID_ARG_TYPE;e.exports=function(e,t,r){if(t&&"function"==typeof t.next)n=t;else if(t&&t[Symbol.asyncIterator])n=t[Symbol.asyncIterator]();else if(t&&t[Symbol.iterator])n=t[Symbol.iterator]();else throw new l("iterable",["Iterable"],t);var n,a=new e(o({objectMode:!0},r)),s=!1;function c(){return u.apply(this,arguments)}function u(){return(u=i(function*(){try{var e=yield n.next(),t=e.value;e.done?a.push(null):a.push((yield t))?c():s=!1}catch(e){a.destroy(e)}})).apply(this,arguments)}return a._read=function(){s||(s=!0,c())},a}},442:function(e,t,r){"use strict";function n(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}var i,a=r(646).q,o=a.ERR_MISSING_ARGS,s=a.ERR_STREAM_DESTROYED;function l(e){if(e)throw e}function c(e){return e.setHeader&&"function"==typeof e.abort}function u(e,t,a,o){o=n(o);var l=!1;e.on("close",function(){l=!0}),void 0===i&&(i=r(698)),i(e,{readable:t,writable:a},function(e){if(e)return o(e);l=!0,o()});var u=!1;return function(t){if(!l&&!u){if(u=!0,c(e))return e.abort();if("function"==typeof e.destroy)return e.destroy();o(t||new s("pipe"))}}}function d(e){e()}function f(e,t){return e.pipe(t)}function h(e){return e.length&&"function"==typeof e[e.length-1]?e.pop():l}e.exports=function(){for(var e,t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=h(r);if(Array.isArray(r[0])&&(r=r[0]),r.length<2)throw new o("streams");var a=r.map(function(t,n){var o=n<r.length-1;return u(t,o,n>0,function(t){e||(e=t),t&&a.forEach(d),o||(a.forEach(d),i(e))})});return r.reduce(f)}},776:function(e,t,r){"use strict";var n=r(646).q.ERR_INVALID_OPT_VALUE;function i(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}e.exports={getHighWaterMark:function(e,t,r,a){var o=i(t,a,r);if(null!=o){if(!(isFinite(o)&&Math.floor(o)===o)||o<0)throw new n(a?r:"highWaterMark",o);return Math.floor(o)}return e.objectMode?16:16384}}},678:function(e,t,r){e.exports=r(781)},55:function(e,t,r){var n=r(300),i=n.Buffer;function a(e,t){for(var r in e)t[r]=e[r]}function o(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=n:(a(n,t),t.Buffer=o),o.prototype=Object.create(i.prototype),a(i,o),o.from=function(e,t,r){if("number"==typeof e)throw TypeError("Argument must not be a number");return i(e,t,r)},o.alloc=function(e,t,r){if("number"!=typeof e)throw TypeError("Argument must be a number");var n=i(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},o.allocUnsafe=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return i(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return n.SlowBuffer(e)}},173:function(e,t,r){e.exports=i;var n=r(361).EventEmitter;function i(){n.call(this)}r(782)(i,n),i.Readable=r(709),i.Writable=r(337),i.Duplex=r(403),i.Transform=r(170),i.PassThrough=r(889),i.finished=r(698),i.pipeline=r(442),i.Stream=i,i.prototype.pipe=function(e,t){var r=this;function i(t){e.writable&&!1===e.write(t)&&r.pause&&r.pause()}function a(){r.readable&&r.resume&&r.resume()}r.on("data",i),e.on("drain",a),e._isStdio||t&&!1===t.end||(r.on("end",s),r.on("close",l));var o=!1;function s(){o||(o=!0,e.end())}function l(){o||(o=!0,"function"==typeof e.destroy&&e.destroy())}function c(e){if(u(),0===n.listenerCount(this,"error"))throw e}function u(){r.removeListener("data",i),e.removeListener("drain",a),r.removeListener("end",s),r.removeListener("close",l),r.removeListener("error",c),e.removeListener("error",c),r.removeListener("end",u),r.removeListener("close",u),e.removeListener("close",u)}return r.on("error",c),e.on("error",c),r.on("end",u),r.on("close",u),e.on("close",u),e.emit("pipe",r),e}},704:function(e,t,r){"use strict";var n=r(55).Buffer,i=n.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(e){var t;if(!e)return"utf8";for(;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function o(e){var t=a(e);if("string"!=typeof t&&(n.isEncoding===i||!i(e)))throw Error("Unknown encoding: "+e);return t||e}function s(e){var t;switch(this.encoding=o(e),this.encoding){case"utf16le":this.text=p,this.end=b,t=4;break;case"utf8":this.fillLast=d,t=4;break;case"base64":this.text=g,this.end=m,t=3;break;default:this.write=v,this.end=y;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(t)}function l(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function c(e,t,r){var n=t.length-1;if(n<r)return 0;var i=l(t[n]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--n<r||-2===i?0:(i=l(t[n]))>=0?(i>0&&(e.lastNeed=i-2),i):--n<r||-2===i?0:(i=l(t[n]))>=0?(i>0&&(2===i?i=0:e.lastNeed=i-3),i):0}function u(e,t,r){if((192&t[0])!=128)return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if((192&t[1])!=128)return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&(192&t[2])!=128)return e.lastNeed=2,""}}function d(e){var t=this.lastTotal-this.lastNeed,r=u(this,e,t);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):void(e.copy(this.lastChar,t,0,e.length),this.lastNeed-=e.length)}function f(e,t){var r=c(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)}function h(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t}function p(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function b(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function g(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function m(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function v(e){return e.toString(this.encoding)}function y(e){return e&&e.length?this.write(e):""}t.s=s,s.prototype.write=function(e){var t,r;if(0===e.length)return"";if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},s.prototype.end=h,s.prototype.text=f,s.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},769:function(t){function r(t){try{if(!e.g.localStorage)return!1}catch(e){return!1}var r=e.g.localStorage[t];return null!=r&&"true"===String(r).toLowerCase()}t.exports=function e(e,t){if(r("noDeprecation"))return e;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return e.apply(this,arguments)}}},300:function(t){"use strict";t.exports=e.r(738254)},361:function(t){"use strict";t.exports=e.r(379666)},781:function(t){"use strict";t.exports=e.r(379666).EventEmitter},837:function(t){"use strict";t.exports=e.r(227995)}},i={};function a(e){var t=i[e];if(void 0!==t)return t.exports;var n=i[e]={exports:{}},o=!0;try{r[e](n,n.exports,a),o=!1}finally{o&&delete i[e]}return n.exports}a.ab="/ROOT/node_modules/.pnpm/next@16.0.10_@babel+core@7.28.0_react-dom@19.2.0_react@19.2.0__react@19.2.0/node_modules/next/dist/compiled/stream-browserify/",t.exports=a(173)}()},697138,(e,t,r)=>{var n=e.r(738254),i=n.Buffer;function a(e,t){for(var r in e)t[r]=e[r]}function o(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=n:(a(n,r),r.Buffer=o),o.prototype=Object.create(i.prototype),a(i,o),o.from=function(e,t,r){if("number"==typeof e)throw TypeError("Argument must not be a number");return i(e,t,r)},o.alloc=function(e,t,r){if("number"!=typeof e)throw TypeError("Argument must be a number");var n=i(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},o.allocUnsafe=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return i(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return n.SlowBuffer(e)}},703341,(e,t,r)=>{"use strict";var n=e.r(697138).Buffer,i=n.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(e){var t;if(!e)return"utf8";for(;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function o(e){var t=a(e);if("string"!=typeof t&&(n.isEncoding===i||!i(e)))throw Error("Unknown encoding: "+e);return t||e}function s(e){var t;switch(this.encoding=o(e),this.encoding){case"utf16le":this.text=p,this.end=b,t=4;break;case"utf8":this.fillLast=d,t=4;break;case"base64":this.text=g,this.end=m,t=3;break;default:this.write=v,this.end=y;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(t)}function l(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function c(e,t,r){var n=t.length-1;if(n<r)return 0;var i=l(t[n]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--n<r||-2===i?0:(i=l(t[n]))>=0?(i>0&&(e.lastNeed=i-2),i):--n<r||-2===i?0:(i=l(t[n]))>=0?(i>0&&(2===i?i=0:e.lastNeed=i-3),i):0}function u(e,t,r){if((192&t[0])!=128)return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if((192&t[1])!=128)return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&(192&t[2])!=128)return e.lastNeed=2,""}}function d(e){var t=this.lastTotal-this.lastNeed,r=u(this,e,t);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):void(e.copy(this.lastChar,t,0,e.length),this.lastNeed-=e.length)}function f(e,t){var r=c(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)}function h(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t}function p(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function b(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function g(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function m(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function v(e){return e.toString(this.encoding)}function y(e){return e&&e.length?this.write(e):""}r.StringDecoder=s,s.prototype.write=function(e){var t,r;if(0===e.length)return"";if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},s.prototype.end=h,s.prototype.text=f,s.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},618053,(__turbopack_context__,module,exports)=>{!function(){var __webpack_modules__={950:function(__unused_webpack_module,exports){var indexOf=function(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0;r<e.length;r++)if(e[r]===t)return r;return -1},Object_keys=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var r in e)t.push(r);return t},forEach=function(e,t){if(e.forEach)return e.forEach(t);for(var r=0;r<e.length;r++)t(e[r],r,e)},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(e,t,r){Object.defineProperty(e,t,{writable:!0,enumerable:!1,configurable:!0,value:r})}}catch(e){return function(e,t,r){e[t]=r}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];function Context(){}Context.prototype={};var Script=exports.Script=function(e){if(!(this instanceof Script))return new Script(e);this.code=e};Script.prototype.runInContext=function(e){if(!(e instanceof Context))throw TypeError("needs a 'context' argument.");var t=document.createElement("iframe");t.style||(t.style={}),t.style.display="none",document.body.appendChild(t);var r=t.contentWindow,n=r.eval,i=r.execScript;!n&&i&&(i.call(r,"null"),n=r.eval),forEach(Object_keys(e),function(t){r[t]=e[t]}),forEach(globals,function(t){e[t]&&(r[t]=e[t])});var a=Object_keys(r),o=n.call(r,this.code);return forEach(Object_keys(r),function(t){(t in e||-1===indexOf(a,t))&&(e[t]=r[t])}),forEach(globals,function(t){t in e||defineProp(e,t,r[t])}),document.body.removeChild(t),o},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(e){var t=Script.createContext(e),r=this.runInContext(t);return e&&forEach(Object_keys(t),function(r){e[r]=t[r]}),r},forEach(Object_keys(Script.prototype),function(e){exports[e]=Script[e]=function(t){var r=Script(t);return r[e].apply(r,[].slice.call(arguments,1))}}),exports.isContext=function(e){return e instanceof Context},exports.createScript=function(e){return exports.Script(e)},exports.createContext=Script.createContext=function(e){var t=new Context;return"object"==typeof e&&forEach(Object_keys(e),function(r){t[r]=e[r]}),t}}};"undefined"!=typeof __nccwpck_require__&&(__nccwpck_require__.ab="/ROOT/node_modules/.pnpm/next@16.0.10_@babel+core@7.28.0_react-dom@19.2.0_react@19.2.0__react@19.2.0/node_modules/next/dist/compiled/vm-browserify/");var __webpack_exports__={};__webpack_modules__[950](0,__webpack_exports__),module.exports=__webpack_exports__}()},520657,(e,t,r)=>{var n=e.i(582538),i=e.i(119322);!function(){var r={7160:function(e,t,r){var n=t;n.bignum=r(711),n.define=r(495).define,n.base=r(853),n.constants=r(7335),n.decoders=r(6701),n.encoders=r(3418)},495:function(e,t,r){var n=r(7160),i=r(3782);function a(e,t){this.name=e,this.body=t,this.decoders={},this.encoders={}}t.define=function(e,t){return new a(e,t)},a.prototype._createNamed=function(e){var t;try{t=r(6144).runInThisContext("(function "+this.name+"(entity) {\n  this._initNamed(entity);\n})")}catch(e){t=function(e){this._initNamed(e)}}return i(t,e),t.prototype._initNamed=function(t){e.call(this,t)},new t(this)},a.prototype._getDecoder=function(e){return e=e||"der",this.decoders.hasOwnProperty(e)||(this.decoders[e]=this._createNamed(n.decoders[e])),this.decoders[e]},a.prototype.decode=function(e,t,r){return this._getDecoder(t).decode(e,r)},a.prototype._getEncoder=function(e){return e=e||"der",this.encoders.hasOwnProperty(e)||(this.encoders[e]=this._createNamed(n.encoders[e])),this.encoders[e]},a.prototype.encode=function(e,t,r){return this._getEncoder(t).encode(e,r)}},6483:function(e,t,r){var n=r(3782),i=r(853).Reporter,a=r(4300).Buffer;function o(e,t){(i.call(this,t),a.isBuffer(e))?(this.base=e,this.offset=0,this.length=e.length):this.error("Input not Buffer")}function s(e,t){if(Array.isArray(e))this.length=0,this.value=e.map(function(e){return e instanceof s||(e=new s(e,t)),this.length+=e.length,e},this);else if("number"==typeof e){if(!(0<=e&&e<=255))return t.error("non-byte EncoderBuffer value");this.value=e,this.length=1}else if("string"==typeof e)this.value=e,this.length=a.byteLength(e);else{if(!a.isBuffer(e))return t.error("Unsupported type: "+typeof e);this.value=e,this.length=e.length}}n(o,i),t.C=o,o.prototype.save=function(){return{offset:this.offset,reporter:i.prototype.save.call(this)}},o.prototype.restore=function(e){var t=new o(this.base);return t.offset=e.offset,t.length=this.offset,this.offset=e.offset,i.prototype.restore.call(this,e.reporter),t},o.prototype.isEmpty=function(){return this.offset===this.length},o.prototype.readUInt8=function(e){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(e||"DecoderBuffer overrun")},o.prototype.skip=function(e,t){if(!(this.offset+e<=this.length))return this.error(t||"DecoderBuffer overrun");var r=new o(this.base);return r._reporterState=this._reporterState,r.offset=this.offset,r.length=this.offset+e,this.offset+=e,r},o.prototype.raw=function(e){return this.base.slice(e?e.offset:this.offset,this.length)},t.R=s,s.prototype.join=function(e,t){return e||(e=new a(this.length)),t||(t=0),0===this.length||(Array.isArray(this.value)?this.value.forEach(function(r){r.join(e,t),t+=r.length}):("number"==typeof this.value?e[t]=this.value:"string"==typeof this.value?e.write(this.value,t):a.isBuffer(this.value)&&this.value.copy(e,t),t+=this.length)),e}},853:function(e,t,r){var n=t;n.Reporter=r(1293).b,n.DecoderBuffer=r(6483).C,n.EncoderBuffer=r(6483).R,n.Node=r(9374)},9374:function(e,t,r){var n=r(853).Reporter,i=r(853).EncoderBuffer,a=r(853).DecoderBuffer,o=r(3523),s=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],l=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(s),c=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];function u(e,t){var r={};this._baseState=r,r.enc=e,r.parent=t||null,r.children=null,r.tag=null,r.args=null,r.reverseArgs=null,r.choice=null,r.optional=!1,r.any=!1,r.obj=!1,r.use=null,r.useDecoder=null,r.key=null,r.default=null,r.explicit=null,r.implicit=null,r.contains=null,r.parent||(r.children=[],this._wrap())}e.exports=u;var d=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];u.prototype.clone=function(){var e=this._baseState,t={};d.forEach(function(r){t[r]=e[r]});var r=new this.constructor(t.parent);return r._baseState=t,r},u.prototype._wrap=function(){var e=this._baseState;l.forEach(function(t){this[t]=function(){var r=new this.constructor(this);return e.children.push(r),r[t].apply(r,arguments)}},this)},u.prototype._init=function(e){var t=this._baseState;o(null===t.parent),e.call(this),t.children=t.children.filter(function(e){return e._baseState.parent===this},this),o.equal(t.children.length,1,"Root node can have only one child")},u.prototype._useArgs=function(e){var t=this._baseState,r=e.filter(function(e){return e instanceof this.constructor},this);e=e.filter(function(e){return!(e instanceof this.constructor)},this),0!==r.length&&(o(null===t.children),t.children=r,r.forEach(function(e){e._baseState.parent=this},this)),0!==e.length&&(o(null===t.args),t.args=e,t.reverseArgs=e.map(function(e){if("object"!=typeof e||e.constructor!==Object)return e;var t={};return Object.keys(e).forEach(function(r){r==(0|r)&&(r|=0),t[e[r]]=r}),t}))},c.forEach(function(e){u.prototype[e]=function(){throw Error(e+" not implemented for encoding: "+this._baseState.enc)}}),s.forEach(function(e){u.prototype[e]=function(){var t=this._baseState,r=Array.prototype.slice.call(arguments);return o(null===t.tag),t.tag=e,this._useArgs(r),this}}),u.prototype.use=function(e){o(e);var t=this._baseState;return o(null===t.use),t.use=e,this},u.prototype.optional=function(){return this._baseState.optional=!0,this},u.prototype.def=function(e){var t=this._baseState;return o(null===t.default),t.default=e,t.optional=!0,this},u.prototype.explicit=function(e){var t=this._baseState;return o(null===t.explicit&&null===t.implicit),t.explicit=e,this},u.prototype.implicit=function(e){var t=this._baseState;return o(null===t.explicit&&null===t.implicit),t.implicit=e,this},u.prototype.obj=function(){var e=this._baseState,t=Array.prototype.slice.call(arguments);return e.obj=!0,0!==t.length&&this._useArgs(t),this},u.prototype.key=function(e){var t=this._baseState;return o(null===t.key),t.key=e,this},u.prototype.any=function(){return this._baseState.any=!0,this},u.prototype.choice=function(e){var t=this._baseState;return o(null===t.choice),t.choice=e,this._useArgs(Object.keys(e).map(function(t){return e[t]})),this},u.prototype.contains=function(e){var t=this._baseState;return o(null===t.use),t.contains=e,this},u.prototype._decode=function(e,t){var r,n=this._baseState;if(null===n.parent)return e.wrapResult(n.children[0]._decode(e,t));var i=n.default,o=!0,s=null;if(null!==n.key&&(s=e.enterKey(n.key)),n.optional){var l=null;if(null!==n.explicit?l=n.explicit:null!==n.implicit?l=n.implicit:null!==n.tag&&(l=n.tag),null!==l||n.any){if(o=this._peekTag(e,l,n.any),e.isError(o))return o}else{var c=e.save();try{null===n.choice?this._decodeGeneric(n.tag,e,t):this._decodeChoice(e,t),o=!0}catch(e){o=!1}e.restore(c)}}if(n.obj&&o&&(r=e.enterObject()),o){if(null!==n.explicit){var u=this._decodeTag(e,n.explicit);if(e.isError(u))return u;e=u}var d=e.offset;if(null===n.use&&null===n.choice){if(n.any)var c=e.save();var f=this._decodeTag(e,null!==n.implicit?n.implicit:n.tag,n.any);if(e.isError(f))return f;n.any?i=e.raw(c):e=f}if(t&&t.track&&null!==n.tag&&t.track(e.path(),d,e.length,"tagged"),t&&t.track&&null!==n.tag&&t.track(e.path(),e.offset,e.length,"content"),n.any||(i=null===n.choice?this._decodeGeneric(n.tag,e,t):this._decodeChoice(e,t)),e.isError(i))return i;if(n.any||null!==n.choice||null===n.children||n.children.forEach(function(r){r._decode(e,t)}),n.contains&&("octstr"===n.tag||"bitstr"===n.tag)){var h=new a(i);i=this._getUse(n.contains,e._reporterState.obj)._decode(h,t)}}return n.obj&&o&&(i=e.leaveObject(r)),null!==n.key&&(null!==i||!0===o)?e.leaveKey(s,n.key,i):null!==s&&e.exitKey(s),i},u.prototype._decodeGeneric=function(e,t,r){var n=this._baseState;if("seq"===e||"set"===e)return null;if("seqof"===e||"setof"===e)return this._decodeList(t,e,n.args[0],r);if(/str$/.test(e))return this._decodeStr(t,e,r);if("objid"===e&&n.args)return this._decodeObjid(t,n.args[0],n.args[1],r);if("objid"===e)return this._decodeObjid(t,null,null,r);if("gentime"===e||"utctime"===e)return this._decodeTime(t,e,r);else if("null_"===e)return this._decodeNull(t,r);else if("bool"===e)return this._decodeBool(t,r);else if("objDesc"===e)return this._decodeStr(t,e,r);else if("int"===e||"enum"===e)return this._decodeInt(t,n.args&&n.args[0],r);return null!==n.use?this._getUse(n.use,t._reporterState.obj)._decode(t,r):t.error("unknown tag: "+e)},u.prototype._getUse=function(e,t){var r=this._baseState;return r.useDecoder=this._use(e,t),o(null===r.useDecoder._baseState.parent),r.useDecoder=r.useDecoder._baseState.children[0],r.implicit!==r.useDecoder._baseState.implicit&&(r.useDecoder=r.useDecoder.clone(),r.useDecoder._baseState.implicit=r.implicit),r.useDecoder},u.prototype._decodeChoice=function(e,t){var r=this._baseState,n=null,i=!1;return(Object.keys(r.choice).some(function(a){var o=e.save(),s=r.choice[a];try{var l=s._decode(e,t);if(e.isError(l))return!1;n={type:a,value:l},i=!0}catch(t){return e.restore(o),!1}return!0},this),i)?n:e.error("Choice not matched")},u.prototype._createEncoderBuffer=function(e){return new i(e,this.reporter)},u.prototype._encode=function(e,t,r){var n=this._baseState;if(null===n.default||n.default!==e){var i=this._encodeValue(e,t,r);if(void 0!==i&&!this._skipDefault(i,t,r))return i}},u.prototype._encodeValue=function(e,t,r){var i,a=this._baseState;if(null===a.parent)return a.children[0]._encode(e,t||new n);var i=null;if(this.reporter=t,a.optional&&void 0===e)if(null===a.default)return;else e=a.default;var o=null,s=!1;if(a.any)i=this._createEncoderBuffer(e);else if(a.choice)i=this._encodeChoice(e,t);else if(a.contains)o=this._getUse(a.contains,r)._encode(e,t),s=!0;else if(a.children)o=a.children.map(function(r){if("null_"===r._baseState.tag)return r._encode(null,t,e);if(null===r._baseState.key)return t.error("Child should have a key");var n=t.enterKey(r._baseState.key);if("object"!=typeof e)return t.error("Child expected, but input is not object");var i=r._encode(e[r._baseState.key],t,e);return t.leaveKey(n),i},this).filter(function(e){return e}),o=this._createEncoderBuffer(o);else if("seqof"===a.tag||"setof"===a.tag){if(!(a.args&&1===a.args.length))return t.error("Too many args for : "+a.tag);if(!Array.isArray(e))return t.error("seqof/setof, but data is not Array");var l=this.clone();l._baseState.implicit=null,o=this._createEncoderBuffer(e.map(function(r){var n=this._baseState;return this._getUse(n.args[0],e)._encode(r,t)},l))}else null!==a.use?i=this._getUse(a.use,r)._encode(e,t):(o=this._encodePrimitive(a.tag,e),s=!0);if(!a.any&&null===a.choice){var c=null!==a.implicit?a.implicit:a.tag,u=null===a.implicit?"universal":"context";null===c?null===a.use&&t.error("Tag could be omitted only for .use()"):null===a.use&&(i=this._encodeComposite(c,s,u,o))}return null!==a.explicit&&(i=this._encodeComposite(a.explicit,!1,"context",i)),i},u.prototype._encodeChoice=function(e,t){var r=this._baseState,n=r.choice[e.type];return n||o(!1,e.type+" not found in "+JSON.stringify(Object.keys(r.choice))),n._encode(e.value,t)},u.prototype._encodePrimitive=function(e,t){var r=this._baseState;if(/str$/.test(e))return this._encodeStr(t,e);if("objid"===e&&r.args)return this._encodeObjid(t,r.reverseArgs[0],r.args[1]);if("objid"===e)return this._encodeObjid(t,null,null);if("gentime"===e||"utctime"===e)return this._encodeTime(t,e);if("null_"===e)return this._encodeNull();else if("int"===e||"enum"===e)return this._encodeInt(t,r.args&&r.reverseArgs[0]);else if("bool"===e)return this._encodeBool(t);else if("objDesc"===e)return this._encodeStr(t,e);else throw Error("Unsupported tag: "+e)},u.prototype._isNumstr=function(e){return/^[0-9 ]*$/.test(e)},u.prototype._isPrintstr=function(e){return/^[A-Za-z0-9 '\(\)\+,\-\.\/:=\?]*$/.test(e)}},1293:function(e,t,r){var n=r(3782);function i(e){this._reporterState={obj:null,path:[],options:e||{},errors:[]}}function a(e,t){this.path=e,this.rethrow(t)}t.b=i,i.prototype.isError=function(e){return e instanceof a},i.prototype.save=function(){var e=this._reporterState;return{obj:e.obj,pathLen:e.path.length}},i.prototype.restore=function(e){var t=this._reporterState;t.obj=e.obj,t.path=t.path.slice(0,e.pathLen)},i.prototype.enterKey=function(e){return this._reporterState.path.push(e)},i.prototype.exitKey=function(e){var t=this._reporterState;t.path=t.path.slice(0,e-1)},i.prototype.leaveKey=function(e,t,r){var n=this._reporterState;this.exitKey(e),null!==n.obj&&(n.obj[t]=r)},i.prototype.path=function(){return this._reporterState.path.join("/")},i.prototype.enterObject=function(){var e=this._reporterState,t=e.obj;return e.obj={},t},i.prototype.leaveObject=function(e){var t=this._reporterState,r=t.obj;return t.obj=e,r},i.prototype.error=function(e){var t,r=this._reporterState,n=e instanceof a;if(t=n?e:new a(r.path.map(function(e){return"["+JSON.stringify(e)+"]"}).join(""),e.message||e,e.stack),!r.options.partial)throw t;return n||r.errors.push(t),t},i.prototype.wrapResult=function(e){var t=this._reporterState;return t.options.partial?{result:this.isError(e)?null:e,errors:t.errors}:e},n(a,Error),a.prototype.rethrow=function(e){if(this.message=e+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,a),!this.stack)try{throw Error(this.message)}catch(e){this.stack=e.stack}return this}},9791:function(e,t,r){var n=r(7335);t.tagClass={0:"universal",1:"application",2:"context",3:"private"},t.tagClassByName=n._reverse(t.tagClass),t.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},t.tagByName=n._reverse(t.tag)},7335:function(e,t,r){var n=t;n._reverse=function(e){var t={};return Object.keys(e).forEach(function(r){(0|r)==r&&(r|=0),t[e[r]]=r}),t},n.der=r(9791)},2259:function(e,t,r){var n=r(3782),i=r(7160),a=i.base,o=i.bignum,s=i.constants.der;function l(e){this.enc="der",this.name=e.name,this.entity=e,this.tree=new c,this.tree._init(e.body)}function c(e){a.Node.call(this,"der",e)}function u(e,t){var r=e.readUInt8(t);if(e.isError(r))return r;var n=s.tagClass[r>>6],i=(32&r)==0;if((31&r)==31){var a=r;for(r=0;(128&a)==128;){if(a=e.readUInt8(t),e.isError(a))return a;r<<=7,r|=127&a}}else r&=31;var o=s.tag[r];return{cls:n,primitive:i,tag:r,tagStr:o}}function d(e,t,r){var n=e.readUInt8(r);if(e.isError(n))return n;if(!t&&128===n)return null;if((128&n)==0)return n;var i=127&n;if(i>4)return e.error("length octect is too long");n=0;for(var a=0;a<i;a++){n<<=8;var o=e.readUInt8(r);if(e.isError(o))return o;n|=o}return n}e.exports=l,l.prototype.decode=function(e,t){return e instanceof a.DecoderBuffer||(e=new a.DecoderBuffer(e,t)),this.tree._decode(e,t)},n(c,a.Node),c.prototype._peekTag=function(e,t,r){if(e.isEmpty())return!1;var n=e.save(),i=u(e,'Failed to peek tag: "'+t+'"');return e.isError(i)?i:(e.restore(n),i.tag===t||i.tagStr===t||i.tagStr+"of"===t||r)},c.prototype._decodeTag=function(e,t,r){var n=u(e,'Failed to decode tag of "'+t+'"');if(e.isError(n))return n;var i=d(e,n.primitive,'Failed to get length of "'+t+'"');if(e.isError(i))return i;if(!r&&n.tag!==t&&n.tagStr!==t&&n.tagStr+"of"!==t)return e.error('Failed to match tag: "'+t+'"');if(n.primitive||null!==i)return e.skip(i,'Failed to match body of: "'+t+'"');var a=e.save(),o=this._skipUntilEnd(e,'Failed to skip indefinite length body: "'+this.tag+'"');return e.isError(o)?o:(i=e.offset-a.offset,e.restore(a),e.skip(i,'Failed to match body of: "'+t+'"'))},c.prototype._skipUntilEnd=function(e,t){for(;;){var r,n=u(e,t);if(e.isError(n))return n;var i=d(e,n.primitive,t);if(e.isError(i))return i;if(r=n.primitive||null!==i?e.skip(i):this._skipUntilEnd(e,t),e.isError(r))return r;if("end"===n.tagStr)break}},c.prototype._decodeList=function(e,t,r,n){for(var i=[];!e.isEmpty();){var a=this._peekTag(e,"end");if(e.isError(a))return a;var o=r.decode(e,"der",n);if(e.isError(o)&&a)break;i.push(o)}return i},c.prototype._decodeStr=function(e,t){if("bitstr"===t){var r=e.readUInt8();return e.isError(r)?r:{unused:r,data:e.raw()}}if("bmpstr"===t){var n=e.raw();if(n.length%2==1)return e.error("Decoding of string type: bmpstr length mismatch");for(var i="",a=0;a<n.length/2;a++)i+=String.fromCharCode(n.readUInt16BE(2*a));return i}if("numstr"===t){var o=e.raw().toString("ascii");return this._isNumstr(o)?o:e.error("Decoding of string type: numstr unsupported characters")}if("octstr"===t)return e.raw();if("objDesc"===t)return e.raw();else if("printstr"===t){var s=e.raw().toString("ascii");return this._isPrintstr(s)?s:e.error("Decoding of string type: printstr unsupported characters")}else if(/str$/.test(t))return e.raw().toString();else return e.error("Decoding of string type: "+t+" unsupported")},c.prototype._decodeObjid=function(e,t,r){for(var n,i=[],a=0;!e.isEmpty();){var o=e.readUInt8();a<<=7,a|=127&o,(128&o)==0&&(i.push(a),a=0)}128&o&&i.push(a);var s=i[0]/40|0,l=i[0]%40;if(n=r?i:[s,l].concat(i.slice(1)),t){var c=t[n.join(" ")];void 0===c&&(c=t[n.join(".")]),void 0!==c&&(n=c)}return n},c.prototype._decodeTime=function(e,t){var r=e.raw().toString();if("gentime"===t)var n=0|r.slice(0,4),i=0|r.slice(4,6),a=0|r.slice(6,8),o=0|r.slice(8,10),s=0|r.slice(10,12),l=0|r.slice(12,14);else{if("utctime"!==t)return e.error("Decoding "+t+" time is not supported yet");var n=0|r.slice(0,2),i=0|r.slice(2,4),a=0|r.slice(4,6),o=0|r.slice(6,8),s=0|r.slice(8,10),l=0|r.slice(10,12);n=n<70?2e3+n:1900+n}return Date.UTC(n,i-1,a,o,s,l,0)},c.prototype._decodeNull=function(e){return null},c.prototype._decodeBool=function(e){var t=e.readUInt8();return e.isError(t)?t:0!==t},c.prototype._decodeInt=function(e,t){var r=new o(e.raw());return t&&(r=t[r.toString(10)]||r),r},c.prototype._use=function(e,t){return"function"==typeof e&&(e=e(t)),e._getDecoder("der").tree}},6701:function(e,t,r){var n=t;n.der=r(2259),n.pem=r(8527)},8527:function(e,t,r){var n=r(3782),i=r(4300).Buffer,a=r(2259);function o(e){a.call(this,e),this.enc="pem"}n(o,a),e.exports=o,o.prototype.decode=function(e,t){for(var r=e.toString().split(/[\r\n]+/g),n=t.label.toUpperCase(),o=/^-----(BEGIN|END) ([^-]+)-----$/,s=-1,l=-1,c=0;c<r.length;c++){var u=r[c].match(o);if(null!==u&&u[2]===n)if(-1===s){if("BEGIN"!==u[1])break;s=c}else{if("END"!==u[1])break;l=c;break}}if(-1===s||-1===l)throw Error("PEM section not found for: "+n);var d=r.slice(s+1,l).join("");d.replace(/[^a-z0-9\+\/=]+/gi,"");var f=new i(d,"base64");return a.prototype.decode.call(this,f,t)}},7804:function(e,t,r){var n=r(3782),i=r(4300).Buffer,a=r(7160),o=a.base,s=a.constants.der;function l(e){this.enc="der",this.name=e.name,this.entity=e,this.tree=new c,this.tree._init(e.body)}function c(e){o.Node.call(this,"der",e)}function u(e){return e<10?"0"+e:e}function d(e,t,r,n){var i;if("seqof"===e?e="seq":"setof"===e&&(e="set"),s.tagByName.hasOwnProperty(e))i=s.tagByName[e];else{if("number"!=typeof e||(0|e)!==e)return n.error("Unknown tag: "+e);i=e}return i>=31?n.error("Multi-octet tag encoding unsupported"):(t||(i|=32),i|=s.tagClassByName[r||"universal"]<<6)}e.exports=l,l.prototype.encode=function(e,t){return this.tree._encode(e,t).join()},n(c,o.Node),c.prototype._encodeComposite=function(e,t,r,n){var a=d(e,t,r,this.reporter);if(n.length<128){var o=new i(2);return o[0]=a,o[1]=n.length,this._createEncoderBuffer([o,n])}for(var s=1,l=n.length;l>=256;l>>=8)s++;var o=new i(2+s);o[0]=a,o[1]=128|s;for(var l=1+s,c=n.length;c>0;l--,c>>=8)o[l]=255&c;return this._createEncoderBuffer([o,n])},c.prototype._encodeStr=function(e,t){if("bitstr"===t)return this._createEncoderBuffer([0|e.unused,e.data]);if("bmpstr"===t){for(var r=new i(2*e.length),n=0;n<e.length;n++)r.writeUInt16BE(e.charCodeAt(n),2*n);return this._createEncoderBuffer(r)}if("numstr"===t)return this._isNumstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: numstr supports only digits and space");if("printstr"===t)return this._isPrintstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark");if(/str$/.test(t))return this._createEncoderBuffer(e);else if("objDesc"===t)return this._createEncoderBuffer(e);else return this.reporter.error("Encoding of string type: "+t+" unsupported")},c.prototype._encodeObjid=function(e,t,r){if("string"==typeof e){if(!t)return this.reporter.error("string objid given, but no values map found");if(!t.hasOwnProperty(e))return this.reporter.error("objid not found in values map");e=t[e].split(/[\s\.]+/g);for(var n=0;n<e.length;n++)e[n]|=0}else if(Array.isArray(e)){e=e.slice();for(var n=0;n<e.length;n++)e[n]|=0}if(!Array.isArray(e))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(e));if(!r){if(e[1]>=40)return this.reporter.error("Second objid identifier OOB");e.splice(0,2,40*e[0]+e[1])}for(var a=0,n=0;n<e.length;n++){var o=e[n];for(a++;o>=128;o>>=7)a++}for(var s=new i(a),l=s.length-1,n=e.length-1;n>=0;n--){var o=e[n];for(s[l--]=127&o;(o>>=7)>0;)s[l--]=128|127&o}return this._createEncoderBuffer(s)},c.prototype._encodeTime=function(e,t){var r,n=new Date(e);return"gentime"===t?r=""+u(n.getFullYear())+u(n.getUTCMonth()+1)+u(n.getUTCDate())+u(n.getUTCHours())+u(n.getUTCMinutes())+u(n.getUTCSeconds())+"Z":"utctime"===t?r=""+u(n.getFullYear()%100)+u(n.getUTCMonth()+1)+u(n.getUTCDate())+u(n.getUTCHours())+u(n.getUTCMinutes())+u(n.getUTCSeconds())+"Z":this.reporter.error("Encoding "+t+" time is not supported yet"),this._encodeStr(r,"octstr")},c.prototype._encodeNull=function(){return this._createEncoderBuffer("")},c.prototype._encodeInt=function(e,t){if("string"==typeof e){if(!t)return this.reporter.error("String int or enum given, but no values map");if(!t.hasOwnProperty(e))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(e));e=t[e]}if("number"!=typeof e&&!i.isBuffer(e)){var r=e.toArray();!e.sign&&128&r[0]&&r.unshift(0),e=new i(r)}if(i.isBuffer(e)){var n=e.length;0===e.length&&n++;var a=new i(n);return e.copy(a),0===e.length&&(a[0]=0),this._createEncoderBuffer(a)}if(e<128)return this._createEncoderBuffer(e);if(e<256)return this._createEncoderBuffer([0,e]);for(var n=1,o=e;o>=256;o>>=8)n++;for(var a=Array(n),o=a.length-1;o>=0;o--)a[o]=255&e,e>>=8;return 128&a[0]&&a.unshift(0),this._createEncoderBuffer(new i(a))},c.prototype._encodeBool=function(e){return this._createEncoderBuffer(255*!!e)},c.prototype._use=function(e,t){return"function"==typeof e&&(e=e(t)),e._getEncoder("der").tree},c.prototype._skipDefault=function(e,t,r){var n,i=this._baseState;if(null===i.default)return!1;var a=e.join();if(void 0===i.defaultBuffer&&(i.defaultBuffer=this._encodeValue(i.default,t,r).join()),a.length!==i.defaultBuffer.length)return!1;for(n=0;n<a.length;n++)if(a[n]!==i.defaultBuffer[n])return!1;return!0}},3418:function(e,t,r){var n=t;n.der=r(7804),n.pem=r(1564)},1564:function(e,t,r){var n=r(3782),i=r(7804);function a(e){i.call(this,e),this.enc="pem"}n(a,i),e.exports=a,a.prototype.encode=function(e,t){for(var r=i.prototype.encode.call(this,e).toString("base64"),n=["-----BEGIN "+t.label+"-----"],a=0;a<r.length;a+=64)n.push(r.slice(a,a+64));return n.push("-----END "+t.label+"-----"),n.join("\n")}},711:function(e,t,r){!function(e,t){"use strict";function n(e,t){if(!e)throw Error(t||"Assertion failed")}function i(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function a(e,t,r){if(a.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&(("le"===t||"be"===t)&&(r=t,t=10),this._init(e||0,t||10,r||"be"))}"object"==typeof e?e.exports=a:t.BN=a,a.BN=a,a.wordSize=26;try{l=r(4300).Buffer}catch(e){}function o(e,t,r){for(var n=0,i=Math.min(e.length,r),a=t;a<i;a++){var o=e.charCodeAt(a)-48;n<<=4,o>=49&&o<=54?n|=o-49+10:o>=17&&o<=22?n|=o-17+10:n|=15&o}return n}function s(e,t,r,n){for(var i=0,a=Math.min(e.length,r),o=t;o<a;o++){var s=e.charCodeAt(o)-48;i*=n,s>=49?i+=s-49+10:s>=17?i+=s-17+10:i+=s}return i}a.isBN=function(e){return e instanceof a||null!==e&&"object"==typeof e&&e.constructor.wordSize===a.wordSize&&Array.isArray(e.words)},a.max=function(e,t){return e.cmp(t)>0?e:t},a.min=function(e,t){return 0>e.cmp(t)?e:t},a.prototype._init=function(e,t,r){if("number"==typeof e)return this._initNumber(e,t,r);if("object"==typeof e)return this._initArray(e,t,r);"hex"===t&&(t=16),n(t===(0|t)&&t>=2&&t<=36);var i=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&i++,16===t?this._parseHex(e,i):this._parseBase(e,t,i),"-"===e[0]&&(this.negative=1),this.strip(),"le"===r&&this._initArray(this.toArray(),t,r)},a.prototype._initNumber=function(e,t,r){e<0&&(this.negative=1,e=-e),e<0x4000000?(this.words=[0x3ffffff&e],this.length=1):e<0x10000000000000?(this.words=[0x3ffffff&e,e/0x4000000&0x3ffffff],this.length=2):(n(e<0x20000000000000),this.words=[0x3ffffff&e,e/0x4000000&0x3ffffff,1],this.length=3),"le"===r&&this._initArray(this.toArray(),t,r)},a.prototype._initArray=function(e,t,r){if(n("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=Array(this.length);for(var i,a,o=0;o<this.length;o++)this.words[o]=0;var s=0;if("be"===r)for(o=e.length-1,i=0;o>=0;o-=3)a=e[o]|e[o-1]<<8|e[o-2]<<16,this.words[i]|=a<<s&0x3ffffff,this.words[i+1]=a>>>26-s&0x3ffffff,(s+=24)>=26&&(s-=26,i++);else if("le"===r)for(o=0,i=0;o<e.length;o+=3)a=e[o]|e[o+1]<<8|e[o+2]<<16,this.words[i]|=a<<s&0x3ffffff,this.words[i+1]=a>>>26-s&0x3ffffff,(s+=24)>=26&&(s-=26,i++);return this.strip()},a.prototype._parseHex=function(e,t){this.length=Math.ceil((e.length-t)/6),this.words=Array(this.length);for(var r,n,i=0;i<this.length;i++)this.words[i]=0;var a=0;for(i=e.length-6,r=0;i>=t;i-=6)n=o(e,i,i+6),this.words[r]|=n<<a&0x3ffffff,this.words[r+1]|=n>>>26-a&4194303,(a+=24)>=26&&(a-=26,r++);i+6!==t&&(n=o(e,t,i+6),this.words[r]|=n<<a&0x3ffffff,this.words[r+1]|=n>>>26-a&4194303),this.strip()},a.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=0x3ffffff;i*=t)n++;n--,i=i/t|0;for(var a=e.length-r,o=a%n,l=Math.min(a,a-o)+r,c=0,u=r;u<l;u+=n)c=s(e,u,u+n,t),this.imuln(i),this.words[0]+c<0x4000000?this.words[0]+=c:this._iaddn(c);if(0!==o){var d=1;for(c=s(e,u,e.length,t),u=0;u<o;u++)d*=t;this.imuln(d),this.words[0]+c<0x4000000?this.words[0]+=c:this._iaddn(c)}},a.prototype.copy=function(e){e.words=Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},a.prototype.clone=function(){var e=new a(null);return this.copy(e),e},a.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},a.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},a.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},a.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var l,c=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],u=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],d=[0,0,0x2000000,0x290d741,0x1000000,0x2e90edd,0x39aa400,0x267bf47,0x1000000,0x290d741,1e7,0x12959c3,0x222c000,0x3bd7765,7529536,0xadcea1,0x1000000,0x1704f61,0x206fc40,0x2cddcf9,64e6,4084101,5153632,6436343,7962624,9765625,0xb54ba0,0xdaf26b,0x1069c00,0x138f9ad,243e5,0x1b4d89f,0x2000000,0x25528a1,0x2b54a20,0x3216b93,0x39aa400];function f(e){for(var t=Array(e.bitLength()),r=0;r<t.length;r++){var n=r/26|0,i=r%26;t[r]=(e.words[n]&1<<i)>>>i}return t}function h(e,t,r){r.negative=t.negative^e.negative;var n=e.length+t.length|0;r.length=n,n=n-1|0;var i=0|e.words[0],a=0|t.words[0],o=i*a,s=0x3ffffff&o,l=o/0x4000000|0;r.words[0]=s;for(var c=1;c<n;c++){for(var u=l>>>26,d=0x3ffffff&l,f=Math.min(c,t.length-1),h=Math.max(0,c-e.length+1);h<=f;h++){var p=c-h|0;u+=(o=(i=0|e.words[p])*(a=0|t.words[h])+d)/0x4000000|0,d=0x3ffffff&o}r.words[c]=0|d,l=0|u}return 0!==l?r.words[c]=0|l:r.length--,r.strip()}a.prototype.toString=function(e,t){if(t=0|t||1,16===(e=e||10)||"hex"===e){for(var r="",i=0,a=0,o=0;o<this.length;o++){var s=this.words[o],l=((s<<i|a)&0xffffff).toString(16);r=0!=(a=s>>>24-i&0xffffff)||o!==this.length-1?c[6-l.length]+l+r:l+r,(i+=2)>=26&&(i-=26,o--)}for(0!==a&&(r=a.toString(16)+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(e===(0|e)&&e>=2&&e<=36){var f=u[e],h=d[e];r="";var p=this.clone();for(p.negative=0;!p.isZero();){var b=p.modn(h).toString(e);r=(p=p.idivn(h)).isZero()?b+r:c[f-b.length]+b+r}for(this.isZero()&&(r="0"+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=0x4000000*this.words[1]:3===this.length&&1===this.words[2]?e+=0x10000000000000+0x4000000*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},a.prototype.toJSON=function(){return this.toString(16)},a.prototype.toBuffer=function(e,t){return n(void 0!==l),this.toArrayLike(l,e,t)},a.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},a.prototype.toArrayLike=function(e,t,r){var i,a,o=this.byteLength(),s=r||Math.max(1,o);n(o<=s,"byte array longer than desired length"),n(s>0,"Requested array length <= 0"),this.strip();var l="le"===t,c=new e(s),u=this.clone();if(l){for(a=0;!u.isZero();a++)i=u.andln(255),u.iushrn(8),c[a]=i;for(;a<s;a++)c[a]=0}else{for(a=0;a<s-o;a++)c[a]=0;for(a=0;!u.isZero();a++)i=u.andln(255),u.iushrn(8),c[s-a-1]=i}return c},Math.clz32?a.prototype._countBits=function(e){return 32-Math.clz32(e)}:a.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},a.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return(8191&t)==0&&(r+=13,t>>>=13),(127&t)==0&&(r+=7,t>>>=7),(15&t)==0&&(r+=4,t>>>=4),(3&t)==0&&(r+=2,t>>>=2),(1&t)==0&&r++,r},a.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return(this.length-1)*26+t},a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},a.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return 0!==this.negative},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},a.prototype.ior=function(e){return n((this.negative|e.negative)==0),this.iuor(e)},a.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},a.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},a.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this.strip()},a.prototype.iand=function(e){return n((this.negative|e.negative)==0),this.iuand(e)},a.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},a.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},a.prototype.iuxor=function(e){this.length>e.length?(t=this,r=e):(t=e,r=this);for(var t,r,n=0;n<r.length;n++)this.words[n]=t.words[n]^r.words[n];if(this!==t)for(;n<t.length;n++)this.words[n]=t.words[n];return this.length=t.length,this.strip()},a.prototype.ixor=function(e){return n((this.negative|e.negative)==0),this.iuxor(e)},a.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},a.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},a.prototype.inotn=function(e){n("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),r=e%26;this._expand(t),r>0&&t--;for(var i=0;i<t;i++)this.words[i]=0x3ffffff&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&0x3ffffff>>26-r),this.strip()},a.prototype.notn=function(e){return this.clone().inotn(e)},a.prototype.setn=function(e,t){n("number"==typeof e&&e>=0);var r=e/26|0,i=e%26;return this._expand(r+1),t?this.words[r]=this.words[r]|1<<i:this.words[r]=this.words[r]&~(1<<i),this.strip()},a.prototype.iadd=function(e){if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,n=e):(r=e,n=this);for(var t,r,n,i=0,a=0;a<n.length;a++)t=(0|r.words[a])+(0|n.words[a])+i,this.words[a]=0x3ffffff&t,i=t>>>26;for(;0!==i&&a<r.length;a++)t=(0|r.words[a])+i,this.words[a]=0x3ffffff&t,i=t>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;a<r.length;a++)this.words[a]=r.words[a];return this},a.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},a.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t,r,n=this.iadd(e);return e.negative=1,n._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var i=this.cmp(e);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(t=this,r=e):(t=e,r=this);for(var a=0,o=0;o<r.length;o++)a=(n=(0|t.words[o])-(0|r.words[o])+a)>>26,this.words[o]=0x3ffffff&n;for(;0!==a&&o<t.length;o++)a=(n=(0|t.words[o])+a)>>26,this.words[o]=0x3ffffff&n;if(0===a&&o<t.length&&t!==this)for(;o<t.length;o++)this.words[o]=t.words[o];return this.length=Math.max(this.length,o),t!==this&&(this.negative=1),this.strip()},a.prototype.sub=function(e){return this.clone().isub(e)};var p=function(e,t,r){var n,i,a,o=e.words,s=t.words,l=r.words,c=0,u=0|o[0],d=8191&u,f=u>>>13,h=0|o[1],p=8191&h,b=h>>>13,g=0|o[2],m=8191&g,v=g>>>13,y=0|o[3],x=8191&y,w=y>>>13,_=0|o[4],S=8191&_,E=_>>>13,k=0|o[5],N=8191&k,j=k>>>13,C=0|o[6],M=8191&C,A=C>>>13,R=0|o[7],T=8191&R,O=R>>>13,L=0|o[8],I=8191&L,P=L>>>13,B=0|o[9],D=8191&B,z=B>>>13,F=0|s[0],$=8191&F,U=F>>>13,H=0|s[1],V=8191&H,q=H>>>13,W=0|s[2],K=8191&W,G=W>>>13,X=0|s[3],Z=8191&X,Y=X>>>13,J=0|s[4],Q=8191&J,ee=J>>>13,et=0|s[5],er=8191&et,en=et>>>13,ei=0|s[6],ea=8191&ei,eo=ei>>>13,es=0|s[7],el=8191&es,ec=es>>>13,eu=0|s[8],ed=8191&eu,ef=eu>>>13,eh=0|s[9],ep=8191&eh,eb=eh>>>13;r.negative=e.negative^t.negative,r.length=19,n=Math.imul(d,$);var eg=(c+n|0)+((8191&(i=(i=Math.imul(d,U))+Math.imul(f,$)|0))<<13)|0;c=((a=Math.imul(f,U))+(i>>>13)|0)+(eg>>>26)|0,eg&=0x3ffffff,n=Math.imul(p,$),i=(i=Math.imul(p,U))+Math.imul(b,$)|0,a=Math.imul(b,U),n=n+Math.imul(d,V)|0;var em=(c+n|0)+((8191&(i=(i=i+Math.imul(d,q)|0)+Math.imul(f,V)|0))<<13)|0;c=((a=a+Math.imul(f,q)|0)+(i>>>13)|0)+(em>>>26)|0,em&=0x3ffffff,n=Math.imul(m,$),i=(i=Math.imul(m,U))+Math.imul(v,$)|0,a=Math.imul(v,U),n=n+Math.imul(p,V)|0,i=(i=i+Math.imul(p,q)|0)+Math.imul(b,V)|0,a=a+Math.imul(b,q)|0,n=n+Math.imul(d,K)|0;var ev=(c+n|0)+((8191&(i=(i=i+Math.imul(d,G)|0)+Math.imul(f,K)|0))<<13)|0;c=((a=a+Math.imul(f,G)|0)+(i>>>13)|0)+(ev>>>26)|0,ev&=0x3ffffff,n=Math.imul(x,$),i=(i=Math.imul(x,U))+Math.imul(w,$)|0,a=Math.imul(w,U),n=n+Math.imul(m,V)|0,i=(i=i+Math.imul(m,q)|0)+Math.imul(v,V)|0,a=a+Math.imul(v,q)|0,n=n+Math.imul(p,K)|0,i=(i=i+Math.imul(p,G)|0)+Math.imul(b,K)|0,a=a+Math.imul(b,G)|0,n=n+Math.imul(d,Z)|0;var ey=(c+n|0)+((8191&(i=(i=i+Math.imul(d,Y)|0)+Math.imul(f,Z)|0))<<13)|0;c=((a=a+Math.imul(f,Y)|0)+(i>>>13)|0)+(ey>>>26)|0,ey&=0x3ffffff,n=Math.imul(S,$),i=(i=Math.imul(S,U))+Math.imul(E,$)|0,a=Math.imul(E,U),n=n+Math.imul(x,V)|0,i=(i=i+Math.imul(x,q)|0)+Math.imul(w,V)|0,a=a+Math.imul(w,q)|0,n=n+Math.imul(m,K)|0,i=(i=i+Math.imul(m,G)|0)+Math.imul(v,K)|0,a=a+Math.imul(v,G)|0,n=n+Math.imul(p,Z)|0,i=(i=i+Math.imul(p,Y)|0)+Math.imul(b,Z)|0,a=a+Math.imul(b,Y)|0,n=n+Math.imul(d,Q)|0;var ex=(c+n|0)+((8191&(i=(i=i+Math.imul(d,ee)|0)+Math.imul(f,Q)|0))<<13)|0;c=((a=a+Math.imul(f,ee)|0)+(i>>>13)|0)+(ex>>>26)|0,ex&=0x3ffffff,n=Math.imul(N,$),i=(i=Math.imul(N,U))+Math.imul(j,$)|0,a=Math.imul(j,U),n=n+Math.imul(S,V)|0,i=(i=i+Math.imul(S,q)|0)+Math.imul(E,V)|0,a=a+Math.imul(E,q)|0,n=n+Math.imul(x,K)|0,i=(i=i+Math.imul(x,G)|0)+Math.imul(w,K)|0,a=a+Math.imul(w,G)|0,n=n+Math.imul(m,Z)|0,i=(i=i+Math.imul(m,Y)|0)+Math.imul(v,Z)|0,a=a+Math.imul(v,Y)|0,n=n+Math.imul(p,Q)|0,i=(i=i+Math.imul(p,ee)|0)+Math.imul(b,Q)|0,a=a+Math.imul(b,ee)|0,n=n+Math.imul(d,er)|0;var ew=(c+n|0)+((8191&(i=(i=i+Math.imul(d,en)|0)+Math.imul(f,er)|0))<<13)|0;c=((a=a+Math.imul(f,en)|0)+(i>>>13)|0)+(ew>>>26)|0,ew&=0x3ffffff,n=Math.imul(M,$),i=(i=Math.imul(M,U))+Math.imul(A,$)|0,a=Math.imul(A,U),n=n+Math.imul(N,V)|0,i=(i=i+Math.imul(N,q)|0)+Math.imul(j,V)|0,a=a+Math.imul(j,q)|0,n=n+Math.imul(S,K)|0,i=(i=i+Math.imul(S,G)|0)+Math.imul(E,K)|0,a=a+Math.imul(E,G)|0,n=n+Math.imul(x,Z)|0,i=(i=i+Math.imul(x,Y)|0)+Math.imul(w,Z)|0,a=a+Math.imul(w,Y)|0,n=n+Math.imul(m,Q)|0,i=(i=i+Math.imul(m,ee)|0)+Math.imul(v,Q)|0,a=a+Math.imul(v,ee)|0,n=n+Math.imul(p,er)|0,i=(i=i+Math.imul(p,en)|0)+Math.imul(b,er)|0,a=a+Math.imul(b,en)|0,n=n+Math.imul(d,ea)|0;var e_=(c+n|0)+((8191&(i=(i=i+Math.imul(d,eo)|0)+Math.imul(f,ea)|0))<<13)|0;c=((a=a+Math.imul(f,eo)|0)+(i>>>13)|0)+(e_>>>26)|0,e_&=0x3ffffff,n=Math.imul(T,$),i=(i=Math.imul(T,U))+Math.imul(O,$)|0,a=Math.imul(O,U),n=n+Math.imul(M,V)|0,i=(i=i+Math.imul(M,q)|0)+Math.imul(A,V)|0,a=a+Math.imul(A,q)|0,n=n+Math.imul(N,K)|0,i=(i=i+Math.imul(N,G)|0)+Math.imul(j,K)|0,a=a+Math.imul(j,G)|0,n=n+Math.imul(S,Z)|0,i=(i=i+Math.imul(S,Y)|0)+Math.imul(E,Z)|0,a=a+Math.imul(E,Y)|0,n=n+Math.imul(x,Q)|0,i=(i=i+Math.imul(x,ee)|0)+Math.imul(w,Q)|0,a=a+Math.imul(w,ee)|0,n=n+Math.imul(m,er)|0,i=(i=i+Math.imul(m,en)|0)+Math.imul(v,er)|0,a=a+Math.imul(v,en)|0,n=n+Math.imul(p,ea)|0,i=(i=i+Math.imul(p,eo)|0)+Math.imul(b,ea)|0,a=a+Math.imul(b,eo)|0,n=n+Math.imul(d,el)|0;var eS=(c+n|0)+((8191&(i=(i=i+Math.imul(d,ec)|0)+Math.imul(f,el)|0))<<13)|0;c=((a=a+Math.imul(f,ec)|0)+(i>>>13)|0)+(eS>>>26)|0,eS&=0x3ffffff,n=Math.imul(I,$),i=(i=Math.imul(I,U))+Math.imul(P,$)|0,a=Math.imul(P,U),n=n+Math.imul(T,V)|0,i=(i=i+Math.imul(T,q)|0)+Math.imul(O,V)|0,a=a+Math.imul(O,q)|0,n=n+Math.imul(M,K)|0,i=(i=i+Math.imul(M,G)|0)+Math.imul(A,K)|0,a=a+Math.imul(A,G)|0,n=n+Math.imul(N,Z)|0,i=(i=i+Math.imul(N,Y)|0)+Math.imul(j,Z)|0,a=a+Math.imul(j,Y)|0,n=n+Math.imul(S,Q)|0,i=(i=i+Math.imul(S,ee)|0)+Math.imul(E,Q)|0,a=a+Math.imul(E,ee)|0,n=n+Math.imul(x,er)|0,i=(i=i+Math.imul(x,en)|0)+Math.imul(w,er)|0,a=a+Math.imul(w,en)|0,n=n+Math.imul(m,ea)|0,i=(i=i+Math.imul(m,eo)|0)+Math.imul(v,ea)|0,a=a+Math.imul(v,eo)|0,n=n+Math.imul(p,el)|0,i=(i=i+Math.imul(p,ec)|0)+Math.imul(b,el)|0,a=a+Math.imul(b,ec)|0,n=n+Math.imul(d,ed)|0;var eE=(c+n|0)+((8191&(i=(i=i+Math.imul(d,ef)|0)+Math.imul(f,ed)|0))<<13)|0;c=((a=a+Math.imul(f,ef)|0)+(i>>>13)|0)+(eE>>>26)|0,eE&=0x3ffffff,n=Math.imul(D,$),i=(i=Math.imul(D,U))+Math.imul(z,$)|0,a=Math.imul(z,U),n=n+Math.imul(I,V)|0,i=(i=i+Math.imul(I,q)|0)+Math.imul(P,V)|0,a=a+Math.imul(P,q)|0,n=n+Math.imul(T,K)|0,i=(i=i+Math.imul(T,G)|0)+Math.imul(O,K)|0,a=a+Math.imul(O,G)|0,n=n+Math.imul(M,Z)|0,i=(i=i+Math.imul(M,Y)|0)+Math.imul(A,Z)|0,a=a+Math.imul(A,Y)|0,n=n+Math.imul(N,Q)|0,i=(i=i+Math.imul(N,ee)|0)+Math.imul(j,Q)|0,a=a+Math.imul(j,ee)|0,n=n+Math.imul(S,er)|0,i=(i=i+Math.imul(S,en)|0)+Math.imul(E,er)|0,a=a+Math.imul(E,en)|0,n=n+Math.imul(x,ea)|0,i=(i=i+Math.imul(x,eo)|0)+Math.imul(w,ea)|0,a=a+Math.imul(w,eo)|0,n=n+Math.imul(m,el)|0,i=(i=i+Math.imul(m,ec)|0)+Math.imul(v,el)|0,a=a+Math.imul(v,ec)|0,n=n+Math.imul(p,ed)|0,i=(i=i+Math.imul(p,ef)|0)+Math.imul(b,ed)|0,a=a+Math.imul(b,ef)|0,n=n+Math.imul(d,ep)|0;var ek=(c+n|0)+((8191&(i=(i=i+Math.imul(d,eb)|0)+Math.imul(f,ep)|0))<<13)|0;c=((a=a+Math.imul(f,eb)|0)+(i>>>13)|0)+(ek>>>26)|0,ek&=0x3ffffff,n=Math.imul(D,V),i=(i=Math.imul(D,q))+Math.imul(z,V)|0,a=Math.imul(z,q),n=n+Math.imul(I,K)|0,i=(i=i+Math.imul(I,G)|0)+Math.imul(P,K)|0,a=a+Math.imul(P,G)|0,n=n+Math.imul(T,Z)|0,i=(i=i+Math.imul(T,Y)|0)+Math.imul(O,Z)|0,a=a+Math.imul(O,Y)|0,n=n+Math.imul(M,Q)|0,i=(i=i+Math.imul(M,ee)|0)+Math.imul(A,Q)|0,a=a+Math.imul(A,ee)|0,n=n+Math.imul(N,er)|0,i=(i=i+Math.imul(N,en)|0)+Math.imul(j,er)|0,a=a+Math.imul(j,en)|0,n=n+Math.imul(S,ea)|0,i=(i=i+Math.imul(S,eo)|0)+Math.imul(E,ea)|0,a=a+Math.imul(E,eo)|0,n=n+Math.imul(x,el)|0,i=(i=i+Math.imul(x,ec)|0)+Math.imul(w,el)|0,a=a+Math.imul(w,ec)|0,n=n+Math.imul(m,ed)|0,i=(i=i+Math.imul(m,ef)|0)+Math.imul(v,ed)|0,a=a+Math.imul(v,ef)|0,n=n+Math.imul(p,ep)|0;var eN=(c+n|0)+((8191&(i=(i=i+Math.imul(p,eb)|0)+Math.imul(b,ep)|0))<<13)|0;c=((a=a+Math.imul(b,eb)|0)+(i>>>13)|0)+(eN>>>26)|0,eN&=0x3ffffff,n=Math.imul(D,K),i=(i=Math.imul(D,G))+Math.imul(z,K)|0,a=Math.imul(z,G),n=n+Math.imul(I,Z)|0,i=(i=i+Math.imul(I,Y)|0)+Math.imul(P,Z)|0,a=a+Math.imul(P,Y)|0,n=n+Math.imul(T,Q)|0,i=(i=i+Math.imul(T,ee)|0)+Math.imul(O,Q)|0,a=a+Math.imul(O,ee)|0,n=n+Math.imul(M,er)|0,i=(i=i+Math.imul(M,en)|0)+Math.imul(A,er)|0,a=a+Math.imul(A,en)|0,n=n+Math.imul(N,ea)|0,i=(i=i+Math.imul(N,eo)|0)+Math.imul(j,ea)|0,a=a+Math.imul(j,eo)|0,n=n+Math.imul(S,el)|0,i=(i=i+Math.imul(S,ec)|0)+Math.imul(E,el)|0,a=a+Math.imul(E,ec)|0,n=n+Math.imul(x,ed)|0,i=(i=i+Math.imul(x,ef)|0)+Math.imul(w,ed)|0,a=a+Math.imul(w,ef)|0,n=n+Math.imul(m,ep)|0;var ej=(c+n|0)+((8191&(i=(i=i+Math.imul(m,eb)|0)+Math.imul(v,ep)|0))<<13)|0;c=((a=a+Math.imul(v,eb)|0)+(i>>>13)|0)+(ej>>>26)|0,ej&=0x3ffffff,n=Math.imul(D,Z),i=(i=Math.imul(D,Y))+Math.imul(z,Z)|0,a=Math.imul(z,Y),n=n+Math.imul(I,Q)|0,i=(i=i+Math.imul(I,ee)|0)+Math.imul(P,Q)|0,a=a+Math.imul(P,ee)|0,n=n+Math.imul(T,er)|0,i=(i=i+Math.imul(T,en)|0)+Math.imul(O,er)|0,a=a+Math.imul(O,en)|0,n=n+Math.imul(M,ea)|0,i=(i=i+Math.imul(M,eo)|0)+Math.imul(A,ea)|0,a=a+Math.imul(A,eo)|0,n=n+Math.imul(N,el)|0,i=(i=i+Math.imul(N,ec)|0)+Math.imul(j,el)|0,a=a+Math.imul(j,ec)|0,n=n+Math.imul(S,ed)|0,i=(i=i+Math.imul(S,ef)|0)+Math.imul(E,ed)|0,a=a+Math.imul(E,ef)|0,n=n+Math.imul(x,ep)|0;var eC=(c+n|0)+((8191&(i=(i=i+Math.imul(x,eb)|0)+Math.imul(w,ep)|0))<<13)|0;c=((a=a+Math.imul(w,eb)|0)+(i>>>13)|0)+(eC>>>26)|0,eC&=0x3ffffff,n=Math.imul(D,Q),i=(i=Math.imul(D,ee))+Math.imul(z,Q)|0,a=Math.imul(z,ee),n=n+Math.imul(I,er)|0,i=(i=i+Math.imul(I,en)|0)+Math.imul(P,er)|0,a=a+Math.imul(P,en)|0,n=n+Math.imul(T,ea)|0,i=(i=i+Math.imul(T,eo)|0)+Math.imul(O,ea)|0,a=a+Math.imul(O,eo)|0,n=n+Math.imul(M,el)|0,i=(i=i+Math.imul(M,ec)|0)+Math.imul(A,el)|0,a=a+Math.imul(A,ec)|0,n=n+Math.imul(N,ed)|0,i=(i=i+Math.imul(N,ef)|0)+Math.imul(j,ed)|0,a=a+Math.imul(j,ef)|0,n=n+Math.imul(S,ep)|0;var eM=(c+n|0)+((8191&(i=(i=i+Math.imul(S,eb)|0)+Math.imul(E,ep)|0))<<13)|0;c=((a=a+Math.imul(E,eb)|0)+(i>>>13)|0)+(eM>>>26)|0,eM&=0x3ffffff,n=Math.imul(D,er),i=(i=Math.imul(D,en))+Math.imul(z,er)|0,a=Math.imul(z,en),n=n+Math.imul(I,ea)|0,i=(i=i+Math.imul(I,eo)|0)+Math.imul(P,ea)|0,a=a+Math.imul(P,eo)|0,n=n+Math.imul(T,el)|0,i=(i=i+Math.imul(T,ec)|0)+Math.imul(O,el)|0,a=a+Math.imul(O,ec)|0,n=n+Math.imul(M,ed)|0,i=(i=i+Math.imul(M,ef)|0)+Math.imul(A,ed)|0,a=a+Math.imul(A,ef)|0,n=n+Math.imul(N,ep)|0;var eA=(c+n|0)+((8191&(i=(i=i+Math.imul(N,eb)|0)+Math.imul(j,ep)|0))<<13)|0;c=((a=a+Math.imul(j,eb)|0)+(i>>>13)|0)+(eA>>>26)|0,eA&=0x3ffffff,n=Math.imul(D,ea),i=(i=Math.imul(D,eo))+Math.imul(z,ea)|0,a=Math.imul(z,eo),n=n+Math.imul(I,el)|0,i=(i=i+Math.imul(I,ec)|0)+Math.imul(P,el)|0,a=a+Math.imul(P,ec)|0,n=n+Math.imul(T,ed)|0,i=(i=i+Math.imul(T,ef)|0)+Math.imul(O,ed)|0,a=a+Math.imul(O,ef)|0,n=n+Math.imul(M,ep)|0;var eR=(c+n|0)+((8191&(i=(i=i+Math.imul(M,eb)|0)+Math.imul(A,ep)|0))<<13)|0;c=((a=a+Math.imul(A,eb)|0)+(i>>>13)|0)+(eR>>>26)|0,eR&=0x3ffffff,n=Math.imul(D,el),i=(i=Math.imul(D,ec))+Math.imul(z,el)|0,a=Math.imul(z,ec),n=n+Math.imul(I,ed)|0,i=(i=i+Math.imul(I,ef)|0)+Math.imul(P,ed)|0,a=a+Math.imul(P,ef)|0,n=n+Math.imul(T,ep)|0;var eT=(c+n|0)+((8191&(i=(i=i+Math.imul(T,eb)|0)+Math.imul(O,ep)|0))<<13)|0;c=((a=a+Math.imul(O,eb)|0)+(i>>>13)|0)+(eT>>>26)|0,eT&=0x3ffffff,n=Math.imul(D,ed),i=(i=Math.imul(D,ef))+Math.imul(z,ed)|0,a=Math.imul(z,ef),n=n+Math.imul(I,ep)|0;var eO=(c+n|0)+((8191&(i=(i=i+Math.imul(I,eb)|0)+Math.imul(P,ep)|0))<<13)|0;c=((a=a+Math.imul(P,eb)|0)+(i>>>13)|0)+(eO>>>26)|0,eO&=0x3ffffff,n=Math.imul(D,ep);var eL=(c+n|0)+((8191&(i=(i=Math.imul(D,eb))+Math.imul(z,ep)|0))<<13)|0;return c=((a=Math.imul(z,eb))+(i>>>13)|0)+(eL>>>26)|0,eL&=0x3ffffff,l[0]=eg,l[1]=em,l[2]=ev,l[3]=ey,l[4]=ex,l[5]=ew,l[6]=e_,l[7]=eS,l[8]=eE,l[9]=ek,l[10]=eN,l[11]=ej,l[12]=eC,l[13]=eM,l[14]=eA,l[15]=eR,l[16]=eT,l[17]=eO,l[18]=eL,0!==c&&(l[19]=c,r.length++),r};function b(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var n=0,i=0,a=0;a<r.length-1;a++){var o=i;i=0;for(var s=0x3ffffff&n,l=Math.min(a,t.length-1),c=Math.max(0,a-e.length+1);c<=l;c++){var u=a-c,d=(0|e.words[u])*(0|t.words[c]),f=0x3ffffff&d;o=o+(d/0x4000000|0)|0,s=0x3ffffff&(f=f+s|0),i+=(o=o+(f>>>26)|0)>>>26,o&=0x3ffffff}r.words[a]=s,n=o,o=i}return 0!==n?r.words[a]=n:r.length--,r.strip()}function g(e,t,r){return(new m).mulp(e,t,r)}function m(e,t){this.x=e,this.y=t}Math.imul||(p=h),a.prototype.mulTo=function(e,t){var r=this.length+e.length;return 10===this.length&&10===e.length?p(this,e,t):r<63?h(this,e,t):r<1024?b(this,e,t):g(this,e,t)},m.prototype.makeRBT=function(e){for(var t=Array(e),r=a.prototype._countBits(e)-1,n=0;n<e;n++)t[n]=this.revBin(n,r,e);return t},m.prototype.revBin=function(e,t,r){if(0===e||e===r-1)return e;for(var n=0,i=0;i<t;i++)n|=(1&e)<<t-i-1,e>>=1;return n},m.prototype.permute=function(e,t,r,n,i,a){for(var o=0;o<a;o++)n[o]=t[e[o]],i[o]=r[e[o]]},m.prototype.transform=function(e,t,r,n,i,a){this.permute(a,e,t,r,n,i);for(var o=1;o<i;o<<=1)for(var s=o<<1,l=Math.cos(2*Math.PI/s),c=Math.sin(2*Math.PI/s),u=0;u<i;u+=s)for(var d=l,f=c,h=0;h<o;h++){var p=r[u+h],b=n[u+h],g=r[u+h+o],m=n[u+h+o],v=d*g-f*m;m=d*m+f*g,g=v,r[u+h]=p+g,n[u+h]=b+m,r[u+h+o]=p-g,n[u+h+o]=b-m,h!==s&&(v=l*d-c*f,f=l*f+c*d,d=v)}},m.prototype.guessLen13b=function(e,t){var r=1|Math.max(t,e),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},m.prototype.conjugate=function(e,t,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=e[n];e[n]=e[r-n-1],e[r-n-1]=i,i=t[n],t[n]=-t[r-n-1],t[r-n-1]=-i}},m.prototype.normalize13b=function(e,t){for(var r=0,n=0;n<t/2;n++){var i=8192*Math.round(e[2*n+1]/t)+Math.round(e[2*n]/t)+r;e[n]=0x3ffffff&i,r=i<0x4000000?0:i/0x4000000|0}return e},m.prototype.convert13b=function(e,t,r,i){for(var a=0,o=0;o<t;o++)a+=0|e[o],r[2*o]=8191&a,a>>>=13,r[2*o+1]=8191&a,a>>>=13;for(o=2*t;o<i;++o)r[o]=0;n(0===a),n((-8192&a)==0)},m.prototype.stub=function(e){for(var t=Array(e),r=0;r<e;r++)t[r]=0;return t},m.prototype.mulp=function(e,t,r){var n=2*this.guessLen13b(e.length,t.length),i=this.makeRBT(n),a=this.stub(n),o=Array(n),s=Array(n),l=Array(n),c=Array(n),u=Array(n),d=Array(n),f=r.words;f.length=n,this.convert13b(e.words,e.length,o,n),this.convert13b(t.words,t.length,c,n),this.transform(o,a,s,l,n,i),this.transform(c,a,u,d,n,i);for(var h=0;h<n;h++){var p=s[h]*u[h]-l[h]*d[h];l[h]=s[h]*d[h]+l[h]*u[h],s[h]=p}return this.conjugate(s,l,n),this.transform(s,l,f,a,n,i),this.conjugate(f,a,n),this.normalize13b(f,n),r.negative=e.negative^t.negative,r.length=e.length+t.length,r.strip()},a.prototype.mul=function(e){var t=new a(null);return t.words=Array(this.length+e.length),this.mulTo(e,t)},a.prototype.mulf=function(e){var t=new a(null);return t.words=Array(this.length+e.length),g(this,e,t)},a.prototype.imul=function(e){return this.clone().mulTo(e,this)},a.prototype.imuln=function(e){n("number"==typeof e),n(e<0x4000000);for(var t=0,r=0;r<this.length;r++){var i=(0|this.words[r])*e,a=(0x3ffffff&i)+(0x3ffffff&t);t>>=26,t+=(i/0x4000000|0)+(a>>>26),this.words[r]=0x3ffffff&a}return 0!==t&&(this.words[r]=t,this.length++),this},a.prototype.muln=function(e){return this.clone().imuln(e)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(e){var t=f(e);if(0===t.length)return new a(1);for(var r=this,n=0;n<t.length&&0===t[n];n++,r=r.sqr());if(++n<t.length)for(var i=r.sqr();n<t.length;n++,i=i.sqr())0!==t[n]&&(r=r.mul(i));return r},a.prototype.iushln=function(e){n("number"==typeof e&&e>=0);var t,r=e%26,i=(e-r)/26,a=0x3ffffff>>>26-r<<26-r;if(0!==r){var o=0;for(t=0;t<this.length;t++){var s=this.words[t]&a,l=(0|this.words[t])-s<<r;this.words[t]=l|o,o=s>>>26-r}o&&(this.words[t]=o,this.length++)}if(0!==i){for(t=this.length-1;t>=0;t--)this.words[t+i]=this.words[t];for(t=0;t<i;t++)this.words[t]=0;this.length+=i}return this.strip()},a.prototype.ishln=function(e){return n(0===this.negative),this.iushln(e)},a.prototype.iushrn=function(e,t,r){n("number"==typeof e&&e>=0);var i=t?(t-t%26)/26:0,a=e%26,o=Math.min((e-a)/26,this.length),s=0x3ffffff^0x3ffffff>>>a<<a,l=r;if(i-=o,i=Math.max(0,i),l){for(var c=0;c<o;c++)l.words[c]=this.words[c];l.length=o}if(0===o);else if(this.length>o)for(this.length-=o,c=0;c<this.length;c++)this.words[c]=this.words[c+o];else this.words[0]=0,this.length=1;var u=0;for(c=this.length-1;c>=0&&(0!==u||c>=i);c--){var d=0|this.words[c];this.words[c]=u<<26-a|d>>>a,u=d&s}return l&&0!==u&&(l.words[l.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},a.prototype.ishrn=function(e,t,r){return n(0===this.negative),this.iushrn(e,t,r)},a.prototype.shln=function(e){return this.clone().ishln(e)},a.prototype.ushln=function(e){return this.clone().iushln(e)},a.prototype.shrn=function(e){return this.clone().ishrn(e)},a.prototype.ushrn=function(e){return this.clone().iushrn(e)},a.prototype.testn=function(e){n("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26,i=1<<t;return!(this.length<=r)&&!!(this.words[r]&i)},a.prototype.imaskn=function(e){n("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==t&&r++,this.length=Math.min(r,this.length),0!==t){var i=0x3ffffff^0x3ffffff>>>t<<t;this.words[this.length-1]&=i}return this.strip()},a.prototype.maskn=function(e){return this.clone().imaskn(e)},a.prototype.iaddn=function(e){return(n("number"==typeof e),n(e<0x4000000),e<0)?this.isubn(-e):0!==this.negative?(1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0):(this.negative=0,this.isubn(e),this.negative=1),this):this._iaddn(e)},a.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=0x4000000;t++)this.words[t]-=0x4000000,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},a.prototype.isubn=function(e){if(n("number"==typeof e),n(e<0x4000000),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=0x4000000,this.words[t+1]-=1;return this.strip()},a.prototype.addn=function(e){return this.clone().iaddn(e)},a.prototype.subn=function(e){return this.clone().isubn(e)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(e,t,r){var i,a,o=e.length+r;this._expand(o);var s=0;for(i=0;i<e.length;i++){a=(0|this.words[i+r])+s;var l=(0|e.words[i])*t;a-=0x3ffffff&l,s=(a>>26)-(l/0x4000000|0),this.words[i+r]=0x3ffffff&a}for(;i<this.length-r;i++)s=(a=(0|this.words[i+r])+s)>>26,this.words[i+r]=0x3ffffff&a;if(0===s)return this.strip();for(n(-1===s),s=0,i=0;i<this.length;i++)s=(a=-(0|this.words[i])+s)>>26,this.words[i]=0x3ffffff&a;return this.negative=1,this.strip()},a.prototype._wordDiv=function(e,t){var r,n=this.length-e.length,i=this.clone(),o=e,s=0|o.words[o.length-1];0!=(n=26-this._countBits(s))&&(o=o.ushln(n),i.iushln(n),s=0|o.words[o.length-1]);var l=i.length-o.length;if("mod"!==t){(r=new a(null)).length=l+1,r.words=Array(r.length);for(var c=0;c<r.length;c++)r.words[c]=0}var u=i.clone()._ishlnsubmul(o,1,l);0===u.negative&&(i=u,r&&(r.words[l]=1));for(var d=l-1;d>=0;d--){var f=(0|i.words[o.length+d])*0x4000000+(0|i.words[o.length+d-1]);for(f=Math.min(f/s|0,0x3ffffff),i._ishlnsubmul(o,f,d);0!==i.negative;)f--,i.negative=0,i._ishlnsubmul(o,1,d),i.isZero()||(i.negative^=1);r&&(r.words[d]=f)}return r&&r.strip(),i.strip(),"div"!==t&&0!==n&&i.iushrn(n),{div:r||null,mod:i}},a.prototype.divmod=function(e,t,r){var i,o,s;return(n(!e.isZero()),this.isZero())?{div:new a(0),mod:new a(0)}:0!==this.negative&&0===e.negative?(s=this.neg().divmod(e,t),"mod"!==t&&(i=s.div.neg()),"div"!==t&&(o=s.mod.neg(),r&&0!==o.negative&&o.iadd(e)),{div:i,mod:o}):0===this.negative&&0!==e.negative?(s=this.divmod(e.neg(),t),"mod"!==t&&(i=s.div.neg()),{div:i,mod:s.mod}):(this.negative&e.negative)!=0?(s=this.neg().divmod(e.neg(),t),"div"!==t&&(o=s.mod.neg(),r&&0!==o.negative&&o.isub(e)),{div:s.div,mod:o}):e.length>this.length||0>this.cmp(e)?{div:new a(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new a(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new a(this.modn(e.words[0]))}:this._wordDiv(e,t)},a.prototype.div=function(e){return this.divmod(e,"div",!1).div},a.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},a.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},a.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,n=e.ushrn(1),i=e.andln(1),a=r.cmp(n);return a<0||1===i&&0===a?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},a.prototype.modn=function(e){n(e<=0x3ffffff);for(var t=0x4000000%e,r=0,i=this.length-1;i>=0;i--)r=(t*r+(0|this.words[i]))%e;return r},a.prototype.idivn=function(e){n(e<=0x3ffffff);for(var t=0,r=this.length-1;r>=0;r--){var i=(0|this.words[r])+0x4000000*t;this.words[r]=i/e|0,t=i%e}return this.strip()},a.prototype.divn=function(e){return this.clone().idivn(e)},a.prototype.egcd=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i=new a(1),o=new a(0),s=new a(0),l=new a(1),c=0;t.isEven()&&r.isEven();)t.iushrn(1),r.iushrn(1),++c;for(var u=r.clone(),d=t.clone();!t.isZero();){for(var f=0,h=1;(t.words[0]&h)==0&&f<26;++f,h<<=1);if(f>0)for(t.iushrn(f);f-- >0;)(i.isOdd()||o.isOdd())&&(i.iadd(u),o.isub(d)),i.iushrn(1),o.iushrn(1);for(var p=0,b=1;(r.words[0]&b)==0&&p<26;++p,b<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(s.isOdd()||l.isOdd())&&(s.iadd(u),l.isub(d)),s.iushrn(1),l.iushrn(1);t.cmp(r)>=0?(t.isub(r),i.isub(s),o.isub(l)):(r.isub(t),s.isub(i),l.isub(o))}return{a:s,b:l,gcd:r.iushln(c)}},a.prototype._invmp=function(e){n(0===e.negative),n(!e.isZero());var t,r=this,i=e.clone();r=0!==r.negative?r.umod(e):r.clone();for(var o=new a(1),s=new a(0),l=i.clone();r.cmpn(1)>0&&i.cmpn(1)>0;){for(var c=0,u=1;(r.words[0]&u)==0&&c<26;++c,u<<=1);if(c>0)for(r.iushrn(c);c-- >0;)o.isOdd()&&o.iadd(l),o.iushrn(1);for(var d=0,f=1;(i.words[0]&f)==0&&d<26;++d,f<<=1);if(d>0)for(i.iushrn(d);d-- >0;)s.isOdd()&&s.iadd(l),s.iushrn(1);r.cmp(i)>=0?(r.isub(i),o.isub(s)):(i.isub(r),s.isub(o))}return 0>(t=0===r.cmpn(1)?o:s).cmpn(0)&&t.iadd(e),t},a.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var n=0;t.isEven()&&r.isEven();n++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=t.cmp(r);if(i<0){var a=t;t=r,r=a}else if(0===i||0===r.cmpn(1))break;t.isub(r)}return r.iushln(n)},a.prototype.invm=function(e){return this.egcd(e).a.umod(e)},a.prototype.isEven=function(){return(1&this.words[0])==0},a.prototype.isOdd=function(){return(1&this.words[0])==1},a.prototype.andln=function(e){return this.words[0]&e},a.prototype.bincn=function(e){n("number"==typeof e);var t=e%26,r=(e-t)/26,i=1<<t;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var a=i,o=r;0!==a&&o<this.length;o++){var s=0|this.words[o];s+=a,a=s>>>26,s&=0x3ffffff,this.words[o]=s}return 0!==a&&(this.words[o]=a,this.length++),this},a.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},a.prototype.cmpn=function(e){var t,r=e<0;if(0!==this.negative&&!r)return -1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)t=1;else{r&&(e=-e),n(e<=0x3ffffff,"Number is too big");var i=0|this.words[0];t=i===e?0:i<e?-1:1}return 0!==this.negative?0|-t:t},a.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return -1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},a.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return -1;for(var t=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|e.words[r];if(n!==i){n<i?t=-1:n>i&&(t=1);break}}return t},a.prototype.gtn=function(e){return 1===this.cmpn(e)},a.prototype.gt=function(e){return 1===this.cmp(e)},a.prototype.gten=function(e){return this.cmpn(e)>=0},a.prototype.gte=function(e){return this.cmp(e)>=0},a.prototype.ltn=function(e){return -1===this.cmpn(e)},a.prototype.lt=function(e){return -1===this.cmp(e)},a.prototype.lten=function(e){return 0>=this.cmpn(e)},a.prototype.lte=function(e){return 0>=this.cmp(e)},a.prototype.eqn=function(e){return 0===this.cmpn(e)},a.prototype.eq=function(e){return 0===this.cmp(e)},a.red=function(e){return new E(e)},a.prototype.toRed=function(e){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},a.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(e){return this.red=e,this},a.prototype.forceRed=function(e){return n(!this.red,"Already a number in reduction context"),this._forceRed(e)},a.prototype.redAdd=function(e){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},a.prototype.redIAdd=function(e){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},a.prototype.redSub=function(e){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},a.prototype.redISub=function(e){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},a.prototype.redShl=function(e){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},a.prototype.redMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},a.prototype.redIMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},a.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(e){return n(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var v={k256:null,p224:null,p192:null,p25519:null};function y(e,t){this.name=e,this.p=new a(t,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function x(){y.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function w(){y.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function _(){y.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function S(){y.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function E(e){if("string"==typeof e){var t=a._prime(e);this.m=t.p,this.prime=t}else n(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function k(e){E.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}y.prototype._tmp=function(){var e=new a(null);return e.words=Array(Math.ceil(this.n/13)),e},y.prototype.ireduce=function(e){var t,r=e;do this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength();while(t>this.n)var n=t<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},y.prototype.split=function(e,t){e.iushrn(this.n,0,t)},y.prototype.imulK=function(e){return e.imul(this.k)},i(x,y),x.prototype.split=function(e,t){for(var r=4194303,n=Math.min(e.length,9),i=0;i<n;i++)t.words[i]=e.words[i];if(t.length=n,e.length<=9){e.words[0]=0,e.length=1;return}var a=e.words[9];for(i=10,t.words[t.length++]=a&r;i<e.length;i++){var o=0|e.words[i];e.words[i-10]=(o&r)<<4|a>>>22,a=o}a>>>=22,e.words[i-10]=a,0===a&&e.length>10?e.length-=10:e.length-=9},x.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var n=0|e.words[r];t+=977*n,e.words[r]=0x3ffffff&t,t=64*n+(t/0x4000000|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},i(w,y),i(_,y),i(S,y),S.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var n=(0|e.words[r])*19+t,i=0x3ffffff&n;n>>>=26,e.words[r]=i,t=n}return 0!==t&&(e.words[e.length++]=t),e},a._prime=function(e){var t;if(v[e])return v[e];if("k256"===e)t=new x;else if("p224"===e)t=new w;else if("p192"===e)t=new _;else if("p25519"===e)t=new S;else throw Error("Unknown prime "+e);return v[e]=t,t},E.prototype._verify1=function(e){n(0===e.negative,"red works only with positives"),n(e.red,"red works only with red numbers")},E.prototype._verify2=function(e,t){n((e.negative|t.negative)==0,"red works only with positives"),n(e.red&&e.red===t.red,"red works only with red numbers")},E.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},E.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},E.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},E.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},E.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return 0>r.cmpn(0)&&r.iadd(this.m),r._forceRed(this)},E.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return 0>r.cmpn(0)&&r.iadd(this.m),r},E.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},E.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},E.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},E.prototype.isqr=function(e){return this.imul(e,e.clone())},E.prototype.sqr=function(e){return this.mul(e,e)},E.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(n(t%2==1),3===t){var r=this.m.add(new a(1)).iushrn(2);return this.pow(e,r)}for(var i=this.m.subn(1),o=0;!i.isZero()&&0===i.andln(1);)o++,i.iushrn(1);n(!i.isZero());var s=new a(1).toRed(this),l=s.redNeg(),c=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new a(2*u*u).toRed(this);0!==this.pow(u,c).cmp(l);)u.redIAdd(l);for(var d=this.pow(u,i),f=this.pow(e,i.addn(1).iushrn(1)),h=this.pow(e,i),p=o;0!==h.cmp(s);){for(var b=h,g=0;0!==b.cmp(s);g++)b=b.redSqr();n(g<p);var m=this.pow(d,new a(1).iushln(p-g-1));f=f.redMul(m),d=m.redSqr(),h=h.redMul(d),p=g}return f},E.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},E.prototype.pow=function(e,t){if(t.isZero())return new a(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=4,n=Array(16);n[0]=new a(1).toRed(this),n[1]=e;for(var i=2;i<n.length;i++)n[i]=this.mul(n[i-1],e);var o=n[0],s=0,l=0,c=t.bitLength()%26;for(0===c&&(c=26),i=t.length-1;i>=0;i--){for(var u=t.words[i],d=c-1;d>=0;d--){var f=u>>d&1;if(o!==n[0]&&(o=this.sqr(o)),0===f&&0===s){l=0;continue}s<<=1,s|=f,(++l===r||0===i&&0===d)&&(o=this.mul(o,n[s]),l=0,s=0)}c=26}return o},E.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},E.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},a.mont=function(e){return new k(e)},i(k,E),k.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},k.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},k.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),a=i;return i.cmp(this.m)>=0?a=i.isub(this.m):0>i.cmpn(0)&&(a=i.iadd(this.m)),a._forceRed(this)},k.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new a(0)._forceRed(this);var r=e.mul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):0>i.cmpn(0)&&(o=i.iadd(this.m)),o._forceRed(this)},k.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e=r.nmd(e),this)},1670:function(e,t,r){!function(e,t){"use strict";function n(e,t){if(!e)throw Error(t||"Assertion failed")}function i(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function a(e,t,r){if(a.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&(("le"===t||"be"===t)&&(r=t,t=10),this._init(e||0,t||10,r||"be"))}"object"==typeof e?e.exports=a:t.BN=a,a.BN=a,a.wordSize=26;try{u=r(4300).Buffer}catch(e){}function o(e,t,r){for(var i=0,a=Math.min(e.length,r),o=0,s=t;s<a;s++){var l,c=e.charCodeAt(s)-48;i<<=4,i|=l=c>=49&&c<=54?c-49+10:c>=17&&c<=22?c-17+10:c,o|=l}return n(!(240&o),"Invalid character in "+e),i}function s(e,t,r,i){for(var a=0,o=0,s=Math.min(e.length,r),l=t;l<s;l++){var c=e.charCodeAt(l)-48;a*=i,o=c>=49?c-49+10:c>=17?c-17+10:c,n(c>=0&&o<i,"Invalid character"),a+=o}return a}function l(e,t){e.words=t.words,e.length=t.length,e.negative=t.negative,e.red=t.red}function c(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}a.isBN=function(e){return e instanceof a||null!==e&&"object"==typeof e&&e.constructor.wordSize===a.wordSize&&Array.isArray(e.words)},a.max=function(e,t){return e.cmp(t)>0?e:t},a.min=function(e,t){return 0>e.cmp(t)?e:t},a.prototype._init=function(e,t,r){if("number"==typeof e)return this._initNumber(e,t,r);if("object"==typeof e)return this._initArray(e,t,r);"hex"===t&&(t=16),n(t===(0|t)&&t>=2&&t<=36);var i=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&i++,16===t?this._parseHex(e,i):this._parseBase(e,t,i),"-"===e[0]&&(this.negative=1),this._strip(),"le"===r&&this._initArray(this.toArray(),t,r)},a.prototype._initNumber=function(e,t,r){e<0&&(this.negative=1,e=-e),e<0x4000000?(this.words=[0x3ffffff&e],this.length=1):e<0x10000000000000?(this.words=[0x3ffffff&e,e/0x4000000&0x3ffffff],this.length=2):(n(e<0x20000000000000),this.words=[0x3ffffff&e,e/0x4000000&0x3ffffff,1],this.length=3),"le"===r&&this._initArray(this.toArray(),t,r)},a.prototype._initArray=function(e,t,r){if(n("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=Array(this.length);for(var i,a,o=0;o<this.length;o++)this.words[o]=0;var s=0;if("be"===r)for(o=e.length-1,i=0;o>=0;o-=3)a=e[o]|e[o-1]<<8|e[o-2]<<16,this.words[i]|=a<<s&0x3ffffff,this.words[i+1]=a>>>26-s&0x3ffffff,(s+=24)>=26&&(s-=26,i++);else if("le"===r)for(o=0,i=0;o<e.length;o+=3)a=e[o]|e[o+1]<<8|e[o+2]<<16,this.words[i]|=a<<s&0x3ffffff,this.words[i+1]=a>>>26-s&0x3ffffff,(s+=24)>=26&&(s-=26,i++);return this._strip()},a.prototype._parseHex=function(e,t){this.length=Math.ceil((e.length-t)/6),this.words=Array(this.length);for(var r,n,i=0;i<this.length;i++)this.words[i]=0;var a=0;for(i=e.length-6,r=0;i>=t;i-=6)n=o(e,i,i+6),this.words[r]|=n<<a&0x3ffffff,this.words[r+1]|=n>>>26-a&4194303,(a+=24)>=26&&(a-=26,r++);i+6!==t&&(n=o(e,t,i+6),this.words[r]|=n<<a&0x3ffffff,this.words[r+1]|=n>>>26-a&4194303),this._strip()},a.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=0x3ffffff;i*=t)n++;n--,i=i/t|0;for(var a=e.length-r,o=a%n,l=Math.min(a,a-o)+r,c=0,u=r;u<l;u+=n)c=s(e,u,u+n,t),this.imuln(i),this.words[0]+c<0x4000000?this.words[0]+=c:this._iaddn(c);if(0!==o){var d=1;for(c=s(e,u,e.length,t),u=0;u<o;u++)d*=t;this.imuln(d),this.words[0]+c<0x4000000?this.words[0]+=c:this._iaddn(c)}},a.prototype.copy=function(e){e.words=Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},a.prototype._move=function(e){l(e,this)},a.prototype.clone=function(){var e=new a(null);return this.copy(e),e},a.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},a.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},a.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for?a.prototype[Symbol.for("nodejs.util.inspect.custom")]=c:a.prototype.inspect=c;var u,d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],f=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],h=[0,0,0x2000000,0x290d741,0x1000000,0x2e90edd,0x39aa400,0x267bf47,0x1000000,0x290d741,1e7,0x12959c3,0x222c000,0x3bd7765,7529536,0xadcea1,0x1000000,0x1704f61,0x206fc40,0x2cddcf9,64e6,4084101,5153632,6436343,7962624,9765625,0xb54ba0,0xdaf26b,0x1069c00,0x138f9ad,243e5,0x1b4d89f,0x2000000,0x25528a1,0x2b54a20,0x3216b93,0x39aa400];a.prototype.toString=function(e,t){if(t=0|t||1,16===(e=e||10)||"hex"===e){for(var r="",i=0,a=0,o=0;o<this.length;o++){var s=this.words[o],l=((s<<i|a)&0xffffff).toString(16);r=0!=(a=s>>>24-i&0xffffff)||o!==this.length-1?d[6-l.length]+l+r:l+r,(i+=2)>=26&&(i-=26,o--)}for(0!==a&&(r=a.toString(16)+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(e===(0|e)&&e>=2&&e<=36){var c=f[e],u=h[e];r="";var p=this.clone();for(p.negative=0;!p.isZero();){var b=p.modrn(u).toString(e);r=(p=p.idivn(u)).isZero()?b+r:d[c-b.length]+b+r}for(this.isZero()&&(r="0"+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=0x4000000*this.words[1]:3===this.length&&1===this.words[2]?e+=0x10000000000000+0x4000000*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},a.prototype.toJSON=function(){return this.toString(16,2)},u&&(a.prototype.toBuffer=function(e,t){return this.toArrayLike(u,e,t)}),a.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)};var p=function(e,t){return e.allocUnsafe?e.allocUnsafe(t):new e(t)};function b(e){for(var t=Array(e.bitLength()),r=0;r<t.length;r++){var n=r/26|0,i=r%26;t[r]=e.words[n]>>>i&1}return t}function g(e,t,r){r.negative=t.negative^e.negative;var n=e.length+t.length|0;r.length=n,n=n-1|0;var i=0|e.words[0],a=0|t.words[0],o=i*a,s=0x3ffffff&o,l=o/0x4000000|0;r.words[0]=s;for(var c=1;c<n;c++){for(var u=l>>>26,d=0x3ffffff&l,f=Math.min(c,t.length-1),h=Math.max(0,c-e.length+1);h<=f;h++){var p=c-h|0;u+=(o=(i=0|e.words[p])*(a=0|t.words[h])+d)/0x4000000|0,d=0x3ffffff&o}r.words[c]=0|d,l=0|u}return 0!==l?r.words[c]=0|l:r.length--,r._strip()}a.prototype.toArrayLike=function(e,t,r){this._strip();var i=this.byteLength(),a=r||Math.max(1,i);n(i<=a,"byte array longer than desired length"),n(a>0,"Requested array length <= 0");var o=p(e,a);return this["_toArrayLike"+("le"===t?"LE":"BE")](o,i),o},a.prototype._toArrayLikeLE=function(e,t){for(var r=0,n=0,i=0,a=0;i<this.length;i++){var o=this.words[i]<<a|n;e[r++]=255&o,r<e.length&&(e[r++]=o>>8&255),r<e.length&&(e[r++]=o>>16&255),6===a?(r<e.length&&(e[r++]=o>>24&255),n=0,a=0):(n=o>>>24,a+=2)}if(r<e.length)for(e[r++]=n;r<e.length;)e[r++]=0},a.prototype._toArrayLikeBE=function(e,t){for(var r=e.length-1,n=0,i=0,a=0;i<this.length;i++){var o=this.words[i]<<a|n;e[r--]=255&o,r>=0&&(e[r--]=o>>8&255),r>=0&&(e[r--]=o>>16&255),6===a?(r>=0&&(e[r--]=o>>24&255),n=0,a=0):(n=o>>>24,a+=2)}if(r>=0)for(e[r--]=n;r>=0;)e[r--]=0},Math.clz32?a.prototype._countBits=function(e){return 32-Math.clz32(e)}:a.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},a.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return(8191&t)==0&&(r+=13,t>>>=13),(127&t)==0&&(r+=7,t>>>=7),(15&t)==0&&(r+=4,t>>>=4),(3&t)==0&&(r+=2,t>>>=2),(1&t)==0&&r++,r},a.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return(this.length-1)*26+t},a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},a.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return 0!==this.negative},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this._strip()},a.prototype.ior=function(e){return n((this.negative|e.negative)==0),this.iuor(e)},a.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},a.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},a.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this._strip()},a.prototype.iand=function(e){return n((this.negative|e.negative)==0),this.iuand(e)},a.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},a.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},a.prototype.iuxor=function(e){this.length>e.length?(t=this,r=e):(t=e,r=this);for(var t,r,n=0;n<r.length;n++)this.words[n]=t.words[n]^r.words[n];if(this!==t)for(;n<t.length;n++)this.words[n]=t.words[n];return this.length=t.length,this._strip()},a.prototype.ixor=function(e){return n((this.negative|e.negative)==0),this.iuxor(e)},a.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},a.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},a.prototype.inotn=function(e){n("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),r=e%26;this._expand(t),r>0&&t--;for(var i=0;i<t;i++)this.words[i]=0x3ffffff&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&0x3ffffff>>26-r),this._strip()},a.prototype.notn=function(e){return this.clone().inotn(e)},a.prototype.setn=function(e,t){n("number"==typeof e&&e>=0);var r=e/26|0,i=e%26;return this._expand(r+1),t?this.words[r]=this.words[r]|1<<i:this.words[r]=this.words[r]&~(1<<i),this._strip()},a.prototype.iadd=function(e){if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,n=e):(r=e,n=this);for(var t,r,n,i=0,a=0;a<n.length;a++)t=(0|r.words[a])+(0|n.words[a])+i,this.words[a]=0x3ffffff&t,i=t>>>26;for(;0!==i&&a<r.length;a++)t=(0|r.words[a])+i,this.words[a]=0x3ffffff&t,i=t>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;a<r.length;a++)this.words[a]=r.words[a];return this},a.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},a.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t,r,n=this.iadd(e);return e.negative=1,n._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var i=this.cmp(e);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(t=this,r=e):(t=e,r=this);for(var a=0,o=0;o<r.length;o++)a=(n=(0|t.words[o])-(0|r.words[o])+a)>>26,this.words[o]=0x3ffffff&n;for(;0!==a&&o<t.length;o++)a=(n=(0|t.words[o])+a)>>26,this.words[o]=0x3ffffff&n;if(0===a&&o<t.length&&t!==this)for(;o<t.length;o++)this.words[o]=t.words[o];return this.length=Math.max(this.length,o),t!==this&&(this.negative=1),this._strip()},a.prototype.sub=function(e){return this.clone().isub(e)};var m=function(e,t,r){var n,i,a,o=e.words,s=t.words,l=r.words,c=0,u=0|o[0],d=8191&u,f=u>>>13,h=0|o[1],p=8191&h,b=h>>>13,g=0|o[2],m=8191&g,v=g>>>13,y=0|o[3],x=8191&y,w=y>>>13,_=0|o[4],S=8191&_,E=_>>>13,k=0|o[5],N=8191&k,j=k>>>13,C=0|o[6],M=8191&C,A=C>>>13,R=0|o[7],T=8191&R,O=R>>>13,L=0|o[8],I=8191&L,P=L>>>13,B=0|o[9],D=8191&B,z=B>>>13,F=0|s[0],$=8191&F,U=F>>>13,H=0|s[1],V=8191&H,q=H>>>13,W=0|s[2],K=8191&W,G=W>>>13,X=0|s[3],Z=8191&X,Y=X>>>13,J=0|s[4],Q=8191&J,ee=J>>>13,et=0|s[5],er=8191&et,en=et>>>13,ei=0|s[6],ea=8191&ei,eo=ei>>>13,es=0|s[7],el=8191&es,ec=es>>>13,eu=0|s[8],ed=8191&eu,ef=eu>>>13,eh=0|s[9],ep=8191&eh,eb=eh>>>13;r.negative=e.negative^t.negative,r.length=19,n=Math.imul(d,$);var eg=(c+n|0)+((8191&(i=(i=Math.imul(d,U))+Math.imul(f,$)|0))<<13)|0;c=((a=Math.imul(f,U))+(i>>>13)|0)+(eg>>>26)|0,eg&=0x3ffffff,n=Math.imul(p,$),i=(i=Math.imul(p,U))+Math.imul(b,$)|0,a=Math.imul(b,U),n=n+Math.imul(d,V)|0;var em=(c+n|0)+((8191&(i=(i=i+Math.imul(d,q)|0)+Math.imul(f,V)|0))<<13)|0;c=((a=a+Math.imul(f,q)|0)+(i>>>13)|0)+(em>>>26)|0,em&=0x3ffffff,n=Math.imul(m,$),i=(i=Math.imul(m,U))+Math.imul(v,$)|0,a=Math.imul(v,U),n=n+Math.imul(p,V)|0,i=(i=i+Math.imul(p,q)|0)+Math.imul(b,V)|0,a=a+Math.imul(b,q)|0,n=n+Math.imul(d,K)|0;var ev=(c+n|0)+((8191&(i=(i=i+Math.imul(d,G)|0)+Math.imul(f,K)|0))<<13)|0;c=((a=a+Math.imul(f,G)|0)+(i>>>13)|0)+(ev>>>26)|0,ev&=0x3ffffff,n=Math.imul(x,$),i=(i=Math.imul(x,U))+Math.imul(w,$)|0,a=Math.imul(w,U),n=n+Math.imul(m,V)|0,i=(i=i+Math.imul(m,q)|0)+Math.imul(v,V)|0,a=a+Math.imul(v,q)|0,n=n+Math.imul(p,K)|0,i=(i=i+Math.imul(p,G)|0)+Math.imul(b,K)|0,a=a+Math.imul(b,G)|0,n=n+Math.imul(d,Z)|0;var ey=(c+n|0)+((8191&(i=(i=i+Math.imul(d,Y)|0)+Math.imul(f,Z)|0))<<13)|0;c=((a=a+Math.imul(f,Y)|0)+(i>>>13)|0)+(ey>>>26)|0,ey&=0x3ffffff,n=Math.imul(S,$),i=(i=Math.imul(S,U))+Math.imul(E,$)|0,a=Math.imul(E,U),n=n+Math.imul(x,V)|0,i=(i=i+Math.imul(x,q)|0)+Math.imul(w,V)|0,a=a+Math.imul(w,q)|0,n=n+Math.imul(m,K)|0,i=(i=i+Math.imul(m,G)|0)+Math.imul(v,K)|0,a=a+Math.imul(v,G)|0,n=n+Math.imul(p,Z)|0,i=(i=i+Math.imul(p,Y)|0)+Math.imul(b,Z)|0,a=a+Math.imul(b,Y)|0,n=n+Math.imul(d,Q)|0;var ex=(c+n|0)+((8191&(i=(i=i+Math.imul(d,ee)|0)+Math.imul(f,Q)|0))<<13)|0;c=((a=a+Math.imul(f,ee)|0)+(i>>>13)|0)+(ex>>>26)|0,ex&=0x3ffffff,n=Math.imul(N,$),i=(i=Math.imul(N,U))+Math.imul(j,$)|0,a=Math.imul(j,U),n=n+Math.imul(S,V)|0,i=(i=i+Math.imul(S,q)|0)+Math.imul(E,V)|0,a=a+Math.imul(E,q)|0,n=n+Math.imul(x,K)|0,i=(i=i+Math.imul(x,G)|0)+Math.imul(w,K)|0,a=a+Math.imul(w,G)|0,n=n+Math.imul(m,Z)|0,i=(i=i+Math.imul(m,Y)|0)+Math.imul(v,Z)|0,a=a+Math.imul(v,Y)|0,n=n+Math.imul(p,Q)|0,i=(i=i+Math.imul(p,ee)|0)+Math.imul(b,Q)|0,a=a+Math.imul(b,ee)|0,n=n+Math.imul(d,er)|0;var ew=(c+n|0)+((8191&(i=(i=i+Math.imul(d,en)|0)+Math.imul(f,er)|0))<<13)|0;c=((a=a+Math.imul(f,en)|0)+(i>>>13)|0)+(ew>>>26)|0,ew&=0x3ffffff,n=Math.imul(M,$),i=(i=Math.imul(M,U))+Math.imul(A,$)|0,a=Math.imul(A,U),n=n+Math.imul(N,V)|0,i=(i=i+Math.imul(N,q)|0)+Math.imul(j,V)|0,a=a+Math.imul(j,q)|0,n=n+Math.imul(S,K)|0,i=(i=i+Math.imul(S,G)|0)+Math.imul(E,K)|0,a=a+Math.imul(E,G)|0,n=n+Math.imul(x,Z)|0,i=(i=i+Math.imul(x,Y)|0)+Math.imul(w,Z)|0,a=a+Math.imul(w,Y)|0,n=n+Math.imul(m,Q)|0,i=(i=i+Math.imul(m,ee)|0)+Math.imul(v,Q)|0,a=a+Math.imul(v,ee)|0,n=n+Math.imul(p,er)|0,i=(i=i+Math.imul(p,en)|0)+Math.imul(b,er)|0,a=a+Math.imul(b,en)|0,n=n+Math.imul(d,ea)|0;var e_=(c+n|0)+((8191&(i=(i=i+Math.imul(d,eo)|0)+Math.imul(f,ea)|0))<<13)|0;c=((a=a+Math.imul(f,eo)|0)+(i>>>13)|0)+(e_>>>26)|0,e_&=0x3ffffff,n=Math.imul(T,$),i=(i=Math.imul(T,U))+Math.imul(O,$)|0,a=Math.imul(O,U),n=n+Math.imul(M,V)|0,i=(i=i+Math.imul(M,q)|0)+Math.imul(A,V)|0,a=a+Math.imul(A,q)|0,n=n+Math.imul(N,K)|0,i=(i=i+Math.imul(N,G)|0)+Math.imul(j,K)|0,a=a+Math.imul(j,G)|0,n=n+Math.imul(S,Z)|0,i=(i=i+Math.imul(S,Y)|0)+Math.imul(E,Z)|0,a=a+Math.imul(E,Y)|0,n=n+Math.imul(x,Q)|0,i=(i=i+Math.imul(x,ee)|0)+Math.imul(w,Q)|0,a=a+Math.imul(w,ee)|0,n=n+Math.imul(m,er)|0,i=(i=i+Math.imul(m,en)|0)+Math.imul(v,er)|0,a=a+Math.imul(v,en)|0,n=n+Math.imul(p,ea)|0,i=(i=i+Math.imul(p,eo)|0)+Math.imul(b,ea)|0,a=a+Math.imul(b,eo)|0,n=n+Math.imul(d,el)|0;var eS=(c+n|0)+((8191&(i=(i=i+Math.imul(d,ec)|0)+Math.imul(f,el)|0))<<13)|0;c=((a=a+Math.imul(f,ec)|0)+(i>>>13)|0)+(eS>>>26)|0,eS&=0x3ffffff,n=Math.imul(I,$),i=(i=Math.imul(I,U))+Math.imul(P,$)|0,a=Math.imul(P,U),n=n+Math.imul(T,V)|0,i=(i=i+Math.imul(T,q)|0)+Math.imul(O,V)|0,a=a+Math.imul(O,q)|0,n=n+Math.imul(M,K)|0,i=(i=i+Math.imul(M,G)|0)+Math.imul(A,K)|0,a=a+Math.imul(A,G)|0,n=n+Math.imul(N,Z)|0,i=(i=i+Math.imul(N,Y)|0)+Math.imul(j,Z)|0,a=a+Math.imul(j,Y)|0,n=n+Math.imul(S,Q)|0,i=(i=i+Math.imul(S,ee)|0)+Math.imul(E,Q)|0,a=a+Math.imul(E,ee)|0,n=n+Math.imul(x,er)|0,i=(i=i+Math.imul(x,en)|0)+Math.imul(w,er)|0,a=a+Math.imul(w,en)|0,n=n+Math.imul(m,ea)|0,i=(i=i+Math.imul(m,eo)|0)+Math.imul(v,ea)|0,a=a+Math.imul(v,eo)|0,n=n+Math.imul(p,el)|0,i=(i=i+Math.imul(p,ec)|0)+Math.imul(b,el)|0,a=a+Math.imul(b,ec)|0,n=n+Math.imul(d,ed)|0;var eE=(c+n|0)+((8191&(i=(i=i+Math.imul(d,ef)|0)+Math.imul(f,ed)|0))<<13)|0;c=((a=a+Math.imul(f,ef)|0)+(i>>>13)|0)+(eE>>>26)|0,eE&=0x3ffffff,n=Math.imul(D,$),i=(i=Math.imul(D,U))+Math.imul(z,$)|0,a=Math.imul(z,U),n=n+Math.imul(I,V)|0,i=(i=i+Math.imul(I,q)|0)+Math.imul(P,V)|0,a=a+Math.imul(P,q)|0,n=n+Math.imul(T,K)|0,i=(i=i+Math.imul(T,G)|0)+Math.imul(O,K)|0,a=a+Math.imul(O,G)|0,n=n+Math.imul(M,Z)|0,i=(i=i+Math.imul(M,Y)|0)+Math.imul(A,Z)|0,a=a+Math.imul(A,Y)|0,n=n+Math.imul(N,Q)|0,i=(i=i+Math.imul(N,ee)|0)+Math.imul(j,Q)|0,a=a+Math.imul(j,ee)|0,n=n+Math.imul(S,er)|0,i=(i=i+Math.imul(S,en)|0)+Math.imul(E,er)|0,a=a+Math.imul(E,en)|0,n=n+Math.imul(x,ea)|0,i=(i=i+Math.imul(x,eo)|0)+Math.imul(w,ea)|0,a=a+Math.imul(w,eo)|0,n=n+Math.imul(m,el)|0,i=(i=i+Math.imul(m,ec)|0)+Math.imul(v,el)|0,a=a+Math.imul(v,ec)|0,n=n+Math.imul(p,ed)|0,i=(i=i+Math.imul(p,ef)|0)+Math.imul(b,ed)|0,a=a+Math.imul(b,ef)|0,n=n+Math.imul(d,ep)|0;var ek=(c+n|0)+((8191&(i=(i=i+Math.imul(d,eb)|0)+Math.imul(f,ep)|0))<<13)|0;c=((a=a+Math.imul(f,eb)|0)+(i>>>13)|0)+(ek>>>26)|0,ek&=0x3ffffff,n=Math.imul(D,V),i=(i=Math.imul(D,q))+Math.imul(z,V)|0,a=Math.imul(z,q),n=n+Math.imul(I,K)|0,i=(i=i+Math.imul(I,G)|0)+Math.imul(P,K)|0,a=a+Math.imul(P,G)|0,n=n+Math.imul(T,Z)|0,i=(i=i+Math.imul(T,Y)|0)+Math.imul(O,Z)|0,a=a+Math.imul(O,Y)|0,n=n+Math.imul(M,Q)|0,i=(i=i+Math.imul(M,ee)|0)+Math.imul(A,Q)|0,a=a+Math.imul(A,ee)|0,n=n+Math.imul(N,er)|0,i=(i=i+Math.imul(N,en)|0)+Math.imul(j,er)|0,a=a+Math.imul(j,en)|0,n=n+Math.imul(S,ea)|0,i=(i=i+Math.imul(S,eo)|0)+Math.imul(E,ea)|0,a=a+Math.imul(E,eo)|0,n=n+Math.imul(x,el)|0,i=(i=i+Math.imul(x,ec)|0)+Math.imul(w,el)|0,a=a+Math.imul(w,ec)|0,n=n+Math.imul(m,ed)|0,i=(i=i+Math.imul(m,ef)|0)+Math.imul(v,ed)|0,a=a+Math.imul(v,ef)|0,n=n+Math.imul(p,ep)|0;var eN=(c+n|0)+((8191&(i=(i=i+Math.imul(p,eb)|0)+Math.imul(b,ep)|0))<<13)|0;c=((a=a+Math.imul(b,eb)|0)+(i>>>13)|0)+(eN>>>26)|0,eN&=0x3ffffff,n=Math.imul(D,K),i=(i=Math.imul(D,G))+Math.imul(z,K)|0,a=Math.imul(z,G),n=n+Math.imul(I,Z)|0,i=(i=i+Math.imul(I,Y)|0)+Math.imul(P,Z)|0,a=a+Math.imul(P,Y)|0,n=n+Math.imul(T,Q)|0,i=(i=i+Math.imul(T,ee)|0)+Math.imul(O,Q)|0,a=a+Math.imul(O,ee)|0,n=n+Math.imul(M,er)|0,i=(i=i+Math.imul(M,en)|0)+Math.imul(A,er)|0,a=a+Math.imul(A,en)|0,n=n+Math.imul(N,ea)|0,i=(i=i+Math.imul(N,eo)|0)+Math.imul(j,ea)|0,a=a+Math.imul(j,eo)|0,n=n+Math.imul(S,el)|0,i=(i=i+Math.imul(S,ec)|0)+Math.imul(E,el)|0,a=a+Math.imul(E,ec)|0,n=n+Math.imul(x,ed)|0,i=(i=i+Math.imul(x,ef)|0)+Math.imul(w,ed)|0,a=a+Math.imul(w,ef)|0,n=n+Math.imul(m,ep)|0;var ej=(c+n|0)+((8191&(i=(i=i+Math.imul(m,eb)|0)+Math.imul(v,ep)|0))<<13)|0;c=((a=a+Math.imul(v,eb)|0)+(i>>>13)|0)+(ej>>>26)|0,ej&=0x3ffffff,n=Math.imul(D,Z),i=(i=Math.imul(D,Y))+Math.imul(z,Z)|0,a=Math.imul(z,Y),n=n+Math.imul(I,Q)|0,i=(i=i+Math.imul(I,ee)|0)+Math.imul(P,Q)|0,a=a+Math.imul(P,ee)|0,n=n+Math.imul(T,er)|0,i=(i=i+Math.imul(T,en)|0)+Math.imul(O,er)|0,a=a+Math.imul(O,en)|0,n=n+Math.imul(M,ea)|0,i=(i=i+Math.imul(M,eo)|0)+Math.imul(A,ea)|0,a=a+Math.imul(A,eo)|0,n=n+Math.imul(N,el)|0,i=(i=i+Math.imul(N,ec)|0)+Math.imul(j,el)|0,a=a+Math.imul(j,ec)|0,n=n+Math.imul(S,ed)|0,i=(i=i+Math.imul(S,ef)|0)+Math.imul(E,ed)|0,a=a+Math.imul(E,ef)|0,n=n+Math.imul(x,ep)|0;var eC=(c+n|0)+((8191&(i=(i=i+Math.imul(x,eb)|0)+Math.imul(w,ep)|0))<<13)|0;c=((a=a+Math.imul(w,eb)|0)+(i>>>13)|0)+(eC>>>26)|0,eC&=0x3ffffff,n=Math.imul(D,Q),i=(i=Math.imul(D,ee))+Math.imul(z,Q)|0,a=Math.imul(z,ee),n=n+Math.imul(I,er)|0,i=(i=i+Math.imul(I,en)|0)+Math.imul(P,er)|0,a=a+Math.imul(P,en)|0,n=n+Math.imul(T,ea)|0,i=(i=i+Math.imul(T,eo)|0)+Math.imul(O,ea)|0,a=a+Math.imul(O,eo)|0,n=n+Math.imul(M,el)|0,i=(i=i+Math.imul(M,ec)|0)+Math.imul(A,el)|0,a=a+Math.imul(A,ec)|0,n=n+Math.imul(N,ed)|0,i=(i=i+Math.imul(N,ef)|0)+Math.imul(j,ed)|0,a=a+Math.imul(j,ef)|0,n=n+Math.imul(S,ep)|0;var eM=(c+n|0)+((8191&(i=(i=i+Math.imul(S,eb)|0)+Math.imul(E,ep)|0))<<13)|0;c=((a=a+Math.imul(E,eb)|0)+(i>>>13)|0)+(eM>>>26)|0,eM&=0x3ffffff,n=Math.imul(D,er),i=(i=Math.imul(D,en))+Math.imul(z,er)|0,a=Math.imul(z,en),n=n+Math.imul(I,ea)|0,i=(i=i+Math.imul(I,eo)|0)+Math.imul(P,ea)|0,a=a+Math.imul(P,eo)|0,n=n+Math.imul(T,el)|0,i=(i=i+Math.imul(T,ec)|0)+Math.imul(O,el)|0,a=a+Math.imul(O,ec)|0,n=n+Math.imul(M,ed)|0,i=(i=i+Math.imul(M,ef)|0)+Math.imul(A,ed)|0,a=a+Math.imul(A,ef)|0,n=n+Math.imul(N,ep)|0;var eA=(c+n|0)+((8191&(i=(i=i+Math.imul(N,eb)|0)+Math.imul(j,ep)|0))<<13)|0;c=((a=a+Math.imul(j,eb)|0)+(i>>>13)|0)+(eA>>>26)|0,eA&=0x3ffffff,n=Math.imul(D,ea),i=(i=Math.imul(D,eo))+Math.imul(z,ea)|0,a=Math.imul(z,eo),n=n+Math.imul(I,el)|0,i=(i=i+Math.imul(I,ec)|0)+Math.imul(P,el)|0,a=a+Math.imul(P,ec)|0,n=n+Math.imul(T,ed)|0,i=(i=i+Math.imul(T,ef)|0)+Math.imul(O,ed)|0,a=a+Math.imul(O,ef)|0,n=n+Math.imul(M,ep)|0;var eR=(c+n|0)+((8191&(i=(i=i+Math.imul(M,eb)|0)+Math.imul(A,ep)|0))<<13)|0;c=((a=a+Math.imul(A,eb)|0)+(i>>>13)|0)+(eR>>>26)|0,eR&=0x3ffffff,n=Math.imul(D,el),i=(i=Math.imul(D,ec))+Math.imul(z,el)|0,a=Math.imul(z,ec),n=n+Math.imul(I,ed)|0,i=(i=i+Math.imul(I,ef)|0)+Math.imul(P,ed)|0,a=a+Math.imul(P,ef)|0,n=n+Math.imul(T,ep)|0;var eT=(c+n|0)+((8191&(i=(i=i+Math.imul(T,eb)|0)+Math.imul(O,ep)|0))<<13)|0;c=((a=a+Math.imul(O,eb)|0)+(i>>>13)|0)+(eT>>>26)|0,eT&=0x3ffffff,n=Math.imul(D,ed),i=(i=Math.imul(D,ef))+Math.imul(z,ed)|0,a=Math.imul(z,ef),n=n+Math.imul(I,ep)|0;var eO=(c+n|0)+((8191&(i=(i=i+Math.imul(I,eb)|0)+Math.imul(P,ep)|0))<<13)|0;c=((a=a+Math.imul(P,eb)|0)+(i>>>13)|0)+(eO>>>26)|0,eO&=0x3ffffff,n=Math.imul(D,ep);var eL=(c+n|0)+((8191&(i=(i=Math.imul(D,eb))+Math.imul(z,ep)|0))<<13)|0;return c=((a=Math.imul(z,eb))+(i>>>13)|0)+(eL>>>26)|0,eL&=0x3ffffff,l[0]=eg,l[1]=em,l[2]=ev,l[3]=ey,l[4]=ex,l[5]=ew,l[6]=e_,l[7]=eS,l[8]=eE,l[9]=ek,l[10]=eN,l[11]=ej,l[12]=eC,l[13]=eM,l[14]=eA,l[15]=eR,l[16]=eT,l[17]=eO,l[18]=eL,0!==c&&(l[19]=c,r.length++),r};function v(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var n=0,i=0,a=0;a<r.length-1;a++){var o=i;i=0;for(var s=0x3ffffff&n,l=Math.min(a,t.length-1),c=Math.max(0,a-e.length+1);c<=l;c++){var u=a-c,d=(0|e.words[u])*(0|t.words[c]),f=0x3ffffff&d;o=o+(d/0x4000000|0)|0,s=0x3ffffff&(f=f+s|0),i+=(o=o+(f>>>26)|0)>>>26,o&=0x3ffffff}r.words[a]=s,n=o,o=i}return 0!==n?r.words[a]=n:r.length--,r._strip()}function y(e,t,r){return v(e,t,r)}function x(e,t){this.x=e,this.y=t}Math.imul||(m=g),a.prototype.mulTo=function(e,t){var r=this.length+e.length;return 10===this.length&&10===e.length?m(this,e,t):r<63?g(this,e,t):r<1024?v(this,e,t):y(this,e,t)},x.prototype.makeRBT=function(e){for(var t=Array(e),r=a.prototype._countBits(e)-1,n=0;n<e;n++)t[n]=this.revBin(n,r,e);return t},x.prototype.revBin=function(e,t,r){if(0===e||e===r-1)return e;for(var n=0,i=0;i<t;i++)n|=(1&e)<<t-i-1,e>>=1;return n},x.prototype.permute=function(e,t,r,n,i,a){for(var o=0;o<a;o++)n[o]=t[e[o]],i[o]=r[e[o]]},x.prototype.transform=function(e,t,r,n,i,a){this.permute(a,e,t,r,n,i);for(var o=1;o<i;o<<=1)for(var s=o<<1,l=Math.cos(2*Math.PI/s),c=Math.sin(2*Math.PI/s),u=0;u<i;u+=s)for(var d=l,f=c,h=0;h<o;h++){var p=r[u+h],b=n[u+h],g=r[u+h+o],m=n[u+h+o],v=d*g-f*m;m=d*m+f*g,g=v,r[u+h]=p+g,n[u+h]=b+m,r[u+h+o]=p-g,n[u+h+o]=b-m,h!==s&&(v=l*d-c*f,f=l*f+c*d,d=v)}},x.prototype.guessLen13b=function(e,t){var r=1|Math.max(t,e),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},x.prototype.conjugate=function(e,t,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=e[n];e[n]=e[r-n-1],e[r-n-1]=i,i=t[n],t[n]=-t[r-n-1],t[r-n-1]=-i}},x.prototype.normalize13b=function(e,t){for(var r=0,n=0;n<t/2;n++){var i=8192*Math.round(e[2*n+1]/t)+Math.round(e[2*n]/t)+r;e[n]=0x3ffffff&i,r=i<0x4000000?0:i/0x4000000|0}return e},x.prototype.convert13b=function(e,t,r,i){for(var a=0,o=0;o<t;o++)a+=0|e[o],r[2*o]=8191&a,a>>>=13,r[2*o+1]=8191&a,a>>>=13;for(o=2*t;o<i;++o)r[o]=0;n(0===a),n((-8192&a)==0)},x.prototype.stub=function(e){for(var t=Array(e),r=0;r<e;r++)t[r]=0;return t},x.prototype.mulp=function(e,t,r){var n=2*this.guessLen13b(e.length,t.length),i=this.makeRBT(n),a=this.stub(n),o=Array(n),s=Array(n),l=Array(n),c=Array(n),u=Array(n),d=Array(n),f=r.words;f.length=n,this.convert13b(e.words,e.length,o,n),this.convert13b(t.words,t.length,c,n),this.transform(o,a,s,l,n,i),this.transform(c,a,u,d,n,i);for(var h=0;h<n;h++){var p=s[h]*u[h]-l[h]*d[h];l[h]=s[h]*d[h]+l[h]*u[h],s[h]=p}return this.conjugate(s,l,n),this.transform(s,l,f,a,n,i),this.conjugate(f,a,n),this.normalize13b(f,n),r.negative=e.negative^t.negative,r.length=e.length+t.length,r._strip()},a.prototype.mul=function(e){var t=new a(null);return t.words=Array(this.length+e.length),this.mulTo(e,t)},a.prototype.mulf=function(e){var t=new a(null);return t.words=Array(this.length+e.length),y(this,e,t)},a.prototype.imul=function(e){return this.clone().mulTo(e,this)},a.prototype.imuln=function(e){var t=e<0;t&&(e=-e),n("number"==typeof e),n(e<0x4000000);for(var r=0,i=0;i<this.length;i++){var a=(0|this.words[i])*e,o=(0x3ffffff&a)+(0x3ffffff&r);r>>=26,r+=(a/0x4000000|0)+(o>>>26),this.words[i]=0x3ffffff&o}return 0!==r&&(this.words[i]=r,this.length++),t?this.ineg():this},a.prototype.muln=function(e){return this.clone().imuln(e)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(e){var t=b(e);if(0===t.length)return new a(1);for(var r=this,n=0;n<t.length&&0===t[n];n++,r=r.sqr());if(++n<t.length)for(var i=r.sqr();n<t.length;n++,i=i.sqr())0!==t[n]&&(r=r.mul(i));return r},a.prototype.iushln=function(e){n("number"==typeof e&&e>=0);var t,r=e%26,i=(e-r)/26,a=0x3ffffff>>>26-r<<26-r;if(0!==r){var o=0;for(t=0;t<this.length;t++){var s=this.words[t]&a,l=(0|this.words[t])-s<<r;this.words[t]=l|o,o=s>>>26-r}o&&(this.words[t]=o,this.length++)}if(0!==i){for(t=this.length-1;t>=0;t--)this.words[t+i]=this.words[t];for(t=0;t<i;t++)this.words[t]=0;this.length+=i}return this._strip()},a.prototype.ishln=function(e){return n(0===this.negative),this.iushln(e)},a.prototype.iushrn=function(e,t,r){n("number"==typeof e&&e>=0);var i=t?(t-t%26)/26:0,a=e%26,o=Math.min((e-a)/26,this.length),s=0x3ffffff^0x3ffffff>>>a<<a,l=r;if(i-=o,i=Math.max(0,i),l){for(var c=0;c<o;c++)l.words[c]=this.words[c];l.length=o}if(0===o);else if(this.length>o)for(this.length-=o,c=0;c<this.length;c++)this.words[c]=this.words[c+o];else this.words[0]=0,this.length=1;var u=0;for(c=this.length-1;c>=0&&(0!==u||c>=i);c--){var d=0|this.words[c];this.words[c]=u<<26-a|d>>>a,u=d&s}return l&&0!==u&&(l.words[l.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},a.prototype.ishrn=function(e,t,r){return n(0===this.negative),this.iushrn(e,t,r)},a.prototype.shln=function(e){return this.clone().ishln(e)},a.prototype.ushln=function(e){return this.clone().iushln(e)},a.prototype.shrn=function(e){return this.clone().ishrn(e)},a.prototype.ushrn=function(e){return this.clone().iushrn(e)},a.prototype.testn=function(e){n("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26,i=1<<t;return!(this.length<=r)&&!!(this.words[r]&i)},a.prototype.imaskn=function(e){n("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==t&&r++,this.length=Math.min(r,this.length),0!==t){var i=0x3ffffff^0x3ffffff>>>t<<t;this.words[this.length-1]&=i}return this._strip()},a.prototype.maskn=function(e){return this.clone().imaskn(e)},a.prototype.iaddn=function(e){return(n("number"==typeof e),n(e<0x4000000),e<0)?this.isubn(-e):0!==this.negative?(1===this.length&&(0|this.words[0])<=e?(this.words[0]=e-(0|this.words[0]),this.negative=0):(this.negative=0,this.isubn(e),this.negative=1),this):this._iaddn(e)},a.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=0x4000000;t++)this.words[t]-=0x4000000,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},a.prototype.isubn=function(e){if(n("number"==typeof e),n(e<0x4000000),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=0x4000000,this.words[t+1]-=1;return this._strip()},a.prototype.addn=function(e){return this.clone().iaddn(e)},a.prototype.subn=function(e){return this.clone().isubn(e)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(e,t,r){var i,a,o=e.length+r;this._expand(o);var s=0;for(i=0;i<e.length;i++){a=(0|this.words[i+r])+s;var l=(0|e.words[i])*t;a-=0x3ffffff&l,s=(a>>26)-(l/0x4000000|0),this.words[i+r]=0x3ffffff&a}for(;i<this.length-r;i++)s=(a=(0|this.words[i+r])+s)>>26,this.words[i+r]=0x3ffffff&a;if(0===s)return this._strip();for(n(-1===s),s=0,i=0;i<this.length;i++)s=(a=-(0|this.words[i])+s)>>26,this.words[i]=0x3ffffff&a;return this.negative=1,this._strip()},a.prototype._wordDiv=function(e,t){var r,n=this.length-e.length,i=this.clone(),o=e,s=0|o.words[o.length-1];0!=(n=26-this._countBits(s))&&(o=o.ushln(n),i.iushln(n),s=0|o.words[o.length-1]);var l=i.length-o.length;if("mod"!==t){(r=new a(null)).length=l+1,r.words=Array(r.length);for(var c=0;c<r.length;c++)r.words[c]=0}var u=i.clone()._ishlnsubmul(o,1,l);0===u.negative&&(i=u,r&&(r.words[l]=1));for(var d=l-1;d>=0;d--){var f=(0|i.words[o.length+d])*0x4000000+(0|i.words[o.length+d-1]);for(f=Math.min(f/s|0,0x3ffffff),i._ishlnsubmul(o,f,d);0!==i.negative;)f--,i.negative=0,i._ishlnsubmul(o,1,d),i.isZero()||(i.negative^=1);r&&(r.words[d]=f)}return r&&r._strip(),i._strip(),"div"!==t&&0!==n&&i.iushrn(n),{div:r||null,mod:i}},a.prototype.divmod=function(e,t,r){var i,o,s;return(n(!e.isZero()),this.isZero())?{div:new a(0),mod:new a(0)}:0!==this.negative&&0===e.negative?(s=this.neg().divmod(e,t),"mod"!==t&&(i=s.div.neg()),"div"!==t&&(o=s.mod.neg(),r&&0!==o.negative&&o.iadd(e)),{div:i,mod:o}):0===this.negative&&0!==e.negative?(s=this.divmod(e.neg(),t),"mod"!==t&&(i=s.div.neg()),{div:i,mod:s.mod}):(this.negative&e.negative)!=0?(s=this.neg().divmod(e.neg(),t),"div"!==t&&(o=s.mod.neg(),r&&0!==o.negative&&o.isub(e)),{div:s.div,mod:o}):e.length>this.length||0>this.cmp(e)?{div:new a(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new a(this.modrn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new a(this.modrn(e.words[0]))}:this._wordDiv(e,t)},a.prototype.div=function(e){return this.divmod(e,"div",!1).div},a.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},a.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},a.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,n=e.ushrn(1),i=e.andln(1),a=r.cmp(n);return a<0||1===i&&0===a?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},a.prototype.modrn=function(e){var t=e<0;t&&(e=-e),n(e<=0x3ffffff);for(var r=0x4000000%e,i=0,a=this.length-1;a>=0;a--)i=(r*i+(0|this.words[a]))%e;return t?-i:i},a.prototype.modn=function(e){return this.modrn(e)},a.prototype.idivn=function(e){var t=e<0;t&&(e=-e),n(e<=0x3ffffff);for(var r=0,i=this.length-1;i>=0;i--){var a=(0|this.words[i])+0x4000000*r;this.words[i]=a/e|0,r=a%e}return this._strip(),t?this.ineg():this},a.prototype.divn=function(e){return this.clone().idivn(e)},a.prototype.egcd=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i=new a(1),o=new a(0),s=new a(0),l=new a(1),c=0;t.isEven()&&r.isEven();)t.iushrn(1),r.iushrn(1),++c;for(var u=r.clone(),d=t.clone();!t.isZero();){for(var f=0,h=1;(t.words[0]&h)==0&&f<26;++f,h<<=1);if(f>0)for(t.iushrn(f);f-- >0;)(i.isOdd()||o.isOdd())&&(i.iadd(u),o.isub(d)),i.iushrn(1),o.iushrn(1);for(var p=0,b=1;(r.words[0]&b)==0&&p<26;++p,b<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(s.isOdd()||l.isOdd())&&(s.iadd(u),l.isub(d)),s.iushrn(1),l.iushrn(1);t.cmp(r)>=0?(t.isub(r),i.isub(s),o.isub(l)):(r.isub(t),s.isub(i),l.isub(o))}return{a:s,b:l,gcd:r.iushln(c)}},a.prototype._invmp=function(e){n(0===e.negative),n(!e.isZero());var t,r=this,i=e.clone();r=0!==r.negative?r.umod(e):r.clone();for(var o=new a(1),s=new a(0),l=i.clone();r.cmpn(1)>0&&i.cmpn(1)>0;){for(var c=0,u=1;(r.words[0]&u)==0&&c<26;++c,u<<=1);if(c>0)for(r.iushrn(c);c-- >0;)o.isOdd()&&o.iadd(l),o.iushrn(1);for(var d=0,f=1;(i.words[0]&f)==0&&d<26;++d,f<<=1);if(d>0)for(i.iushrn(d);d-- >0;)s.isOdd()&&s.iadd(l),s.iushrn(1);r.cmp(i)>=0?(r.isub(i),o.isub(s)):(i.isub(r),s.isub(o))}return 0>(t=0===r.cmpn(1)?o:s).cmpn(0)&&t.iadd(e),t},a.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var n=0;t.isEven()&&r.isEven();n++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=t.cmp(r);if(i<0){var a=t;t=r,r=a}else if(0===i||0===r.cmpn(1))break;t.isub(r)}return r.iushln(n)},a.prototype.invm=function(e){return this.egcd(e).a.umod(e)},a.prototype.isEven=function(){return(1&this.words[0])==0},a.prototype.isOdd=function(){return(1&this.words[0])==1},a.prototype.andln=function(e){return this.words[0]&e},a.prototype.bincn=function(e){n("number"==typeof e);var t=e%26,r=(e-t)/26,i=1<<t;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var a=i,o=r;0!==a&&o<this.length;o++){var s=0|this.words[o];s+=a,a=s>>>26,s&=0x3ffffff,this.words[o]=s}return 0!==a&&(this.words[o]=a,this.length++),this},a.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},a.prototype.cmpn=function(e){var t,r=e<0;if(0!==this.negative&&!r)return -1;if(0===this.negative&&r)return 1;if(this._strip(),this.length>1)t=1;else{r&&(e=-e),n(e<=0x3ffffff,"Number is too big");var i=0|this.words[0];t=i===e?0:i<e?-1:1}return 0!==this.negative?0|-t:t},a.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return -1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},a.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return -1;for(var t=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|e.words[r];if(n!==i){n<i?t=-1:n>i&&(t=1);break}}return t},a.prototype.gtn=function(e){return 1===this.cmpn(e)},a.prototype.gt=function(e){return 1===this.cmp(e)},a.prototype.gten=function(e){return this.cmpn(e)>=0},a.prototype.gte=function(e){return this.cmp(e)>=0},a.prototype.ltn=function(e){return -1===this.cmpn(e)},a.prototype.lt=function(e){return -1===this.cmp(e)},a.prototype.lten=function(e){return 0>=this.cmpn(e)},a.prototype.lte=function(e){return 0>=this.cmp(e)},a.prototype.eqn=function(e){return 0===this.cmpn(e)},a.prototype.eq=function(e){return 0===this.cmp(e)},a.red=function(e){return new j(e)},a.prototype.toRed=function(e){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},a.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(e){return this.red=e,this},a.prototype.forceRed=function(e){return n(!this.red,"Already a number in reduction context"),this._forceRed(e)},a.prototype.redAdd=function(e){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},a.prototype.redIAdd=function(e){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},a.prototype.redSub=function(e){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},a.prototype.redISub=function(e){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},a.prototype.redShl=function(e){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},a.prototype.redMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},a.prototype.redIMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},a.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(e){return n(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var w={k256:null,p224:null,p192:null,p25519:null};function _(e,t){this.name=e,this.p=new a(t,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function S(){_.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function E(){_.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function k(){_.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function N(){_.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function j(e){if("string"==typeof e){var t=a._prime(e);this.m=t.p,this.prime=t}else n(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function C(e){j.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}_.prototype._tmp=function(){var e=new a(null);return e.words=Array(Math.ceil(this.n/13)),e},_.prototype.ireduce=function(e){var t,r=e;do this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength();while(t>this.n)var n=t<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},_.prototype.split=function(e,t){e.iushrn(this.n,0,t)},_.prototype.imulK=function(e){return e.imul(this.k)},i(S,_),S.prototype.split=function(e,t){for(var r=4194303,n=Math.min(e.length,9),i=0;i<n;i++)t.words[i]=e.words[i];if(t.length=n,e.length<=9){e.words[0]=0,e.length=1;return}var a=e.words[9];for(i=10,t.words[t.length++]=a&r;i<e.length;i++){var o=0|e.words[i];e.words[i-10]=(o&r)<<4|a>>>22,a=o}a>>>=22,e.words[i-10]=a,0===a&&e.length>10?e.length-=10:e.length-=9},S.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var n=0|e.words[r];t+=977*n,e.words[r]=0x3ffffff&t,t=64*n+(t/0x4000000|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},i(E,_),i(k,_),i(N,_),N.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var n=(0|e.words[r])*19+t,i=0x3ffffff&n;n>>>=26,e.words[r]=i,t=n}return 0!==t&&(e.words[e.length++]=t),e},a._prime=function(e){var t;if(w[e])return w[e];if("k256"===e)t=new S;else if("p224"===e)t=new E;else if("p192"===e)t=new k;else if("p25519"===e)t=new N;else throw Error("Unknown prime "+e);return w[e]=t,t},j.prototype._verify1=function(e){n(0===e.negative,"red works only with positives"),n(e.red,"red works only with red numbers")},j.prototype._verify2=function(e,t){n((e.negative|t.negative)==0,"red works only with positives"),n(e.red&&e.red===t.red,"red works only with red numbers")},j.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):(l(e,e.umod(this.m)._forceRed(this)),e)},j.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},j.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},j.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},j.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return 0>r.cmpn(0)&&r.iadd(this.m),r._forceRed(this)},j.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return 0>r.cmpn(0)&&r.iadd(this.m),r},j.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},j.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},j.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},j.prototype.isqr=function(e){return this.imul(e,e.clone())},j.prototype.sqr=function(e){return this.mul(e,e)},j.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(n(t%2==1),3===t){var r=this.m.add(new a(1)).iushrn(2);return this.pow(e,r)}for(var i=this.m.subn(1),o=0;!i.isZero()&&0===i.andln(1);)o++,i.iushrn(1);n(!i.isZero());var s=new a(1).toRed(this),l=s.redNeg(),c=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new a(2*u*u).toRed(this);0!==this.pow(u,c).cmp(l);)u.redIAdd(l);for(var d=this.pow(u,i),f=this.pow(e,i.addn(1).iushrn(1)),h=this.pow(e,i),p=o;0!==h.cmp(s);){for(var b=h,g=0;0!==b.cmp(s);g++)b=b.redSqr();n(g<p);var m=this.pow(d,new a(1).iushln(p-g-1));f=f.redMul(m),d=m.redSqr(),h=h.redMul(d),p=g}return f},j.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},j.prototype.pow=function(e,t){if(t.isZero())return new a(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=4,n=Array(16);n[0]=new a(1).toRed(this),n[1]=e;for(var i=2;i<n.length;i++)n[i]=this.mul(n[i-1],e);var o=n[0],s=0,l=0,c=t.bitLength()%26;for(0===c&&(c=26),i=t.length-1;i>=0;i--){for(var u=t.words[i],d=c-1;d>=0;d--){var f=u>>d&1;if(o!==n[0]&&(o=this.sqr(o)),0===f&&0===s){l=0;continue}s<<=1,s|=f,(++l===r||0===i&&0===d)&&(o=this.mul(o,n[s]),l=0,s=0)}c=26}return o},j.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},j.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},a.mont=function(e){return new C(e)},i(C,j),C.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},C.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},C.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),a=i;return i.cmp(this.m)>=0?a=i.isub(this.m):0>i.cmpn(0)&&(a=i.iadd(this.m)),a._forceRed(this)},C.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new a(0)._forceRed(this);var r=e.mul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):0>i.cmpn(0)&&(o=i.iadd(this.m)),o._forceRed(this)},C.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e=r.nmd(e),this)},3500:function(e,t,r){var n;function i(e){this.rand=e}if(e.exports=function(e){return n||(n=new i(null)),n.generate(e)},e.exports.Rand=i,i.prototype.generate=function(e){return this._rand(e)},i.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var t=new Uint8Array(e),r=0;r<t.length;r++)t[r]=this.rand.getByte();return t},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?i.prototype._rand=function(e){var t=new Uint8Array(e);return self.crypto.getRandomValues(t),t}:self.msCrypto&&self.msCrypto.getRandomValues?i.prototype._rand=function(e){var t=new Uint8Array(e);return self.msCrypto.getRandomValues(t),t}:"object"==typeof window&&(i.prototype._rand=function(){throw Error("Not implemented yet")});else try{var a=r(6113);if("function"!=typeof a.randomBytes)throw Error("Not supported");i.prototype._rand=function(e){return a.randomBytes(e)}}catch(e){}},1387:function(e,t,r){var n=r(6911).Buffer;function i(e){n.isBuffer(e)||(e=n.from(e));for(var t=e.length/4|0,r=Array(t),i=0;i<t;i++)r[i]=e.readUInt32BE(4*i);return r}function a(e){for(var t=0;t<e.length;e++)e[t]=0}function o(e,t,r,n,i){for(var a,o,s,l,c=r[0],u=r[1],d=r[2],f=r[3],h=e[0]^t[0],p=e[1]^t[1],b=e[2]^t[2],g=e[3]^t[3],m=4,v=1;v<i;v++)a=c[h>>>24]^u[p>>>16&255]^d[b>>>8&255]^f[255&g]^t[m++],o=c[p>>>24]^u[b>>>16&255]^d[g>>>8&255]^f[255&h]^t[m++],s=c[b>>>24]^u[g>>>16&255]^d[h>>>8&255]^f[255&p]^t[m++],l=c[g>>>24]^u[h>>>16&255]^d[p>>>8&255]^f[255&b]^t[m++],h=a,p=o,b=s,g=l;return a=(n[h>>>24]<<24|n[p>>>16&255]<<16|n[b>>>8&255]<<8|n[255&g])^t[m++],o=(n[p>>>24]<<24|n[b>>>16&255]<<16|n[g>>>8&255]<<8|n[255&h])^t[m++],s=(n[b>>>24]<<24|n[g>>>16&255]<<16|n[h>>>8&255]<<8|n[255&p])^t[m++],[a>>>=0,o>>>=0,s>>>=0,l=((n[g>>>24]<<24|n[h>>>16&255]<<16|n[p>>>8&255]<<8|n[255&b])^t[m++])>>>0]}var s=[0,1,2,4,8,16,32,64,128,27,54],l=function(){for(var e=Array(256),t=0;t<256;t++)t<128?e[t]=t<<1:e[t]=t<<1^283;for(var r=[],n=[],i=[[],[],[],[]],a=[[],[],[],[]],o=0,s=0,l=0;l<256;++l){var c=s^s<<1^s<<2^s<<3^s<<4;c=c>>>8^255&c^99,r[o]=c,n[c]=o;var u=e[o],d=e[u],f=e[d],h=257*e[c]^0x1010100*c;i[0][o]=h<<24|h>>>8,i[1][o]=h<<16|h>>>16,i[2][o]=h<<8|h>>>24,i[3][o]=h,h=0x1010101*f^65537*d^257*u^0x1010100*o,a[0][c]=h<<24|h>>>8,a[1][c]=h<<16|h>>>16,a[2][c]=h<<8|h>>>24,a[3][c]=h,0===o?o=s=1:(o=u^e[e[e[f^u]]],s^=e[e[s]])}return{SBOX:r,INV_SBOX:n,SUB_MIX:i,INV_SUB_MIX:a}}();function c(e){this._key=i(e),this._reset()}c.blockSize=16,c.keySize=32,c.prototype.blockSize=c.blockSize,c.prototype.keySize=c.keySize,c.prototype._reset=function(){for(var e=this._key,t=e.length,r=t+6,n=(r+1)*4,i=[],a=0;a<t;a++)i[a]=e[a];for(a=t;a<n;a++){var o=i[a-1];a%t==0?(o=o<<8|o>>>24,o=(l.SBOX[o>>>24]<<24|l.SBOX[o>>>16&255]<<16|l.SBOX[o>>>8&255]<<8|l.SBOX[255&o])^s[a/t|0]<<24):t>6&&a%t==4&&(o=l.SBOX[o>>>24]<<24|l.SBOX[o>>>16&255]<<16|l.SBOX[o>>>8&255]<<8|l.SBOX[255&o]),i[a]=i[a-t]^o}for(var c=[],u=0;u<n;u++){var d=n-u,f=i[d-(u%4?0:4)];u<4||d<=4?c[u]=f:c[u]=l.INV_SUB_MIX[0][l.SBOX[f>>>24]]^l.INV_SUB_MIX[1][l.SBOX[f>>>16&255]]^l.INV_SUB_MIX[2][l.SBOX[f>>>8&255]]^l.INV_SUB_MIX[3][l.SBOX[255&f]]}this._nRounds=r,this._keySchedule=i,this._invKeySchedule=c},c.prototype.encryptBlockRaw=function(e){return o(e=i(e),this._keySchedule,l.SUB_MIX,l.SBOX,this._nRounds)},c.prototype.encryptBlock=function(e){var t=this.encryptBlockRaw(e),r=n.allocUnsafe(16);return r.writeUInt32BE(t[0],0),r.writeUInt32BE(t[1],4),r.writeUInt32BE(t[2],8),r.writeUInt32BE(t[3],12),r},c.prototype.decryptBlock=function(e){var t=(e=i(e))[1];e[1]=e[3],e[3]=t;var r=o(e,this._invKeySchedule,l.INV_SUB_MIX,l.INV_SBOX,this._nRounds),a=n.allocUnsafe(16);return a.writeUInt32BE(r[0],0),a.writeUInt32BE(r[3],4),a.writeUInt32BE(r[2],8),a.writeUInt32BE(r[1],12),a},c.prototype.scrub=function(){a(this._keySchedule),a(this._invKeySchedule),a(this._key)},e.exports.AES=c},6624:function(e,t,r){var n=r(1387),i=r(6911).Buffer,a=r(1043),o=r(3782),s=r(7225),l=r(4734),c=r(598);function u(e,t){var r=0;e.length!==t.length&&r++;for(var n=Math.min(e.length,t.length),i=0;i<n;++i)r+=e[i]^t[i];return r}function d(e,t,r){if(12===t.length)return e._finID=i.concat([t,i.from([0,0,0,1])]),i.concat([t,i.from([0,0,0,2])]);var n=new s(r),a=t.length,o=a%16;n.update(t),o&&(o=16-o,n.update(i.alloc(o,0))),n.update(i.alloc(8,0));var l=8*a,u=i.alloc(8);u.writeUIntBE(l,0,8),n.update(u),e._finID=n.state;var d=i.from(e._finID);return c(d),d}function f(e,t,r,o){a.call(this);var l=i.alloc(4,0);this._cipher=new n.AES(t);var c=this._cipher.encryptBlock(l);this._ghash=new s(c),r=d(this,r,c),this._prev=i.from(r),this._cache=i.allocUnsafe(0),this._secCache=i.allocUnsafe(0),this._decrypt=o,this._alen=0,this._len=0,this._mode=e,this._authTag=null,this._called=!1}o(f,a),f.prototype._update=function(e){if(!this._called&&this._alen){var t=16-this._alen%16;t<16&&(t=i.alloc(t,0),this._ghash.update(t))}this._called=!0;var r=this._mode.encrypt(this,e);return this._decrypt?this._ghash.update(e):this._ghash.update(r),this._len+=e.length,r},f.prototype._final=function(){if(this._decrypt&&!this._authTag)throw Error("Unsupported state or unable to authenticate data");var e=l(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&u(e,this._authTag))throw Error("Unsupported state or unable to authenticate data");this._authTag=e,this._cipher.scrub()},f.prototype.getAuthTag=function(){if(this._decrypt||!i.isBuffer(this._authTag))throw Error("Attempting to get auth tag in unsupported state");return this._authTag},f.prototype.setAuthTag=function(e){if(!this._decrypt)throw Error("Attempting to set auth tag in unsupported state");this._authTag=e},f.prototype.setAAD=function(e){if(this._called)throw Error("Attempting to set AAD in unsupported state");this._ghash.update(e),this._alen+=e.length},e.exports=f},6594:function(e,t,r){var n=r(2),i=r(2598),a=r(5866);function o(){return Object.keys(a)}t.createCipher=t.Cipher=n.createCipher,t.createCipheriv=t.Cipheriv=n.createCipheriv,t.createDecipher=t.Decipher=i.createDecipher,t.createDecipheriv=t.Decipheriv=i.createDecipheriv,t.listCiphers=t.getCiphers=o},2598:function(e,t,r){var n=r(6624),i=r(6911).Buffer,a=r(6370),o=r(126),s=r(1043),l=r(1387),c=r(8368);function u(e,t,r){s.call(this),this._cache=new d,this._last=void 0,this._cipher=new l.AES(t),this._prev=i.from(r),this._mode=e,this._autopadding=!0}function d(){this.cache=i.allocUnsafe(0)}function f(e){var t=e[15];if(t<1||t>16)throw Error("unable to decrypt data");for(var r=-1;++r<t;)if(e[r+(16-t)]!==t)throw Error("unable to decrypt data");if(16!==t)return e.slice(0,16-t)}function h(e,t,r){var s=a[e.toLowerCase()];if(!s)throw TypeError("invalid suite type");if("string"==typeof r&&(r=i.from(r)),"GCM"!==s.mode&&r.length!==s.iv)throw TypeError("invalid iv length "+r.length);if("string"==typeof t&&(t=i.from(t)),t.length!==s.key/8)throw TypeError("invalid key length "+t.length);return"stream"===s.type?new o(s.module,t,r,!0):"auth"===s.type?new n(s.module,t,r,!0):new u(s.module,t,r)}r(3782)(u,s),u.prototype._update=function(e){this._cache.add(e);for(var t,r,n=[];t=this._cache.get(this._autopadding);)r=this._mode.decrypt(this,t),n.push(r);return i.concat(n)},u.prototype._final=function(){var e=this._cache.flush();if(this._autopadding)return f(this._mode.decrypt(this,e));if(e)throw Error("data not multiple of block length")},u.prototype.setAutoPadding=function(e){return this._autopadding=!!e,this},d.prototype.add=function(e){this.cache=i.concat([this.cache,e])},d.prototype.get=function(e){var t;if(e){if(this.cache.length>16)return t=this.cache.slice(0,16),this.cache=this.cache.slice(16),t}else if(this.cache.length>=16)return t=this.cache.slice(0,16),this.cache=this.cache.slice(16),t;return null},d.prototype.flush=function(){if(this.cache.length)return this.cache},t.createDecipher=function(e,t){var r=a[e.toLowerCase()];if(!r)throw TypeError("invalid suite type");var n=c(t,!1,r.key,r.iv);return h(e,n.key,n.iv)},t.createDecipheriv=h},2:function(e,t,r){var n=r(6370),i=r(6624),a=r(6911).Buffer,o=r(126),s=r(1043),l=r(1387),c=r(8368);function u(e,t,r){s.call(this),this._cache=new f,this._cipher=new l.AES(t),this._prev=a.from(r),this._mode=e,this._autopadding=!0}r(3782)(u,s),u.prototype._update=function(e){this._cache.add(e);for(var t,r,n=[];t=this._cache.get();)r=this._mode.encrypt(this,t),n.push(r);return a.concat(n)};var d=a.alloc(16,16);function f(){this.cache=a.allocUnsafe(0)}function h(e,t,r){var s=n[e.toLowerCase()];if(!s)throw TypeError("invalid suite type");if("string"==typeof t&&(t=a.from(t)),t.length!==s.key/8)throw TypeError("invalid key length "+t.length);if("string"==typeof r&&(r=a.from(r)),"GCM"!==s.mode&&r.length!==s.iv)throw TypeError("invalid iv length "+r.length);return"stream"===s.type?new o(s.module,t,r):"auth"===s.type?new i(s.module,t,r):new u(s.module,t,r)}function p(e,t){var r=n[e.toLowerCase()];if(!r)throw TypeError("invalid suite type");var i=c(t,!1,r.key,r.iv);return h(e,i.key,i.iv)}u.prototype._final=function(){var e=this._cache.flush();if(this._autopadding)return e=this._mode.encrypt(this,e),this._cipher.scrub(),e;if(!e.equals(d))throw this._cipher.scrub(),Error("data not multiple of block length")},u.prototype.setAutoPadding=function(e){return this._autopadding=!!e,this},f.prototype.add=function(e){this.cache=a.concat([this.cache,e])},f.prototype.get=function(){if(this.cache.length>15){var e=this.cache.slice(0,16);return this.cache=this.cache.slice(16),e}return null},f.prototype.flush=function(){for(var e=16-this.cache.length,t=a.allocUnsafe(e),r=-1;++r<e;)t.writeUInt8(e,r);return a.concat([this.cache,t])},t.createCipheriv=h,t.createCipher=p},7225:function(e,t,r){var n=r(6911).Buffer,i=n.alloc(16,0);function a(e){return[e.readUInt32BE(0),e.readUInt32BE(4),e.readUInt32BE(8),e.readUInt32BE(12)]}function o(e){var t=n.allocUnsafe(16);return t.writeUInt32BE(e[0]>>>0,0),t.writeUInt32BE(e[1]>>>0,4),t.writeUInt32BE(e[2]>>>0,8),t.writeUInt32BE(e[3]>>>0,12),t}function s(e){this.h=e,this.state=n.alloc(16,0),this.cache=n.allocUnsafe(0)}s.prototype.ghash=function(e){for(var t=-1;++t<e.length;)this.state[t]^=e[t];this._multiply()},s.prototype._multiply=function(){for(var e,t,r=a(this.h),n=[0,0,0,0],i=-1;++i<128;){for((this.state[~~(i/8)]&1<<7-i%8)!=0&&(n[0]^=r[0],n[1]^=r[1],n[2]^=r[2],n[3]^=r[3]),t=(1&r[3])!=0,e=3;e>0;e--)r[e]=r[e]>>>1|(1&r[e-1])<<31;r[0]=r[0]>>>1,t&&(r[0]=-0x1f000000^r[0])}this.state=o(n)},s.prototype.update=function(e){var t;for(this.cache=n.concat([this.cache,e]);this.cache.length>=16;)t=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(t)},s.prototype.final=function(e,t){return this.cache.length&&this.ghash(n.concat([this.cache,i],16)),this.ghash(o([0,e,0,t])),this.state},e.exports=s},598:function(e){e.exports=function(e){for(var t,r=e.length;r--;)if(255===(t=e.readUInt8(r)))e.writeUInt8(0,r);else{t++,e.writeUInt8(t,r);break}}},9825:function(e,t,r){var n=r(4734);t.encrypt=function(e,t){var r=n(t,e._prev);return e._prev=e._cipher.encryptBlock(r),e._prev},t.decrypt=function(e,t){var r=e._prev;return e._prev=t,n(e._cipher.decryptBlock(t),r)}},321:function(e,t,r){var n=r(6911).Buffer,i=r(4734);function a(e,t,r){var a=t.length,o=i(t,e._cache);return e._cache=e._cache.slice(a),e._prev=n.concat([e._prev,r?t:o]),o}t.encrypt=function(e,t,r){for(var i,o=n.allocUnsafe(0);t.length;)if(0===e._cache.length&&(e._cache=e._cipher.encryptBlock(e._prev),e._prev=n.allocUnsafe(0)),e._cache.length<=t.length)i=e._cache.length,o=n.concat([o,a(e,t.slice(0,i),r)]),t=t.slice(i);else{o=n.concat([o,a(e,t,r)]);break}return o}},3147:function(e,t,r){var n=r(6911).Buffer;function i(e,t,r){for(var n,i,o,s=-1,l=8,c=0;++s<l;)n=e._cipher.encryptBlock(e._prev),i=t&1<<7-s?128:0,c+=(128&(o=n[0]^i))>>s%8,e._prev=a(e._prev,r?i:o);return c}function a(e,t){var r=e.length,i=-1,a=n.allocUnsafe(e.length);for(e=n.concat([e,n.from([t])]);++i<r;)a[i]=e[i]<<1|e[i+1]>>7;return a}t.encrypt=function(e,t,r){for(var a=t.length,o=n.allocUnsafe(a),s=-1;++s<a;)o[s]=i(e,t[s],r);return o}},2430:function(e,t,r){var n=r(6911).Buffer;function i(e,t,r){var i=e._cipher.encryptBlock(e._prev)[0]^t;return e._prev=n.concat([e._prev.slice(1),n.from([r?t:i])]),i}t.encrypt=function(e,t,r){for(var a=t.length,o=n.allocUnsafe(a),s=-1;++s<a;)o[s]=i(e,t[s],r);return o}},3361:function(e,t,r){var n=r(4734),i=r(6911).Buffer,a=r(598);function o(e){var t=e._cipher.encryptBlockRaw(e._prev);return a(e._prev),t}var s=16;t.encrypt=function(e,t){var r=Math.ceil(t.length/s),a=e._cache.length;e._cache=i.concat([e._cache,i.allocUnsafe(r*s)]);for(var l=0;l<r;l++){var c=o(e),u=a+l*s;e._cache.writeUInt32BE(c[0],u+0),e._cache.writeUInt32BE(c[1],u+4),e._cache.writeUInt32BE(c[2],u+8),e._cache.writeUInt32BE(c[3],u+12)}var d=e._cache.slice(0,t.length);return e._cache=e._cache.slice(t.length),n(t,d)}},1590:function(e,t){t.encrypt=function(e,t){return e._cipher.encryptBlock(t)},t.decrypt=function(e,t){return e._cipher.decryptBlock(t)}},6370:function(e,t,r){var n={ECB:r(1590),CBC:r(9825),CFB:r(321),CFB8:r(2430),CFB1:r(3147),OFB:r(3412),CTR:r(3361),GCM:r(3361)},i=r(5866);for(var a in i)i[a].module=n[i[a].mode];e.exports=i},3412:function(e,t,r){var i=r(4734);function a(e){return e._prev=e._cipher.encryptBlock(e._prev),e._prev}t.encrypt=function(e,t){for(;e._cache.length<t.length;)e._cache=n.Buffer.concat([e._cache,a(e)]);var r=e._cache.slice(0,t.length);return e._cache=e._cache.slice(t.length),i(t,r)}},126:function(e,t,r){var n=r(1387),i=r(6911).Buffer,a=r(1043);function o(e,t,r,o){a.call(this),this._cipher=new n.AES(t),this._prev=i.from(r),this._cache=i.allocUnsafe(0),this._secCache=i.allocUnsafe(0),this._decrypt=o,this._mode=e}r(3782)(o,a),o.prototype._update=function(e){return this._mode.encrypt(this,e,this._decrypt)},o.prototype._final=function(){this._cipher.scrub()},e.exports=o},8996:function(e,t,r){var n=r(5238),i=r(6594),a=r(6370),o=r(6280),s=r(8368);function l(e,t){if(a[e=e.toLowerCase()])r=a[e].key,n=a[e].iv;else if(o[e])r=8*o[e].key,n=o[e].iv;else throw TypeError("invalid suite type");var r,n,i=s(t,!1,r,n);return u(e,i.key,i.iv)}function c(e,t,r){if(a[e=e.toLowerCase()])return i.createCipheriv(e,t,r);if(o[e])return new n({key:t,iv:r,mode:e});throw TypeError("invalid suite type")}function u(e,t,r){if(a[e=e.toLowerCase()])return i.createDecipheriv(e,t,r);if(o[e])return new n({key:t,iv:r,mode:e,decrypt:!0});throw TypeError("invalid suite type")}function d(){return Object.keys(o).concat(i.getCiphers())}t.createCipher=t.Cipher=function(e,t){if(a[e=e.toLowerCase()])r=a[e].key,n=a[e].iv;else if(o[e])r=8*o[e].key,n=o[e].iv;else throw TypeError("invalid suite type");var r,n,i=s(t,!1,r,n);return c(e,i.key,i.iv)},t.createCipheriv=t.Cipheriv=c,t.createDecipher=t.Decipher=l,t.createDecipheriv=t.Decipheriv=u,t.listCiphers=t.getCiphers=d},5238:function(e,t,r){var n=r(1043),i=r(9536),a=r(3782),o=r(6911).Buffer,s={"des-ede3-cbc":i.CBC.instantiate(i.EDE),"des-ede3":i.EDE,"des-ede-cbc":i.CBC.instantiate(i.EDE),"des-ede":i.EDE,"des-cbc":i.CBC.instantiate(i.DES),"des-ecb":i.DES};function l(e){n.call(this);var t,r=e.mode.toLowerCase(),i=s[r];t=e.decrypt?"decrypt":"encrypt";var a=e.key;o.isBuffer(a)||(a=o.from(a)),("des-ede"===r||"des-ede-cbc"===r)&&(a=o.concat([a,a.slice(0,8)]));var l=e.iv;o.isBuffer(l)||(l=o.from(l)),this._des=i.create({key:a,iv:l,type:t})}s.des=s["des-cbc"],s.des3=s["des-ede3-cbc"],e.exports=l,a(l,n),l.prototype._update=function(e){return o.from(this._des.update(e))},l.prototype._final=function(){return o.from(this._des.final())}},6280:function(e,t){t["des-ecb"]={key:8,iv:0},t["des-cbc"]=t.des={key:8,iv:8},t["des-ede3-cbc"]=t.des3={key:24,iv:8},t["des-ede3"]={key:24,iv:0},t["des-ede-cbc"]={key:16,iv:8},t["des-ede"]={key:16,iv:0}},7166:function(e,t,r){var i=r(711),a=r(7223);function o(e){var t=l(e);return{blinder:t.toRed(i.mont(e.modulus)).redPow(new i(e.publicExponent)).fromRed(),unblinder:t.invm(e.modulus)}}function s(e,t){var r=o(t),a=t.modulus.byteLength();i.mont(t.modulus);var s=new i(e).mul(r.blinder).umod(t.modulus),l=s.toRed(i.mont(t.prime1)),c=s.toRed(i.mont(t.prime2)),u=t.coefficient,d=t.prime1,f=t.prime2,h=l.redPow(t.exponent1),p=c.redPow(t.exponent2);h=h.fromRed(),p=p.fromRed();var b=h.isub(p).imul(u).umod(d);return b.imul(f),p.iadd(b),new n.Buffer(p.imul(r.unblinder).umod(t.modulus).toArray(!1,a))}function l(e){for(var t=e.modulus.byteLength(),r=new i(a(t));r.cmp(e.modulus)>=0||!r.umod(e.prime1)||!r.umod(e.prime2);)r=new i(a(t));return r}e.exports=s,s.getr=l},9276:function(e,t,r){e.exports=r(2908)},4078:function(e,t,r){var n=r(6911).Buffer,i=r(9739),a=r(3726),o=r(3782),s=r(9807),l=r(4013),c=r(2908);function u(e){a.Writable.call(this);var t=c[e];if(!t)throw Error("Unknown message digest");this._hashType=t.hash,this._hash=i(t.hash),this._tag=t.id,this._signType=t.sign}function d(e){a.Writable.call(this);var t=c[e];if(!t)throw Error("Unknown message digest");this._hash=i(t.hash),this._tag=t.id,this._signType=t.sign}function f(e){return new u(e)}function h(e){return new d(e)}Object.keys(c).forEach(function(e){c[e].id=n.from(c[e].id,"hex"),c[e.toLowerCase()]=c[e]}),o(u,a.Writable),u.prototype._write=function(e,t,r){this._hash.update(e),r()},u.prototype.update=function(e,t){return"string"==typeof e&&(e=n.from(e,t)),this._hash.update(e),this},u.prototype.sign=function(e,t){this.end();var r=s(this._hash.digest(),e,this._hashType,this._signType,this._tag);return t?r.toString(t):r},o(d,a.Writable),d.prototype._write=function(e,t,r){this._hash.update(e),r()},d.prototype.update=function(e,t){return"string"==typeof e&&(e=n.from(e,t)),this._hash.update(e),this},d.prototype.verify=function(e,t,r){return"string"==typeof t&&(t=n.from(t,r)),this.end(),l(t,this._hash.digest(),e,this._signType,this._tag)},e.exports={Sign:f,Verify:h,createSign:f,createVerify:h}},9807:function(e,t,r){var n=r(6911).Buffer,i=r(4873),a=r(7166),o=r(949).ec,s=r(1670),l=r(9902),c=r(9267);function u(e,t){var r=c[t.curve.join(".")];if(!r)throw Error("unknown curve "+t.curve.join("."));var i=new o(r).keyFromPrivate(t.privateKey).sign(e);return n.from(i.toDER())}function d(e,t,r){for(var n,i=t.params.priv_key,a=t.params.p,o=t.params.q,l=t.params.g,c=new s(0),u=p(e,o).mod(o),d=!1,b=h(i,o,e,r);!1===d;)c=m(l,n=g(o,b,r),a,o),0===(d=n.invm(o).imul(u.add(i.mul(c))).mod(o)).cmpn(0)&&(d=!1,c=new s(0));return f(c,d)}function f(e,t){e=e.toArray(),t=t.toArray(),128&e[0]&&(e=[0].concat(e)),128&t[0]&&(t=[0].concat(t));var r=[48,e.length+t.length+4,2,e.length];return r=r.concat(e,[2,t.length],t),n.from(r)}function h(e,t,r,a){if((e=n.from(e.toArray())).length<t.byteLength()){var o=n.alloc(t.byteLength()-e.length);e=n.concat([o,e])}var s=r.length,l=b(r,t),c=n.alloc(s);c.fill(1);var u=n.alloc(s);return u=i(a,u).update(c).update(n.from([0])).update(e).update(l).digest(),c=i(a,u).update(c).digest(),u=i(a,u).update(c).update(n.from([1])).update(e).update(l).digest(),c=i(a,u).update(c).digest(),{k:u,v:c}}function p(e,t){var r=new s(e),n=(e.length<<3)-t.bitLength();return n>0&&r.ishrn(n),r}function b(e,t){e=(e=p(e,t)).mod(t);var r=n.from(e.toArray());if(r.length<t.byteLength()){var i=n.alloc(t.byteLength()-r.length);r=n.concat([i,r])}return r}function g(e,t,r){var a,o;do{for(a=n.alloc(0);8*a.length<e.bitLength();)t.v=i(r,t.k).update(t.v).digest(),a=n.concat([a,t.v]);o=p(a,e),t.k=i(r,t.k).update(t.v).update(n.from([0])).digest(),t.v=i(r,t.k).update(t.v).digest()}while(-1!==o.cmp(e))return o}function m(e,t,r,n){return e.toRed(s.mont(r)).redPow(t).fromRed().mod(n)}e.exports=function(e,t,r,i,o){var s=l(t);if(s.curve){if("ecdsa"!==i&&"ecdsa/rsa"!==i)throw Error("wrong private key type");return u(e,s)}if("dsa"===s.type){if("dsa"!==i)throw Error("wrong private key type");return d(e,s,r)}if("rsa"!==i&&"ecdsa/rsa"!==i)throw Error("wrong private key type");e=n.concat([o,e]);for(var c=s.modulus.byteLength(),f=[0,1];e.length+f.length+1<c;)f.push(255);f.push(0);for(var h=-1;++h<e.length;)f.push(e[h]);return a(f,s)},e.exports.getKey=h,e.exports.makeKey=g},4013:function(e,t,r){var n=r(6911).Buffer,i=r(1670),a=r(949).ec,o=r(9902),s=r(9267);function l(e,t,r){var n=s[r.data.algorithm.curve.join(".")];if(!n)throw Error("unknown curve "+r.data.algorithm.curve.join("."));var i=new a(n),o=r.data.subjectPrivateKey.data;return i.verify(t,e,o)}function c(e,t,r){var n=r.data.p,a=r.data.q,s=r.data.g,l=r.data.pub_key,c=o.signature.decode(e,"der"),d=c.s,f=c.r;u(d,a),u(f,a);var h=i.mont(n),p=d.invm(a);return 0===s.toRed(h).redPow(new i(t).mul(p).mod(a)).fromRed().mul(l.toRed(h).redPow(f.mul(p).mod(a)).fromRed()).mod(n).mod(a).cmp(f)}function u(e,t){if(0>=e.cmpn(0)||e.cmp(t)>=t)throw Error("invalid sig")}e.exports=function(e,t,r,a,s){var u=o(r);if("ec"===u.type){if("ecdsa"!==a&&"ecdsa/rsa"!==a)throw Error("wrong public key type");return l(e,t,u)}if("dsa"===u.type){if("dsa"!==a)throw Error("wrong public key type");return c(e,t,u)}if("rsa"!==a&&"ecdsa/rsa"!==a)throw Error("wrong public key type");t=n.concat([s,t]);for(var d=u.modulus.byteLength(),f=[1],h=0;t.length+f.length+2<d;)f.push(255),h++;f.push(0);for(var p=-1;++p<t.length;)f.push(t[p]);f=n.from(f);var b=i.mont(u.modulus);e=(e=new i(e).toRed(b)).redPow(new i(u.publicExponent));var g=+(h<8);for(d=Math.min((e=n.from(e.fromRed().toArray())).length,f.length),e.length!==f.length&&(g=1),p=-1;++p<d;)g|=e[p]^f[p];return 0===g}},4734:function(e){e.exports=function(e,t){for(var r=Math.min(e.length,t.length),i=new n.Buffer(r),a=0;a<r;++a)i[a]=e[a]^t[a];return i}},1043:function(e,t,r){var n=r(6911).Buffer,i=r(2781).Transform,a=r(1576).StringDecoder;function o(e){i.call(this),this.hashMode="string"==typeof e,this.hashMode?this[e]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}r(3782)(o,i),o.prototype.update=function(e,t,r){"string"==typeof e&&(e=n.from(e,t));var i=this._update(e);return this.hashMode?this:(r&&(i=this._toString(i,r)),i)},o.prototype.setAutoPadding=function(){},o.prototype.getAuthTag=function(){throw Error("trying to get auth tag in unsupported state")},o.prototype.setAuthTag=function(){throw Error("trying to set auth tag in unsupported state")},o.prototype.setAAD=function(){throw Error("trying to set aad in unsupported state")},o.prototype._transform=function(e,t,r){var n;try{this.hashMode?this._update(e):this.push(this._update(e))}catch(e){n=e}finally{r(n)}},o.prototype._flush=function(e){var t;try{this.push(this.__final())}catch(e){t=e}e(t)},o.prototype._finalOrDigest=function(e){var t=this.__final()||n.alloc(0);return e&&(t=this._toString(t,e,!0)),t},o.prototype._toString=function(e,t,r){if(this._decoder||(this._decoder=new a(t),this._encoding=t),this._encoding!==t)throw Error("can't switch encodings");var n=this._decoder.write(e);return r&&(n+=this._decoder.end()),n},e.exports=o},9942:function(e,t,r){var i=r(949),a=r(711);e.exports=function(e){return new s(e)};var o={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};function s(e){this.curveType=o[e],this.curveType||(this.curveType={name:e}),this.curve=new i.ec(this.curveType.name),this.keys=void 0}function l(e,t,r){Array.isArray(e)||(e=e.toArray());var i=new n.Buffer(e);if(r&&i.length<r){var a=new n.Buffer(r-i.length);a.fill(0),i=n.Buffer.concat([a,i])}return t?i.toString(t):i}o.p224=o.secp224r1,o.p256=o.secp256r1=o.prime256v1,o.p192=o.secp192r1=o.prime192v1,o.p384=o.secp384r1,o.p521=o.secp521r1,s.prototype.generateKeys=function(e,t){return this.keys=this.curve.genKeyPair(),this.getPublicKey(e,t)},s.prototype.computeSecret=function(e,t,r){return t=t||"utf8",n.Buffer.isBuffer(e)||(e=new n.Buffer(e,t)),l(this.curve.keyFromPublic(e).getPublic().mul(this.keys.getPrivate()).getX(),r,this.curveType.byteLength)},s.prototype.getPublicKey=function(e,t){var r=this.keys.getPublic("compressed"===t,!0);return"hybrid"===t&&(r[r.length-1]%2?r[0]=7:r[0]=6),l(r,e)},s.prototype.getPrivateKey=function(e){return l(this.keys.getPrivate(),e)},s.prototype.setPublicKey=function(e,t){return t=t||"utf8",n.Buffer.isBuffer(e)||(e=new n.Buffer(e,t)),this.keys._importPublic(e),this},s.prototype.setPrivateKey=function(e,t){t=t||"utf8",n.Buffer.isBuffer(e)||(e=new n.Buffer(e,t));var r=new a(e);return r=r.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(r),this}},9739:function(e,t,r){"use strict";var n=r(3782),i=r(3533),a=r(3225),o=r(4371),s=r(1043);function l(e){s.call(this,"digest"),this._hash=e}n(l,s),l.prototype._update=function(e){this._hash.update(e)},l.prototype._final=function(){return this._hash.digest()},e.exports=function(e){return"md5"===(e=e.toLowerCase())?new i:"rmd160"===e||"ripemd160"===e?new a:new l(o(e))}},450:function(e,t,r){var n=r(3533);e.exports=function(e){return(new n).update(e).digest()}},4873:function(e,t,r){"use strict";var n=r(3782),i=r(8119),a=r(1043),o=r(6911).Buffer,s=r(450),l=r(3225),c=r(4371),u=o.alloc(128);function d(e,t){a.call(this,"digest"),"string"==typeof t&&(t=o.from(t));var r="sha512"===e||"sha384"===e?128:64;this._alg=e,this._key=t,t.length>r?t=("rmd160"===e?new l:c(e)).update(t).digest():t.length<r&&(t=o.concat([t,u],r));for(var n=this._ipad=o.allocUnsafe(r),i=this._opad=o.allocUnsafe(r),s=0;s<r;s++)n[s]=54^t[s],i[s]=92^t[s];this._hash="rmd160"===e?new l:c(e),this._hash.update(n)}n(d,a),d.prototype._update=function(e){this._hash.update(e)},d.prototype._final=function(){var e=this._hash.digest();return("rmd160"===this._alg?new l:c(this._alg)).update(this._opad).update(e).digest()},e.exports=function(e,t){return"rmd160"===(e=e.toLowerCase())||"ripemd160"===e?new d("rmd160",t):"md5"===e?new i(s,t):new d(e,t)}},8119:function(e,t,r){"use strict";var n=r(3782),i=r(6911).Buffer,a=r(1043),o=i.alloc(128),s=64;function l(e,t){a.call(this,"digest"),"string"==typeof t&&(t=i.from(t)),this._alg=e,this._key=t,t.length>s?t=e(t):t.length<s&&(t=i.concat([t,o],s));for(var r=this._ipad=i.allocUnsafe(s),n=this._opad=i.allocUnsafe(s),l=0;l<s;l++)r[l]=54^t[l],n[l]=92^t[l];this._hash=[r]}n(l,a),l.prototype._update=function(e){this._hash.push(e)},l.prototype._final=function(){var e=this._alg(i.concat(this._hash));return this._alg(i.concat([this._opad,e]))},e.exports=l},9536:function(e,t,r){"use strict";t.utils=r(5334),t.Cipher=r(9876),t.DES=r(1016),t.CBC=r(8641),t.EDE=r(6159)},8641:function(e,t,r){"use strict";var n=r(3523),i=r(3782),a={};function o(e){n.equal(e.length,8,"Invalid IV length"),this.iv=Array(8);for(var t=0;t<this.iv.length;t++)this.iv[t]=e[t]}t.instantiate=function(e){function t(t){e.call(this,t),this._cbcInit()}i(t,e);for(var r=Object.keys(a),n=0;n<r.length;n++){var o=r[n];t.prototype[o]=a[o]}return t.create=function(e){return new t(e)},t},a._cbcInit=function(){var e=new o(this.options.iv);this._cbcState=e},a._update=function(e,t,r,n){var i=this._cbcState,a=this.constructor.super_.prototype,o=i.iv;if("encrypt"===this.type){for(var s=0;s<this.blockSize;s++)o[s]^=e[t+s];a._update.call(this,o,0,r,n);for(var s=0;s<this.blockSize;s++)o[s]=r[n+s]}else{a._update.call(this,e,t,r,n);for(var s=0;s<this.blockSize;s++)r[n+s]^=o[s];for(var s=0;s<this.blockSize;s++)o[s]=e[t+s]}}},9876:function(e,t,r){"use strict";var n=r(3523);function i(e){this.options=e,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=Array(this.blockSize),this.bufferOff=0}e.exports=i,i.prototype._init=function(){},i.prototype.update=function(e){return 0===e.length?[]:"decrypt"===this.type?this._updateDecrypt(e):this._updateEncrypt(e)},i.prototype._buffer=function(e,t){for(var r=Math.min(this.buffer.length-this.bufferOff,e.length-t),n=0;n<r;n++)this.buffer[this.bufferOff+n]=e[t+n];return this.bufferOff+=r,r},i.prototype._flushBuffer=function(e,t){return this._update(this.buffer,0,e,t),this.bufferOff=0,this.blockSize},i.prototype._updateEncrypt=function(e){var t=0,r=0,n=Array(((this.bufferOff+e.length)/this.blockSize|0)*this.blockSize);0!==this.bufferOff&&(t+=this._buffer(e,t),this.bufferOff===this.buffer.length&&(r+=this._flushBuffer(n,r)));for(var i=e.length-(e.length-t)%this.blockSize;t<i;t+=this.blockSize)this._update(e,t,n,r),r+=this.blockSize;for(;t<e.length;t++,this.bufferOff++)this.buffer[this.bufferOff]=e[t];return n},i.prototype._updateDecrypt=function(e){for(var t=0,r=0,n=Math.ceil((this.bufferOff+e.length)/this.blockSize)-1,i=Array(n*this.blockSize);n>0;n--)t+=this._buffer(e,t),r+=this._flushBuffer(i,r);return t+=this._buffer(e,t),i},i.prototype.final=function(e){var t,r;return(e&&(t=this.update(e)),r="encrypt"===this.type?this._finalEncrypt():this._finalDecrypt(),t)?t.concat(r):r},i.prototype._pad=function(e,t){if(0===t)return!1;for(;t<e.length;)e[t++]=0;return!0},i.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var e=Array(this.blockSize);return this._update(this.buffer,0,e,0),e},i.prototype._unpad=function(e){return e},i.prototype._finalDecrypt=function(){n.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var e=Array(this.blockSize);return this._flushBuffer(e,0),this._unpad(e)}},1016:function(e,t,r){"use strict";var n=r(3523),i=r(3782),a=r(5334),o=r(9876);function s(){this.tmp=[,,],this.keys=null}function l(e){o.call(this,e);var t=new s;this._desState=t,this.deriveKeys(t,e.key)}i(l,o),e.exports=l,l.create=function(e){return new l(e)};var c=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];l.prototype.deriveKeys=function(e,t){e.keys=Array(32),n.equal(t.length,this.blockSize,"Invalid key length");var r=a.readUInt32BE(t,0),i=a.readUInt32BE(t,4);a.pc1(r,i,e.tmp,0),r=e.tmp[0],i=e.tmp[1];for(var o=0;o<e.keys.length;o+=2){var s=c[o>>>1];r=a.r28shl(r,s),i=a.r28shl(i,s),a.pc2(r,i,e.keys,o)}},l.prototype._update=function(e,t,r,n){var i=this._desState,o=a.readUInt32BE(e,t),s=a.readUInt32BE(e,t+4);a.ip(o,s,i.tmp,0),o=i.tmp[0],s=i.tmp[1],"encrypt"===this.type?this._encrypt(i,o,s,i.tmp,0):this._decrypt(i,o,s,i.tmp,0),o=i.tmp[0],s=i.tmp[1],a.writeUInt32BE(r,o,n),a.writeUInt32BE(r,s,n+4)},l.prototype._pad=function(e,t){for(var r=e.length-t,n=t;n<e.length;n++)e[n]=r;return!0},l.prototype._unpad=function(e){for(var t=e[e.length-1],r=e.length-t;r<e.length;r++)n.equal(e[r],t);return e.slice(0,e.length-t)},l.prototype._encrypt=function(e,t,r,n,i){for(var o=t,s=r,l=0;l<e.keys.length;l+=2){var c=e.keys[l],u=e.keys[l+1];a.expand(s,e.tmp,0),c^=e.tmp[0],u^=e.tmp[1];var d=a.substitute(c,u),f=a.permute(d),h=s;s=(o^f)>>>0,o=h}a.rip(s,o,n,i)},l.prototype._decrypt=function(e,t,r,n,i){for(var o=r,s=t,l=e.keys.length-2;l>=0;l-=2){var c=e.keys[l],u=e.keys[l+1];a.expand(o,e.tmp,0),c^=e.tmp[0],u^=e.tmp[1];var d=a.substitute(c,u),f=a.permute(d),h=o;o=(s^f)>>>0,s=h}a.rip(o,s,n,i)}},6159:function(e,t,r){"use strict";var n=r(3523),i=r(3782),a=r(9876),o=r(1016);function s(e,t){n.equal(t.length,24,"Invalid key length");var r=t.slice(0,8),i=t.slice(8,16),a=t.slice(16,24);"encrypt"===e?this.ciphers=[o.create({type:"encrypt",key:r}),o.create({type:"decrypt",key:i}),o.create({type:"encrypt",key:a})]:this.ciphers=[o.create({type:"decrypt",key:a}),o.create({type:"encrypt",key:i}),o.create({type:"decrypt",key:r})]}function l(e){a.call(this,e);var t=new s(this.type,this.options.key);this._edeState=t}i(l,a),e.exports=l,l.create=function(e){return new l(e)},l.prototype._update=function(e,t,r,n){var i=this._edeState;i.ciphers[0]._update(e,t,r,n),i.ciphers[1]._update(r,n,r,n),i.ciphers[2]._update(r,n,r,n)},l.prototype._pad=o.prototype._pad,l.prototype._unpad=o.prototype._unpad},5334:function(e,t){"use strict";t.readUInt32BE=function(e,t){return(e[0+t]<<24|e[1+t]<<16|e[2+t]<<8|e[3+t])>>>0},t.writeUInt32BE=function(e,t,r){e[0+r]=t>>>24,e[1+r]=t>>>16&255,e[2+r]=t>>>8&255,e[3+r]=255&t},t.ip=function(e,t,r,n){for(var i=0,a=0,o=6;o>=0;o-=2){for(var s=0;s<=24;s+=8)i<<=1,i|=t>>>s+o&1;for(var s=0;s<=24;s+=8)i<<=1,i|=e>>>s+o&1}for(var o=6;o>=0;o-=2){for(var s=1;s<=25;s+=8)a<<=1,a|=t>>>s+o&1;for(var s=1;s<=25;s+=8)a<<=1,a|=e>>>s+o&1}r[n+0]=i>>>0,r[n+1]=a>>>0},t.rip=function(e,t,r,n){for(var i=0,a=0,o=0;o<4;o++)for(var s=24;s>=0;s-=8)i<<=1,i|=t>>>s+o&1,i<<=1,i|=e>>>s+o&1;for(var o=4;o<8;o++)for(var s=24;s>=0;s-=8)a<<=1,a|=t>>>s+o&1,a<<=1,a|=e>>>s+o&1;r[n+0]=i>>>0,r[n+1]=a>>>0},t.pc1=function(e,t,r,n){for(var i=0,a=0,o=7;o>=5;o--){for(var s=0;s<=24;s+=8)i<<=1,i|=t>>s+o&1;for(var s=0;s<=24;s+=8)i<<=1,i|=e>>s+o&1}for(var s=0;s<=24;s+=8)i<<=1,i|=t>>s+o&1;for(var o=1;o<=3;o++){for(var s=0;s<=24;s+=8)a<<=1,a|=t>>s+o&1;for(var s=0;s<=24;s+=8)a<<=1,a|=e>>s+o&1}for(var s=0;s<=24;s+=8)a<<=1,a|=e>>s+o&1;r[n+0]=i>>>0,r[n+1]=a>>>0},t.r28shl=function(e,t){return e<<t&0xfffffff|e>>>28-t};var r=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];t.pc2=function(e,t,n,i){for(var a=0,o=0,s=r.length>>>1,l=0;l<s;l++)a<<=1,a|=e>>>r[l]&1;for(var l=s;l<r.length;l++)o<<=1,o|=t>>>r[l]&1;n[i+0]=a>>>0,n[i+1]=o>>>0},t.expand=function(e,t,r){var n=0,i=0;n=(1&e)<<5|e>>>27;for(var a=23;a>=15;a-=4)n<<=6,n|=e>>>a&63;for(var a=11;a>=3;a-=4)i|=e>>>a&63,i<<=6;i|=(31&e)<<1|e>>>31,t[r+0]=n>>>0,t[r+1]=i>>>0};var n=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];t.substitute=function(e,t){for(var r=0,i=0;i<4;i++){var a=e>>>18-6*i&63,o=n[64*i+a];r<<=4,r|=o}for(var i=0;i<4;i++){var a=t>>>18-6*i&63,o=n[256+64*i+a];r<<=4,r|=o}return r>>>0};var i=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];t.permute=function(e){for(var t=0,r=0;r<i.length;r++)t<<=1,t|=e>>>i[r]&1;return t>>>0},t.padSplit=function(e,t,r){for(var n=e.toString(2);n.length<t;)n="0"+n;for(var i=[],a=0;a<t;a+=r)i.push(n.slice(a,a+r));return i.join(" ")}},6587:function(e,t,r){var i=r(296),a=r(7992),o=r(373),s={binary:!0,hex:!0,base64:!0};function l(e,t,r,a){return n.Buffer.isBuffer(t)||void 0===s[t]?l(e,"binary",t,r):(t=t||"binary",a=a||"binary",r=r||new n.Buffer([2]),n.Buffer.isBuffer(r)||(r=new n.Buffer(r,a)),"number"==typeof e)?new o(i(e,r),r,!0):(n.Buffer.isBuffer(e)||(e=new n.Buffer(e,t)),new o(e,r,!0))}t.DiffieHellmanGroup=t.createDiffieHellmanGroup=t.getDiffieHellman=function(e){return new o(new n.Buffer(a[e].prime,"hex"),new n.Buffer(a[e].gen,"hex"))},t.createDiffieHellman=t.DiffieHellman=l},373:function(e,t,r){var i=r(711),a=new(r(1354)),o=new i(24),s=new i(11),l=new i(10),c=new i(3),u=new i(7),d=r(296),f=r(7223);function h(e,t){return t=t||"utf8",n.Buffer.isBuffer(e)||(e=new n.Buffer(e,t)),this._pub=new i(e),this}function p(e,t){return t=t||"utf8",n.Buffer.isBuffer(e)||(e=new n.Buffer(e,t)),this._priv=new i(e),this}e.exports=m;var b={};function g(e,t){var r,n=t.toString("hex"),i=[n,e.toString(16)].join("_");if(i in b)return b[i];var f=0;if(e.isEven()||!d.simpleSieve||!d.fermatTest(e)||!a.test(e))return f+=1,"02"===n||"05"===n?f+=8:f+=4,b[i]=f,f;switch(!a.test(e.shrn(1))&&(f+=2),n){case"02":e.mod(o).cmp(s)&&(f+=8);break;case"05":(r=e.mod(l)).cmp(c)&&r.cmp(u)&&(f+=8);break;default:f+=4}return b[i]=f,f}function m(e,t,r){this.setGenerator(t),this.__prime=new i(e),this._prime=i.mont(this.__prime),this._primeLen=e.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,r?(this.setPublicKey=h,this.setPrivateKey=p):this._primeCode=8}function v(e,t){var r=new n.Buffer(e.toArray());return t?r.toString(t):r}Object.defineProperty(m.prototype,"verifyError",{enumerable:!0,get:function(){return"number"!=typeof this._primeCode&&(this._primeCode=g(this.__prime,this.__gen)),this._primeCode}}),m.prototype.generateKeys=function(){return this._priv||(this._priv=new i(f(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},m.prototype.computeSecret=function(e){var t=(e=(e=new i(e)).toRed(this._prime)).redPow(this._priv).fromRed(),r=new n.Buffer(t.toArray()),a=this.getPrime();if(r.length<a.length){var o=new n.Buffer(a.length-r.length);o.fill(0),r=n.Buffer.concat([o,r])}return r},m.prototype.getPublicKey=function(e){return v(this._pub,e)},m.prototype.getPrivateKey=function(e){return v(this._priv,e)},m.prototype.getPrime=function(e){return v(this.__prime,e)},m.prototype.getGenerator=function(e){return v(this._gen,e)},m.prototype.setGenerator=function(e,t){return t=t||"utf8",n.Buffer.isBuffer(e)||(e=new n.Buffer(e,t)),this.__gen=e,this._gen=new i(e),this}},296:function(e,t,r){var n=r(7223);e.exports=v,v.simpleSieve=g,v.fermatTest=m;var i=r(711),a=new i(24),o=new(r(1354)),s=new i(1),l=new i(2),c=new i(5);new i(16),new i(8);var u=new i(10),d=new i(3);new i(7);var f=new i(11),h=new i(4);new i(12);var p=null;function b(){if(null!==p)return p;var e=1048576,t=[];t[0]=2;for(var r=1,n=3;n<e;n+=2){for(var i=Math.ceil(Math.sqrt(n)),a=0;a<r&&t[a]<=i&&n%t[a]!=0;a++);r!==a&&t[a]<=i||(t[r++]=n)}return p=t,t}function g(e){for(var t=b(),r=0;r<t.length;r++)if(0===e.modn(t[r]))if(0!==e.cmpn(t[r]))return!1;else break;return!0}function m(e){var t=i.mont(e);return 0===l.toRed(t).redPow(e.subn(1)).fromRed().cmpn(1)}function v(e,t){var r,p;if(e<16)if(2===t||5===t)return new i([140,123]);else return new i([140,39]);for(t=new i(t);;){for(r=new i(n(Math.ceil(e/8)));r.bitLength()>e;)r.ishrn(1);if(r.isEven()&&r.iadd(s),r.testn(1)||r.iadd(l),t.cmp(l)){if(!t.cmp(c))for(;r.mod(u).cmp(d);)r.iadd(h)}else for(;r.mod(a).cmp(f);)r.iadd(h);if(g(p=r.shrn(1))&&g(r)&&m(p)&&m(r)&&o.test(p)&&o.test(r))return r}}},949:function(e,t,r){"use strict";var n=t;n.version=r(2531).i8,n.utils=r(4401),n.rand=r(3500),n.curve=r(9359),n.curves=r(6226),n.ec=r(4088),n.eddsa=r(8511)},2727:function(e,t,r){"use strict";var n=r(711),i=r(4401),a=i.getNAF,o=i.getJSF,s=i.assert;function l(e,t){this.type=e,this.p=new n(t.p,16),this.red=t.prime?n.red(t.prime):n.mont(this.p),this.zero=new n(0).toRed(this.red),this.one=new n(1).toRed(this.red),this.two=new n(2).toRed(this.red),this.n=t.n&&new n(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=[,,,,],this._wnafT2=[,,,,],this._wnafT3=[,,,,],this._wnafT4=[,,,,],this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function c(e,t){this.curve=e,this.type=t,this.precomputed=null}e.exports=l,l.prototype.point=function(){throw Error("Not implemented")},l.prototype.validate=function(){throw Error("Not implemented")},l.prototype._fixedNafMul=function(e,t){s(e.precomputed);var r=e._getDoubles(),n=a(t,1,this._bitLength),i=(1<<r.step+1)-(r.step%2==0?2:1);i/=3;for(var o=[],l=0;l<n.length;l+=r.step){for(var c=0,t=l+r.step-1;t>=l;t--)c=(c<<1)+n[t];o.push(c)}for(var u=this.jpoint(null,null,null),d=this.jpoint(null,null,null),f=i;f>0;f--){for(var l=0;l<o.length;l++){var c=o[l];c===f?d=d.mixedAdd(r.points[l]):c===-f&&(d=d.mixedAdd(r.points[l].neg()))}u=u.add(d)}return u.toP()},l.prototype._wnafMul=function(e,t){var r=4,n=e._getNAFPoints(r);r=n.wnd;for(var i=n.points,o=a(t,r,this._bitLength),l=this.jpoint(null,null,null),c=o.length-1;c>=0;c--){for(var t=0;c>=0&&0===o[c];c--)t++;if(c>=0&&t++,l=l.dblp(t),c<0)break;var u=o[c];s(0!==u),l="affine"===e.type?u>0?l.mixedAdd(i[u-1>>1]):l.mixedAdd(i[-u-1>>1].neg()):u>0?l.add(i[u-1>>1]):l.add(i[-u-1>>1].neg())}return"affine"===e.type?l.toP():l},l.prototype._wnafMulAdd=function(e,t,r,n,i){for(var s=this._wnafT1,l=this._wnafT2,c=this._wnafT3,u=0,d=0;d<n;d++){var f=t[d],h=f._getNAFPoints(e);s[d]=h.wnd,l[d]=h.points}for(var d=n-1;d>=1;d-=2){var p=d-1,b=d;if(1!==s[p]||1!==s[b]){c[p]=a(r[p],s[p],this._bitLength),c[b]=a(r[b],s[b],this._bitLength),u=Math.max(c[p].length,u),u=Math.max(c[b].length,u);continue}var g=[t[p],null,null,t[b]];0===t[p].y.cmp(t[b].y)?(g[1]=t[p].add(t[b]),g[2]=t[p].toJ().mixedAdd(t[b].neg())):0===t[p].y.cmp(t[b].y.redNeg())?(g[1]=t[p].toJ().mixedAdd(t[b]),g[2]=t[p].add(t[b].neg())):(g[1]=t[p].toJ().mixedAdd(t[b]),g[2]=t[p].toJ().mixedAdd(t[b].neg()));var m=[-3,-1,-5,-7,0,7,5,1,3],v=o(r[p],r[b]);u=Math.max(v[0].length,u),c[p]=Array(u),c[b]=Array(u);for(var y=0;y<u;y++){var x=0|v[0][y],w=0|v[1][y];c[p][y]=m[(x+1)*3+(w+1)],c[b][y]=0,l[p]=g}}for(var _=this.jpoint(null,null,null),S=this._wnafT4,d=u;d>=0;d--){for(var E=0;d>=0;){for(var k=!0,y=0;y<n;y++)S[y]=0|c[y][d],0!==S[y]&&(k=!1);if(!k)break;E++,d--}if(d>=0&&E++,_=_.dblp(E),d<0)break;for(var y=0;y<n;y++){var f,N=S[y];0!==N&&(N>0?f=l[y][N-1>>1]:N<0&&(f=l[y][-N-1>>1].neg()),_="affine"===f.type?_.mixedAdd(f):_.add(f))}}for(var d=0;d<n;d++)l[d]=null;return i?_:_.toP()},l.BasePoint=c,c.prototype.eq=function(){throw Error("Not implemented")},c.prototype.validate=function(){return this.curve.validate(this)},l.prototype.decodePoint=function(e,t){e=i.toArray(e,t);var r=this.p.byteLength();if((4===e[0]||6===e[0]||7===e[0])&&e.length-1==2*r)return 6===e[0]?s(e[e.length-1]%2==0):7===e[0]&&s(e[e.length-1]%2==1),this.point(e.slice(1,1+r),e.slice(1+r,1+2*r));if((2===e[0]||3===e[0])&&e.length-1===r)return this.pointFromX(e.slice(1,1+r),3===e[0]);throw Error("Unknown point format")},c.prototype.encodeCompressed=function(e){return this.encode(e,!0)},c.prototype._encode=function(e){var t=this.curve.p.byteLength(),r=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",t))},c.prototype.encode=function(e,t){return i.encode(this._encode(t),e)},c.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},c.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((e.bitLength()+1)/t.step)},c.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],n=this,i=0;i<t;i+=e){for(var a=0;a<e;a++)n=n.dbl();r.push(n)}return{step:e,points:r}},c.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],r=(1<<e)-1,n=1===r?null:this.dbl(),i=1;i<r;i++)t[i]=t[i-1].add(n);return{wnd:e,points:t}},c.prototype._getBeta=function(){return null},c.prototype.dblp=function(e){for(var t=this,r=0;r<e;r++)t=t.dbl();return t}},2705:function(e,t,r){"use strict";var n=r(4401),i=r(711),a=r(3782),o=r(2727),s=n.assert;function l(e){this.twisted=(0|e.a)!=1,this.mOneA=this.twisted&&(0|e.a)==-1,this.extended=this.mOneA,o.call(this,"edwards",e),this.a=new i(e.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new i(e.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new i(e.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),s(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=(0|e.c)==1}function c(e,t,r,n,a){o.BasePoint.call(this,e,"projective"),null===t&&null===r&&null===n?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new i(t,16),this.y=new i(r,16),this.z=n?new i(n,16):this.curve.one,this.t=a&&new i(a,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}a(l,o),e.exports=l,l.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)},l.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)},l.prototype.jpoint=function(e,t,r,n){return this.point(e,t,r,n)},l.prototype.pointFromX=function(e,t){(e=new i(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr(),n=this.c2.redSub(this.a.redMul(r)),a=this.one.redSub(this.c2.redMul(this.d).redMul(r)),o=n.redMul(a.redInvm()),s=o.redSqrt();if(0!==s.redSqr().redSub(o).cmp(this.zero))throw Error("invalid point");var l=s.fromRed().isOdd();return(t&&!l||!t&&l)&&(s=s.redNeg()),this.point(e,s)},l.prototype.pointFromY=function(e,t){(e=new i(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr(),n=r.redSub(this.c2),a=r.redMul(this.d).redMul(this.c2).redSub(this.a),o=n.redMul(a.redInvm());if(0===o.cmp(this.zero))if(!t)return this.point(this.zero,e);else throw Error("invalid point");var s=o.redSqrt();if(0!==s.redSqr().redSub(o).cmp(this.zero))throw Error("invalid point");return s.fromRed().isOdd()!==t&&(s=s.redNeg()),this.point(s,e)},l.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var t=e.x.redSqr(),r=e.y.redSqr(),n=t.redMul(this.a).redAdd(r),i=this.c2.redMul(this.one.redAdd(this.d.redMul(t).redMul(r)));return 0===n.cmp(i)},a(c,o.BasePoint),l.prototype.pointFromJSON=function(e){return c.fromJSON(this,e)},l.prototype.point=function(e,t,r,n){return new c(this,e,t,r,n)},c.fromJSON=function(e,t){return new c(e,t[0],t[1],t[2])},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},c.prototype._extDbl=function(){var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr();r=r.redIAdd(r);var n=this.curve._mulA(e),i=this.x.redAdd(this.y).redSqr().redISub(e).redISub(t),a=n.redAdd(t),o=a.redSub(r),s=n.redSub(t),l=i.redMul(o),c=a.redMul(s),u=i.redMul(s),d=o.redMul(a);return this.curve.point(l,c,d,u)},c.prototype._projDbl=function(){var e,t,r,n=this.x.redAdd(this.y).redSqr(),i=this.x.redSqr(),a=this.y.redSqr();if(this.curve.twisted){var o=this.curve._mulA(i),s=o.redAdd(a);if(this.zOne)e=n.redSub(i).redSub(a).redMul(s.redSub(this.curve.two)),t=s.redMul(o.redSub(a)),r=s.redSqr().redSub(s).redSub(s);else{var l=this.z.redSqr(),c=s.redSub(l).redISub(l);e=n.redSub(i).redISub(a).redMul(c),t=s.redMul(o.redSub(a)),r=s.redMul(c)}}else{var o=i.redAdd(a),l=this.curve._mulC(this.z).redSqr(),c=o.redSub(l).redSub(l);e=this.curve._mulC(n.redISub(o)).redMul(c),t=this.curve._mulC(o).redMul(i.redISub(a)),r=o.redMul(c)}return this.curve.point(e,t,r)},c.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},c.prototype._extAdd=function(e){var t=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),r=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),n=this.t.redMul(this.curve.dd).redMul(e.t),i=this.z.redMul(e.z.redAdd(e.z)),a=r.redSub(t),o=i.redSub(n),s=i.redAdd(n),l=r.redAdd(t),c=a.redMul(o),u=s.redMul(l),d=a.redMul(l),f=o.redMul(s);return this.curve.point(c,u,f,d)},c.prototype._projAdd=function(e){var t,r,n=this.z.redMul(e.z),i=n.redSqr(),a=this.x.redMul(e.x),o=this.y.redMul(e.y),s=this.curve.d.redMul(a).redMul(o),l=i.redSub(s),c=i.redAdd(s),u=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(a).redISub(o),d=n.redMul(l).redMul(u);return this.curve.twisted?(t=n.redMul(c).redMul(o.redSub(this.curve._mulA(a))),r=l.redMul(c)):(t=n.redMul(c).redMul(o.redSub(a)),r=this.curve._mulC(l).redMul(c)),this.curve.point(d,t,r)},c.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)},c.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)},c.prototype.mulAdd=function(e,t,r){return this.curve._wnafMulAdd(1,[this,t],[e,r],2,!1)},c.prototype.jmulAdd=function(e,t,r){return this.curve._wnafMulAdd(1,[this,t],[e,r],2,!0)},c.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this},c.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},c.prototype.getX=function(){return this.normalize(),this.x.fromRed()},c.prototype.getY=function(){return this.normalize(),this.y.fromRed()},c.prototype.eq=function(e){return this===e||0===this.getX().cmp(e.getX())&&0===this.getY().cmp(e.getY())},c.prototype.eqXToP=function(e){var t=e.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(t))return!0;for(var r=e.clone(),n=this.curve.redN.redMul(this.z);;){if(r.iadd(this.curve.n),r.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(n),0===this.x.cmp(t))return!0}},c.prototype.toP=c.prototype.normalize,c.prototype.mixedAdd=c.prototype.add},9359:function(e,t,r){"use strict";var n=t;n.base=r(2727),n.short=r(4720),n.mont=r(6653),n.edwards=r(2705)},6653:function(e,t,r){"use strict";var n=r(711),i=r(3782),a=r(2727),o=r(4401);function s(e){a.call(this,"mont",e),this.a=new n(e.a,16).toRed(this.red),this.b=new n(e.b,16).toRed(this.red),this.i4=new n(4).toRed(this.red).redInvm(),this.two=new n(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function l(e,t,r){a.BasePoint.call(this,e,"projective"),null===t&&null===r?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new n(t,16),this.z=new n(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}i(s,a),e.exports=s,s.prototype.validate=function(e){var t=e.normalize().x,r=t.redSqr(),n=r.redMul(t).redAdd(r.redMul(this.a)).redAdd(t);return 0===n.redSqrt().redSqr().cmp(n)},i(l,a.BasePoint),s.prototype.decodePoint=function(e,t){return this.point(o.toArray(e,t),1)},s.prototype.point=function(e,t){return new l(this,e,t)},s.prototype.pointFromJSON=function(e){return l.fromJSON(this,e)},l.prototype.precompute=function(){},l.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},l.fromJSON=function(e,t){return new l(e,t[0],t[1]||e.one)},l.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},l.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},l.prototype.dbl=function(){var e=this.x.redAdd(this.z).redSqr(),t=this.x.redSub(this.z).redSqr(),r=e.redSub(t),n=e.redMul(t),i=r.redMul(t.redAdd(this.curve.a24.redMul(r)));return this.curve.point(n,i)},l.prototype.add=function(){throw Error("Not supported on Montgomery curve")},l.prototype.diffAdd=function(e,t){var r=this.x.redAdd(this.z),n=this.x.redSub(this.z),i=e.x.redAdd(e.z),a=e.x.redSub(e.z).redMul(r),o=i.redMul(n),s=t.z.redMul(a.redAdd(o).redSqr()),l=t.x.redMul(a.redISub(o).redSqr());return this.curve.point(s,l)},l.prototype.mul=function(e){for(var t=e.clone(),r=this,n=this.curve.point(null,null),i=this,a=[];0!==t.cmpn(0);t.iushrn(1))a.push(t.andln(1));for(var o=a.length-1;o>=0;o--)0===a[o]?(r=r.diffAdd(n,i),n=n.dbl()):(n=r.diffAdd(n,i),r=r.dbl());return n},l.prototype.mulAdd=function(){throw Error("Not supported on Montgomery curve")},l.prototype.jumlAdd=function(){throw Error("Not supported on Montgomery curve")},l.prototype.eq=function(e){return 0===this.getX().cmp(e.getX())},l.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},l.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},4720:function(e,t,r){"use strict";var n=r(4401),i=r(711),a=r(3782),o=r(2727),s=n.assert;function l(e){o.call(this,"short",e),this.a=new i(e.a,16).toRed(this.red),this.b=new i(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=[,,,,],this._endoWnafT2=[,,,,]}function c(e,t,r,n){o.BasePoint.call(this,e,"affine"),null===t&&null===r?(this.x=null,this.y=null,this.inf=!0):(this.x=new i(t,16),this.y=new i(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function u(e,t,r,n){o.BasePoint.call(this,e,"jacobian"),null===t&&null===r&&null===n?(this.x=this.curve.one,this.y=this.curve.one,this.z=new i(0)):(this.x=new i(t,16),this.y=new i(r,16),this.z=new i(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}a(l,o),e.exports=l,l.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){if(e.beta)t=new i(e.beta,16).toRed(this.red);else{var t,r,n,a=this._getEndoRoots(this.p);t=(t=0>a[0].cmp(a[1])?a[0]:a[1]).toRed(this.red)}if(e.lambda)r=new i(e.lambda,16);else{var o=this._getEndoRoots(this.n);0===this.g.mul(o[0]).x.cmp(this.g.x.redMul(t))?r=o[0]:(r=o[1],s(0===this.g.mul(r).x.cmp(this.g.x.redMul(t))))}return n=e.basis?e.basis.map(function(e){return{a:new i(e.a,16),b:new i(e.b,16)}}):this._getEndoBasis(r),{beta:t,lambda:r,basis:n}}},l.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:i.mont(e),r=new i(2).toRed(t).redInvm(),n=r.redNeg(),a=new i(3).toRed(t).redNeg().redSqrt().redMul(r);return[n.redAdd(a).fromRed(),n.redSub(a).fromRed()]},l.prototype._getEndoBasis=function(e){for(var t,r,n,a,o,s,l,c,u,d=this.n.ushrn(Math.floor(this.n.bitLength()/2)),f=e,h=this.n.clone(),p=new i(1),b=new i(0),g=new i(0),m=new i(1),v=0;0!==f.cmpn(0);){var y=h.div(f);c=h.sub(y.mul(f)),u=g.sub(y.mul(p));var x=m.sub(y.mul(b));if(!n&&0>c.cmp(d))t=l.neg(),r=p,n=c.neg(),a=u;else if(n&&2==++v)break;l=c,h=f,f=c,g=p,p=u,m=b,b=x}o=c.neg(),s=u;var w=n.sqr().add(a.sqr());return o.sqr().add(s.sqr()).cmp(w)>=0&&(o=t,s=r),n.negative&&(n=n.neg(),a=a.neg()),o.negative&&(o=o.neg(),s=s.neg()),[{a:n,b:a},{a:o,b:s}]},l.prototype._endoSplit=function(e){var t=this.endo.basis,r=t[0],n=t[1],i=n.b.mul(e).divRound(this.n),a=r.b.neg().mul(e).divRound(this.n),o=i.mul(r.a),s=a.mul(n.a),l=i.mul(r.b),c=a.mul(n.b);return{k1:e.sub(o).sub(s),k2:l.add(c).neg()}},l.prototype.pointFromX=function(e,t){(e=new i(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),n=r.redSqrt();if(0!==n.redSqr().redSub(r).cmp(this.zero))throw Error("invalid point");var a=n.fromRed().isOdd();return(t&&!a||!t&&a)&&(n=n.redNeg()),this.point(e,n)},l.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,r=e.y,n=this.a.redMul(t),i=t.redSqr().redMul(t).redIAdd(n).redIAdd(this.b);return 0===r.redSqr().redISub(i).cmpn(0)},l.prototype._endoWnafMulAdd=function(e,t,r){for(var n=this._endoWnafT1,i=this._endoWnafT2,a=0;a<e.length;a++){var o=this._endoSplit(t[a]),s=e[a],l=s._getBeta();o.k1.negative&&(o.k1.ineg(),s=s.neg(!0)),o.k2.negative&&(o.k2.ineg(),l=l.neg(!0)),n[2*a]=s,n[2*a+1]=l,i[2*a]=o.k1,i[2*a+1]=o.k2}for(var c=this._wnafMulAdd(1,n,i,2*a,r),u=0;u<2*a;u++)n[u]=null,i[u]=null;return c},a(c,o.BasePoint),l.prototype.point=function(e,t,r){return new c(this,e,t,r)},l.prototype.pointFromJSON=function(e,t){return c.fromJSON(this,e,t)},c.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var r=this.curve,n=function(e){return r.point(e.x.redMul(r.endo.beta),e.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(n)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(n)}}}return t}},c.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},c.fromJSON=function(e,t,r){"string"==typeof t&&(t=JSON.parse(t));var n=e.point(t[0],t[1],r);if(!t[2])return n;function i(t){return e.point(t[0],t[1],r)}var a=t[2];return n.precomputed={beta:null,doubles:a.doubles&&{step:a.doubles.step,points:[n].concat(a.doubles.points.map(i))},naf:a.naf&&{wnd:a.naf.wnd,points:[n].concat(a.naf.points.map(i))}},n},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return this.inf},c.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e)||0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var r=t.redSqr().redISub(this.x).redISub(e.x),n=t.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,n)},c.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,r=this.x.redSqr(),n=e.redInvm(),i=r.redAdd(r).redIAdd(r).redIAdd(t).redMul(n),a=i.redSqr().redISub(this.x.redAdd(this.x)),o=i.redMul(this.x.redSub(a)).redISub(this.y);return this.curve.point(a,o)},c.prototype.getX=function(){return this.x.fromRed()},c.prototype.getY=function(){return this.y.fromRed()},c.prototype.mul=function(e){return(e=new i(e,16),this.isInfinity())?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},c.prototype.mulAdd=function(e,t,r){var n=[this,t],i=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i):this.curve._wnafMulAdd(1,n,i,2)},c.prototype.jmulAdd=function(e,t,r){var n=[this,t],i=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i,!0):this.curve._wnafMulAdd(1,n,i,2,!0)},c.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},c.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var r=this.precomputed,n=function(e){return e.neg()};t.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(n)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(n)}}}return t},c.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},a(u,o.BasePoint),l.prototype.jpoint=function(e,t,r){return new u(this,e,t,r)},u.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),r=this.x.redMul(t),n=this.y.redMul(t).redMul(e);return this.curve.point(r,n)},u.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},u.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),r=this.z.redSqr(),n=this.x.redMul(t),i=e.x.redMul(r),a=this.y.redMul(t.redMul(e.z)),o=e.y.redMul(r.redMul(this.z)),s=n.redSub(i),l=a.redSub(o);if(0===s.cmpn(0))if(0!==l.cmpn(0))return this.curve.jpoint(null,null,null);else return this.dbl();var c=s.redSqr(),u=c.redMul(s),d=n.redMul(c),f=l.redSqr().redIAdd(u).redISub(d).redISub(d),h=l.redMul(d.redISub(f)).redISub(a.redMul(u)),p=this.z.redMul(e.z).redMul(s);return this.curve.jpoint(f,h,p)},u.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),r=this.x,n=e.x.redMul(t),i=this.y,a=e.y.redMul(t).redMul(this.z),o=r.redSub(n),s=i.redSub(a);if(0===o.cmpn(0))if(0!==s.cmpn(0))return this.curve.jpoint(null,null,null);else return this.dbl();var l=o.redSqr(),c=l.redMul(o),u=r.redMul(l),d=s.redSqr().redIAdd(c).redISub(u).redISub(u),f=s.redMul(u.redISub(d)).redISub(i.redMul(c)),h=this.z.redMul(o);return this.curve.jpoint(d,f,h)},u.prototype.dblp=function(e){if(0===e||this.isInfinity())return this;if(!e)return this.dbl();if(this.curve.zeroA||this.curve.threeA){for(var t=this,r=0;r<e;r++)t=t.dbl();return t}for(var n=this.curve.a,i=this.curve.tinv,a=this.x,o=this.y,s=this.z,l=s.redSqr().redSqr(),c=o.redAdd(o),r=0;r<e;r++){var u=a.redSqr(),d=c.redSqr(),f=d.redSqr(),h=u.redAdd(u).redIAdd(u).redIAdd(n.redMul(l)),p=a.redMul(d),b=h.redSqr().redISub(p.redAdd(p)),g=p.redISub(b),m=h.redMul(g);m=m.redIAdd(m).redISub(f);var v=c.redMul(s);r+1<e&&(l=l.redMul(f)),a=b,s=v,c=m}return this.curve.jpoint(a,c.redMul(i),s)},u.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},u.prototype._zeroDbl=function(){if(this.zOne){var e,t,r,n=this.x.redSqr(),i=this.y.redSqr(),a=i.redSqr(),o=this.x.redAdd(i).redSqr().redISub(n).redISub(a);o=o.redIAdd(o);var s=n.redAdd(n).redIAdd(n),l=s.redSqr().redISub(o).redISub(o),c=a.redIAdd(a);c=(c=c.redIAdd(c)).redIAdd(c),e=l,t=s.redMul(o.redISub(l)).redISub(c),r=this.y.redAdd(this.y)}else{var u=this.x.redSqr(),d=this.y.redSqr(),f=d.redSqr(),h=this.x.redAdd(d).redSqr().redISub(u).redISub(f);h=h.redIAdd(h);var p=u.redAdd(u).redIAdd(u),b=p.redSqr(),g=f.redIAdd(f);g=(g=g.redIAdd(g)).redIAdd(g),e=b.redISub(h).redISub(h),t=p.redMul(h.redISub(e)).redISub(g),r=(r=this.y.redMul(this.z)).redIAdd(r)}return this.curve.jpoint(e,t,r)},u.prototype._threeDbl=function(){if(this.zOne){var e,t,r,n=this.x.redSqr(),i=this.y.redSqr(),a=i.redSqr(),o=this.x.redAdd(i).redSqr().redISub(n).redISub(a);o=o.redIAdd(o);var s=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),l=s.redSqr().redISub(o).redISub(o);e=l;var c=a.redIAdd(a);c=(c=c.redIAdd(c)).redIAdd(c),t=s.redMul(o.redISub(l)).redISub(c),r=this.y.redAdd(this.y)}else{var u=this.z.redSqr(),d=this.y.redSqr(),f=this.x.redMul(d),h=this.x.redSub(u).redMul(this.x.redAdd(u));h=h.redAdd(h).redIAdd(h);var p=f.redIAdd(f),b=(p=p.redIAdd(p)).redAdd(p);e=h.redSqr().redISub(b),r=this.y.redAdd(this.z).redSqr().redISub(d).redISub(u);var g=d.redSqr();g=(g=(g=g.redIAdd(g)).redIAdd(g)).redIAdd(g),t=h.redMul(p.redISub(e)).redISub(g)}return this.curve.jpoint(e,t,r)},u.prototype._dbl=function(){var e=this.curve.a,t=this.x,r=this.y,n=this.z,i=n.redSqr().redSqr(),a=t.redSqr(),o=r.redSqr(),s=a.redAdd(a).redIAdd(a).redIAdd(e.redMul(i)),l=t.redAdd(t),c=(l=l.redIAdd(l)).redMul(o),u=s.redSqr().redISub(c.redAdd(c)),d=c.redISub(u),f=o.redSqr();f=(f=(f=f.redIAdd(f)).redIAdd(f)).redIAdd(f);var h=s.redMul(d).redISub(f),p=r.redAdd(r).redMul(n);return this.curve.jpoint(u,h,p)},u.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr(),n=t.redSqr(),i=e.redAdd(e).redIAdd(e),a=i.redSqr(),o=this.x.redAdd(t).redSqr().redISub(e).redISub(n),s=(o=(o=(o=o.redIAdd(o)).redAdd(o).redIAdd(o)).redISub(a)).redSqr(),l=n.redIAdd(n);l=(l=(l=l.redIAdd(l)).redIAdd(l)).redIAdd(l);var c=i.redIAdd(o).redSqr().redISub(a).redISub(s).redISub(l),u=t.redMul(c);u=(u=u.redIAdd(u)).redIAdd(u);var d=this.x.redMul(s).redISub(u);d=(d=d.redIAdd(d)).redIAdd(d);var f=this.y.redMul(c.redMul(l.redISub(c)).redISub(o.redMul(s)));f=(f=(f=f.redIAdd(f)).redIAdd(f)).redIAdd(f);var h=this.z.redAdd(o).redSqr().redISub(r).redISub(s);return this.curve.jpoint(d,f,h)},u.prototype.mul=function(e,t){return e=new i(e,t),this.curve._wnafMul(this,e)},u.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),r=e.z.redSqr();if(0!==this.x.redMul(r).redISub(e.x.redMul(t)).cmpn(0))return!1;var n=t.redMul(this.z),i=r.redMul(e.z);return 0===this.y.redMul(i).redISub(e.y.redMul(n)).cmpn(0)},u.prototype.eqXToP=function(e){var t=this.z.redSqr(),r=e.toRed(this.curve.red).redMul(t);if(0===this.x.cmp(r))return!0;for(var n=e.clone(),i=this.curve.redN.redMul(t);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(i),0===this.x.cmp(r))return!0}},u.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},u.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},6226:function(e,t,r){"use strict";var n,i=t,a=r(7028),o=r(9359),s=r(4401).assert;function l(e){"short"===e.type?this.curve=new o.short(e):"edwards"===e.type?this.curve=new o.edwards(e):this.curve=new o.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,s(this.g.validate(),"Invalid curve"),s(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function c(e,t){Object.defineProperty(i,e,{configurable:!0,enumerable:!0,get:function(){var r=new l(t);return Object.defineProperty(i,e,{configurable:!0,enumerable:!0,value:r}),r}})}i.PresetCurve=l,c("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:a.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),c("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:a.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),c("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:a.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),c("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:a.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),c("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:a.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),c("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:a.sha256,gRed:!1,g:["9"]}),c("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:a.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{n=r(9702)}catch(e){n=void 0}c("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:a.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",n]})},4088:function(e,t,r){"use strict";var n=r(711),i=r(4910),a=r(4401),o=r(6226),s=r(3500),l=a.assert,c=r(4724),u=r(7526);function d(e){if(!(this instanceof d))return new d(e);"string"==typeof e&&(l(o.hasOwnProperty(e),"Unknown curve "+e),e=o[e]),e instanceof o.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}e.exports=d,d.prototype.keyPair=function(e){return new c(this,e)},d.prototype.keyFromPrivate=function(e,t){return c.fromPrivate(this,e,t)},d.prototype.keyFromPublic=function(e,t){return c.fromPublic(this,e,t)},d.prototype.genKeyPair=function(e){e||(e={});for(var t=new i({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||s(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),a=this.n.sub(new n(2));;){var o=new n(t.generate(r));if(!(o.cmp(a)>0))return o.iaddn(1),this.keyFromPrivate(o)}},d.prototype._truncateToN=function(e,t){var r=8*e.byteLength()-this.n.bitLength();return(r>0&&(e=e.ushrn(r)),!t&&e.cmp(this.n)>=0)?e.sub(this.n):e},d.prototype.sign=function(e,t,r,a){"object"==typeof r&&(a=r,r=null),a||(a={}),t=this.keyFromPrivate(t,r),e=this._truncateToN(new n(e,16));for(var o=this.n.byteLength(),s=t.getPrivate().toArray("be",o),l=e.toArray("be",o),c=new i({hash:this.hash,entropy:s,nonce:l,pers:a.pers,persEnc:a.persEnc||"utf8"}),d=this.n.sub(new n(1)),f=0;;f++){var h=a.k?a.k(f):new n(c.generate(this.n.byteLength()));if(0>=(h=this._truncateToN(h,!0)).cmpn(1)||h.cmp(d)>=0)continue;var p=this.g.mul(h);if(!p.isInfinity()){var b=p.getX(),g=b.umod(this.n);if(0!==g.cmpn(0)){var m=h.invm(this.n).mul(g.mul(t.getPrivate()).iadd(e));if(0!==(m=m.umod(this.n)).cmpn(0)){var v=!!p.getY().isOdd()|2*(0!==b.cmp(g));return a.canonical&&m.cmp(this.nh)>0&&(m=this.n.sub(m),v^=1),new u({r:g,s:m,recoveryParam:v})}}}}},d.prototype.verify=function(e,t,r,i){e=this._truncateToN(new n(e,16)),r=this.keyFromPublic(r,i);var a=(t=new u(t,"hex")).r,o=t.s;if(0>a.cmpn(1)||a.cmp(this.n)>=0||0>o.cmpn(1)||o.cmp(this.n)>=0)return!1;var s=o.invm(this.n),l=s.mul(e).umod(this.n),c=s.mul(a).umod(this.n);if(!this.curve._maxwellTrick){var d=this.g.mulAdd(l,r.getPublic(),c);return!d.isInfinity()&&0===d.getX().umod(this.n).cmp(a)}var d=this.g.jmulAdd(l,r.getPublic(),c);return!d.isInfinity()&&d.eqXToP(a)},d.prototype.recoverPubKey=function(e,t,r,i){l((3&r)===r,"The recovery param is more than two bits"),t=new u(t,i);var a=this.n,o=new n(e),s=t.r,c=t.s,d=1&r,f=r>>1;if(s.cmp(this.curve.p.umod(this.curve.n))>=0&&f)throw Error("Unable to find sencond key candinate");s=f?this.curve.pointFromX(s.add(this.curve.n),d):this.curve.pointFromX(s,d);var h=t.r.invm(a),p=a.sub(o).mul(h).umod(a),b=c.mul(h).umod(a);return this.g.mulAdd(p,s,b)},d.prototype.getKeyRecoveryParam=function(e,t,r,n){if(null!==(t=new u(t,n)).recoveryParam)return t.recoveryParam;for(var i,a=0;a<4;a++){try{i=this.recoverPubKey(e,t,a)}catch(e){continue}if(i.eq(r))return a}throw Error("Unable to find valid recovery factor")}},4724:function(e,t,r){"use strict";var n=r(711),i=r(4401).assert;function a(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}e.exports=a,a.fromPublic=function(e,t,r){return t instanceof a?t:new a(e,{pub:t,pubEnc:r})},a.fromPrivate=function(e,t,r){return t instanceof a?t:new a(e,{priv:t,privEnc:r})},a.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},a.prototype.getPublic=function(e,t){return("string"==typeof e&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t)?this.pub.encode(t,e):this.pub},a.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},a.prototype._importPrivate=function(e,t){this.priv=new n(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},a.prototype._importPublic=function(e,t){if(e.x||e.y){"mont"===this.ec.curve.type?i(e.x,"Need x coordinate"):("short"===this.ec.curve.type||"edwards"===this.ec.curve.type)&&i(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,t)},a.prototype.derive=function(e){return e.mul(this.priv).getX()},a.prototype.sign=function(e,t,r){return this.ec.sign(e,this,t,r)},a.prototype.verify=function(e,t){return this.ec.verify(e,t,this)},a.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},7526:function(e,t,r){"use strict";var n=r(711),i=r(4401),a=i.assert;function o(e,t){if(e instanceof o)return e;this._importDER(e,t)||(a(e.r&&e.s,"Signature without r or s"),this.r=new n(e.r,16),this.s=new n(e.s,16),void 0===e.recoveryParam?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}function s(){this.place=0}function l(e,t){var r=e[t.place++];if(!(128&r))return r;var n=15&r;if(0===n||n>4)return!1;for(var i=0,a=0,o=t.place;a<n;a++,o++)i<<=8,i|=e[o],i>>>=0;return!(i<=127)&&(t.place=o,i)}function c(e){for(var t=0,r=e.length-1;!e[t]&&!(128&e[t+1])&&t<r;)t++;return 0===t?e:e.slice(t)}function u(e,t){if(t<128)return void e.push(t);var r=1+(Math.log(t)/Math.LN2>>>3);for(e.push(128|r);--r;)e.push(t>>>(r<<3)&255);e.push(t)}e.exports=o,o.prototype._importDER=function(e,t){e=i.toArray(e,t);var r=new s;if(48!==e[r.place++])return!1;var a=l(e,r);if(!1===a||a+r.place!==e.length||2!==e[r.place++])return!1;var o=l(e,r);if(!1===o)return!1;var c=e.slice(r.place,o+r.place);if(r.place+=o,2!==e[r.place++])return!1;var u=l(e,r);if(!1===u||e.length!==u+r.place)return!1;var d=e.slice(r.place,u+r.place);if(0===c[0])if(!(128&c[1]))return!1;else c=c.slice(1);if(0===d[0])if(!(128&d[1]))return!1;else d=d.slice(1);return this.r=new n(c),this.s=new n(d),this.recoveryParam=null,!0},o.prototype.toDER=function(e){var t=this.r.toArray(),r=this.s.toArray();for(128&t[0]&&(t=[0].concat(t)),128&r[0]&&(r=[0].concat(r)),t=c(t),r=c(r);!r[0]&&!(128&r[1]);)r=r.slice(1);var n=[2];u(n,t.length),(n=n.concat(t)).push(2),u(n,r.length);var a=n.concat(r),o=[48];return u(o,a.length),o=o.concat(a),i.encode(o,e)}},8511:function(e,t,r){"use strict";var n=r(7028),i=r(6226),a=r(4401),o=a.assert,s=a.parseBytes,l=r(9917),c=r(9314);function u(e){if(o("ed25519"===e,"only tested with ed25519 so far"),!(this instanceof u))return new u(e);var e=i[e].curve;this.curve=e,this.g=e.g,this.g.precompute(e.n.bitLength()+1),this.pointClass=e.point().constructor,this.encodingLength=Math.ceil(e.n.bitLength()/8),this.hash=n.sha512}e.exports=u,u.prototype.sign=function(e,t){e=s(e);var r=this.keyFromSecret(t),n=this.hashInt(r.messagePrefix(),e),i=this.g.mul(n),a=this.encodePoint(i),o=this.hashInt(a,r.pubBytes(),e).mul(r.priv()),l=n.add(o).umod(this.curve.n);return this.makeSignature({R:i,S:l,Rencoded:a})},u.prototype.verify=function(e,t,r){e=s(e),t=this.makeSignature(t);var n=this.keyFromPublic(r),i=this.hashInt(t.Rencoded(),n.pubBytes(),e),a=this.g.mul(t.S());return t.R().add(n.pub().mul(i)).eq(a)},u.prototype.hashInt=function(){for(var e=this.hash(),t=0;t<arguments.length;t++)e.update(arguments[t]);return a.intFromLE(e.digest()).umod(this.curve.n)},u.prototype.keyFromPublic=function(e){return l.fromPublic(this,e)},u.prototype.keyFromSecret=function(e){return l.fromSecret(this,e)},u.prototype.makeSignature=function(e){return e instanceof c?e:new c(this,e)},u.prototype.encodePoint=function(e){var t=e.getY().toArray("le",this.encodingLength);return t[this.encodingLength-1]|=128*!!e.getX().isOdd(),t},u.prototype.decodePoint=function(e){var t=(e=a.parseBytes(e)).length-1,r=e.slice(0,t).concat(-129&e[t]),n=(128&e[t])!=0,i=a.intFromLE(r);return this.curve.pointFromY(i,n)},u.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)},u.prototype.decodeInt=function(e){return a.intFromLE(e)},u.prototype.isPoint=function(e){return e instanceof this.pointClass}},9917:function(e,t,r){"use strict";var n=r(4401),i=n.assert,a=n.parseBytes,o=n.cachedProperty;function s(e,t){this.eddsa=e,this._secret=a(t.secret),e.isPoint(t.pub)?this._pub=t.pub:this._pubBytes=a(t.pub)}s.fromPublic=function(e,t){return t instanceof s?t:new s(e,{pub:t})},s.fromSecret=function(e,t){return t instanceof s?t:new s(e,{secret:t})},s.prototype.secret=function(){return this._secret},o(s,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),o(s,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),o(s,"privBytes",function(){var e=this.eddsa,t=this.hash(),r=e.encodingLength-1,n=t.slice(0,e.encodingLength);return n[0]&=248,n[r]&=127,n[r]|=64,n}),o(s,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),o(s,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),o(s,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),s.prototype.sign=function(e){return i(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)},s.prototype.verify=function(e,t){return this.eddsa.verify(e,t,this)},s.prototype.getSecret=function(e){return i(this._secret,"KeyPair is public only"),n.encode(this.secret(),e)},s.prototype.getPublic=function(e){return n.encode(this.pubBytes(),e)},e.exports=s},9314:function(e,t,r){"use strict";var n=r(711),i=r(4401),a=i.assert,o=i.cachedProperty,s=i.parseBytes;function l(e,t){this.eddsa=e,"object"!=typeof t&&(t=s(t)),Array.isArray(t)&&(t={R:t.slice(0,e.encodingLength),S:t.slice(e.encodingLength)}),a(t.R&&t.S,"Signature without R or S"),e.isPoint(t.R)&&(this._R=t.R),t.S instanceof n&&(this._S=t.S),this._Rencoded=Array.isArray(t.R)?t.R:t.Rencoded,this._Sencoded=Array.isArray(t.S)?t.S:t.Sencoded}o(l,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),o(l,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),o(l,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),o(l,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),l.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},l.prototype.toHex=function(){return i.encode(this.toBytes(),"hex").toUpperCase()},e.exports=l},9702:function(e){e.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},4401:function(e,t,r){"use strict";var n=t,i=r(711),a=r(3523),o=r(6545);function s(e){return"string"==typeof e?n.toArray(e,"hex"):e}n.assert=a,n.toArray=o.toArray,n.zero2=o.zero2,n.toHex=o.toHex,n.encode=o.encode,n.getNAF=function(e,t,r){var n=Array(Math.max(e.bitLength(),r)+1);n.fill(0);for(var i=1<<t+1,a=e.clone(),o=0;o<n.length;o++){var s,l=a.andln(i-1);a.isOdd()?(s=l>(i>>1)-1?(i>>1)-l:l,a.isubn(s)):s=0,n[o]=s,a.iushrn(1)}return n},n.getJSF=function(e,t){var r=[[],[]];e=e.clone(),t=t.clone();for(var n=0,i=0;e.cmpn(-n)>0||t.cmpn(-i)>0;){var a,o,s=e.andln(3)+n&3,l=t.andln(3)+i&3;if(3===s&&(s=-1),3===l&&(l=-1),(1&s)==0)a=0;else{var c=e.andln(7)+n&7;a=(3===c||5===c)&&2===l?-s:s}if(r[0].push(a),(1&l)==0)o=0;else{var c=t.andln(7)+i&7;o=(3===c||5===c)&&2===s?-l:l}r[1].push(o),2*n===a+1&&(n=1-n),2*i===o+1&&(i=1-i),e.iushrn(1),t.iushrn(1)}return r},n.cachedProperty=function(e,t,r){var n="_"+t;e.prototype[t]=function(){return void 0!==this[n]?this[n]:this[n]=r.call(this)}},n.parseBytes=s,n.intFromLE=function(e){return new i(e,"hex","le")}},8368:function(e,t,r){var n=r(6911).Buffer,i=r(3533);e.exports=function(e,t,r,a){if(n.isBuffer(e)||(e=n.from(e,"binary")),t&&(n.isBuffer(t)||(t=n.from(t,"binary")),8!==t.length))throw RangeError("salt should be Buffer with 8 byte length");for(var o=r/8,s=n.alloc(o),l=n.alloc(a||0),c=n.alloc(0);o>0||a>0;){var u=new i;u.update(c),u.update(e),t&&u.update(t),c=u.digest();var d=0;if(o>0){var f=s.length-o;d=Math.min(o,c.length),c.copy(s,f,0,d),o-=d}if(d<c.length&&a>0){var h=l.length-a,p=Math.min(a,c.length-d);c.copy(l,h,d,d+p),a-=p}}return c.fill(0),{key:s,iv:l}}},9029:function(e,t,r){"use strict";var n=r(6911).Buffer,i=r(3726).Transform;function a(e,t){if(!n.isBuffer(e)&&"string"!=typeof e)throw TypeError(t+" must be a string or a buffer")}function o(e){i.call(this),this._block=n.allocUnsafe(e),this._blockSize=e,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}r(3782)(o,i),o.prototype._transform=function(e,t,r){var n=null;try{this.update(e,t)}catch(e){n=e}r(n)},o.prototype._flush=function(e){var t=null;try{this.push(this.digest())}catch(e){t=e}e(t)},o.prototype.update=function(e,t){if(a(e,"Data"),this._finalized)throw Error("Digest already called");n.isBuffer(e)||(e=n.from(e,t));for(var r=this._block,i=0;this._blockOffset+e.length-i>=this._blockSize;){for(var o=this._blockOffset;o<this._blockSize;)r[o++]=e[i++];this._update(),this._blockOffset=0}for(;i<e.length;)r[this._blockOffset++]=e[i++];for(var s=0,l=8*e.length;l>0;++s)this._length[s]+=l,(l=this._length[s]/0x100000000|0)>0&&(this._length[s]-=0x100000000*l);return this},o.prototype._update=function(){throw Error("_update is not implemented")},o.prototype.digest=function(e){if(this._finalized)throw Error("Digest already called");this._finalized=!0;var t=this._digest();void 0!==e&&(t=t.toString(e)),this._block.fill(0),this._blockOffset=0;for(var r=0;r<4;++r)this._length[r]=0;return t},o.prototype._digest=function(){throw Error("_digest is not implemented")},e.exports=o},7028:function(e,t,r){var n=t;n.utils=r(263),n.common=r(1330),n.sha=r(301),n.ripemd=r(3079),n.hmac=r(3092),n.sha1=n.sha.sha1,n.sha256=n.sha.sha256,n.sha224=n.sha.sha224,n.sha384=n.sha.sha384,n.sha512=n.sha.sha512,n.ripemd160=n.ripemd.ripemd160},1330:function(e,t,r){"use strict";var n=r(263),i=r(3523);function a(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}t.BlockHash=a,a.prototype.update=function(e,t){if(e=n.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){var r=(e=this.pending).length%this._delta8;this.pending=e.slice(e.length-r,e.length),0===this.pending.length&&(this.pending=null),e=n.join32(e,0,e.length-r,this.endian);for(var i=0;i<e.length;i+=this._delta32)this._update(e,i,i+this._delta32)}return this},a.prototype.digest=function(e){return this.update(this._pad()),i(null===this.pending),this._digest(e)},a.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,r=t-(e+this.padLength)%t,n=Array(r+this.padLength);n[0]=128;for(var i=1;i<r;i++)n[i]=0;if(e<<=3,"big"===this.endian){for(var a=8;a<this.padLength;a++)n[i++]=0;n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=e>>>24&255,n[i++]=e>>>16&255,n[i++]=e>>>8&255,n[i++]=255&e}else for(a=8,n[i++]=255&e,n[i++]=e>>>8&255,n[i++]=e>>>16&255,n[i++]=e>>>24&255,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0;a<this.padLength;a++)n[i++]=0;return n}},3092:function(e,t,r){"use strict";var n=r(263),i=r(3523);function a(e,t,r){if(!(this instanceof a))return new a(e,t,r);this.Hash=e,this.blockSize=e.blockSize/8,this.outSize=e.outSize/8,this.inner=null,this.outer=null,this._init(n.toArray(t,r))}e.exports=a,a.prototype._init=function(e){e.length>this.blockSize&&(e=(new this.Hash).update(e).digest()),i(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(t=0,this.inner=(new this.Hash).update(e);t<e.length;t++)e[t]^=106;this.outer=(new this.Hash).update(e)},a.prototype.update=function(e,t){return this.inner.update(e,t),this},a.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)}},3079:function(e,t,r){"use strict";var n=r(263),i=r(1330),a=n.rotl32,o=n.sum32,s=n.sum32_3,l=n.sum32_4,c=i.BlockHash;function u(){if(!(this instanceof u))return new u;c.call(this),this.h=[0x67452301,0xefcdab89,0x98badcfe,0x10325476,0xc3d2e1f0],this.endian="little"}function d(e,t,r,n){return e<=15?t^r^n:e<=31?t&r|~t&n:e<=47?(t|~r)^n:e<=63?t&n|r&~n:t^(r|~n)}function f(e){return e<=15?0:e<=31?0x5a827999:e<=47?0x6ed9eba1:e<=63?0x8f1bbcdc:0xa953fd4e}function h(e){return e<=15?0x50a28be6:e<=31?0x5c4dd124:e<=47?0x6d703ef3:0x7a6d76e9*!!(e<=63)}n.inherits(u,c),t.ripemd160=u,u.blockSize=512,u.outSize=160,u.hmacStrength=192,u.padLength=64,u.prototype._update=function(e,t){for(var r=this.h[0],n=this.h[1],i=this.h[2],c=this.h[3],u=this.h[4],v=r,y=n,x=i,w=c,_=u,S=0;S<80;S++){var E=o(a(l(r,d(S,n,i,c),e[p[S]+t],f(S)),g[S]),u);r=u,u=c,c=a(i,10),i=n,n=E,E=o(a(l(v,d(79-S,y,x,w),e[b[S]+t],h(S)),m[S]),_),v=_,_=w,w=a(x,10),x=y,y=E}E=s(this.h[1],i,w),this.h[1]=s(this.h[2],c,_),this.h[2]=s(this.h[3],u,v),this.h[3]=s(this.h[4],r,y),this.h[4]=s(this.h[0],n,x),this.h[0]=E},u.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h,"little"):n.split32(this.h,"little")};var p=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],b=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],g=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],m=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},301:function(e,t,r){"use strict";t.sha1=r(2742),t.sha224=r(7105),t.sha256=r(1525),t.sha384=r(9948),t.sha512=r(1319)},2742:function(e,t,r){"use strict";var n=r(263),i=r(1330),a=r(2975),o=n.rotl32,s=n.sum32,l=n.sum32_5,c=a.ft_1,u=i.BlockHash,d=[0x5a827999,0x6ed9eba1,0x8f1bbcdc,0xca62c1d6];function f(){if(!(this instanceof f))return new f;u.call(this),this.h=[0x67452301,0xefcdab89,0x98badcfe,0x10325476,0xc3d2e1f0],this.W=Array(80)}n.inherits(f,u),e.exports=f,f.blockSize=512,f.outSize=160,f.hmacStrength=80,f.padLength=64,f.prototype._update=function(e,t){for(var r=this.W,n=0;n<16;n++)r[n]=e[t+n];for(;n<r.length;n++)r[n]=o(r[n-3]^r[n-8]^r[n-14]^r[n-16],1);var i=this.h[0],a=this.h[1],u=this.h[2],f=this.h[3],h=this.h[4];for(n=0;n<r.length;n++){var p=~~(n/20),b=l(o(i,5),c(p,a,u,f),h,r[n],d[p]);h=f,f=u,u=o(a,30),a=i,i=b}this.h[0]=s(this.h[0],i),this.h[1]=s(this.h[1],a),this.h[2]=s(this.h[2],u),this.h[3]=s(this.h[3],f),this.h[4]=s(this.h[4],h)},f.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},7105:function(e,t,r){"use strict";var n=r(263),i=r(1525);function a(){if(!(this instanceof a))return new a;i.call(this),this.h=[0xc1059ed8,0x367cd507,0x3070dd17,0xf70e5939,0xffc00b31,0x68581511,0x64f98fa7,0xbefa4fa4]}n.inherits(a,i),e.exports=a,a.blockSize=512,a.outSize=224,a.hmacStrength=192,a.padLength=64,a.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h.slice(0,7),"big"):n.split32(this.h.slice(0,7),"big")}},1525:function(e,t,r){"use strict";var n=r(263),i=r(1330),a=r(2975),o=r(3523),s=n.sum32,l=n.sum32_4,c=n.sum32_5,u=a.ch32,d=a.maj32,f=a.s0_256,h=a.s1_256,p=a.g0_256,b=a.g1_256,g=i.BlockHash,m=[0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2];function v(){if(!(this instanceof v))return new v;g.call(this),this.h=[0x6a09e667,0xbb67ae85,0x3c6ef372,0xa54ff53a,0x510e527f,0x9b05688c,0x1f83d9ab,0x5be0cd19],this.k=m,this.W=Array(64)}n.inherits(v,g),e.exports=v,v.blockSize=512,v.outSize=256,v.hmacStrength=192,v.padLength=64,v.prototype._update=function(e,t){for(var r=this.W,n=0;n<16;n++)r[n]=e[t+n];for(;n<r.length;n++)r[n]=l(b(r[n-2]),r[n-7],p(r[n-15]),r[n-16]);var i=this.h[0],a=this.h[1],g=this.h[2],m=this.h[3],v=this.h[4],y=this.h[5],x=this.h[6],w=this.h[7];for(o(this.k.length===r.length),n=0;n<r.length;n++){var _=c(w,h(v),u(v,y,x),this.k[n],r[n]),S=s(f(i),d(i,a,g));w=x,x=y,y=v,v=s(m,_),m=g,g=a,a=i,i=s(_,S)}this.h[0]=s(this.h[0],i),this.h[1]=s(this.h[1],a),this.h[2]=s(this.h[2],g),this.h[3]=s(this.h[3],m),this.h[4]=s(this.h[4],v),this.h[5]=s(this.h[5],y),this.h[6]=s(this.h[6],x),this.h[7]=s(this.h[7],w)},v.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},9948:function(e,t,r){"use strict";var n=r(263),i=r(1319);function a(){if(!(this instanceof a))return new a;i.call(this),this.h=[0xcbbb9d5d,0xc1059ed8,0x629a292a,0x367cd507,0x9159015a,0x3070dd17,0x152fecd8,0xf70e5939,0x67332667,0xffc00b31,0x8eb44a87,0x68581511,0xdb0c2e0d,0x64f98fa7,0x47b5481d,0xbefa4fa4]}n.inherits(a,i),e.exports=a,a.blockSize=1024,a.outSize=384,a.hmacStrength=192,a.padLength=128,a.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h.slice(0,12),"big"):n.split32(this.h.slice(0,12),"big")}},1319:function(e,t,r){"use strict";var n=r(263),i=r(1330),a=r(3523),o=n.rotr64_hi,s=n.rotr64_lo,l=n.shr64_hi,c=n.shr64_lo,u=n.sum64,d=n.sum64_hi,f=n.sum64_lo,h=n.sum64_4_hi,p=n.sum64_4_lo,b=n.sum64_5_hi,g=n.sum64_5_lo,m=i.BlockHash,v=[0x428a2f98,0xd728ae22,0x71374491,0x23ef65cd,0xb5c0fbcf,0xec4d3b2f,0xe9b5dba5,0x8189dbbc,0x3956c25b,0xf348b538,0x59f111f1,0xb605d019,0x923f82a4,0xaf194f9b,0xab1c5ed5,0xda6d8118,0xd807aa98,0xa3030242,0x12835b01,0x45706fbe,0x243185be,0x4ee4b28c,0x550c7dc3,0xd5ffb4e2,0x72be5d74,0xf27b896f,0x80deb1fe,0x3b1696b1,0x9bdc06a7,0x25c71235,0xc19bf174,0xcf692694,0xe49b69c1,0x9ef14ad2,0xefbe4786,0x384f25e3,0xfc19dc6,0x8b8cd5b5,0x240ca1cc,0x77ac9c65,0x2de92c6f,0x592b0275,0x4a7484aa,0x6ea6e483,0x5cb0a9dc,0xbd41fbd4,0x76f988da,0x831153b5,0x983e5152,0xee66dfab,0xa831c66d,0x2db43210,0xb00327c8,0x98fb213f,0xbf597fc7,0xbeef0ee4,0xc6e00bf3,0x3da88fc2,0xd5a79147,0x930aa725,0x6ca6351,0xe003826f,0x14292967,0xa0e6e70,0x27b70a85,0x46d22ffc,0x2e1b2138,0x5c26c926,0x4d2c6dfc,0x5ac42aed,0x53380d13,0x9d95b3df,0x650a7354,0x8baf63de,0x766a0abb,0x3c77b2a8,0x81c2c92e,0x47edaee6,0x92722c85,0x1482353b,0xa2bfe8a1,0x4cf10364,0xa81a664b,0xbc423001,0xc24b8b70,0xd0f89791,0xc76c51a3,0x654be30,0xd192e819,0xd6ef5218,0xd6990624,0x5565a910,0xf40e3585,0x5771202a,0x106aa070,0x32bbd1b8,0x19a4c116,0xb8d2d0c8,0x1e376c08,0x5141ab53,0x2748774c,0xdf8eeb99,0x34b0bcb5,0xe19b48a8,0x391c0cb3,0xc5c95a63,0x4ed8aa4a,0xe3418acb,0x5b9cca4f,0x7763e373,0x682e6ff3,0xd6b2b8a3,0x748f82ee,0x5defb2fc,0x78a5636f,0x43172f60,0x84c87814,0xa1f0ab72,0x8cc70208,0x1a6439ec,0x90befffa,0x23631e28,0xa4506ceb,0xde82bde9,0xbef9a3f7,0xb2c67915,0xc67178f2,0xe372532b,0xca273ece,0xea26619c,0xd186b8c7,0x21c0c207,0xeada7dd6,0xcde0eb1e,0xf57d4f7f,0xee6ed178,0x6f067aa,0x72176fba,0xa637dc5,0xa2c898a6,0x113f9804,0xbef90dae,0x1b710b35,0x131c471b,0x28db77f5,0x23047d84,0x32caab7b,0x40c72493,0x3c9ebe0a,0x15c9bebc,0x431d67c4,0x9c100d4c,0x4cc5d4be,0xcb3e42b6,0x597f299c,0xfc657e2a,0x5fcb6fab,0x3ad6faec,0x6c44198c,0x4a475817];function y(){if(!(this instanceof y))return new y;m.call(this),this.h=[0x6a09e667,0xf3bcc908,0xbb67ae85,0x84caa73b,0x3c6ef372,0xfe94f82b,0xa54ff53a,0x5f1d36f1,0x510e527f,0xade682d1,0x9b05688c,0x2b3e6c1f,0x1f83d9ab,0xfb41bd6b,0x5be0cd19,0x137e2179],this.k=v,this.W=Array(160)}function x(e,t,r,n,i){var a=e&r^~e&i;return a<0&&(a+=0x100000000),a}function w(e,t,r,n,i,a){var o=t&n^~t&a;return o<0&&(o+=0x100000000),o}function _(e,t,r,n,i){var a=e&r^e&i^r&i;return a<0&&(a+=0x100000000),a}function S(e,t,r,n,i,a){var o=t&n^t&a^n&a;return o<0&&(o+=0x100000000),o}function E(e,t){var r=o(e,t,28)^o(t,e,2)^o(t,e,7);return r<0&&(r+=0x100000000),r}function k(e,t){var r=s(e,t,28)^s(t,e,2)^s(t,e,7);return r<0&&(r+=0x100000000),r}function N(e,t){var r=o(e,t,14)^o(e,t,18)^o(t,e,9);return r<0&&(r+=0x100000000),r}function j(e,t){var r=s(e,t,14)^s(e,t,18)^s(t,e,9);return r<0&&(r+=0x100000000),r}function C(e,t){var r=o(e,t,1)^o(e,t,8)^l(e,t,7);return r<0&&(r+=0x100000000),r}function M(e,t){var r=s(e,t,1)^s(e,t,8)^c(e,t,7);return r<0&&(r+=0x100000000),r}function A(e,t){var r=o(e,t,19)^o(t,e,29)^l(e,t,6);return r<0&&(r+=0x100000000),r}function R(e,t){var r=s(e,t,19)^s(t,e,29)^c(e,t,6);return r<0&&(r+=0x100000000),r}n.inherits(y,m),e.exports=y,y.blockSize=1024,y.outSize=512,y.hmacStrength=192,y.padLength=128,y.prototype._prepareBlock=function(e,t){for(var r=this.W,n=0;n<32;n++)r[n]=e[t+n];for(;n<r.length;n+=2){var i=A(r[n-4],r[n-3]),a=R(r[n-4],r[n-3]),o=r[n-14],s=r[n-13],l=C(r[n-30],r[n-29]),c=M(r[n-30],r[n-29]),u=r[n-32],d=r[n-31];r[n]=h(i,a,o,s,l,c,u,d),r[n+1]=p(i,a,o,s,l,c,u,d)}},y.prototype._update=function(e,t){this._prepareBlock(e,t);var r=this.W,n=this.h[0],i=this.h[1],o=this.h[2],s=this.h[3],l=this.h[4],c=this.h[5],h=this.h[6],p=this.h[7],m=this.h[8],v=this.h[9],y=this.h[10],C=this.h[11],M=this.h[12],A=this.h[13],R=this.h[14],T=this.h[15];a(this.k.length===r.length);for(var O=0;O<r.length;O+=2){var L=R,I=T,P=N(m,v),B=j(m,v),D=x(m,v,y,C,M,A),z=w(m,v,y,C,M,A),F=this.k[O],$=this.k[O+1],U=r[O],H=r[O+1],V=b(L,I,P,B,D,z,F,$,U,H),q=g(L,I,P,B,D,z,F,$,U,H);L=E(n,i),I=k(n,i);var W=d(L,I,P=_(n,i,o,s,l,c),B=S(n,i,o,s,l,c)),K=f(L,I,P,B);R=M,T=A,M=y,A=C,y=m,C=v,m=d(h,p,V,q),v=f(p,p,V,q),h=l,p=c,l=o,c=s,o=n,s=i,n=d(V,q,W,K),i=f(V,q,W,K)}u(this.h,0,n,i),u(this.h,2,o,s),u(this.h,4,l,c),u(this.h,6,h,p),u(this.h,8,m,v),u(this.h,10,y,C),u(this.h,12,M,A),u(this.h,14,R,T)},y.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},2975:function(e,t,r){"use strict";var n=r(263).rotr32;function i(e,t,r){return e&t^~e&r}function a(e,t,r){return e&t^e&r^t&r}function o(e,t,r){return e^t^r}t.ft_1=function(e,t,r,n){return 0===e?i(t,r,n):1===e||3===e?o(t,r,n):2===e?a(t,r,n):void 0},t.ch32=i,t.maj32=a,t.p32=o,t.s0_256=function(e){return n(e,2)^n(e,13)^n(e,22)},t.s1_256=function(e){return n(e,6)^n(e,11)^n(e,25)},t.g0_256=function(e){return n(e,7)^n(e,18)^e>>>3},t.g1_256=function(e){return n(e,17)^n(e,19)^e>>>10}},263:function(e,t,r){"use strict";var n=r(3523);function i(e,t){return(64512&e.charCodeAt(t))==55296&&!(t<0)&&!(t+1>=e.length)&&(64512&e.charCodeAt(t+1))==56320}function a(e){return(e>>>24|e>>>8&65280|e<<8&0xff0000|(255&e)<<24)>>>0}function o(e){return 1===e.length?"0"+e:e}function s(e){if(7===e.length)return"0"+e;if(6===e.length)return"00"+e;if(5===e.length)return"000"+e;if(4===e.length)return"0000"+e;if(3===e.length)return"00000"+e;else if(2===e.length)return"000000"+e;else if(1===e.length)return"0000000"+e;else return e}t.inherits=r(3782),t.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"==typeof e)if(t){if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),a=0;a<e.length;a+=2)r.push(parseInt(e[a]+e[a+1],16))}else for(var n=0,a=0;a<e.length;a++){var o=e.charCodeAt(a);o<128?r[n++]=o:(o<2048?r[n++]=o>>6|192:(i(e,a)?(o=65536+((1023&o)<<10)+(1023&e.charCodeAt(++a)),r[n++]=o>>18|240,r[n++]=o>>12&63|128):r[n++]=o>>12|224,r[n++]=o>>6&63|128),r[n++]=63&o|128)}else for(a=0;a<e.length;a++)r[a]=0|e[a];return r},t.toHex=function(e){for(var t="",r=0;r<e.length;r++)t+=o(e[r].toString(16));return t},t.htonl=a,t.toHex32=function(e,t){for(var r="",n=0;n<e.length;n++){var i=e[n];"little"===t&&(i=a(i)),r+=s(i.toString(16))}return r},t.zero2=o,t.zero8=s,t.join32=function(e,t,r,i){var a,o=r-t;n(o%4==0);for(var s=Array(o/4),l=0,c=t;l<s.length;l++,c+=4)a="big"===i?e[c]<<24|e[c+1]<<16|e[c+2]<<8|e[c+3]:e[c+3]<<24|e[c+2]<<16|e[c+1]<<8|e[c],s[l]=a>>>0;return s},t.split32=function(e,t){for(var r=Array(4*e.length),n=0,i=0;n<e.length;n++,i+=4){var a=e[n];"big"===t?(r[i]=a>>>24,r[i+1]=a>>>16&255,r[i+2]=a>>>8&255,r[i+3]=255&a):(r[i+3]=a>>>24,r[i+2]=a>>>16&255,r[i+1]=a>>>8&255,r[i]=255&a)}return r},t.rotr32=function(e,t){return e>>>t|e<<32-t},t.rotl32=function(e,t){return e<<t|e>>>32-t},t.sum32=function(e,t){return e+t>>>0},t.sum32_3=function(e,t,r){return e+t+r>>>0},t.sum32_4=function(e,t,r,n){return e+t+r+n>>>0},t.sum32_5=function(e,t,r,n,i){return e+t+r+n+i>>>0},t.sum64=function(e,t,r,n){var i=e[t],a=n+e[t+1]>>>0,o=+(a<n)+r+i;e[t]=o>>>0,e[t+1]=a},t.sum64_hi=function(e,t,r,n){return+(t+n>>>0<t)+e+r>>>0},t.sum64_lo=function(e,t,r,n){return t+n>>>0},t.sum64_4_hi=function(e,t,r,n,i,a,o,s){var l,c=t;return e+r+i+o+(l=0+ +((c=c+n>>>0)<t)+ +((c=c+a>>>0)<a)+ +((c=c+s>>>0)<s))>>>0},t.sum64_4_lo=function(e,t,r,n,i,a,o,s){return t+n+a+s>>>0},t.sum64_5_hi=function(e,t,r,n,i,a,o,s,l,c){var u,d=t;return e+r+i+o+l+(u=0+ +((d=d+n>>>0)<t)+ +((d=d+a>>>0)<a)+ +((d=d+s>>>0)<s)+ +((d=d+c>>>0)<c))>>>0},t.sum64_5_lo=function(e,t,r,n,i,a,o,s,l,c){return t+n+a+s+c>>>0},t.rotr64_hi=function(e,t,r){return(t<<32-r|e>>>r)>>>0},t.rotr64_lo=function(e,t,r){return(e<<32-r|t>>>r)>>>0},t.shr64_hi=function(e,t,r){return e>>>r},t.shr64_lo=function(e,t,r){return(e<<32-r|t>>>r)>>>0}},4910:function(e,t,r){"use strict";var n=r(7028),i=r(6545),a=r(3523);function o(e){if(!(this instanceof o))return new o(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=i.toArray(e.entropy,e.entropyEnc||"hex"),r=i.toArray(e.nonce,e.nonceEnc||"hex"),n=i.toArray(e.pers,e.persEnc||"hex");a(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,r,n)}e.exports=o,o.prototype._init=function(e,t,r){var n=e.concat(t).concat(r);this.K=Array(this.outLen/8),this.V=Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(n),this._reseed=1,this.reseedInterval=0x1000000000000},o.prototype._hmac=function(){return new n.hmac(this.hash,this.K)},o.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},o.prototype.reseed=function(e,t,r,n){"string"!=typeof t&&(n=r,r=t,t=null),e=i.toArray(e,t),r=i.toArray(r,n),a(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(r||[])),this._reseed=1},o.prototype.generate=function(e,t,r,n){if(this._reseed>this.reseedInterval)throw Error("Reseed is required");"string"!=typeof t&&(n=r,r=t,t=null),r&&(r=i.toArray(r,n||"hex"),this._update(r));for(var a=[];a.length<e;)this.V=this._hmac().update(this.V).digest(),a=a.concat(this.V);var o=a.slice(0,e);return this._update(r),this._reseed++,i.encode(o,t)}},3782:function(e){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},3533:function(e,t,r){"use strict";var n=r(3782),i=r(9029),a=r(6911).Buffer,o=Array(16);function s(){i.call(this,64),this._a=0x67452301,this._b=0xefcdab89,this._c=0x98badcfe,this._d=0x10325476}function l(e,t){return e<<t|e>>>32-t}function c(e,t,r,n,i,a,o){return l(e+(t&r|~t&n)+i+a|0,o)+t|0}function u(e,t,r,n,i,a,o){return l(e+(t&n|r&~n)+i+a|0,o)+t|0}function d(e,t,r,n,i,a,o){return l(e+(t^r^n)+i+a|0,o)+t|0}function f(e,t,r,n,i,a,o){return l(e+(r^(t|~n))+i+a|0,o)+t|0}n(s,i),s.prototype._update=function(){for(var e=o,t=0;t<16;++t)e[t]=this._block.readInt32LE(4*t);var r=this._a,n=this._b,i=this._c,a=this._d;r=c(r,n,i,a,e[0],0xd76aa478,7),a=c(a,r,n,i,e[1],0xe8c7b756,12),i=c(i,a,r,n,e[2],0x242070db,17),n=c(n,i,a,r,e[3],0xc1bdceee,22),r=c(r,n,i,a,e[4],0xf57c0faf,7),a=c(a,r,n,i,e[5],0x4787c62a,12),i=c(i,a,r,n,e[6],0xa8304613,17),n=c(n,i,a,r,e[7],0xfd469501,22),r=c(r,n,i,a,e[8],0x698098d8,7),a=c(a,r,n,i,e[9],0x8b44f7af,12),i=c(i,a,r,n,e[10],0xffff5bb1,17),n=c(n,i,a,r,e[11],0x895cd7be,22),r=c(r,n,i,a,e[12],0x6b901122,7),a=c(a,r,n,i,e[13],0xfd987193,12),i=c(i,a,r,n,e[14],0xa679438e,17),n=c(n,i,a,r,e[15],0x49b40821,22),r=u(r,n,i,a,e[1],0xf61e2562,5),a=u(a,r,n,i,e[6],0xc040b340,9),i=u(i,a,r,n,e[11],0x265e5a51,14),n=u(n,i,a,r,e[0],0xe9b6c7aa,20),r=u(r,n,i,a,e[5],0xd62f105d,5),a=u(a,r,n,i,e[10],0x2441453,9),i=u(i,a,r,n,e[15],0xd8a1e681,14),n=u(n,i,a,r,e[4],0xe7d3fbc8,20),r=u(r,n,i,a,e[9],0x21e1cde6,5),a=u(a,r,n,i,e[14],0xc33707d6,9),i=u(i,a,r,n,e[3],0xf4d50d87,14),n=u(n,i,a,r,e[8],0x455a14ed,20),r=u(r,n,i,a,e[13],0xa9e3e905,5),a=u(a,r,n,i,e[2],0xfcefa3f8,9),i=u(i,a,r,n,e[7],0x676f02d9,14),n=u(n,i,a,r,e[12],0x8d2a4c8a,20),r=d(r,n,i,a,e[5],0xfffa3942,4),a=d(a,r,n,i,e[8],0x8771f681,11),i=d(i,a,r,n,e[11],0x6d9d6122,16),n=d(n,i,a,r,e[14],0xfde5380c,23),r=d(r,n,i,a,e[1],0xa4beea44,4),a=d(a,r,n,i,e[4],0x4bdecfa9,11),i=d(i,a,r,n,e[7],0xf6bb4b60,16),n=d(n,i,a,r,e[10],0xbebfbc70,23),r=d(r,n,i,a,e[13],0x289b7ec6,4),a=d(a,r,n,i,e[0],0xeaa127fa,11),i=d(i,a,r,n,e[3],0xd4ef3085,16),n=d(n,i,a,r,e[6],0x4881d05,23),r=d(r,n,i,a,e[9],0xd9d4d039,4),a=d(a,r,n,i,e[12],0xe6db99e5,11),i=d(i,a,r,n,e[15],0x1fa27cf8,16),n=d(n,i,a,r,e[2],0xc4ac5665,23),r=f(r,n,i,a,e[0],0xf4292244,6),a=f(a,r,n,i,e[7],0x432aff97,10),i=f(i,a,r,n,e[14],0xab9423a7,15),n=f(n,i,a,r,e[5],0xfc93a039,21),r=f(r,n,i,a,e[12],0x655b59c3,6),a=f(a,r,n,i,e[3],0x8f0ccc92,10),i=f(i,a,r,n,e[10],0xffeff47d,15),n=f(n,i,a,r,e[1],0x85845dd1,21),r=f(r,n,i,a,e[8],0x6fa87e4f,6),a=f(a,r,n,i,e[15],0xfe2ce6e0,10),i=f(i,a,r,n,e[6],0xa3014314,15),n=f(n,i,a,r,e[13],0x4e0811a1,21),r=f(r,n,i,a,e[4],0xf7537e82,6),a=f(a,r,n,i,e[11],0xbd3af235,10),i=f(i,a,r,n,e[2],0x2ad7d2bb,15),n=f(n,i,a,r,e[9],0xeb86d391,21),this._a=this._a+r|0,this._b=this._b+n|0,this._c=this._c+i|0,this._d=this._d+a|0},s.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=a.allocUnsafe(16);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e},e.exports=s},1354:function(e,t,r){var n=r(711),i=r(3500);function a(e){this.rand=e||new i.Rand}e.exports=a,a.create=function(e){return new a(e)},a.prototype._randbelow=function(e){var t=Math.ceil(e.bitLength()/8);do var r=new n(this.rand.generate(t));while(r.cmp(e)>=0)return r},a.prototype._randrange=function(e,t){var r=t.sub(e);return e.add(this._randbelow(r))},a.prototype.test=function(e,t,r){var i=e.bitLength(),a=n.mont(e),o=new n(1).toRed(a);t||(t=Math.max(1,i/48|0));for(var s=e.subn(1),l=0;!s.testn(l);l++);for(var c=e.shrn(l),u=s.toRed(a),d=!0;t>0;t--){var f=this._randrange(new n(2),s);r&&r(f);var h=f.toRed(a).redPow(c);if(0!==h.cmp(o)&&0!==h.cmp(u)){for(var p=1;p<l;p++){if(0===(h=h.redSqr()).cmp(o))return!1;if(0===h.cmp(u))break}if(p===l)return!1}}return d},a.prototype.getDivisor=function(e,t){var r=e.bitLength(),i=n.mont(e),a=new n(1).toRed(i);t||(t=Math.max(1,r/48|0));for(var o=e.subn(1),s=0;!o.testn(s);s++);for(var l=e.shrn(s),c=o.toRed(i);t>0;t--){var u=this._randrange(new n(2),o),d=e.gcd(u);if(0!==d.cmpn(1))return d;var f=u.toRed(i).redPow(l);if(0!==f.cmp(a)&&0!==f.cmp(c)){for(var h=1;h<s;h++){if(0===(f=f.redSqr()).cmp(a))return f.fromRed().subn(1).gcd(e);if(0===f.cmp(c))break}if(h===s)return(f=f.redSqr()).fromRed().subn(1).gcd(e)}}return!1}},3523:function(e){function t(e,t){if(!e)throw Error(t||"Assertion failed")}e.exports=t,t.equal=function(e,t,r){if(e!=t)throw Error(r||"Assertion failed: "+e+" != "+t)}},6545:function(e,t){"use strict";var r=t;function n(e){return 1===e.length?"0"+e:e}function i(e){for(var t="",r=0;r<e.length;r++)t+=n(e[r].toString(16));return t}r.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"!=typeof e){for(var n=0;n<e.length;n++)r[n]=0|e[n];return r}if("hex"===t){(e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e);for(var n=0;n<e.length;n+=2)r.push(parseInt(e[n]+e[n+1],16))}else for(var n=0;n<e.length;n++){var i=e.charCodeAt(n),a=i>>8,o=255&i;a?r.push(a,o):r.push(o)}return r},r.zero2=n,r.toHex=i,r.encode=function(e,t){return"hex"===t?i(e):e}},8687:function(e,t,r){"use strict";var n=r(7160);t.certificate=r(8782),t.RSAPrivateKey=n.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())}),t.RSAPublicKey=n.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())}),t.PublicKey=n.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(i),this.key("subjectPublicKey").bitstr())});var i=n.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())});t.PrivateKey=n.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(i),this.key("subjectPrivateKey").octstr())}),t.EncryptedPrivateKey=n.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())}),t.DSAPrivateKey=n.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())}),t.DSAparam=n.define("DSAparam",function(){this.int()}),t.ECPrivateKey=n.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(a),this.key("publicKey").optional().explicit(1).bitstr())});var a=n.define("ECParameters",function(){this.choice({namedCurve:this.objid()})});t.signature=n.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())})},8782:function(e,t,r){"use strict";var n=r(7160),i=n.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),a=n.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),o=n.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),s=n.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(o),this.key("subjectPublicKey").bitstr())}),l=n.define("RelativeDistinguishedName",function(){this.setof(a)}),c=n.define("RDNSequence",function(){this.seqof(l)}),u=n.define("Name",function(){this.choice({rdnSequence:this.use(c)})}),d=n.define("Validity",function(){this.seq().obj(this.key("notBefore").use(i),this.key("notAfter").use(i))}),f=n.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),h=n.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(o),this.key("issuer").use(u),this.key("validity").use(d),this.key("subject").use(u),this.key("subjectPublicKeyInfo").use(s),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(f).optional())});e.exports=n.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(h),this.key("signatureAlgorithm").use(o),this.key("signatureValue").bitstr())})},6501:function(e,t,r){var n=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r\+\/\=]+)[\n\r]+/m,i=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,a=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r\+\/\=]+)-----END \1-----$/m,o=r(8368),s=r(6594),l=r(6911).Buffer;e.exports=function(e,t){var r,c=e.toString(),u=c.match(n);if(u){var d="aes"+u[1],f=l.from(u[2],"hex"),h=l.from(u[3].replace(/[\r\n]/g,""),"base64"),p=o(t,f.slice(0,8),parseInt(u[1],10)).key,b=[],g=s.createDecipheriv(d,p,f);b.push(g.update(h)),b.push(g.final()),r=l.concat(b)}else r=new l(c.match(a)[2].replace(/[\r\n]/g,""),"base64");return{tag:c.match(i)[1],data:r}}},9902:function(e,t,r){var n=r(8687),i=r(2510),a=r(6501),o=r(6594),s=r(4978),l=r(6911).Buffer;function c(e){"object"!=typeof e||l.isBuffer(e)||(t=e.passphrase,e=e.key),"string"==typeof e&&(e=l.from(e));var t,r,i,o=a(e,t),s=o.tag,c=o.data;switch(s){case"CERTIFICATE":i=n.certificate.decode(c,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(!i&&(i=n.PublicKey.decode(c,"der")),r=i.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return n.RSAPublicKey.decode(i.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return i.subjectPrivateKey=i.subjectPublicKey,{type:"ec",data:i};case"1.2.840.10040.4.1":return i.algorithm.params.pub_key=n.DSAparam.decode(i.subjectPublicKey.data,"der"),{type:"dsa",data:i.algorithm.params};default:throw Error("unknown key id "+r)}case"ENCRYPTED PRIVATE KEY":c=u(c=n.EncryptedPrivateKey.decode(c,"der"),t);case"PRIVATE KEY":switch(r=(i=n.PrivateKey.decode(c,"der")).algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return n.RSAPrivateKey.decode(i.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:i.algorithm.curve,privateKey:n.ECPrivateKey.decode(i.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return i.algorithm.params.priv_key=n.DSAparam.decode(i.subjectPrivateKey,"der"),{type:"dsa",params:i.algorithm.params};default:throw Error("unknown key id "+r)}case"RSA PUBLIC KEY":return n.RSAPublicKey.decode(c,"der");case"RSA PRIVATE KEY":return n.RSAPrivateKey.decode(c,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:n.DSAPrivateKey.decode(c,"der")};case"EC PRIVATE KEY":return{curve:(c=n.ECPrivateKey.decode(c,"der")).parameters.value,privateKey:c.privateKey};default:throw Error("unknown key type "+s)}}function u(e,t){var r=e.algorithm.decrypt.kde.kdeparams.salt,n=parseInt(e.algorithm.decrypt.kde.kdeparams.iters.toString(),10),a=i[e.algorithm.decrypt.cipher.algo.join(".")],c=e.algorithm.decrypt.cipher.iv,u=e.subjectPrivateKey,d=parseInt(a.split("-")[1],10)/8,f=s.pbkdf2Sync(t,r,n,d,"sha1"),h=o.createDecipheriv(a,f,c),p=[];return p.push(h.update(u)),p.push(h.final()),l.concat(p)}e.exports=c,c.signature=n.signature},4978:function(e,t,r){var n=r(6113),i=r(5349),a=r(7007),o=r(5407);function s(e,t,r,s,l,c){if(i(r,s),e=o(e,a,"Password"),t=o(t,a,"Salt"),"function"==typeof l&&(c=l,l="sha1"),"function"!=typeof c)throw Error("No callback provided to pbkdf2");return n.pbkdf2(e,t,r,s,l,c)}function l(e,t,r,s,l){return i(r,s),e=o(e,a,"Password"),t=o(t,a,"Salt"),l=l||"sha1",n.pbkdf2Sync(e,t,r,s,l)}n.pbkdf2Sync&&-1!==n.pbkdf2Sync.toString().indexOf("keylen, digest")?(t.pbkdf2Sync=l,t.pbkdf2=s):(t.pbkdf2Sync=r(2127),t.pbkdf2=r(9601))},9601:function(t,r,n){var a,o=n(6911).Buffer,s=n(5349),l=n(7007),c=n(2127),u=n(5407),d=e.g.crypto&&e.g.crypto.subtle,f={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},h=[];function p(t){if(e.g.process&&!e.g.process.browser||!d||!d.importKey||!d.deriveBits)return Promise.resolve(!1);if(void 0!==h[t])return h[t];var r=b(a=a||o.alloc(8),a,10,128,t).then(function(){return!0}).catch(function(){return!1});return h[t]=r,r}function b(e,t,r,n,i){return d.importKey("raw",e,{name:"PBKDF2"},!1,["deriveBits"]).then(function(e){return d.deriveBits({name:"PBKDF2",salt:t,iterations:r,hash:{name:i}},e,n<<3)}).then(function(e){return o.from(e)})}function g(e,t){e.then(function(e){i.default.nextTick(function(){t(null,e)})},function(e){i.default.nextTick(function(){t(e)})})}t.exports=function(t,r,n,a,o,d){"function"==typeof o&&(d=o,o=void 0);var h=f[(o=o||"sha1").toLowerCase()];if(!h||"function"!=typeof e.g.Promise)return i.default.nextTick(function(){var e;try{e=c(t,r,n,a,o)}catch(e){return d(e)}d(null,e)});if(s(n,a),t=u(t,l,"Password"),r=u(r,l,"Salt"),"function"!=typeof d)throw Error("No callback provided to pbkdf2");g(p(h).then(function(e){return e?b(t,r,n,a,h):c(t,r,n,a,o)}),d)}},7007:function(e){e.exports="utf-8"},5349:function(e){var t=0x3fffffff;e.exports=function(e,r){if("number"!=typeof e)throw TypeError("Iterations not a number");if(e<0)throw TypeError("Bad iterations");if("number"!=typeof r)throw TypeError("Key length not a number");if(r<0||r>t||r!=r)throw TypeError("Bad key length")}},2127:function(e,t,r){var n={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20},i=r(4873),a=r(6911).Buffer,o=r(5349),s=r(7007),l=r(5407);e.exports=function(e,t,r,c,u){o(r,c),e=l(e,s,"Password"),t=l(t,s,"Salt"),u=u||"sha1";var d=a.allocUnsafe(c),f=a.allocUnsafe(t.length+4);t.copy(f,0,0,t.length);for(var h=0,p=n[u],b=Math.ceil(c/p),g=1;g<=b;g++){f.writeUInt32BE(g,t.length);for(var m=i(u,e).update(f).digest(),v=m,y=1;y<r;y++){v=i(u,e).update(v).digest();for(var x=0;x<p;x++)m[x]^=v[x]}m.copy(d,h),h+=p}return d}},5407:function(e,t,r){var n=r(6911).Buffer;e.exports=function(e,t,r){if(n.isBuffer(e))return e;if("string"==typeof e)return n.from(e,t);if(ArrayBuffer.isView(e))return n.from(e.buffer);throw TypeError(r+" must be a string, a Buffer, a typed array or a DataView")}},9783:function(e,t,r){t.publicEncrypt=r(3995),t.privateDecrypt=r(4366),t.privateEncrypt=function(e,r){return t.publicEncrypt(e,r,!0)},t.publicDecrypt=function(e,r){return t.privateDecrypt(e,r,!0)}},5520:function(e,t,r){var n=r(9739),i=r(6911).Buffer;function a(e){var t=i.allocUnsafe(4);return t.writeUInt32BE(e,0),t}e.exports=function(e,t){for(var r,o=i.alloc(0),s=0;o.length<t;)r=a(s++),o=i.concat([o,n("sha1").update(e).update(r).digest()]);return o.slice(0,t)}},4366:function(e,t,r){var n=r(9902),i=r(5520),a=r(6386),o=r(711),s=r(7166),l=r(9739),c=r(1607),u=r(6911).Buffer;function d(e,t){var r=e.modulus.byteLength(),n=l("sha1").update(u.alloc(0)).digest(),o=n.length;if(0!==t[0])throw Error("decryption error");var s=t.slice(1,o+1),c=t.slice(o+1),d=a(s,i(c,o)),f=a(c,i(d,r-o-1));if(h(n,f.slice(0,o)))throw Error("decryption error");for(var p=o;0===f[p];)p++;if(1!==f[p++])throw Error("decryption error");return f.slice(p)}function f(e,t,r){for(var n=t.slice(0,2),i=2,a=0;0!==t[i++];)if(i>=t.length){a++;break}var o=t.slice(2,i-1);if(("0002"!==n.toString("hex")&&!r||"0001"!==n.toString("hex")&&r)&&a++,o.length<8&&a++,a)throw Error("decryption error");return t.slice(i)}function h(e,t){e=u.from(e),t=u.from(t);var r=0,n=e.length;e.length!==t.length&&(r++,n=Math.min(e.length,t.length));for(var i=-1;++i<n;)r+=e[i]^t[i];return r}e.exports=function(e,t,r){var i,a=e.padding?e.padding:r?1:4,l=n(e),h=l.modulus.byteLength();if(t.length>h||new o(t).cmp(l.modulus)>=0)throw Error("decryption error");i=r?c(new o(t),l):s(t,l);var p=u.alloc(h-i.length);if(i=u.concat([p,i],h),4===a)return d(l,i);if(1===a)return f(l,i,r);if(3===a)return i;throw Error("unknown padding")}},3995:function(e,t,r){var n=r(9902),i=r(7223),a=r(9739),o=r(5520),s=r(6386),l=r(711),c=r(1607),u=r(7166),d=r(6911).Buffer;function f(e,t){var r=e.modulus.byteLength(),n=t.length,c=a("sha1").update(d.alloc(0)).digest(),u=c.length,f=2*u;if(n>r-f-2)throw Error("message too long");var h=d.alloc(r-n-f-2),p=r-u-1,b=i(u),g=s(d.concat([c,h,d.alloc(1,1),t],p),o(b,p)),m=s(b,o(g,u));return new l(d.concat([d.alloc(1),m,g],r))}function h(e,t,r){var n,i=t.length,a=e.modulus.byteLength();if(i>a-11)throw Error("message too long");return n=r?d.alloc(a-i-3,255):p(a-i-3),new l(d.concat([d.from([0,r?1:2]),n,d.alloc(1),t],a))}function p(e){for(var t,r=d.allocUnsafe(e),n=0,a=i(2*e),o=0;n<e;)o===a.length&&(a=i(2*e),o=0),(t=a[o++])&&(r[n++]=t);return r}e.exports=function(e,t,r){var i,a=e.padding?e.padding:r?1:4,o=n(e);if(4===a)i=f(o,t);else if(1===a)i=h(o,t,r);else if(3===a){if((i=new l(t)).cmp(o.modulus)>=0)throw Error("data too long for modulus")}else throw Error("unknown padding");return r?u(i,o):c(i,o)}},1607:function(e,t,r){var n=r(711),i=r(6911).Buffer;e.exports=function(e,t){return i.from(e.toRed(n.mont(t.modulus)).redPow(new n(t.publicExponent)).fromRed().toArray())}},6386:function(e){e.exports=function(e,t){for(var r=e.length,n=-1;++n<r;)e[n]^=t[n];return e}},7223:function(t,r,n){"use strict";var a=65536,o=0xffffffff;function s(){throw Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}var l=n(6911).Buffer,c=e.g.crypto||e.g.msCrypto;function u(e,t){if(e>o)throw RangeError("requested too many random bytes");var r=l.allocUnsafe(e);if(e>0)if(e>a)for(var n=0;n<e;n+=a)c.getRandomValues(r.slice(n,n+a));else c.getRandomValues(r);return"function"==typeof t?i.default.nextTick(function(){t(null,r)}):r}c&&c.getRandomValues?t.exports=u:t.exports=s},6445:function(t,r,n){"use strict";function a(){throw Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}var o=n(6911);n(7223);var s=o.Buffer,l=o.kMaxLength,c=e.g.crypto||e.g.msCrypto,u=0xffffffff;function d(e,t){if("number"!=typeof e||e!=e)throw TypeError("offset must be a number");if(e>u||e<0)throw TypeError("offset must be a uint32");if(e>l||e>t)throw RangeError("offset out of range")}function f(e,t,r){if("number"!=typeof e||e!=e)throw TypeError("size must be a number");if(e>u||e<0)throw TypeError("size must be a uint32");if(e+t>r||e>l)throw RangeError("buffer too small")}function h(t,r,n,i){if(!s.isBuffer(t)&&!(t instanceof e.g.Uint8Array))throw TypeError('"buf" argument must be a Buffer or Uint8Array');if("function"==typeof r)i=r,r=0,n=t.length;else if("function"==typeof n)i=n,n=t.length-r;else if("function"!=typeof i)throw TypeError('"cb" argument must be a function');return d(r,t.length),f(n,r,t.length),p(t,r,n,i)}function p(e,t,r,n){var a=new Uint8Array(e.buffer,t,r);return(c.getRandomValues(a),n)?void i.default.nextTick(function(){n(null,e)}):e}function b(t,r,n){if(void 0===r&&(r=0),!s.isBuffer(t)&&!(t instanceof e.g.Uint8Array))throw TypeError('"buf" argument must be a Buffer or Uint8Array');return d(r,t.length),void 0===n&&(n=t.length-r),f(n,r,t.length),p(t,r,n)}c&&c.getRandomValues?(r.randomFill=h,r.randomFillSync=b):(r.randomFill=a,r.randomFillSync=a)},4646:function(e){"use strict";let t={};function r(e,r,n){function i(e,t,n){return"string"==typeof r?r:r(e,t,n)}n||(n=Error);class a extends n{constructor(e,t,r){super(i(e,t,r))}}a.prototype.name=n.name,a.prototype.code=e,t[e]=a}function n(e,t){if(!Array.isArray(e))return`of ${t} ${String(e)}`;{let r=e.length;return(e=e.map(e=>String(e)),r>2)?`one of ${t} ${e.slice(0,r-1).join(", ")}, or `+e[r-1]:2===r?`one of ${t} ${e[0]} or ${e[1]}`:`of ${t} ${e[0]}`}}function i(e,t,r){return e.substr(!r||r<0?0:+r,t.length)===t}function a(e,t,r){return(void 0===r||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}function o(e,t,r){return"number"!=typeof r&&(r=0),!(r+t.length>e.length)&&-1!==e.indexOf(t,r)}r("ERR_INVALID_OPT_VALUE",function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'},TypeError),r("ERR_INVALID_ARG_TYPE",function(e,t,r){let s,l;if("string"==typeof t&&i(t,"not ")?(s="must not be",t=t.replace(/^not /,"")):s="must be",a(e," argument"))l=`The ${e} ${s} ${n(t,"type")}`;else{let r=o(e,".")?"property":"argument";l=`The "${e}" ${r} ${s} ${n(t,"type")}`}return l+`. Received type ${typeof r}`},TypeError),r("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),r("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"}),r("ERR_STREAM_PREMATURE_CLOSE","Premature close"),r("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"}),r("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),r("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),r("ERR_STREAM_WRITE_AFTER_END","write after end"),r("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),r("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError),r("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.q=t},2403:function(e,t,r){"use strict";var n=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=u;var a=r(1709),o=r(7337);r(3782)(u,a);for(var s=n(o.prototype),l=0;l<s.length;l++){var c=s[l];u.prototype[c]||(u.prototype[c]=o.prototype[c])}function u(e){if(!(this instanceof u))return new u(e);a.call(this,e),o.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",d)))}function d(){this._writableState.ended||i.default.nextTick(f,this)}function f(e){e.end()}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(u.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(u.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})},7889:function(e,t,r){"use strict";e.exports=i;var n=r(1170);function i(e){if(!(this instanceof i))return new i(e);n.call(this,e)}r(3782)(i,n),i.prototype._transform=function(e,t,r){r(null,e)}},1709:function(t,r,n){"use strict";t.exports=M,M.ReadableState=C,n(2361).EventEmitter;var a,o,s,l,c,u=function(e,t){return e.listeners(t).length},d=n(4678),f=n(4300).Buffer,h=e.g.Uint8Array||function(){};function p(e){return f.from(e)}function b(e){return f.isBuffer(e)||e instanceof h}var g=n(3837);o=g&&g.debuglog?g.debuglog("stream"):function(){};var m=n(4379),v=n(7025),y=n(6776).getHighWaterMark,x=n(4646).q,w=x.ERR_INVALID_ARG_TYPE,_=x.ERR_STREAM_PUSH_AFTER_EOF,S=x.ERR_METHOD_NOT_IMPLEMENTED,E=x.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;n(3782)(M,d);var k=v.errorOrDestroy,N=["error","close","destroy","pause","resume"];function j(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}function C(e,t,r){a=a||n(2403),e=e||{},"boolean"!=typeof r&&(r=t instanceof a),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=y(this,e,"readableHighWaterMark",r),this.buffer=new m,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(s||(s=n(3704).s),this.decoder=new s(e.encoding),this.encoding=e.encoding)}function M(e){if(a=a||n(2403),!(this instanceof M))return new M(e);var t=this instanceof a;this._readableState=new C(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),d.call(this)}function A(e,t,r,n,i){o("readableAddChunk",t);var a,s=e._readableState;if(null===t)s.reading=!1,P(e,s);else if(i||(a=T(s,t)),a)k(e,a);else if(s.objectMode||t&&t.length>0)if("string"==typeof t||s.objectMode||Object.getPrototypeOf(t)===f.prototype||(t=p(t)),n)s.endEmitted?k(e,new E):R(e,s,t,!0);else if(s.ended)k(e,new _);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!r?(t=s.decoder.write(t),s.objectMode||0!==t.length?R(e,s,t,!1):z(e,s)):R(e,s,t,!1)}else n||(s.reading=!1,z(e,s));return!s.ended&&(s.length<s.highWaterMark||0===s.length)}function R(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&B(e)),z(e,t)}function T(e,t){var r;return b(t)||"string"==typeof t||void 0===t||e.objectMode||(r=new w("chunk",["string","Buffer","Uint8Array"],t)),r}Object.defineProperty(M.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),M.prototype.destroy=v.destroy,M.prototype._undestroy=v.undestroy,M.prototype._destroy=function(e,t){t(e)},M.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=f.from(e,t),t=""),r=!0),A(this,e,t,!1,r)},M.prototype.unshift=function(e){return A(this,e,null,!0,!1)},M.prototype.isPaused=function(){return!1===this._readableState.flowing},M.prototype.setEncoding=function(e){s||(s=n(3704).s);var t=new s(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,i="";null!==r;)i+=t.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var O=0x40000000;function L(e){return e>=O?e=O:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function I(e,t){if(e<=0||0===t.length&&t.ended)return 0;if(t.objectMode)return 1;if(e!=e)if(t.flowing&&t.length)return t.buffer.head.data.length;else return t.length;return(e>t.highWaterMark&&(t.highWaterMark=L(e)),e<=t.length)?e:t.ended?t.length:(t.needReadable=!0,0)}function P(e,t){if(o("onEofChunk"),!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?B(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,D(e)))}}function B(e){var t=e._readableState;o("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(o("emitReadable",t.flowing),t.emittedReadable=!0,i.default.nextTick(D,e))}function D(e){var t=e._readableState;o("emitReadable_",t.destroyed,t.length,t.ended),!t.destroyed&&(t.length||t.ended)&&(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,W(e)}function z(e,t){t.readingMore||(t.readingMore=!0,i.default.nextTick(F,e,t))}function F(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(o("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function $(e){return function(){var t=e._readableState;o("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&u(e,"data")&&(t.flowing=!0,W(e))}}function U(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function H(e){o("readable nexttick read 0"),e.read(0)}function V(e,t){t.resumeScheduled||(t.resumeScheduled=!0,i.default.nextTick(q,e,t))}function q(e,t){o("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),W(e),t.flowing&&!t.reading&&e.read(0)}function W(e){var t=e._readableState;for(o("flow",t.flowing);t.flowing&&null!==e.read(););}function K(e,t){var r;return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r)}function G(e){var t=e._readableState;o("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,i.default.nextTick(X,t,e))}function X(e,t){if(o("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy()}}function Z(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return -1}M.prototype.read=function(e){o("read",e),e=parseInt(e,10);var t,r=this._readableState,n=e;if(0!==e&&(r.emittedReadable=!1),0===e&&r.needReadable&&((0!==r.highWaterMark?r.length>=r.highWaterMark:r.length>0)||r.ended))return o("read: emitReadable",r.length,r.ended),0===r.length&&r.ended?G(this):B(this),null;if(0===(e=I(e,r))&&r.ended)return 0===r.length&&G(this),null;var i=r.needReadable;return o("need readable",i),(0===r.length||r.length-e<r.highWaterMark)&&o("length less than watermark",i=!0),r.ended||r.reading?o("reading or ended",i=!1):i&&(o("do read"),r.reading=!0,r.sync=!0,0===r.length&&(r.needReadable=!0),this._read(r.highWaterMark),r.sync=!1,r.reading||(e=I(n,r))),null===(t=e>0?K(e,r):null)?(r.needReadable=r.length<=r.highWaterMark,e=0):(r.length-=e,r.awaitDrain=0),0===r.length&&(r.ended||(r.needReadable=!0),n!==e&&r.ended&&G(this)),null!==t&&this.emit("data",t),t},M.prototype._read=function(e){k(this,new S("_read()"))},M.prototype.pipe=function(e,t){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e)}n.pipesCount+=1,o("pipe count=%d opts=%j",n.pipesCount,t);var a=t&&!1===t.end||e===i.default.stdout||e===i.default.stderr?m:l;function s(e,t){o("onunpipe"),e===r&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,f())}function l(){o("onend"),e.end()}n.endEmitted?i.default.nextTick(a):r.once("end",a),e.on("unpipe",s);var c=$(r);e.on("drain",c);var d=!1;function f(){o("cleanup"),e.removeListener("close",b),e.removeListener("finish",g),e.removeListener("drain",c),e.removeListener("error",p),e.removeListener("unpipe",s),r.removeListener("end",l),r.removeListener("end",m),r.removeListener("data",h),d=!0,n.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&c()}function h(t){o("ondata");var i=e.write(t);o("dest.write",i),!1===i&&((1===n.pipesCount&&n.pipes===e||n.pipesCount>1&&-1!==Z(n.pipes,e))&&!d&&(o("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function p(t){o("onerror",t),m(),e.removeListener("error",p),0===u(e,"error")&&k(e,t)}function b(){e.removeListener("finish",g),m()}function g(){o("onfinish"),e.removeListener("close",b),m()}function m(){o("unpipe"),r.unpipe(e)}return r.on("data",h),j(e,"error",p),e.once("close",b),e.once("finish",g),e.emit("pipe",r),n.flowing||(o("pipe resume"),r.resume()),e},M.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<i;a++)n[a].emit("unpipe",this,{hasUnpiped:!1});return this}var o=Z(t.pipes,e);return -1===o||(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},M.prototype.on=function(e,t){var r=d.prototype.on.call(this,e,t),n=this._readableState;return"data"===e?(n.readableListening=this.listenerCount("readable")>0,!1!==n.flowing&&this.resume()):"readable"!==e||n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,o("on readable",n.length,n.reading),n.length?B(this):n.reading||i.default.nextTick(H,this)),r},M.prototype.addListener=M.prototype.on,M.prototype.removeListener=function(e,t){var r=d.prototype.removeListener.call(this,e,t);return"readable"===e&&i.default.nextTick(U,this),r},M.prototype.removeAllListeners=function(e){var t=d.prototype.removeAllListeners.apply(this,arguments);return("readable"===e||void 0===e)&&i.default.nextTick(U,this),t},M.prototype.resume=function(){var e=this._readableState;return e.flowing||(o("resume"),e.flowing=!e.readableListening,V(this,e)),e.paused=!1,this},M.prototype.pause=function(){return o("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(o("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},M.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var i in e.on("end",function(){if(o("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(i){o("wrapped data"),r.decoder&&(i=r.decoder.write(i)),r.objectMode&&null==i||(r.objectMode||i&&i.length)&&(t.push(i)||(n=!0,e.pause()))}),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var a=0;a<N.length;a++)e.on(N[a],this.emit.bind(this,N[a]));return this._read=function(t){o("wrapped _read",t),n&&(n=!1,e.resume())},this},"function"==typeof Symbol&&(M.prototype[Symbol.asyncIterator]=function(){return void 0===l&&(l=n(6871)),l(this)}),Object.defineProperty(M.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(M.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(M.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),M._fromList=K,Object.defineProperty(M.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(M.from=function(e,t){return void 0===c&&(c=n(9727)),c(M,e,t)})},1170:function(e,t,r){"use strict";e.exports=u;var n=r(4646).q,i=n.ERR_METHOD_NOT_IMPLEMENTED,a=n.ERR_MULTIPLE_CALLBACK,o=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=n.ERR_TRANSFORM_WITH_LENGTH_0,l=r(2403);function c(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new a);r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function u(e){if(!(this instanceof u))return new u(e);l.call(this,e),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",d)}function d(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?f(this,null,null):this._flush(function(t,r){f(e,t,r)})}function f(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new s;if(e._transformState.transforming)throw new o;return e.push(null)}r(3782)(u,l),u.prototype.push=function(e,t){return this._transformState.needTransform=!1,l.prototype.push.call(this,e,t)},u.prototype._transform=function(e,t,r){r(new i("_transform()"))},u.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},u.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},u.prototype._destroy=function(e,t){l.prototype._destroy.call(this,e,function(e){t(e)})}},7337:function(t,r,n){"use strict";function a(e){var t=this;this.next=null,this.entry=null,this.finish=function(){q(t,e)}}t.exports=C,C.WritableState=j;var o,s,l={deprecate:n(6769)},c=n(4678),u=n(4300).Buffer,d=e.g.Uint8Array||function(){};function f(e){return u.from(e)}function h(e){return u.isBuffer(e)||e instanceof d}var p=n(7025),b=n(6776).getHighWaterMark,g=n(4646).q,m=g.ERR_INVALID_ARG_TYPE,v=g.ERR_METHOD_NOT_IMPLEMENTED,y=g.ERR_MULTIPLE_CALLBACK,x=g.ERR_STREAM_CANNOT_PIPE,w=g.ERR_STREAM_DESTROYED,_=g.ERR_STREAM_NULL_VALUES,S=g.ERR_STREAM_WRITE_AFTER_END,E=g.ERR_UNKNOWN_ENCODING,k=p.errorOrDestroy;function N(){}function j(e,t,r){o=o||n(2403),e=e||{},"boolean"!=typeof r&&(r=t instanceof o),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=b(this,e,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var i=!1===e.decodeStrings;this.decodeStrings=!i,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){P(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}function C(e){var t=this instanceof(o=o||n(2403));if(!t&&!s.call(C,this))return new C(e);this._writableState=new j(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),c.call(this)}function M(e,t){var r=new S;k(e,r),i.default.nextTick(t,r)}function A(e,t,r,n){var a;return null===r?a=new _:"string"==typeof r||t.objectMode||(a=new m("chunk",["string","Buffer"],r)),!a||(k(e,a),i.default.nextTick(n,a),!1)}function R(e,t,r){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=u.from(t,r)),t}function T(e,t,r,n,i,a){if(!r){var o=R(t,n,i);n!==o&&(r=!0,i="buffer",n=o)}var s=t.objectMode?1:n.length;t.length+=s;var l=t.length<t.highWaterMark;if(l||(t.needDrain=!0),t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:a,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else O(e,t,!1,s,n,i,a);return l}function O(e,t,r,n,i,a,o){t.writelen=n,t.writecb=o,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new w("write")):r?e._writev(i,t.onwrite):e._write(i,a,t.onwrite),t.sync=!1}function L(e,t,r,n,a){--t.pendingcb,r?(i.default.nextTick(a,n),i.default.nextTick(H,e,t),e._writableState.errorEmitted=!0,k(e,n)):(a(n),e._writableState.errorEmitted=!0,k(e,n),H(e,t))}function I(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function P(e,t){var r=e._writableState,n=r.sync,a=r.writecb;if("function"!=typeof a)throw new y;if(I(r),t)L(e,r,n,t,a);else{var o=F(r)||e.destroyed;o||r.corked||r.bufferProcessing||!r.bufferedRequest||z(e,r),n?i.default.nextTick(B,e,r,o,a):B(e,r,o,a)}}function B(e,t,r,n){r||D(e,t),t.pendingcb--,n(),H(e,t)}function D(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function z(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=Array(t.bufferedRequestCount),i=t.corkedRequestsFree;i.entry=r;for(var o=0,s=!0;r;)n[o]=r,r.isBuf||(s=!1),r=r.next,o+=1;n.allBuffers=s,O(e,t,!0,t.length,n,"",i.finish),t.pendingcb++,t.lastBufferedRequest=null,i.next?(t.corkedRequestsFree=i.next,i.next=null):t.corkedRequestsFree=new a(t),t.bufferedRequestCount=0}else{for(;r;){var l=r.chunk,c=r.encoding,u=r.callback,d=t.objectMode?1:l.length;if(O(e,t,!1,d,l,c,u),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function F(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function $(e,t){e._final(function(r){t.pendingcb--,r&&k(e,r),t.prefinished=!0,e.emit("prefinish"),H(e,t)})}function U(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,i.default.nextTick($,e,t)))}function H(e,t){var r=F(t);if(r&&(U(e,t),0===t.pendingcb)&&(t.finished=!0,e.emit("finish"),t.autoDestroy)){var n=e._readableState;(!n||n.autoDestroy&&n.endEmitted)&&e.destroy()}return r}function V(e,t,r){t.ending=!0,H(e,t),r&&(t.finished?i.default.nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function q(e,t,r){var n=e.entry;for(e.entry=null;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree.next=e}n(3782)(C,c),j.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(j.prototype,"buffer",{get:l.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(s=Function.prototype[Symbol.hasInstance],Object.defineProperty(C,Symbol.hasInstance,{value:function(e){return!!s.call(this,e)||this===C&&e&&e._writableState instanceof j}})):s=function(e){return e instanceof this},C.prototype.pipe=function(){k(this,new x)},C.prototype.write=function(e,t,r){var n=this._writableState,i=!1,a=!n.objectMode&&h(e);return a&&!u.isBuffer(e)&&(e=f(e)),"function"==typeof t&&(r=t,t=null),a?t="buffer":t||(t=n.defaultEncoding),"function"!=typeof r&&(r=N),n.ending?M(this,r):(a||A(this,n,e,r))&&(n.pendingcb++,i=T(this,n,a,e,t,r)),i},C.prototype.cork=function(){this._writableState.corked++},C.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||z(this,e))},C.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new E(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(C.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(C.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),C.prototype._write=function(e,t,r){r(new v("_write()"))},C.prototype._writev=null,C.prototype.end=function(e,t,r){var n=this._writableState;return"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||V(this,n,r),this},Object.defineProperty(C.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(C.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),C.prototype.destroy=p.destroy,C.prototype._undestroy=p.undestroy,C.prototype._destroy=function(e,t){t(e)}},6871:function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a,o=r(9698),s=Symbol("lastResolve"),l=Symbol("lastReject"),c=Symbol("error"),u=Symbol("ended"),d=Symbol("lastPromise"),f=Symbol("handlePromise"),h=Symbol("stream");function p(e,t){return{value:e,done:t}}function b(e){var t=e[s];if(null!==t){var r=e[h].read();null!==r&&(e[d]=null,e[s]=null,e[l]=null,t(p(r,!1)))}}function g(e){i.default.nextTick(b,e)}function m(e,t){return function(r,n){e.then(function(){t[u]?r(p(void 0,!0)):t[f](r,n)},n)}}var v=Object.getPrototypeOf(function(){}),y=Object.setPrototypeOf((n(a={get stream(){return this[h]},next:function(){var e,t=this,r=this[c];if(null!==r)return Promise.reject(r);if(this[u])return Promise.resolve(p(void 0,!0));if(this[h].destroyed)return new Promise(function(e,r){i.default.nextTick(function(){t[c]?r(t[c]):e(p(void 0,!0))})});var n=this[d];if(n)e=new Promise(m(n,this));else{var a=this[h].read();if(null!==a)return Promise.resolve(p(a,!1));e=new Promise(this[f])}return this[d]=e,e}},Symbol.asyncIterator,function(){return this}),n(a,"return",function(){var e=this;return new Promise(function(t,r){e[h].destroy(null,function(e){e?r(e):t(p(void 0,!0))})})}),a),v);e.exports=function(e){var t,r=Object.create(y,(n(t={},h,{value:e,writable:!0}),n(t,s,{value:null,writable:!0}),n(t,l,{value:null,writable:!0}),n(t,c,{value:null,writable:!0}),n(t,u,{value:e._readableState.endEmitted,writable:!0}),n(t,f,{value:function(e,t){var n=r[h].read();n?(r[d]=null,r[s]=null,r[l]=null,e(p(n,!1))):(r[s]=e,r[l]=t)},writable:!0}),t));return r[d]=null,o(e,function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=r[l];null!==t&&(r[d]=null,r[s]=null,r[l]=null,t(e)),r[c]=e;return}var n=r[s];null!==n&&(r[d]=null,r[s]=null,r[l]=null,n(p(void 0,!0))),r[u]=!0}),e.on("readable",g.bind(null,r)),r}},4379:function(e,t,r){"use strict";function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach(function(t){a(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),e}var c=r(4300).Buffer,u=r(3837).inspect,d=u&&u.custom||"inspect";function f(e,t,r){c.prototype.copy.call(e,t,r)}e.exports=function(){function e(){o(this,e),this.head=null,this.tail=null,this.length=0}return l(e,[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r}},{key:"concat",value:function(e){if(0===this.length)return c.alloc(0);for(var t=c.allocUnsafe(e>>>0),r=this.head,n=0;r;)f(r.data,t,n),n+=r.data.length,r=r.next;return t}},{key:"consume",value:function(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):r=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,r=1,n=t.data;for(e-=n.length;t=t.next;){var i=t.data,a=e>i.length?i.length:e;if(a===i.length?n+=i:n+=i.slice(0,e),0==(e-=a)){a===i.length?(++r,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(a));break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(e){var t=c.allocUnsafe(e),r=this.head,n=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var i=r.data,a=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,a),0==(e-=a)){a===i.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=i.slice(a));break}++n}return this.length-=n,t}},{key:d,value:function(e,t){return u(this,i({},t,{depth:0,customInspect:!1}))}}]),e}()},7025:function(e){"use strict";function t(e,t){n(e,t),r(e)}function r(e){e._writableState&&!e._writableState.emitClose||(!e._readableState||e._readableState.emitClose)&&e.emit("close")}function n(e,t){e.emit("error",t)}e.exports={destroy:function(e,a){var o=this,s=this._readableState&&this._readableState.destroyed,l=this._writableState&&this._writableState.destroyed;return s||l?a?a(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,i.default.nextTick(n,this,e)):i.default.nextTick(n,this,e)):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!a&&e?o._writableState?o._writableState.errorEmitted?i.default.nextTick(r,o):(o._writableState.errorEmitted=!0,i.default.nextTick(t,o,e)):i.default.nextTick(t,o,e):a?(i.default.nextTick(r,o),a(e)):i.default.nextTick(r,o)})),this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}}},9698:function(e,t,r){"use strict";var n=r(4646).q.ERR_STREAM_PREMATURE_CLOSE;function i(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];e.apply(this,n)}}}function a(){}function o(e){return e.setHeader&&"function"==typeof e.abort}function s(e,t,r){if("function"==typeof t)return s(e,null,t);t||(t={}),r=i(r||a);var l=t.readable||!1!==t.readable&&e.readable,c=t.writable||!1!==t.writable&&e.writable,u=function(){e.writable||f()},d=e._writableState&&e._writableState.finished,f=function(){c=!1,d=!0,l||r.call(e)},h=e._readableState&&e._readableState.endEmitted,p=function(){l=!1,h=!0,c||r.call(e)},b=function(t){r.call(e,t)},g=function(){var t;return l&&!h?(e._readableState&&e._readableState.ended||(t=new n),r.call(e,t)):c&&!d?(e._writableState&&e._writableState.ended||(t=new n),r.call(e,t)):void 0},m=function(){e.req.on("finish",f)};return o(e)?(e.on("complete",f),e.on("abort",g),e.req?m():e.on("request",m)):c&&!e._writableState&&(e.on("end",u),e.on("close",u)),e.on("end",p),e.on("finish",f),!1!==t.error&&e.on("error",b),e.on("close",g),function(){e.removeListener("complete",f),e.removeListener("abort",g),e.removeListener("request",m),e.req&&e.req.removeListener("finish",f),e.removeListener("end",u),e.removeListener("close",u),e.removeListener("finish",f),e.removeListener("end",p),e.removeListener("error",b),e.removeListener("close",g)}}e.exports=s},9727:function(e,t,r){"use strict";function n(e,t,r,n,i,a,o){try{var s=e[a](o),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,i)}function i(e){return function(){var t=this,r=arguments;return new Promise(function(i,a){var o=e.apply(t,r);function s(e){n(o,i,a,s,l,"next",e)}function l(e){n(o,i,a,s,l,"throw",e)}s(void 0)})}}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach(function(t){s(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l=r(4646).q.ERR_INVALID_ARG_TYPE;e.exports=function(e,t,r){if(t&&"function"==typeof t.next)n=t;else if(t&&t[Symbol.asyncIterator])n=t[Symbol.asyncIterator]();else if(t&&t[Symbol.iterator])n=t[Symbol.iterator]();else throw new l("iterable",["Iterable"],t);var n,a=new e(o({objectMode:!0},r)),s=!1;function c(){return u.apply(this,arguments)}function u(){return(u=i(function*(){try{var e=yield n.next(),t=e.value;e.done?a.push(null):a.push((yield t))?c():s=!1}catch(e){a.destroy(e)}})).apply(this,arguments)}return a._read=function(){s||(s=!0,c())},a}},8442:function(e,t,r){"use strict";function n(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}var i,a=r(4646).q,o=a.ERR_MISSING_ARGS,s=a.ERR_STREAM_DESTROYED;function l(e){if(e)throw e}function c(e){return e.setHeader&&"function"==typeof e.abort}function u(e,t,a,o){o=n(o);var l=!1;e.on("close",function(){l=!0}),void 0===i&&(i=r(9698)),i(e,{readable:t,writable:a},function(e){if(e)return o(e);l=!0,o()});var u=!1;return function(t){if(!l&&!u){if(u=!0,c(e))return e.abort();if("function"==typeof e.destroy)return e.destroy();o(t||new s("pipe"))}}}function d(e){e()}function f(e,t){return e.pipe(t)}function h(e){return e.length&&"function"==typeof e[e.length-1]?e.pop():l}e.exports=function(){for(var e,t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=h(r);if(Array.isArray(r[0])&&(r=r[0]),r.length<2)throw new o("streams");var a=r.map(function(t,n){var o=n<r.length-1;return u(t,o,n>0,function(t){e||(e=t),t&&a.forEach(d),o||(a.forEach(d),i(e))})});return r.reduce(f)}},6776:function(e,t,r){"use strict";var n=r(4646).q.ERR_INVALID_OPT_VALUE;function i(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}e.exports={getHighWaterMark:function(e,t,r,a){var o=i(t,a,r);if(null!=o){if(!(isFinite(o)&&Math.floor(o)===o)||o<0)throw new n(a?r:"highWaterMark",o);return Math.floor(o)}return e.objectMode?16:16384}}},4678:function(e,t,r){e.exports=r(2781)},3726:function(e,t,r){var n=r(2781);"disable"===i.default.env.READABLE_STREAM&&n?(e.exports=n.Readable,Object.assign(e.exports,n),e.exports.Stream=n):((t=e.exports=r(1709)).Stream=n||t,t.Readable=t,t.Writable=r(7337),t.Duplex=r(2403),t.Transform=r(1170),t.PassThrough=r(7889),t.finished=r(9698),t.pipeline=r(8442))},3225:function(e,t,r){"use strict";var n=r(4300).Buffer,i=r(3782),a=r(9029),o=Array(16),s=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],l=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],c=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],u=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],d=[0,0x5a827999,0x6ed9eba1,0x8f1bbcdc,0xa953fd4e],f=[0x50a28be6,0x5c4dd124,0x6d703ef3,0x7a6d76e9,0];function h(){a.call(this,64),this._a=0x67452301,this._b=0xefcdab89,this._c=0x98badcfe,this._d=0x10325476,this._e=0xc3d2e1f0}function p(e,t){return e<<t|e>>>32-t}function b(e,t,r,n,i,a,o,s){return p(e+(t^r^n)+a+o|0,s)+i|0}function g(e,t,r,n,i,a,o,s){return p(e+(t&r|~t&n)+a+o|0,s)+i|0}function m(e,t,r,n,i,a,o,s){return p(e+((t|~r)^n)+a+o|0,s)+i|0}function v(e,t,r,n,i,a,o,s){return p(e+(t&n|r&~n)+a+o|0,s)+i|0}function y(e,t,r,n,i,a,o,s){return p(e+(t^(r|~n))+a+o|0,s)+i|0}i(h,a),h.prototype._update=function(){for(var e,t,r=o,n=0;n<16;++n)r[n]=this._block.readInt32LE(4*n);for(var i=0|this._a,a=0|this._b,h=0|this._c,x=0|this._d,w=0|this._e,_=0|this._a,S=0|this._b,E=0|this._c,k=0|this._d,N=0|this._e,j=0;j<80;j+=1)j<16?(e=b(i,a,h,x,w,r[s[j]],d[0],c[j]),t=y(_,S,E,k,N,r[l[j]],f[0],u[j])):j<32?(e=g(i,a,h,x,w,r[s[j]],d[1],c[j]),t=v(_,S,E,k,N,r[l[j]],f[1],u[j])):j<48?(e=m(i,a,h,x,w,r[s[j]],d[2],c[j]),t=m(_,S,E,k,N,r[l[j]],f[2],u[j])):j<64?(e=v(i,a,h,x,w,r[s[j]],d[3],c[j]),t=g(_,S,E,k,N,r[l[j]],f[3],u[j])):(e=y(i,a,h,x,w,r[s[j]],d[4],c[j]),t=b(_,S,E,k,N,r[l[j]],f[4],u[j])),i=w,w=x,x=p(h,10),h=a,a=e,_=N,N=k,k=p(E,10),E=S,S=t;var C=this._b+h+k|0;this._b=this._c+x+N|0,this._c=this._d+w+_|0,this._d=this._e+i+S|0,this._e=this._a+a+E|0,this._a=C},h.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=n.alloc?n.alloc(20):new n(20);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e.writeInt32LE(this._e,16),e},e.exports=h},5055:function(e,t,r){var n=r(4300),i=n.Buffer;function a(e,t){for(var r in e)t[r]=e[r]}function o(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=n:(a(n,t),t.Buffer=o),o.prototype=Object.create(i.prototype),a(i,o),o.from=function(e,t,r){if("number"==typeof e)throw TypeError("Argument must not be a number");return i(e,t,r)},o.alloc=function(e,t,r){if("number"!=typeof e)throw TypeError("Argument must be a number");var n=i(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},o.allocUnsafe=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return i(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return n.SlowBuffer(e)}},6911:function(e,t,r){var n=r(4300),i=n.Buffer;function a(e,t){for(var r in e)t[r]=e[r]}function o(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=n:(a(n,t),t.Buffer=o),o.prototype=Object.create(i.prototype),a(i,o),o.from=function(e,t,r){if("number"==typeof e)throw TypeError("Argument must not be a number");return i(e,t,r)},o.alloc=function(e,t,r){if("number"!=typeof e)throw TypeError("Argument must be a number");var n=i(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},o.allocUnsafe=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return i(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return n.SlowBuffer(e)}},2858:function(e,t,r){var n=r(6911).Buffer;function i(e,t){this._block=n.alloc(e),this._finalSize=t,this._blockSize=e,this._len=0}i.prototype.update=function(e,t){"string"==typeof e&&(t=t||"utf8",e=n.from(e,t));for(var r=this._block,i=this._blockSize,a=e.length,o=this._len,s=0;s<a;){for(var l=o%i,c=Math.min(a-s,i-l),u=0;u<c;u++)r[l+u]=e[s+u];o+=c,s+=c,o%i==0&&this._update(r)}return this._len+=a,this},i.prototype.digest=function(e){var t=this._len%this._blockSize;this._block[t]=128,this._block.fill(0,t+1),t>=this._finalSize&&(this._update(this._block),this._block.fill(0));var r=8*this._len;if(r<=0xffffffff)this._block.writeUInt32BE(r,this._blockSize-4);else{var n=r>>>0,i=(r-n)/0x100000000;this._block.writeUInt32BE(i,this._blockSize-8),this._block.writeUInt32BE(n,this._blockSize-4)}this._update(this._block);var a=this._hash();return e?a.toString(e):a},i.prototype._update=function(){throw Error("_update must be implemented by subclass")},e.exports=i},4371:function(e,t,r){var n=e.exports=function(e){var t=n[e=e.toLowerCase()];if(!t)throw Error(e+" is not supported (we accept pull requests)");return new t};n.sha=r(4018),n.sha1=r(4179),n.sha224=r(532),n.sha256=r(1843),n.sha384=r(7455),n.sha512=r(9934)},4018:function(e,t,r){var n=r(3782),i=r(2858),a=r(6911).Buffer,o=[0x5a827999,0x6ed9eba1,-0x70e44324,-0x359d3e2a],s=Array(80);function l(){this.init(),this._w=s,i.call(this,64,56)}function c(e){return e<<5|e>>>27}function u(e){return e<<30|e>>>2}function d(e,t,r,n){return 0===e?t&r|~t&n:2===e?t&r|t&n|r&n:t^r^n}n(l,i),l.prototype.init=function(){return this._a=0x67452301,this._b=0xefcdab89,this._c=0x98badcfe,this._d=0x10325476,this._e=0xc3d2e1f0,this},l.prototype._update=function(e){for(var t=this._w,r=0|this._a,n=0|this._b,i=0|this._c,a=0|this._d,s=0|this._e,l=0;l<16;++l)t[l]=e.readInt32BE(4*l);for(;l<80;++l)t[l]=t[l-3]^t[l-8]^t[l-14]^t[l-16];for(var f=0;f<80;++f){var h=~~(f/20),p=c(r)+d(h,n,i,a)+s+t[f]+o[h]|0;s=a,a=i,i=u(n),n=r,r=p}this._a=r+this._a|0,this._b=n+this._b|0,this._c=i+this._c|0,this._d=a+this._d|0,this._e=s+this._e|0},l.prototype._hash=function(){var e=a.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},e.exports=l},4179:function(e,t,r){var n=r(3782),i=r(2858),a=r(6911).Buffer,o=[0x5a827999,0x6ed9eba1,-0x70e44324,-0x359d3e2a],s=Array(80);function l(){this.init(),this._w=s,i.call(this,64,56)}function c(e){return e<<1|e>>>31}function u(e){return e<<5|e>>>27}function d(e){return e<<30|e>>>2}function f(e,t,r,n){return 0===e?t&r|~t&n:2===e?t&r|t&n|r&n:t^r^n}n(l,i),l.prototype.init=function(){return this._a=0x67452301,this._b=0xefcdab89,this._c=0x98badcfe,this._d=0x10325476,this._e=0xc3d2e1f0,this},l.prototype._update=function(e){for(var t=this._w,r=0|this._a,n=0|this._b,i=0|this._c,a=0|this._d,s=0|this._e,l=0;l<16;++l)t[l]=e.readInt32BE(4*l);for(;l<80;++l)t[l]=c(t[l-3]^t[l-8]^t[l-14]^t[l-16]);for(var h=0;h<80;++h){var p=~~(h/20),b=u(r)+f(p,n,i,a)+s+t[h]+o[p]|0;s=a,a=i,i=d(n),n=r,r=b}this._a=r+this._a|0,this._b=n+this._b|0,this._c=i+this._c|0,this._d=a+this._d|0,this._e=s+this._e|0},l.prototype._hash=function(){var e=a.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},e.exports=l},532:function(e,t,r){var n=r(3782),i=r(1843),a=r(2858),o=r(6911).Buffer,s=Array(64);function l(){this.init(),this._w=s,a.call(this,64,56)}n(l,i),l.prototype.init=function(){return this._a=0xc1059ed8,this._b=0x367cd507,this._c=0x3070dd17,this._d=0xf70e5939,this._e=0xffc00b31,this._f=0x68581511,this._g=0x64f98fa7,this._h=0xbefa4fa4,this},l.prototype._hash=function(){var e=o.allocUnsafe(28);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e},e.exports=l},1843:function(e,t,r){var n=r(3782),i=r(2858),a=r(6911).Buffer,o=[0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2],s=Array(64);function l(){this.init(),this._w=s,i.call(this,64,56)}function c(e,t,r){return r^e&(t^r)}function u(e,t,r){return e&t|r&(e|t)}function d(e){return(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10)}function f(e){return(e>>>6|e<<26)^(e>>>11|e<<21)^(e>>>25|e<<7)}function h(e){return(e>>>7|e<<25)^(e>>>18|e<<14)^e>>>3}function p(e){return(e>>>17|e<<15)^(e>>>19|e<<13)^e>>>10}n(l,i),l.prototype.init=function(){return this._a=0x6a09e667,this._b=0xbb67ae85,this._c=0x3c6ef372,this._d=0xa54ff53a,this._e=0x510e527f,this._f=0x9b05688c,this._g=0x1f83d9ab,this._h=0x5be0cd19,this},l.prototype._update=function(e){for(var t=this._w,r=0|this._a,n=0|this._b,i=0|this._c,a=0|this._d,s=0|this._e,l=0|this._f,b=0|this._g,g=0|this._h,m=0;m<16;++m)t[m]=e.readInt32BE(4*m);for(;m<64;++m)t[m]=p(t[m-2])+t[m-7]+h(t[m-15])+t[m-16]|0;for(var v=0;v<64;++v){var y=g+f(s)+c(s,l,b)+o[v]+t[v]|0,x=d(r)+u(r,n,i)|0;g=b,b=l,l=s,s=a+y|0,a=i,i=n,n=r,r=y+x|0}this._a=r+this._a|0,this._b=n+this._b|0,this._c=i+this._c|0,this._d=a+this._d|0,this._e=s+this._e|0,this._f=l+this._f|0,this._g=b+this._g|0,this._h=g+this._h|0},l.prototype._hash=function(){var e=a.allocUnsafe(32);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e.writeInt32BE(this._h,28),e},e.exports=l},7455:function(e,t,r){var n=r(3782),i=r(9934),a=r(2858),o=r(6911).Buffer,s=Array(160);function l(){this.init(),this._w=s,a.call(this,128,112)}n(l,i),l.prototype.init=function(){return this._ah=0xcbbb9d5d,this._bh=0x629a292a,this._ch=0x9159015a,this._dh=0x152fecd8,this._eh=0x67332667,this._fh=0x8eb44a87,this._gh=0xdb0c2e0d,this._hh=0x47b5481d,this._al=0xc1059ed8,this._bl=0x367cd507,this._cl=0x3070dd17,this._dl=0xf70e5939,this._el=0xffc00b31,this._fl=0x68581511,this._gl=0x64f98fa7,this._hl=0xbefa4fa4,this},l.prototype._hash=function(){var e=o.allocUnsafe(48);function t(t,r,n){e.writeInt32BE(t,n),e.writeInt32BE(r,n+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),e},e.exports=l},9934:function(e,t,r){var n=r(3782),i=r(2858),a=r(6911).Buffer,o=[0x428a2f98,0xd728ae22,0x71374491,0x23ef65cd,0xb5c0fbcf,0xec4d3b2f,0xe9b5dba5,0x8189dbbc,0x3956c25b,0xf348b538,0x59f111f1,0xb605d019,0x923f82a4,0xaf194f9b,0xab1c5ed5,0xda6d8118,0xd807aa98,0xa3030242,0x12835b01,0x45706fbe,0x243185be,0x4ee4b28c,0x550c7dc3,0xd5ffb4e2,0x72be5d74,0xf27b896f,0x80deb1fe,0x3b1696b1,0x9bdc06a7,0x25c71235,0xc19bf174,0xcf692694,0xe49b69c1,0x9ef14ad2,0xefbe4786,0x384f25e3,0xfc19dc6,0x8b8cd5b5,0x240ca1cc,0x77ac9c65,0x2de92c6f,0x592b0275,0x4a7484aa,0x6ea6e483,0x5cb0a9dc,0xbd41fbd4,0x76f988da,0x831153b5,0x983e5152,0xee66dfab,0xa831c66d,0x2db43210,0xb00327c8,0x98fb213f,0xbf597fc7,0xbeef0ee4,0xc6e00bf3,0x3da88fc2,0xd5a79147,0x930aa725,0x6ca6351,0xe003826f,0x14292967,0xa0e6e70,0x27b70a85,0x46d22ffc,0x2e1b2138,0x5c26c926,0x4d2c6dfc,0x5ac42aed,0x53380d13,0x9d95b3df,0x650a7354,0x8baf63de,0x766a0abb,0x3c77b2a8,0x81c2c92e,0x47edaee6,0x92722c85,0x1482353b,0xa2bfe8a1,0x4cf10364,0xa81a664b,0xbc423001,0xc24b8b70,0xd0f89791,0xc76c51a3,0x654be30,0xd192e819,0xd6ef5218,0xd6990624,0x5565a910,0xf40e3585,0x5771202a,0x106aa070,0x32bbd1b8,0x19a4c116,0xb8d2d0c8,0x1e376c08,0x5141ab53,0x2748774c,0xdf8eeb99,0x34b0bcb5,0xe19b48a8,0x391c0cb3,0xc5c95a63,0x4ed8aa4a,0xe3418acb,0x5b9cca4f,0x7763e373,0x682e6ff3,0xd6b2b8a3,0x748f82ee,0x5defb2fc,0x78a5636f,0x43172f60,0x84c87814,0xa1f0ab72,0x8cc70208,0x1a6439ec,0x90befffa,0x23631e28,0xa4506ceb,0xde82bde9,0xbef9a3f7,0xb2c67915,0xc67178f2,0xe372532b,0xca273ece,0xea26619c,0xd186b8c7,0x21c0c207,0xeada7dd6,0xcde0eb1e,0xf57d4f7f,0xee6ed178,0x6f067aa,0x72176fba,0xa637dc5,0xa2c898a6,0x113f9804,0xbef90dae,0x1b710b35,0x131c471b,0x28db77f5,0x23047d84,0x32caab7b,0x40c72493,0x3c9ebe0a,0x15c9bebc,0x431d67c4,0x9c100d4c,0x4cc5d4be,0xcb3e42b6,0x597f299c,0xfc657e2a,0x5fcb6fab,0x3ad6faec,0x6c44198c,0x4a475817],s=Array(160);function l(){this.init(),this._w=s,i.call(this,128,112)}function c(e,t,r){return r^e&(t^r)}function u(e,t,r){return e&t|r&(e|t)}function d(e,t){return(e>>>28|t<<4)^(t>>>2|e<<30)^(t>>>7|e<<25)}function f(e,t){return(e>>>14|t<<18)^(e>>>18|t<<14)^(t>>>9|e<<23)}function h(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^e>>>7}function p(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^(e>>>7|t<<25)}function b(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^e>>>6}function g(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^(e>>>6|t<<26)}function m(e,t){return+(e>>>0<t>>>0)}n(l,i),l.prototype.init=function(){return this._ah=0x6a09e667,this._bh=0xbb67ae85,this._ch=0x3c6ef372,this._dh=0xa54ff53a,this._eh=0x510e527f,this._fh=0x9b05688c,this._gh=0x1f83d9ab,this._hh=0x5be0cd19,this._al=0xf3bcc908,this._bl=0x84caa73b,this._cl=0xfe94f82b,this._dl=0x5f1d36f1,this._el=0xade682d1,this._fl=0x2b3e6c1f,this._gl=0xfb41bd6b,this._hl=0x137e2179,this},l.prototype._update=function(e){for(var t=this._w,r=0|this._ah,n=0|this._bh,i=0|this._ch,a=0|this._dh,s=0|this._eh,l=0|this._fh,v=0|this._gh,y=0|this._hh,x=0|this._al,w=0|this._bl,_=0|this._cl,S=0|this._dl,E=0|this._el,k=0|this._fl,N=0|this._gl,j=0|this._hl,C=0;C<32;C+=2)t[C]=e.readInt32BE(4*C),t[C+1]=e.readInt32BE(4*C+4);for(;C<160;C+=2){var M=t[C-30],A=t[C-30+1],R=h(M,A),T=p(A,M),O=b(M=t[C-4],A=t[C-4+1]),L=g(A,M),I=t[C-14],P=t[C-14+1],B=t[C-32],D=t[C-32+1],z=T+P|0,F=R+I+m(z,T)|0;F=(F=F+O+m(z=z+L|0,L)|0)+B+m(z=z+D|0,D)|0,t[C]=F,t[C+1]=z}for(var $=0;$<160;$+=2){F=t[$],z=t[$+1];var U=u(r,n,i),H=u(x,w,_),V=d(r,x),q=d(x,r),W=f(s,E),K=f(E,s),G=o[$],X=o[$+1],Z=c(s,l,v),Y=c(E,k,N),J=j+K|0,Q=y+W+m(J,j)|0;Q=(Q=(Q=Q+Z+m(J=J+Y|0,Y)|0)+G+m(J=J+X|0,X)|0)+F+m(J=J+z|0,z)|0;var ee=q+H|0,et=V+U+m(ee,q)|0;y=v,j=N,v=l,N=k,l=s,k=E,s=a+Q+m(E=S+J|0,S)|0,a=i,S=_,i=n,_=w,n=r,w=x,r=Q+et+m(x=J+ee|0,J)|0}this._al=this._al+x|0,this._bl=this._bl+w|0,this._cl=this._cl+_|0,this._dl=this._dl+S|0,this._el=this._el+E|0,this._fl=this._fl+k|0,this._gl=this._gl+N|0,this._hl=this._hl+j|0,this._ah=this._ah+r+m(this._al,x)|0,this._bh=this._bh+n+m(this._bl,w)|0,this._ch=this._ch+i+m(this._cl,_)|0,this._dh=this._dh+a+m(this._dl,S)|0,this._eh=this._eh+s+m(this._el,E)|0,this._fh=this._fh+l+m(this._fl,k)|0,this._gh=this._gh+v+m(this._gl,N)|0,this._hh=this._hh+y+m(this._hl,j)|0},l.prototype._hash=function(){var e=a.allocUnsafe(64);function t(t,r,n){e.writeInt32BE(t,n),e.writeInt32BE(r,n+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),t(this._gh,this._gl,48),t(this._hh,this._hl,56),e},e.exports=l},3704:function(e,t,r){"use strict";var n=r(5055).Buffer,i=n.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(e){var t;if(!e)return"utf8";for(;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function o(e){var t=a(e);if("string"!=typeof t&&(n.isEncoding===i||!i(e)))throw Error("Unknown encoding: "+e);return t||e}function s(e){var t;switch(this.encoding=o(e),this.encoding){case"utf16le":this.text=p,this.end=b,t=4;break;case"utf8":this.fillLast=d,t=4;break;case"base64":this.text=g,this.end=m,t=3;break;default:this.write=v,this.end=y;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(t)}function l(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function c(e,t,r){var n=t.length-1;if(n<r)return 0;var i=l(t[n]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--n<r||-2===i?0:(i=l(t[n]))>=0?(i>0&&(e.lastNeed=i-2),i):--n<r||-2===i?0:(i=l(t[n]))>=0?(i>0&&(2===i?i=0:e.lastNeed=i-3),i):0}function u(e,t,r){if((192&t[0])!=128)return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if((192&t[1])!=128)return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&(192&t[2])!=128)return e.lastNeed=2,""}}function d(e){var t=this.lastTotal-this.lastNeed,r=u(this,e,t);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):void(e.copy(this.lastChar,t,0,e.length),this.lastNeed-=e.length)}function f(e,t){var r=c(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)}function h(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t}function p(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function b(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function g(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function m(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function v(e){return e.toString(this.encoding)}function y(e){return e&&e.length?this.write(e):""}t.s=s,s.prototype.write=function(e){var t,r;if(0===e.length)return"";if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},s.prototype.end=h,s.prototype.text=f,s.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},6769:function(t){function r(t){try{if(!e.g.localStorage)return!1}catch(e){return!1}var r=e.g.localStorage[t];return null!=r&&"true"===String(r).toLowerCase()}t.exports=function e(e,t){if(r("noDeprecation"))return e;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return e.apply(this,arguments)}}},4300:function(t){"use strict";t.exports=e.r(738254)},6113:function(t){"use strict";t.exports=e.r(520657)},2361:function(t){"use strict";t.exports=e.r(379666)},2781:function(t){"use strict";t.exports=e.r(791566)},1576:function(t){"use strict";t.exports=e.r(703341)},3837:function(t){"use strict";t.exports=e.r(227995)},6144:function(t){"use strict";t.exports=e.r(618053)},5866:function(e){"use strict";e.exports=JSON.parse('{"aes-128-ecb":{"cipher":"AES","key":128,"iv":0,"mode":"ECB","type":"block"},"aes-192-ecb":{"cipher":"AES","key":192,"iv":0,"mode":"ECB","type":"block"},"aes-256-ecb":{"cipher":"AES","key":256,"iv":0,"mode":"ECB","type":"block"},"aes-128-cbc":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes-192-cbc":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes-256-cbc":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes128":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes192":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes256":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes-128-cfb":{"cipher":"AES","key":128,"iv":16,"mode":"CFB","type":"stream"},"aes-192-cfb":{"cipher":"AES","key":192,"iv":16,"mode":"CFB","type":"stream"},"aes-256-cfb":{"cipher":"AES","key":256,"iv":16,"mode":"CFB","type":"stream"},"aes-128-cfb8":{"cipher":"AES","key":128,"iv":16,"mode":"CFB8","type":"stream"},"aes-192-cfb8":{"cipher":"AES","key":192,"iv":16,"mode":"CFB8","type":"stream"},"aes-256-cfb8":{"cipher":"AES","key":256,"iv":16,"mode":"CFB8","type":"stream"},"aes-128-cfb1":{"cipher":"AES","key":128,"iv":16,"mode":"CFB1","type":"stream"},"aes-192-cfb1":{"cipher":"AES","key":192,"iv":16,"mode":"CFB1","type":"stream"},"aes-256-cfb1":{"cipher":"AES","key":256,"iv":16,"mode":"CFB1","type":"stream"},"aes-128-ofb":{"cipher":"AES","key":128,"iv":16,"mode":"OFB","type":"stream"},"aes-192-ofb":{"cipher":"AES","key":192,"iv":16,"mode":"OFB","type":"stream"},"aes-256-ofb":{"cipher":"AES","key":256,"iv":16,"mode":"OFB","type":"stream"},"aes-128-ctr":{"cipher":"AES","key":128,"iv":16,"mode":"CTR","type":"stream"},"aes-192-ctr":{"cipher":"AES","key":192,"iv":16,"mode":"CTR","type":"stream"},"aes-256-ctr":{"cipher":"AES","key":256,"iv":16,"mode":"CTR","type":"stream"},"aes-128-gcm":{"cipher":"AES","key":128,"iv":12,"mode":"GCM","type":"auth"},"aes-192-gcm":{"cipher":"AES","key":192,"iv":12,"mode":"GCM","type":"auth"},"aes-256-gcm":{"cipher":"AES","key":256,"iv":12,"mode":"GCM","type":"auth"}}')},2908:function(e){"use strict";e.exports=JSON.parse('{"sha224WithRSAEncryption":{"sign":"rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"RSA-SHA224":{"sign":"ecdsa/rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"sha256WithRSAEncryption":{"sign":"rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"RSA-SHA256":{"sign":"ecdsa/rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"sha384WithRSAEncryption":{"sign":"rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"RSA-SHA384":{"sign":"ecdsa/rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"sha512WithRSAEncryption":{"sign":"rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA512":{"sign":"ecdsa/rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA1":{"sign":"rsa","hash":"sha1","id":"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{"sign":"ecdsa","hash":"sha1","id":""},"sha256":{"sign":"ecdsa","hash":"sha256","id":""},"sha224":{"sign":"ecdsa","hash":"sha224","id":""},"sha384":{"sign":"ecdsa","hash":"sha384","id":""},"sha512":{"sign":"ecdsa","hash":"sha512","id":""},"DSA-SHA":{"sign":"dsa","hash":"sha1","id":""},"DSA-SHA1":{"sign":"dsa","hash":"sha1","id":""},"DSA":{"sign":"dsa","hash":"sha1","id":""},"DSA-WITH-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-WITH-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-WITH-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-WITH-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-RIPEMD160":{"sign":"dsa","hash":"rmd160","id":""},"ripemd160WithRSA":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"RSA-RIPEMD160":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"md5WithRSAEncryption":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"},"RSA-MD5":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"}}')},9267:function(e){"use strict";e.exports=JSON.parse('{"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}')},7992:function(e){"use strict";e.exports=JSON.parse('{"modp1":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},"modp2":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},"modp5":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},"modp14":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},"modp15":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},"modp16":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},"modp17":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},"modp18":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}')},2531:function(e){"use strict";e.exports={i8:"6.5.3"}},2510:function(e){"use strict";e.exports=JSON.parse('{"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}')}},a={};function o(e){var t=a[e];if(void 0!==t)return t.exports;var n=a[e]={id:e,loaded:!1,exports:{}},i=!0;try{r[e].call(n.exports,n,n.exports,o),i=!1}finally{i&&delete a[e]}return n.loaded=!0,n.exports}!function(){o.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),o.ab="/ROOT/node_modules/.pnpm/next@16.0.10_@babel+core@7.28.0_react-dom@19.2.0_react@19.2.0__react@19.2.0/node_modules/next/dist/compiled/crypto-browserify/";var s={};!function(){"use strict";var e=s;e.randomBytes=e.rng=e.pseudoRandomBytes=e.prng=o(7223),e.createHash=e.Hash=o(9739),e.createHmac=e.Hmac=o(4873);var t=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(Object.keys(o(9276)));e.getHashes=function(){return t};var r=o(4978);e.pbkdf2=r.pbkdf2,e.pbkdf2Sync=r.pbkdf2Sync;var n=o(8996);e.Cipher=n.Cipher,e.createCipher=n.createCipher,e.Cipheriv=n.Cipheriv,e.createCipheriv=n.createCipheriv,e.Decipher=n.Decipher,e.createDecipher=n.createDecipher,e.Decipheriv=n.Decipheriv,e.createDecipheriv=n.createDecipheriv,e.getCiphers=n.getCiphers,e.listCiphers=n.listCiphers;var i=o(6587);e.DiffieHellmanGroup=i.DiffieHellmanGroup,e.createDiffieHellmanGroup=i.createDiffieHellmanGroup,e.getDiffieHellman=i.getDiffieHellman,e.createDiffieHellman=i.createDiffieHellman,e.DiffieHellman=i.DiffieHellman;var a=o(4078);e.createSign=a.createSign,e.Sign=a.Sign,e.createVerify=a.createVerify,e.Verify=a.Verify,e.createECDH=o(9942);var l=o(9783);e.publicEncrypt=l.publicEncrypt,e.privateEncrypt=l.privateEncrypt,e.publicDecrypt=l.publicDecrypt,e.privateDecrypt=l.privateDecrypt;var c=o(6445);e.randomFill=c.randomFill,e.randomFillSync=c.randomFillSync,e.createCredentials=function(){throw Error("sorry, createCredentials is not implemented yet\nwe accept pull requests\nhttps://github.com/crypto-browserify/crypto-browserify")},e.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}}(),t.exports=s}()},208301,(e,t,r)=>{t.exports=e.g&&e.g.Object===Object&&e.g},240240,(e,t,r)=>{var n=e.r(208301),i="object"==typeof self&&self&&self.Object===Object&&self;t.exports=n||i||Function("return this")()},220259,(e,t,r)=>{t.exports=e.r(240240).Symbol},895771,(e,t,r)=>{var n=e.r(220259),i=Object.prototype,a=i.hasOwnProperty,o=i.toString,s=n?n.toStringTag:void 0;t.exports=function(e){var t=a.call(e,s),r=e[s];try{e[s]=void 0;var n=!0}catch(e){}var i=o.call(e);return n&&(t?e[s]=r:delete e[s]),i}},750351,(e,t,r)=>{var n=Object.prototype.toString;t.exports=function(e){return n.call(e)}},346012,(e,t,r)=>{var n=e.r(220259),i=e.r(895771),a=e.r(750351),o="[object Null]",s="[object Undefined]",l=n?n.toStringTag:void 0;t.exports=function(e){return null==e?void 0===e?s:o:l&&l in Object(e)?i(e):a(e)}},372797,(e,t,r)=>{t.exports=Array.isArray},386457,(e,t,r)=>{t.exports=function(e){return null!=e&&"object"==typeof e}},14056,(e,t,r)=>{var n=e.r(346012),i=e.r(372797),a=e.r(386457),o="[object String]";t.exports=function(e){return"string"==typeof e||!i(e)&&a(e)&&n(e)==o}},373838,(e,t,r)=>{t.exports=function(e){return function(t,r,n){for(var i=-1,a=Object(t),o=n(t),s=o.length;s--;){var l=o[e?s:++i];if(!1===r(a[l],l,a))break}return t}}},533448,(e,t,r)=>{t.exports=e.r(373838)()},806038,(e,t,r)=>{t.exports=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}},538042,(e,t,r)=>{var n=e.r(346012),i=e.r(386457),a="[object Arguments]";t.exports=function(e){return i(e)&&n(e)==a}},276199,(e,t,r)=>{var n=e.r(538042),i=e.r(386457),a=Object.prototype,o=a.hasOwnProperty,s=a.propertyIsEnumerable;t.exports=n(function(){return arguments}())?n:function(e){return i(e)&&o.call(e,"callee")&&!s.call(e,"callee")}},799798,(e,t,r)=>{t.exports=function(){return!1}},125581,(e,t,r)=>{var n=e.r(240240),i=e.r(799798),a=r&&!r.nodeType&&r,o=a&&t&&!t.nodeType&&t,s=o&&o.exports===a?n.Buffer:void 0;t.exports=(s?s.isBuffer:void 0)||i},595146,(e,t,r)=>{var n=0x1fffffffffffff,i=/^(?:0|[1-9]\d*)$/;t.exports=function(e,t){var r=typeof e;return!!(t=null==t?n:t)&&("number"==r||"symbol"!=r&&i.test(e))&&e>-1&&e%1==0&&e<t}},935527,(e,t,r)=>{var n=0x1fffffffffffff;t.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=n}},980364,(e,t,r)=>{var n=e.r(346012),i=e.r(935527),a=e.r(386457),o="[object Arguments]",s="[object Array]",l="[object Boolean]",c="[object Date]",u="[object Error]",d="[object Function]",f="[object Map]",h="[object Number]",p="[object Object]",b="[object RegExp]",g="[object Set]",m="[object String]",v="[object WeakMap]",y="[object ArrayBuffer]",x="[object DataView]",w="[object Float64Array]",_="[object Int8Array]",S="[object Int16Array]",E="[object Int32Array]",k="[object Uint8Array]",N="[object Uint8ClampedArray]",j="[object Uint16Array]",C="[object Uint32Array]",M={};M["[object Float32Array]"]=M[w]=M[_]=M[S]=M[E]=M[k]=M[N]=M[j]=M[C]=!0,M[o]=M[s]=M[y]=M[l]=M[x]=M[c]=M[u]=M[d]=M[f]=M[h]=M[p]=M[b]=M[g]=M[m]=M[v]=!1,t.exports=function(e){return a(e)&&i(e.length)&&!!M[n(e)]}},974529,(e,t,r)=>{t.exports=function(e){return function(t){return e(t)}}},784356,(e,t,r)=>{var n=e.r(208301),i=r&&!r.nodeType&&r,a=i&&t&&!t.nodeType&&t,o=a&&a.exports===i&&n.process;t.exports=function(){try{var e=a&&a.require&&a.require("util").types;if(e)return e;return o&&o.binding&&o.binding("util")}catch(e){}}()},189082,(e,t,r)=>{var n=e.r(980364),i=e.r(974529),a=e.r(784356),o=a&&a.isTypedArray;t.exports=o?i(o):n},112180,(e,t,r)=>{var n=e.r(806038),i=e.r(276199),a=e.r(372797),o=e.r(125581),s=e.r(595146),l=e.r(189082),c=Object.prototype.hasOwnProperty;t.exports=function(e,t){var r=a(e),u=!r&&i(e),d=!r&&!u&&o(e),f=!r&&!u&&!d&&l(e),h=r||u||d||f,p=h?n(e.length,String):[],b=p.length;for(var g in e)(t||c.call(e,g))&&!(h&&("length"==g||d&&("offset"==g||"parent"==g)||f&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||s(g,b)))&&p.push(g);return p}},584902,(e,t,r)=>{var n=Object.prototype;t.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||n)}},719800,(e,t,r)=>{t.exports=function(e,t){return function(r){return e(t(r))}}},583532,(e,t,r)=>{t.exports=e.r(719800)(Object.keys,Object)},467798,(e,t,r)=>{var n=e.r(584902),i=e.r(583532),a=Object.prototype.hasOwnProperty;t.exports=function(e){if(!n(e))return i(e);var t=[];for(var r in Object(e))a.call(e,r)&&"constructor"!=r&&t.push(r);return t}},763377,(e,t,r)=>{t.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},439043,(e,t,r)=>{var n=e.r(346012),i=e.r(763377),a="[object AsyncFunction]",o="[object Function]",s="[object GeneratorFunction]",l="[object Proxy]";t.exports=function(e){if(!i(e))return!1;var t=n(e);return t==o||t==s||t==a||t==l}},140062,(e,t,r)=>{var n=e.r(439043),i=e.r(935527);t.exports=function(e){return null!=e&&i(e.length)&&!n(e)}},937165,(e,t,r)=>{var n=e.r(112180),i=e.r(467798),a=e.r(140062);t.exports=function(e){return a(e)?n(e):i(e)}},509882,(e,t,r)=>{var n=e.r(533448),i=e.r(937165);t.exports=function(e,t){return e&&n(e,t,i)}},3765,(e,t,r)=>{t.exports=function(e){return e}},549399,(e,t,r)=>{var n=e.r(3765);t.exports=function(e){return"function"==typeof e?e:n}},862921,(e,t,r)=>{var n=e.r(509882),i=e.r(549399);t.exports=function(e,t){return e&&n(e,i(t))}},139866,(e,t,r)=>{t.exports=e.r(719800)(Object.getPrototypeOf,Object)},100515,(e,t,r)=>{var n=e.r(346012),i=e.r(139866),a=e.r(386457),o="[object Object]",s=Object.prototype,l=Function.prototype.toString,c=s.hasOwnProperty,u=l.call(Object);t.exports=function(e){if(!a(e)||n(e)!=o)return!1;var t=i(e);if(null===t)return!0;var r=c.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&l.call(r)==u}},70234,(e,t,r)=>{t.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}},917433,(e,t,r)=>{t.exports=function(){this.__data__=[],this.size=0}},350626,(e,t,r)=>{t.exports=function(e,t){return e===t||e!=e&&t!=t}},706268,(e,t,r)=>{var n=e.r(350626);t.exports=function(e,t){for(var r=e.length;r--;)if(n(e[r][0],t))return r;return -1}},232040,(e,t,r)=>{var n=e.r(706268),i=Array.prototype.splice;t.exports=function(e){var t=this.__data__,r=n(t,e);return!(r<0)&&(r==t.length-1?t.pop():i.call(t,r,1),--this.size,!0)}},417923,(e,t,r)=>{var n=e.r(706268);t.exports=function(e){var t=this.__data__,r=n(t,e);return r<0?void 0:t[r][1]}},387441,(e,t,r)=>{var n=e.r(706268);t.exports=function(e){return n(this.__data__,e)>-1}},656986,(e,t,r)=>{var n=e.r(706268);t.exports=function(e,t){var r=this.__data__,i=n(r,e);return i<0?(++this.size,r.push([e,t])):r[i][1]=t,this}},943162,(e,t,r)=>{var n=e.r(917433),i=e.r(232040),a=e.r(417923),o=e.r(387441),s=e.r(656986);function l(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=i,l.prototype.get=a,l.prototype.has=o,l.prototype.set=s,t.exports=l},868668,(e,t,r)=>{var n=e.r(943162);t.exports=function(){this.__data__=new n,this.size=0}},138463,(e,t,r)=>{t.exports=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}},423933,(e,t,r)=>{t.exports=function(e){return this.__data__.get(e)}},859358,(e,t,r)=>{t.exports=function(e){return this.__data__.has(e)}},433406,(e,t,r)=>{t.exports=e.r(240240)["__core-js_shared__"]},609530,(e,t,r)=>{var n=e.r(433406),i=function(){var e=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();t.exports=function(e){return!!i&&i in e}},273902,(e,t,r)=>{var n=Function.prototype.toString;t.exports=function(e){if(null!=e){try{return n.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},462459,(e,t,r)=>{var n=e.r(439043),i=e.r(609530),a=e.r(763377),o=e.r(273902),s=/[\\^$.*+?()[\]{}|]/g,l=/^\[object .+?Constructor\]$/,c=Object.prototype,u=Function.prototype.toString,d=c.hasOwnProperty,f=RegExp("^"+u.call(d).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(e){return!(!a(e)||i(e))&&(n(e)?f:l).test(o(e))}},521785,(e,t,r)=>{t.exports=function(e,t){return null==e?void 0:e[t]}},698830,(e,t,r)=>{var n=e.r(462459),i=e.r(521785);t.exports=function(e,t){var r=i(e,t);return n(r)?r:void 0}},301105,(e,t,r)=>{t.exports=e.r(698830)(e.r(240240),"Map")},978490,(e,t,r)=>{t.exports=e.r(698830)(Object,"create")},305869,(e,t,r)=>{var n=e.r(978490);t.exports=function(){this.__data__=n?n(null):{},this.size=0}},745332,(e,t,r)=>{t.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=!!t,t}},274202,(e,t,r)=>{var n=e.r(978490),i="__lodash_hash_undefined__",a=Object.prototype.hasOwnProperty;t.exports=function(e){var t=this.__data__;if(n){var r=t[e];return r===i?void 0:r}return a.call(t,e)?t[e]:void 0}},444945,(e,t,r)=>{var n=e.r(978490),i=Object.prototype.hasOwnProperty;t.exports=function(e){var t=this.__data__;return n?void 0!==t[e]:i.call(t,e)}},618750,(e,t,r)=>{var n=e.r(978490),i="__lodash_hash_undefined__";t.exports=function(e,t){var r=this.__data__;return this.size+=+!this.has(e),r[e]=n&&void 0===t?i:t,this}},830264,(e,t,r)=>{var n=e.r(305869),i=e.r(745332),a=e.r(274202),o=e.r(444945),s=e.r(618750);function l(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=i,l.prototype.get=a,l.prototype.has=o,l.prototype.set=s,t.exports=l},855346,(e,t,r)=>{var n=e.r(830264),i=e.r(943162),a=e.r(301105);t.exports=function(){this.size=0,this.__data__={hash:new n,map:new(a||i),string:new n}}},809055,(e,t,r)=>{t.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},956917,(e,t,r)=>{var n=e.r(809055);t.exports=function(e,t){var r=e.__data__;return n(t)?r["string"==typeof t?"string":"hash"]:r.map}},443506,(e,t,r)=>{var n=e.r(956917);t.exports=function(e){var t=n(this,e).delete(e);return this.size-=!!t,t}},150977,(e,t,r)=>{var n=e.r(956917);t.exports=function(e){return n(this,e).get(e)}},699909,(e,t,r)=>{var n=e.r(956917);t.exports=function(e){return n(this,e).has(e)}},647449,(e,t,r)=>{var n=e.r(956917);t.exports=function(e,t){var r=n(this,e),i=r.size;return r.set(e,t),this.size+=+(r.size!=i),this}},54338,(e,t,r)=>{var n=e.r(855346),i=e.r(443506),a=e.r(150977),o=e.r(699909),s=e.r(647449);function l(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=i,l.prototype.get=a,l.prototype.has=o,l.prototype.set=s,t.exports=l},514742,(e,t,r)=>{var n=e.r(943162),i=e.r(301105),a=e.r(54338),o=200;t.exports=function(e,t){var r=this.__data__;if(r instanceof n){var s=r.__data__;if(!i||s.length<o-1)return s.push([e,t]),this.size=++r.size,this;r=this.__data__=new a(s)}return r.set(e,t),this.size=r.size,this}},407258,(e,t,r)=>{var n=e.r(943162),i=e.r(868668),a=e.r(138463),o=e.r(423933),s=e.r(859358),l=e.r(514742);function c(e){var t=this.__data__=new n(e);this.size=t.size}c.prototype.clear=i,c.prototype.delete=a,c.prototype.get=o,c.prototype.has=s,c.prototype.set=l,t.exports=c},826417,(e,t,r)=>{var n="__lodash_hash_undefined__";t.exports=function(e){return this.__data__.set(e,n),this}},661204,(e,t,r)=>{t.exports=function(e){return this.__data__.has(e)}},196047,(e,t,r)=>{var n=e.r(54338),i=e.r(826417),a=e.r(661204);function o(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new n;++t<r;)this.add(e[t])}o.prototype.add=o.prototype.push=i,o.prototype.has=a,t.exports=o},438838,(e,t,r)=>{t.exports=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}},233037,(e,t,r)=>{t.exports=function(e,t){return e.has(t)}},76075,(e,t,r)=>{var n=e.r(196047),i=e.r(438838),a=e.r(233037),o=1,s=2;t.exports=function(e,t,r,l,c,u){var d=r&o,f=e.length,h=t.length;if(f!=h&&!(d&&h>f))return!1;var p=u.get(e),b=u.get(t);if(p&&b)return p==t&&b==e;var g=-1,m=!0,v=r&s?new n:void 0;for(u.set(e,t),u.set(t,e);++g<f;){var y=e[g],x=t[g];if(l)var w=d?l(x,y,g,t,e,u):l(y,x,g,e,t,u);if(void 0!==w){if(w)continue;m=!1;break}if(v){if(!i(t,function(e,t){if(!a(v,t)&&(y===e||c(y,e,r,l,u)))return v.push(t)})){m=!1;break}}else if(!(y===x||c(y,x,r,l,u))){m=!1;break}}return u.delete(e),u.delete(t),m}},680567,(e,t,r)=>{t.exports=e.r(240240).Uint8Array},800846,(e,t,r)=>{t.exports=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r}},620684,(e,t,r)=>{t.exports=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}},894311,(e,t,r)=>{var n=e.r(220259),i=e.r(680567),a=e.r(350626),o=e.r(76075),s=e.r(800846),l=e.r(620684),c=1,u=2,d="[object Boolean]",f="[object Date]",h="[object Error]",p="[object Map]",b="[object Number]",g="[object RegExp]",m="[object Set]",v="[object String]",y="[object Symbol]",x="[object ArrayBuffer]",w="[object DataView]",_=n?n.prototype:void 0,S=_?_.valueOf:void 0;t.exports=function(e,t,r,n,_,E,k){switch(r){case w:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)break;e=e.buffer,t=t.buffer;case x:if(e.byteLength!=t.byteLength||!E(new i(e),new i(t)))break;return!0;case d:case f:case b:return a(+e,+t);case h:return e.name==t.name&&e.message==t.message;case g:case v:return e==t+"";case p:var N=s;case m:var j=n&c;if(N||(N=l),e.size!=t.size&&!j)break;var C=k.get(e);if(C)return C==t;n|=u,k.set(e,t);var M=o(N(e),N(t),n,_,E,k);return k.delete(e),M;case y:if(S)return S.call(e)==S.call(t)}return!1}},995762,(e,t,r)=>{t.exports=function(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}},789485,(e,t,r)=>{var n=e.r(995762),i=e.r(372797);t.exports=function(e,t,r){var a=t(e);return i(e)?a:n(a,r(e))}},274775,(e,t,r)=>{t.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,i=0,a=[];++r<n;){var o=e[r];t(o,r,e)&&(a[i++]=o)}return a}},679497,(e,t,r)=>{t.exports=function(){return[]}},688136,(e,t,r)=>{var n=e.r(274775),i=e.r(679497),a=Object.prototype.propertyIsEnumerable,o=Object.getOwnPropertySymbols;t.exports=o?function(e){return null==e?[]:n(o(e=Object(e)),function(t){return a.call(e,t)})}:i},725291,(e,t,r)=>{var n=e.r(789485),i=e.r(688136),a=e.r(937165);t.exports=function(e){return n(e,a,i)}},644221,(e,t,r)=>{var n=e.r(725291),i=1,a=Object.prototype.hasOwnProperty;t.exports=function(e,t,r,o,s,l){var c=r&i,u=n(e),d=u.length;if(d!=n(t).length&&!c)return!1;for(var f=d;f--;){var h=u[f];if(!(c?h in t:a.call(t,h)))return!1}var p=l.get(e),b=l.get(t);if(p&&b)return p==t&&b==e;var g=!0;l.set(e,t),l.set(t,e);for(var m=c;++f<d;){var v=e[h=u[f]],y=t[h];if(o)var x=c?o(y,v,h,t,e,l):o(v,y,h,e,t,l);if(!(void 0===x?v===y||s(v,y,r,o,l):x)){g=!1;break}m||(m="constructor"==h)}if(g&&!m){var w=e.constructor,_=t.constructor;w!=_&&"constructor"in e&&"constructor"in t&&!("function"==typeof w&&w instanceof w&&"function"==typeof _&&_ instanceof _)&&(g=!1)}return l.delete(e),l.delete(t),g}},521526,(e,t,r)=>{t.exports=e.r(698830)(e.r(240240),"DataView")},311354,(e,t,r)=>{t.exports=e.r(698830)(e.r(240240),"Promise")},206227,(e,t,r)=>{t.exports=e.r(698830)(e.r(240240),"Set")},410117,(e,t,r)=>{t.exports=e.r(698830)(e.r(240240),"WeakMap")},323472,(e,t,r)=>{var n=e.r(521526),i=e.r(301105),a=e.r(311354),o=e.r(206227),s=e.r(410117),l=e.r(346012),c=e.r(273902),u="[object Map]",d="[object Object]",f="[object Promise]",h="[object Set]",p="[object WeakMap]",b="[object DataView]",g=c(n),m=c(i),v=c(a),y=c(o),x=c(s),w=l;(n&&w(new n(new ArrayBuffer(1)))!=b||i&&w(new i)!=u||a&&w(a.resolve())!=f||o&&w(new o)!=h||s&&w(new s)!=p)&&(w=function(e){var t=l(e),r=t==d?e.constructor:void 0,n=r?c(r):"";if(n)switch(n){case g:return b;case m:return u;case v:return f;case y:return h;case x:return p}return t}),t.exports=w},401814,(e,t,r)=>{var n=e.r(407258),i=e.r(76075),a=e.r(894311),o=e.r(644221),s=e.r(323472),l=e.r(372797),c=e.r(125581),u=e.r(189082),d=1,f="[object Arguments]",h="[object Array]",p="[object Object]",b=Object.prototype.hasOwnProperty;t.exports=function(e,t,r,g,m,v){var y=l(e),x=l(t),w=y?h:s(e),_=x?h:s(t);w=w==f?p:w,_=_==f?p:_;var S=w==p,E=_==p,k=w==_;if(k&&c(e)){if(!c(t))return!1;y=!0,S=!1}if(k&&!S)return v||(v=new n),y||u(e)?i(e,t,r,g,m,v):a(e,t,w,r,g,m,v);if(!(r&d)){var N=S&&b.call(e,"__wrapped__"),j=E&&b.call(t,"__wrapped__");if(N||j){var C=N?e.value():e,M=j?t.value():t;return v||(v=new n),m(C,M,r,g,v)}}return!!k&&(v||(v=new n),o(e,t,r,g,m,v))}},173457,(e,t,r)=>{var n=e.r(401814),i=e.r(386457);function a(e,t,r,o,s){return e===t||(null!=e&&null!=t&&(i(e)||i(t))?n(e,t,r,o,a,s):e!=e&&t!=t)}t.exports=a},484088,(e,t,r)=>{var n=e.r(407258),i=e.r(173457),a=1,o=2;t.exports=function(e,t,r,s){var l=r.length,c=l,u=!s;if(null==e)return!c;for(e=Object(e);l--;){var d=r[l];if(u&&d[2]?d[1]!==e[d[0]]:!(d[0]in e))return!1}for(;++l<c;){var f=(d=r[l])[0],h=e[f],p=d[1];if(u&&d[2]){if(void 0===h&&!(f in e))return!1}else{var b=new n;if(s)var g=s(h,p,f,e,t,b);if(!(void 0===g?i(p,h,a|o,s,b):g))return!1}}return!0}},251968,(e,t,r)=>{var n=e.r(763377);t.exports=function(e){return e==e&&!n(e)}},226779,(e,t,r)=>{var n=e.r(251968),i=e.r(937165);t.exports=function(e){for(var t=i(e),r=t.length;r--;){var a=t[r],o=e[a];t[r]=[a,o,n(o)]}return t}},605943,(e,t,r)=>{t.exports=function(e,t){return function(r){return null!=r&&r[e]===t&&(void 0!==t||e in Object(r))}}},547826,(e,t,r)=>{var n=e.r(484088),i=e.r(226779),a=e.r(605943);t.exports=function(e){var t=i(e);return 1==t.length&&t[0][2]?a(t[0][0],t[0][1]):function(r){return r===e||n(r,e,t)}}},887178,(e,t,r)=>{var n=e.r(346012),i=e.r(386457),a="[object Symbol]";t.exports=function(e){return"symbol"==typeof e||i(e)&&n(e)==a}},305737,(e,t,r)=>{var n=e.r(372797),i=e.r(887178),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/;t.exports=function(e,t){if(n(e))return!1;var r=typeof e;return!!("number"==r||"symbol"==r||"boolean"==r||null==e||i(e))||o.test(e)||!a.test(e)||null!=t&&e in Object(t)}},538586,(e,t,r)=>{var n=e.r(54338),i="Expected a function";function a(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw TypeError(i);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],a=r.cache;if(a.has(i))return a.get(i);var o=e.apply(this,n);return r.cache=a.set(i,o)||a,o};return r.cache=new(a.Cache||n),r}a.Cache=n,t.exports=a},124715,(e,t,r)=>{var n=e.r(538586),i=500;t.exports=function(e){var t=n(e,function(e){return r.size===i&&r.clear(),e}),r=t.cache;return t}},687192,(e,t,r)=>{var n=e.r(124715),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g;t.exports=n(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(i,function(e,r,n,i){t.push(n?i.replace(a,"$1"):r||e)}),t})},296438,(e,t,r)=>{var n=e.r(220259),i=e.r(70234),a=e.r(372797),o=e.r(887178),s=1/0,l=n?n.prototype:void 0,c=l?l.toString:void 0;function u(e){if("string"==typeof e)return e;if(a(e))return i(e,u)+"";if(o(e))return c?c.call(e):"";var t=e+"";return"0"==t&&1/e==-s?"-0":t}t.exports=u},669135,(e,t,r)=>{var n=e.r(296438);t.exports=function(e){return null==e?"":n(e)}},937657,(e,t,r)=>{var n=e.r(372797),i=e.r(305737),a=e.r(687192),o=e.r(669135);t.exports=function(e,t){return n(e)?e:i(e,t)?[e]:a(o(e))}},713331,(e,t,r)=>{var n=e.r(887178),i=1/0;t.exports=function(e){if("string"==typeof e||n(e))return e;var t=e+"";return"0"==t&&1/e==-i?"-0":t}},493103,(e,t,r)=>{var n=e.r(937657),i=e.r(713331);t.exports=function(e,t){t=n(t,e);for(var r=0,a=t.length;null!=e&&r<a;)e=e[i(t[r++])];return r&&r==a?e:void 0}},807162,(e,t,r)=>{var n=e.r(493103);t.exports=function(e,t,r){var i=null==e?void 0:n(e,t);return void 0===i?r:i}},670867,(e,t,r)=>{t.exports=function(e,t){return null!=e&&t in Object(e)}},661197,(e,t,r)=>{var n=e.r(937657),i=e.r(276199),a=e.r(372797),o=e.r(595146),s=e.r(935527),l=e.r(713331);t.exports=function(e,t,r){t=n(t,e);for(var c=-1,u=t.length,d=!1;++c<u;){var f=l(t[c]);if(!(d=null!=e&&r(e,f)))break;e=e[f]}return d||++c!=u?d:!!(u=null==e?0:e.length)&&s(u)&&o(f,u)&&(a(e)||i(e))}},718645,(e,t,r)=>{var n=e.r(670867),i=e.r(661197);t.exports=function(e,t){return null!=e&&i(e,t,n)}},115824,(e,t,r)=>{var n=e.r(173457),i=e.r(807162),a=e.r(718645),o=e.r(305737),s=e.r(251968),l=e.r(605943),c=e.r(713331),u=1,d=2;t.exports=function(e,t){return o(e)&&s(t)?l(c(e),t):function(r){var o=i(r,e);return void 0===o&&o===t?a(r,e):n(t,o,u|d)}}},2199,(e,t,r)=>{t.exports=function(e){return function(t){return null==t?void 0:t[e]}}},426362,(e,t,r)=>{var n=e.r(493103);t.exports=function(e){return function(t){return n(t,e)}}},866208,(e,t,r)=>{var n=e.r(2199),i=e.r(426362),a=e.r(305737),o=e.r(713331);t.exports=function(e){return a(e)?n(o(e)):i(e)}},320435,(e,t,r)=>{var n=e.r(547826),i=e.r(115824),a=e.r(3765),o=e.r(372797),s=e.r(866208);t.exports=function(e){return"function"==typeof e?e:null==e?a:"object"==typeof e?o(e)?i(e[0],e[1]):n(e):s(e)}},226011,(e,t,r)=>{var n=e.r(140062);t.exports=function(e,t){return function(r,i){if(null==r)return r;if(!n(r))return e(r,i);for(var a=r.length,o=t?a:-1,s=Object(r);(t?o--:++o<a)&&!1!==i(s[o],o,s););return r}}},947524,(e,t,r)=>{var n=e.r(509882);t.exports=e.r(226011)(n)},419706,(e,t,r)=>{var n=e.r(947524),i=e.r(140062);t.exports=function(e,t){var r=-1,a=i(e)?Array(e.length):[];return n(e,function(e,n,i){a[++r]=t(e,n,i)}),a}},64501,(e,t,r)=>{var n=e.r(70234),i=e.r(320435),a=e.r(419706),o=e.r(372797);t.exports=function(e,t){return(o(e)?n:a)(e,i(t,3))}},723331,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.flattenNames=void 0;var n=s(e.r(14056)),i=s(e.r(862921)),a=s(e.r(100515)),o=s(e.r(64501));function s(e){return e&&e.__esModule?e:{default:e}}var l=r.flattenNames=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=[];return(0,o.default)(t,function(t){Array.isArray(t)?e(t).map(function(e){return r.push(e)}):(0,a.default)(t)?(0,i.default)(t,function(e,t){!0===e&&r.push(t),r.push(t+"-"+e)}):(0,n.default)(t)&&r.push(t)}),r};r.default=l},836997,(e,t,r)=>{t.exports=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}},882218,(e,t,r)=>{var n=e.r(698830);t.exports=function(){try{var e=n(Object,"defineProperty");return e({},"",{}),e}catch(e){}}()},249632,(e,t,r)=>{var n=e.r(882218);t.exports=function(e,t,r){"__proto__"==t&&n?n(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}},279732,(e,t,r)=>{var n=e.r(249632),i=e.r(350626),a=Object.prototype.hasOwnProperty;t.exports=function(e,t,r){var o=e[t];a.call(e,t)&&i(o,r)&&(void 0!==r||t in e)||n(e,t,r)}},436849,(e,t,r)=>{var n=e.r(279732),i=e.r(249632);t.exports=function(e,t,r,a){var o=!r;r||(r={});for(var s=-1,l=t.length;++s<l;){var c=t[s],u=a?a(r[c],e[c],c,r,e):void 0;void 0===u&&(u=e[c]),o?i(r,c,u):n(r,c,u)}return r}},865198,(e,t,r)=>{var n=e.r(436849),i=e.r(937165);t.exports=function(e,t){return e&&n(t,i(t),e)}},317855,(e,t,r)=>{t.exports=function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}},687399,(e,t,r)=>{var n=e.r(763377),i=e.r(584902),a=e.r(317855),o=Object.prototype.hasOwnProperty;t.exports=function(e){if(!n(e))return a(e);var t=i(e),r=[];for(var s in e)"constructor"==s&&(t||!o.call(e,s))||r.push(s);return r}},671763,(e,t,r)=>{var n=e.r(112180),i=e.r(687399),a=e.r(140062);t.exports=function(e){return a(e)?n(e,!0):i(e)}},808087,(e,t,r)=>{var n=e.r(436849),i=e.r(671763);t.exports=function(e,t){return e&&n(t,i(t),e)}},28725,(e,t,r)=>{var n=e.r(240240),i=r&&!r.nodeType&&r,a=i&&t&&!t.nodeType&&t,o=a&&a.exports===i?n.Buffer:void 0,s=o?o.allocUnsafe:void 0;t.exports=function(e,t){if(t)return e.slice();var r=e.length,n=s?s(r):new e.constructor(r);return e.copy(n),n}},110754,(e,t,r)=>{t.exports=function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}},130675,(e,t,r)=>{var n=e.r(436849),i=e.r(688136);t.exports=function(e,t){return n(e,i(e),t)}},301773,(e,t,r)=>{var n=e.r(995762),i=e.r(139866),a=e.r(688136),o=e.r(679497);t.exports=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)n(t,a(e)),e=i(e);return t}:o},624981,(e,t,r)=>{var n=e.r(436849),i=e.r(301773);t.exports=function(e,t){return n(e,i(e),t)}},977042,(e,t,r)=>{var n=e.r(789485),i=e.r(301773),a=e.r(671763);t.exports=function(e){return n(e,a,i)}},843528,(e,t,r)=>{var n=Object.prototype.hasOwnProperty;t.exports=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&n.call(e,"index")&&(r.index=e.index,r.input=e.input),r}},773261,(e,t,r)=>{var n=e.r(680567);t.exports=function(e){var t=new e.constructor(e.byteLength);return new n(t).set(new n(e)),t}},981053,(e,t,r)=>{var n=e.r(773261);t.exports=function(e,t){var r=t?n(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}},140707,(e,t,r)=>{var n=/\w*$/;t.exports=function(e){var t=new e.constructor(e.source,n.exec(e));return t.lastIndex=e.lastIndex,t}},947034,(e,t,r)=>{var n=e.r(220259),i=n?n.prototype:void 0,a=i?i.valueOf:void 0;t.exports=function(e){return a?Object(a.call(e)):{}}},194032,(e,t,r)=>{var n=e.r(773261);t.exports=function(e,t){var r=t?n(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}},20284,(e,t,r)=>{var n=e.r(773261),i=e.r(981053),a=e.r(140707),o=e.r(947034),s=e.r(194032),l="[object Boolean]",c="[object Date]",u="[object Map]",d="[object Number]",f="[object RegExp]",h="[object Set]",p="[object String]",b="[object Symbol]",g="[object ArrayBuffer]",m="[object DataView]",v="[object Float32Array]",y="[object Float64Array]",x="[object Int8Array]",w="[object Int16Array]",_="[object Int32Array]",S="[object Uint8Array]",E="[object Uint8ClampedArray]",k="[object Uint16Array]",N="[object Uint32Array]";t.exports=function(e,t,r){var j=e.constructor;switch(t){case g:return n(e);case l:case c:return new j(+e);case m:return i(e,r);case v:case y:case x:case w:case _:case S:case E:case k:case N:return s(e,r);case u:return new j;case d:case p:return new j(e);case f:return a(e);case h:return new j;case b:return o(e)}}},993758,(e,t,r)=>{var n=e.r(763377),i=Object.create;t.exports=function(){function e(){}return function(t){if(!n(t))return{};if(i)return i(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}()},698607,(e,t,r)=>{var n=e.r(993758),i=e.r(139866),a=e.r(584902);t.exports=function(e){return"function"!=typeof e.constructor||a(e)?{}:n(i(e))}},660726,(e,t,r)=>{var n=e.r(323472),i=e.r(386457),a="[object Map]";t.exports=function(e){return i(e)&&n(e)==a}},259050,(e,t,r)=>{var n=e.r(660726),i=e.r(974529),a=e.r(784356),o=a&&a.isMap;t.exports=o?i(o):n},336614,(e,t,r)=>{var n=e.r(323472),i=e.r(386457),a="[object Set]";t.exports=function(e){return i(e)&&n(e)==a}},324771,(e,t,r)=>{var n=e.r(336614),i=e.r(974529),a=e.r(784356),o=a&&a.isSet;t.exports=o?i(o):n},838915,(e,t,r)=>{var n=e.r(407258),i=e.r(836997),a=e.r(279732),o=e.r(865198),s=e.r(808087),l=e.r(28725),c=e.r(110754),u=e.r(130675),d=e.r(624981),f=e.r(725291),h=e.r(977042),p=e.r(323472),b=e.r(843528),g=e.r(20284),m=e.r(698607),v=e.r(372797),y=e.r(125581),x=e.r(259050),w=e.r(763377),_=e.r(324771),S=e.r(937165),E=e.r(671763),k=1,N=2,j=4,C="[object Arguments]",M="[object Array]",A="[object Boolean]",R="[object Date]",T="[object Error]",O="[object Function]",L="[object GeneratorFunction]",I="[object Map]",P="[object Number]",B="[object Object]",D="[object RegExp]",z="[object Set]",F="[object String]",$="[object Symbol]",U="[object WeakMap]",H="[object ArrayBuffer]",V="[object DataView]",q="[object Float32Array]",W="[object Float64Array]",K="[object Int8Array]",G="[object Int16Array]",X="[object Int32Array]",Z="[object Uint8Array]",Y="[object Uint8ClampedArray]",J="[object Uint16Array]",Q="[object Uint32Array]",ee={};function et(e,t,r,M,A,R){var T,I=t&k,P=t&N,D=t&j;if(r&&(T=A?r(e,M,A,R):r(e)),void 0!==T)return T;if(!w(e))return e;var z=v(e);if(z){if(T=b(e),!I)return c(e,T)}else{var F=p(e),$=F==O||F==L;if(y(e))return l(e,I);if(F==B||F==C||$&&!A){if(T=P||$?{}:m(e),!I)return P?d(e,s(T,e)):u(e,o(T,e))}else{if(!ee[F])return A?e:{};T=g(e,F,I)}}R||(R=new n);var U=R.get(e);if(U)return U;R.set(e,T),_(e)?e.forEach(function(n){T.add(et(n,t,r,n,e,R))}):x(e)&&e.forEach(function(n,i){T.set(i,et(n,t,r,i,e,R))});var H=D?P?h:f:P?E:S,V=z?void 0:H(e);return i(V||e,function(n,i){V&&(n=e[i=n]),a(T,i,et(n,t,r,i,e,R))}),T}ee[C]=ee[M]=ee[H]=ee[V]=ee[A]=ee[R]=ee[q]=ee[W]=ee[K]=ee[G]=ee[X]=ee[I]=ee[P]=ee[B]=ee[D]=ee[z]=ee[F]=ee[$]=ee[Z]=ee[Y]=ee[J]=ee[Q]=!0,ee[T]=ee[O]=ee[U]=!1,t.exports=et},627595,(e,t,r)=>{var n=e.r(838915),i=1,a=4;t.exports=function(e){return n(e,i|a)}},842367,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.mergeClasses=void 0;var n=o(e.r(862921)),i=o(e.r(627595)),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};function o(e){return e&&e.__esModule?e:{default:e}}var s=r.mergeClasses=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=e.default&&(0,i.default)(e.default)||{};return t.map(function(t){var i=e[t];return i&&(0,n.default)(i,function(e,t){r[t]||(r[t]={}),r[t]=a({},r[t],i[t])}),t}),r};r.default=s},290544,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.autoprefix=void 0;var n=a(e.r(862921)),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};function a(e){return e&&e.__esModule?e:{default:e}}var o={borderRadius:function(e){return{msBorderRadius:e,MozBorderRadius:e,OBorderRadius:e,WebkitBorderRadius:e,borderRadius:e}},boxShadow:function(e){return{msBoxShadow:e,MozBoxShadow:e,OBoxShadow:e,WebkitBoxShadow:e,boxShadow:e}},userSelect:function(e){return{WebkitTouchCallout:e,KhtmlUserSelect:e,MozUserSelect:e,msUserSelect:e,WebkitUserSelect:e,userSelect:e}},flex:function(e){return{WebkitBoxFlex:e,MozBoxFlex:e,WebkitFlex:e,msFlex:e,flex:e}},flexBasis:function(e){return{WebkitFlexBasis:e,flexBasis:e}},justifyContent:function(e){return{WebkitJustifyContent:e,justifyContent:e}},transition:function(e){return{msTransition:e,MozTransition:e,OTransition:e,WebkitTransition:e,transition:e}},transform:function(e){return{msTransform:e,MozTransform:e,OTransform:e,WebkitTransform:e,transform:e}},absolute:function(e){var t=e&&e.split(" ");return{position:"absolute",top:t&&t[0],right:t&&t[1],bottom:t&&t[2],left:t&&t[3]}},extend:function(e,t){var r=t[e];return r||{extend:e}}},s=r.autoprefix=function(e){var t={};return(0,n.default)(e,function(e,r){var a={};(0,n.default)(e,function(e,t){var r=o[t];r?a=i({},a,r(e)):a[t]=e}),t[r]=a}),t};r.default=s},514198,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.hover=void 0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=a(e.r(136960));function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}function l(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=r.hover=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(r){function a(){o(this,a);for(var r,l,c,u=arguments.length,d=Array(u),f=0;f<u;f++)d[f]=arguments[f];return l=c=s(this,(r=a.__proto__||Object.getPrototypeOf(a)).call.apply(r,[this].concat(d))),c.state={hover:!1},c.handleMouseOver=function(){return c.setState({hover:!0})},c.handleMouseOut=function(){return c.setState({hover:!1})},c.render=function(){return i.default.createElement(t,{onMouseOver:c.handleMouseOver,onMouseOut:c.handleMouseOut},i.default.createElement(e,n({},c.props,c.state)))},s(c,l)}return l(a,r),a}(i.default.Component)};r.default=c},61458,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.active=void 0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=a(e.r(136960));function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}function l(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=r.active=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(r){function a(){o(this,a);for(var r,l,c,u=arguments.length,d=Array(u),f=0;f<u;f++)d[f]=arguments[f];return l=c=s(this,(r=a.__proto__||Object.getPrototypeOf(a)).call.apply(r,[this].concat(d))),c.state={active:!1},c.handleMouseDown=function(){return c.setState({active:!0})},c.handleMouseUp=function(){return c.setState({active:!1})},c.render=function(){return i.default.createElement(t,{onMouseDown:c.handleMouseDown,onMouseUp:c.handleMouseUp},i.default.createElement(e,n({},c.props,c.state)))},s(c,l)}return l(a,r),a}(i.default.Component)};r.default=c},25905,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){var r={},n=function(e){var t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];r[e]=t};return 0===e&&n("first-child"),e===t-1&&n("last-child"),(0===e||e%2==0)&&n("even"),1===Math.abs(e%2)&&n("odd"),n("nth-child",e),r}},521783,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ReactCSS=r.loop=r.handleActive=r.handleHover=r.hover=void 0;var n=c(e.r(723331)),i=c(e.r(842367)),a=c(e.r(290544)),o=c(e.r(514198)),s=c(e.r(61458)),l=c(e.r(25905));function c(e){return e&&e.__esModule?e:{default:e}}r.hover=o.default,r.handleHover=o.default,r.handleActive=s.default,r.loop=l.default;var u=r.ReactCSS=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];var s=(0,n.default)(r),l=(0,i.default)(e,s);return(0,a.default)(l)};r.default=u},770362,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=a(e.r(136960));function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var r={};for(var n in e)!(t.indexOf(n)>=0)&&Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}var s=24;r.default=function(e){var t=e.fill,r=void 0===t?"currentColor":t,a=e.width,l=void 0===a?s:a,c=e.height,u=void 0===c?s:c,d=e.style,f=void 0===d?{}:d,h=o(e,["fill","width","height","style"]);return i.default.createElement("svg",n({viewBox:"0 0 "+s+" "+s,style:n({fill:r,width:l,height:u},f)},h),i.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))}},836765,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=a(e.r(136960));function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var r={};for(var n in e)!(t.indexOf(n)>=0)&&Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}var s=24;r.default=function(e){var t=e.fill,r=void 0===t?"currentColor":t,a=e.width,l=void 0===a?s:a,c=e.height,u=void 0===c?s:c,d=e.style,f=void 0===d?{}:d,h=o(e,["fill","width","height","style"]);return i.default.createElement("svg",n({viewBox:"0 0 "+s+" "+s,style:n({fill:r,width:l,height:u},f)},h),i.default.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))}},925502,e=>{"use strict";let t,r,n,i;var a=e.i(94601),o=e.i(301765),s=e.i(762193),l=e.i(568572),c=e.i(309169),u=e.i(747300),d=a;function f(e){var t,r,n="";if("string"==typeof e||"number"==typeof e)n+=e;else if("object"==typeof e)if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=f(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}let h=function(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=f(e))&&(n&&(n+=" "),n+=t);return n};var p=e.i(136960),b=e.i(277908),g=l,m=p,v=l,y=e.i(911678),x=e.i(858837),w=e.i(265267),_=e.i(316217),S=e.i(431187);let E=e=>{let t=navigator.userAgent;if(e?.isAndroidApp){let e=t.match(/Chrome\/([0-9.]+)/);return e?`WebView ${e[1]}`:"Android WebView"}if(e?.isIOSApp){let e=t.match(/AppleWebKit\/([0-9.]+)/);return e?`WebView ${e[1]}`:"iOS WebView"}if(e?.isMacOSApp){let e=t.match(/AppleWebKit\/([0-9.]+)/);return e?`WebView ${e[1]}`:"macOS WebView"}if(e?.appPlatform==="tauri"&&e?.osPlatform==="windows"){let e=t.match(/Edg\/([0-9.]+)/);return e?`Edge ${e[1]}`:"Edge WebView2"}if(e?.appPlatform==="tauri"&&e?.osPlatform==="linux"){let e=t.match(/AppleWebKit\/([0-9.]+)/);return e?`WebView ${e[1]}`:"Linux WebView"}else if(t.includes("CriOS")&&t.includes("Mobile/")&&t.includes("Safari")){let e=t.match(/CriOS\/([0-9.]+)/);return e?`Chrome ${e[1]}`:"iOS Chrome"}else if(t.includes("FxiOS")&&t.includes("Mobile/")&&t.includes("Safari")){let e=t.match(/FxiOS\/([0-9.]+)/);return e?`Firefox ${e[1]}`:"iOS Firefox"}else if(t.includes("Chrome")&&t.includes("AppleWebKit")&&t.includes("Macintosh")){let e=t.match(/Chrome\/([0-9.]+)/);return e?`Chrome ${e[1]}`:"macOS Chrome"}else if(t.includes("Safari")&&t.includes("AppleWebKit")&&t.includes("Macintosh")){let e=t.match(/Safari\/([0-9.]+)/);return e?`Safari ${e[1]}`:"macOS Safari"}else if(t.includes("Edg/")){let e=t.match(/Edg\/([0-9.]+)/);return e?`Edge ${e[1]}`:"Edge WebView"}else if(t.includes("Firefox/")){let e=t.match(/Firefox\/([0-9.]+)/);return e?`Firefox ${e[1]}`:"Firefox Gecko"}else if(t.includes("Chrome/")&&!t.includes("Chromium")){let e=t.match(/Chrome\/([0-9.]+)/);return e?`Chrome ${e[1]}`:"Chrome"}else if(t.includes("Chromium/")){let e=t.match(/Chromium\/([0-9.]+)/);return e?`Chromium ${e[1]}`:"Chromium"}else{if(!t.includes("MSIE "))return"Unknown";let e=t.match(/MSIE ([0-9.]+)/);return e?`IE ${e[1]}`:"Internet Explorer"}},k=e=>{let t=E(e).match(/([0-9]+)\./);return t?parseFloat(t[1]):0},N=({systemUIVisible:e=!0,appThemeColor:t="base-100"}={})=>{let{appService:r}=(0,v.useEnv)(),{settings:n}=(0,x.useSettingsStore)(),{themeColor:i,isDarkMode:a,isEinkMode:o,showSystemUI:s,dismissSystemUI:l,updateAppTheme:c,setStatusBarHeight:u,systemUIAlwaysHidden:d,setSystemUIAlwaysHidden:f}=(0,y.useThemeStore)(),h=(0,m.useRef)(!1);(0,m.useEffect)(()=>{c(t),r?.isAndroidApp&&(0,_.getStatusBarHeight)().then(e=>{e.height&&e.height>0&&u(e.height/window.devicePixelRatio)})},[r?.isAndroidApp]);let p=(0,m.useCallback)(()=>{if(!r?.isMobileApp)return;let t=!!(e&&!d);t?s():l(),(0,_.setSystemUIVisibility)({visible:t,darkMode:a})},[r,a,e]);(0,m.useEffect)(()=>{r?.isMobileApp&&p()},[p]),(0,m.useEffect)(()=>{if(!r?.isMobileApp)return;p();let e=()=>{"visible"===document.visibilityState&&p()},t=()=>{r?.isIOSApp&&"ios"===(0,S.getOSPlatform)()&&(f(screen.orientation?.type.includes("landscape")),p())};return document.addEventListener("visibilitychange",e),screen.orientation?.addEventListener("change",t),()=>{document.removeEventListener("visibilitychange",e),screen.orientation?.removeEventListener("change",t)}},[p]),(0,m.useEffect)(()=>{r?.isAndroidApp&&(h.current=111>k(r))},[r]),(0,m.useEffect)(()=>{i&&w.themes.find(e=>e.name===i)&&h.current&&(0,w.applyCustomTheme)(void 0,i,!0)},[i]),(0,m.useEffect)(()=>{let e=n.globalReadSettings?.customThemes??[];e.forEach(e=>{(0,w.applyCustomTheme)(e,void 0,h.current)}),localStorage.setItem("customThemes",JSON.stringify(e))},[n.globalReadSettings?.customThemes]),(0,m.useEffect)(()=>{let e=a?"dark":"light";document.documentElement.setAttribute("data-theme",`${i}-${e}`),document.documentElement.style.setProperty("color-scheme",e),document.documentElement.style.setProperty("--overlayer-highlight-opacity",o?"1.0":"0.3"),document.documentElement.style.setProperty("--overlayer-highlight-blend-mode",o?"difference":a?"lighten":"normal"),document.documentElement.style.setProperty("--bg-texture-blend-mode",a?"lighten":"multiply")},[i,a,o])};var j=p,C=l,M=e.i(571975),A=e.i(479217),R=e.i(481959),T=e.i(908547);let O=(0,M.create)((e,t)=>({library:[],isSyncing:!1,syncProgress:0,currentBookshelf:[],selectedBooks:new Set,groups:{},checkOpenWithBooks:(0,A.isTauriAppPlatform)(),checkLastOpenBooks:(0,A.isTauriAppPlatform)(),setIsSyncing:t=>e({isSyncing:t}),setSyncProgress:t=>e({syncProgress:t}),getVisibleLibrary:()=>t().library.filter(e=>!e.deletedAt),setCurrentBookshelf:t=>{e({currentBookshelf:t})},setCheckOpenWithBooks:t=>e({checkOpenWithBooks:t}),setCheckLastOpenBooks:t=>e({checkLastOpenBooks:t}),setLibrary:r=>{let{refreshGroups:n}=t();e({library:r}),n()},updateBook:async(r,n)=>{let i=await r.getAppService(),{library:a}=t(),o=a.findIndex(e=>e.hash===n.hash);-1!==o&&(a[o]=n),e({library:[...a]}),await i.saveLibraryBooks(a)},updateBooks:async(r,n)=>{if(!n?.length)return;let i=await r.getAppService(),{library:a,refreshGroups:o}=t(),s=Array.from(new Map([...a,...n].map(e=>[e.hash,e])).values());e({library:s}),o(),await i.saveLibraryBooks(s)},setSelectedBooks:t=>{e({selectedBooks:new Set(t)})},getSelectedBooks:()=>Array.from(t().selectedBooks),toggleSelectedBook:t=>{e(e=>{let r=new Set(e.selectedBooks);return r.has(t)?r.delete(t):r.add(t),{selectedBooks:r}})},refreshGroups:()=>{let{library:r}=t(),n={};r.forEach(e=>{if(e.groupName&&e.groupName!==R.BOOK_UNGROUPED_NAME&&!e.deletedAt){n[(0,T.md5Fingerprint)(e.groupName)]=e.groupName;let t=e.groupName.indexOf("/",0);for(;t>0;){let r=e.groupName.substring(0,t);n[(0,T.md5Fingerprint)(r)]=r,t=e.groupName.indexOf("/",t+1)}}}),e({groups:n})},addGroup:r=>{let n=r.trim();if(!n)throw Error("Group name cannot be empty");let i=(0,T.md5Fingerprint)(n),{groups:a}=t();return e({groups:{...a,[i]:n}}),{id:i,name:n}},getGroups:()=>{let{groups:e}=t();return Object.entries(e).map(([e,t])=>({id:e,name:t})).sort((e,t)=>e.name.localeCompare(t.name))},getGroupId:e=>{let{groups:r}=t(),n=Object.entries(r).find(([t,r])=>r===e)?.[0];return n||(0,T.md5Fingerprint)(e)},getGroupName:e=>t().groups[e],getParentPath:e=>{let t=e.lastIndexOf("/");return -1===t?"":e.slice(0,t)},getGroupsByParent:e=>{let{groups:r}=t(),n=[];return Object.entries(r).forEach(([r,i])=>{t().getParentPath(i)===(e||"")&&n.push({id:r,name:i})}),n}}));var L=x;let I=()=>{let{envConfig:e}=(0,C.useEnv)(),{setLibrary:t}=O(),{setSettings:r}=(0,L.useSettingsStore)(),[n,i]=(0,j.useState)(!1),a=(0,j.useRef)(!1);return(0,j.useEffect)(()=>{a.current||(a.current=!0,(async()=>{let n=await e.getAppService();r(await n.loadSettings()),t(await n.loadLibraryBooks()),i(!0)})())},[]),{libraryLoaded:n}};var P=y,B=M,D=e.i(734431),z=e.i(416826),F=z;let $=null;function U(){return(null===$||0===$.byteLength)&&($=new Uint8Array(t.memory.buffer)),$}let H=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});H.decode();let V=0x7ff00000,q=0;function W(e,t){return(q+=t)>=V&&((H=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0})).decode(),q=t),H.decode(U().subarray(e,e+t))}function K(e,t){return W(e>>>=0,t)}let G=0,X=new TextEncoder;function Z(e,t,r){if(void 0===r){let r=X.encode(e),n=t(r.length,1)>>>0;return U().subarray(n,n+r.length).set(r),G=r.length,n}let n=e.length,i=t(n,1)>>>0,a=U(),o=0;for(;o<n;o++){let t=e.charCodeAt(o);if(t>127)break;a[i+o]=t}if(o!==n){0!==o&&(e=e.slice(o)),i=r(i,n,n=o+3*e.length,1)>>>0;let t=U().subarray(i+o,i+n);o+=X.encodeInto(e,t).written,i=r(i,n,o,1)>>>0}return G=o,i}function Y(e){let r=t.__wbindgen_externrefs.get(e);return t.__externref_table_dealloc(e),r}function J(e,r){let n,i;try{let s=Z(e,t.__wbindgen_malloc,t.__wbindgen_realloc),l=G,c=Z(r,t.__wbindgen_malloc,t.__wbindgen_realloc),u=G,d=t.simplecc(s,l,c,u);var a=d[0],o=d[1];if(d[3])throw a=0,o=0,Y(d[2]);return n=a,i=o,K(a,o)}finally{t.__wbindgen_free(n,i,1)}}"encodeInto"in X||(X.encodeInto=function(e,t){let r=X.encode(e);return t.set(r),{read:e.length,written:r.length}});let Q=new Set(["basic","cors","default"]);async function ee(e,t){if("function"==typeof Response&&e instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(e,t)}catch(t){if(e.ok&&Q.has(e.type)&&"application/wasm"!==e.headers.get("Content-Type"))console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",t);else throw t}let r=await e.arrayBuffer();return await WebAssembly.instantiate(r,t)}{let r=await WebAssembly.instantiate(e,t);return r instanceof WebAssembly.Instance?{instance:r,module:e}:r}}function et(){let e={};return e.wbg={},e.wbg.__wbindgen_cast_2241b6af4c4b2941=function(e,t){return K(e,t)},e.wbg.__wbindgen_init_externref_table=function(){let e=t.__wbindgen_externrefs,r=e.grow(4);e.set(0,void 0),e.set(r+0,void 0),e.set(r+1,null),e.set(r+2,!0),e.set(r+3,!1)},e}function er(e,r){return t=e.exports,en.__wbindgen_wasm_module=r,$=null,t.__wbindgen_start(),t}async function en(r){if(void 0!==t)return t;void 0!==r&&(Object.getPrototypeOf(r)===Object.prototype?{module_or_path:r}=r:console.warn("using deprecated parameters for the initialization function; pass a single object instead")),void 0===r&&(r=new e.U(e.r(594060)));let n=et();("string"==typeof r||"function"==typeof Request&&r instanceof Request||"function"==typeof URL&&r instanceof URL)&&(r=fetch(r));let{instance:i,module:a}=await ee(await r,n);return er(i,a)}let ei=en,ea=!1,eo=async()=>{ea||(await ei("/vendor/simplecc/simplecc_wasm_bg.wasm"),ea=!0)},es={none:"none",s2t:"t2s",t2s:"s2t",s2tw:"tw2s",s2hk:"hk2s",s2twp:"tw2sp",tw2s:"s2tw",hk2s:"s2hk",tw2sp:"s2twp"},el=(e,t,r=!1)=>r?J(e,es[t]):J(e,t),ec=(e,t)=>{for(let r of e){if(r.href===t)return[r];if(r.subitems){let e=ec(r.subitems,t);if(e.length)return[r,...e]}}return[]},eu=(e,t)=>{let r=0,n=e.length-1,i=null;for(;r<=n;){let a=Math.floor((r+n)/2),o=e[a],s=e[a].cfi||"",l=F.CFI.compare(s,t);if(0===l)return ed(o,t)??o;l<0?(i=ed(o,t)??o,r=a+1):n=a-1}return i},ed=(e,t)=>e.subitems?.length?eu(e.subitems,t):null,ef=async(e,t,r)=>{let n=e?.toc||[];if(!n.length)return;r&&"none"!==r&&(await eo(),eh(n,r));let i=e?.sections||[];if(!i.length)return;let a=i.map(e=>"no"!=e.linear&&e.size>0?e.size:0),o=0,s=a.reduce((e,t)=>(e.push(o),o+=t,e),[]),l=s[s.length-1]||0,c=1500;i.forEach((e,t)=>{e.location={current:Math.floor(s[t]/c),next:Math.floor((s[t]+a[t])/c),total:Math.floor(l/c)}});let u=i.reduce((e,t)=>(e[t.id]=t,e),{});ep(e,n,i,u),t&&eb(n)},eh=(e,t)=>{e.forEach(e=>{e.label&&(e.label=el(e.label,t)),e.subitems&&eh(e.subitems,t)})},ep=(e,t,r,n,i=0)=>(t.forEach(a=>{if(a.id??=i++,a.href){let i=e.splitTOCHref(a.href)[0],o=n[i];o&&(a.cfi=o.cfi,(i===a.href||t.length<=r.length)&&(a.location=o.location))}a.subitems&&(i=ep(e,a.subitems,r,n,i))}),i),eb=e=>{e.sort((e,t)=>e.location&&t.location?e.location.current-t.location.current:0)};var eg=e.i(320313),em=e.i(528934),ev=R,ey=x;let ex=(0,M.create)((e,t)=>({booksData:{},getBookData:e=>{let r=e.split("-")[0];return t().booksData[r]||null},clearBookData:t=>{let r=t.split("-")[0];e(e=>{let t={...e.booksData};return delete t[r],{booksData:t}})},getConfig:e=>{if(!e)return null;let r=e.split("-")[0];return t().booksData[r]?.config||null},setConfig:(t,r)=>{e(e=>{let n=t.split("-")[0],i=e.booksData[n]?.config||null;return i?(Object.assign(i,r),{booksData:{...e.booksData,[n]:{...e.booksData[n],config:i}}}):(console.warn("No config found for book",n),e)})},saveConfig:async(e,t,r,n)=>{let i=await e.getAppService(),{library:a,setLibrary:o}=O.getState(),s=a.findIndex(e=>e.hash===t.split("-")[0]);if(-1==s)return;let l=a.splice(s,1)[0];l.progress=r.progress,l.updatedAt=Date.now(),l.downloadedAt=l.downloadedAt||Date.now(),a.unshift(l),o([...a]),r.updatedAt=Date.now(),await i.saveBookConfig(l,r,n),await i.saveLibraryBooks(a)},updateBooknotes:(t,r)=>{let n;return e(e=>{let i=t.split("-")[0],a=e.booksData[i];if(!a)return e;let o=Array.from(new Map(r.map(e=>[`${e.id}-${e.type}-${e.cfi}`,e])).values());return n={...a.config,updatedAt:Date.now(),booknotes:o},{booksData:{...e.booksData,[i]:{...a,config:{...a.config,updatedAt:Date.now(),booknotes:o}}}}}),n}}));var ew=S;let e_=(0,B.create)((e,t)=>({viewStates:{},bookKeys:[],hoveredBookKey:null,setBookKeys:t=>e({bookKeys:t}),setHoveredBookKey:t=>e({hoveredBookKey:t}),getView:e=>e&&t().viewStates[e]?.view||null,setView:(t,r)=>e(e=>({viewStates:{...e.viewStates,[t]:{...e.viewStates[t],view:r}}})),getViews:()=>Object.values(t().viewStates).map(e=>e.view),getViewsById:e=>{let{viewStates:r}=t();return Object.values(r).filter(t=>t.key&&t.key.startsWith(e)).map(e=>e.view)},clearViewState:t=>{e(e=>{let r={...e.viewStates};return delete r[t],{viewStates:r}})},getViewState:e=>t().viewStates[e]||null,initViewState:async(t,r,n,i=!0,a=!1)=>{let o=ex.getState().booksData[r];e(e=>({viewStates:{...e.viewStates,[n]:{key:"",view:null,viewerKey:"",isPrimary:!1,loading:!0,inited:!1,error:null,progress:null,ribbonVisible:!1,ttsEnabled:!1,syncing:!1,gridInsets:null,viewSettings:null}}}));try{let s=await t.getAppService(),{settings:l}=ey.useSettingsStore.getState(),{library:c}=O.getState(),u=c.find(e=>e.hash===r);if(!u)throw Error("Book not found");let d=o?.bookDoc,f=o?.file;d&&f&&!a||(f=(await s.loadBookContent(u)).file,console.log("Loading book",n),d=(await new z.DocumentLoader(f).open()).book);let h=await s.loadBookConfig(u,l);await ef(d,h.viewSettings?.sortedTOC??!1,h.viewSettings?.convertChineseVariant??"none"),d.metadata.title||(d.metadata.title=(0,em.getBaseFilename)(f.name)),u.sourceTitle=(0,eg.formatTitle)(d.metadata.title),"string"==typeof d.metadata?.language&&d.metadata.language in ev.SUPPORTED_LANGNAMES&&(d.metadata.language=ev.SUPPORTED_LANGNAMES[d.metadata.language]);let p=(0,eg.getPrimaryLanguage)(d.metadata.language);u.primaryLanguage=u.primaryLanguage??p,u.metadata=u.metadata??d.metadata,u.metaHash=(0,eg.getMetadataHash)(d.metadata);let b=D.FIXED_LAYOUT_FORMATS.has(u.format);ex.setState(e=>({booksData:{...e.booksData,[r]:{id:r,book:u,file:f,config:h,bookDoc:d,isFixedLayout:b}}}));let g=h.viewSettings,m=l.globalViewSettings;e(e=>({viewStates:{...e.viewStates,[n]:{...e.viewStates[n],key:n,view:null,viewerKey:`${n}-${(0,ew.uniqueId)()}`,isPrimary:i,loading:!1,inited:!1,error:null,progress:null,ribbonVisible:!1,ttsEnabled:!1,syncing:!1,gridInsets:null,viewSettings:{...m,...g}}}}))}catch(t){throw console.error(t),e(e=>({viewStates:{...e.viewStates,[n]:{...e.viewStates[n],key:"",view:null,viewerKey:"",isPrimary:!1,loading:!1,inited:!1,error:"Failed to load book.",progress:null,ribbonVisible:!1,ttsEnabled:!1,syncing:!1,gridInsets:null,viewSettings:null}}})),t}},getViewSettings:e=>t().viewStates[e]?.viewSettings||null,setViewSettings:(r,n)=>{if(!r)return;let i=r.split("-")[0],a=ex.getState().booksData[i],o=t().viewStates[r];o&&a&&(o.isPrimary&&ex.setState(e=>({booksData:{...e.booksData,[i]:{...a,config:{...a.config,updatedAt:Date.now(),viewSettings:n}}}})),e(e=>({viewStates:{...e.viewStates,[r]:{...e.viewStates[r],viewSettings:n}}})))},getProgress:e=>t().viewStates[e]?.progress||null,setProgress:(t,r,n,i,a,o,s)=>e(e=>{let l=t.split("-")[0],c=ex.getState().booksData[l],u=e.viewStates[t];if(!u||!c)return e;let d=c.isFixedLayout?i:a,f=[d.current+1,d.total],{library:h,setLibrary:p}=O.getState(),b=h.findIndex(e=>e.hash===l);if(-1!==b){let e=[...h],t=e[b];e[b]={...t,progress:f,updatedAt:Date.now()},p(e)}let g=c.config,m={...c.config,progress:f,location:r};return ex.setState(e=>({booksData:{...e.booksData,[l]:{...c,config:u.isPrimary?m:g}}})),{viewStates:{...e.viewStates,[t]:{...u,progress:{...u.progress,location:r,sectionHref:n?.href,sectionLabel:n?.label,sectionId:n?.id,section:i,pageinfo:a,timeinfo:o,range:s}}}}}),setBookmarkRibbonVisibility:(t,r)=>e(e=>({viewStates:{...e.viewStates,[t]:{...e.viewStates[t],ribbonVisible:r}}})),setTTSEnabled:(t,r)=>e(e=>({viewStates:{...e.viewStates,[t]:{...e.viewStates[t],ttsEnabled:r}}})),setIsSyncing:(t,r)=>e(e=>({viewStates:{...e.viewStates,[t]:{...e.viewStates[t],syncing:r}}})),getGridInsets:e=>t().viewStates[e]?.gridInsets||{top:0,right:0,bottom:0,left:0},setGridInsets:(t,r)=>e(e=>({viewStates:{...e.viewStates,[t]:{...e.viewStates[t],gridInsets:r}}})),setViewInited:(t,r)=>e(e=>({viewStates:{...e.viewStates,[t]:{...e.viewStates[t],inited:r}}})),recreateViewer:(r,n)=>{let i=n.split("-")[0];t().initViewState(r,i,n,!0,!0).then(()=>{e(e=>({viewStates:{...e.viewStates,[n]:{...e.viewStates[n],viewerKey:`${n}-${(0,ew.uniqueId)()}`}}}))})}})),eS={searchTerm:"",searchResults:null,searchResultIndex:0,searchProgress:1},eE={activeBooknoteType:null,booknoteResults:null,booknoteIndex:0},ek=(0,M.create)((e,t)=>({sideBarBookKey:null,sideBarWidth:"",isSideBarVisible:!1,isSideBarPinned:!1,searchNavStates:{},booknotesNavStates:{},searchStatuses:{},getIsSideBarVisible:()=>t().isSideBarVisible,getSideBarWidth:()=>t().sideBarWidth,setSideBarBookKey:t=>e({sideBarBookKey:t}),setSideBarWidth:t=>e({sideBarWidth:t}),toggleSideBar:()=>e(e=>({isSideBarVisible:!e.isSideBarVisible})),toggleSideBarPin:()=>e(e=>({isSideBarPinned:!e.isSideBarPinned})),setSideBarVisible:t=>e({isSideBarVisible:t}),setSideBarPin:t=>e({isSideBarPinned:t}),getSearchStatus:e=>t().searchStatuses[e]||null,getSearchNavState:e=>t().searchNavStates[e]||eS,setSearchTerm:(t,r)=>e(e=>({searchNavStates:{...e.searchNavStates,[t]:{...e.searchNavStates[t]||eS,searchTerm:r}}})),setSearchResults:(t,r)=>e(e=>({searchNavStates:{...e.searchNavStates,[t]:{...e.searchNavStates[t]||eS,searchResults:r}}})),setSearchResultIndex:(t,r)=>e(e=>({searchNavStates:{...e.searchNavStates,[t]:{...e.searchNavStates[t]||eS,searchResultIndex:r}}})),setSearchProgress:(t,r)=>e(e=>({searchNavStates:{...e.searchNavStates,[t]:{...e.searchNavStates[t]||eS,searchProgress:r}}})),clearSearch:t=>e(e=>({searchNavStates:{...e.searchNavStates,[t]:{...eS}},searchStatuses:{...e.searchStatuses,[t]:"terminated"}})),setSearchStatus:(t,r)=>e(e=>({searchStatuses:{...e.searchStatuses,[t]:r}})),getBooknotesNavState:e=>t().booknotesNavStates[e]||eE,setActiveBooknoteType:(t,r)=>e(e=>({booknotesNavStates:{...e.booknotesNavStates,[t]:{...e.booknotesNavStates[t]||eE,activeBooknoteType:r}}})),setBooknoteResults:(t,r)=>e(e=>({booknotesNavStates:{...e.booknotesNavStates,[t]:{...e.booknotesNavStates[t]||eE,booknoteResults:r}}})),setBooknoteIndex:(t,r)=>e(e=>({booknotesNavStates:{...e.booknotesNavStates,[t]:{...e.booknotesNavStates[t]||eE,booknoteIndex:r}}})),clearBooknotesNav:t=>e(e=>({booknotesNavStates:{...e.booknotesNavStates,[t]:{...eE}}}))})),eN=(0,M.create)((e,t)=>({notebookWidth:"",isNotebookVisible:!1,isNotebookPinned:!1,notebookNewAnnotation:null,notebookEditAnnotation:null,notebookAnnotationDrafts:{},getIsNotebookVisible:()=>t().isNotebookVisible,getNotebookWidth:()=>t().notebookWidth,setNotebookWidth:t=>e({notebookWidth:t}),toggleNotebook:()=>e(e=>({isNotebookVisible:!e.isNotebookVisible})),toggleNotebookPin:()=>e(e=>({isNotebookPinned:!e.isNotebookPinned})),setNotebookVisible:t=>e({isNotebookVisible:t}),setNotebookPin:t=>e({isNotebookPinned:t}),setNotebookNewAnnotation:t=>e({notebookNewAnnotation:t}),setNotebookEditAnnotation:t=>e({notebookEditAnnotation:t}),saveNotebookAnnotationDraft:(t,r)=>e(e=>({notebookAnnotationDrafts:{...e.notebookAnnotationDrafts,[t]:r}})),getNotebookAnnotationDraft:e=>t().notebookAnnotationDrafts[e]}));var ej=x,eC=M,eM=_;class eA{syncListeners;asyncListeners;constructor(){this.syncListeners=new Map,this.asyncListeners=new Map}on(e,t){this.asyncListeners.has(e)||this.asyncListeners.set(e,new Set),this.asyncListeners.get(e).add(t)}off(e,t){this.asyncListeners.get(e)?.delete(t)}async dispatch(e,t){let r=this.asyncListeners.get(e);if(r){let n=new CustomEvent(e,{detail:t});for(let e of r)await e(n)}}onSync(e,t){this.syncListeners.has(e)||this.syncListeners.set(e,[]),this.syncListeners.get(e).push(t)}offSync(e,t){let r=this.syncListeners.get(e);r&&this.syncListeners.set(e,r.filter(e=>e!==t))}dispatchSync(e,t){let r=this.syncListeners.get(e);if(r){let n=new CustomEvent(e,{detail:t});for(let e of[...r].reverse())if(e(n))return!0}return!1}}let eR=new eA,eT=e=>"VolumeUp"===e||"VolumeDown"===e?eR.dispatch("native-key-down",{keyName:e}):"Back"===e&&eR.dispatchSync("native-key-down",{keyName:e}),eO=(0,eC.create)((e,t)=>({volumeKeysIntercepted:!1,backKeyIntercepted:!1,volumeKeysInterceptionCount:0,backKeyInterceptionCount:0,acquireVolumeKeyInterception:()=>{let{volumeKeysInterceptionCount:r}=t();0==r&&(window.onNativeKeyDown=eT,(0,eM.interceptKeys)({volumeKeys:!0}),e({volumeKeysIntercepted:!0})),e({volumeKeysInterceptionCount:r+1})},releaseVolumeKeyInterception:()=>{let{volumeKeysInterceptionCount:r}=t();r<=1?((0,eM.interceptKeys)({volumeKeys:!1}),e({volumeKeysIntercepted:!1,volumeKeysInterceptionCount:0})):e({volumeKeysInterceptionCount:r-1})},acquireBackKeyInterception:()=>{let{backKeyInterceptionCount:r}=t();0==r&&(window.onNativeKeyDown=eT,(0,eM.interceptKeys)({backKey:!0}),e({backKeyIntercepted:!0})),e({backKeyInterceptionCount:r+1})},releaseBackKeyInterception:()=>{let{backKeyInterceptionCount:r}=t();r<=1?((0,eM.interceptKeys)({backKey:!1}),e({backKeyIntercepted:!1,backKeyInterceptionCount:0})):e({backKeyInterceptionCount:r-1})},listenToNativeTouchEvents:()=>{window.onNativeTouch=e=>eR.dispatch("native-touch",e)},getScreenBrightness:async()=>(await (0,eM.getScreenBrightness)()).brightness,setScreenBrightness:async e=>{await (0,eM.setScreenBrightness)({brightness:e})}}));var eL=p,eI=e.i(75751),eP=A;let eB=e=>{let t=(0,eL.useRef)(null),r=(0,eL.useRef)(null);(0,eL.useEffect)(()=>{let n=async()=>{try{"wakeLock"in navigator&&(t.current=await navigator.wakeLock.request("screen"),t.current.addEventListener("release",()=>{t.current=null}),console.log("Wake lock acquired"))}catch(e){console.info("Failed to acquire wake lock:",e)}},i=()=>{t.current&&(t.current.release(),t.current=null,console.log("Wake lock released"))},a=()=>{document.hidden?i():n()};return e?n():t.current&&i(),(0,eP.isWebAppPlatform)()&&e?document.addEventListener("visibilitychange",a):(0,eP.isTauriAppPlatform)()&&e&&(r.current=(0,eI.getCurrentWindow)().onFocusChanged(({payload:e})=>{e?n():i()})),()=>{i(),(0,eP.isWebAppPlatform)()&&e&&document.removeEventListener("visibilitychange",a),r.current&&r.current.then(e=>e())}},[e])};var eD=p,ez=l;e.i(991425);var eF=p;e.i(323254);var e$=e.i(291944);let eU=(e="translation")=>{let{t}=(0,e$.useTranslation)(e);return(0,eF.useCallback)((e,r={})=>t(e,{defaultValue:e,...r}),[t])},eH=()=>`${Date.now()}-${Math.random().toString(36).substring(2,9)}`,eV=(0,M.create)((e,t)=>({transfers:{},isQueuePaused:!1,isTransferQueueOpen:!1,maxConcurrent:2,activeCount:0,setIsTransferQueueOpen:t=>e({isTransferQueueOpen:t}),addTransfer:(t,r,n,i=10,a=!1)=>{let o=eH(),s={id:o,bookHash:t,bookTitle:r,type:n,status:"pending",progress:0,totalBytes:0,transferredBytes:0,transferSpeed:0,retryCount:0,maxRetries:3,createdAt:Date.now(),priority:i,isBackground:a};return e(e=>({transfers:{...e.transfers,[o]:s}})),o},removeTransfer:t=>{e(e=>{let{[t]:r,...n}=e.transfers;return{transfers:n}})},updateTransferProgress:(t,r,n,i,a)=>{e(e=>{let o=e.transfers[t];return o?{transfers:{...e.transfers,[t]:{...o,progress:r,transferredBytes:n,totalBytes:i,transferSpeed:a}}}:e})},setTransferStatus:(t,r,n)=>{e(e=>{let i=e.transfers[t];if(!i)return e;let a={status:r,error:n};return"in_progress"!==r||i.startedAt||(a.startedAt=Date.now()),("completed"===r||"failed"===r||"cancelled"===r)&&(a.completedAt=Date.now()),{transfers:{...e.transfers,[t]:{...i,...a}}}})},retryTransfer:t=>{e(e=>{let r=e.transfers[t];return r?{transfers:{...e.transfers,[t]:{...r,status:"pending",progress:0,transferredBytes:0,transferSpeed:0,error:void 0,startedAt:void 0,completedAt:void 0}}}:e})},incrementRetryCount:t=>{e(e=>{let r=e.transfers[t];return r?{transfers:{...e.transfers,[t]:{...r,retryCount:r.retryCount+1}}}:e})},pauseQueue:()=>e({isQueuePaused:!0}),resumeQueue:()=>e({isQueuePaused:!1}),clearCompleted:()=>{e(e=>{let t={};return Object.entries(e.transfers).forEach(([e,r])=>{"completed"!==r.status&&(t[e]=r)}),{transfers:t}})},clearFailed:()=>{e(e=>{let t={};return Object.entries(e.transfers).forEach(([e,r])=>{"failed"!==r.status&&"cancelled"!==r.status&&(t[e]=r)}),{transfers:t}})},clearAll:()=>e({transfers:{}}),getPendingTransfers:()=>Object.values(t().transfers).filter(e=>"pending"===e.status),getActiveTransfers:()=>Object.values(t().transfers).filter(e=>"in_progress"===e.status),getFailedTransfers:()=>Object.values(t().transfers).filter(e=>"failed"===e.status||"cancelled"===e.status),getCompletedTransfers:()=>Object.values(t().transfers).filter(e=>"completed"===e.status),getTransferByBookHash:(e,r)=>Object.values(t().transfers).find(t=>t.bookHash===e&&t.type===r&&["pending","in_progress"].includes(t.status)),getQueueStats:()=>{let e=Object.values(t().transfers);return{pending:e.filter(e=>"pending"===e.status).length,active:e.filter(e=>"in_progress"===e.status).length,completed:e.filter(e=>"completed"===e.status).length,failed:e.filter(e=>"failed"===e.status||"cancelled"===e.status).length,total:e.length}},setActiveCount:t=>e({activeCount:t}),restoreTransfers:(t,r)=>{let n={};Object.entries(t).forEach(([e,t])=>{"in_progress"===t.status?n[e]={...t,status:"pending",progress:0,transferredBytes:0,transferSpeed:0}:n[e]=t}),e({transfers:n,isQueuePaused:r})}})),eq="readest_transfer_queue",eW=2e3;class eK{static instance;appService=null;isProcessing=!1;abortControllers=new Map;isInitialized=!1;getLibrary=null;updateBook=null;_=null;constructor(){}static getInstance(){return eK.instance||(eK.instance=new eK),eK.instance}async initialize(e,t,r,n){this.isInitialized||(this.appService=e,this.getLibrary=t,this.updateBook=r,this._=n,await this.loadPersistedQueue(),this.isInitialized=!0,this.processQueue())}isReady(){return this.isInitialized&&null!==this.appService}queueUpload(e,t=10){if(!this.isReady())return console.warn("TransferManager not initialized"),null;let r=eV.getState(),n=r.getTransferByBookHash(e.hash,"upload");if(n)return n.id;let i=r.addTransfer(e.hash,e.title,"upload",t);return this.persistQueue(),this.processQueue(),i}queueDownload(e,t=10){if(!this.isReady())return console.warn("TransferManager not initialized"),null;let r=eV.getState(),n=r.getTransferByBookHash(e.hash,"download");if(n)return n.id;let i=r.addTransfer(e.hash,e.title,"download",t);return this.persistQueue(),this.processQueue(),i}queueDelete(e,t=10,r=!1){if(!this.isReady())return console.warn("TransferManager not initialized"),null;let n=eV.getState(),i=n.getTransferByBookHash(e.hash,"delete");if(i)return i.id;let a=n.addTransfer(e.hash,e.title,"delete",t,r);return this.persistQueue(),this.processQueue(),a}queueBatchUploads(e,t=10){return e.map(e=>this.queueUpload(e,t)).filter(e=>null!==e)}cancelTransfer(e){let t=this.abortControllers.get(e);t&&(t.abort(),this.abortControllers.delete(e)),eV.getState().setTransferStatus(e,"cancelled"),this.persistQueue()}retryTransfer(e){eV.getState().retryTransfer(e),this.persistQueue(),this.processQueue()}retryAllFailed(){let e=eV.getState();e.getFailedTransfers().forEach(t=>{e.retryTransfer(t.id)}),this.persistQueue(),this.processQueue()}pauseQueue(){eV.getState().pauseQueue(),this.persistQueue()}resumeQueue(){eV.getState().resumeQueue(),this.processQueue(),this.persistQueue()}async processQueue(){if(!this.isProcessing){this.isProcessing=!0;try{await this._processQueueInternal()}finally{this.isProcessing=!1}}}async _processQueueInternal(){let e=eV.getState();if(e.isQueuePaused)return;let t=e.getPendingTransfers(),r=e.getActiveTransfers().length,n=e.maxConcurrent-r;if(n<=0||0===t.length)return;let i=[...t].sort((e,t)=>e.priority!==t.priority?e.priority-t.priority:e.createdAt-t.createdAt).slice(0,n);await Promise.all(i.map(e=>this.executeTransfer(e)));let a=eV.getState();a.getPendingTransfers().length>0&&!a.isQueuePaused&&setTimeout(()=>this.processQueue(),100)}async executeTransfer(e){if(!this.appService||!this.getLibrary||!this.updateBook)return void console.error("TransferManager not properly initialized");let t=this._,r=eV.getState(),n=new AbortController;this.abortControllers.set(e.id,n),r.setTransferStatus(e.id,"in_progress"),r.setActiveCount(r.getActiveTransfers().length+1);try{let r=this.getLibrary().find(t=>t.hash===e.bookHash);if(!r)throw Error(t("Book not found in library"));if("upload"===e.type)throw Error(t("Upload functionality has been removed"));if("download"===e.type)throw Error(t("Download functionality has been removed"));"delete"===e.type&&(await this.appService.deleteBook(r,"cloud"),await this.updateBook(r));eV.getState().setTransferStatus(e.id,"completed");let n={upload:t("Book uploaded: {{title}}",{title:e.bookTitle}),download:t("Book downloaded: {{title}}",{title:e.bookTitle}),delete:t("Deleted cloud backup of the book: {{title}}",{title:e.bookTitle})};e.isBackground||eR.dispatch("toast",{type:"info",timeout:2e3,message:n[e.type]})}catch(o){if(n.signal.aborted)return;let r=o instanceof Error?o.message:t("Unknown error"),i=eV.getState(),a=i.transfers[e.id];if(a&&a.retryCount<a.maxRetries){let t=eW*Math.pow(2,a.retryCount);i.incrementRetryCount(e.id),i.setTransferStatus(e.id,"pending",`Retry ${a.retryCount+1}/${a.maxRetries}`),setTimeout(()=>{this.processQueue()},t)}else{if(r.includes("Not authenticated"))eR.dispatch("toast",{type:"error",message:t("Please log in to continue")});else if(r.includes("Insufficient storage quota"))eR.dispatch("toast",{type:"error",message:t("Insufficient storage quota")});else{let r={upload:t("Failed to upload book: {{title}}",{title:e.bookTitle}),download:t("Failed to download book: {{title}}",{title:e.bookTitle}),delete:t("Failed to delete cloud backup of the book: {{title}}",{title:e.bookTitle})};eR.dispatch("toast",{type:"error",message:r[e.type]})}eV.getState().setTransferStatus(e.id,"failed",r)}}finally{this.abortControllers.delete(e.id);let t=eV.getState();t.setActiveCount(Math.max(0,t.getActiveTransfers().length)),this.persistQueue(),setTimeout(()=>this.processQueue(),100)}}async loadPersistedQueue(){try{if("undefined"==typeof localStorage)return;let e=localStorage.getItem(eq);if(!e)return;let t=JSON.parse(e);eV.getState().restoreTransfers(t.transfers,t.isQueuePaused)}catch(e){console.error("Failed to load transfer queue:",e)}}persistQueue(){try{if("undefined"==typeof localStorage)return;let e=eV.getState(),t={transfers:e.transfers,isQueuePaused:e.isQueuePaused};localStorage.setItem(eq,JSON.stringify(t))}catch(e){console.error("Failed to persist transfer queue:",e)}}}let eG=eK.getInstance();function eX(e=!0,t=0){let{envConfig:r,appService:n}=(0,ez.useEnv)(),i=eU(),a=eV(e=>e.transfers),o=eV(e=>e.isQueuePaused),s=eV(e=>e.setIsTransferQueueOpen);(0,eD.useEffect)(()=>{let a=async()=>{if(n&&r){let e=()=>O.getState().library,t=async e=>{await O.getState().updateBook(r,e)},a=i;await eG.initialize(n,e,t,a)}};e&&setTimeout(()=>{a()},t)},[n,r,e,t,i]);let l=(0,eD.useCallback)((e,t)=>eG.queueUpload(e,t),[]),c=(0,eD.useCallback)((e,t)=>eG.queueDownload(e,t),[]),u=(0,eD.useCallback)((e,t)=>eG.queueBatchUploads(e,t),[]),d=(0,eD.useCallback)(e=>{eG.cancelTransfer(e)},[]),f=(0,eD.useCallback)(e=>{eG.retryTransfer(e)},[]),h=(0,eD.useCallback)(()=>{eG.retryAllFailed()},[]),p=(0,eD.useCallback)(()=>{eG.pauseQueue()},[]),b=(0,eD.useCallback)(()=>{eG.resumeQueue()},[]),g=(0,eD.useCallback)(()=>{eV.getState().clearCompleted()},[]),m=(0,eD.useCallback)(()=>{eV.getState().clearFailed()},[]),v=(0,eD.useCallback)(()=>{eV.getState().clearAll()},[]),y=(0,eD.useCallback)((e,t)=>eV.getState().getTransferByBookHash(e,t),[]),x=(0,eD.useMemo)(()=>{let e=Object.values(a);return{pending:e.filter(e=>"pending"===e.status).length,active:e.filter(e=>"in_progress"===e.status).length,completed:e.filter(e=>"completed"===e.status).length,failed:e.filter(e=>"failed"===e.status||"cancelled"===e.status).length,total:e.length}},[a]),w=(0,eD.useMemo)(()=>Object.values(a).filter(e=>"pending"===e.status),[a]),_=(0,eD.useMemo)(()=>Object.values(a).filter(e=>"in_progress"===e.status),[a]),S=(0,eD.useMemo)(()=>Object.values(a).filter(e=>"failed"===e.status||"cancelled"===e.status),[a]),E=(0,eD.useMemo)(()=>Object.values(a).filter(e=>"completed"===e.status),[a]),k=(0,eD.useMemo)(()=>w.length>0||_.length>0,[w,_]);return{transfers:Object.values(a),isQueuePaused:o,stats:x,pendingTransfers:w,activeTransfers:_,failedTransfers:S,completedTransfers:E,hasActiveTransfers:k,setIsTransferQueueOpen:s,queueUpload:l,queueDownload:c,queueBatchUploads:u,cancelTransfer:d,retryTransfer:f,retryAllFailed:h,pauseQueue:p,resumeQueue:b,clearCompleted:g,clearFailed:m,clearAll:v,getTransferProgress:y}}var eZ=e.i(194934);async function eY(e,t){await (0,eZ.invoke)("plugin:opener|open_url",{url:e,with:t})}var eJ=A;let eQ=()=>{let e=window.open;globalThis.open=function(t,r,n){return(0,eJ.isTauriAppPlatform)()?(eY(t?.toString()||""),null):e(t,r,n)}};var e0=S,e1=em,e2=T;let e3=[{family:"Bitter",weights:"ital,wght@0,100..900;1,100..900"},{family:"Fira Code",weights:"wght@300..700"},{family:"Literata",weights:"ital,opsz,wght@0,7..72,200..900;1,7..72,200..900"},{family:"Merriweather",weights:"ital,opsz,wght@0,18..144,300..900;1,18..144,300..900"},{family:"Noto Sans",weights:"ital,wght@0,100..900;1,100..900"},{family:"Open Sans",weights:"ital,wght@0,300..800;1,300..800"},{family:"Roboto",weights:"ital,wght@0,100..900;1,100..900"},{family:"Roboto Slab",weights:"ital,wght@0,100..900;1,100..900"},{family:"Vollkorn",weights:"ital,wght@0,400..900;1,400..900"},{family:"PT Sans",weights:"ital,wght@0,400;0,700;1,400;1,700"},{family:"PT Serif",weights:"ital,wght@0,400;0,700;1,400;1,700"},{family:"PT Mono",weights:""}],e4=[{family:"LXGW WenKai TC",weights:""},{family:"Noto Sans SC",weights:""},{family:"Noto Sans TC",weights:""},{family:"Noto Serif JP",weights:""}],e6=(e=!1)=>{let t=`
  <!-- Preconnect to Google Fonts for faster DNS resolution and connection -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="dns-prefetch" href="https://fonts.googleapis.com">
  <link rel="dns-prefetch" href="https://fonts.gstatic.com">
`,r=`
  <!-- Preconnect to CJK font CDNs -->
  <link rel="preconnect" href="https://cdn.jsdelivr.net">
  <link rel="preconnect" href="https://cdnjs.cloudflare.com">
  <link rel="preconnect" href="https://ik.imagekit.io">
  <link rel="preconnect" href="https://db.onlinewebfonts.com">
  <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
  <link rel="dns-prefetch" href="https://cdnjs.cloudflare.com">
  <link rel="dns-prefetch" href="https://ik.imagekit.io">
  <link rel="dns-prefetch" href="https://db.onlinewebfonts.com">
`;return e?t+r:t},e5=()=>`
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?${e3.map(({family:e,weights:t})=>`family=${encodeURIComponent(e)}${t?`:${t}`:""}`).join("&")}&display=swap" crossorigin="anonymous">
`,e8=()=>`
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/misans-webfont@1.0.4/misans-l3/misans-l3/result.min.css" crossorigin="anonymous" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/lxgw-wenkai-screen-web/1.520.0/lxgwwenkaigbscreen/result.css" crossorigin="anonymous" />
  <link rel='stylesheet' href='https://ik.imagekit.io/fonts131/packages/hwmct/dist/%E6%B1%87%E6%96%87%E6%98%8E%E6%9C%9D%E4%BD%93/result.css' crossorigin="anonymous" />
  <link rel='stylesheet' href='https://ik.imagekit.io/fonts131/packages/jhlst/dist/%E4%BA%AC%E8%8F%AF%E8%80%81%E5%AE%8B%E4%BD%93v2_002/result.css' crossorigin="anonymous" />
  <link rel='stylesheet' href='https://ik.imagekit.io/fonts131/packages/syst/dist/SourceHanSerifCN/result.css' crossorigin="anonymous" />
  <link rel='stylesheet' href='https://ik.imagekit.io/fonts131/packages/GuanKiapTsingKhai/dist/GuanKiapTsingKhai-T/result.css' crossorigin="anonymous" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?${e4.map(({family:e,weights:t})=>`family=${encodeURIComponent(e)}${t?`:${t}`:""}`).join("&")}&display=swap" crossorigin="anonymous" />
`,e9=()=>`
  @font-face {
    font-family: "FangSong";
    font-display: swap;
    src: local("Fang Song"), local("FangSong"), local("Noto Serif CJK"), local("Source Han Serif SC VF"), url("https://db.onlinewebfonts.com/t/2ecbfe1d9bfc191c6f15c0ccc23cbd43.eot");
    src: url("https://db.onlinewebfonts.com/t/2ecbfe1d9bfc191c6f15c0ccc23cbd43.eot?#iefix") format("embedded-opentype"),
    url("https://db.onlinewebfonts.com/t/2ecbfe1d9bfc191c6f15c0ccc23cbd43.woff2") format("woff2"),
    url("https://db.onlinewebfonts.com/t/2ecbfe1d9bfc191c6f15c0ccc23cbd43.woff") format("woff"),
    url("https://db.onlinewebfonts.com/t/2ecbfe1d9bfc191c6f15c0ccc23cbd43.ttf") format("truetype"),
    url("https://db.onlinewebfonts.com/t/2ecbfe1d9bfc191c6f15c0ccc23cbd43.svg#FangSong") format("svg");
  }
  @font-face {
    font-family: "Kaiti";
    font-display: swap;
    src: local("Kai"), local("KaiTi"), local("AR PL UKai"), local("LXGW WenKai GB Screen"), url("https://db.onlinewebfonts.com/t/1ee9941f1b8c128110ca4307dda59917.eot");
    src: url("https://db.onlinewebfonts.com/t/1ee9941f1b8c128110ca4307dda59917.eot?#iefix")format("embedded-opentype"),
    url("https://db.onlinewebfonts.com/t/1ee9941f1b8c128110ca4307dda59917.woff2")format("woff2"),
    url("https://db.onlinewebfonts.com/t/1ee9941f1b8c128110ca4307dda59917.woff")format("woff"),
    url("https://db.onlinewebfonts.com/t/1ee9941f1b8c128110ca4307dda59917.ttf")format("truetype"),
    url("https://db.onlinewebfonts.com/t/1ee9941f1b8c128110ca4307dda59917.svg#STKaiti")format("svg");
  }
  @font-face {
    font-family: "Heiti";
    font-display: swap;
    src: local("Hei"), local("SimHei"), local("WenQuanYi Zen Hei"), local("Source Han Sans SC VF"), url("https://db.onlinewebfonts.com/t/a4948b9d43a91468825a5251df1ec58d.eot");
    src: url("https://db.onlinewebfonts.com/t/a4948b9d43a91468825a5251df1ec58d.eot?#iefix")format("embedded-opentype"),
    url("https://db.onlinewebfonts.com/t/a4948b9d43a91468825a5251df1ec58d.woff2")format("woff2"),
    url("https://db.onlinewebfonts.com/t/a4948b9d43a91468825a5251df1ec58d.woff")format("woff"),
    url("https://db.onlinewebfonts.com/t/a4948b9d43a91468825a5251df1ec58d.ttf")format("truetype"),
    url("https://db.onlinewebfonts.com/t/a4948b9d43a91468825a5251df1ec58d.svg#WenQuanYi Micro Hei")format("svg");
  }
  @font-face {
    font-family: "XiHeiti";
    font-display: swap;
    src: local("PingFang SC"), local("Microsoft YaHei"), local("WenQuanYi Micro Hei"), local("FZHei-B01"), url("https://db.onlinewebfonts.com/t/4f0b783ba4a1b381fc7e7af81ecab481.eot");
    src: url("https://db.onlinewebfonts.com/t/4f0b783ba4a1b381fc7e7af81ecab481.eot?#iefix")format("embedded-opentype"),
    url("https://db.onlinewebfonts.com/t/4f0b783ba4a1b381fc7e7af81ecab481.woff2")format("woff2"),
    url("https://db.onlinewebfonts.com/t/4f0b783ba4a1b381fc7e7af81ecab481.woff")format("woff"),
    url("https://db.onlinewebfonts.com/t/4f0b783ba4a1b381fc7e7af81ecab481.ttf")format("truetype"),
    url("https://db.onlinewebfonts.com/t/4f0b783ba4a1b381fc7e7af81ecab481.svg#STHeiti J Light")format("svg");
}
`,e7=async(e,t=!1)=>{let r=t||(0,e0.isCJKEnv)(),n=e6(r);Array.from(new DOMParser().parseFromString(n,"text/html").head.children).forEach(t=>{if("LINK"===t.tagName){let r=e.createElement("link");r.rel=t.getAttribute("rel")||"",r.href=t.getAttribute("href")||"";let n=t.getAttribute("crossorigin");n&&(r.crossOrigin=n),e.head.firstChild?e.head.insertBefore(r,e.head.firstChild):e.head.appendChild(r)}});let i=e5(),a="";if(r&&(a=e9(),i=`${i}
${e8()}`),a){let t=e.createElement("style");t.textContent=a,e.head.appendChild(t)}Array.from(new DOMParser().parseFromString(i,"text/html").head.children).forEach(t=>{if("LINK"===t.tagName){let r=e.createElement("link");r.rel=t.getAttribute("rel")||"",r.href=t.getAttribute("href")||"",r.crossOrigin=t.getAttribute("crossorigin")||"",e.head.appendChild(r)}})};function te(e){return(0,e1.getFilename)(e).replace(/\.(ttf|otf|woff|woff2)$/i,"")}function tt(e){return(0,e2.md5Fingerprint)(e)}function tr(e){switch(e.toLowerCase().split(".").pop()){case"ttf":default:return"ttf";case"otf":return"otf";case"woff":return"woff";case"woff2":return"woff2"}}function tn(e){return({ttf:"font/ttf",otf:"font/otf",woff:"font/woff",woff2:"font/woff2"})[e]||"font/ttf"}function ti(e){return({ttf:"truetype",otf:"opentype",woff:"woff",woff2:"woff2"})[e]||"truetype"}function ta(e){return e.replace(/\s+/g," ").trim()}function to(e){let t=ti(tr(e.path)),r=ta(e.family||e.name),n=e.style||"normal",i=e.weight||400,a=e.variable||!1;if(!e.blobUrl)throw Error(`Blob URL not available for font: ${e.name}`);return`
    @font-face {
      font-family: "${r}";
      ${a?"":`font-style: ${n};`}
      ${a?"":`font-weight: ${i};`}
      src: url("${e.blobUrl}") format("${t}");
      font-display: swap;
    }
  `}function ts(e,t){let r=t?.name||te(e);return{id:tt(r),name:r,family:t?.family,style:t?.style,weight:t?.weight,variable:t?.variable,path:e}}let tl=(e,t)=>{let r=`custom-font-${t.id}`,n=e.getElementById(r)||e.createElement("style");n.id=r,n.textContent=to(t),n.parentNode||e.head.appendChild(n)};var tc=A,tu=_,td=a,tf=p,th=e.i(736206),tp=l,tb=e.i(989470),tg=eZ;class tm extends tg.Resource{constructor(e){super(e.rid),this.available=!0,this.currentVersion=e.currentVersion,this.version=e.version,this.date=e.date,this.body=e.body,this.rawJson=e.rawJson}async download(e,t){ty(t);let r=new tg.Channel;e&&(r.onmessage=e);let n=await (0,tg.invoke)("plugin:updater|download",{onEvent:r,rid:this.rid,...t});this.downloadedBytes=new tg.Resource(n)}async install(){if(!this.downloadedBytes)throw Error("Update.install called before Update.download");await (0,tg.invoke)("plugin:updater|install",{updateRid:this.rid,bytesRid:this.downloadedBytes.rid}),this.downloadedBytes=void 0}async downloadAndInstall(e,t){ty(t);let r=new tg.Channel;e&&(r.onmessage=e),await (0,tg.invoke)("plugin:updater|download_and_install",{onEvent:r,rid:this.rid,...t})}async close(){await this.downloadedBytes?.close(),await super.close()}}async function tv(e){ty(e);let t=await (0,tg.invoke)("plugin:updater|check",{...e});return t?new tm(t):null}function ty(e){e?.headers&&(e.headers=Array.from(new Headers(e.headers).entries()))}var tx=e.i(349114),tw=e.i(53194),t_=e.i(948341),tS=e.i(177151),tE=eZ,tk=eI;function tN(){return new tM((0,tk.getCurrentWindow)(),window.__TAURI_INTERNALS__.metadata.currentWebview.label,{skip:!0})}async function tj(){return(0,tE.invoke)("plugin:webview|get_all_webviews").then(e=>e.map(e=>new tM(new tk.Window(e.windowLabel,{skip:!0}),e.label,{skip:!0})))}let tC=["tauri://created","tauri://error"];class tM{constructor(e,t,r){this.window=e,this.label=t,this.listeners=Object.create(null),(null==r?void 0:r.skip)||(0,tE.invoke)("plugin:webview|create_webview",{windowLabel:e.label,options:{...r,label:t}}).then(async()=>this.emit("tauri://created")).catch(async e=>this.emit("tauri://error",e))}static async getByLabel(e){var t;return null!=(t=(await tj()).find(t=>t.label===e))?t:null}static getCurrent(){return tN()}static async getAll(){return tj()}async listen(e,t){return this._handleTauriEvent(e,t)?()=>{let r=this.listeners[e];r.splice(r.indexOf(t),1)}:(0,tS.listen)(e,t,{target:{kind:"Webview",label:this.label}})}async once(e,t){return this._handleTauriEvent(e,t)?()=>{let r=this.listeners[e];r.splice(r.indexOf(t),1)}:(0,tS.once)(e,t,{target:{kind:"Webview",label:this.label}})}async emit(e,t){if(tC.includes(e)){for(let r of this.listeners[e]||[])r({event:e,id:-1,payload:t});return}return(0,tS.emit)(e,t)}async emitTo(e,t,r){if(tC.includes(t)){for(let e of this.listeners[t]||[])e({event:t,id:-1,payload:r});return}return(0,tS.emitTo)(e,t,r)}_handleTauriEvent(e,t){return!!tC.includes(e)&&(e in this.listeners?this.listeners[e].push(t):this.listeners[e]=[t],!0)}async position(){return(0,tE.invoke)("plugin:webview|webview_position",{label:this.label}).then(e=>new t_.PhysicalPosition(e))}async size(){return(0,tE.invoke)("plugin:webview|webview_size",{label:this.label}).then(e=>new t_.PhysicalSize(e))}async close(){return(0,tE.invoke)("plugin:webview|webview_close",{label:this.label})}async setSize(e){return(0,tE.invoke)("plugin:webview|set_webview_size",{label:this.label,value:e instanceof t_.Size?e:new t_.Size(e)})}async setPosition(e){return(0,tE.invoke)("plugin:webview|set_webview_position",{label:this.label,value:e instanceof t_.Position?e:new t_.Position(e)})}async setFocus(){return(0,tE.invoke)("plugin:webview|set_webview_focus",{label:this.label})}async setAutoResize(e){return(0,tE.invoke)("plugin:webview|set_webview_auto_resize",{label:this.label,value:e})}async hide(){return(0,tE.invoke)("plugin:webview|webview_hide",{label:this.label})}async show(){return(0,tE.invoke)("plugin:webview|webview_show",{label:this.label})}async setZoom(e){return(0,tE.invoke)("plugin:webview|set_webview_zoom",{label:this.label,value:e})}async reparent(e){return(0,tE.invoke)("plugin:webview|reparent",{label:this.label,window:"string"==typeof e?e:e.label})}async clearAllBrowsingData(){return(0,tE.invoke)("plugin:webview|clear_all_browsing_data")}async setBackgroundColor(e){return(0,tE.invoke)("plugin:webview|set_webview_background_color",{color:e})}async onDragDropEvent(e){let t=await this.listen(tS.TauriEvent.DRAG_ENTER,t=>{e({...t,payload:{type:"enter",paths:t.payload.paths,position:new t_.PhysicalPosition(t.payload.position)}})}),r=await this.listen(tS.TauriEvent.DRAG_OVER,t=>{e({...t,payload:{type:"over",position:new t_.PhysicalPosition(t.payload.position)}})}),n=await this.listen(tS.TauriEvent.DRAG_DROP,t=>{e({...t,payload:{type:"drop",paths:t.payload.paths,position:new t_.PhysicalPosition(t.payload.position)}})}),i=await this.listen(tS.TauriEvent.DRAG_LEAVE,t=>{e({...t,payload:{type:"leave"}})});return()=>{t(),n(),r(),i()}}}var tA=eI,tR=tS,tT=eZ;function tO(){return new tI(tN().label,{skip:!0})}async function tL(){return(0,tT.invoke)("plugin:window|get_all_windows").then(e=>e.map(e=>new tI(e,{skip:!0})))}class tI{constructor(e,t={}){var r;this.label=e,this.listeners=Object.create(null),(null==t?void 0:t.skip)||(0,tT.invoke)("plugin:webview|create_webview_window",{options:{...t,parent:"string"==typeof t.parent?t.parent:null==(r=t.parent)?void 0:r.label,label:e}}).then(async()=>this.emit("tauri://created")).catch(async e=>this.emit("tauri://error",e))}static async getByLabel(e){var t;let r=null!=(t=(await tL()).find(t=>t.label===e))?t:null;return r?new tI(r.label,{skip:!0}):null}static getCurrent(){return tO()}static async getAll(){return tL()}async listen(e,t){return this._handleTauriEvent(e,t)?()=>{let r=this.listeners[e];r.splice(r.indexOf(t),1)}:(0,tR.listen)(e,t,{target:{kind:"WebviewWindow",label:this.label}})}async once(e,t){return this._handleTauriEvent(e,t)?()=>{let r=this.listeners[e];r.splice(r.indexOf(t),1)}:(0,tR.once)(e,t,{target:{kind:"WebviewWindow",label:this.label}})}async setBackgroundColor(e){return(0,tT.invoke)("plugin:window|set_background_color",{color:e}).then(()=>(0,tT.invoke)("plugin:webview|set_webview_background_color",{color:e}))}}(function e(e,t){(Array.isArray(t)?t:[t]).forEach(t=>{Object.getOwnPropertyNames(t.prototype).forEach(r=>{var n;"object"==typeof e.prototype&&e.prototype&&r in e.prototype||Object.defineProperty(e.prototype,r,null!=(n=Object.getOwnPropertyDescriptor(t.prototype,r))?n:Object.create(null))})})})(tI,[tA.Window,tM]);var tP=e.i(119322),tB=a,tD=tb,tz=th,tF=l,t$=p,tU=tx,tH=eZ;async function tV(e=0){await (0,tH.invoke)("plugin:process|exit",{code:e})}async function tq(){await (0,tH.invoke)("plugin:process|restart")}var tW=tw,tK=eZ;class tG{constructor(){this.eventListeners=Object.create(null)}addListener(e,t){return this.on(e,t)}removeListener(e,t){return this.off(e,t)}on(e,t){return e in this.eventListeners?this.eventListeners[e].push(t):this.eventListeners[e]=[t],this}once(e,t){let r=n=>{this.removeListener(e,r),t(n)};return this.addListener(e,r)}off(e,t){return e in this.eventListeners&&(this.eventListeners[e]=this.eventListeners[e].filter(e=>e!==t)),this}removeAllListeners(e){return e?delete this.eventListeners[e]:this.eventListeners=Object.create(null),this}emit(e,t){if(e in this.eventListeners){for(let r of this.eventListeners[e])r(t);return!0}return!1}listenerCount(e){return e in this.eventListeners?this.eventListeners[e].length:0}prependListener(e,t){return e in this.eventListeners?this.eventListeners[e].unshift(t):this.eventListeners[e]=[t],this}prependOnceListener(e,t){let r=n=>{this.removeListener(e,r),t(n)};return this.prependListener(e,r)}}class tX{constructor(e){this.pid=e}async write(e){await (0,tK.invoke)("plugin:shell|stdin_write",{pid:this.pid,buffer:e})}async kill(){await (0,tK.invoke)("plugin:shell|kill",{cmd:"killChild",pid:this.pid})}}class tZ extends tG{constructor(e,t=[],r){super(),this.stdout=new tG,this.stderr=new tG,this.program=e,this.args="string"==typeof t?[t]:t,this.options=r??{}}static create(e,t=[],r){return new tZ(e,t,r)}static sidecar(e,t=[],r){let n=new tZ(e,t,r);return n.options.sidecar=!0,n}async spawn(){let e=this.program,t=this.args,r=this.options;"object"==typeof t&&Object.freeze(t);let n=new tK.Channel;return n.onmessage=e=>{switch(e.event){case"Error":this.emit("error",e.payload);break;case"Terminated":this.emit("close",e.payload);break;case"Stdout":this.stdout.emit("data",e.payload);break;case"Stderr":this.stderr.emit("data",e.payload)}},await (0,tK.invoke)("plugin:shell|spawn",{program:e,args:t,options:r,onEvent:n}).then(e=>new tX(e))}async execute(){let e=this.program,t=this.args,r=this.options;return"object"==typeof t&&Object.freeze(t),await (0,tK.invoke)("plugin:shell|execute",{program:e,args:t,options:r})}}var tY=eZ,tJ=A,tQ=p,t0=s;let t1="Daily Quota Exceeded",t2="TranslationCache",t3=1,t4="translations",t6={},t5={},t8=()=>new Promise((e,t)=>{if(!window.indexedDB){console.warn("IndexedDB not supported. Using in-memory cache only."),t(Error("IndexedDB not supported"));return}let r=indexedDB.open(t2,t3);r.onerror=e=>{console.error("IndexedDB error:",e),t(Error("Could not open IndexedDB"))},r.onsuccess=t=>{e(t.target.result)},r.onupgradeneeded=e=>{let t=e.target.result;if(!t.objectStoreNames.contains(t4)){let e=t.createObjectStore(t4,{keyPath:"key"});e.createIndex("provider","provider",{unique:!1}),e.createIndex("timestamp","timestamp",{unique:!1})}}}),t9=async(e={})=>{try{let t,r=await t8(),n=r.transaction(t4,"readonly"),i=n.objectStore(t4);if(e.onlyLoadProviders&&e.onlyLoadProviders.length>0){let t=e.onlyLoadProviders.map(e=>new Promise(t=>{let r=i.index("provider").getAll(e);r.onsuccess=()=>{t(r.result)},r.onerror=()=>{t([])}})),r=(await Promise.all(t)).flat();t7(r,e)}else(t=i.getAll()).onsuccess=()=>{let r=t.result;t7(r,e)},t.onerror=e=>{console.error("Error loading cache from IndexedDB:",e)};n.oncomplete=()=>{r.close()}}catch(e){console.error("Failed to load cache from IndexedDB:",e)}},t7=(e,t)=>{let r=e;if(t.maxAge){let e=Date.now()-t.maxAge;r=r.filter(t=>t.timestamp>=e)}t.onlyLoadLanguages&&(t.onlyLoadLanguages.source&&t.onlyLoadLanguages.source.length>0&&(r=r.filter(e=>t.onlyLoadLanguages.source.includes(e.sourceLang))),t.onlyLoadLanguages.target&&t.onlyLoadLanguages.target.length>0&&(r=r.filter(e=>t.onlyLoadLanguages.target.includes(e.targetLang)))),t.maxEntries&&r.length>t.maxEntries&&(r.sort((e,t)=>t.timestamp-e.timestamp),r=r.slice(0,t.maxEntries)),r.forEach(e=>{t6[e.key]=e.translation,t5[e.key]=e.timestamp})},re=(e,t,r,n)=>`${n}:${t}:${r}:${e}`,rt=async(e,t,r,n)=>{if(!e?.trim())return null;let i=re(e,t,r,n);if(t6[i])return t6[i];try{let e=await t8(),t=e.transaction(t4,"readonly"),r=t.objectStore(t4).get(i);return new Promise(n=>{r.onsuccess=()=>{let e=r.result;e?(t6[i]=e.translation,t5[i]=e.timestamp,n(e.translation)):n(null)},r.onerror=()=>{n(null)},t.oncomplete=()=>{e.close()}})}catch(e){return console.error("Error accessing IndexedDB:",e),null}},rr=async(e,t,r,n,i)=>{if(!e?.trim()||!t)return;let a=re(e,r,n,i),o=Date.now();t6[a]=t,t5[a]=o;try{let s=await t8(),l=s.transaction(t4,"readwrite"),c=l.objectStore(t4),u={key:a,translation:t,timestamp:o,provider:i,sourceLang:r,targetLang:n,originalText:e};return c.put(u),new Promise((e,t)=>{l.oncomplete=()=>{s.close(),e()},l.onerror=e=>{console.error("Error storing in IndexedDB:",e),t(Error("Failed to store in IndexedDB"))}})}catch(e){console.error("Error accessing IndexedDB:",e)}},rn=async(e={})=>{let{maxAge:t,maxEntries:r,maxSizeInBytes:n,dryRun:i=!1}=e;if(!t&&!r&&!n)return 0;try{let e=await t8(),a=e.transaction(t4,i?"readonly":"readwrite"),o=a.objectStore(t4),s=o.getAll();return new Promise(l=>{s.onsuccess=()=>{let e=s.result,a=[];if(t){let r=Date.now()-t,n=e.filter(e=>e.timestamp<r);a.push(...n)}if(r&&e.length>r){let t=[...e].sort((e,t)=>e.timestamp-t.timestamp).slice(0,e.length-r),n=new Set(a.map(e=>e.key));t.forEach(e=>{n.has(e.key)||a.push(e)})}if(n){let t=0;if(e.forEach(e=>{let r=JSON.stringify(e);t+=r.length}),t>n){let r=e.filter(e=>!a.some(t=>t.key===e.key)).sort((e,t)=>e.timestamp-t.timestamp),i=t-n,o=new Set(a.map(e=>e.key));for(let e of r){if(i<=0)break;if(!o.has(e.key)){let t=JSON.stringify(e),r=2*t.length;a.push(e),o.add(e.key),i-=r}}}}let c=a.length;!i&&c>0&&a.forEach(e=>{o.delete(e.key),delete t6[e.key],delete t5[e.key]}),l(c)},s.onerror=()=>{l(0)},a.oncomplete=()=>{e.close()}})}catch(e){return console.error("Error pruning cache:",e),0}},ri=null;(async(e={})=>{let{preload:t=!0,preloadOptions:r={maxAge:2592e6,maxEntries:1e4},autoPrune:n=!0,pruneInterval:i=36e5,pruneOptions:a={maxAge:7776e6,maxEntries:1e5,maxSizeInBytes:0xa00000}}=e;t&&await t9(r);let o=null;return n&&(await rn(a),o=window.setInterval(async()=>{await rn(a)},i)),()=>{null!==o&&clearInterval(o)}})().then(e=>{ri=e}),window.addEventListener("beforeunload",()=>{ri&&ri()});let ra={zh:e=>e.replace(/--/g,"").replace(/\s+([])/g,"$1").replace(/([])\s+/g,"$1"),es:e=>e.replace(/\?([A-Z])/g,"? $1").replace(/\!([A-Z])/g,"! $1"),fr:e=>e.replace(/\s+([!?:;])/g," $1").replace(/([!?:;])\s+/g,"$1 "),ja:e=>e.replace(/\s+([])/g,"$1").replace(/([])\s+/g,"$1")},ro=e=>e.replace(/\s+/g," ").replace(/\s+([.,!?;:])/g,"$1").trim();function rs(e){let t=ra[e.split("-")[0].toLowerCase()];return t?e=>t(ro(e)):ro}function rl(e,t){let r=rs(t);return e.map(r)}let rc={Cover:"The Cover",Dedication:"Dedication Page",Acknowledgements:"The Acknowledgements"},ru=(e,t)=>{let r={...rc,...t};return 0===Object.keys(r).length?e:r[e]?r[e]:e};function rd(e={}){return t=>ru(t,e)}function rf(e,t={}){let r=rd(t);return e.map(r)}var rh=A,rp=S;class rb extends Error{}function rg(e){return decodeURIComponent(atob(e).replace(/(.)/g,(e,t)=>{let r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}function rm(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw Error("base64 string is not of the correct length")}try{return rg(t)}catch(e){return atob(t)}}function rv(e,t){let r;if("string"!=typeof e)throw new rb("Invalid token specified: must be a string");t||(t={});let n=+(!0!==t.header),i=e.split(".")[n];if("string"!=typeof i)throw new rb(`Invalid token specified: missing part #${n+1}`);try{r=rm(i)}catch(e){throw new rb(`Invalid token specified: invalid base64 for part #${n+1} (${e.message})`)}try{return JSON.parse(r)}catch(e){throw new rb(`Invalid token specified: invalid json for part #${n+1} (${e.message})`)}}rb.prototype.name="InvalidTokenError";var ry=tP;let rx=crypto,rw=e=>e instanceof CryptoKey;new TextEncoder;new TextDecoder,e=>{let t=atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return r};class r_ extends Error{constructor(e,t){super(e,t),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}r_.code="ERR_JOSE_GENERIC";class rS extends r_{constructor(e,t,r="unspecified",n="unspecified"){super(e,{cause:{claim:r,reason:n,payload:t}}),this.code="ERR_JWT_CLAIM_VALIDATION_FAILED",this.claim=r,this.reason=n,this.payload=t}}rS.code="ERR_JWT_CLAIM_VALIDATION_FAILED";class rE extends r_{constructor(e,t,r="unspecified",n="unspecified"){super(e,{cause:{claim:r,reason:n,payload:t}}),this.code="ERR_JWT_EXPIRED",this.claim=r,this.reason=n,this.payload=t}}rE.code="ERR_JWT_EXPIRED";class rk extends r_{constructor(){super(...arguments),this.code="ERR_JOSE_ALG_NOT_ALLOWED"}}rk.code="ERR_JOSE_ALG_NOT_ALLOWED";class rN extends r_{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}}rN.code="ERR_JOSE_NOT_SUPPORTED";class rj extends r_{constructor(e="decryption operation failed",t){super(e,t),this.code="ERR_JWE_DECRYPTION_FAILED"}}rj.code="ERR_JWE_DECRYPTION_FAILED";class rC extends r_{constructor(){super(...arguments),this.code="ERR_JWE_INVALID"}}rC.code="ERR_JWE_INVALID";class rM extends r_{constructor(){super(...arguments),this.code="ERR_JWS_INVALID"}}rM.code="ERR_JWS_INVALID";class rA extends r_{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}}rA.code="ERR_JWT_INVALID";class rR extends r_{constructor(){super(...arguments),this.code="ERR_JWK_INVALID"}}rR.code="ERR_JWK_INVALID";class rT extends r_{constructor(){super(...arguments),this.code="ERR_JWKS_INVALID"}}rT.code="ERR_JWKS_INVALID";class rO extends r_{constructor(e="no applicable key found in the JSON Web Key Set",t){super(e,t),this.code="ERR_JWKS_NO_MATCHING_KEY"}}rO.code="ERR_JWKS_NO_MATCHING_KEY";class rL extends r_{constructor(e="multiple matching keys found in the JSON Web Key Set",t){super(e,t),this.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS"}}rL.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";class rI extends r_{constructor(e="request timed out",t){super(e,t),this.code="ERR_JWKS_TIMEOUT"}}rI.code="ERR_JWKS_TIMEOUT";class rP extends r_{constructor(e="signature verification failed",t){super(e,t),this.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}}function rB(e,t,...r){if((r=r.filter(Boolean)).length>2){let t=r.pop();e+=`one of type ${r.join(", ")}, or ${t}.`}else 2===r.length?e+=`one of type ${r[0]} or ${r[1]}.`:e+=`of type ${r[0]}.`;return null==t?e+=` Received ${t}`:"function"==typeof t&&t.name?e+=` Received function ${t.name}`:"object"==typeof t&&null!=t&&t.constructor?.name&&(e+=` Received an instance of ${t.constructor.name}`),e}function rD(e,t,...r){return rB(`Key for the ${e} algorithm must be `,t,...r)}rP.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";let rz=e=>!!rw(e)||e?.[Symbol.toStringTag]==="KeyObject",rF=["CryptoKey"];function r$(e){return"object"==typeof e&&null!==e}function rU(e){if(!r$(e)||"[object Object]"!==Object.prototype.toString.call(e))return!1;if(null===Object.getPrototypeOf(e))return!0;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function rH(e){return rU(e)&&"string"==typeof e.kty}function rV(e){return"oct"!==e.kty&&"string"==typeof e.d}function rq(e){return"oct"!==e.kty&&void 0===e.d}function rW(e){return rH(e)&&"oct"===e.kty&&"string"==typeof e.k}let rK=e=>e?.[Symbol.toStringTag],rG=(e,t,r)=>{if(void 0!==t.use&&"sig"!==t.use)throw TypeError("Invalid key for this operation, when present its use must be sig");if(void 0!==t.key_ops&&t.key_ops.includes?.(r)!==!0)throw TypeError(`Invalid key for this operation, when present its key_ops must include ${r}`);if(void 0!==t.alg&&t.alg!==e)throw TypeError(`Invalid key for this operation, when present its alg must be ${e}`);return!0},rX=(e,t,r,n)=>{if(!(t instanceof Uint8Array)){if(n&&rH(t)){if(rW(t)&&rG(e,t,r))return;throw TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!rz(t))throw TypeError(rD(e,t,...rF,"Uint8Array",n?"JSON Web Key":null));if("secret"!==t.type)throw TypeError(`${rK(t)} instances for symmetric algorithms must be of type "secret"`)}},rZ=(e,t,r,n)=>{if(n&&rH(t))switch(r){case"sign":if(rV(t)&&rG(e,t,r))return;throw TypeError("JSON Web Key for this operation be a private JWK");case"verify":if(rq(t)&&rG(e,t,r))return;throw TypeError("JSON Web Key for this operation be a public JWK")}if(!rz(t))throw TypeError(rD(e,t,...rF,n?"JSON Web Key":null));if("secret"===t.type)throw TypeError(`${rK(t)} instances for asymmetric algorithms must not be of type "secret"`);if("sign"===r&&"public"===t.type)throw TypeError(`${rK(t)} instances for asymmetric algorithm signing must be of type "private"`);if("decrypt"===r&&"public"===t.type)throw TypeError(`${rK(t)} instances for asymmetric algorithm decryption must be of type "private"`);if(t.algorithm&&"verify"===r&&"private"===t.type)throw TypeError(`${rK(t)} instances for asymmetric algorithm verifying must be of type "public"`);if(t.algorithm&&"encrypt"===r&&"private"===t.type)throw TypeError(`${rK(t)} instances for asymmetric algorithm encryption must be of type "public"`)};function rY(e,t,r,n){t.startsWith("HS")||"dir"===t||t.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(t)?rX(t,r,n,e):rZ(t,r,n,e)}rY.bind(void 0,!1),rY.bind(void 0,!0);let rJ=ry.default.env.AUTH_SECRET||"dev-secret";ry.default.env.AUTH_PASSWORD||Math.random().toString(36).substring(2,15),new TextEncoder().encode(rJ);var rQ=A,r0=e.i(974190),r1=S;let r2="translationDailyUsage",r3=(e,t)=>{{let r={[t||new Date().toISOString().split("T")[0]]:e};localStorage.setItem(r2,JSON.stringify(r))}},r4=(e,t)=>{if(!e||"PDF"===e.format)return!1;let r=e.primaryLanguage||"";return!(!r||"und"===r.toLowerCase()||t&&(0,r0.isSameLang)(r,t)||!t&&(0,r0.isSameLang)(r,(0,r1.getLocale)()))},r6=e=>(rv(e)||{}).plan||"free",r5=async()=>(0,rQ.isWebAppPlatform)()?localStorage.getItem("token")??null:null;var r8=r0,r9=R;let r7=(0,rh.getAPIBaseUrl)()+"/deepl/translate",ne={name:"deepl",label:(0,rp.stubTranslation)("DeepL"),authRequired:!0,quotaExceeded:!1,translate:async(e,t,r,n,i=!1)=>{let a=ne.authRequired,o={"Content-Type":"application/json"},s="free";if(n&&(s=r6(n),o.Authorization=`Bearer ${n}`),a&&!n)throw Error("Authentication token is required for DeepL translation");let l=JSON.stringify({text:e,source_lang:(0,r8.normalizeToShortLang)(t).toUpperCase(),target_lang:(0,r8.normalizeToShortLang)(r).toUpperCase(),use_cache:i}),c=r9.DEFAULT_DAILY_TRANSLATION_QUOTA[s];try{let t=await fetch(r7,{method:"POST",headers:o,body:l});if(!t.ok){let e=await t.json();if(e&&e.error&&e.error===t1)throw r3(c),ne.quotaExceeded=!0,Error(t1);throw Error(`Translation failed with status ${t.status}`)}let r=await t.json();if(!r||!r.translations)throw Error("Invalid response from translation service");return e.map((e,t)=>{if(!e?.trim().length)return e;let n=r.translations?.[t];return n?.daily_usage&&(r3(n.daily_usage),ne.quotaExceeded=r.daily_usage>=c),n?.text||e})}catch(e){throw e}}};var nt=tw,nr=A,nn=r0;let ni=null,na=async()=>{let e=Date.now();if(ni&&ni.expiresAt>e)return ni.token;try{let t=(0,nr.isTauriAppPlatform)()?nt.fetch:window.fetch,r=await t("https://edge.microsoft.com/translate/auth",{method:"GET",headers:{"User-Agent":"Mozilla/5.0"}});if(!r.ok)throw Error(`Failed to get auth token: ${r.status}`);let n=await r.text(),i=e+48e4;return ni={token:n,expiresAt:i},n}catch(e){throw console.error("Error getting Microsoft translation auth token:",e),e}},no={name:"azure",label:(0,S.stubTranslation)("Azure Translator"),translate:async(e,t,r)=>{if(!e.length)return[];let n=[],i=t?(0,nn.normalizeToFullLang)(t):"",a=(0,nn.normalizeToFullLang)(r),o=e.map(async(e,t)=>{if(!e?.trim().length){n[t]=e;return}let r="https://api-edge.cognitive.microsofttranslator.com/translate",o=new URLSearchParams({to:a,"api-version":"3.0"});i&&"auto"!==i.toLowerCase()&&o.append("from",i);let s=await na(),l=(0,nr.isTauriAppPlatform)()?nt.fetch:window.fetch,c=await l(`${r}?${o.toString()}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify([{Text:e}])});if(!c.ok)throw Error(`Translation failed with status ${c.status}`);let u=await c.json();Array.isArray(u)&&u.length>0&&u[0].translations?n[t]=u[0].translations[0].text||e:n[t]=e});return await Promise.all(o),n}};var ns=tw,nl=A,nc=r0;let nu={name:"google",label:(0,S.stubTranslation)("Google Translate"),translate:async(e,t,r)=>{if(!e.length)return[];let n=[],i=e.map(async(e,i)=>{if(!e?.trim().length){n[i]=e;return}let a=new URL("https://translate.googleapis.com/translate_a/single");a.searchParams.append("client","gtx"),a.searchParams.append("dt","t"),a.searchParams.append("sl",(0,nc.normalizeToShortLang)(t).toLowerCase()||"auto"),a.searchParams.append("tl",(0,nc.normalizeToShortLang)(r).toLowerCase()),a.searchParams.append("q",e);let o=(0,nl.isTauriAppPlatform)()?ns.fetch:window.fetch,s=await o(a.toString());if(!s.ok)throw Error(`Translation failed with status ${s.status}`);let l=await s.json();if(Array.isArray(l)&&Array.isArray(l[0])){let t=l[0].filter(e=>Array.isArray(e)&&e[0]).map(e=>e[0]).join("");n[i]=t||e}else n[i]=e});return await Promise.all(i),n}};var nd=tw,nf=A,nh=r0;async function np(e,t,r){let n=(0,nf.isTauriAppPlatform)()?nd.fetch:window.fetch,i="https://translate.toil.cc/v2/translate/",a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({lang:t,service:r,text:e})},o=await n(i,a);if(!o.ok){let t=JSON.stringify(await o.json());throw Error(`${r} failed with status ${o.status}
${e.length}
${JSON.stringify(a)}
${t}`)}let s=await o.json();return s&&Array.isArray(s.translations)?s.translations:[e]}let nb={name:"yandex",label:(0,S.stubTranslation)("Yandex Translate"),authRequired:!1,translate:async(e,t,r)=>{if(!e.length)return[];let n="yandexgpt",i="AUTO"==t?"en":(0,nh.normalizeToShortLang)(t).toLowerCase(),a=(0,nh.normalizeToShortLang)(r).toLowerCase(),o=`${i}-${a}`;return(await Promise.all(e.map(async e=>await np(e,o,n)))).flat()}};function ng(e,t){if(e!==t.name)throw Error(`Translator name "${e}" does not match implementation name "${t.name}"`);return t}let nm=[ng("deepl",ne),ng("azure",no),ng("google",nu),ng("yandex",nb)],nv=e=>nm.find(t=>t.name===e),ny=()=>nm;var nx=S;function nw({provider:e="deepl",sourceLang:t="AUTO",targetLang:r="EN",enablePolishing:n=!0,enablePreprocessing:i=!0}={}){let a=eU(),{token:o}=(0,t0.useAuth)(),[s,l]=(0,tQ.useState)(!1),[c,u]=(0,tQ.useState)(e),[d,f]=(0,tQ.useState)(()=>nv(e)),[h]=(0,tQ.useState)(()=>ny());return(0,tQ.useEffect)(()=>{l(!1)},[e,t,r]),(0,tQ.useEffect)(()=>{let t=ny().filter(e=>(!e.authRequired||!!o)&&!e.quotaExceeded),r=(t.find(t=>t.name===e)||t[0]).name;f(nv(r)),u(r)},[e]),{translate:(0,tQ.useCallback)(async(e,s)=>{let d=s?.source||t,f=s?.target||r||(0,nx.getLocale)(),p=s?.useCache??!1,b=i?rf(e):e;if(0===b.length||b.every(e=>!e?.trim()))return b;let g=[],m=[];if(await Promise.all(b.map(async(e,t)=>{!e?.trim()||await rt(e,d,f,c)||(g.push(e),m.push(t))})),0===g.length){let e=await Promise.all(b.map(e=>rt(e,d,f,c).then(t=>t||e)));return n?rl(e,f):e}l(!0);try{let e=h.find(e=>e.name===c);if(!e)throw Error(`No translator found for provider: ${c}`);let t=await e.translate(g,d,f,o,p);await Promise.all(g.map(async(e,r)=>rr(e,t[r]||"",d,f,c)));let r=[...b];return m.forEach((e,n)=>{r[e]=t[n]||""}),await Promise.all(r.map(async(e,t)=>{if(!m.includes(t)){let e=b[t];if(!e?.trim())return;let n=await rt(e,d,f,c);n&&(r[t]=n)}})),l(!1),n?rl(r,f):r}catch(e){throw e instanceof Error&&e.message.includes(t1)&&(eR.dispatch("toast",{timeout:5e3,message:a("Daily translation quota reached. Upgrade your plan to continue using AI translations."),type:"error"}),u("azure")),l(!1),e instanceof Error?e:Error(String(e))}},[c,t,r,d,o]),translator:d,translators:h,loading:s}}var n_=b,nS=e.i(669123),nE=eZ;!function(e){e.Unauthorized="Unauthorized access",e.DownloadFailed="File download failed"}({});let nk=async(e,t,r,n,i,a,o)=>{let s=new Uint32Array(1);window.crypto.getRandomValues(s);let l=s[0],c=new nE.Channel;return r&&(c.onmessage=r),await (0,nE.invoke)("download_file",{id:l,url:e,filePath:t,headers:n??{},onProgress:c,body:i,singleThreaded:a,skipSslVerification:o})};var nN=_,nj=e.i(308795),nC=S,nM=R,nA=a,nR=p,nT=p,nO=e.i(433689),nL=["attr","size","title"];function nI(e,t){if(null==e)return{};var r,n,i=nP(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function nP(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function nB(){return(nB=Object.assign.bind()).apply(this,arguments)}function nD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function nz(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?nD(Object(r),!0).forEach(function(t){nF(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nD(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function nF(e,t,r){return(t=n$(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n$(e){var t=nU(e,"string");return"symbol"==typeof t?t:t+""}function nU(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function nH(e){return e&&e.map((e,t)=>nT.default.createElement(e.tag,nz({key:t},e.attr),nH(e.child)))}function nV(e){return t=>nT.default.createElement(nq,nB({attr:nz({},e.attr)},t),nH(e.child))}function nq(e){var t=t=>{var r,{attr:n,size:i,title:a}=e,o=nI(e,nL),s=i||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),nT.default.createElement("svg",nB({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,n,o,{className:r,style:nz(nz({color:e.color||t.color},t.style),e.style),height:s,width:s,xmlns:"http://www.w3.org/2000/svg"}),a&&nT.default.createElement("title",null,a),e.children)};return void 0!==nO.IconContext?nT.default.createElement(nO.IconContext.Consumer,null,e=>t(e)):t(nO.DefaultContext)}function nW(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m22 5.72-4.6-3.86-1.29 1.53 4.6 3.86L22 5.72zM7.88 3.39 6.6 1.86 2 5.71l1.29 1.53 4.59-3.85zM12.5 8H11v6l4.75 2.85.75-1.23-4-2.37V8zM12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9a9 9 0 0 0 0-18zm0 16c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"},child:[]}]})(e)}function nK(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2zm0 15-5-2.18L7 18V5h10v13z"},child:[]}]})(e)}function nG(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM8 9h8v10H8V9zm7.5-5-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(e)}function nX(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(e)}function nZ(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M11 7h2v2h-2V7zm0 4h2v6h-2v-6zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"},child:[]}]})(e)}function nY(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm0 12H6V10h12v10z"},child:[]}]})(e)}function nJ(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"},child:[]}]})(e)}function nQ(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 0 0 .12-.61l-1.92-3.32a.488.488 0 0 0-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 0 0-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58a.49.49 0 0 0-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"},child:[]}]})(e)}function n0(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M15.75 5h-1.5L9.5 16h2.1l.9-2.2h5l.9 2.2h2.1L15.75 5zm-2.62 7L15 6.98 16.87 12h-3.74zM6 19.75l3-3H7V4.25H5v12.5H3l3 3z"},child:[]}]})(e)}function n1(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"},child:[]},{tag:"path",attr:{d:"M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"},child:[]}]})(e)}function n2(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zM7 9h5v1H7z"},child:[]}]})(e)}function n3(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"},child:[]}]})(e)}function n4(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m4 18 8.5-6L4 6v12zm9-12v12l8.5-6L13 6z"},child:[]}]})(e)}function n6(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11 18V6l-8.5 6 8.5 6zm.5-6 8.5 6V6l-8.5 6z"},child:[]}]})(e)}function n5(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 14H9V8h2v8zm4 0h-2V8h2v8z"},child:[]}]})(e)}function n8(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M8 5v14l11-7z"},child:[]}]})(e)}function n9(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM9.5 16.5v-9l7 4.5-7 4.5z"},child:[]}]})(e)}function n7(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m6 18 8.5-6L6 6v12zM16 6v12h2V6h-2z"},child:[]}]})(e)}function ie(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 6h2v12H6zm3.5 6 8.5 6V6z"},child:[]}]})(e)}function it(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"},child:[]}]})(e)}function ir(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{fillRule:"evenodd",d:"M16 9V4h1c.55 0 1-.45 1-1s-.45-1-1-1H7c-.55 0-1 .45-1 1s.45 1 1 1h1v5c0 1.66-1.34 3-3 3v2h5.97v7l1 1 1-1v-7H19v-2c-1.66 0-3-1.34-3-3z"},child:[]}]})(e)}function ii(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zm-6 .67 2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2z"},child:[]}]})(e)}function ia(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04a.996.996 0 0 0 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"},child:[]}]})(e)}function io(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17.77 3.77 16 2 6 12l10 10 1.77-1.77L9.54 12z"},child:[]}]})(e)}function is(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"},child:[]}]})(e)}function il(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"},child:[]}]})(e)}function ic(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},child:[]}]})(e)}function iu(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 12c0 2.21.91 4.2 2.36 5.64L3 20h6v-6l-2.24 2.24A6.003 6.003 0 0 1 5 12a5.99 5.99 0 0 1 4-5.65V4.26C5.55 5.15 3 8.27 3 12zm8 5h2v-2h-2v2zM21 4h-6v6l2.24-2.24A6.003 6.003 0 0 1 19 12a5.99 5.99 0 0 1-4 5.65v2.09c3.45-.89 6-4.01 6-7.74 0-2.21-.91-4.2-2.36-5.64L21 4zm-10 9h2V7h-2v6z"},child:[]}]})(e)}function id(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46A7.93 7.93 0 0 0 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74A7.93 7.93 0 0 0 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"},child:[]}]})(e)}function ih(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm0-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"},child:[]}]})(e)}function ip(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"},child:[]}]})(e)}function ib(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17 11v6.97l-5-2.14-5 2.14V5h6V3H7c-1.1 0-2 .9-2 2v16l7-3 7 3V11h-2zm4-4h-2v2h-2V7h-2V5h2V3h2v2h2v2z"},child:[]}]})(e)}function ig(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M17 3H7c-1.1 0-2 .9-2 2v16l7-3 7 3V5c0-1.1-.9-2-2-2z"},child:[]}]})(e)}function im(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M16 9v10H8V9h8m-1.5-6h-5l-1 1H5v2h14V4h-3.5l-1-1zM18 7H6v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7z"},child:[]}]})(e)}function iv(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"},child:[]}]})(e)}function iy(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"},child:[]}]})(e)}function ix(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"m21 18-3-3v2H5v2h13v2l3-3zM9.5 11.8h5l.9 2.2h2.1L12.75 3h-1.5L6.5 14h2.1l.9-2.2zM12 4.98 13.87 10h-3.74L12 4.98z"},child:[]}]})(e)}function iw(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M6 19h4V5H6v14zm8-14v14h4V5h-4z"},child:[]}]})(e)}function i_(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M14 4v5c0 1.12.37 2.16 1 3H9c.65-.86 1-1.9 1-3V4h4m3-2H7c-.55 0-1 .45-1 1s.45 1 1 1h1v5c0 1.66-1.34 3-3 3v2h5.97v7l1 1 1-1v-7H19v-2c-1.66 0-3-1.34-3-3V4h1c.55 0 1-.45 1-1s-.45-1-1-1z"},child:[]}]})(e)}function iS(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M9.37 5.51A7.35 7.35 0 0 0 9.1 7.5c0 4.08 3.32 7.4 7.4 7.4.68 0 1.35-.09 1.99-.27A7.014 7.014 0 0 1 12 19c-3.86 0-7-3.14-7-7 0-2.93 1.81-5.45 4.37-6.49zM12 3a9 9 0 1 0 9 9c0-.46-.04-.92-.1-1.36a5.389 5.389 0 0 1-4.4 2.26 5.403 5.403 0 0 1-3.14-9.8c-.44-.06-.9-.1-1.36-.1z"},child:[]}]})(e)}function iE(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 9c1.65 0 3 1.35 3 3s-1.35 3-3 3-3-1.35-3-3 1.35-3 3-3m0-2c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58a.996.996 0 0 0-1.41 0 .996.996 0 0 0 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37a.996.996 0 0 0-1.41 0 .996.996 0 0 0 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0a.996.996 0 0 0 0-1.41l-1.06-1.06zm1.06-10.96a.996.996 0 0 0 0-1.41.996.996 0 0 0-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36a.996.996 0 0 0 0-1.41.996.996 0 0 0-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z"},child:[]}]})(e)}function ik(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M16.48 2.52c3.27 1.55 5.61 4.72 5.97 8.48h1.5C23.44 4.84 18.29 0 12 0l-.66.03 3.81 3.81 1.33-1.32zm-6.25-.77a1.49 1.49 0 0 0-2.12 0L1.75 8.11a1.49 1.49 0 0 0 0 2.12l12.02 12.02c.59.59 1.54.59 2.12 0l6.36-6.36c.59-.59.59-1.54 0-2.12L10.23 1.75zm4.6 19.44L2.81 9.17l6.36-6.36 12.02 12.02-6.36 6.36zm-7.31.29A10.487 10.487 0 0 1 1.55 13H.05C.56 19.16 5.71 24 12 24l.66-.03-3.81-3.81-1.33 1.32z"},child:[]}]})(e)}function iN(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M19.35 10.04A7.49 7.49 0 0 0 12 4C9.11 4 6.6 5.64 5.35 8.04A5.994 5.994 0 0 0 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM19 18H6c-2.21 0-4-1.79-4-4 0-2.05 1.53-3.76 3.56-3.97l1.07-.11.5-.95A5.469 5.469 0 0 1 12 6c2.62 0 4.88 1.86 5.39 4.43l.3 1.5 1.53.11A2.98 2.98 0 0 1 22 15c0 1.65-1.35 3-3 3zm-5.55-8h-2.9v3H8l4 4 4-4h-2.55z"},child:[]}]})(e)}function ij(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M19.35 10.04A7.49 7.49 0 0 0 12 4C9.11 4 6.6 5.64 5.35 8.04A5.994 5.994 0 0 0 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM19 18H6c-2.21 0-4-1.79-4-4 0-2.05 1.53-3.76 3.56-3.97l1.07-.11.5-.95A5.469 5.469 0 0 1 12 6c2.62 0 4.88 1.86 5.39 4.43l.3 1.5 1.53.11A2.98 2.98 0 0 1 22 15c0 1.65-1.35 3-3 3zM8 13h2.55v3h2.9v-3H16l-4-4z"},child:[]}]})(e)}function iC(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 3a9 9 0 0 0-9 9v7c0 1.1.9 2 2 2h4v-8H5v-1c0-3.87 3.13-7 7-7s7 3.13 7 7v1h-4v8h4c1.1 0 2-.9 2-2v-7a9 9 0 0 0-9-9zM7 15v4H5v-4h2zm12 4h-2v-4h2v4z"},child:[]}]})(e)}function iM(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19.03 3.56c-1.67-1.39-3.74-2.3-6.03-2.51v2.01c1.73.19 3.31.88 4.61 1.92l1.42-1.42zM11 3.06V1.05c-2.29.2-4.36 1.12-6.03 2.51l1.42 1.42A8.928 8.928 0 0 1 11 3.06zM4.98 6.39 3.56 4.97C2.17 6.64 1.26 8.71 1.05 11h2.01c.19-1.73.88-3.31 1.92-4.61zM20.94 11h2.01c-.21-2.29-1.12-4.36-2.51-6.03l-1.42 1.42A8.928 8.928 0 0 1 20.94 11zM7 12l3.44 1.56L12 17l1.56-3.44L17 12l-3.44-1.56L12 7l-1.56 3.44z"},child:[]},{tag:"path",attr:{d:"M12 21a8.96 8.96 0 0 1-7.46-4H7v-2H1v6h2v-2.7c1.99 2.84 5.27 4.7 9 4.7 4.87 0 9-3.17 10.44-7.56l-1.96-.45C19.25 18.48 15.92 21 12 21z"},child:[]}]})(e)}function iA(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"m14.06 9.02.92.92L5.92 19H5v-.92l9.06-9.06M17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83a.996.996 0 0 0 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29zm-3.6 3.19L3 17.25V21h3.75L17.81 9.94l-3.75-3.75z"},child:[]}]})(e)}function iR(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"},child:[]}]})(e)}function iT(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"},child:[]}]})(e)}var iO=l,iL=p;let iI=(e,t,r)=>{let n=(0,iL.useRef)(!1),i=(0,iL.useRef)(0),a=(0,iL.useRef)(0),o=(0,iL.useRef)(0),s=(0,iL.useRef)(0),l=(0,iL.useRef)(0);return{handleDragStart:(0,iL.useCallback)(t=>{n.current=!0,"touches"in t?(a.current=t.touches[0].clientY,i.current=t.touches[0].clientX):(a.current=t.clientY,i.current=t.clientX),l.current=performance.now(),document.body.style.pointerEvents="none",document.body.style.userSelect="none",document.documentElement.style.cursor="col-resize";let c=t=>{if(n.current){let r=0,n=0,i=0,a=0;if("touches"in t&&t.touches.length>0){let e=t.touches[0];i=e.clientX,a=e.clientY}else{let e=t;i=e.clientX,a=e.clientY}r=i-o.current,n=a-s.current,o.current=i,s.current=a,e({clientX:i,clientY:a,deltaX:r,deltaY:n})}},u=e=>{n.current=!1,document.body.style.pointerEvents="",document.body.style.userSelect="",document.documentElement.style.cursor="";let t=0,o=0,s=0,d=0,f=performance.now()-l.current;if("touches"in e){let t=e.changedTouches[0];s=t.clientX,d=t.clientY}else{let t=e;s=t.clientX,d=t.clientY}t=s-i.current;let h=(o=d-a.current)/f;r&&r({velocity:h,deltaT:f,clientX:s,clientY:d,deltaX:t,deltaY:o}),window.removeEventListener("mousemove",c),window.removeEventListener("mouseup",u),window.removeEventListener("touchmove",c),window.removeEventListener("touchend",u)};window.addEventListener("mousemove",c,{passive:!0}),window.addEventListener("mouseup",u),window.addEventListener("touchmove",c,{passive:!0}),window.addEventListener("touchend",u)},[e,r]),handleDragKeyDown:(0,iL.useCallback)(e=>{let r=.02;switch(e.key){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":t({key:e.key,step:r});break;default:return}e.preventDefault(),e.stopPropagation()},[t])}};var iP=y,iB=e.i(960720),iD=eZ;let{vibrate:iz,impactFeedback:iF,notificationFeedback:i$,selectionFeedback:iU}={async vibrate(e){try{return{status:"ok",data:await (0,iD.invoke)("plugin:haptics|vibrate",{duration:e})}}catch(e){if(!(e instanceof Error))return{status:"error",error:e};throw e}},async impactFeedback(e){try{return{status:"ok",data:await (0,iD.invoke)("plugin:haptics|impact_feedback",{style:e})}}catch(e){if(!(e instanceof Error))return{status:"error",error:e};throw e}},async notificationFeedback(e){try{return{status:"ok",data:await (0,iD.invoke)("plugin:haptics|notification_feedback",{type:e})}}catch(e){if(!(e instanceof Error))return{status:"error",error:e};throw e}},async selectionFeedback(){try{return{status:"ok",data:await (0,iD.invoke)("plugin:haptics|selection_feedback")}}catch(e){if(!(e instanceof Error))return{status:"error",error:e};throw e}}};var iH=e.i(35222),iV=a;let iq=({onDismiss:e,className:t})=>{let r=t=>{("Escape"===t.key||"Enter"===t.key||" "===t.key)&&(t.preventDefault(),e())};return(0,iV.jsx)("div",{className:h("overlay fixed inset-0 cursor-default",t),role:"none",tabIndex:-1,onClick:e,onContextMenu:e,onKeyDown:r})},iW=.5,iK=.2,iG=({id:e,isOpen:t,children:r,snapHeight:n,header:i,title:a,className:o,bgClassName:s,boxClassName:l,contentClassName:c,onClose:u})=>{let d=eU(),{appService:f}=(0,iO.useEnv)(),{systemUIVisible:p,statusBarHeight:b,safeAreaInsets:g}=(0,iP.useThemeStore)(),{acquireBackKeyInterception:m,releaseBackKeyInterception:v}=eO(),[y,x]=(0,nR.useState)(!n),[w]=(0,nR.useState)(()=>"rtl"===(0,iH.getDirFromUILanguage)()),_=(0,nR.useRef)(null),S=(0,nR.useRef)(null),E=(0,iB.useResponsiveSize)(22),k=window.innerWidth<640||window.innerHeight<640,N=e=>{if(e instanceof CustomEvent){if("Back"===e.detail.keyName)return u(),!0}else"Escape"===e.key&&u(),e.stopPropagation();return!1};(0,nR.useEffect)(()=>{if(!t){S.current&&(S.current.focus(),S.current=null);return}S.current=document.activeElement,x(!n&&k),window.addEventListener("keydown",N),_.current&&_.current.addEventListener("keydown",N),f?.isAndroidApp&&(m(),eR.onSync("native-key-down",N));let e=setTimeout(()=>{_.current&&_.current.focus()},100);return()=>{clearTimeout(e),window.removeEventListener("keydown",N),f?.isAndroidApp&&(v(),eR.offSync("native-key-down",N))}},[t]);let{handleDragStart:j}=iI(e=>{if(!k||!_.current)return;let t=_.current.querySelector(".modal-box"),r=_.current.querySelector(".overlay"),n=e.clientY/window.innerHeight,i=Math.max(0,Math.min(1,n));t&&r&&(t.style.height="100%",t.style.transform=`translateY(${100*i}%)`,r.style.opacity=`${1-n}`,x(e.clientY<44),t.style.transition="padding-top 0.3s ease-out")},()=>{},e=>{if(!k||!_.current)return;let t=_.current.querySelector(".modal-box"),r=_.current.querySelector(".overlay");if(!t||!r)return;let i=n?1-n-iK:.5,a=n?1-n+iK:.5;if(e.velocity>iW||e.velocity>=0&&e.clientY>=window.innerHeight*a){let n=.15/Math.max(e.velocity,.5);t.style.height="100%",t.style.transition=`transform ${n}s ease-out`,t.style.transform="translateY(100%)",r.style.transition=`opacity ${n}s ease-out`,r.style.opacity="0",u(),setTimeout(()=>{t.style.transform="translateY(0%)"},300)}else n&&e.clientY>window.innerHeight*i&&e.clientY<window.innerHeight*a?(r.style.transition="opacity 0.3s ease-out",r.style.opacity=`${1-n}`,t.style.height=`${100*n}%`,t.style.bottom="0",t.style.transition="transform 0.3s ease-out",t.style.transform=""):(x(!0),t.style.height="100%",t.style.transition="transform 0.3s ease-out",t.style.transform="translateY(0%)",r.style.opacity="0");f?.hasHaptics&&iF("medium")});return(0,nA.jsxs)("dialog",{ref:_,id:e??"dialog",tabIndex:-1,open:t,"aria-hidden":!t,className:h("modal sm:min-w-90 z-50 h-full w-full !items-start !bg-transparent sm:w-full sm:!items-center",o),dir:w?"rtl":void 0,children:[(0,nA.jsx)(iq,{className:h("dialog-overlay z-10 bg-black/50 sm:bg-black/50",f?.hasRoundedWindow&&"rounded-window",s),onDismiss:u}),(0,nA.jsxs)("div",{className:h("modal-box settings-content absolute z-20 flex flex-col rounded-none rounded-tl-2xl rounded-tr-2xl p-0 sm:rounded-2xl","h-full max-h-full w-full max-w-full",window.innerWidth<window.innerHeight?"sm:h-[50%] sm:w-3/4":"sm:h-[65%] sm:w-1/2 sm:max-w-[600px]",l),style:{paddingTop:f?.hasSafeAreaInset&&y?`${Math.max(g?.top||0,p?b:0)}px`:"0px",...k?{height:n?`${100*n}%`:"100%",bottom:0}:{}},children:[(0,nA.jsx)("div",{className:h("drag-handle h-10 max-h-10 min-h-10 w-full cursor-row-resize items-center justify-center","transition-padding-top flex duration-300 ease-out sm:hidden"),onMouseDown:j,onTouchStart:j,children:(0,nA.jsx)("div",{className:"bg-base-content/50 h-1 w-10 rounded-full"})}),(0,nA.jsx)("div",{className:"dialog-header sticky top-1 z-10 flex items-center justify-between px-2 sm:px-4",children:i||(0,nA.jsxs)("div",{className:"flex h-11 w-full items-center justify-between",children:[(0,nA.jsx)("button",{"aria-label":d("Close"),onClick:u,className:"btn btn-ghost btn-circle flex h-8 min-h-8 w-8 hover:bg-transparent focus:outline-none sm:hidden",children:w?(0,nA.jsx)(is,{size:E}):(0,nA.jsx)(io,{size:E})}),(0,nA.jsx)("div",{className:"z-15 pointer-events-none absolute inset-0 flex h-11 items-center justify-center",children:(0,nA.jsx)("span",{className:"line-clamp-1 text-center font-bold",children:a??""})}),(0,nA.jsx)("button",{"aria-label":d("Close"),onClick:u,className:"bg-base-300/65 btn btn-ghost btn-circle ml-auto hidden h-6 min-h-6 w-6 focus:outline-none sm:flex",children:(0,nA.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:(0,nA.jsx)("path",{fill:"currentColor",d:"M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12z"})})})]})}),(0,nA.jsx)("div",{className:h("text-base-content my-2 flex-grow overflow-y-auto px-6 sm:px-[10%]",c),children:r})]})]})};var iX=a,iZ=A;let iY=({href:e,children:t,...r})=>{let n=async t=>{(0,iZ.isTauriAppPlatform)()&&(t.preventDefault(),await eY(e))};return(0,iX.jsx)("a",{href:e,target:"_blank",rel:"noopener noreferrer",onClick:n,...r,children:t})},iJ=({latestVersion:e,lastVersion:t,checkUpdate:r=!0})=>{let n=eU(),[i,a]=(0,t$.useState)("EN"),{translate:o}=nw({provider:"azure",sourceLang:"AUTO",targetLang:i}),{appService:s}=(0,tF.useEnv)(),l=(0,n_.useSearchParams)(),c=(0,nS.getAppVersion)(),[u,d]=(0,t$.useState)(e??l?.get("latestVersion")??""),[f,p]=(0,t$.useState)(t??l?.get("lastVersion")??""),[b,g]=(0,t$.useState)(null),[m,v]=(0,t$.useState)([]),[y,x]=(0,t$.useState)(null),[w,_]=(0,t$.useState)(null),[S,E]=(0,t$.useState)(!1),[k,N]=(0,t$.useState)(null),[j,C]=(0,t$.useState)(!1);(0,t$.useEffect)(()=>{a((0,nC.getLocale)())},[]),(0,t$.useEffect)(()=>{let e=async()=>{let e=await tv();e&&g(e)},t=async()=>{if(!s)return;let e=(0,tJ.isTauriAppPlatform)()?tW.fetch:window.fetch,t=await e(nM.READEST_UPDATER_FILE),r=await t.json();if(tD.default.gt(r.version,c)){let e=(0,tU.arch)(),t="aarch64"===e?"android-arm64":"android-universal",n="aarch64"===e?"arm64":"universal",i=r.platforms[t]?.url,a=await s.resolveFilePath(`Readest_${r.version}_${n}.apk`,"Cache");g({currentVersion:c,version:r.version,date:r.pub_date,body:r.notes,downloadAndInstall:async e=>{await new Promise(async(t,r)=>{let n=0,o=0;await nk(i,a,r=>{e&&(!o&&r.total?e({event:"Started",data:{contentLength:o=r.total}}):n>0&&r.progress===r.total&&(console.log("APK downloaded to",a),e?.({event:"Finished"}),setTimeout(()=>{t()},1e3)),e({event:"Progress",data:{chunkLength:r.progress-n}}),n=r.progress)}).catch(e=>{console.error("Download failed:",e),r(e)})});let t=await (0,nN.installPackage)({path:a});t.success?console.log("APK installed successfully"):console.error("Failed to install APK:",t.error)}})}},n=async()=>{if(!s)return;let e=(0,tJ.isTauriAppPlatform)()?tW.fetch:window.fetch,t=await e(nM.READEST_UPDATER_FILE),r=await t.json();if(tD.default.gt(r.version,c)){let e=(0,tU.arch)(),t="x86_64"===e?"windows-x86_64-portable":"windows-aarch64-portable",n="x86_64"===e?"x64":"arm64",i=r.platforms[t]?.url,a=await (0,tY.invoke)("get_executable_dir"),o=`Readest_${r.version}_${n}-portable.exe`,s=await (0,nj.join)(a,o);g({currentVersion:c,version:r.version,date:r.pub_date,body:r.notes,downloadAndInstall:async e=>{await new Promise(async(t,r)=>{let n=0,a=0;await nk(i,s,r=>{e&&(!a&&r.total?e({event:"Started",data:{contentLength:a=r.total}}):n>0&&r.progress===r.total&&(console.log("Portable EXE downloaded to",s),e?.({event:"Finished"}),setTimeout(()=>{t()},1e3)),e({event:"Progress",data:{chunkLength:r.progress-n}}),n=r.progress)}).catch(e=>{console.error("Download failed:",e),r(e)})});try{console.log("Launching new executable:",s);let e=tZ.create("start-readest",["/C","start","",s]);await e.spawn(),console.log("New executable launched, exiting current app..."),setTimeout(async()=>{await tV(0)},500)}catch(e){console.error("Failed to launch new executable:",e)}}})}},i=async()=>{let r=(0,tU.type)();s?.isPortableApp&&"windows"===r?n():["macos","windows","linux"].includes(r)?e():"android"===r&&t()};s?.hasUpdater&&r&&i()},[s?.hasUpdater]),(0,t$.useEffect)(()=>{e&&d(e),t&&p(t),r||g({currentVersion:c,version:e,date:"",body:""})},[e,t,r]),(0,t$.useEffect)(()=>{let e=async e=>{try{let t=(0,tJ.isTauriAppPlatform)()?tW.fetch:window.fetch,r=await t(nM.READEST_CHANGELOG_FILE),n=(await r.json()).releases,i=Object.entries(n).filter(([t])=>tD.default.gt(t,e)).sort(([e],[t])=>tD.default.rcompare(e,t));return(i=i.length?i:Object.entries(n).slice(0,3)).map(([e,t])=>({version:e,date:new Date(t.date).toLocaleDateString(),notes:t.notes}))}catch(e){return console.error("Failed to fetch changelog:",e),[]}},t=e=>e.split(/(?:^|\s)\d+\.\s/).map(e=>e.trim()).filter(e=>e.length>0),r=async r=>{d(r.version);let n=await e(f||c);if(0===n.length&&r.date&&r.body&&(n=[{version:r.version,date:new Date(r.date).toLocaleDateString(),notes:t(r.body??"")}]),!i.toLowerCase().startsWith("en"))for(let e of n)try{e.notes=await o(e.notes,{useCache:!0})}catch(e){console.log("Failed to translate changelog:",e)}v(n),i9(u)};b&&r(b)},[b]),(0,t$.useEffect)(()=>{C(!0)},[]);let M=async()=>{if(!b)return;let e=0,t=0,r=0;x(0),E(!0),await b.downloadAndInstall?.(n=>{switch(n.event){case"Started":_(t=n.data.contentLength);break;case"Progress":N(e+=n.data.chunkLength),x(Math.floor(e/t*100)),e-r>=1048576&&(console.log(`downloaded ${e} bytes from ${t}`),r=e);break;case"Finished":console.log("download finished"),x(100)}}),console.log("package installed"),s?.isAndroidApp||await tq()};return j&&u?(0,tB.jsx)("div",{className:"bg-base-100 flex min-h-screen justify-center",children:(0,tB.jsxs)("div",{className:"flex w-full max-w-2xl flex-col gap-4",children:[(0,tB.jsxs)("div",{className:"flex flex-col justify-center gap-4 sm:flex-row sm:items-start",children:[(0,tB.jsx)("div",{className:"flex items-center justify-center",children:(0,tB.jsx)(tz.default,{src:"/icon.png",alt:"Logo",className:"h-20 w-20",width:64,height:64})}),r?(0,tB.jsxs)("div",{className:"text-base-content flex-grow text-sm",children:[(0,tB.jsx)("h2",{className:"mb-4 text-center font-bold sm:text-start",children:n("A new version of Readest is available!")}),(0,tB.jsx)("p",{className:"mb-2",children:n("Readest {{newVersion}} is available (installed version {{currentVersion}}).",{newVersion:u,currentVersion:c})}),(0,tB.jsx)("p",{className:"mb-2",children:n("Download and install now?")}),(0,tB.jsxs)("div",{className:"flex w-full flex-row items-center justify-end gap-4",children:[null!==y&&(0,tB.jsxs)("div",{className:"flex flex-grow flex-col",children:[(0,tB.jsx)("progress",{className:"progress my-1 h-4 w-full",value:y,max:"100"}),(0,tB.jsx)("p",{className:"text-base-content/75 flex items-center justify-center text-sm",children:y<100?n("Downloading {{downloaded}} of {{contentLength}}",{downloaded:k?`${Math.floor(k/1024/1024)} MB`:"0 MB",contentLength:w?`${Math.floor(w/1024/1024)} MB`:"0 MB"}):n("Download finished")})]}),(0,tB.jsx)("div",{className:"card-actions",children:(0,tB.jsx)("button",{className:h("btn btn-warning text-base-100 px-6 font-bold",(!b||S)&&"btn-disabled"),onClick:M,children:n("DOWNLOAD & INSTALL")})})]})]}):(0,tB.jsx)("div",{className:"text-base-content flex h-full flex-grow flex-col text-sm sm:flex-row",children:(0,tB.jsxs)("div",{className:"flex flex-col items-center justify-center gap-4 p-1 sm:items-start sm:gap-2",children:[(0,tB.jsx)("h2",{className:"text-center font-bold sm:text-start",children:n("Version {{version}}",{version:c})}),m.length>0&&tD.default.gt(m[0].version,c)?(0,tB.jsxs)("div",{className:"flex gap-2",children:[(s?.isIOSApp||s?.isMacOSApp)&&(0,tB.jsx)(iY,{href:"https://apps.apple.com/app/id6738622779",target:"_blank",rel:"noopener noreferrer",className:"btn btn-primary btn-sm",children:n("Check Update")}),s?.isAndroidApp&&(0,tB.jsx)(iY,{href:"https://play.google.com/store/apps/details?id=com.bilingify.readest",target:"_blank",rel:"noopener noreferrer",className:"btn btn-primary btn-sm",children:n("Check Update")})]}):(0,tB.jsx)("div",{className:"flex",children:(0,tB.jsx)("p",{className:"text-sm font-bold",children:n("Already the latest version")})})]})})]}),(0,tB.jsxs)("div",{className:"text-base-content text-sm",children:[(0,tB.jsx)("h3",{className:"mb-2 font-bold",children:n("Changelog")}),(0,tB.jsx)("div",{className:"not-eink:bg-base-200 not-eink:px-4 mb-4 rounded-lg pb-2 pt-4",children:m.length>0?m.map(e=>(0,tB.jsxs)("div",{className:"mb-4",children:[(0,tB.jsxs)("h4",{className:"mb-2 font-bold",children:[e.version," (",e.date,")"]}),(0,tB.jsx)("ul",{className:"list-disc space-y-1 ps-6 text-sm",children:e.notes.map((e,t)=>(0,tB.jsx)("li",{children:e},t))})]},e.version)):(0,tB.jsxs)("div",{className:"flex h-56 w-full flex-col gap-4",children:[(0,tB.jsx)("div",{className:"skeleton h-4 w-28"}),(0,tB.jsx)("div",{className:"skeleton h-4 w-full"}),(0,tB.jsx)("div",{className:"skeleton h-4 w-full"})]})})]})]})}):null},iQ=(e,t,r,n=!0)=>{let i=document.getElementById("updater_window");if(i){let a=new CustomEvent("setDialogVisibility",{detail:{visible:e,latestVersion:t,lastVersion:r,checkUpdate:n}});i.dispatchEvent(a)}},i0=()=>{let e=eU(),[t,r]=(0,t$.useState)(""),[n,i]=(0,t$.useState)(""),[a,o]=(0,t$.useState)(!0),[s,l]=(0,t$.useState)(!1);return(0,t$.useEffect)(()=>{let e=e=>{let{visible:t,latestVersion:n,lastVersion:a,checkUpdate:s}=e.detail;l(t),o(s),n&&r(n),a&&i(a)},t=document.getElementById("updater_window");return t&&t.addEventListener("setDialogVisibility",e),()=>{t&&t.removeEventListener("setDialogVisibility",e)}},[]),(0,tB.jsx)(iG,{id:"updater_window",isOpen:s,title:e(a?"Software Update":"What's New in Readest"),onClose:()=>l(!1),boxClassName:"sm:!w-[75%] sm:h-auto sm:!max-h-[85vh] sm:!max-w-2xl",children:s&&(0,tB.jsx)(iJ,{latestVersion:t??void 0,lastVersion:n??void 0,checkUpdate:a})})};var i1=A,i2=nS,i3=R;let i4="lastAppUpdateCheck",i6=e=>{let t=new tI("updater",{url:`/updater?latestVersion=${e}`,title:"Software Update",width:626,height:406,center:!0,resizable:!0});t.once("tauri://created",()=>{console.log("new window created")}),t.once("tauri://error",e=>{console.error("error creating window",e)})},i5=async(e,t=!0)=>{let r=localStorage.getItem(i4),n=Date.now();if(t&&r&&n-parseInt(r,10)<1e3*i3.CHECK_UPDATE_INTERVAL_SEC)return!1;localStorage.setItem(i4,n.toString()),console.log("Checking for updates");let i=(0,tx.type)();if(["macos","windows","linux"].includes(i)){let e=await tv();return e&&i6(e.version),!!e}if("android"===i)try{let e=await (0,tw.fetch)(i3.READEST_UPDATER_FILE,{connectTimeout:5e3}),t=await e.json(),r=tb.default.gt(t.version,(0,i2.getAppVersion)());return r&&("android-arm64"in t.platforms||"android-universal"in t.platforms)&&iQ(!0,t.version,(0,i2.getAppVersion)()),r}catch(e){throw console.warn("Failed to fetch Android update info",e),Error("Failed to fetch Android update info")}return!1},i8="lastShownReleaseNotesVersion",i9=e=>{localStorage.setItem(i8,e)},i7=()=>localStorage.getItem(i8)||"",ae=async(e=!0)=>{let t=(0,i2.getAppVersion)(),r=i7();if(r&&tb.default.gt(t,r)||!e)try{let e=(0,i1.isTauriAppPlatform)()?tw.fetch:window.fetch;if((await e(i3.READEST_CHANGELOG_FILE)).ok)return iQ(!0,t,r,!1),!0}catch(e){console.warn("Failed to fetch release notes",e)}else r||i9(t);return!1};var at=nS,ar=a;function an(e){return nV({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M524.531,69.836a1.5,1.5,0,0,0-.764-.7A485.065,485.065,0,0,0,404.081,32.03a1.816,1.816,0,0,0-1.923.91,337.461,337.461,0,0,0-14.9,30.6,447.848,447.848,0,0,0-134.426,0,309.541,309.541,0,0,0-15.135-30.6,1.89,1.89,0,0,0-1.924-.91A483.689,483.689,0,0,0,116.085,69.137a1.712,1.712,0,0,0-.788.676C39.068,183.651,18.186,294.69,28.43,404.354a2.016,2.016,0,0,0,.765,1.375A487.666,487.666,0,0,0,176.02,479.918a1.9,1.9,0,0,0,2.063-.676A348.2,348.2,0,0,0,208.12,430.4a1.86,1.86,0,0,0-1.019-2.588,321.173,321.173,0,0,1-45.868-21.853,1.885,1.885,0,0,1-.185-3.126c3.082-2.309,6.166-4.711,9.109-7.137a1.819,1.819,0,0,1,1.9-.256c96.229,43.917,200.41,43.917,295.5,0a1.812,1.812,0,0,1,1.924.233c2.944,2.426,6.027,4.851,9.132,7.16a1.884,1.884,0,0,1-.162,3.126,301.407,301.407,0,0,1-45.89,21.83,1.875,1.875,0,0,0-1,2.611,391.055,391.055,0,0,0,30.014,48.815,1.864,1.864,0,0,0,2.063.7A486.048,486.048,0,0,0,610.7,405.729a1.882,1.882,0,0,0,.765-1.352C623.729,277.594,590.933,167.465,524.531,69.836ZM222.491,337.58c-28.972,0-52.844-26.587-52.844-59.239S193.056,219.1,222.491,219.1c29.665,0,53.306,26.82,52.843,59.239C275.334,310.993,251.924,337.58,222.491,337.58Zm195.38,0c-28.971,0-52.843-26.587-52.843-59.239S388.437,219.1,417.871,219.1c29.667,0,53.307,26.82,52.844,59.239C470.715,310.993,447.538,337.58,417.871,337.58Z"},child:[]}]})(e)}function ai(e){return nV({tag:"svg",attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"},child:[]}]})(e)}function aa(e){return nV({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M201.5 305.5c-13.8 0-24.9-11.1-24.9-24.6 0-13.8 11.1-24.9 24.9-24.9 13.6 0 24.6 11.1 24.6 24.9 0 13.6-11.1 24.6-24.6 24.6zM504 256c0 137-111 248-248 248S8 393 8 256 119 8 256 8s248 111 248 248zm-132.3-41.2c-9.4 0-17.7 3.9-23.8 10-22.4-15.5-52.6-25.5-86.1-26.6l17.4-78.3 55.4 12.5c0 13.6 11.1 24.6 24.6 24.6 13.8 0 24.9-11.3 24.9-24.9s-11.1-24.9-24.9-24.9c-9.7 0-18 5.8-22.1 13.8l-61.2-13.6c-3-.8-6.1 1.4-6.9 4.4l-19.1 86.4c-33.2 1.4-63.1 11.3-85.5 26.8-6.1-6.4-14.7-10.2-24.1-10.2-34.9 0-46.3 46.9-14.4 62.8-1.1 5-1.7 10.2-1.7 15.5 0 52.6 59.2 95.2 132 95.2 73.1 0 132.3-42.6 132.3-95.2 0-5.3-.6-10.8-1.9-15.8 31.3-16 19.8-62.5-14.9-62.5zM302.8 331c-18.2 18.2-76.1 17.9-93.6 0-2.2-2.2-6.1-2.2-8.3 0-2.5 2.5-2.5 6.4 0 8.6 22.8 22.8 87.3 22.8 110.2 0 2.5-2.2 2.5-6.1 0-8.6-2.2-2.2-6.1-2.2-8.3 0zm7.7-75c-13.6 0-24.6 11.1-24.6 24.9 0 13.6 11.1 24.6 24.6 24.6 13.8 0 24.9-11.1 24.9-24.6 0-13.8-11-24.9-24.9-24.9z"},child:[]}]})(e)}function ao(e){return nV({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M640 51.2l-.3 12.2c-28.1.8-45 15.8-55.8 40.3-25 57.8-103.3 240-155.3 358.6H415l-81.9-193.1c-32.5 63.6-68.3 130-99.2 193.1-.3.3-15 0-15-.3C172 352.3 122.8 243.4 75.8 133.4 64.4 106.7 26.4 63.4.2 63.7c0-3.1-.3-10-.3-14.2h161.9v13.9c-19.2 1.1-52.8 13.3-43.3 34.2 21.9 49.7 103.6 240.3 125.6 288.6 15-29.7 57.8-109.2 75.3-142.8-13.9-28.3-58.6-133.9-72.8-160-9.7-17.8-36.1-19.4-55.8-19.7V49.8l142.5.3v13.1c-19.4.6-38.1 7.8-29.4 26.1 18.9 40 30.6 68.1 48.1 104.7 5.6-10.8 34.7-69.4 48.1-100.8 8.9-20.6-3.9-28.6-38.6-29.4.3-3.6 0-10.3.3-13.6 44.4-.3 111.1-.3 123.1-.6v13.6c-22.5.8-45.8 12.8-58.1 31.7l-59.2 122.8c6.4 16.1 63.3 142.8 69.2 156.7L559.2 91.8c-8.6-23.1-36.4-28.1-47.2-28.3V49.6l127.8 1.1.2.5z"},child:[]}]})(e)}function as(e){return nV({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"},child:[]}]})(e)}function al(e){return nV({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"},child:[]}]})(e)}function ac(e){return nV({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(e)}function au(e){return nV({tag:"svg",attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(e)}var ad=iB;let af=()=>{let e=eU(),t=(0,ad.useResponsiveSize)(24);return(0,ar.jsxs)("div",{className:"my-2 flex flex-col items-center gap-2",children:[(0,ar.jsx)("p",{className:"text-neutral-content text-sm",children:e("Get Help from the Readest Community")}),(0,ar.jsxs)("div",{className:"flex gap-4",children:[(0,ar.jsx)(iY,{href:"https://github.com/readest/readest",className:"flex items-center gap-2 rounded-full bg-gray-800 p-1.5 text-white transition-colors hover:bg-gray-700",title:"GitHub","aria-label":"GitHub",children:(0,ar.jsx)(ai,{size:t})}),(0,ar.jsx)(iY,{href:"https://discord.gg/gntyVNk3BJ",className:"flex items-center gap-2 rounded-full bg-indigo-600 p-1.5 text-white transition-colors hover:bg-indigo-500",title:"Discord","aria-label":"Discord",children:(0,ar.jsx)(an,{size:t})}),(0,ar.jsx)(iY,{href:"https://reddit.com/r/readest/",className:"flex items-center gap-2 rounded-full bg-orange-600 p-1.5 text-white transition-colors hover:bg-orange-500",title:"Reddit","aria-label":"Reddit",children:(0,ar.jsx)(aa,{size:t})})]})]})};var ah=a,ap=l;let ab=()=>{let e=eU(),{appService:t}=(0,ap.useEnv)(),r=t?.isIOSApp||t?.isMacOSApp?"https://www.apple.com/legal/internet-services/itunes/dev/stdeula/":"https://readest.com/terms-of-service";return(0,ah.jsxs)("div",{className:"my-2 flex flex-wrap justify-center gap-4 text-sm sm:text-xs",children:[(0,ah.jsx)(iY,{href:r,className:"text-blue-500 underline hover:text-blue-600",children:e("Terms of Service")}),(0,ah.jsx)(iY,{href:"https://readest.com/privacy-policy",className:"text-blue-500 underline hover:text-blue-600",children:e("Privacy Policy")})]})},ag=e=>{let t=document.getElementById("about_window");if(t){let r=new CustomEvent("setDialogVisibility",{detail:{visible:e}});t.dispatchEvent(r)}},am=()=>{let e=eU(),{appService:t}=(0,tp.useEnv)(),[r,n]=(0,tf.useState)(null),[i,a]=(0,tf.useState)(""),[o,s]=(0,tf.useState)(!1);(0,tf.useEffect)(()=>{a(E(t));let e=e=>{s(e.detail.visible)},r=document.getElementById("about_window");return r&&r.addEventListener("setDialogVisibility",e),()=>{r&&r.removeEventListener("setDialogVisibility",e)}},[]);let l=async()=>{n("checking");try{await i5(e,!1)?u():n("updated")}catch(e){console.info("Error checking for updates:",e),n("error")}},c=async()=>{await ae(!1)?u():n("error")},u=()=>{s(!1),n(null)};return(0,td.jsx)(iG,{id:"about_window",isOpen:o,title:e("About Readest"),onClose:u,boxClassName:"sm:!w-[480px] sm:!max-w-screen-sm sm:h-auto",children:o&&(0,td.jsxs)("div",{className:"about-content flex flex-col items-center justify-center gap-4 pb-10 sm:pb-0",children:[(0,td.jsxs)("div",{className:"flex flex-1 flex-col items-center justify-end gap-2 px-8 py-2",children:[(0,td.jsx)("div",{className:"mb-2 mt-6",children:(0,td.jsx)(th.default,{src:"/icon.png",alt:"App Logo",className:"h-20 w-20",width:64,height:64})}),(0,td.jsxs)("div",{className:"flex select-text flex-col items-center",children:[(0,td.jsx)("h2",{className:"mb-2 text-2xl font-bold",children:"Readest"}),(0,td.jsxs)("p",{className:"text-neutral-content text-center text-sm",children:[e("Version {{version}}",{version:(0,at.getAppVersion)()})," ",`(${i})`]})]}),(0,td.jsxs)("div",{className:"my-1 h-5",children:[!r&&(0,td.jsx)("button",{className:"btn btn-sm btn-primary cursor-pointer p-1 text-xs",onClick:t?.hasUpdater?l:c,children:e("Check Update")}),"updated"===r&&(0,td.jsx)("p",{className:"text-neutral-content mt-2 text-xs",children:e("Already the latest version")}),"checking"===r&&(0,td.jsx)("p",{className:"text-neutral-content mt-2 text-xs",children:e("Checking for updates...")}),"error"===r&&(0,td.jsx)("p",{className:"text-error mt-2 text-xs",children:e("Error checking for updates")})]})]}),(0,td.jsx)("hr",{className:"border-base-300 my-12 w-full sm:my-4"}),(0,td.jsxs)("div",{className:"flex flex-1 flex-col items-center justify-start gap-2 px-4 text-center",dir:"ltr",children:[(0,td.jsxs)("p",{className:"text-neutral-content text-sm",children:[" ",new Date().getFullYear()," Bilingify LLC. All rights reserved."]}),(0,td.jsxs)("p",{className:"text-neutral-content text-xs",children:["This software is licensed under the"," ",(0,td.jsx)(iY,{href:"https://www.gnu.org/licenses/agpl-3.0.html",className:"text-blue-500 underline",children:"GNU Affero General Public License v3.0"}),". You are free to use, modify, and distribute this software under the terms of the AGPL v3 license. Please see the license for more details."]}),(0,td.jsxs)("p",{className:"text-neutral-content text-xs",children:["Source code is available at"," ",(0,td.jsx)(iY,{href:"https://github.com/readest/readest",className:"text-blue-500 underline",children:"GitHub"}),"."]}),(0,td.jsx)(ab,{})]}),(0,td.jsx)(af,{})]})})};var av=a,ay=p,ax=e.i(408068),aw=tx,a_=l,aS=x,aE=ax,ak=tw;let aN=e=>{try{let t=new URL(e).hostname;if("localhost"===t||"127.0.0.1"===t)return!0;let r=/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/,n=t.match(r);if(n){let[,e,t,r,i]=n.map(Number);if(void 0===e||void 0===t||void 0===r||void 0===i||e>255||t>255||r>255||i>255)return!1;if(10===e||172===e&&t>=16&&t<=31||192===e&&168===t||169===e&&254===t||100===e&&t>=64&&t<=127)return!0}if(t.includes(":")&&(t.startsWith("::1")||t.startsWith("fe80:")||t.startsWith("fc00:")||t.startsWith("fd00:")))return!0;return!1}catch{return!1}};var aj=A;class aC{config;isLanServer;constructor(e){this.config=e,this.config.serverUrl=e.serverUrl.replace(/\/$/,""),this.isLanServer=aN(this.config.serverUrl)}async request(e,t={}){let{method:r="GET",body:n,headers:i,useAuth:a=!0}=t,o=new Headers(i||{});return(a&&(o.set("X-Auth-User",this.config.username),o.set("X-Auth-Key",this.config.userkey)),this.isLanServer||(0,aj.isTauriAppPlatform)())?((0,aj.isTauriAppPlatform)()?ak.fetch:window.fetch)(`${this.config.serverUrl}${e}`,{method:r,headers:{accept:"application/vnd.koreader.v1+json",..."GET"===r?{}:{"Content-Type":"application/json"},...Object.fromEntries(o.entries())},body:n,danger:{acceptInvalidCerts:!0,acceptInvalidHostnames:!0}}):fetch(`${(0,aj.getAPIBaseUrl)()}/kosync`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({serverUrl:this.config.serverUrl,endpoint:e,method:r,headers:Object.fromEntries(o.entries()),body:n?JSON.parse(n):void 0})})}async connect(e,t){let r=(0,aE.md5)(t);try{let t=await this.request("/users/auth",{method:"GET",headers:{"X-Auth-User":e,"X-Auth-Key":r}});if(t.ok)return{success:!0,message:"Login successful."};if(401===t.status){let t=await this.request("/users/create",{method:"POST",useAuth:!1,body:JSON.stringify({username:e,password:r})});if(t.ok)return{success:!0,message:"Registration successful."};let n=await t.json().catch(()=>({}));if(402===t.status)return{success:!1,message:"Invalid credentials."};return{success:!1,message:n.message||"Registration failed."}}let n=await t.json().catch(()=>({}));return{success:!1,message:n.message||`Authorization failed with status: ${t.status}`}}catch(e){return console.error("KOSync connection failed",e),{success:!1,message:e.message||"Connection error."}}}async getProgress(e){if(!this.config.userkey)return null;let t=this.getDocumentDigest(e);if(!t)return null;try{let r=await this.request(`/syncs/progress/${t}`);if(!r.ok)return console.error(`KOSync: Failed to get progress for ${e.title}. Status: ${r.status}`),null;let n=await r.json();return n.document?n:null}catch(e){return console.error("KOSync getProgress failed",e),null}}async updateProgress(e,t,r){if(!this.config.userkey)return!1;let n=this.getDocumentDigest(e);if(!n)return!1;let i={document:n,progress:t,percentage:r,device:this.config.deviceName,device_id:this.config.deviceId};try{let t=await this.request("/syncs/progress",{method:"PUT",body:JSON.stringify(i)});if(!t.ok)return console.error(`KOSync: Failed to update progress for ${e.title}. Status: ${t.status}`),!1;return!0}catch(e){return console.error("KOSync updateProgress failed",e),!1}}getDocumentDigest(e){return"filename"===this.config.checksumMethod&&console.warn("This is not possible anymore, using md5 instead."),e.hash}}let aM=(e,t,r={emitLast:!0})=>{let n=null,i=null,a=(...a)=>{i=a,n&&clearTimeout(n),n=r.emitLast?setTimeout(()=>{i&&(e(...i),i=null),n=null},t):setTimeout(()=>{e(...a),n=null},t)};return a.flush=()=>{n&&(clearTimeout(n),n=null,i&&(e(...i),i=null))},a.cancel=()=>{n&&(clearTimeout(n),n=null,i=null)},a};var aA=S;let aR=({value:e,onChange:t,options:r,className:n,disabled:i=!1})=>(0,av.jsx)("select",{value:e,onChange:t,className:h("select select-bordered h-12 w-full text-sm focus:outline-none focus:ring-0",n),disabled:i,children:r.map(({value:e,label:t,disabled:r=!1})=>(0,av.jsx)("option",{value:e,disabled:r,children:t},e))}),aT=e=>{let t=document.getElementById("kosync_settings_window");if(t){let r=new CustomEvent("setKOSyncSettingsVisibility",{detail:{visible:e}});t.dispatchEvent(r)}},aO=()=>{let e=eU(),{settings:t,setSettings:r,saveSettings:n}=(0,aS.useSettingsStore)(),{envConfig:i,appService:a}=(0,a_.useEnv)(),[o,s]=(0,ay.useState)(!1),[l,c]=(0,ay.useState)(t.kosync.serverUrl||""),[u,d]=(0,ay.useState)(t.kosync.username||""),[f,h]=(0,ay.useState)(""),[p,b]=(0,ay.useState)(!1),[g,m]=(0,ay.useState)(""),[v,y]=(0,ay.useState)(""),[x,w]=(0,ay.useState)("");(0,ay.useEffect)(()=>{let e=e=>e?"macos"===e.toLowerCase()?"macOS":"ios"===e.toLowerCase()?"iOS":e.charAt(0).toUpperCase()+e.slice(1):"";(async()=>{let t="";if(a?.appPlatform==="tauri")t=await (0,aw.type)();else{let e=(0,aA.getOSPlatform)();"unknown"!==e&&(t=e)}w(e(t))})()},[a]),(0,ay.useEffect)(()=>{let e=x?`Readest (${x})`:"Readest";y(t.kosync.deviceName||e)},[t.kosync.deviceName,x]);let _=(0,ay.useMemo)(()=>!!t.kosync.userkey,[t.kosync.userkey]),S=(0,ay.useCallback)(aM(e=>{let a={...t,koreaderSyncDeviceName:e};r(a),n(i,a)},500),[t,r,n,i]),E=e=>{let t=e.target.value;y(t),S(t)};(0,ay.useEffect)(()=>{let e=e=>{s(e.detail.visible),e.detail.visible&&(c(t.kosync.serverUrl||""),d(t.kosync.username||""),h(""),m(""))},r=document.getElementById("kosync_settings_window");return r?.addEventListener("setKOSyncSettingsVisibility",e),()=>{r?.removeEventListener("setKOSyncSettingsVisibility",e)}},[t.kosync.serverUrl,t.kosync.username]);let k=async()=>{b(!0);let a={...t.kosync,serverUrl:l,username:u,userkey:(0,ax.md5)(f),deviceName:v,enabled:!0},o=new aC(a),s=await o.connect(u,f);if(s.success){let e={...t,kosync:a};r(e),await n(i,e)}else m(""),eR.dispatch("toast",{message:`${e("Failed to connect")}: ${e(s.message||"Connection error")}`,type:"error"});b(!1),h("")},N=async()=>{let a={...t.kosync,userkey:"",enabled:!1},o={...t,kosync:a};r(o),await n(i,o),d(""),eR.dispatch("toast",{message:e("Disconnected"),type:"info"})},j=async e=>{let a={...t.kosync,strategy:e.target.value},o={...t,kosync:a};r(o),await n(i,o)},C=async e=>{let a={...t.kosync,checksumMethod:e.target.value},o={...t,kosync:a};r(o),await n(i,o)};return(0,av.jsx)(iG,{id:"kosync_settings_window",isOpen:o,onClose:()=>s(!1),title:e("KOReader Sync Settings"),boxClassName:"sm:!min-w-[520px] sm:h-auto",children:o&&(0,av.jsx)("div",{className:"mb-4 mt-0 flex flex-col gap-4 p-2 sm:p-4",children:_?(0,av.jsxs)(av.Fragment,{children:[(0,av.jsx)("div",{className:"text-center",children:(0,av.jsx)("p",{className:"text-base-content/80 text-sm",children:e("Sync as {{userDisplayName}}",{userDisplayName:t.kosync.username})})}),(0,av.jsxs)("div",{className:"flex h-14 items-center justify-between",children:[(0,av.jsx)("span",{className:"text-base-content/80",children:e("Sync Server Connected")}),(0,av.jsx)("input",{type:"checkbox",className:"toggle",checked:t.kosync.enabled,onChange:()=>N()})]}),(0,av.jsxs)("div",{className:"form-control w-full",children:[(0,av.jsx)("label",{className:"label py-1",children:(0,av.jsx)("span",{className:"label-text font-medium",children:e("Sync Strategy")})}),(0,av.jsx)(aR,{value:t.kosync.strategy,onChange:j,options:[{value:"prompt",label:e("Ask on conflict")},{value:"silent",label:e("Always use latest")},{value:"send",label:e("Send changes only")},{value:"receive",label:e("Receive changes only")}]})]}),(0,av.jsxs)("div",{className:"form-control w-full",children:[(0,av.jsx)("label",{className:"label py-1",children:(0,av.jsx)("span",{className:"label-text font-medium",children:e("Checksum Method")})}),(0,av.jsx)(aR,{value:t.kosync.checksumMethod,onChange:C,options:[{value:"binary",label:e("File Content (recommended)")},{value:"filename",label:e("File Name"),disabled:!0}]})]}),(0,av.jsxs)("div",{className:"form-control w-full",children:[(0,av.jsx)("label",{className:"label py-1",children:(0,av.jsx)("span",{className:"label-text font-medium",children:e("Device Name")})}),(0,av.jsx)("input",{type:"text",placeholder:x?`Readest (${x})`:"Readest",className:"input input-bordered h-12 w-full focus:outline-none focus:ring-0",value:v,onChange:E})]})]}):(0,av.jsxs)(av.Fragment,{children:[(0,av.jsx)("p",{className:"text-base-content/70 text-center text-sm",children:e("Connect to your KOReader Sync server.")}),(0,av.jsxs)("div",{className:"form-control w-full",children:[(0,av.jsx)("label",{className:"label py-1",children:(0,av.jsx)("span",{className:"label-text font-medium",children:e("Server URL")})}),(0,av.jsx)("input",{type:"text",placeholder:"https://koreader.sync.server",className:"input input-bordered h-12 w-full focus:outline-none focus:ring-0",spellCheck:"false",value:l,onChange:e=>c(e.target.value)})]}),(0,av.jsxs)("form",{className:"flex flex-col gap-4",children:[(0,av.jsxs)("div",{className:"form-control w-full",children:[(0,av.jsx)("label",{className:"label py-1",children:(0,av.jsx)("span",{className:"label-text font-medium",children:e("Username")})}),(0,av.jsx)("input",{type:"text",placeholder:e("Your Username"),className:"input input-bordered h-12 w-full focus:outline-none focus:ring-0",spellCheck:"false",value:u,onChange:e=>d(e.target.value),autoComplete:"username"})]}),(0,av.jsxs)("div",{className:"form-control w-full",children:[(0,av.jsx)("label",{className:"label py-1",children:(0,av.jsx)("span",{className:"label-text font-medium",children:e("Password")})}),(0,av.jsx)("input",{type:"password",placeholder:e("Your Password"),className:"input input-bordered h-12 w-full focus:outline-none focus:ring-0",value:f,onChange:e=>h(e.target.value),autoComplete:"current-password"})]})]}),(0,av.jsx)("button",{className:"btn btn-primary mt-2 h-12 min-h-12 w-full",onClick:k,disabled:p||!l||!u||!f,children:p?(0,av.jsx)("span",{className:"loading loading-spinner"}):e("Connect")}),g&&(0,av.jsx)("div",{className:"text-error h-4 text-center text-sm",children:g})]})})})};var aL=a,aI=p;function aP(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5.82843 6.99955L8.36396 9.53509L6.94975 10.9493L2 5.99955L6.94975 1.0498L8.36396 2.46402L5.82843 4.99955H13C17.4183 4.99955 21 8.58127 21 12.9996C21 17.4178 17.4183 20.9996 13 20.9996H4V18.9996H13C16.3137 18.9996 19 16.3133 19 12.9996C19 9.68584 16.3137 6.99955 13 6.99955H5.82843Z"},child:[]}]})(e)}function aB(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M18.1716 6.99955H11C7.68629 6.99955 5 9.68584 5 12.9996C5 16.3133 7.68629 18.9996 11 18.9996H20V20.9996H11C6.58172 20.9996 3 17.4178 3 12.9996C3 8.58127 6.58172 4.99955 11 4.99955H18.1716L15.636 2.46402L17.0503 1.0498L22 5.99955L17.0503 10.9493L15.636 9.53509L18.1716 6.99955Z"},child:[]}]})(e)}function aD(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M4.83582 12L11.0429 18.2071L12.4571 16.7929L7.66424 12L12.4571 7.20712L11.0429 5.79291L4.83582 12ZM10.4857 12L16.6928 18.2071L18.107 16.7929L13.3141 12L18.107 7.20712L16.6928 5.79291L10.4857 12Z"},child:[]}]})(e)}function az(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M10.8284 12.0007L15.7782 16.9504L14.364 18.3646L8 12.0007L14.364 5.63672L15.7782 7.05093L10.8284 12.0007Z"},child:[]}]})(e)}function aF(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M19.1642 12L12.9571 5.79291L11.5429 7.20712L16.3358 12L11.5429 16.7929L12.9571 18.2071L19.1642 12ZM13.5143 12L7.30722 5.79291L5.89301 7.20712L10.6859 12L5.89301 16.7929L7.30722 18.2071L13.5143 12Z"},child:[]}]})(e)}function a$(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13.1717 12.0007L8.22192 7.05093L9.63614 5.63672L16.0001 12.0007L9.63614 18.3646L8.22192 16.9504L13.1717 12.0007Z"},child:[]}]})(e)}function aU(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M6.41421 15.89L16.5563 5.74785L15.1421 4.33363L5 14.4758V15.89H6.41421ZM7.24264 17.89H3V13.6473L14.435 2.21231C14.8256 1.82179 15.4587 1.82179 15.8492 2.21231L18.6777 5.04074C19.0682 5.43126 19.0682 6.06443 18.6777 6.45495L7.24264 17.89ZM3 19.89H21V21.89H3V19.89Z"},child:[]}]})(e)}function aH(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5.55397 22H3.3999L10.9999 3H12.9999L20.5999 22H18.4458L16.0458 16H7.95397L5.55397 22ZM8.75397 14H15.2458L11.9999 5.88517L8.75397 14Z"},child:[]}]})(e)}function aV(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M11.246 15H4.75416L2.75416 20H0.600098L7.0001 4H9.0001L15.4001 20H13.246L11.246 15ZM10.446 13L8.0001 6.88516L5.55416 13H10.446ZM21.0001 12.5351V12H23.0001V20H21.0001V19.4649C20.4118 19.8052 19.7287 20 19.0001 20C16.791 20 15.0001 18.2091 15.0001 16C15.0001 13.7909 16.791 12 19.0001 12C19.7287 12 20.4118 12.1948 21.0001 12.5351ZM19.0001 18C20.1047 18 21.0001 17.1046 21.0001 16C21.0001 14.8954 20.1047 14 19.0001 14C17.8955 14 17.0001 14.8954 17.0001 16C17.0001 17.1046 17.8955 18 19.0001 18Z"},child:[]}]})(e)}function aq(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M19.7134 8.12811L19.4668 8.69379C19.2864 9.10792 18.7136 9.10792 18.5331 8.69379L18.2866 8.12811C17.8471 7.11947 17.0555 6.31641 16.0677 5.87708L15.308 5.53922C14.8973 5.35653 14.8973 4.75881 15.308 4.57612L16.0252 4.25714C17.0384 3.80651 17.8442 2.97373 18.2761 1.93083L18.5293 1.31953C18.7058 0.893489 19.2942 0.893489 19.4706 1.31953L19.7238 1.93083C20.1558 2.97373 20.9616 3.80651 21.9748 4.25714L22.6919 4.57612C23.1027 4.75881 23.1027 5.35653 22.6919 5.53922L21.9323 5.87708C20.9445 6.31641 20.1529 7.11947 19.7134 8.12811ZM5 17V15H3V17C3 19.2091 4.79086 21 7 21H10V19H7L6.85074 18.9945C5.81588 18.9182 5 18.0544 5 17ZM22.4 21L18 10H16L11.601 21H13.755L14.954 18H19.044L20.245 21H22.4ZM15.753 16L17 12.8852L18.245 16H15.753ZM8 4V2H6V4H2V11H6V14H8V11H12V4H8ZM4 6H6V9H4V6ZM8 6H10V9H8V6Z"},child:[]}]})(e)}function aW(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5 15V17C5 18.0544 5.81588 18.9182 6.85074 18.9945L7 19H10V21H7C4.79086 21 3 19.2091 3 17V15H5ZM18 10L22.4 21H20.245L19.044 18H14.954L13.755 21H11.601L16 10H18ZM17 12.8852L15.753 16H18.245L17 12.8852ZM8 2V4H12V11H8V14H6V11H2V4H6V2H8ZM17 3C19.2091 3 21 4.79086 21 7V9H19V7C19 5.89543 18.1046 5 17 5H14V3H17ZM6 6H4V9H6V6ZM10 6H8V9H10V6Z"},child:[]}]})(e)}function aK(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M20.7134 7.12811L20.4668 7.69379C20.2864 8.10792 19.7136 8.10792 19.5331 7.69379L19.2866 7.12811C18.8471 6.11947 18.0555 5.31641 17.0677 4.87708L16.308 4.53922C15.8973 4.35653 15.8973 3.75881 16.308 3.57612L17.0252 3.25714C18.0384 2.80651 18.8442 1.97373 19.2761 0.930828L19.5293 0.319534C19.7058 -0.106511 20.2942 -0.106511 20.4706 0.319534L20.7238 0.930828C21.1558 1.97373 21.9616 2.80651 22.9748 3.25714L23.6919 3.57612C24.1027 3.75881 24.1027 4.35653 23.6919 4.53922L22.9323 4.87708C21.9445 5.31641 21.1529 6.11947 20.7134 7.12811ZM8.5 6H6.5V18H8.5V6ZM4 10H2V14H4V10ZM13 2H11V22H13V2ZM17.5 8H15.5V18H17.5V8ZM22 10H20V14H22V10Z"},child:[]}]})(e)}function aG(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M14 21C13.4477 21 13 20.5523 13 20V12C13 11.4477 13.4477 11 14 11H20C20.5523 11 21 11.4477 21 12V20C21 20.5523 20.5523 21 20 21H14ZM4 13C3.44772 13 3 12.5523 3 12V4C3 3.44772 3.44772 3 4 3H10C10.5523 3 11 3.44772 11 4V12C11 12.5523 10.5523 13 10 13H4ZM9 11V5H5V11H9ZM4 21C3.44772 21 3 20.5523 3 20V16C3 15.4477 3.44772 15 4 15H10C10.5523 15 11 15.4477 11 16V20C11 20.5523 10.5523 21 10 21H4ZM5 19H9V17H5V19ZM15 19H19V13H15V19ZM13 4C13 3.44772 13.4477 3 14 3H20C20.5523 3 21 3.44772 21 4V8C21 8.55228 20.5523 9 20 9H14C13.4477 9 13 8.55228 13 8V4ZM15 5V7H19V5H15Z"},child:[]}]})(e)}function aX(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17 6H22V8H20V21C20 21.5523 19.5523 22 19 22H5C4.44772 22 4 21.5523 4 21V8H2V6H7V3C7 2.44772 7.44772 2 8 2H16C16.5523 2 17 2.44772 17 3V6ZM18 8H6V20H18V8ZM9 4V6H15V4H9Z"},child:[]}]})(e)}function aZ(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17 6H22V8H20V21C20 21.5523 19.5523 22 19 22H5C4.44772 22 4 21.5523 4 21V8H2V6H7V3C7 2.44772 7.44772 2 8 2H16C16.5523 2 17 2.44772 17 3V6ZM18 8H6V20H18V8ZM9 11H11V17H9V11ZM13 11H15V17H13V11ZM9 4V6H15V4H9Z"},child:[]}]})(e)}var aY=l,aJ=x,aQ=x,a0=S;function a1(e){return{id:(0,a0.uniqueId)(),scope:e.scope,pattern:e.pattern,replacement:e.replacement,cfi:e.cfi,sectionHref:e.sectionHref,isRegex:e.isRegex??!1,enabled:e.enabled??!0,caseSensitive:e.caseSensitive??!0,order:e.order??1e3,wholeWord:e.wholeWord??!0,onlyForTTS:e.onlyForTTS??!1}}function a2(e,t){let r=new Map;return(e??[]).forEach(e=>r.set(e.id,e)),(t??[]).forEach(e=>r.set(e.id,e)),[...r.values()].sort((e,t)=>(e.order??0)-(t.order??0))}let a3=(0,M.create)(()=>({getBookRules:e=>{let{getViewSettings:t}=e_.getState(),r=t(e);return r?.proofreadRules||[]},getGlobalRules:()=>{let{settings:e}=aQ.useSettingsStore.getState();return e.globalViewSettings.proofreadRules||[]},getMergedRules:e=>{let{settings:t}=aQ.useSettingsStore.getState(),{getViewSettings:r}=e_.getState(),n=r(e);return a2(t.globalViewSettings.proofreadRules,n?.proofreadRules)},addRule:async(e,t,r)=>{let n=a1(r);return"library"===r.scope?await a9(e,n):await a4(e,t,n,r.scope),n},updateRule:async(e,t,r,n)=>{"library"===n.scope?await a7(e,r,n):await a6(e,t,r,n)},removeRule:async(e,t,r,n)=>{"library"===n?await oe(e,r):await a5(e,t,r)},toggleRule:async(e,t,r)=>{let{getMergedRules:n}=a3.getState(),i=n(t).find(e=>e.id===r);if(!i)throw Error(`Rule not found: ${r}`);let{updateRule:a}=a3.getState();await a(e,t,r,{enabled:!i.enabled})}}));async function a4(e,t,r,n){let{getViewSettings:i}=e_.getState(),a=i(t);if(!a)return;let o=a.proofreadRules||[];if("selection"===n)o.push(r);else{let e=o.find(e=>e.pattern===r.pattern&&e.isRegex===r.isRegex&&"selection"!==e.scope);e?Object.assign(e,{replacement:r.replacement,enabled:r.enabled,order:r.order}):o.push(r)}await a8(e,t,o)}async function a6(e,t,r,n){let{getViewSettings:i}=e_.getState(),a=i(t);if(!a)throw Error(`No viewSettings found for book: ${t}`);let o=(a.proofreadRules||[]).map(e=>e.id===r?{...e,...n}:e);await a8(e,t,o)}async function a5(e,t,r){let{getViewSettings:n}=e_.getState(),i=n(t);if(!i)throw Error(`No viewSettings found for book: ${t}`);let a=(i.proofreadRules||[]).filter(e=>e.id!==r);await a8(e,t,a)}async function a8(e,t,r){let{getViewSettings:n,setViewSettings:i}=e_.getState(),{getConfig:a,saveConfig:o}=ex.getState(),{settings:s}=aQ.useSettingsStore.getState(),l=n(t);if(!l)throw Error(`No viewSettings found for book: ${t}`);let c={...l,proofreadRules:r};i(t,c);let u=a(t);u&&await o(e,t,{...u,viewSettings:c,updatedAt:Date.now()},s)}async function a9(e,t){let{settings:r}=aQ.useSettingsStore.getState();if(!r||!r.globalViewSettings)return;let n=r.globalViewSettings.proofreadRules||[],i=n.find(e=>e.pattern===t.pattern&&e.isRegex===t.isRegex);i?(Object.assign(i,{replacement:t.replacement,enabled:t.enabled,order:t.order}),await ot(e,n)):await ot(e,[...n,t])}async function a7(e,t,r){let{settings:n}=aQ.useSettingsStore.getState(),i=(n.globalViewSettings.proofreadRules||[]).map(e=>e.id===t?{...e,...r}:e);await ot(e,i)}async function oe(e,t){let{settings:r}=aQ.useSettingsStore.getState(),n=(r.globalViewSettings.proofreadRules||[]).filter(e=>e.id!==t);await ot(e,n)}async function ot(e,t){let{settings:r,setSettings:n,saveSettings:i}=aQ.useSettingsStore.getState(),a={...r,globalViewSettings:{...r.globalViewSettings,proofreadRules:t}};n(a),await i(e,a)}let or="proofread_rules_window",on=e=>{let t=document.getElementById(or);t&&t.dispatchEvent(new CustomEvent("setProofreadRulesVisibility",{detail:{visible:e}}))},oi=({rule:e,scope:t,isEditing:r,editingData:n,onEdit:i,onDelete:a,onSave:o,onCancel:s,onEditChange:l})=>{let c=eU(),{sideBarBookKey:u}=ek(),{getView:d}=e_(),f=()=>{u&&e.cfi&&(eR.dispatch("navigate",{bookKey:u,cfi:e.cfi}),d(u)?.goTo(e.cfi))};return r?(0,aL.jsxs)("div",{className:"flex flex-col gap-3 p-3",children:[(0,aL.jsxs)("div",{className:"flex flex-col gap-1.5",children:[(0,aL.jsx)("label",{className:"text-base-content/70 text-xs font-medium",children:c("Selected text:")}),(0,aL.jsx)("input",{className:"input input-sm bg-base-200 text-sm opacity-60",value:n.pattern,disabled:!0})]}),(0,aL.jsxs)("div",{className:"flex flex-col gap-1.5",children:[(0,aL.jsx)("label",{className:"text-base-content/70 text-xs font-medium",children:c("Replace with:")}),(0,aL.jsx)("input",{className:"input input-sm text-sm",value:n.replacement,onChange:e=>l("replacement",e.target.value)})]}),(0,aL.jsxs)("div",{className:"mt-1 flex gap-2",children:[(0,aL.jsx)("button",{className:"btn btn-primary btn-sm flex-1",onClick:o,children:c("Save")}),(0,aL.jsx)("button",{className:"btn btn-sm flex-1",onClick:s,children:c("Cancel")})]})]}):(0,aL.jsxs)("div",{className:"relative flex items-start justify-between gap-3 p-3",children:[(0,aL.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col gap-1.5",children:[(0,aL.jsx)("div",{className:"break-words pe-20 text-base font-medium leading-snug",children:e.pattern}),(0,aL.jsxs)("div",{className:"text-base-content/70 break-words text-sm",children:[(0,aL.jsx)("span",{className:"text-base-content/80 mr-1.5 text-xs font-medium",children:c("Replace with:")}),(0,aL.jsx)("span",{className:"text-base-content/90 text-xs",children:"'"+e.replacement+"'"})]}),(0,aL.jsxs)("div",{className:"text-base-content/60 flex flex-wrap items-center gap-x-2 gap-y-1 text-xs",children:[(0,aL.jsxs)("span",{className:"inline-flex items-center gap-1",children:[(0,aL.jsx)("span",{className:"text-base-content/50",children:c("Scope:")}),(0,aL.jsx)("span",{role:"none",className:h("text-base-content/70 font-medium","selection"===t&&"cursor-pointer text-blue-400 hover:text-blue-500"),onClick:"selection"===t?f:void 0,children:c("selection"===t?"Selection":"book"===t?"Book":"Library")})]}),(0,aL.jsx)("span",{className:"text-base-content/30",children:""}),(0,aL.jsxs)("span",{className:"inline-flex items-center gap-1",children:[(0,aL.jsx)("span",{className:"text-base-content/50",children:c("Case sensitive:")}),(0,aL.jsx)("span",{className:"text-base-content/70 font-medium",children:c(!1!==e.caseSensitive?"Yes":"No")})]}),(0,aL.jsx)("span",{className:"text-base-content/30",children:""}),(0,aL.jsxs)("span",{className:"inline-flex items-center gap-1",children:[(0,aL.jsx)("span",{className:"text-base-content/50",children:c("Only for TTS:")}),(0,aL.jsx)("span",{className:"text-base-content/70 font-medium",children:c(!0===e.onlyForTTS?"Yes":"No")})]})]})]}),(0,aL.jsxs)("div",{className:"absolute right-2 top-2 flex items-center gap-1",children:[(0,aL.jsx)("button",{className:"btn btn-ghost btn-sm h-8 w-8 p-0",onClick:i,"aria-label":c("Edit"),children:(0,aL.jsx)(aU,{className:"h-4 w-4"})}),(0,aL.jsx)("button",{className:"btn btn-ghost btn-sm h-8 w-8 p-0",onClick:a,"aria-label":c("Delete"),children:(0,aL.jsx)(aX,{className:"h-4 w-4"})})]})]})},oa=e=>{let{settings:t}=(0,aJ.useSettingsStore)(),{getViewSettings:r}=e_(),{getConfig:n}=ex(),i=e?r(e):null,a=i?.proofreadRules||[],o=e?n(e):null,s=o?.viewSettings?.proofreadRules||[],l=s.length?s:a,c=l.filter(e=>"selection"===e.scope),u=l.filter(e=>"book"===e.scope),d=t?.globalViewSettings?.proofreadRules||[],f=new Set(d.map(e=>e.id)),h=u.filter(e=>!1!==e.enabled||f.has(e.id));return{singleRules:c,bookRules:h.concat(d.filter(e=>!h.find(t=>t.id===e.id)))}},oo=()=>{let e=eU(),{envConfig:t}=(0,aY.useEnv)(),{recreateViewer:r}=e_(),{sideBarBookKey:n}=ek(),{updateRule:i,removeRule:a}=a3(),[o,s]=(0,aI.useState)(!1),[l,c]=(0,aI.useState)({id:null,scope:null,pattern:"",replacement:"",enabled:!0,onlyForTTS:!1}),{singleRules:u,bookRules:d}=oa(n);(0,aI.useEffect)(()=>{let e=e=>s(!!e.detail?.visible),t=document.getElementById(or);return t?.addEventListener("setProofreadRulesVisibility",e),()=>t?.removeEventListener("setProofreadRulesVisibility",e)},[]);let f=e=>{c({id:e.id,scope:e.scope,pattern:e.pattern,replacement:e.replacement,enabled:!!e.enabled,onlyForTTS:!!e.onlyForTTS})},h=()=>{c({id:null,scope:null,pattern:"",replacement:"",enabled:!0,onlyForTTS:!1})},p=async()=>{l.id&&l.scope&&n&&(await i(t,n,l.id,{scope:l.scope,pattern:l.pattern,replacement:l.replacement,enabled:l.enabled,onlyForTTS:l.onlyForTTS}),h(),l.onlyForTTS||r(t,n))},b=async e=>{n&&(await a(t,n,e.id,e.scope),e.onlyForTTS||r(t,n))},g=(e,t,r,n)=>(0,aL.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,aL.jsx)("h3",{className:"text-base-content/90 text-sm font-semibold",children:r}),0===e.length?(0,aL.jsx)("div",{className:"border-base-content/10 bg-base-200/30 rounded-lg border border-dashed p-6 text-center",children:(0,aL.jsx)("p",{className:"text-base-content/50 text-sm",children:n})}):(0,aL.jsx)("ul",{className:"flex flex-col gap-2",children:e.map(e=>(0,aL.jsx)("li",{className:"border-base-content/10 bg-base-100 hover:border-base-content/20 rounded-lg border transition-colors",children:(0,aL.jsx)(oi,{rule:e,scope:"selection"===t?"selection":e.scope,isEditing:l.id===e.id&&l.scope===("selection"===t?"selection":e.scope),editingData:l,onEdit:()=>f(e),onDelete:()=>b(e),onSave:p,onCancel:h,onEditChange:(e,t)=>c({...l,replacement:t})})},e.id))})]});return(0,aL.jsx)(iG,{id:or,isOpen:o,onClose:()=>s(!1),title:e("Proofread Replacement Rules"),boxClassName:"sm:!min-w-[560px] sm:!max-w-[640px] sm:h-auto",children:o&&(0,aL.jsxs)("div",{className:"flex max-h-[70vh] flex-col gap-6 p-4 sm:p-6",children:[g(u,"selection",e("Selected Text Rules"),e("No selected text replacement rules")),g(d,"book",e("Book Specific Rules"),e("No book-level replacement rules")),(0,aL.jsx)("div",{className:"p-1"})]})})};var os=a,ol=p,oc=y;let ou=()=>{let{safeAreaInsets:e}=(0,oc.useThemeStore)(),[t,r]=(0,ol.useState)(""),[n,i]=(0,ol.useState)("info"),[a,o]=(0,ol.useState)(5e3),[s,l]=(0,ol.useState)(""),[c,u]=(0,ol.useState)(!1),d=(0,ol.useRef)(null),f={info:"toast-info toast-center toast-middle",success:"toast-success toast-top sm:toast-end toast-center",warning:"toast-warning toast-top sm:toast-end toast-center",error:"toast-error toast-top sm:toast-end toast-center"},p={info:"alert-primary border-base-300",success:"alert-success not-eink:from-green-500 not-eink:to-emerald-500",warning:"alert-warning not-eink:from-amber-500 not-eink:to-orange-500",error:"alert-error not-eink:from-red-500 not-eink:to-rose-500"},b={info:(0,os.jsx)("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,os.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),success:(0,os.jsx)("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,os.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),warning:(0,os.jsx)("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,os.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),error:(0,os.jsx)("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,os.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})};(0,ol.useEffect)(()=>{t&&setTimeout(()=>{u(!0)},0)},[t]),(0,ol.useEffect)(()=>{if(d.current&&clearTimeout(d.current),t){let e=setTimeout(()=>{u(!1),setTimeout(()=>r(""),300)},a);return d.current=e,()=>{e&&clearTimeout(e)}}},[t,a]);let g=async e=>{let{message:t,type:n="info",timeout:a,className:s="",callback:c=null}=e.detail;r(t),i(n),a&&o(a),c&&"function"==typeof c&&setTimeout(()=>c(),a||5e3),l(s)};(0,ol.useEffect)(()=>(eR.on("toast",g),()=>{eR.off("toast",g)}),[]);let m=()=>{u(!1),setTimeout(()=>r(""),300),d.current&&clearTimeout(d.current)};return t&&(0,os.jsx)("div",{className:h("toast z-50 w-auto max-w-screen-sm transition-all duration-300",f[n],c?"scale-100 opacity-100":"scale-95 opacity-0"),style:{top:f[n].includes("toast-top")?`${(e?.top||0)+44}px`:void 0},children:(0,os.jsxs)("div",{className:h("alert flex items-center gap-3 shadow-2xl backdrop-blur-sm","min-h-0 rounded-2xl px-5 py-4","not-eink:bg-gradient-to-r border-0",p[n],"eink:bg-base-100 eink:border eink:border-base-content","info"!==n&&"text-white"),children:[(0,os.jsx)("div",{className:"flex-shrink-0",children:b[n]}),(0,os.jsx)("span",{className:h("max-h-[50vh] flex-1 overflow-y-auto","font-sans text-base font-medium leading-snug sm:text-sm","info"===n?"max-w-[60vw] truncate sm:max-w-[80vw]":"min-w-[60vw] max-w-[80vw] whitespace-normal break-words sm:min-w-40 sm:max-w-80",s),children:t.split("\n").map((e,r)=>(0,os.jsxs)(ol.default.Fragment,{children:[e||(0,os.jsx)(os.Fragment,{children:""}),r<t.split("\n").length-1&&(0,os.jsx)("br",{})]},r))}),(0,os.jsx)("button",{onClick:m,className:h("flex-shrink-0 rounded-lg p-1 transition-colors","info"===n?"hover:bg-base-300":"hover:bg-white/20 active:bg-white/30"),"aria-label":"Dismiss",children:(0,os.jsx)("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,os.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})})};var od=S,of=e.i(746314),oh=a,op=p,ob=b,og=l,om=x,ov=A,oy=eZ;async function ox(){return await (0,oy.invoke)("plugin:deep-link|get_current")}let ow=()=>{let e=new URLSearchParams(window.location.search).getAll("file");return e.length>0?e:window.OPEN_WITH_FILES},o_=async()=>{let{getMatches:t}=await e.A(707590),r=await t(),n=r?.args,i=[];if(n)for(let e of["file1","file2","file3","file4"]){let t=n[e];t&&t.occurrences>0&&i.push(t.value)}return i},oS=async e=>{let t=await ox();return t&&t.length>0?(console.log("Intent Open with URL:",t),t.map(t=>{if(t.startsWith("file://"))if(e?.isIOSApp)return decodeURI(t);else return decodeURI(t.replace("file://",""));return t.startsWith("content://")?t:(console.info("Skip non-file URL:",t),null)}).filter(e=>null!==e)):null},oE=async e=>{if((0,ov.isWebAppPlatform)())return[];let t=ow();return(!t||0===t.length)&&(0,ov.hasCli)()&&(t=await o_()),t&&0!==t.length||(t=await oS(e)),t};var ok=eI,oN=eI,oj=tS,oC=tx;let oM=async()=>{let e=(0,oN.getCurrentWindow)(),t=await e.scaleFactor(),r=await e.outerPosition();return{x:r.x/t,y:r.y/t}},oA=async()=>{(0,oN.getCurrentWindow)().minimize()},oR=async()=>{let e=await (0,oN.getCurrentWindow)().innerSize();e.width-=1,e.height-=1,await (0,oN.getCurrentWindow)().setSize(e),setTimeout(async()=>{let e=await (0,oN.getCurrentWindow)().innerSize();e.width+=1,e.height+=1,await (0,oN.getCurrentWindow)().setSize(e)},100)},oT=async()=>{let e=(0,oN.getCurrentWindow)();await e.isFullscreen()?(await e.setFullscreen(!1),await e.unmaximize()):await e.toggleMaximize(),await (0,oC.type)()==="linux"&&oR()},oO=async()=>{(0,oN.getCurrentWindow)().close()},oL=async e=>{let t=(0,oN.getCurrentWindow)();return await t.onCloseRequested(async r=>{r.preventDefault(),await e(),t.label.startsWith("reader")?(await (0,oj.emitTo)("main","close-reader-window",{label:t.label}),setTimeout(()=>t.destroy(),300)):"main"===t.label&&await t.destroy()})},oI=async()=>{let e=(0,oN.getCurrentWindow)(),t=await e.isFullscreen();await e.isMaximized()?await e.unmaximize():await e.setFullscreen(!t),await (0,oC.type)()==="linux"&&oR()},oP=async()=>{await eR.dispatch("quit-app"),await tV(0)};var oB=A,oD=S;let oz=(e,t,r={emitLast:!0})=>{let n=0,i=null,a=null;return(...o)=>{let s=t-(Date.now()-n),l=()=>{n=Date.now(),i=null,e(...o)};s<=0?(i&&(clearTimeout(i),i=null),l()):(a=o,i||(i=setTimeout(()=>{i=null,a&&r.emitLast&&(e(...a),a=null)},s)))}};var oF=A,o$=R;let oU=(e,t,r,n)=>{let i=t.join(o$.BOOK_IDS_SEPARATOR);if((0,oF.isWebAppPlatform)()&&!(0,oF.isPWA)())e.push(`/reader/${i}${r?`?${r}`:""}`,n);else{let t=new URLSearchParams(r||"");t.set("ids",i),e.push(`/reader?${t.toString()}`,n)}},oH=e=>{let t=window.location.pathname,r=window.location.search,n="/auth"!==t?t+r:"/";e.push(`/auth?redirect=${encodeURIComponent(n)}`)},oV=(e,t,r,n)=>{let i=sessionStorage.getItem("lastLibraryParams");n&&i&&(t=i),e.replace(`/library${t?`?${t}`:""}`,r)};var oq=eZ,oW=eg;async function oK(e,t){let r=512,n=224,i=182,a=10;try{let o=await fetch(e),s=await o.blob(),l=new Image;l.crossOrigin="anonymous";let c=await fetch(t),u=await c.blob(),d=new Image;return d.crossOrigin="anonymous",new Promise((e,t)=>{let o=!1,c=!1,f=()=>{if(o&&c)try{let o,s,c,u,f=document.createElement("canvas"),h=f.getContext("2d");if(!h)return void t(Error("Failed to get canvas context"));f.width=r,f.height=r;let p=l.width/l.height;p>1?(o=r,s=r/p,c=0,u=(r-s)/2):(s=r,o=r*p,c=(r-o)/2,u=0),h.imageSmoothingEnabled=!0,h.imageSmoothingQuality="high",h.drawImage(l,c,u,o,s),h.drawImage(d,r-n-a,r-i-a,n,i),f.toBlob(r=>{r?e(r):t(Error("Failed to create blob"))},"image/jpeg",.9)}catch(e){t(Error(`Failed to process cover: ${e}`))}};l.onload=()=>{o=!0,f()},d.onload=()=>{c=!0,f()},l.onerror=()=>t(Error("Failed to load cover image")),d.onerror=()=>t(Error("Failed to load icon image"));let h=URL.createObjectURL(s),p=URL.createObjectURL(u);l.src=h,d.src=p,l.onload=function(){URL.revokeObjectURL(h),o=!0,f()},d.onload=function(){URL.revokeObjectURL(p),c=!0,f()}})}catch(e){throw console.error("Error processing Discord cover:",e),e}}async function oG(e,t={}){let{targetWidth:r=256,format:n="image/jpeg",quality:i=.85}=t;try{let t=await fetch(e);if(!t.ok)throw Error(`Failed to fetch image: ${t.status} ${t.statusText}`);let a=await t.blob(),o=new Image;return o.crossOrigin="anonymous",new Promise((e,t)=>{o.onload=()=>{try{let a=o.height/o.width,s=r,l=Math.round(s*a),c=document.createElement("canvas"),u=c.getContext("2d");if(!u)return void t(Error("Failed to get canvas context"));c.width=s,c.height=l,u.imageSmoothingEnabled=!0,u.imageSmoothingQuality="high",u.drawImage(o,0,0,s,l);let d=c.toDataURL(n,i);e(d)}catch(e){t(Error(`Failed to scale image: ${e}`))}},o.onerror=()=>t(Error("Failed to load image for scaling"));let s=URL.createObjectURL(a);o.src=s;let l=()=>URL.revokeObjectURL(s),c=o.onload,u=o.onerror;o.onload=function(e){l(),c&&c.call(this,e)},o.onerror=function(e){l(),u&&u.call(this,e)}})}catch(e){throw console.error("Error fetching and encoding image:",e),e}}let oX=new Map,oZ=36e5,oY=async(e,t)=>{let r=oX.get(e.hash);if(r){if(!(Date.now()-r.timestamp>oZ))return r.url??void 0;r.url||oX.delete(e.hash)}try{let r=(0,oW.getCoverFilename)(e);if(!await t.exists(r,"Books"))return void oX.set(e.hash,{url:null,timestamp:Date.now()});let n=await t.resolveFilePath(r,"Books"),i=await t.getImageURL(n),a="/icon-tiny.png";await oK(i,a),console.log("Processed Discord cover for book:",e.title),oX.set(e.hash,{url:null,timestamp:Date.now()});return}catch(t){console.warn("Failed to process cover for Discord:",t),oX.set(e.hash,{url:null,timestamp:Date.now()});return}},oJ=async(e,t,r)=>{if(r?.isDesktopApp)try{let n=await oY(e,r),i={bookHash:e.hash,title:e.title,author:e.author||null,coverUrl:n||null,sessionStart:t};await (0,oq.invoke)("update_book_presence",{presence:i})}catch(e){console.warn("Failed to update Discord presence:",e)}},oQ=async e=>{if(e?.isDesktopApp)try{await (0,oq.invoke)("clear_book_presence")}catch(e){console.warn("Failed to clear Discord presence:",e)}};var o0=R,o1=a,o2=p,o3=l,o4=y,o6=p;let o5=new Set(["aa","ab","ae","af","ak","am","an","ar","as","av","ay","az","ba","be","bg","bh","bi","bm","bn","bo","br","bs","ca","ce","ch","co","cr","cs","cu","cv","cy","da","de","dv","dz","ee","el","en","eo","es","et","eu","fa","ff","fi","fj","fo","fr","fy","ga","gd","gl","gn","gu","gv","ha","he","hi","ho","hr","ht","hu","hy","hz","ia","id","ie","ig","ii","ik","io","is","it","iu","ja","jv","ka","kg","ki","kj","kk","kl","km","kn","ko","kr","ks","ku","kv","kw","ky","la","lb","lg","li","ln","lo","lt","lu","lv","mg","mh","mi","mk","ml","mn","mr","ms","mt","my","na","nb","nd","ne","ng","nl","nn","no","nr","nv","ny","oc","oj","om","or","os","pa","pi","pl","ps","pt","qu","rm","rn","ro","ru","rw","sa","sc","sd","se","sg","si","sk","sl","sm","sn","so","sq","sr","ss","st","su","sv","sw","ta","te","tg","th","ti","tk","tl","tn","to","tr","ts","tt","tw","ty","ug","uk","ur","uz","ve","vi","vo","wa","wo","xh","yi","yo","za","zh","zu"]),o8=e=>{if(!e)return{isValid:!0,value:""};let t=e.trim();if(![{pattern:/^\d{4}$/,format:"YYYY"},{pattern:/^\d{4}-\d{2}$/,format:"YYYY-MM"},{pattern:/^\d{4}-\d{2}-\d{2}$/,format:"YYYY-MM-DD"}].find(({pattern:e})=>e.test(t)))return{isValid:!1,value:null,error:"Invalid date format. Use YYYY, YYYY-MM, or YYYY-MM-DD"};try{let e;if(e=new Date(4===t.length?`${t}-01-01`:7===t.length?`${t}-01`:t),isNaN(e.getTime()))return{isValid:!1,value:null,error:"Invalid date"};let r=e.getFullYear(),n=new Date().getFullYear();if(r<1e3||r>n+10)return{isValid:!1,value:null,error:`Year must be between 1000 and ${n+10}`};if(t.length>=7){let e=parseInt(t.substring(5,7));if(e<1||e>12)return{isValid:!1,value:null,error:"Month must be between 01 and 12"}}if(10===t.length){let e=parseInt(t.substring(8,10));if(e<1||e>31)return{isValid:!1,value:null,error:"Day must be between 01 and 31"}}return{isValid:!0,value:e.toISOString()}}catch{return{isValid:!1,value:null,error:"Failed to parse date"}}},o9=e=>{if(!e)return{isValid:!0,value:"unknown"};let t=e.trim().toLowerCase();if(!/^[a-z]{2}(-[a-z]{2,4})?$/i.test(t))return{isValid:!1,value:null,error:"Invalid language format. Use ISO 639-1 codes (e.g., en, zh-CN)"};let r=t.substring(0,2);return o5.has(r)?{isValid:!0,value:t}:{isValid:!1,value:null,error:`Invalid language code: ${r}. Must be a valid ISO 639-1 code`}},o7=e=>{if(!e)return{isValid:!0,value:""};let t=e.replace(/[-\s]/g,"");if(10!==t.length&&13!==t.length)return{isValid:!1,value:null,error:"ISBN must be 10 or 13 digits"};if(10===t.length){let e=se(t);return{isValid:e,value:e?t:null,error:e?void 0:"Invalid ISBN-10 checksum"}}if(13===t.length){let e=st(t);return{isValid:e,value:e?t:null,error:e?void 0:"Invalid ISBN-13 checksum"}}return{isValid:!1,value:null,error:"Invalid ISBN format"}},se=e=>{let t=0;for(let r=0;r<9;r++){let n=parseInt(e[r]);if(isNaN(n))return!1;t+=n*(10-r)}let r=e[9],n="X"===r?10:parseInt(r);return!isNaN(n)&&(t+=n)%11==0},st=e=>{let t=0;for(let r=0;r<12;r++){let n=parseInt(e[r]);if(isNaN(n))return!1;t+=n*(r%2==0?1:3)}let r=parseInt(e[12]);return!isNaN(r)&&r===(10-t%10)%10},sr=e=>{if(!e)return{isValid:!0,value:[]};let t=e.split(",").map(e=>e.trim()),r=20,n=100;if(t.length>r)return{isValid:!1,value:null,error:`Too many subjects (max ${r})`};let i=t.find(e=>e.length>n);return i?{isValid:!1,value:null,error:`Subject too long (max ${n} characters): ${i}`}:{isValid:!0,value:t}},sn=async(e,t)=>{let r=await r5();if(!r)throw Error("Not authenticated");let n={...t.headers,Authorization:`Bearer ${r}`},i=await fetch(e,{...t,headers:n});if(!i.ok){let e=await i.json();throw console.error("Error:",e.error||i.statusText),Error(e.error||"Request failed")}return i},si=(0,A.getAPIBaseUrl)()+"/metadata/search",sa=async e=>{let t=await sn(si,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),r=await t.json();if(!r.success)throw Error(r.error||"Search failed");return r.data||[]};var so=eg;let ss=e=>{let[t,r]=(0,o6.useState)({}),[n,i]=(0,o6.useState)({}),[a,o]=(0,o6.useState)({}),[s,l]=(0,o6.useState)({}),[c,u]=(0,o6.useState)(!1),[d,f]=(0,o6.useState)(!1),[h,p]=(0,o6.useState)([]),b=["title","author","publisher","published","language","identifier","subject","description","subtitle","series","seriesIndex","seriesTotal","coverImageUrl"];(0,o6.useEffect)(()=>{e&&r({...e})},[e]),(0,o6.useEffect)(()=>{let e={};b.forEach(t=>{e[t]=!1}),o(e)},[]);let g=(e,t)=>{!a[e]&&(r(r=>{let n={...r};return"subject"===e?n.subject=t?t.split(/,|;||/).map(e=>e.trim()):[]:n[e]=t,n}),void 0!==t&&m(e,t),n[e]&&i(t=>{let r={...t};return delete r[e],r}))},m=(e,t)=>{let r;if(a[e])return!0;switch(e){case"title":case"author":if(!t.trim())return console.warn(`Field ${e} cannot be empty`),l(t=>({...t,[e]:"This field is required"})),!1;break;case"published":if(t.trim()&&!(r=o8(t)).isValid)return console.warn(`Invalid date for field ${e}:`,r.error),l(t=>({...t,[e]:r.error||""})),!1;break;case"language":if(t.trim()&&!(r=o9(t)).isValid)return console.warn(`Invalid language for field ${e}:`,r.error),l(t=>({...t,[e]:r.error||""})),!1;break;case"subject":if(t.trim()&&!(r=sr(t)).isValid)return console.warn(`Invalid subjects for field ${e}:`,r.error),l(t=>({...t,[e]:r.error||""})),!1}return l(t=>{let r={...t};return delete r[e],r}),!0},v=()=>{let e={};b.forEach(t=>{e[t]=!1}),o(e)},y=async()=>{u(!0);try{let e=o7(t.identifier||""),r=(await sa({title:(0,so.formatTitle)(t.title),author:(0,so.formatAuthors)(t.author),isbn:e.isValid?t.identifier:void 0,language:(0,so.getPrimaryLanguage)(t.language)})).map(e=>({sourceName:e.providerName,sourceLabel:e.providerLabel,confidence:e.confidence,data:e.metadata}));p(r),f(!0)}catch(e){console.error("Failed to retrieve metadata:",e)}finally{u(!1)}},x=e=>{let o={...t},s={...n};Object.entries(e.data).forEach(([t,r])=>{!a[t]&&r&&(o[t]=r,s[t]=`${e.sourceName}-${e.confidence}`)}),r(o),i(s),f(!1)},w=()=>{e&&r({...e}),i({}),f(!1),v()};return{editedMeta:t,fieldSources:n,lockedFields:a,fieldErrors:s,searchLoading:c,showSourceSelection:d,availableSources:h,handleFieldChange:g,handleFieldValidation:m,handleToggleFieldLock:e=>{o(t=>({...t,[e]:!t[e]}))},handleLockAll:()=>{let e={};b.forEach(t=>{e[t]=!0}),o(e)},handleUnlockAll:v,handleAutoRetrieve:y,handleSourceSelection:x,handleCloseSourceSelection:()=>{f(!1)},resetToOriginal:w}};var sl=A,sc=a,su=p,sd=p,sf=l;let sh=({onCancel:e,onConfirm:t,enabled:r=!0,elementRef:n})=>{let{appService:i}=(0,sf.useEnv)(),{acquireBackKeyInterception:a,releaseBackKeyInterception:o}=eO(),s=(0,sd.useRef)(null),l=n||s;return(0,sd.useEffect)(()=>{if(!r)return;let n=r=>{if(r instanceof CustomEvent){if("Back"===r.detail.keyName)return e?.(),!0}else"Escape"===r.key?e?.():"Enter"===r.key&&t?.(),r.stopPropagation();return!1};return window.addEventListener("keydown",n),l.current&&l.current.addEventListener("keydown",n),i?.isAndroidApp&&(a?.(),eR.onSync("native-key-down",n)),()=>{window.removeEventListener("keydown",n),i?.isAndroidApp&&(o?.(),eR.offSync("native-key-down",n))}},[r,i?.isAndroidApp]),s},sp=({title:e,message:t,onCancel:r,onConfirm:n})=>{let i=eU(),[a,o]=su.default.useState(!1),s=sh({onCancel:r,onConfirm:n});return(0,sc.jsx)("div",{className:h("z-[100] flex justify-center px-4"),children:(0,sc.jsxs)("div",{ref:s,role:"alert",className:h("alert flex items-center justify-between","bg-base-300 rounded-lg border-none p-4 shadow-2xl","w-full max-w-[90vw] sm:max-w-[70vw] md:max-w-[50vw] lg:max-w-[40vw] xl:max-w-[40vw]","min-w-[70vw] flex-col sm:min-w-[40vw] sm:flex-row"),children:[(0,sc.jsxs)("div",{className:"labels flex items-center space-x-2 self-start sm:space-x-4 sm:self-center",children:[(0,sc.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:"stroke-info h-6 w-6 shrink-0",children:(0,sc.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,sc.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,sc.jsx)("h3",{className:"text-start text-sm font-medium sm:text-center",children:e}),(0,sc.jsx)("div",{className:"text-start text-sm sm:text-center",children:t})]})]}),(0,sc.jsxs)("div",{className:"buttons flex flex-wrap items-center justify-end gap-2 self-end sm:max-w-[20vw] sm:self-center",children:[(0,sc.jsx)("button",{className:"btn btn-sm btn-neutral",onClick:r,children:i("Cancel")}),(0,sc.jsx)("button",{className:h("btn btn-sm btn-warning",{"btn-disabled":a}),onClick:()=>{o(!0),n()},children:i("Confirm")})]})]})})};var sb=a,sg=eg,sm=a,sv=th,sy=p,sx=eg;let sw=(0,sy.memo)(({book:e,mode:t="grid",coverFit:r="crop",showSpine:n=!1,className:i,imageClassName:a,isPreview:o,onImageError:s})=>{let l=(0,sy.useRef)(null),[c,u]=(0,sy.useState)(!1),[d,f]=(0,sy.useState)(!1),p=n&&c&&!d,b=e=>{if(l.current){let t=l.current.querySelector(".cover-image"),r=l.current.querySelector(".fallback-cover");t&&t.classList.toggle("invisible",!e),r&&r.classList.toggle("invisible",e)}},g=()=>{u(!0),f(!1),b(!0)},m=()=>{u(!1),f(!0),b(!1),s?.()};return(0,sy.useEffect)(()=>{b(!0)},[e.metadata?.coverImageUrl,e.coverImageUrl]),(0,sm.jsxs)("div",{ref:l,className:h("book-cover-container relative flex h-full w-full",i),children:["crop"===r?(0,sm.jsxs)(sm.Fragment,{children:[(0,sm.jsx)(sv.default,{src:e.metadata?.coverImageUrl||e.coverImageUrl,alt:e.title,fill:!0,className:h("cover-image crop-cover-img object-cover",a),onLoad:g,onError:m}),(0,sm.jsx)("div",{className:`book-spine absolute inset-0 ${p?"visible":"invisible"}`})]}):(0,sm.jsx)("div",{className:h("flex h-full w-full justify-start"),children:(0,sm.jsxs)("div",{className:h("flex h-full max-h-full items-end","grid"===t?"items-end":"items-center"),children:[(0,sm.jsx)(sv.default,{src:e.metadata?.coverImageUrl||e.coverImageUrl,alt:e.title,width:0,height:0,sizes:"100vw",className:h("cover-image fit-cover-img h-auto max-h-full w-auto max-w-full shadow-md",a),onLoad:g,onError:m}),(0,sm.jsx)("div",{className:`book-spine absolute inset-0 ${p?"visible":"invisible"}`})]})}),(0,sm.jsxs)("div",{className:h("fallback-cover invisible absolute inset-0 p-2","text-neutral-content text-center font-serif font-medium",o?"bg-base-200/50":"bg-base-100",a),children:[(0,sm.jsx)("div",{className:"flex h-1/2 items-center justify-center",children:(0,sm.jsx)("span",{className:h(o?"line-clamp-2":"grid"===t?"line-clamp-3":"line-clamp-2",o?"text-[0.5em]":"grid"===t?"text-lg":"text-sm"),children:(0,sx.formatTitle)(e.title)})}),(0,sm.jsx)("div",{className:"h-1/6"}),(0,sm.jsx)("div",{className:"flex h-1/3 items-center justify-center",children:(0,sm.jsx)("span",{className:h("text-neutral-content/50 line-clamp-1",o?"text-[0.4em]":"grid"===t?"text-base":"text-xs"),children:(0,sx.formatAuthors)(e.author)})})]})]})},(e,t)=>e.book.coverImageUrl===t.book.coverImageUrl&&e.book.metadata?.coverImageUrl===t.book.metadata?.coverImageUrl&&e.book.updatedAt===t.book.updatedAt&&e.mode===t.mode&&e.coverFit===t.coverFit&&e.isPreview===t.isPreview&&e.showSpine===t.showSpine&&e.className===t.className&&e.imageClassName===t.imageClassName);sw.displayName="BookCover";let s_=sw;var sS=a,sE=p,sk=a,sN=iB;let sj=({label:e,toggled:t,description:r,tooltip:n,buttonClass:i,labelClass:a,shortcut:o,disabled:s,noIcon:l=!1,transient:c=!1,Icon:u,iconClassName:d,children:f,siblings:p,onClick:b,setIsDropdownOpen:g})=>{let m=eU(),v=(0,sN.useResponsiveSize)(16),y=u||(void 0!==t&&t?il:void 0),x=()=>{b?.(),c&&g?.(!1)},w=(0,sk.jsxs)(sk.Fragment,{children:[(0,sk.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,sk.jsxs)("div",{className:"flex min-w-0 items-center",children:[!l&&(0,sk.jsx)("span",{style:{minWidth:`${v}px`},children:"function"==typeof y?(0,sk.jsx)(y,{className:h(s?"text-gray-400":"text-base-content",d),size:v}):y}),(0,sk.jsx)("span",{className:h("mx-2 flex-1 truncate text-base sm:text-sm",a),style:{minWidth:0},children:e})]}),o&&(0,sk.jsx)("kbd",{className:h("border-base-300/40 bg-base-300/75 hidden rounded-md border shadow-sm sm:flex","shrink-0 px-1.5 py-0.5 text-xs font-medium",s?"text-gray-400":"text-neutral-content"),children:o})]}),(0,sk.jsx)("div",{className:"flex w-full",children:r&&(0,sk.jsx)("span",{className:"mt-1 truncate text-start text-xs text-gray-500",style:{minWidth:0,paddingInlineStart:l?"0":`${v+8}px`},children:r})})]});return f?(0,sk.jsx)("ul",{className:"menu rounded-box m-0 p-0",role:"menuitem",tabIndex:-1,children:(0,sk.jsx)("li",{"aria-label":e,children:(0,sk.jsxs)("details",{children:[(0,sk.jsx)("summary",{className:h("hover:bg-base-300 text-base-content cursor-pointer rounded-md p-1 py-[10px] pr-3",s&&"btn-disabled cursor-not-allowed text-gray-400",i),title:n||"",children:w}),f]})})}):(0,sk.jsxs)("div",{className:"flex",children:[(0,sk.jsx)("button",{role:s?"none":"menuitem","aria-label":void 0!==t?`${e} - ${m(t?"ON":"OFF")}`:void 0,"aria-live":void 0===t?"polite":"off",tabIndex:s?-1:0,className:h("hover:bg-base-300 text-base-content flex w-full flex-col items-center justify-center rounded-md p-1 py-[10px]",s&&"btn-disabled text-gray-400",i),title:n||"",onClick:x,disabled:s,children:w}),p]})},sC=(e,t)=>{let r=e=>{if(!(0,sE.isValidElement)(e))return e;let n=e,i=n.type===sj||"function"==typeof n.type&&"MenuItem"===n.type.name?sE.default.cloneElement(n,{setIsDropdownOpen:t,...n.props}):n;return i.props?.children?sE.default.cloneElement(i,{...i.props,children:sE.default.Children.map(i.props.children,r)}):i};return sE.default.Children.map(e,r)},sM=({label:e,className:t,menuClassName:r,buttonClassName:n,toggleButton:i,children:a,disabled:o,onToggle:s})=>{let[l,c]=(0,sE.useState)(!1),[u,d]=(0,sE.useState)(!1),f=(0,sE.useRef)(!1),p=(0,sE.useRef)(null),b=e=>{o||(c(e),s?.(e))},g=()=>{f.current=!0,setTimeout(()=>f.current=!1,200)},m=()=>{d(!0),f.current||b(!0)},v=()=>{d(!l),b(!l)},y=e=>{p.current&&(p.current.contains(e.relatedTarget)||(d(!1),b(!1)))},x=e=>{"Enter"===e.key||" "===e.key?(l||b(!0),e.stopPropagation()):"Escape"===e.key&&(b(!1),e.stopPropagation())},w=(0,sE.isValidElement)(a)?sE.default.cloneElement(a,{..."string"!=typeof a.type&&{setIsDropdownOpen:b,menuClassName:r},children:sC(a.props?.children,b)}):a;return(0,sS.jsxs)("div",{className:"dropdown-container flex",children:[l&&(0,sS.jsx)(iq,{onDismiss:()=>b(!1)}),(0,sS.jsxs)("div",{ref:p,role:"menu",tabIndex:-1,onBlur:y,onKeyDown:x,className:h("dropdown flex flex-col",t),children:[(0,sS.jsx)("button",{"aria-haspopup":"menu","aria-expanded":l,"aria-label":e,title:e,className:h("dropdown-toggle touch-target",u&&l&&"bg-base-300/50",n),onTouchStart:g,onPointerDown:g,onFocus:m,onClick:v,children:i}),(0,sS.jsx)("div",{role:"none",className:h("flex items-center justify-center"),children:l&&w})]})]})},sA=({book:e,metadata:t,fileSize:r,onEdit:n,onDelete:i,onDeleteCloudBackup:a,onDeleteLocalCopy:o,onDownload:s,onUpload:l,onExport:c})=>{let u=eU();return(0,sb.jsxs)("div",{className:"relative w-full rounded-lg",children:[(0,sb.jsxs)("div",{className:"mb-6 me-4 flex h-32 items-start",children:[(0,sb.jsx)("div",{className:"me-6 aspect-[28/41] h-32 shadow-lg sm:me-10",children:(0,sb.jsx)(s_,{mode:"list",book:e})}),(0,sb.jsxs)("div",{className:"title-author flex h-32 flex-col justify-between",children:[(0,sb.jsxs)("div",{children:[(0,sb.jsx)("p",{className:"text-base-content mb-2 line-clamp-2 break-words text-lg font-bold",children:(0,sg.formatTitle)(e.title).replace(/\u00A0/g," ")||u("Untitled")}),(0,sb.jsx)("p",{className:"text-neutral-content line-clamp-1",children:(0,sg.formatAuthors)(e.author,e.primaryLanguage)||u("Unknown")})]}),(0,sb.jsxs)("div",{className:"flex flex-nowrap items-center gap-3 sm:gap-x-4",children:[n&&(0,sb.jsx)("button",{onClick:n,className:t?"":"btn-disabled opacity-50",title:u("Edit Metadata"),children:(0,sb.jsx)(iA,{className:"hover:fill-blue-500"})}),i&&(0,sb.jsx)(sM,{label:u("Delete Book Options"),className:"dropdown-bottom flex justify-center",buttonClassName:"btn btn-ghost h-8 min-h-8 w-8 p-0",toggleButton:(0,sb.jsx)(im,{className:"fill-red-500"}),children:(0,sb.jsxs)("div",{className:h("delete-menu dropdown-content dropdown-center no-triangle","border-base-300 !bg-base-200 z-20 mt-1 max-w-[90vw] shadow-2xl"),children:[(0,sb.jsx)(sj,{noIcon:!0,transient:!0,label:u("Remove from Cloud & Device"),onClick:i}),(0,sb.jsx)(sj,{noIcon:!0,transient:!0,label:u("Remove from Cloud Only"),onClick:a,disabled:!e.uploadedAt}),(0,sb.jsx)(sj,{noIcon:!0,transient:!0,label:u("Remove from Device Only"),onClick:o,disabled:!e.downloadedAt})]})}),e.uploadedAt&&s&&(0,sb.jsx)("button",{onClick:s,title:u("Download from Cloud"),children:(0,sb.jsx)(iN,{className:"fill-base-content"})}),e.downloadedAt&&l&&(0,sb.jsx)("button",{onClick:l,title:u("Upload to Cloud"),children:(0,sb.jsx)(ij,{className:"fill-base-content"})}),e.downloadedAt&&c&&(0,sb.jsx)("button",{onClick:c,title:u("Export Book"),children:(0,sb.jsx)(ii,{className:"fill-base-content"})})]})]})]}),(0,sb.jsxs)("div",{className:"text-base-content my-4",children:[(0,sb.jsxs)("div",{className:"mb-4 grid grid-cols-2 gap-4 sm:grid-cols-3",children:[(0,sb.jsxs)("div",{className:"overflow-hidden",children:[(0,sb.jsx)("span",{className:"font-bold",children:u("Publisher")}),(0,sb.jsx)("p",{className:"text-neutral-content text-sm",children:(0,sg.formatPublisher)(t?.publisher||"")||u("Unknown")})]}),(0,sb.jsxs)("div",{className:"overflow-hidden",children:[(0,sb.jsx)("span",{className:"font-bold",children:u("Published")}),(0,sb.jsx)("p",{className:"text-neutral-content text-sm",children:(0,sg.formatDate)(t?.published,!0)||u("Unknown")})]}),(0,sb.jsxs)("div",{className:"overflow-hidden",children:[(0,sb.jsx)("span",{className:"font-bold",children:u("Updated")}),(0,sb.jsx)("p",{className:"text-neutral-content text-sm",children:(0,sg.formatDate)(e.updatedAt)||""})]}),(0,sb.jsxs)("div",{className:"overflow-hidden",children:[(0,sb.jsx)("span",{className:"font-bold",children:u("Added")}),(0,sb.jsx)("p",{className:"text-neutral-content text-sm",children:(0,sg.formatDate)(e.createdAt)||""})]}),(0,sb.jsxs)("div",{className:"overflow-hidden",children:[(0,sb.jsx)("span",{className:"font-bold",children:u("Language")}),(0,sb.jsx)("p",{className:"text-neutral-content text-sm",children:(0,sg.formatLanguage)(t?.language)||u("Unknown")})]}),(0,sb.jsxs)("div",{className:"overflow-hidden",children:[(0,sb.jsx)("span",{className:"font-bold",children:u("Subjects")}),(0,sb.jsx)("p",{className:"text-neutral-content line-clamp-3 text-sm",children:(0,sg.formatAuthors)(t?.subject||"")||u("Unknown")})]}),(0,sb.jsxs)("div",{className:"overflow-hidden",children:[(0,sb.jsx)("span",{className:"font-bold",children:u("Format")}),(0,sb.jsx)("p",{className:"text-neutral-content text-sm",children:e.format||u("Unknown")})]}),(0,sb.jsxs)("div",{className:"overflow-hidden",children:[(0,sb.jsx)("span",{className:"font-bold",children:u("File Size")}),(0,sb.jsx)("p",{className:"text-neutral-content text-sm",children:(0,sg.formatBytes)(r)||u("Unknown")})]})]}),(0,sb.jsxs)("div",{children:[(0,sb.jsx)("span",{className:"font-bold",children:u("Description")}),(0,sb.jsx)("p",{className:"text-neutral-content prose prose-sm max-w-full whitespace-pre-line text-sm",dangerouslySetInnerHTML:{__html:t?.description||u("No description available")}})]})]})]})};var sR=a,sT=p,sO=l,sL=eg,sI=A,sP=nj,sB=S,sD=R;let sz=e=>new Promise(t=>{let r=document.createElement("input");r.type="file",r.accept=e.accept||"*/*",r.multiple=e.multiple||!1,r.click(),r.onchange=()=>{t(Array.from(r.files||[]))}}),sF=async(e,t,r)=>{let n=t?.isIOSApp||t?.isAndroidApp&&"books"===e.type,i=n?[]:e.extensions||[],a=e.dialogTitle||r("Select Files"),o=await t?.selectFiles(r(a),i)||[];return n&&e.extensions&&(o=await Promise.all(o.map(async r=>{let n=r;t?.isAndroidApp&&r.startsWith("content://")&&(n=await (0,sP.basename)(r));let i=n.split(".").pop()?.toLowerCase()||"unknown",a=e.extensions;return a.includes(i)||a.includes("*")?r:null})).then(e=>e.filter(e=>null!==e))),o},s$=e=>e.map(e=>({file:e})),sU=e=>e.map(e=>({path:e})),sH=(e,t)=>({selectFiles:async(r={type:"generic"})=>{if(r={...sV[r.type],...r},!e)return{files:[],error:"App service is not available"};try{if((0,sI.isTauriAppPlatform)()){let n=await sF(r,e,t);return{files:await sU(n)}}{let e=await sz(r);return{files:s$(e)}}}catch(e){return{files:[],error:e instanceof Error?e.message:"Unknown error occurred"}}}}),sV={generic:{accept:"*/*",extensions:["*"],dialogTitle:(0,sB.stubTranslation)("Select Files")},images:{accept:"image/*",extensions:["jpg","jpeg","png","gif","webp","svg"],dialogTitle:(0,sB.stubTranslation)("Select Image")},videos:{accept:"video/*",extensions:["mp4","avi","mov","wmv","flv","webm"],dialogTitle:(0,sB.stubTranslation)("Select Video")},audio:{accept:"audio/*",extensions:["mp3","wav","ogg","flac","m4a"],dialogTitle:(0,sB.stubTranslation)("Select Audio")},books:{accept:sD.BOOK_ACCEPT_FORMATS,extensions:sD.SUPPORTED_BOOK_EXTS,dialogTitle:(0,sB.stubTranslation)("Select Books")},fonts:{accept:".ttf, .otf, .woff, .woff2",extensions:["ttf","otf","woff","woff2"],dialogTitle:(0,sB.stubTranslation)("Select Fonts")},covers:{accept:".png, .jpg, .jpeg, .gif",extensions:["png","jpg","jpeg","gif"],dialogTitle:(0,sB.stubTranslation)("Select Image")}};var sq=a;let sW="w-full rounded-md px-3 py-2 focus:outline-none focus:ring-1 focus:ring-blue-500",sK="bg-base-200/50",sG="text-base-content block text-sm font-medium",sX=({source:e})=>{if(!e)return null;let[t,r]=e.split("-"),n=parseInt(r),i="text-green-500";return n<90&&(i="text-yellow-500"),n<70&&(i="text-red-500"),(0,sq.jsxs)("div",{className:"flex items-center justify-end gap-1 text-xs",children:[(0,sq.jsx)(iv,{className:h("h-3 w-3",i)}),(0,sq.jsxs)("span",{className:h("capitalize",i),children:[t," (",r,"%)"]})]})},sZ=({isLocked:e,onToggle:t,disabled:r=!1})=>(0,sq.jsx)("button",{type:"button",onClick:t,disabled:r,className:h("focus:outline-non absolute right-2 top-1/2 -translate-y-1/2 rounded p-1 transition-colors",r&&"cursor-not-allowed opacity-50",e?"bg-green-100 text-green-500 hover:bg-green-200":"text-base-content"),title:e?"Unlock field":"Lock field",children:e?(0,sq.jsx)(nJ,{className:"h-4 w-4"}):(0,sq.jsx)(nY,{className:"h-4 w-4"})}),sY=({type:e="input",field:t,label:r,fieldSources:n,lockedFields:i,fieldErrors:a,isNumber:o=!1,required:s=!1,lockable:l=!0,disabled:c=!1,onToggleFieldLock:u,value:d,onFieldChange:f,placeholder:p,rows:b,className:g})=>{let m=eU(),v=i[t],y=n[t],x=a[t];return(0,sq.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,sq.jsxs)("div",{className:h(sG,"flex items-center justify-between"),children:[(0,sq.jsxs)("span",{children:[r," ",s&&"*"]}),v&&(0,sq.jsxs)("span",{className:"flex items-center gap-1 text-xs text-green-500",children:[(0,sq.jsx)(nJ,{className:"h-3 w-3"}),m("Locked")]})]}),(0,sq.jsxs)("div",{className:"relative",children:["input"===e?(0,sq.jsx)("input",{type:o?"number":"text",min:1,value:d,onChange:e=>f(t,e.target.value),placeholder:v?"":p,disabled:c||v,className:h(sW,sK,l&&"pe-10",v?"cursor-not-allowed":"bg-gray-100 text-gray-500",x&&"border-red-500 focus:ring-red-500",g)}):(0,sq.jsx)("textarea",{value:d,onChange:e=>f(t,e.target.value),placeholder:v?"":p,rows:b||4,disabled:c||v,className:h(sW,sK,l&&"pe-10",v?"cursor-not-allowed":"bg-gray-100 text-gray-500",x&&"border-red-500 focus:ring-red-500",g)}),l&&(0,sq.jsx)(sZ,{isLocked:v,onToggle:()=>u(t)})]}),x&&(0,sq.jsxs)("div",{className:"flex items-center gap-1 text-xs text-red-600",children:[(0,sq.jsx)(n3,{className:"h-3 w-3"}),(0,sq.jsx)("span",{children:x})]}),!x&&(0,sq.jsx)(sX,{source:y})]})},sJ="_blank",sQ=({book:e,metadata:t,fieldSources:r,lockedFields:n,fieldErrors:i,searchLoading:a,onFieldChange:o,onToggleFieldLock:s,onAutoRetrieve:l,onLockAll:c,onUnlockAll:u,onCancel:d,onReset:f,onSave:p})=>{let b=eU(),{appService:g}=(0,sO.useEnv)(),{selectFiles:m}=sH(g,b),v=Object.values(n).some(e=>e),y=Object.values(n).every(e=>e),x=n.coverImageUrl||!1,w=t.coverImageUrl||null,[_,S]=(0,sT.useState)(w),E=[{field:"title",label:b("Title"),required:!0,value:(0,sL.formatTitle)(t.title),placeholder:b("Enter book title")},{field:"subtitle",label:b("Subtitle"),required:!1,value:(0,sL.formatTitle)(t.subtitle||""),placeholder:b("Enter book subtitle")},{field:"author",label:b("Author"),required:!0,value:(0,sL.formatAuthors)(t.author),placeholder:b("Enter author name")}],k=[{field:"series",label:b("Series"),value:t.series||"",placeholder:b("Enter series name")},{field:"seriesIndex",label:b("Series Index"),isNumber:!0,value:String(t.seriesIndex||""),placeholder:b("Enter series index")},{field:"seriesTotal",label:b("Total in Series"),isNumber:!0,value:String(t.seriesTotal||""),placeholder:b("Enter total books in series")},{field:"publisher",label:b("Publisher"),value:(0,sL.formatPublisher)(t.publisher||""),placeholder:b("Enter publisher")},{field:"published",label:b("Publication Date"),value:t.published||"",placeholder:b("YYYY or YYYY-MM-DD")},{field:"language",label:b("Language"),value:Array.isArray(t.language)?t.language.join(", "):t.language||"",placeholder:"en, zh, fr"},{field:"identifier",label:b("Identifier"),value:t.identifier||"",placeholder:"978-0123456789"}],N=[{field:"subject",label:b("Subjects"),value:(0,sL.flattenContributors)(t.subject||[]),placeholder:b("Fiction, Science, History")},{field:"description",label:b("Description"),type:"textarea",rows:4,value:t.description||"",placeholder:b("Enter book description")}],j=async()=>{m({type:"covers",multiple:!1}).then(async e=>{if(e.error||0===e.files.length)return;let t=e.files[0];if(t.path&&g){let e=t.path,r=await g.getCachedImageUrl(e);o("coverImageFile",e),o("coverImageUrl",r),S(r)}else if(t.file){let e=URL.createObjectURL(t.file);o("coverImageBlobUrl",e),S(e)}})};return(0,sR.jsxs)("div",{className:"bg-base-100 relative w-full rounded-lg",children:[(0,sR.jsxs)("div",{className:"mb-6 flex items-stretch gap-4",children:[(0,sR.jsxs)("div",{className:"cover-field flex w-[30%] max-w-32 flex-col gap-2",children:[(0,sR.jsx)("button",{className:"aspect-[28/41] h-full shadow-md",onClick:x?void 0:j,children:(0,sR.jsx)(s_,{mode:"list",book:{...e,metadata:{...t,coverImageUrl:_||t.coverImageUrl},..._?{coverImageUrl:_}:{}}})}),(0,sR.jsxs)("div",{className:"flex w-full justify-between gap-1",children:[(0,sR.jsxs)("button",{onClick:j,disabled:x,className:h("flex w-1/2 min-w-0 items-center justify-center gap-1 rounded p-1 sm:w-3/5","text-sm hover:bg-gray-50 disabled:cursor-not-allowed disabled:opacity-50 sm:text-xs",x?"!text-base-content bg-base-200":"bg-gray-100 !text-gray-500"),title:b("Change cover image"),children:[(0,sR.jsx)(ia,{className:h("h-5 w-5 flex-shrink-0 sm:h-4 sm:w-4",x?"fill-base-content":"fill-gray-600")}),(0,sR.jsx)("span",{className:"hidden truncate sm:inline",children:b("Replace")})]}),(0,sR.jsx)("button",{onClick:()=>{S(sJ),o("coverImageUrl",sJ),o("coverImageFile",void 0),o("coverImageBlobUrl",void 0)},disabled:x,className:h("flex w-1/4 items-center justify-center rounded p-1 sm:w-1/5","disabled:cursor-not-allowed disabled:opacity-50","text-red-500 hover:bg-red-50 hover:text-red-600",x?"!text-base-content bg-base-200":"bg-gray-100"),title:b("Remove cover image"),children:(0,sR.jsx)(nX,{className:"h-5 w-5 sm:h-4 sm:w-4"})}),(0,sR.jsx)("button",{onClick:()=>s("coverImageUrl"),className:h("flex w-1/4 items-center justify-center rounded p-1 hover:bg-gray-50 sm:w-1/5",x?"bg-green-100 text-green-500 hover:bg-green-200":"bg-gray-100 text-gray-500"),title:b(x?"Unlock cover":"Lock cover"),children:x?(0,sR.jsx)(nJ,{className:"h-5 w-5 sm:h-4 sm:w-4"}):(0,sR.jsx)(nY,{className:"h-5 w-5 sm:h-4 sm:w-4"})})]})]}),(0,sR.jsx)("div",{className:"title-fields flex flex-1 flex-col justify-between",children:E.map(({field:e,label:t,required:a,value:l,placeholder:c})=>(0,sR.jsx)(sY,{field:e,label:t,required:a,value:l,onFieldChange:o,fieldSources:r,lockedFields:n,fieldErrors:i,onToggleFieldLock:s,placeholder:c},e))})]}),(0,sR.jsxs)("div",{className:"mb-6 space-y-4",children:[(0,sR.jsx)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:k.map(({field:e,label:t,value:a,isNumber:l,placeholder:c})=>(0,sR.jsx)(sY,{field:e,label:t,value:a,isNumber:l,onFieldChange:o,fieldSources:r,lockedFields:n,fieldErrors:i,onToggleFieldLock:s,placeholder:c},e))}),N.map(({field:e,label:t,type:a="input",rows:l,value:c,placeholder:u})=>(0,sR.jsx)(sY,{field:e,label:t,type:a,rows:l,value:c,onFieldChange:o,fieldSources:r,lockedFields:n,fieldErrors:i,onToggleFieldLock:s,placeholder:u},e))]}),(0,sR.jsxs)("div",{className:"flex flex-col items-center justify-between gap-4",children:[(0,sR.jsxs)("div",{className:"flex w-full items-center gap-2",children:[(0,sR.jsxs)("button",{onClick:l,disabled:a,className:"flex items-center gap-2 rounded-md bg-blue-500 px-4 py-2 text-sm text-white hover:bg-blue-600 disabled:opacity-50",title:b("Auto-Retrieve Metadata"),children:[a?(0,sR.jsx)("span",{className:"loading loading-spinner h-4 w-4"}):(0,sR.jsx)(iy,{className:"mt-[1px] h-4 w-4"}),(0,sR.jsx)("span",{className:"sm:hidden",children:b("Auto")}),(0,sR.jsx)("span",{className:"hidden sm:inline",children:b("Auto-Retrieve")})]}),(0,sR.jsxs)("div",{className:"flex items-center gap-1 border-l border-gray-300 pl-2",children:[(0,sR.jsxs)("button",{onClick:u,disabled:!v,className:h("hover:bg-base-200 flex items-center gap-1 rounded px-2 py-1 text-sm","disabled:cursor-not-allowed disabled:opacity-80","text-yellow-600 hover:text-yellow-700"),title:b("Unlock all fields"),children:[(0,sR.jsx)(nY,{className:"h-3 w-3"}),b("Unlock All")]}),(0,sR.jsxs)("button",{onClick:c,disabled:y,className:h("hover:bg-base-200 flex items-center gap-1 rounded px-2 py-1 text-sm","disabled:cursor-not-allowed disabled:opacity-80","text-green-600 hover:text-green-700"),title:b("Lock all fields"),children:[(0,sR.jsx)(nJ,{className:"h-3 w-3"}),b("Lock All")]})]})]}),(0,sR.jsxs)("div",{className:"flex w-full justify-end gap-4",children:[(0,sR.jsx)("button",{onClick:d,className:"hover:bg-base-200 rounded-md border-neutral-300 px-4 py-2",children:b("Cancel")}),(0,sR.jsx)("button",{onClick:f,className:"hover:bg-base-200 rounded-md border-neutral-300 px-4 py-2",children:b("Reset")}),(0,sR.jsx)("button",{onClick:p,disabled:i&&Object.keys(i).length>0,className:"rounded-md bg-green-500 px-4 py-2 text-white hover:bg-green-600 disabled:opacity-50",children:b("Save")})]})]})]})};var s0=a,s1=p,s2=eg;let s3=({sources:e,isOpen:t,onSelect:r,onClose:n})=>{let i=eU(),a=(0,s1.useRef)(null);(0,s1.useEffect)(()=>{t&&a.current&&a.current.focus()},[t]);let o=e=>e>=90?(0,s0.jsx)(iR,{className:"text-green-500"}):e>=70?(0,s0.jsx)("span",{className:"text-yellow-500",children:""}):(0,s0.jsx)("span",{className:"text-red-500",children:""});return t?(0,s0.jsx)("div",{className:"source-selector fixed inset-0 z-[60] flex items-center justify-center bg-black/50",children:(0,s0.jsxs)("div",{ref:a,tabIndex:-1,role:"dialog","aria-modal":"true",className:"bg-base-100 mx-4 max-h-[80vh] w-full max-w-md overflow-y-auto rounded-lg p-6",children:[(0,s0.jsx)("h3",{className:"mb-4 text-lg font-semibold",children:i("Select Metadata Source")}),(0,s0.jsxs)("div",{className:"space-y-3",children:[e.map((e,t)=>(0,s0.jsx)("button",{tabIndex:0,onClick:()=>r(e),className:"hover:bg-base-300/75 bg-base-200 border-base-200 w-full cursor-pointer rounded-md border p-3 transition-colors",children:(0,s0.jsxs)("div",{className:"flex items-start gap-4",children:[(0,s0.jsx)("div",{className:"aspect-[28/41] h-full w-[40%] max-w-32 shadow-md",children:(0,s0.jsx)(s_,{mode:"list",book:{title:(0,s2.formatTitle)(e.data.title),author:(0,s2.formatAuthors)(e.data.author),coverImageUrl:e.data.coverImageUrl||"_blank"}})}),(0,s0.jsxs)("div",{className:"flex-1",children:[(0,s0.jsxs)("div",{className:"mb-2 flex items-center justify-between",children:[(0,s0.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s0.jsx)("span",{className:"font-medium capitalize",children:e.sourceLabel}),o(e.confidence)]}),(0,s0.jsxs)("span",{className:"text-sm text-gray-500",children:[e.confidence,"%"]})]}),(0,s0.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,s0.jsx)("div",{className:"font-medium",children:(0,s2.formatTitle)(e.data.title)}),(0,s0.jsx)("div",{className:"text-gray-600",children:(0,s2.formatAuthors)(e.data.author)}),(0,s0.jsxs)("div",{className:"text-gray-500",children:[e.data.language?`${(0,s2.getPrimaryLanguage)(e.data.language)}  `:"",e.data.publisher?`${e.data.publisher}  `:"",e.data.published]}),e.data.identifier&&(0,s0.jsxs)("div",{className:"text-gray-500",children:["Identifier: ",e.data.identifier]}),e.data.description&&(0,s0.jsx)("div",{className:"line-clamp-3 text-xs text-gray-500",children:e.data.description})]})]})]})},t)),(0,s0.jsx)("button",{tabIndex:0,onClick:n,className:"hover:bg-base-300/75 border-base-200 bg-base-200 cursor-pointer rounded-md border p-3 transition-colors",children:(0,s0.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s0.jsx)(iA,{className:"h-4 w-4"}),(0,s0.jsx)("span",{className:"font-medium",children:i("Keep manual input")})]})})]}),(0,s0.jsx)("div",{className:"mt-6 flex justify-end gap-2",children:(0,s0.jsx)("button",{onClick:n,className:"hover:bg-base-200 rounded-md px-4 py-2",children:i("Cancel")})})]})}):null};var s4=a,s6=y;let s5=({loading:e,className:t})=>{let r=eU(),{safeAreaInsets:n}=(0,s6.useThemeStore)();return e?(0,s4.jsxs)("div",{className:h("absolute left-1/2 top-4 -translate-x-1/2 transform text-center"),style:{paddingTop:`${(n?.top||0)+64}px`},role:"status",children:[(0,s4.jsx)("span",{className:h("loading loading-lg not-eink:loading-dots eink:loading-spinner",t)}),(0,s4.jsx)("span",{className:"sr-only",children:r("Loading...")})]}):null},s8=({book:e,isOpen:t,onClose:r,handleBookDownload:n,handleBookUpload:i,handleBookDelete:a,handleBookDeleteCloudBackup:o,handleBookDeleteLocalCopy:s,handleBookMetadataUpdate:l})=>{let c=eU(),{envConfig:u,appService:d}=(0,o3.useEnv)(),{safeAreaInsets:f}=(0,o4.useThemeStore)(),[p,b]=(0,o2.useState)(null),[g,m]=(0,o2.useState)(!1),[v,y]=(0,o2.useState)(!1),[x,w]=(0,o2.useState)(null),[_,S]=(0,o2.useState)(null),{editedMeta:E,fieldSources:k,lockedFields:N,fieldErrors:j,searchLoading:C,showSourceSelection:M,availableSources:A,handleFieldChange:R,handleToggleFieldLock:T,handleLockAll:O,handleUnlockAll:L,handleAutoRetrieve:I,handleSourceSelection:P,handleCloseSourceSelection:B,resetToOriginal:D}=ss(x),z={both:{title:c("Confirm Deletion"),message:c("Are you sure to delete the selected book?"),handler:a},cloud:{title:c("Confirm Deletion"),message:c("Are you sure to delete the cloud backup of the selected book?"),handler:o},local:{title:c("Confirm Deletion"),message:c("Are you sure to delete the local copy of the selected book?"),handler:s}};(0,o2.useEffect)(()=>{(async()=>{let t=await u.getAppService();{let r=e.metadata||null;!r&&e.downloadedAt&&(r=await t.fetchBookDetails(e)),w(r),S(await t.getBookFileSize(e))}})()},[e]);let F=()=>{w(null),y(!1),b(null),r()},$=()=>{y(!0)},U=()=>{D(),y(!1)},H=()=>{E&&l&&(w({...E}),l(e,E),y(!1))},V=e=>{b(e)},q=async()=>{if(!p)return;let t=z[p];F(),t.handler&&t.handler(e)},W=()=>{b(null)},K=()=>V("both"),G=()=>V("cloud"),X=()=>V("local"),Z=async()=>{F(),n&&n(e,{redownload:!0,queued:!1})},Y=async()=>{F(),i&&i(e)},J=async()=>{m(!0),setTimeout(async()=>{let t=await d?.exportBook(e);m(!1),(0,sl.isWebAppPlatform)()||eR.dispatch("toast",{type:t?"info":"error",message:t?c("Book exported successfully."):c("Failed to export the book.")})},0)},Q=p?z[p]:null;return(0,o1.jsx)(o1.Fragment,{children:(0,o1.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,o1.jsx)(iG,{title:v?c("Edit Metadata"):c("Book Details"),isOpen:t,onClose:F,boxClassName:h(v?"sm:min-w-[600px] sm:max-w-[600px]":"sm:min-w-[480px] sm:max-w-[480px]","sm:h-auto sm:max-h-[90%]"),contentClassName:"!px-6 !py-4",children:(0,o1.jsx)("div",{className:"flex w-full select-text items-start justify-center",children:v&&x?(0,o1.jsx)(sQ,{book:e,metadata:E,fieldSources:k,lockedFields:N,fieldErrors:j,searchLoading:C,onFieldChange:R,onToggleFieldLock:T,onAutoRetrieve:I,onLockAll:O,onUnlockAll:L,onCancel:U,onReset:D,onSave:H}):(0,o1.jsx)(sA,{book:e,metadata:x,fileSize:_,onEdit:l?$:void 0,onDelete:a?K:void 0,onDeleteCloudBackup:o?G:void 0,onDeleteLocalCopy:s?X:void 0,onDownload:n?Z:void 0,onUpload:i?Y:void 0,onExport:J})})}),M&&(0,o1.jsx)(s3,{sources:A,isOpen:M,onSelect:P,onClose:B}),g&&(0,o1.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:(0,o1.jsx)(s5,{loading:!0})}),p&&Q&&(0,o1.jsx)("div",{className:h("fixed bottom-0 left-0 right-0 z-50 flex justify-center"),style:{paddingBottom:`${(f?.bottom||0)+16}px`},children:(0,o1.jsx)(sp,{title:Q.title,message:Q.message,onCancel:W,onConfirm:q})})]})})};var s9=p,s7=b,le=l,lt=S;let lr=(0,M.create)((e,t)=>({parallelViews:[],setParallel:t=>{e(e=>{let r,n=[...new Set(t.filter(e=>""!==e.trim()))];if(n.length<2)return e;let i=[...e.parallelViews],a=i.filter(e=>n.some(t=>e.has(t)));return 0===a.length?(r=new Set(n),i.push(r)):1===a.length?(r=a[0],n.forEach(e=>r.add(e))):(r=a[0],a.slice(1).forEach(e=>{e.forEach(e=>r.add(e));let t=i.indexOf(e);t>-1&&i.splice(t,1)}),n.forEach(e=>r.add(e))),console.log("Set parallel groups:",i),{parallelViews:i}})},unsetParallel:t=>{e(e=>{let r=[...new Set(t.filter(e=>""!==e.trim()))];if(0===r.length)return e;let n=[...e.parallelViews];return n.filter(e=>r.some(t=>e.has(t))).forEach(e=>{if(r.forEach(t=>e.delete(t)),e.size<=1){let t=n.indexOf(e);t>-1&&n.splice(t,1)}}),console.log("Unset parallel groups:",n),{parallelViews:n}})},areParallels(e,r){let{parallelViews:n}=t();return n.some(t=>t.has(e)&&t.has(r))},getParallels(e){let{parallelViews:r}=t();return r.find(t=>t.has(e))||null}})),ln=()=>{let e=(0,s7.useRouter)(),t=(0,s7.useSearchParams)(),{envConfig:r}=(0,le.useEnv)(),{bookKeys:n}=e_(),{setBookKeys:i,initViewState:a}=e_(),{sideBarBookKey:o,setSideBarBookKey:s}=ek(),[l,c]=(0,s9.useState)(!1),{setParallel:u}=lr();(0,s9.useEffect)(()=>{if(l){let r=n.map(e=>e.split("-")[0]);r&&oU(e,r,t?.toString()||"",{scroll:!1}),c(!1)}},[n,l]);let d=(e,t,l)=>{let d=`${e}-${(0,lt.uniqueId)()}`;a(r,e,d,t),n.includes(d)||i([...n,d]),l&&u([o,d]),s(d),c(!0)},f=e=>{i(n.filter(t=>t!==e)),c(!0)},h=e=>{let t=(n.findIndex(t=>t===e)+1)%n.length;return n[t]},p=e=>{d(e,o?.split("-")[0]!=e,!0)};return{bookKeys:n,appendBook:d,dismissBook:f,getNextBookKey:h,openParallelView:p}};var li=p,la=A,lo=x,ls=e.i(769818),ll=R,lc=p,lu=l,ld=A;let lf=e=>"left"===e?"right":"right"===e?"left":e,lh=(e,t)=>!!e&&!!t&&e.book.rendition?.layout==="pre-paginated"&&(t.zoomLevel>100||"fit-page"!==t.zoomMode),lp=(e,t)=>!!e&&!!t&&lh(e,t)&&e.isOverflowX(),lb=(e,t)=>!!e&&!!t&&lh(e,t)&&e.isOverflowY(),lg=(e,t,r,n="page",i=50)=>{if(!e||!t)return;let a=e.renderer;if("rtl"===e.book.dir&&(r=lf(r)),a.scrolled){let{size:i}=a,o=t.showHeader&&t.showBarsOnScroll,s=t.showFooter&&t.showBarsOnScroll,l=i-t.scrollingOverlap-44*!!o-44*!!s;return"section"!==n?"left"===r||"up"===r?e.prev(l):e.next(l):"left"===r||"up"===r?e.renderer.prevSection?.():e.renderer.nextSection?.()}if("pan"===n&&lh(e,t))if(lp(e,t)&&("left"===r||"right"===r))return e.pan("left"===r?-i:i,0);else if(lb(e,t)&&("up"===r||"down"===r))return e.pan(0,"up"===r?-i:i);else return"left"===r||"up"===r?e.prev():e.next();return"section"!==n?"left"===r||"up"===r?e.prev():e.next():"left"===r||"up"===r?e.renderer.prevSection?.():e.renderer.nextSection?.()},lm=(e,t,r)=>{let{appService:n}=(0,lu.useEnv)(),{getBookData:i}=ex(),{getViewSettings:a,getViewState:o}=e_(),{hoveredBookKey:s,setHoveredBookKey:l}=e_(),{acquireVolumeKeyInterception:c,releaseVolumeKeyInterception:u}=eO(),d=async c=>{let u=o(e),d=i(e);if(u?.inited&&d){if(c instanceof MessageEvent){if(c.data&&c.data.bookKey===e){let i=a(e);if("iframe-single-click"===c.data.type){let a=r.current;if(a){let r,{screenX:o}=c.data,u=a.getBoundingClientRect(),d=(r=(0,ld.isTauriAppPlatform)()?n?.isMobile?0:(await oM()).x:window.screenX)+u.left,f=d+u.width/2;if(!eR.dispatchSync("iframe-single-click")){let r=d+.375*u.width,n=d+.625*u.width;if(i.disableClick||o>=r&&o<=n)l(s?null:e);else{if(s)return void l(null);!i.disableClick&&o>=f?i.fullscreenClickArea?lg(t.current,i,"down"):i.swapClickArea?lg(t.current,i,"left"):lg(t.current,i,"right"):!i.disableClick&&o<f&&(i.fullscreenClickArea?lg(t.current,i,"down"):i.swapClickArea?lg(t.current,i,"right"):lg(t.current,i,"left"))}}}}else if("iframe-wheel"!==c.data.type||i.scrolled||lh(t.current,i))"iframe-mouseup"===c.data.type&&(3===c.data.button?t.current?.history.back():4===c.data.button&&t.current?.history.forward());else{let{deltaY:e}=c.data;e>0?t.current?.next(1):e<0&&t.current?.prev(1)}}}else if(c instanceof CustomEvent){let r=a(e);if("native-key-down"===c.type&&r?.volumeKeysToFlip){let{keyName:e}=c.detail;l(""),"VolumeUp"===e?lg(t.current,r,"up"):"VolumeDown"===e&&lg(t.current,r,"down")}else if("touch-swipe"===c.type&&d.isFixedLayout&&!lh(t.current,r)){let{deltaX:e,deltaY:n,deltaT:i}=c.detail,a=Math.abs(e/i);Math.abs(e)>Math.abs(n)&&Math.abs(e)>30&&a>.2&&(e>0?lg(t.current,r,"left"):lg(t.current,r,"right"))}}else if("click"===c.type){let{clientX:r}=c,n=window.innerWidth,i=.5*n,o=.5*n,s=a(e);r<i?lg(t.current,s,"left"):r>o&&lg(t.current,s,"right")}}},f=(r,n,o)=>{let s=t.current?.renderer,l=a(e),c=i(e);if(c.bookDoc?.rendition?.layout!=="pre-paginated"&&s&&l.scrolled&&l.continuousScroll){let e=()=>{s.start<=n&&n>o?setTimeout(()=>{t.current?.prev(s.start+1)},100):Math.ceil(s.end)-n>=s.viewSize&&n<-o&&setTimeout(()=>{t.current?.next(s.viewSize-Math.floor(s.end)+1)},100)};"mouse"===r?e():"touch"===r&&(s.size>=s.viewSize?e():s.addEventListener("relocate",()=>e(),{once:!0}))}};return(0,lc.useEffect)(()=>{if(!n?.isMobileApp)return;let t=a(e);return t?.volumeKeysToFlip?c():u(),eR.on("native-key-down",d),()=>{u(),eR.off("native-key-down",d)}},[]),{handlePageFlip:d,handleContinuousScroll:f}};var lv=p;let ly={onSwitchSideBar:["ctrl+Tab","opt+Tab","alt+Tab"],onToggleSideBar:["s"],onToggleNotebook:["n"],onShowSearchBar:["ctrl+f","cmd+f"],onToggleScrollMode:["shift+j"],onToggleSelectMode:["shift+s"],onToggleBookmark:["ctrl+d","cmd+d"],onToggleTTS:["t"],onHighlightSelection:["ctrl+h","cmd+h"],onUnderlineSelection:["ctrl+u","cmd+u"],onAnnotateSelection:["ctrl+n","cmd+n"],onSearchSelection:["ctrl+f","cmd+f"],onCopySelection:["ctrl+c","cmd+c"],onTranslateSelection:["ctrl+t","cmd+t"],onDictionarySelection:["ctrl+d","cmd+d"],onWikipediaSelection:["ctrl+w","cmd+w"],onReadAloudSelection:["ctrl+r","cmd+r"],onProofreadSelection:["ctrl+p","cmd+p"],onOpenFontLayoutSettings:["shift+f","ctrl+,","cmd+,"],onOpenBooks:["ctrl+o"],onReloadPage:["shift+r"],onToggleFullscreen:["F11"],onCloseWindow:["ctrl+w","cmd+w"],onQuitApp:["ctrl+q","cmd+q"],onGoLeft:["ArrowLeft","h","shift+ "],onGoRight:["ArrowRight","l"," "],onGoUp:["ArrowUp","k"],onGoDown:["ArrowDown","j"],onGoNext:["shift+j","shift+ArrowRight","shift+ArrowDown","PageDown"],onGoPrev:["shift+k","shift+ArrowLeft","shift+ArrowUp","PageUp"],onGoLeftSection:["opt+ArrowLeft","alt+ArrowLeft"],onGoRightSection:["opt+ArrowRight","alt+ArrowRight"],onGoPrevSection:["opt+ArrowUp","alt+ArrowUp"],onGoNextSection:["opt+ArrowDown","alt+ArrowDown"],onGoHalfPageDown:["shift+ArrowDown","d"],onGoHalfPageUp:["shift+ArrowUp","u"],onGoBack:["shift+ArrowLeft","shift+h","alt+ArrowLeft"],onGoForward:["shift+ArrowRight","shift+l","alt+ArrowRight"],onZoomIn:["ctrl+=","cmd+=","shift+="],onZoomOut:["ctrl+-","cmd+-","shift+-"],onResetZoom:["ctrl+0","cmd+0"],onSaveNote:["ctrl+Enter"],onEscape:["Escape"]},lx=()=>{if("undefined"==typeof localStorage)return ly;let e=JSON.parse(localStorage.getItem("customShortcuts")||"{}");return{...ly,...e}},lw=(e,t=[])=>{let[r,n]=(0,lv.useState)(lx);(0,lv.useEffect)(()=>{let e=()=>{n(lx())};return window.addEventListener("shortcutUpdate",e),()=>window.removeEventListener("shortcutUpdate",e)},[]);let i=e=>{let t=e.toLowerCase().split("+");return{ctrlKey:t.includes("ctrl"),altKey:t.includes("alt")||t.includes("opt"),metaKey:t.includes("meta")||t.includes("cmd"),shiftKey:t.includes("shift"),key:t.find(e=>!["ctrl","alt","opt","meta","cmd","shift"].includes(e))}},a=(e,t,r,n,a,o)=>{let s=i(e);return s.key===t.toLowerCase()&&s.ctrlKey===r&&s.altKey===n&&s.metaKey===a&&s.shiftKey===o},o=(t,n,i,o,s,l)=>{if("backspace"===t)return!0;for(let[c,u]of Object.entries(e)){let e=u,d=r[c];if(e&&d?.some(e=>a(e,t,n,i,o,s))&&e(l))return!0}return!1},s=e=>{let t=document.activeElement,r="INPUT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable,n="TEXTAREA"===t.tagName&&t.classList.contains("note-editor");if(!r||n){if(e instanceof KeyboardEvent){let{key:t,ctrlKey:r,altKey:i,metaKey:a,shiftKey:s}=e;if(n&&!("Enter"===t&&r||"Escape"==t))return;o(t.toLowerCase(),r,i,a,s,e)&&e.preventDefault()}else if(e instanceof MessageEvent&&e.data&&"iframe-keydown"===e.data.type){let{key:t,ctrlKey:r,altKey:n,metaKey:i,shiftKey:a}=e.data;o(t.toLowerCase(),r,n,i,a,e)}}};(0,lv.useEffect)(()=>(window.addEventListener("keydown",s),window.addEventListener("message",s),()=>{window.removeEventListener("keydown",s),window.removeEventListener("message",s)}),[r,...t])},l_=({sideBarBookKey:e,bookKeys:t})=>{let{getView:r,getViewState:n,getViewSettings:i,setViewSettings:a}=e_(),{toggleSideBar:o,setSideBarBookKey:s}=ek(),{setSettingsDialogOpen:l}=(0,lo.useSettingsStore)(),{getBookData:c}=ex(),{toggleNotebook:u}=eN(),{getNextBookKey:d}=ln(),f=i(e??""),h=(f?.defaultFontSize??16)*(f?.lineHeight??1.6)*3,p=()=>{let t=i(e??"");if(t&&e){t.scrolled=!t.scrolled,a(e,t);let n=t.scrolled?"scrolled":"paginated";r(e)?.renderer.setAttribute("flow",n)}},b=()=>{e&&s(d(e))},g=()=>{let t=i(e??"");lg(r(e),t,"left","pan",h)},m=()=>{let t=i(e??"");lg(r(e),t,"right","pan",h)},v=t=>{let n=r(e),a=i(e??"");n?.renderer.scrolled&&t instanceof MessageEvent||lg(n,a,"up","pan",h)},y=t=>{let n=r(e),a=i(e??"");n?.renderer.scrolled&&t instanceof MessageEvent||lg(n,a,"down","pan",h)},x=()=>{let t=i(e??"");lg(r(e),t,"up","section")},w=()=>{let t=i(e??"");lg(r(e),t,"down","section")},_=()=>{let t=i(e??"");lg(r(e),t,"left","section")},S=()=>{let t=i(e??"");lg(r(e),t,"right","section")},E=()=>{r(e)?.prev(h)},k=()=>{r(e)?.next(h)},N=()=>{r(e)?.history.back()},j=()=>{let t=r(e),n=i(e??"");t&&n&&n.scrolled&&t.next(t.renderer.size/2)},C=()=>{let t=r(e),n=i(e??"");t&&n&&n.scrolled&&t.prev(t.renderer.size/2)},M=()=>{r(e)?.history.forward()},A=()=>{window.location.reload()},R=async()=>{(0,la.isTauriAppPlatform)()&&await oI()},T=async()=>{(0,la.isTauriAppPlatform)()&&await oO()},O=async()=>{(0,la.isTauriAppPlatform)()&&await oP()},L=()=>{setTimeout(()=>{eR.dispatch("search-term",{term:null,bookKey:e})},100)},I=t=>{if(!e)return;let n=r(e),o=c(e),s=i(e);s.zoomLevel=t,a(e,s),n?.renderer.setStyles?.((0,ls.getStyles)(s)),o?.bookDoc?.rendition?.layout==="pre-paginated"&&n?.renderer.setAttribute("scale-factor",t)},P=(t=1)=>{e&&I(Math.min(i(e).zoomLevel+ll.ZOOM_STEP*t,ll.MAX_ZOOM_LEVEL))},B=(t=1)=>{e&&I(Math.max(i(e).zoomLevel-ll.ZOOM_STEP*t,ll.MIN_ZOOM_LEVEL))},D=()=>{P()},z=()=>{B()},F=e=>{P(e.detail?.factor||1)},$=e=>{B(e.detail?.factor||1)},U=()=>{e&&I(100)},H=()=>{if(!e)return;let t=e,r=n(t);eR.dispatch(r?.ttsEnabled?"tts-stop":"tts-speak",{bookKey:t})},V=()=>{e&&eR.dispatch("toggle-bookmark",{bookKey:e})};(0,li.useEffect)(()=>(eR.on("zoom-in",F),eR.on("zoom-out",$),eR.on("reset-zoom",U),()=>{eR.off("zoom-in",F),eR.off("zoom-out",$),eR.off("reset-zoom",U)}),[e]),lw({onSwitchSideBar:b,onToggleSideBar:o,onToggleNotebook:u,onToggleScrollMode:p,onToggleBookmark:V,onOpenFontLayoutSettings:()=>l(!0),onShowSearchBar:L,onToggleFullscreen:R,onToggleTTS:H,onReloadPage:A,onCloseWindow:T,onQuitApp:O,onGoLeft:g,onGoRight:m,onGoUp:v,onGoDown:y,onGoPrev:E,onGoNext:k,onGoHalfPageDown:j,onGoHalfPageUp:C,onGoPrevSection:x,onGoNextSection:w,onGoLeftSection:_,onGoRightSection:S,onGoBack:N,onGoForward:M,onZoomIn:D,onZoomOut:z,onResetZoom:U},[e,t])};var lS=a,lE=e.i(353678),lk=p,lN=x,lj=eg,lC=l,lM=y,lA=a;function lR(e){return nV({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M169 57v430h78V57h-78zM25 105v190h46V105H25zm158 23h18v320h-18V128zm128.725 7.69l-45.276 8.124 61.825 344.497 45.276-8.124-61.825-344.497zM89 153v270h62V153H89zm281.502 28.68l-27.594 11.773 5.494 12.877 27.594-11.773-5.494-12.877zm12.56 29.433l-27.597 11.772 5.494 12.877 27.593-11.772-5.492-12.877zm12.555 29.434l-27.594 11.77 99.674 233.628 27.594-11.773-99.673-233.625zM25 313v30h46v-30H25zm190 7h18v128h-18V320zM25 361v126h46V361H25zm64 80v46h62v-46H89z"},child:[]}]})(e)}function lT(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"15 18 9 12 15 6"},child:[]}]})(e)}function lO(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"18 15 12 9 6 15"},child:[]}]})(e)}function lL(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"},child:[]}]})(e)}function lI(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]}]})(e)}function lP(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]}]})(e)}function lB(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]}]})(e)}var lD=p,lz=l,lF=eZ;let l$=10,lU=22,lH=(0,M.create)((t,r)=>({appService:void 0,isTrafficLightVisible:!1,shouldShowTrafficLight:!1,trafficLightInFullscreen:!1,initializeTrafficLightStore:e=>{t({appService:e,isTrafficLightVisible:e.hasTrafficLight,shouldShowTrafficLight:e.hasTrafficLight})},setTrafficLightVisibility:async(r,n)=>{let{getCurrentWindow:i}=await e.A(590976),a=i(),o=await a.isFullscreen();t({isTrafficLightVisible:!o&&r,shouldShowTrafficLight:r,trafficLightInFullscreen:o}),(0,lF.invoke)("set_traffic_lights",{visible:r,x:n?.x??l$,y:n?.y??lU})},initializeTrafficLightListeners:async()=>{let{getCurrentWindow:n}=await e.A(590976),i=n(),a=await i.listen("will-enter-fullscreen",()=>{t({isTrafficLightVisible:!1,trafficLightInFullscreen:!0})}),o=await i.listen("will-exit-fullscreen",()=>{let{shouldShowTrafficLight:e}=r();t({isTrafficLightVisible:e,trafficLightInFullscreen:!1})});t({unlistenEnterFullScreen:a,unlistenExitFullScreen:o})},cleanupTrafficLightListeners:()=>{let{unlistenEnterFullScreen:e,unlistenExitFullScreen:n}=r();e&&e(),n&&n(),t({unlistenEnterFullScreen:void 0,unlistenExitFullScreen:void 0})}})),lV=()=>{let{appService:e}=(0,lz.useEnv)(),{isTrafficLightVisible:t,initializeTrafficLightStore:r,initializeTrafficLightListeners:n,setTrafficLightVisibility:i,cleanupTrafficLightListeners:a}=lH();return(0,lD.useEffect)(()=>{if(e?.hasTrafficLight)return r(e),n(),i(!0),()=>{a()}},[e?.hasTrafficLight]),{isTrafficLightVisible:t}};var lq=iB,lW=a,lK=p,lG=th,lX=b,lZ=l,lY=s,lJ=x,lQ=A,l0=D,l1=R,l2=x,l3=ls;let l4=async(e,t,r,n,i=!1,a=!0)=>{let{settings:o,isSettingsGlobal:s,setSettings:l,saveSettings:c}=l2.useSettingsStore.getState(),{bookKeys:u,getView:d,getViewState:f,getViewSettings:h,setViewSettings:p}=e_.getState(),{getConfig:b,saveConfig:g}=ex.getState(),m=async t=>{let i=h(t),s=f(t);if(t&&i&&i[r]!==n){if(i[r]=n,p(t,i),a){let e=d(t);e?.renderer.setStyles?.((0,l3.getStyles)(i))}let l=b(t);s?.isPrimary&&l&&await g(e,t,l,o)}};if(s&&!i){for(let e of(o.globalViewSettings[r]=n,l(o),u))await m(e);await c(e,o)}else t&&await m(t)},l6=async(e,t,r)=>{let{settings:n,setSettings:i,saveSettings:a}=l2.useSettingsStore.getState();n[t]!==r&&(n[t]=r,i(n),await a(e,n))};var l5=a,l8=p;let l9=({children:e,className:t,style:r,onCancel:n})=>{let i=(0,l8.useRef)(null);return sh({onCancel:n,elementRef:i}),(0,l8.useEffect)(()=>{setTimeout(()=>{if(i.current){let e=i.current.querySelector('[role="menuitem"]');e&&e.focus()}},200)},[]),(0,l5.jsx)("div",{ref:i,role:"none",className:h("menu-container max-h-[calc(100vh-96px)] overflow-y-auto border-0",t),style:r,children:e})},l7=({menuClassName:e,setIsDropdownOpen:t})=>{let r=eU(),n=(0,lX.useRouter)(),{envConfig:i,appService:a}=(0,lZ.useEnv)(),{user:o}=(0,lY.useAuth)(),{settings:s}=(0,lJ.useSettingsStore)(),{bookKeys:l,recreateViewer:c,getViewSettings:u,setViewSettings:d}=e_(),{getVisibleLibrary:f}=O(),{openParallelView:p}=ln(),{sideBarBookKey:b}=ek(),{parallelViews:g,setParallel:m,unsetParallel:v}=lr(),y=u(b),[x,w]=lK.default.useState(y?.sortedTOC||!1),_=e=>{p(e),t?.(!1)},S=()=>{window.location.reload(),t?.(!1)},E=()=>{ag(!0),t?.(!1)},k=()=>{window.open(l1.DOWNLOAD_READEST_URL,"_blank"),t?.(!1)},N=()=>{eR.dispatch("export-annotations",{bookKey:b}),t?.(!1)},j=()=>{if(w(e=>!e),t?.(!1),b){let e=u(b);e.sortedTOC=!x,d(b,e),c(i,b)}},C=()=>{m(l),t?.(!1)},M=()=>{v(l),t?.(!1)},A=()=>{aT(!0),t?.(!1)},R=()=>{on(!0),t?.(!1)},T=()=>{eR.dispatch("pull-kosync",{bookKey:b}),t?.(!1)},L=()=>{eR.dispatch("push-kosync",{bookKey:b}),t?.(!1)},I=()=>{let e=!s.discordRichPresenceEnabled;l6(i,"discordRichPresenceEnabled",e),t?.(!1),e&&!o&&oH(n)};return(0,lW.jsxs)(l9,{className:h("book-menu dropdown-content z-20 shadow-2xl",e),onCancel:()=>t?.(!1),children:[(0,lW.jsx)(sj,{label:r("Parallel Read"),buttonClass:l.length>1?"lg:tooltip lg:tooltip-bottom":"",tooltip:g.length>0?r("Disable"):l.length>1?r("Enable"):"",Icon:g.length>0&&l.length>1?il:void 0,onClick:g.length>0?M:l.length>1?C:void 0,children:(0,lW.jsx)("ul",{className:"max-h-60 overflow-y-auto",children:f().filter(e=>!l0.FIXED_LAYOUT_FORMATS.has(e.format)).filter(e=>!!e.downloadedAt).slice(0,20).map(e=>(0,lW.jsx)(sj,{Icon:(0,lW.jsx)(lG.default,{src:e.coverImageUrl,alt:e.title,width:56,height:80,className:"aspect-auto max-h-8 max-w-4 rounded-sm shadow-md",onError:e=>{e.target.style.display="none"}}),label:e.title,labelClass:"max-w-36",onClick:()=>_(e.hash)},e.hash))})}),l.length>1&&(g.length>0?(0,lW.jsx)(sj,{label:r("Exit Parallel Read"),onClick:M}):(0,lW.jsx)(sj,{label:r("Enter Parallel Read"),onClick:C})),(0,lW.jsx)("hr",{className:"border-base-200 my-1"}),(0,lW.jsx)(sj,{label:r("KOReader Sync"),onClick:A}),s.kosync.enabled&&(0,lW.jsxs)(lW.Fragment,{children:[(0,lW.jsx)(sj,{label:r("Push Progress"),onClick:L}),(0,lW.jsx)(sj,{label:r("Pull Progress"),onClick:T})]}),a?.isDesktopApp&&(0,lW.jsxs)(lW.Fragment,{children:[(0,lW.jsx)("hr",{className:"border-base-200 my-1"}),(0,lW.jsx)(sj,{label:r("Show on Discord"),tooltip:r("Display what I'm reading on Discord"),toggled:s.discordRichPresenceEnabled,onClick:I})]}),(0,lW.jsx)("hr",{className:"border-base-200 my-1"}),(0,lW.jsx)(sj,{label:r("Proofread"),onClick:R}),(0,lW.jsx)("hr",{className:"border-base-200 my-1"}),(0,lW.jsx)(sj,{label:r("Export Annotations"),onClick:N}),(0,lW.jsx)(sj,{label:r("Sort TOC by Page"),Icon:x?il:void 0,onClick:j}),(0,lW.jsx)(sj,{label:r("Reload Page"),shortcut:"Shift+R",onClick:S}),(0,lW.jsx)("hr",{className:"border-base-200 my-1"}),(0,lQ.isWebAppPlatform)()&&(0,lW.jsx)(sj,{label:r("Download Readest"),onClick:k}),(0,lW.jsx)(sj,{label:r("About Readest"),onClick:E})]})},ce=({isPinned:e,isSearchBarVisible:t,onGoToLibrary:r,onClose:n,onTogglePin:i,onToggleSearchBar:a})=>{let o=eU(),{isTrafficLightVisible:s}=lV(),l=(0,lq.useResponsiveSize)(14),c=(0,lq.useResponsiveSize)(18),u=(0,lq.useResponsiveSize)(22);return(0,lA.jsxs)("div",{className:h("sidebar-header flex h-11 items-center justify-between pe-2",s?"ps-1.5 sm:ps-20":"ps-1.5"),dir:"ltr",children:[(0,lA.jsxs)("div",{className:"flex items-center gap-x-8",children:[(0,lA.jsx)("button",{title:o("Close"),onClick:n,className:"btn btn-ghost btn-circle flex h-6 min-h-6 w-6 hover:bg-transparent sm:hidden",children:(0,lA.jsx)(io,{size:u})}),(0,lA.jsx)("button",{title:o("Go to Library"),className:"btn btn-ghost hidden h-8 min-h-8 w-8 p-0 sm:flex",onClick:r,children:(0,lA.jsx)(lR,{className:"fill-base-content"})})]}),(0,lA.jsxs)("div",{className:"flex min-w-24 max-w-32 items-center justify-between sm:size-[70%]",children:[(0,lA.jsx)("button",{title:o(t?"Hide Search Bar":"Show Search Bar"),onClick:a,className:h("btn btn-ghost left-0 h-8 min-h-8 w-8 p-0",t?"bg-base-300":""),children:(0,lA.jsx)(lB,{size:c,className:"text-base-content"})}),(0,lA.jsx)(sM,{label:o("Book Menu"),className:h(window.innerWidth<640&&"dropdown-end","dropdown-bottom flex justify-center"),menuClassName:window.innerWidth<640?"no-triangle mt-1":"dropdown-center mt-1",buttonClassName:"btn btn-ghost h-8 min-h-8 w-8 p-0",toggleButton:(0,lA.jsx)(iT,{className:"fill-base-content"}),children:(0,lA.jsx)(l7,{})}),(0,lA.jsx)("div",{className:"right-0 hidden h-8 w-8 items-center justify-center sm:flex",children:(0,lA.jsx)("button",{title:o(e?"Unpin Sidebar":"Pin Sidebar"),onClick:i,className:h("sidebar-pin-btn btn btn-ghost btn-circle hidden h-6 min-h-6 w-6 sm:flex",e?"bg-base-300":"bg-base-300/65"),children:e?(0,lA.jsx)(ir,{size:l}):(0,lA.jsx)(i_,{size:l})})})]})]})};var ct=a,cr=p,cn=y,ci=p;let ca=(e,t)=>{let r,{o:n,i:i,u:a}=e,o=n,s=(e,t)=>{let n=o,s=e,l=t||(i?!i(n,s):n!==s);return(l||a)&&(o=s,r=n),[o,l,r]},l=e=>s(t(o,r),e);return[t?l:s,e=>[o,!!e,r]]},co="undefined"!=typeof window&&"undefined"!=typeof HTMLElement&&window.document?window:{},cs=Math.max,cl=Math.min,cc=Math.round,cu=Math.abs,cd=Math.sign,cf=co.cancelAnimationFrame,ch=co.requestAnimationFrame,cp=co.setTimeout,cb=co.clearTimeout,cg=e=>void 0!==co[e]?co[e]:void 0,cm=cg("MutationObserver"),cv=cg("IntersectionObserver"),cy=cg("ResizeObserver"),cx=cg("ScrollTimeline"),cw=e=>void 0===e,c_=e=>null===e,cS=e=>"number"==typeof e,cE=e=>"string"==typeof e,ck=e=>"boolean"==typeof e,cN=e=>"function"==typeof e,cj=e=>Array.isArray(e),cC=e=>"object"==typeof e&&!cj(e)&&!c_(e),cM=e=>{let t=!!e&&e.length,r=cS(t)&&t>-1&&t%1==0;return!(!cj(e)&&(cN(e)||!r))&&(!(t>0&&cC(e))||t-1 in e)},cA=e=>!!e&&e.constructor===Object,cR=e=>e instanceof HTMLElement,cT=e=>e instanceof Element;function cO(e,t){if(cM(e))for(let r=0;r<e.length&&!1!==t(e[r],r,e);r++);else e&&cO(Object.keys(e),r=>t(e[r],r,e));return e}let cL=(e,t)=>e.indexOf(t)>=0,cI=(e,t)=>e.concat(t),cP=(e,t,r)=>(!cE(t)&&cM(t)?Array.prototype.push.apply(e,t):e.push(t),e),cB=e=>Array.from(e||[]),cD=e=>cj(e)?e:!cE(e)&&cM(e)?cB(e):[e],cz=e=>!!e&&!e.length,cF=e=>cB(new Set(e)),c$=(e,t,r)=>{cO(e,e=>!e||e.apply(void 0,t||[])),r||(e.length=0)},cU="paddingTop",cH="paddingRight",cV="paddingLeft",cq="paddingBottom",cW="marginLeft",cK="marginRight",cG="marginBottom",cX="overflowX",cZ="overflowY",cY="width",cJ="height",cQ="visible",c0="hidden",c1="scroll",c2=e=>{let t=String(e||"");return t?t[0].toUpperCase()+t.slice(1):""},c3=(e,t,r,n)=>{if(e&&t){let n=!0;return cO(r,r=>{e[r]!==t[r]&&(n=!1)}),n}return!1},c4=(e,t)=>c3(e,t,["w","h"]),c6=(e,t)=>c3(e,t,["x","y"]),c5=(e,t)=>c3(e,t,["t","r","b","l"]),c8=(e,...t)=>e.bind(0,...t),c9=e=>{let t,r=e?cp:ch,n=e?cb:cf;return[i=>{n(t),t=r(()=>i(),cN(e)?e():e)},()=>n(t)]},c7=e=>{let t=cN(e)?e():e;if(cS(t)){let e=t?cp:ch,r=t?cb:cf;return n=>{let i=e(()=>n(),t);return()=>{r(i)}}}return t&&t._},ue=(e,t)=>{let r,n,i,a,o,{p:s,v:l,S:c,m:u}=t||{},d=function(t){n&&n(),r&&r(),o=n=r=i=void 0,e.apply(this,t)},f=e=>u&&i?u(i,e):e,h=()=>{n&&d(f(a)||a)},p=function(){let e=cB(arguments),t=c7(s);if(t){let s=c7(l),u=f(e)||e,p=d.bind(0,u);n&&n(),c&&!o?(p(),o=!0,n=t(()=>o=void 0)):(n=t(p),s&&!r&&(r=s(h))),i=a=u}else d(e)};return p.O=h,p},ut=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),ur=e=>e?Object.keys(e):[],un=(e,t,r,n,i,a,o)=>{let s=[t,r,n,i,a,o];return("object"!=typeof e||c_(e))&&!cN(e)&&(e={}),cO(s,t=>{cO(t,(r,n)=>{let i=t[n];if(e===i)return!0;let a=cj(i);if(i&&cA(i)){let t=e[n],r=t;a&&!cj(t)?r=[]:a||cA(t)||(r={}),e[n]=un(r,i)}else e[n]=a?i.slice():i})}),e},ui=(e,t)=>cO(un({},e),(e,t,r)=>{void 0===e?delete r[t]:e&&cA(e)&&(r[t]=ui(e))}),ua=e=>!ur(e).length,uo=()=>{},us=(e,t,r)=>cs(e,cl(t,r)),ul=e=>cF((cj(e)?e:(e||"").split(" ")).filter(e=>e)),uc=(e,t)=>e&&e.getAttribute(t),uu=(e,t)=>e&&e.hasAttribute(t),ud=(e,t,r)=>{cO(ul(t),t=>{e&&e.setAttribute(t,String(r||""))})},uf=(e,t)=>{cO(ul(t),t=>e&&e.removeAttribute(t))},uh=(e,t)=>{let r=ul(uc(e,t)),n=c8(ud,e,t),i=(e,t)=>{let n=new Set(r);return cO(ul(e),e=>{n[t](e)}),cB(n).join(" ")};return{$:e=>n(i(e,"delete")),C:e=>n(i(e,"add")),H:e=>{let t=ul(e);return t.reduce((e,t)=>e&&r.includes(t),t.length>0)}}},up=(e,t,r)=>(uh(e,t).$(r),c8(ub,e,t,r)),ub=(e,t,r)=>(uh(e,t).C(r),c8(up,e,t,r)),ug=(e,t,r,n)=>(n?ub:up)(e,t,r),um=(e,t,r)=>uh(e,t).H(r),uv=e=>uh(e,"class"),uy=(e,t)=>{uv(e).$(t)},ux=(e,t)=>(uv(e).C(t),c8(uy,e,t)),uw=(e,t)=>{let r=t?cT(t)&&t:document;return r?cB(r.querySelectorAll(e)):[]},u_=(e,t)=>{let r=t?cT(t)&&t:document;return r&&r.querySelector(e)},uS=(e,t)=>cT(e)&&e.matches(t),uE=e=>uS(e,"body"),uk=e=>e?cB(e.childNodes):[],uN=e=>e&&e.parentElement,uj=(e,t)=>cT(e)&&e.closest(t),uC=e=>document.activeElement,uM=(e,t,r)=>{let n=uj(e,t),i=e&&u_(r,n),a=uj(i,t)===n;return!!n&&!!i&&(n===e||i===e||a&&uj(uj(e,r),t)!==n)},uA=e=>{cO(cD(e),e=>{let t=uN(e);e&&t&&t.removeChild(e)})},uR=(e,t)=>c8(uA,e&&t&&cO(cD(t),t=>{t&&e.appendChild(t)})),uT=()=>r,uO=e=>{r=e},uL=e=>{let t=document.createElement("div");return ud(t,"class",e),t},uI=e=>{let t=uL(),r=uT(),n=e.trim();return t.innerHTML=r?r.createHTML(n):n,cO(uk(t),e=>uA(e))},uP=(e,t)=>e.getPropertyValue(t)||e[t]||"",uB=e=>{let t=e||0;return isFinite(t)?t:0},uD=e=>uB(parseFloat(e||"")),uz=e=>Math.round(1e4*e)/1e4,uF=e=>`${uz(uB(e))}px`;function u$(e,t){e&&t&&cO(t,(t,r)=>{try{let n=e.style,i=c_(t)||ck(t)?"":cS(t)?uF(t):t;0===r.indexOf("--")?n.setProperty(r,i):n[r]=i}catch(e){}})}function uU(e,t,r){let n=cE(t),i=n?"":{};if(e){let a=co.getComputedStyle(e,r)||e.style;i=n?uP(a,t):cB(t).reduce((e,t)=>(e[t]=uP(a,t),e),i)}return i}let uH=(e,t,r)=>{let n=t?`${t}-`:"",i=r?`-${r}`:"",a=`${n}top${i}`,o=`${n}right${i}`,s=`${n}bottom${i}`,l=`${n}left${i}`,c=uU(e,[a,o,s,l]);return{t:uD(c[a]),r:uD(c[o]),b:uD(c[s]),l:uD(c[l])}},uV=(e,t)=>`translate${cC(e)?`(${e.x},${e.y})`:`${t?"X":"Y"}(${e})`}`,uq=e=>!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length),uW={w:0,h:0},uK=(e,t)=>t?{w:t[`${e}Width`],h:t[`${e}Height`]}:uW,uG=e=>uK("inner",e||co),uX=c8(uK,"offset"),uZ=c8(uK,"client"),uY=c8(uK,"scroll"),uJ=e=>{let t=parseFloat(uU(e,cY))||0,r=parseFloat(uU(e,cJ))||0;return{w:t-cc(t),h:r-cc(r)}},uQ=e=>e.getBoundingClientRect(),u0=e=>!!e&&uq(e),u1=e=>!!(e&&(e[cJ]||e[cY])),u2=(e,t)=>{let r=u1(e);return!u1(t)&&r},u3=(e,t,r,n)=>{cO(ul(t),t=>{e&&e.removeEventListener(t,r,n)})},u4=(e,t,r,n)=>{var i;let a=null==(i=n&&n.T)||i,o=n&&n.I||!1,s=n&&n.A||!1,l={passive:a,capture:o};return c8(c$,ul(t).map(t=>{let n=s?i=>{u3(e,t,n,o),r&&r(i)}:r;return e&&e.addEventListener(t,n,l),c8(u3,e,t,n,o)}))},u6=e=>e.stopPropagation(),u5=e=>e.preventDefault(),u8=e=>u6(e)||u5(e),u9=(e,t)=>{let{x:r,y:n}=cS(t)?{x:t,y:t}:t||{};cS(r)&&(e.scrollLeft=r),cS(n)&&(e.scrollTop=n)},u7=e=>({x:e.scrollLeft,y:e.scrollTop}),de=()=>({D:{x:0,y:0},M:{x:0,y:0}}),dt=(e,t)=>{let{D:r,M:n}=e,{w:i,h:a}=t,o=(e,t,r)=>{let n=cd(e)*r,i=cd(t)*r;if(n===i){let r=cu(e),a=cu(t);i=r>a?0:i,n=r<a?0:n}return[(n=n===i?0:n)+0,i+0]},[s,l]=o(r.x,n.x,i),[c,u]=o(r.y,n.y,a);return{D:{x:s,y:c},M:{x:l,y:u}}},dr=({D:e,M:t})=>{let r=(e,t)=>0===e&&e<=t;return{x:r(e.x,t.x),y:r(e.y,t.y)}},dn=({D:e,M:t},r)=>{let n=(e,t,r)=>us(0,1,(e-r)/(e-t)||0);return{x:n(e.x,t.x,r.x),y:n(e.y,t.y,r.y)}},di=e=>{e&&e.focus&&e.focus({preventScroll:!0})},da=(e,t)=>{cO(cD(t),e)},ds=e=>{let t=new Map,r=(e,r)=>{if(e){let n=t.get(e);da(e=>{n&&n[e?"delete":"clear"](e)},r)}else t.forEach(e=>{e.clear()}),t.clear()},n=(e,i)=>{if(cE(e)){let n=t.get(e)||new Set;return t.set(e,n),da(e=>{cN(e)&&n.add(e)},i),c8(r,e,i)}ck(i)&&i&&r();let a=ur(e),o=[];return cO(a,t=>{let r=e[t];r&&cP(o,n(t,r))}),c8(c$,o)},i=(e,r)=>{cO(cB(t.get(e)),e=>{r&&!cz(r)?e.apply(0,r):e()})};return n(e||{}),[n,r,i]},dl={},dc={},du=e=>{cO(e,e=>cO(e,(t,r)=>{dl[r]=e[r]}))},dd=(e,t,r)=>ur(e).map(n=>{let{static:i,instance:a}=e[n],[o,s,l]=r||[],c=r?a:i;if(c){let e=r?c(o,s,t):c(t);return(l||dc)[n]=e}}),df=e=>dc[e],dh="__osOptionsValidationPlugin",dp="data-overlayscrollbars",db="os-environment",dg=`${db}-scrollbar-hidden`,dm=`${dp}-initialize`,dv="noClipping",dy=`${dp}-body`,dx=dp,dw="host",d_=`${dp}-viewport`,dS=cX,dE=cZ,dk="arrange",dN="measuring",dj="scrolling",dC="scrollbarHidden",dM="noContent",dA=`${dp}-padding`,dR=`${dp}-content`,dT="os-size-observer",dO=`${dT}-appear`,dL=`${dT}-listener`,dI="os-trinsic-observer",dP="os-theme-none",dB="os-scrollbar",dD=`${dB}-rtl`,dz=`${dB}-horizontal`,dF=`${dB}-vertical`,d$=`${dB}-track`,dU=`${dB}-handle`,dH=`${dB}-visible`,dV=`${dB}-cornerless`,dq=`${dB}-interaction`,dW=`${dB}-unusable`,dK=`${dB}-auto-hide`,dG=`${dK}-hidden`,dX=`${dB}-wheel`,dZ=`${d$}-interactive`,dY=`${dU}-interactive`,dJ="__osSizeObserverPlugin",dQ=(e,t)=>{let{k:r}=t,[n,i]=e("showNativeOverlaidScrollbars");return[n&&r.x&&r.y,i]},d0=e=>0===e.indexOf(cQ),d1=e=>e.replace(`${cQ}-`,""),d2=(e,t)=>{if("auto"===e)return t?c1:c0;let r=e||c0;return[c0,c1,cQ].includes(r)?r:c0},d3=(e,t)=>{let{overflowX:r,overflowY:n}=uU(e,[cX,cZ]);return{x:d2(r,t.x),y:d2(n,t.y)}},d4="__osScrollbarsHidingPlugin",d6="__osClickScrollPlugin",d5=e=>JSON.stringify(e,(e,t)=>{if(cN(t))throw 0;return t}),d8=(e,t)=>e?`${t}`.split(".").reduce((e,t)=>e&&ut(e,t)?e[t]:void 0,e):void 0,d9={paddingAbsolute:!1,showNativeOverlaidScrollbars:!1,update:{elementEvents:[["img","load"]],debounce:[0,33],attributes:null,ignoreMutation:null},overflow:{x:"scroll",y:"scroll"},scrollbars:{theme:"os-theme-dark",visibility:"auto",autoHide:"never",autoHideDelay:1300,autoHideSuspend:!1,dragScroll:!0,clickScroll:!1,pointers:["mouse","touch","pen"]}},d7=(e,t)=>{let r={};return cO(cI(ur(t),ur(e)),n=>{let i=e[n],a=t[n];if(cC(i)&&cC(a))un(r[n]={},d7(i,a)),ua(r[n])&&delete r[n];else if(ut(t,n)&&a!==i){let e=!0;if(cj(i)||cj(a))try{d5(i)===d5(a)&&(e=!1)}catch(e){}e&&(r[n]=a)}}),r},fe=(e,t,r)=>n=>[d8(e,n),r||void 0!==d8(t,n)],ft=()=>n,fr=e=>{n=e},fn=()=>{let e=(e,t,r)=>{uR(document.body,e),uR(document.body,e);let n=uZ(e),i=uX(e),a=uJ(t);return r&&uA(e),{x:i.h-n.h+a.h,y:i.w-n.w+a.w}},t=e=>{let t=!1,r=ux(e,dg);try{t="none"===uU(e,"scrollbar-width")||"none"===uU(e,"display","::-webkit-scrollbar")}catch(e){}return r(),t},r=`.${db}{scroll-behavior:auto!important;position:fixed;opacity:0;visibility:hidden;overflow:scroll;height:200px;width:200px;z-index:-1}.${db} div{width:200%;height:200%;margin:10px 0}.${dg}{scrollbar-width:none!important}.${dg}::-webkit-scrollbar,.${dg}::-webkit-scrollbar-corner{appearance:none!important;display:none!important;width:0!important;height:0!important}`,n=uI(`<div class="${db}"><div></div><style>${r}</style></div>`)[0],i=n.firstChild,a=n.lastChild,o=ft();o&&(a.nonce=o);let[s,,l]=ds(),[c,u]=ca({o:e(n,i),i:c6},c8(e,n,i,!0)),[d]=u(),f=t(n),h={x:0===d.x,y:0===d.y},p={elements:{host:null,padding:!f,viewport:e=>f&&uE(e)&&e,content:!1},scrollbars:{slot:!0},cancel:{nativeScrollbarsOverlaid:!1,body:null}},b=un({},d9),g=c8(un,{},b),m=c8(un,{},p),v={P:d,k:h,U:f,J:!!cx,G:c8(s,"r"),K:m,Z:e=>un(p,e)&&m(),tt:g,nt:e=>un(b,e)&&g(),ot:un({},p),st:un({},b)};if(uf(n,"style"),uA(n),u4(co,"resize",()=>{l("r",[])}),cN(co.matchMedia)&&!f&&(!h.x||!h.y)){let e=t=>{u4(co.matchMedia(`(resolution: ${co.devicePixelRatio}dppx)`),"change",()=>{t(),e(t)},{A:!0})};e(()=>{let[e,t]=c();un(v.P,e),l("r",[t])})}return v},fi=()=>(i||(i=fn()),i),fa=(e,t,r)=>{let n=!1,i=!!r&&new WeakMap,a=()=>{n=!0},o=a=>{i&&r&&cO(r.map(t=>{let[r,n]=t||[];return[n&&r?(a||uw)(r,e):[],n]}),r=>cO(r[0],a=>{let o=r[1],s=i.get(a)||[];if(e.contains(a)&&o){let e=u4(a,o,r=>{n?(e(),i.delete(a)):t(r)});i.set(a,cP(s,e))}else c$(s),i.delete(a)}))};return o(),[a,o]},fo=(e,t,r,n)=>{let i=!1,{et:a,ct:o,rt:s,it:l,lt:c,ut:u}=n||{},d=ue(()=>i&&r(!0),{p:33,v:99}),[f,h]=fa(e,d,s),p=o||[],b=cI(a||[],p),g=(i,a)=>{if(!cz(a)){let o=c||uo,s=u||uo,d=[],f=[],b=!1,g=!1;if(cO(a,r=>{let{attributeName:i,target:a,type:c,oldValue:u,addedNodes:h,removedNodes:m}=r,v="attributes"===c,y="childList"===c,x=e===a,w=v&&i,_=w&&uc(a,i||""),S=cE(_)?_:null,E=w&&u!==S,k=cL(p,i)&&E;if(t&&(y||!x)){let t=v&&E,c=t&&l&&uS(a,l),f=(c?!o(a,i,u,S):!v||t)&&!s(r,!!c,e,n);cO(h,e=>cP(d,e)),cO(m,e=>cP(d,e)),g=g||f}!t&&x&&E&&!o(a,i,u,S)&&(cP(f,i),b=b||k)}),h(e=>cF(d).reduce((t,r)=>(cP(t,uw(e,r)),uS(r,e)?cP(t,r):t),[])),t)return!i&&g&&r(!1),[!1];if(!cz(f)||b){let e=[cF(f),b];return i||r.apply(0,e),e}}},m=new cm(c8(g,!1));return[()=>(m.observe(e,{attributes:!0,attributeOldValue:!0,attributeFilter:b,subtree:t,childList:t,characterData:t}),i=!0,()=>{i&&(f(),m.disconnect(),i=!1)}),()=>{if(i)return d.O(),g(!0,m.takeRecords())}]},fs=null,fl=(e,t,r)=>{let{ft:n}=r||{},i=df(dJ),[a]=ca({o:!1,u:!0});return()=>{let r=[],o=uI(`<div class="${dT}"><div class="${dL}"></div></div>`)[0],s=o.firstChild,l=e=>{let r=cj(e)&&!cz(e),n=!1,i=!1;if(r){let[t,,r]=a(e[0].contentRect),o=u1(t);n=!(i=u2(t,r))&&!o}else i=!0===e;n||t({_t:!0,ft:i})};if(cy){if(!ck(fs)){let t=new cy(uo);t.observe(e,{get box(){fs=!0}}),fs=fs||!1,t.disconnect()}let t=ue(l,{p:0,v:0}),n=e=>t(e),i=new cy(n);if(i.observe(fs?e:s),cP(r,[()=>{i.disconnect()},!fs&&uR(e,o)]),fs){let t=new cy(n);t.observe(e,{box:"border-box"}),cP(r,()=>t.disconnect())}}else{if(!i)return uo;let[t,a]=i(s,l,n);cP(r,cI([ux(o,dO),u4(o,"animationstart",t),uR(e,o)],a))}return c8(c$,r)}},fc=(e,t)=>{let r,n=e=>0===e.h||e.isIntersecting||e.intersectionRatio>0,i=uL(dI),[a]=ca({o:!1}),o=(e,r)=>{if(e){let i=a(n(e)),[,o]=i;return o&&!r&&t(i)&&[i]}},s=(e,t)=>o(t.pop(),e);return[()=>{let t=[];if(cv)(r=new cv(c8(s,!1),{root:e})).observe(i),cP(t,()=>{r.disconnect()});else{let e=()=>{o(uX(i))};cP(t,fl(i,e)()),e()}return c8(c$,cP(t,uR(e,i)))},()=>r&&s(!0,r.takeRecords())]},fu=(e,t,r,n)=>{let i,a,o,s,l,c,u=`[${dx}]`,d=`[${d_}]`,f=["id","class","style","open","wrap","cols","rows"],{dt:h,vt:p,L:b,gt:g,ht:m,V:v,bt:y,wt:x,yt:w,St:_}=e,S=e=>"rtl"===uU(e,"direction"),E={Ot:!1,B:S(h)},k=fi(),N=df(d4),[j]=ca({i:c4,o:{w:0,h:0}},()=>{let n=N&&N.R(e,t,E,k,r).Y,i=!(y&&v)&&um(p,dx,dv),a=!v&&x(dk),o=a&&u7(g),s=o&&_(),l=w(dN,i),c=a&&n&&n(),u=uY(b),d=uJ(b);return c&&c(),u9(g,o),s&&s(),i&&l(),{w:u.w+d.w,h:u.h+d.h}}),C=ue(n,{p:()=>i,v:()=>a,m(e,t){let[r]=e,[n]=t;return[cI(ur(r),ur(n)).reduce((e,t)=>(e[t]=r[t]||n[t],e),{})]}}),M=e=>{let t=S(h);un(e,{$t:c!==t}),un(E,{B:t}),c=t},A=(e,t)=>{let[r,i]=e,a={Ct:i};return un(E,{Ot:r}),t||n(a),a},R=({_t:e,ft:t})=>{let r=!(e&&!t)&&k.U?C:n,i={_t:e||t,ft:t};M(i),r(i)},T=(e,t)=>{let[,r]=j(),i={xt:r};M(i);let a=e?n:C;return r&&!t&&a(i),i},O=(e,t,r)=>{let n={Ht:t};return M(n),t&&!r&&C(n),n},[L,I]=m?fc(p,A):[],P=!v&&fl(p,R,{ft:!0}),[B,D]=fo(p,!1,O,{ct:f,et:f}),z=v&&cy&&new cy(e=>{let t=e[e.length-1].contentRect;R({_t:!0,ft:u2(t,l)}),l=t}),F=ue(()=>{let[,e]=j();n({xt:e})},{p:222,S:!0});return[()=>{z&&z.observe(p);let e=P&&P(),t=L&&L(),r=B(),n=k.G(e=>{e?C({Et:e}):F()});return()=>{z&&z.disconnect(),e&&e(),t&&t(),s&&s(),r(),n()}},({zt:e,Tt:t,It:r})=>{let n={},[l]=e("update.ignoreMutation"),[c,h]=e("update.attributes"),[p,g]=e("update.elementEvents"),[y,x]=e("update.debounce"),w=t||r,_=e=>cN(l)&&l(e);if(g||h){o&&o(),s&&s();let[e,t]=fo(m||b,!0,T,{et:cI(f,c||[]),rt:p,it:u,ut:(e,t)=>{let{target:r,attributeName:n}=e;return!t&&!!n&&!v&&uM(r,u,d)||!!uj(r,`.${dB}`)||!!_(e)}});s=e(),o=t}if(x)if(C.O(),cj(y)){let e=y[0],t=y[1];i=cS(e)&&e,a=cS(t)&&t}else i=!!cS(y)&&y,a=!1;if(w){let e=D(),t=I&&I(),r=o&&o();e&&un(n,O(e[0],e[1],w)),t&&un(n,A(t[0],w)),r&&un(n,T(r[0],w))}return M(n),n},E]},fd=(e,t)=>cN(t)?t.apply(0,e):t,ff=(e,t,r,n)=>fd(e,cw(n)?r:n)||t.apply(0,e),fh=(e,t,r,n)=>{let i=fd(e,cw(n)?r:n);return!!i&&(cR(i)?i:t.apply(0,e))},fp=(e,t)=>{let{nativeScrollbarsOverlaid:r,body:n}=t||{},{k:i,U:a,K:o}=fi(),{nativeScrollbarsOverlaid:s,body:l}=o().cancel,c=null!=r?r:s,u=cw(n)?l:n,d=(i.x||i.y)&&c,f=e&&(c_(u)?!a:u);return!!d||!!f},fb=(e,t,r,n)=>{let i="--os-viewport-percent",a="--os-scroll-percent",o="--os-scroll-direction",{K:s}=fi(),{scrollbars:l}=s(),{slot:c}=l,{dt:u,vt:d,L:f,At:h,gt:p,bt:b,V:g}=t,{scrollbars:m}=h?{}:e,{slot:v}=m||{},y=[],x=[],w=[],_=fh([u,d,f],()=>g&&b?u:d,c,v),S=e=>{if(cx){let t=null,n=[],i=new cx({source:p,axis:e}),a=()=>{t&&t.cancel(),t=null};return{kt:o=>{let{Dt:s}=r,l=dr(s)[e],c="x"===e,u=[uV(0,c),uV(`calc(100cq${c?"w":"h"} + -100%)`,c)],d=l?u:u.reverse();return n[0]===d[0]&&n[1]===d[1]||(a(),n=d,t=o.Mt.animate({clear:["left"],transform:d},{timeline:i})),a}}}},E={x:S("x"),y:S("y")},k=()=>{let{Rt:e,Vt:t}=r,n=(e,t)=>us(0,1,e/(e+t)||0);return{x:n(t.x,e.x),y:n(t.y,e.y)}},N=(e,t,r)=>{let n=r?ux:uy;cO(e,e=>{n(e.Lt,t)})},j=(e,t)=>{cO(e,e=>{let[r,n]=t(e);u$(r,n)})},C=(e,t,r)=>{let n=ck(r),i=!n||r,a=!n||!r;i&&N(x,e,t),a&&N(w,e,t)},M=()=>{let e=k(),t=e=>t=>[t.Lt,{[i]:uz(e)+""}];j(x,t(e.x)),j(w,t(e.y))},A=()=>{if(!cx){let{Dt:e}=r,t=dn(e,u7(p)),n=e=>t=>[t.Lt,{[a]:uz(e)+""}];j(x,n(t.x)),j(w,n(t.y))}},R=()=>{let{Dt:e}=r,t=dr(e),n=e=>t=>[t.Lt,{[o]:e?"0":"1"}];j(x,n(t.x)),j(w,n(t.y)),cx&&(x.forEach(E.x.kt),w.forEach(E.y.kt))},T=()=>{if(g&&!b){let{Rt:e,Dt:t}=r,n=dr(t),i=dn(t,u7(p)),a=t=>{let{Lt:r}=t,a=uN(r)===f&&r,o=(e,t,r)=>{let n=t*e;return uF(r?n:-n)};return[a,a&&{transform:uV({x:o(i.x,e.x,n.x),y:o(i.y,e.y,n.y)})}]};j(x,a),j(w,a)}},O=e=>{let t=e?"x":"y",r=e?dz:dF,i=uL(`${dB} ${r}`),a=uL(d$),o=uL(dU),s={Lt:i,Ut:a,Mt:o},l=E[t];return cP(e?x:w,s),cP(y,[uR(i,a),uR(a,o),c8(uA,i),l&&l.kt(s),n(s,C,e)]),s},L=c8(O,!0),I=c8(O,!1),P=()=>(uR(_,x[0].Lt),uR(_,w[0].Lt),c8(c$,y));return L(),I(),[{Pt:M,Nt:A,qt:R,Bt:T,Ft:C,jt:{Xt:x,Yt:L,Wt:c8(j,x)},Jt:{Xt:w,Yt:I,Wt:c8(j,w)}},P]},fg=(e,t,r,n)=>(i,a,o)=>{let{vt:s,L:l,V:c,gt:u,Gt:d,St:f}=t,{Lt:h,Ut:p,Mt:b}=i,[g,m]=c9(333),[v,y]=c9(444),x=e=>{cN(u.scrollBy)&&u.scrollBy({behavior:"smooth",left:e.x,top:e.y})},w=()=>{let t="pointerup pointercancel lostpointercapture",n=`client${o?"X":"Y"}`,i=o?cY:cJ,a=o?"left":"top",s=o?"w":"h",l=o?"x":"y",c=(e,t)=>n=>{let{Rt:i}=r,a=t*n/(uX(p)[s]-uX(b)[s])*i[l];u9(u,{[l]:e+a})},h=[];return u4(p,"pointerdown",r=>{let o=uj(r.target,`.${dU}`)===b,g=o?b:p,m=e.scrollbars,w=m[o?"dragScroll":"clickScroll"],{button:_,isPrimary:S,pointerType:E}=r,{pointers:k}=m;if(0===_&&S&&w&&(k||[]).includes(E)){c$(h),y();let e=!o&&(r.shiftKey||"instant"===w),m=c8(uQ,b),_=c8(uQ,p),S=(e,t)=>(e||m())[a]-(t||_())[a],E=cc(uQ(u)[i])/uX(u)[s]||1,k=c(u7(u)[l],1/E),N=r[n],j=m(),C=_(),M=j[i],A=S(j,C)+M/2,R=N-C[a],T=o?0:R-A,O=e=>{c$(P),g.releasePointerCapture(e.pointerId)},L=o||e,I=f(),P=[u4(d,t,O),u4(d,"selectstart",e=>u5(e),{T:!1}),u4(p,t,O),L&&u4(p,"pointermove",e=>k(T+(e[n]-N))),L&&(()=>{let e=u7(u);I();let t=u7(u),r={x:t.x-e.x,y:t.y-e.y};(cu(r.x)>3||cu(r.y)>3)&&(f(),u9(u,e),x(r),v(I))})];if(g.setPointerCapture(r.pointerId),e)k(T);else if(!o){let e=df(d6);if(e){let t=e(k,T,M,e=>{e?I():cP(P,I)});cP(P,t),cP(h,c8(t,!0))}}}})},_=!0;return c8(c$,[u4(b,"pointermove pointerleave",n),u4(h,"pointerenter",()=>{a(dq,!0)}),u4(h,"pointerleave pointercancel",()=>{a(dq,!1)}),!c&&u4(h,"mousedown",()=>{let e=uC();(uu(e,d_)||uu(e,dx)||e===document.body)&&cp(c8(di,l),25)}),u4(h,"wheel",e=>{let{deltaX:t,deltaY:r,deltaMode:n}=e;_&&0===n&&uN(h)===s&&x({x:t,y:r}),_=!1,a(dX,!0),g(()=>{_=!0,a(dX)}),u5(e)},{T:!1,I:!0}),u4(h,"pointerdown",()=>{let e=u4(d,"click",e=>{t(),u8(e)},{A:!0,I:!0,T:!1}),t=u4(d,"pointerup pointercancel",()=>{t(),setTimeout(e,150)},{I:!0,T:!0})},{I:!0,T:!0}),w(),m,y])},fm=(e,t,r,n,i,a)=>{let o,s,l,c,u,d=uo,f=0,h=["mouse","pen"],p=e=>h.includes(e.pointerType),[b,g]=c9(),[m,v]=c9(100),[y,x]=c9(100),[w,_]=c9(()=>f),[S,E]=fb(e,i,n,fg(t,i,n,e=>p(e)&&L())),{vt:k,Kt:N,bt:j}=i,{Ft:C,Pt:M,Nt:A,qt:R,Bt:T}=S,O=(e,t)=>{if(_(),e)C(dG);else{let e=c8(C,dG,!0);f>0&&!t?w(e):e()}},L=()=>{(l?o:c)||(O(!0),m(()=>{O(!1)}))},I=e=>{C(dK,e,!0),C(dK,e,!1)},P=e=>{p(e)&&(o=l,l&&O(!0))},B=[_,v,x,g,()=>d(),u4(k,"pointerover",P,{A:!0}),u4(k,"pointerenter",P),u4(k,"pointerleave",e=>{p(e)&&(o=!1,l&&O(!1))}),u4(k,"pointermove",e=>{p(e)&&s&&L()}),u4(N,"scroll",e=>{b(()=>{A(),L()}),a(e),T()})];return[()=>c8(c$,cP(B,E())),({zt:e,It:t,Qt:i,Zt:a})=>{let{tn:o,nn:h,sn:p,en:b}=a||{},{$t:g,ft:m}=i||{},{B:v}=r,{k:x}=fi(),{cn:w,j:_}=n,[S,E]=e("showNativeOverlaidScrollbars"),[k,L]=e("scrollbars.theme"),[P,B]=e("scrollbars.visibility"),[D,z]=e("scrollbars.autoHide"),[F,$]=e("scrollbars.autoHideSuspend"),[U]=e("scrollbars.autoHideDelay"),[H,V]=e("scrollbars.dragScroll"),[q,W]=e("scrollbars.clickScroll"),[K,G]=e("overflow"),X=m&&!t,Z=_.x||_.y,Y=o||h||b||g||t,J=p||B||G,Q=S&&x.x&&x.y,ee=(e,t,r)=>{let n=e.includes(c1)&&(P===cQ||"auto"===P&&t===c1);return C(dH,n,r),n};if(f=U,X&&(F&&Z?(I(!1),d(),y(()=>{d=u4(N,"scroll",c8(I,!0),{A:!0})})):I(!0)),E&&C(dP,Q),L&&(C(u),C(k,!0),u=k),$&&!F&&I(!0),z&&(s="move"===D,l="leave"===D,O(c="never"===D,!0)),V&&C(dY,H),W&&C(dZ,!!q),J){let e=ee(K.x,w.x,!0),t=ee(K.y,w.y,!1);C(dV,!(e&&t))}Y&&(A(),M(),T(),b&&R(),C(dW,!_.x,!0),C(dW,!_.y,!1),C(dD,v&&!j))},{},S]},fv=e=>{let{K:t,U:r}=fi(),{elements:n}=t(),{padding:i,viewport:a,content:o}=n,s=cR(e),l=s?{}:e,{elements:c}=l,{padding:u,viewport:d,content:f}=c||{},h=s?e:l.target,p=uE(h),b=h.ownerDocument,g=b.documentElement,m=()=>b.defaultView||co,v=c8(ff,[h]),y=c8(fh,[h]),x=c8(uL,""),w=c8(v,x,a),_=c8(y,x,o),S=e=>{let t=uX(e),r=uY(e),n=uU(e,cX),i=uU(e,cZ);return r.w-t.w>0&&!d0(n)||r.h-t.h>0&&!d0(i)},E=w(d),k=E===h,N=k&&p,j=!k&&_(f),C=!k&&E===j,M=N?g:E,A=N?M:h,R=!k&&y(x,i,u),T=!C&&j,O=[T,M,R,A].map(e=>cR(e)&&!uN(e)&&e),L=e=>e&&cL(O,e),I=!L(M)&&S(M)?M:h,P=N?g:M,B=N?b:M,D={dt:h,vt:A,L:M,rn:R,ht:T,gt:P,Kt:B,ln:p?g:I,Gt:b,bt:p,At:s,V:k,an:m,wt:e=>um(M,d_,e),yt:(e,t)=>ug(M,d_,e,t),St:()=>ug(P,d_,dj,!0)},{dt:z,vt:F,rn:$,L:U,ht:H}=D,V=[()=>{uf(F,[dx,dm]),uf(z,dm),p&&uf(g,[dm,dx])}],q=uk([H,U,$,F,z].find(e=>e&&!L(e))),W=N?z:H||U,K=c8(c$,V);return[D,()=>{let e=m(),t=uC(),n=e=>{uR(uN(e),uk(e)),uA(e)},i=e=>u4(e,"focusin focusout focus blur",u8,{I:!0,T:!1}),a="tabindex",o=uc(U,a),s=i(t);return ud(F,dx,k?"":dw),ud($,dA,""),ud(U,d_,""),ud(H,dR,""),!k&&(ud(U,a,o||"-1"),p&&ud(g,dy,"")),uR(W,q),uR(F,$),uR($||F,!k&&U),uR(U,H),cP(V,[s,()=>{let e=uC(),t=L(U),r=t&&e===U?z:e,s=i(r);uf($,dA),uf(H,dR),uf(U,d_),p&&uf(g,dy),o?ud(U,a,o):uf(U,a),L(H)&&n(H),t&&n(U),L($)&&n($),di(r),s()}]),r&&!k&&(ub(U,d_,dC),cP(V,c8(uf,U,d_))),di(!k&&p&&t===z&&e.top===e?U:t),s(),q=0,K},K]},fy=({ht:e})=>({Qt:t,un:r,It:n})=>{let{Ct:i}=t||{},{Ot:a}=r;e&&(i||n)&&u$(e,{[cJ]:a&&"100%"})},fx=({vt:e,rn:t,L:r,V:n},i)=>{let[a,o]=ca({i:c5,o:uH()},c8(uH,e,"padding",""));return({zt:e,Qt:s,un:l,It:c})=>{let[u,d]=o(c),{U:f}=fi(),{_t:h,xt:p,$t:b}=s||{},{B:g}=l,[m,v]=e("paddingAbsolute"),y=c||p;(h||d||y)&&([u,d]=a(c));let x=!n&&(v||b||d);if(x){let e=!m||!t&&!f,n=u.r+u.l,a=u.t+u.b,o={[cK]:e&&!g?-n:0,[cG]:e?-a:0,[cW]:e&&g?-n:0,top:e?-u.t:0,right:e?g?-u.r:"auto":0,left:e?g?"auto":-u.l:0,[cY]:e&&`calc(100% + ${n}px)`},s={[cU]:e?u.t:0,[cH]:e?u.r:0,[cq]:e?u.b:0,[cV]:e?u.l:0};u$(t||r,o),u$(r,s),un(i,{rn:u,fn:!e,F:t?s:un({},o,s)})}return{_n:x}}},fw=(e,t)=>{let r=fi(),{vt:n,rn:i,L:a,V:o,Kt:s,gt:l,bt:c,yt:u,an:d}=e,{U:f}=r,h=c&&o,p=c8(cs,0),b={display:()=>!1,direction:e=>"ltr"!==e,flexDirection:e=>e.endsWith("-reverse"),writingMode:e=>"horizontal-tb"!==e},g=ur(b),m={i:c4,o:{w:0,h:0}},v={i:c6,o:{}},y=e=>{u(dN,!h&&e)},x=e=>{if(!g.some(t=>{let r=e[t];return r&&b[t](r)}))return{D:{x:0,y:0},M:{x:1,y:1}};y(!0);let t=u7(l),r=u(dM,!0),n=u4(s,c1,e=>{let r=u7(l);e.isTrusted&&r.x===t.x&&r.y===t.y&&u6(e)},{I:!0,A:!0});u9(l,{x:0,y:0}),r();let i=u7(l),a=uY(l);u9(l,{x:a.w,y:a.h});let o=u7(l);u9(l,{x:o.x-i.x<1&&-a.w,y:o.y-i.y<1&&-a.h});let c=u7(l);return u9(l,t),ch(()=>n()),{D:i,M:c}},w=(e,t)=>{let r=+(co.devicePixelRatio%1!=0),n={w:p(e.w-t.w),h:p(e.h-t.h)};return{w:n.w>r?n.w:0,h:n.h>r?n.h:0}},_=(e,t)=>{let r=(e,t,r,n)=>{let i=e===cQ?c0:d1(e),a=d0(e),o=d0(r);if(!t&&!n)return c0;if(a&&o)return cQ;if(a){let e=t?cQ:c0;return t&&n?i:e}let s=o&&n?cQ:c0;return t?i:s};return{x:r(t.x,e.x,t.y,e.y),y:r(t.y,e.y,t.x,e.x)}},S=e=>{let t=e=>[cQ,c0,c1].map(t=>D(d2(t),e));u(t(!0).concat(t()).join(" ")),u(ur(e).map(t=>D(e[t],"x"===t)).join(" "),!0)},[E,k]=ca(m,c8(uJ,a)),[N,j]=ca(m,c8(uY,a)),[C,M]=ca(m),[A]=ca(v),[R,T]=ca(m),[O]=ca(v),[L]=ca({i:(e,t)=>c3(e,t,g),o:{}},()=>u0(a)?uU(a,g):{}),[I,P]=ca({i:(e,t)=>c6(e.D,t.D)&&c6(e.M,t.M),o:de()}),B=df(d4),D=(e,t)=>{let r=t?dS:dE;return`${r}${c2(e)}`};return({zt:o,Qt:s,un:l,It:c},{_n:b})=>{let{_t:g,Ht:m,xt:v,$t:D,ft:z,Et:F}=s||{},{X:$,Y:U,W:H}=B&&B.R(e,t,l,r,o)||{},[V,q]=dQ(o,r),[W,K]=o("overflow"),G=d0(W.x),X=d0(W.y),Z=g||b||v||D||F||q,Y=k(c),J=j(c),Q=M(c),ee=T(c);if(q&&f&&u(dC,!V),Z){um(n,dx,dv)&&y(!0);let e=U&&U(),[t]=Y=E(c),[r]=J=N(c),i=uZ(a),o=h&&uG(d()),s={w:p(r.w+t.w),h:p(r.h+t.h)},l={w:p((o?o.w:i.w+p(i.w-r.w))+t.w),h:p((o?o.h:i.h+p(i.h-r.h))+t.h)};e&&e(),ee=R(l),Q=C(w(s,l),c)}let[et,er]=ee,[en,ei]=Q,[ea,eo]=J,[es,el]=Y,[ec,eu]=A({x:en.w>0,y:en.h>0}),ed=G&&X&&(ec.x||ec.y)||G&&ec.x&&!ec.y||X&&ec.y&&!ec.x,ef=b||D||F||el||eo||er||ei||K||q||Z||m&&h,[eh,ep]=L(c),eb=D||z||ep||eu||c,[eg,em]=eb?I(x(eh),c):P(),ev=_(ec,W);y(!1),ef&&(S(ev),ev=d3(a,ec),H&&$&&($(ev,ea,es),u$(a,H(ev))));let[ey,ex]=O(ev);return ug(n,dx,dv,ed),ug(i,dA,dv,ed),un(t,{cn:ey,Vt:{x:et.w,y:et.h},Rt:{x:en.w,y:en.h},j:ec,Dt:dt(eg,en)}),{sn:ex,tn:er,nn:ei,en:em||ei,dn:eb}}},f_=e=>{let[t,r,n]=fv(e),i={rn:{t:0,r:0,b:0,l:0},fn:!1,F:{[cK]:0,[cG]:0,[cW]:0,[cU]:0,[cH]:0,[cq]:0,[cV]:0},Vt:{x:0,y:0},Rt:{x:0,y:0},cn:{x:c0,y:c0},j:{x:!1,y:!1},Dt:de()},{dt:a,gt:o,V:s,St:l}=t,{U:c,k:u}=fi(),d=!c&&(u.x||u.y),f=[fy(t),fx(t,i),fw(t,i)];return[r,e=>{let t={},r=d&&u7(o),n=r&&l();return cO(f,r=>{un(t,r(e,t)||{})}),u9(o,r),n&&n(),s||u9(a,0),t},i,t,n]},fS=(e,t,r,n,i)=>{let a=!1,o=fe(t,{}),[s,l,c,u,d]=f_(e),[f,h,p]=fu(u,c,o,e=>{y({},e)}),[b,g,,m]=fm(e,t,p,c,u,i),v=e=>ur(e).some(t=>!!e[t]),y=(e,i)=>{if(r())return!1;let{pn:o,It:s,Tt:c,vn:u}=e,d=o||{},f=!!s||!a,b={zt:fe(t,d,f),pn:d,It:f};if(u)return g(b),!1;let m=i||h(un({},b,{Tt:c})),y=l(un({},b,{un:p,Qt:m}));g(un({},b,{Qt:m,Zt:y}));let x=v(m),w=v(y),_=x||w||!ua(d)||f;return a=!0,_&&n(e,{Qt:m,Zt:y}),_};return[()=>{let{ln:e,gt:t,St:r}=u,n=u7(e),i=[f(),s(),b()],a=r();return u9(t,n),a(),c8(c$,i)},y,()=>({gn:p,hn:c}),{bn:u,wn:m},d]},fE=new WeakMap,fk=(e,t)=>{fE.set(e,t)},fN=e=>{fE.delete(e)},fj=e=>fE.get(e),fC=(e,t,r)=>{let{tt:n}=fi(),i=cR(e),a=i?e:e.target,o=fj(a);if(t&&!o){let o=!1,s=[],l={},c=e=>{let t=ui(e),r=df(dh);return r?r(t,!0):t},u=un({},n(),c(t)),[d,f,h]=ds(),[p,b,g]=ds(r),m=(e,t)=>{g(e,t),h(e,t)},[v,y,x,w,_]=fS(e,u,()=>o,({pn:e,It:t},{Qt:r,Zt:n})=>{let{_t:i,$t:a,Ct:o,xt:s,Ht:l,ft:c}=r,{tn:u,nn:d,sn:f,en:h}=n;m("updated",[E,{updateHints:{sizeChanged:!!i,directionChanged:!!a,heightIntrinsicChanged:!!o,overflowEdgeChanged:!!u,overflowAmountChanged:!!d,overflowStyleChanged:!!f,scrollCoordinatesChanged:!!h,contentMutation:!!s,hostMutation:!!l,appear:!!c},changedOptions:e||{},force:!!t}])},e=>m("scroll",[E,e])),S=e=>{fN(a),c$(s),o=!0,m("destroyed",[E,e]),f(),b()},E={options(e,t){if(e){let r=d7(u,un(t?n():{},c(e)));ua(r)||(un(u,r),y({pn:r}))}return un({},u)},on:p,off:(e,t)=>{e&&t&&b(e,t)},state(){let{gn:e,hn:t}=x(),{B:r}=e,{Vt:n,Rt:i,cn:a,j:s,rn:l,fn:c,Dt:u}=t;return un({},{overflowEdge:n,overflowAmount:i,overflowStyle:a,hasOverflow:s,scrollCoordinates:{start:u.D,end:u.M},padding:l,paddingAbsolute:c,directionRTL:r,destroyed:o})},elements(){let{dt:e,vt:t,rn:r,L:n,ht:i,gt:a,Kt:o}=w.bn,{jt:s,Jt:l}=w.wn,c=e=>{let{Mt:t,Ut:r,Lt:n}=e;return{scrollbar:n,track:r,handle:t}},u=e=>{let{Xt:t,Yt:r}=e;return un({},c(t[0]),{clone:()=>{let e=c(r());return y({vn:!0}),e}})};return un({},{target:e,host:t,padding:r||n,viewport:n,content:i||n,scrollOffsetElement:a,scrollEventElement:o,scrollbarHorizontal:u(s),scrollbarVertical:u(l)})},update:e=>y({It:e,Tt:!0}),destroy:c8(S,!1),plugin:e=>l[ur(e)[0]]};return(cP(s,[_]),fk(a,E),dd(dl,fC,[E,d,l]),fp(w.bn.bt,!i&&e.cancel))?S(!0):(cP(s,v()),m("initialized",[E]),E.update()),E}return o};fC.plugin=e=>{let t=cj(e),r=t?e:[e],n=r.map(e=>dd(e,fC)[0]);return du(r),t?n:n[0]},fC.valid=e=>{let t=e&&e.elements,r=cN(t)&&t();return cA(r)&&!!fj(r.target)},fC.env=()=>{let{P:e,k:t,U:r,J:n,ot:i,st:a,K:o,Z:s,tt:l,nt:c}=fi();return un({},{scrollbarsSize:e,scrollbarsOverlaid:t,scrollbarsHiding:r,scrollTimeline:n,staticDefaultInitialization:i,staticDefaultOptions:a,getDefaultInitialization:o,setDefaultInitialization:s,getDefaultOptions:l,setDefaultOptions:c})},fC.nonce=fr,fC.trustedTypePolicy=uO;let fM=()=>{let e,t;if(typeof window>"u"){let e=()=>{};return[e,e]}let r=window,n="function"==typeof r.requestIdleCallback,i=r.requestAnimationFrame,a=r.cancelAnimationFrame,o=n?r.requestIdleCallback:i,s=n?r.cancelIdleCallback:a,l=()=>{s(e),a(t)};return[(r,a)=>{l(),e=o(n?()=>{l(),t=i(r)}:r,"object"==typeof a?a:{timeout:2233})},l]},fA=e=>{let{options:t,events:r,defer:n}=e||{},[i,a]=(0,ci.useMemo)(fM,[]),o=(0,ci.useRef)(null),s=(0,ci.useRef)(n),l=(0,ci.useRef)(t),c=(0,ci.useRef)(r);return(0,ci.useEffect)(()=>{s.current=n},[n]),(0,ci.useEffect)(()=>{let{current:e}=o;l.current=t,fC.valid(e)&&e.options(t||{},!0)},[t]),(0,ci.useEffect)(()=>{let{current:e}=o;c.current=r,fC.valid(e)&&e.on(r||{},!0)},[r]),(0,ci.useEffect)(()=>()=>{var e;a(),null==(e=o.current)||e.destroy()},[]),(0,ci.useMemo)(()=>[e=>{let t=o.current;if(fC.valid(t))return;let r=s.current,n=l.current||{},a=c.current||{},u=()=>o.current=fC(e,n,a);r?i(u,r):u()},()=>o.current],[])},fR=(e,t)=>{let{element:r="div",options:n,events:i,defer:a,children:o,...s}=e,l=r,c=(0,ci.useRef)(null),u=(0,ci.useRef)(null),[d,f]=fA({options:n,events:i,defer:a});return(0,ci.useEffect)(()=>{let{current:e}=c,{current:t}=u;if(!e)return;let n=e;return d("body"===r?{target:n,cancel:{body:null}}:{target:n,elements:{viewport:t,content:t}}),()=>{var e;return null==(e=f())?void 0:e.destroy()}},[d,r]),(0,ci.useImperativeHandle)(t,()=>({osInstance:f,getElement:()=>c.current}),[]),ci.default.createElement(l,{"data-overlayscrollbars-initialize":"",ref:c,...s},"body"===r?o:ci.default.createElement("div",{"data-overlayscrollbars-contents":"",ref:u},o))},fT=(0,ci.forwardRef)(fR);var fO=a,fL=p;function fI(){return(fI=Object.assign.bind()).apply(null,arguments)}function fP(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fB(e,t){return(fB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function fD(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,fB(e,t)}var fz=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function fF(e,t){return!!(e===t||fz(e)&&fz(t))}function f$(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!fF(e[r],t[r]))return!1;return!0}let fU=function(e,t){void 0===t&&(t=f$);var r,n,i=[],a=!1;return function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];return a&&r===this&&t(o,i)||(n=e.apply(this,o),a=!0,r=this,i=o),n}};var fH=p,fV="object"==typeof performance&&"function"==typeof performance.now?function(){return performance.now()}:function(){return Date.now()};function fq(e){cancelAnimationFrame(e.id)}function fW(e,t){var r=fV();function n(){fV()-r>=t?e.call(null):i.id=requestAnimationFrame(n)}var i={id:requestAnimationFrame(n)};return i}var fK=-1;function fG(e){if(void 0===e&&(e=!1),-1===fK||e){var t=document.createElement("div"),r=t.style;r.width="50px",r.height="50px",r.overflow="scroll",document.body.appendChild(t),fK=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return fK}var fX=null;function fZ(e){if(void 0===e&&(e=!1),null===fX||e){var t=document.createElement("div"),r=t.style;r.width="50px",r.height="50px",r.overflow="scroll",r.direction="rtl";var n=document.createElement("div"),i=n.style;i.width="100px",i.height="100px",t.appendChild(n),document.body.appendChild(t),t.scrollLeft>0?fX="positive-descending":(t.scrollLeft=1,fX=0===t.scrollLeft?"negative":"positive-ascending"),document.body.removeChild(t)}return fX}var fY=150,fJ=function(e,t){return e},fQ=function(e,t){e.children,e.direction,e.height,e.layout,e.innerTagName,e.outerTagName,e.width,t.instance},f0=function e(e){var t,r=e.getItemOffset,n=e.getEstimatedTotalSize,i=e.getItemSize,a=e.getOffsetForIndexAndAlignment,o=e.getStartIndexForOffset,s=e.getStopIndexForStartIndex,l=e.initInstanceProps,c=e.shouldResetStyleCacheOnItemSizeChange,u=e.validateProps;return(t=function(e){function t(t){var n;return(n=e.call(this,t)||this)._instanceProps=l(n.props,fP(n)),n._outerRef=void 0,n._resetIsScrollingTimeoutId=null,n.state={instance:fP(n),isScrolling:!1,scrollDirection:"forward",scrollOffset:"number"==typeof n.props.initialScrollOffset?n.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},n._callOnItemsRendered=void 0,n._callOnItemsRendered=fU(function(e,t,r,i){return n.props.onItemsRendered({overscanStartIndex:e,overscanStopIndex:t,visibleStartIndex:r,visibleStopIndex:i})}),n._callOnScroll=void 0,n._callOnScroll=fU(function(e,t,r){return n.props.onScroll({scrollDirection:e,scrollOffset:t,scrollUpdateWasRequested:r})}),n._getItemStyle=void 0,n._getItemStyle=function(e){var t,a=n.props,o=a.direction,s=a.itemSize,l=a.layout,u=n._getItemStyleCache(c&&s,c&&l,c&&o);if(u.hasOwnProperty(e))t=u[e];else{var d=r(n.props,e,n._instanceProps),f=i(n.props,e,n._instanceProps),h="horizontal"===o||"horizontal"===l,p="rtl"===o,b=h?d:0;u[e]=t={position:"absolute",left:p?void 0:b,right:p?b:void 0,top:h?0:d,height:h?"100%":f,width:h?f:"100%"}}return t},n._getItemStyleCache=void 0,n._getItemStyleCache=fU(function(e,t,r){return{}}),n._onScrollHorizontal=function(e){var t=e.currentTarget,r=t.clientWidth,i=t.scrollLeft,a=t.scrollWidth;n.setState(function(e){if(e.scrollOffset===i)return null;var t=n.props.direction,o=i;if("rtl"===t)switch(fZ()){case"negative":o=-i;break;case"positive-descending":o=a-r-i}return o=Math.max(0,Math.min(o,a-r)),{isScrolling:!0,scrollDirection:e.scrollOffset<o?"forward":"backward",scrollOffset:o,scrollUpdateWasRequested:!1}},n._resetIsScrollingDebounced)},n._onScrollVertical=function(e){var t=e.currentTarget,r=t.clientHeight,i=t.scrollHeight,a=t.scrollTop;n.setState(function(e){if(e.scrollOffset===a)return null;var t=Math.max(0,Math.min(a,i-r));return{isScrolling:!0,scrollDirection:e.scrollOffset<t?"forward":"backward",scrollOffset:t,scrollUpdateWasRequested:!1}},n._resetIsScrollingDebounced)},n._outerRefSetter=function(e){var t=n.props.outerRef;n._outerRef=e,"function"==typeof t?t(e):null!=t&&"object"==typeof t&&t.hasOwnProperty("current")&&(t.current=e)},n._resetIsScrollingDebounced=function(){null!==n._resetIsScrollingTimeoutId&&fq(n._resetIsScrollingTimeoutId),n._resetIsScrollingTimeoutId=fW(n._resetIsScrolling,fY)},n._resetIsScrolling=function(){n._resetIsScrollingTimeoutId=null,n.setState({isScrolling:!1},function(){n._getItemStyleCache(-1,null)})},n}fD(t,e),t.getDerivedStateFromProps=function(e,t){return fQ(e,t),u(e),null};var d=t.prototype;return d.scrollTo=function(e){e=Math.max(0,e),this.setState(function(t){return t.scrollOffset===e?null:{scrollDirection:t.scrollOffset<e?"forward":"backward",scrollOffset:e,scrollUpdateWasRequested:!0}},this._resetIsScrollingDebounced)},d.scrollToItem=function(e,t){void 0===t&&(t="auto");var r=this.props,n=r.itemCount,i=r.layout,o=this.state.scrollOffset;e=Math.max(0,Math.min(e,n-1));var s=0;if(this._outerRef){var l=this._outerRef;s="vertical"===i?l.scrollWidth>l.clientWidth?fG():0:l.scrollHeight>l.clientHeight?fG():0}this.scrollTo(a(this.props,e,t,o,this._instanceProps,s))},d.componentDidMount=function(){var e=this.props,t=e.direction,r=e.initialScrollOffset,n=e.layout;if("number"==typeof r&&null!=this._outerRef){var i=this._outerRef;"horizontal"===t||"horizontal"===n?i.scrollLeft=r:i.scrollTop=r}this._callPropsCallbacks()},d.componentDidUpdate=function(){var e=this.props,t=e.direction,r=e.layout,n=this.state,i=n.scrollOffset;if(n.scrollUpdateWasRequested&&null!=this._outerRef){var a=this._outerRef;if("horizontal"===t||"horizontal"===r)if("rtl"===t)switch(fZ()){case"negative":a.scrollLeft=-i;break;case"positive-ascending":a.scrollLeft=i;break;default:var o=a.clientWidth,s=a.scrollWidth;a.scrollLeft=s-o-i}else a.scrollLeft=i;else a.scrollTop=i}this._callPropsCallbacks()},d.componentWillUnmount=function(){null!==this._resetIsScrollingTimeoutId&&fq(this._resetIsScrollingTimeoutId)},d.render=function(){var e=this.props,t=e.children,r=e.className,i=e.direction,a=e.height,o=e.innerRef,s=e.innerElementType,l=e.innerTagName,c=e.itemCount,u=e.itemData,d=e.itemKey,f=void 0===d?fJ:d,h=e.layout,p=e.outerElementType,b=e.outerTagName,g=e.style,m=e.useIsScrolling,v=e.width,y=this.state.isScrolling,x="horizontal"===i||"horizontal"===h,w=x?this._onScrollHorizontal:this._onScrollVertical,_=this._getRangeToRender(),S=_[0],E=_[1],k=[];if(c>0)for(var N=S;N<=E;N++)k.push((0,fH.createElement)(t,{data:u,key:f(N,u),index:N,isScrolling:m?y:void 0,style:this._getItemStyle(N)}));var j=n(this.props,this._instanceProps);return(0,fH.createElement)(p||b||"div",{className:r,onScroll:w,ref:this._outerRefSetter,style:fI({position:"relative",height:a,width:v,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:i},g)},(0,fH.createElement)(s||l||"div",{children:k,ref:o,style:{height:x?"100%":j,pointerEvents:y?"none":void 0,width:x?j:"100%"}}))},d._callPropsCallbacks=function(){if("function"==typeof this.props.onItemsRendered&&this.props.itemCount>0){var e=this._getRangeToRender(),t=e[0],r=e[1],n=e[2],i=e[3];this._callOnItemsRendered(t,r,n,i)}if("function"==typeof this.props.onScroll){var a=this.state,o=a.scrollDirection,s=a.scrollOffset,l=a.scrollUpdateWasRequested;this._callOnScroll(o,s,l)}},d._getRangeToRender=function(){var e=this.props,t=e.itemCount,r=e.overscanCount,n=this.state,i=n.isScrolling,a=n.scrollDirection,l=n.scrollOffset;if(0===t)return[0,0,0,0];var c=o(this.props,l,this._instanceProps),u=s(this.props,c,l,this._instanceProps);return[Math.max(0,c-(i&&"backward"!==a?1:Math.max(1,r))),Math.max(0,Math.min(t-1,u+(i&&"forward"!==a?1:Math.max(1,r)))),c,u]},t}(fH.PureComponent)).defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},t}({getItemOffset:function(e,t){return t*e.itemSize},getItemSize:function(e,t){return e.itemSize},getEstimatedTotalSize:function(e){var t=e.itemCount;return e.itemSize*t},getOffsetForIndexAndAlignment:function(e,t,r,n,i,a){var o=e.direction,s=e.height,l=e.itemCount,c=e.itemSize,u=e.layout,d=e.width,f="horizontal"===o||"horizontal"===u?d:s,h=Math.max(0,l*c-f),p=Math.min(h,t*c),b=Math.max(0,t*c-f+c+a);switch("smart"===r&&(r=n>=b-f&&n<=p+f?"auto":"center"),r){case"start":return p;case"end":return b;case"center":var g=Math.round(b+(p-b)/2);if(g<Math.ceil(f/2))return 0;if(g>h+Math.floor(f/2))return h;return g;default:if(n>=b&&n<=p)return n;if(n<b)return b;return p}},getStartIndexForOffset:function(e,t){return Math.max(0,Math.min(e.itemCount-1,Math.floor(t/e.itemSize)))},getStopIndexForStartIndex:function(e,t,r){var n=e.direction,i=e.height,a=e.itemCount,o=e.itemSize,s=e.layout,l=e.width,c=Math.ceil((("horizontal"===n||"horizontal"===s?l:i)+r-t*o)/o);return Math.max(0,Math.min(a-1,t+c-1))},initInstanceProps:function(e){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(e){e.itemSize}}),f1=l,f2=S,f3=p;let f4=(e,t=[])=>{let r=[],n=(e,i=0)=>{if(!(i>15))for(let a of(e instanceof HTMLElement&&e.shadowRoot&&n(e.shadowRoot,i+1),"children"in e?Array.from(e.children):[])){if("STYLE"===a.tagName||"LINK"===a.tagName||t.includes(a.tagName.toLowerCase()))continue;if(a.shadowRoot&&n(a.shadowRoot,i+1),"IFRAME"===a.tagName){let e=a,t=e.contentDocument||e.contentWindow?.document;t&&t.body&&n(t.body,i+1)}let e=a.childNodes&&Array.from(a.childNodes).some(e=>!!(e.nodeType===Node.TEXT_NODE&&e.textContent?.trim()||e.nodeType===Node.ELEMENT_NODE&&"SPAN"===e.tagName&&e.textContent?.trim()));0===a.children.length&&a.textContent?.trim()||e?r.push(a):a.children.length>0&&n(a,i+1)}};return n(e),r};var f6=S;function f5(e,t,r=!1,n="translation-target-block"){let{getViewSettings:i,getProgress:a}=e_(),o=i(e),s=a(e),l=(0,f3.useRef)(o?.translationEnabled),[c,u]=(0,f3.useState)(o?.translationProvider),[d,f]=(0,f3.useState)(o?.translateTargetLang),h=(0,f3.useRef)(o?.showTranslateSource),{translate:p}=nw({provider:c,targetLang:d||(0,f6.getLocale)()}),b=(0,f3.useRef)(p),g=(0,f3.useRef)(null),m=(0,f3.useRef)([]),v=(0,f3.useRef)([]),y=e=>{m.current.forEach(t=>{t.querySelectorAll(".translation-target").forEach(t=>{e?t.classList.remove("hidden"):t.classList.add("hidden")})})};(0,f3.useEffect)(()=>{b.current=p},[p]);let x=()=>{if(!t||!l.current)return;let e=_();g.current=e;let r=f4(t,["pre","code","math"]);console.log("Observing text nodes for translation:",r.length),v.current=r,r.forEach(t=>e.observe(t))},w=()=>{m.current.forEach(e=>{e.querySelectorAll(".translation-target").forEach(e=>e.remove())}),m.current=[],o?.translationEnabled&&t&&E()},_=()=>new IntersectionObserver(e=>{let t=null,r=null;for(let n of e){if(!n.isIntersecting){r||(t=n.target);continue}let e=n.target;k(e),r=e}t&&k(t),r&&S(r,2)},{rootMargin:"1280px",threshold:0}),S=(e,t)=>{if(!v.current||t<=0)return;let r=v.current.indexOf(e);-1===r||v.current.slice(r+1,r+1+t).forEach((e,t)=>{setTimeout(()=>{k(e)},500*t)})},E=()=>{let e=_();g.current?.disconnect(),g.current=e,v.current.forEach(t=>e.observe(t))},k=async e=>{if(!l.current)return;let t=e.textContent?.replaceAll("\n","").trim();if(!t||e.classList.contains("translation-target"))return;let i=e=>{if(Array.from(e.childNodes).some(e=>e.nodeType===Node.TEXT_NODE&&e.textContent?.trim()!=="")){e.classList.add("translation-source");let t=Array.from(e.childNodes).filter(e=>e.nodeType===Node.TEXT_NODE&&e.textContent?.trim()!=="");e.hasAttribute("original-text-stored")||(e.setAttribute("original-text-nodes",JSON.stringify(t.map(e=>e.textContent))),e.setAttribute("original-text-stored","true"))}if(e.classList.contains("translation-source")){let t=Array.from(e.childNodes).filter(e=>e.nodeType===Node.TEXT_NODE);if(h.current){let r=JSON.parse(e.getAttribute("original-text-nodes")||"[]");t.forEach((e,t)=>{void 0!==r[t]&&(e.textContent=r[t])})}else t.forEach(e=>{e.textContent=""})}for(let t of Array.from(e.childNodes)){if(t.nodeType!==Node.ELEMENT_NODE)continue;let e=t;e.classList.contains("translation-target")||i(e)}};i(e);try{let i=(await b.current([t]))[0];if(!i||t===i)return;let a=document.createElement("font");a.className=`translation-target ${!l.current?"hidden":""}`,a.setAttribute("translation-element-mark","1"),a.setAttribute("lang",d||(0,f6.getLocale)()),r&&a.appendChild(document.createElement("br"));let o=document.createElement("font");o.className=`translation-target ${n}`;let s=document.createElement("font");if(s.className="translation-target target-inner target-inner-theme-none",s.textContent=i,o.appendChild(s),a.appendChild(o),e.querySelector(".translation-target"))return;e.appendChild(a),m.current.push(e)}catch(e){console.warn("Translation failed:",e)}},N=(e,t)=>{let r=e.startContainer,n=e.endContainer,i=-1,a=-1;for(let e=0;e<t.length;e++){let o=t[e];(o===r||o.contains(r))&&-1===i&&(i=e),(o===n||o.contains(n))&&(a=e)}return -1!==i&&-1===a&&(a=i),{startIndex:i,endIndex:a}},j=(0,f3.useCallback)(aM(e=>{let t=v.current;if(0===t.length)return void console.warn("No text nodes available for translation.");let{startIndex:r,endIndex:n}=N(e,t);if(-1===r)return void console.log("Range not found in text nodes");let i=5,a=Math.max(0,r-2),o=Math.min(t.length-1,n+i);for(let e=a;e<=o;e++){let r=t[e];r&&k(r)}},500),[k]);(0,f3.useEffect)(()=>{if(l.current&&s){let{range:e}=s;j(e)}},[s]),(0,f3.useEffect)(()=>{if(!o)return;let e=l.current!==o.translationEnabled,t=c!==o.translationProvider,r=d!==o.translateTargetLang,n=h.current!==o.showTranslateSource;e&&(l.current=o.translationEnabled),t&&u(o.translationProvider),r&&f(o.translateTargetLang),n&&(h.current=o.showTranslateSource),e?(y(o.translationEnabled),l.current&&x()):(t||r||n)&&w()},[e,o,c,d]),(0,f3.useEffect)(()=>{if(t&&l.current)return"renderer"in t?t.addEventListener("load",x):x(),()=>{"renderer"in t&&t.removeEventListener("load",x),g.current?.disconnect(),m.current=[]}},[t])}var f8=a,f9=p,f7=S;let he=e=>(0,f8.jsx)("svg",{viewBox:"0 0 8 10",width:"8",height:"10",className:h("text-base-content transform transition-transform",e?"rotate-90":"rotate-0"),style:{transformOrigin:"center"},fill:"currentColor",children:(0,f8.jsx)("polygon",{points:"0 0, 8 5, 0 10"})}),ht=f9.default.memo(({flatItem:e,itemSize:t,isActive:r,onToggleExpand:n,onItemClick:i})=>{let{item:a,depth:o}=e,s=(0,f9.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),n(a)},[a,n]),l=(0,f9.useCallback)(e=>{e.preventDefault(),i(a)},[a,i]);return(0,f8.jsxs)("div",{tabIndex:0,role:"treeitem",onClick:a.href?l:void 0,onKeyDown:a.href?e=>"Enter"===e.key&&l(e):void 0,"aria-expanded":e.isExpanded?"true":"false","aria-selected":r?"true":"false","data-href":a.href?(0,f7.getContentMd5)(a.href):void 0,className:h("flex w-full cursor-pointer items-center rounded-md py-4 sm:py-2",r?"text-bold-in-eink sm:bg-base-300/65 sm:hover:bg-base-300/75 sm:text-base-content text-blue-500":"sm:hover:bg-base-300/75"),style:{height:t?`${t}px`:"auto",paddingInlineStart:`${(o+1)*12}px`},children:[a.subitems&&(0,f8.jsx)("button",{onClick:s,onKeyDown:e=>{e.stopPropagation()},className:"inline-block cursor-pointer",style:{padding:"12px",margin:"-12px"},children:he(e.isExpanded||!1)}),(0,f8.jsx)("div",{className:"ms-2 truncate text-ellipsis",style:{maxWidth:"calc(100% - 24px)",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:a.label}),a.location&&(0,f8.jsx)("div",{className:"text-base-content/50 ms-auto ps-1 text-xs sm:pe-1",children:a.location.current+1})]})});ht.displayName="TOCItemView";let hr=({bookKey:e,flatItem:t,itemSize:r,activeHref:n,onToggleExpand:i,onItemClick:a})=>{let o=n===t.item.href;return(0,f8.jsx)("div",{className:h("border-base-300 w-full border-b sm:border-none","pe-4 ps-2 pt-[1px] sm:pe-2"),title:t.item.label||"",children:(0,f8.jsx)(ht,{bookKey:e,flatItem:t,itemSize:r,isActive:o,onToggleExpand:i,onItemClick:a})})},hn=({index:e,style:t,data:r})=>{let{flatItems:n,bookKey:i,activeHref:a,itemSize:o,onToggleExpand:s,onItemClick:l}=r,c=n[e];return(0,f8.jsx)("div",{style:t,title:c.item.label||"",children:(0,f8.jsx)(hr,{bookKey:i,flatItem:c,itemSize:o-1,activeHref:a,onToggleExpand:s,onItemClick:l})})},hi=e=>{let t=e.href||"";return`toc-item-${e.id}-${t}`},ha=(e,t)=>(0,fL.useMemo)(()=>{let r=(e,n=0)=>{let i=[];return e.forEach((e,a)=>{let o=t.has(hi(e));i.push({item:e,depth:n,index:a,isExpanded:o}),e.subitems&&o&&i.push(...r(e.subitems,n+1))}),i};return r(e)},[e,t]),ho=({bookKey:e,toc:t,sections:r})=>{let{appService:n}=(0,f1.useEnv)(),{getView:i,getProgress:a,getViewSettings:o}=e_(),{sideBarBookKey:s,isSideBarVisible:l}=ek(),c=o(e),u=a(e),[d,f]=(0,fL.useState)(new Set),[h,p]=(0,fL.useState)(400),b=(0,fL.useRef)(!1),g=(0,fL.useRef)(0),m=1e4,v=(0,fL.useRef)(null),y=(0,fL.useRef)(null),x=(0,fL.useRef)(null),w=(0,fL.useRef)(null),[_]=fA({defer:!0,options:{scrollbars:{autoHide:"scroll"},showNativeOverlaidScrollbars:!1},events:{initialized(e){let{viewport:t}=e.elements();t.style.overflowX="var(--os-viewport-overflow-x)",t.style.overflowY="var(--os-viewport-overflow-y)"}}}),S=(0,fL.useCallback)(()=>!!b.current&&(!(Date.now()-g.current>=m)||(b.current=!1,!1)),[]),E=(0,fL.useCallback)(()=>{setTimeout(()=>{b.current=!0,g.current=Date.now()},500)},[]);(0,fL.useEffect)(()=>{let{current:e}=v,{current:t}=y;if(e&&t)return _({target:e,elements:{viewport:t}}),t.addEventListener("scroll",E),()=>{t.removeEventListener("scroll",E)}},[_,E]),f5(e,v.current||w.current,!1,"translation-target-toc"),(0,fL.useEffect)(()=>{let e=()=>{if(v.current){let e=v.current.getBoundingClientRect(),t=v.current.closest(".scroll-container");if(t){let r=t.getBoundingClientRect();p(Math.max(400,r.height-(e.top-r.top)))}}};e(),window.addEventListener("resize",e);let t=null;if(v.current){let r=v.current.closest(".scroll-container");r&&(t=new ResizeObserver(e)).observe(r)}let r=w.current,n=null;return r&&(n=r.parentElement)&&n.addEventListener("scroll",E),()=>{window.removeEventListener("resize",e),t&&t.disconnect(),n&&n.removeEventListener("scroll",E)}},[d,E]);let k=(0,fL.useMemo)(()=>u?.sectionHref||null,[u?.sectionHref]),N=ha(t,d),j=(0,fL.useMemo)(()=>N.findIndex(e=>e.item.href===k),[N,k]),C=(0,fL.useCallback)(e=>{let t=hi(e);E(),f(e=>{let r=new Set(e);return r.has(t)?r.delete(t):r.add(t),r})},[E]),M=(0,fL.useCallback)(t=>{eR.dispatch("navigate",{bookKey:e,href:t.href}),t.href&&i(e)?.goTo(t.href)},[e,i]),A=(0,fL.useCallback)((e,t)=>{f(new Set(ec(e,t).map(e=>hi(e)).filter(Boolean)))},[]),R=(0,fL.useCallback)(()=>{if(k){if(x.current){let e=N.findIndex(e=>e.item.href===k);-1!==e&&x.current.scrollToItem(e,"center")}if(w.current){let e=k?(0,f2.getContentMd5)(k):"",t=w.current?.querySelector(`[data-href="${e}"]`);if(t){let e=w.current.parentElement.getBoundingClientRect(),r=t.getBoundingClientRect();r.top>=e.top&&r.bottom<=e.bottom||t.scrollIntoView({behavior:"instant",block:"center"}),t.setAttribute("aria-current","page")}}}},[N,k]),T=(0,fL.useMemo)(()=>window.innerWidth>=640&&!c?.translationEnabled?37:57,[c?.translationEnabled]),O=(0,fL.useMemo)(()=>({flatItems:N,itemSize:T,bookKey:e,activeHref:k,onToggleExpand:C,onItemClick:M}),[N,T,e,k,C,M]);return(0,fL.useEffect)(()=>{if(!u||!l||s!==e||S())return;let{sectionHref:r}=u;r&&A(t,r)},[t,u,s,l,e,A,S]),(0,fL.useEffect)(()=>{!S()&&N.length>0&&setTimeout(R,n?.isAndroidApp?300:100)},[u,R,S]),r&&r.length>256?(0,fO.jsx)("div",{className:"virtual-list mt-2 rounded","data-overlayscrollbars-initialize":"",ref:v,children:(0,fO.jsx)(f0,{ref:x,outerRef:y,width:"100%",height:h,itemCount:N.length,itemSize:T,itemData:O,overscanCount:20,initialScrollOffset:n?.isAndroidApp&&j>=0?Math.max(0,j*T-h/2):void 0,children:hn})}):(0,fO.jsx)("div",{className:"static-list mt-2 rounded",ref:w,children:N.map((t,r)=>(0,fO.jsx)(hr,{bookKey:e,flatItem:t,activeHref:k,onToggleExpand:C,onItemClick:M},`static-row-${r}`))})};var hs=a,hl=e.i(684658),hc=a,hu=e.i(55956),hd=p;function hf(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var hh=hf();function hp(e){hh=e}var hb={exec:()=>null};function hg(e,t=""){let r="string"==typeof e?e:e.source,n={replace:(e,t)=>{let i="string"==typeof t?t:t.source;return i=i.replace(hm.caret,"$1"),r=r.replace(e,i),n},getRegex:()=>new RegExp(r,t)};return n}var hm={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:e=>RegExp(`^( {0,3}${e})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:e=>RegExp(`^ {0,${Math.min(3,e-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:e=>RegExp(`^ {0,${Math.min(3,e-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:e=>RegExp(`^ {0,${Math.min(3,e-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:e=>RegExp(`^ {0,${Math.min(3,e-1)}}#`),htmlBeginRegex:e=>RegExp(`^ {0,${Math.min(3,e-1)}}<(?:[a-z].*>|!--)`,"i")},hv=/^(?:[ \t]*(?:\n|$))+/,hy=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,hx=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hw=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,h_=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,hS=/(?:[*+-]|\d{1,9}[.)])/,hE=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,hk=hg(hE).replace(/bull/g,hS).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),hN=hg(hE).replace(/bull/g,hS).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),hj=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,hC=/^[^\n]+/,hM=/(?!\s*\])(?:\\.|[^\[\]\\])+/,hA=hg(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",hM).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),hR=hg(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,hS).getRegex(),hT="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",hO=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,hL=hg("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",hO).replace("tag",hT).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),hI=hg(hj).replace("hr",hw).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",hT).getRegex(),hP={blockquote:hg(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",hI).getRegex(),code:hy,def:hA,fences:hx,heading:h_,hr:hw,html:hL,lheading:hk,list:hR,newline:hv,paragraph:hI,table:hb,text:hC},hB=hg("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",hw).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",hT).getRegex(),hD={...hP,lheading:hN,table:hB,paragraph:hg(hj).replace("hr",hw).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",hB).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",hT).getRegex()},hz={...hP,html:hg(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",hO).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:hb,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:hg(hj).replace("hr",hw).replace("heading"," *#{1,6} *[^\n]").replace("lheading",hk).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},hF=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,h$=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,hU=/^( {2,}|\\)\n(?!\s*$)/,hH=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,hV=/[\p{P}\p{S}]/u,hq=/[\s\p{P}\p{S}]/u,hW=/[^\s\p{P}\p{S}]/u,hK=hg(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,hq).getRegex(),hG=/(?!~)[\p{P}\p{S}]/u,hX=/(?!~)[\s\p{P}\p{S}]/u,hZ=/(?:[^\s\p{P}\p{S}]|~)/u,hY=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,hJ=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,hQ=hg(hJ,"u").replace(/punct/g,hV).getRegex(),h0=hg(hJ,"u").replace(/punct/g,hG).getRegex(),h1="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",h2=hg(h1,"gu").replace(/notPunctSpace/g,hW).replace(/punctSpace/g,hq).replace(/punct/g,hV).getRegex(),h3=hg(h1,"gu").replace(/notPunctSpace/g,hZ).replace(/punctSpace/g,hX).replace(/punct/g,hG).getRegex(),h4=hg("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,hW).replace(/punctSpace/g,hq).replace(/punct/g,hV).getRegex(),h6=hg(/\\(punct)/,"gu").replace(/punct/g,hV).getRegex(),h5=hg(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),h8=hg(hO).replace("(?:-->|$)","-->").getRegex(),h9=hg("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",h8).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),h7=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,pe=hg(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",h7).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),pt=hg(/^!?\[(label)\]\[(ref)\]/).replace("label",h7).replace("ref",hM).getRegex(),pr=hg(/^!?\[(ref)\](?:\[\])?/).replace("ref",hM).getRegex(),pn=hg("reflink|nolink(?!\\()","g").replace("reflink",pt).replace("nolink",pr).getRegex(),pi={_backpedal:hb,anyPunctuation:h6,autolink:h5,blockSkip:hY,br:hU,code:h$,del:hb,emStrongLDelim:hQ,emStrongRDelimAst:h2,emStrongRDelimUnd:h4,escape:hF,link:pe,nolink:pr,punctuation:hK,reflink:pt,reflinkSearch:pn,tag:h9,text:hH,url:hb},pa={...pi,link:hg(/^!?\[(label)\]\((.*?)\)/).replace("label",h7).getRegex(),reflink:hg(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",h7).getRegex()},po={...pi,emStrongRDelimAst:h3,emStrongLDelim:h0,url:hg(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},ps={...po,br:hg(hU).replace("{2,}","*").getRegex(),text:hg(po.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},pl={normal:hP,gfm:hD,pedantic:hz},pc={normal:pi,gfm:po,breaks:ps,pedantic:pa},pu={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},pd=e=>pu[e];function pf(e,t){if(t){if(hm.escapeTest.test(e))return e.replace(hm.escapeReplace,pd)}else if(hm.escapeTestNoEncode.test(e))return e.replace(hm.escapeReplaceNoEncode,pd);return e}function ph(e){try{e=encodeURI(e).replace(hm.percentDecode,"%")}catch{return null}return e}function pp(e,t){let r=e.replace(hm.findPipe,(e,t,r)=>{let n=!1,i=t;for(;--i>=0&&"\\"===r[i];)n=!n;return n?"|":" |"}).split(hm.splitPipe),n=0;if(r[0].trim()||r.shift(),r.length>0&&!r.at(-1)?.trim()&&r.pop(),t)if(r.length>t)r.splice(t);else for(;r.length<t;)r.push("");for(;n<r.length;n++)r[n]=r[n].trim().replace(hm.slashPipe,"|");return r}function pb(e,t,r){let n=e.length;if(0===n)return"";let i=0;for(;i<n;){let a=e.charAt(n-i-1);if(a!==t||r)if(a!==t&&r)i++;else break;else i++}return e.slice(0,n-i)}function pg(e,t){if(-1===e.indexOf(t[1]))return -1;let r=0;for(let n=0;n<e.length;n++)if("\\"===e[n])n++;else if(e[n]===t[0])r++;else if(e[n]===t[1]&&--r<0)return n;return r>0?-2:-1}function pm(e,t,r,n,i){let a=t.href,o=t.title||null,s=e[1].replace(i.other.outputLinkReplace,"$1");n.state.inLink=!0;let l={type:"!"===e[0].charAt(0)?"image":"link",raw:r,href:a,title:o,text:s,tokens:n.inlineTokens(s)};return n.state.inLink=!1,l}function pv(e,t,r){let n=e.match(r.other.indentCodeCompensation);if(null===n)return t;let i=n[1];return t.split("\n").map(e=>{let t=e.match(r.other.beginningSpace);if(null===t)return e;let[n]=t;return n.length>=i.length?e.slice(i.length):e}).join("\n")}var py=class{options;rules;lexer;constructor(e){this.options=e||hh}space(e){let t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){let t=this.rules.block.code.exec(e);if(t){let e=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?e:pb(e,"\n")}}}fences(e){let t=this.rules.block.fences.exec(e);if(t){let e=t[0],r=pv(e,t[3]||"",this.rules);return{type:"code",raw:e,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:r}}}heading(e){let t=this.rules.block.heading.exec(e);if(t){let e=t[2].trim();if(this.rules.other.endingHash.test(e)){let t=pb(e,"#");this.options.pedantic?e=t.trim():(!t||this.rules.other.endingSpaceChar.test(t))&&(e=t.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:e,tokens:this.lexer.inline(e)}}}hr(e){let t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:pb(t[0],"\n")}}blockquote(e){let t=this.rules.block.blockquote.exec(e);if(t){let e=pb(t[0],"\n").split("\n"),r="",n="",i=[];for(;e.length>0;){let t,a=!1,o=[];for(t=0;t<e.length;t++)if(this.rules.other.blockquoteStart.test(e[t]))o.push(e[t]),a=!0;else if(a)break;else o.push(e[t]);e=e.slice(t);let s=o.join("\n"),l=s.replace(this.rules.other.blockquoteSetextReplace,"\n    $1").replace(this.rules.other.blockquoteSetextReplace2,"");r=r?`${r}
${s}`:s,n=n?`${n}
${l}`:l;let c=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(l,i,!0),this.lexer.state.top=c,0===e.length)break;let u=i.at(-1);if(u?.type==="code")break;if(u?.type==="blockquote"){let t=u,a=t.raw+"\n"+e.join("\n"),o=this.blockquote(a);i[i.length-1]=o,r=r.substring(0,r.length-t.raw.length)+o.raw,n=n.substring(0,n.length-t.text.length)+o.text;break}if(u?.type==="list"){let t=u,a=t.raw+"\n"+e.join("\n"),o=this.list(a);i[i.length-1]=o,r=r.substring(0,r.length-u.raw.length)+o.raw,n=n.substring(0,n.length-t.raw.length)+o.raw,e=a.substring(i.at(-1).raw.length).split("\n");continue}}return{type:"blockquote",raw:r,tokens:i,text:n}}}list(e){let t=this.rules.block.list.exec(e);if(t){let r=t[1].trim(),n=r.length>1,i={type:"list",raw:"",ordered:n,start:n?+r.slice(0,-1):"",loose:!1,items:[]};r=n?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=n?r:"[*+-]");let a=this.rules.other.listItemRegex(r),o=!1;for(;e;){let r,n=!1,s="",l="";if(!(t=a.exec(e))||this.rules.block.hr.test(e))break;s=t[0],e=e.substring(s.length);let c=t[2].split("\n",1)[0].replace(this.rules.other.listReplaceTabs,e=>" ".repeat(3*e.length)),u=e.split("\n",1)[0],d=!c.trim(),f=0;if(this.options.pedantic?(f=2,l=c.trimStart()):d?f=t[1].length+1:(f=(f=t[2].search(this.rules.other.nonSpaceChar))>4?1:f,l=c.slice(f),f+=t[1].length),d&&this.rules.other.blankLine.test(u)&&(s+=u+"\n",e=e.substring(u.length+1),n=!0),!n){let t=this.rules.other.nextBulletRegex(f),r=this.rules.other.hrRegex(f),n=this.rules.other.fencesBeginRegex(f),i=this.rules.other.headingBeginRegex(f),a=this.rules.other.htmlBeginRegex(f);for(;e;){let o,h=e.split("\n",1)[0];if(u=h,o=this.options.pedantic?u=u.replace(this.rules.other.listReplaceNesting,"  "):u.replace(this.rules.other.tabCharGlobal,"    "),n.test(u)||i.test(u)||a.test(u)||t.test(u)||r.test(u))break;if(o.search(this.rules.other.nonSpaceChar)>=f||!u.trim())l+="\n"+o.slice(f);else{if(d||c.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||n.test(c)||i.test(c)||r.test(c))break;l+="\n"+u}d||u.trim()||(d=!0),s+=h+"\n",e=e.substring(h.length+1),c=o.slice(f)}}!i.loose&&(o?i.loose=!0:this.rules.other.doubleBlankLine.test(s)&&(o=!0));let h=null;this.options.gfm&&(h=this.rules.other.listIsTask.exec(l))&&(r="[ ] "!==h[0],l=l.replace(this.rules.other.listReplaceTask,"")),i.items.push({type:"list_item",raw:s,task:!!h,checked:r,loose:!1,text:l,tokens:[]}),i.raw+=s}let s=i.items.at(-1);if(!s)return;s.raw=s.raw.trimEnd(),s.text=s.text.trimEnd(),i.raw=i.raw.trimEnd();for(let e=0;e<i.items.length;e++)if(this.lexer.state.top=!1,i.items[e].tokens=this.lexer.blockTokens(i.items[e].text,[]),!i.loose){let t=i.items[e].tokens.filter(e=>"space"===e.type);i.loose=t.length>0&&t.some(e=>this.rules.other.anyLine.test(e.raw))}if(i.loose)for(let e=0;e<i.items.length;e++)i.items[e].loose=!0;return i}}html(e){let t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:"pre"===t[1]||"script"===t[1]||"style"===t[1],text:t[0]}}def(e){let t=this.rules.block.def.exec(e);if(t){let e=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),r=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",n=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:e,raw:t[0],href:r,title:n}}}table(e){let t=this.rules.block.table.exec(e);if(!t||!this.rules.other.tableDelimiter.test(t[2]))return;let r=pp(t[1]),n=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),i=t[3]?.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split("\n"):[],a={type:"table",raw:t[0],header:[],align:[],rows:[]};if(r.length===n.length){for(let e of n)this.rules.other.tableAlignRight.test(e)?a.align.push("right"):this.rules.other.tableAlignCenter.test(e)?a.align.push("center"):this.rules.other.tableAlignLeft.test(e)?a.align.push("left"):a.align.push(null);for(let e=0;e<r.length;e++)a.header.push({text:r[e],tokens:this.lexer.inline(r[e]),header:!0,align:a.align[e]});for(let e of i)a.rows.push(pp(e,a.header.length).map((e,t)=>({text:e,tokens:this.lexer.inline(e),header:!1,align:a.align[t]})));return a}}lheading(e){let t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){let t=this.rules.block.paragraph.exec(e);if(t){let e="\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:e,tokens:this.lexer.inline(e)}}}text(e){let t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){let t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(e){let t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){let t=this.rules.inline.link.exec(e);if(t){let e=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(e)){if(!this.rules.other.endAngleBracket.test(e))return;let t=pb(e.slice(0,-1),"\\");if((e.length-t.length)%2==0)return}else{let e=pg(t[2],"()");if(-2===e)return;if(e>-1){let r=(0===t[0].indexOf("!")?5:4)+t[1].length+e;t[2]=t[2].substring(0,e),t[0]=t[0].substring(0,r).trim(),t[3]=""}}let r=t[2],n="";if(this.options.pedantic){let e=this.rules.other.pedanticHrefTitle.exec(r);e&&(r=e[1],n=e[3])}else n=t[3]?t[3].slice(1,-1):"";return r=r.trim(),this.rules.other.startAngleBracket.test(r)&&(r=this.options.pedantic&&!this.rules.other.endAngleBracket.test(e)?r.slice(1):r.slice(1,-1)),pm(t,{href:r?r.replace(this.rules.inline.anyPunctuation,"$1"):r,title:n?n.replace(this.rules.inline.anyPunctuation,"$1"):n},t[0],this.lexer,this.rules)}}reflink(e,t){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){let e=t[(r[2]||r[1]).replace(this.rules.other.multipleSpaceGlobal," ").toLowerCase()];if(!e){let e=r[0].charAt(0);return{type:"text",raw:e,text:e}}return pm(r,e,r[0],this.lexer,this.rules)}}emStrong(e,t,r=""){let n=this.rules.inline.emStrongLDelim.exec(e);if(!(!n||n[3]&&r.match(this.rules.other.unicodeAlphaNumeric))&&(!(n[1]||n[2])||!r||this.rules.inline.punctuation.exec(r))){let r=[...n[0]].length-1,i,a,o=r,s=0,l="*"===n[0][0]?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(l.lastIndex=0,t=t.slice(-1*e.length+r);null!=(n=l.exec(t));){if(!(i=n[1]||n[2]||n[3]||n[4]||n[5]||n[6]))continue;if(a=[...i].length,n[3]||n[4]){o+=a;continue}if((n[5]||n[6])&&r%3&&!((r+a)%3)){s+=a;continue}if((o-=a)>0)continue;a=Math.min(a,a+o+s);let t=[...n[0]][0].length,l=e.slice(0,r+n.index+t+a);if(Math.min(r,a)%2){let e=l.slice(1,-1);return{type:"em",raw:l,text:e,tokens:this.lexer.inlineTokens(e)}}let c=l.slice(2,-2);return{type:"strong",raw:l,text:c,tokens:this.lexer.inlineTokens(c)}}}}codespan(e){let t=this.rules.inline.code.exec(e);if(t){let e=t[2].replace(this.rules.other.newLineCharGlobal," "),r=this.rules.other.nonSpaceChar.test(e),n=this.rules.other.startingSpaceChar.test(e)&&this.rules.other.endingSpaceChar.test(e);return r&&n&&(e=e.substring(1,e.length-1)),{type:"codespan",raw:t[0],text:e}}}br(e){let t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){let t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){let t=this.rules.inline.autolink.exec(e);if(t){let e,r;return r="@"===t[2]?"mailto:"+(e=t[1]):e=t[1],{type:"link",raw:t[0],text:e,href:r,tokens:[{type:"text",raw:e,text:e}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let e,r;if("@"===t[2])r="mailto:"+(e=t[0]);else{let n;do n=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??"";while(n!==t[0])e=t[0],r="www."===t[1]?"http://"+t[0]:t[0]}return{type:"link",raw:t[0],text:e,href:r,tokens:[{type:"text",raw:e,text:e}]}}}inlineText(e){let t=this.rules.inline.text.exec(e);if(t){let e=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:e}}}},px=class e{tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||hh,this.options.tokenizer=this.options.tokenizer||new py,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={other:hm,block:pl.normal,inline:pc.normal};this.options.pedantic?(t.block=pl.pedantic,t.inline=pc.pedantic):this.options.gfm&&(t.block=pl.gfm,this.options.breaks?t.inline=pc.breaks:t.inline=pc.gfm),this.tokenizer.rules=t}static get rules(){return{block:pl,inline:pc}}static lex(t,r){return new e(r).lex(t)}static lexInline(t,r){return new e(r).inlineTokens(t)}lex(e){e=e.replace(hm.carriageReturn,"\n"),this.blockTokens(e,this.tokens);for(let e=0;e<this.inlineQueue.length;e++){let t=this.inlineQueue[e];this.inlineTokens(t.src,t.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],r=!1){for(this.options.pedantic&&(e=e.replace(hm.tabCharGlobal,"    ").replace(hm.spaceLine,""));e;){let n;if(this.options.extensions?.block?.some(r=>!!(n=r.call({lexer:this},e,t))&&(e=e.substring(n.raw.length),t.push(n),!0)))continue;if(n=this.tokenizer.space(e)){e=e.substring(n.raw.length);let r=t.at(-1);1===n.raw.length&&void 0!==r?r.raw+="\n":t.push(n);continue}if(n=this.tokenizer.code(e)){e=e.substring(n.raw.length);let r=t.at(-1);r?.type==="paragraph"||r?.type==="text"?(r.raw+="\n"+n.raw,r.text+="\n"+n.text,this.inlineQueue.at(-1).src=r.text):t.push(n);continue}if((n=this.tokenizer.fences(e))||(n=this.tokenizer.heading(e))||(n=this.tokenizer.hr(e))||(n=this.tokenizer.blockquote(e))||(n=this.tokenizer.list(e))||(n=this.tokenizer.html(e))){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.def(e)){e=e.substring(n.raw.length);let r=t.at(-1);r?.type==="paragraph"||r?.type==="text"?(r.raw+="\n"+n.raw,r.text+="\n"+n.raw,this.inlineQueue.at(-1).src=r.text):this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title});continue}if((n=this.tokenizer.table(e))||(n=this.tokenizer.lheading(e))){e=e.substring(n.raw.length),t.push(n);continue}let i=e;if(this.options.extensions?.startBlock){let t,r=1/0,n=e.slice(1);this.options.extensions.startBlock.forEach(e=>{"number"==typeof(t=e.call({lexer:this},n))&&t>=0&&(r=Math.min(r,t))}),r<1/0&&r>=0&&(i=e.substring(0,r+1))}if(this.state.top&&(n=this.tokenizer.paragraph(i))){let a=t.at(-1);r&&a?.type==="paragraph"?(a.raw+="\n"+n.raw,a.text+="\n"+n.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=a.text):t.push(n),r=i.length!==e.length,e=e.substring(n.raw.length);continue}if(n=this.tokenizer.text(e)){e=e.substring(n.raw.length);let r=t.at(-1);r?.type==="text"?(r.raw+="\n"+n.raw,r.text+="\n"+n.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=r.text):t.push(n);continue}if(e){let t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw Error(t)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let r=e,n=null;if(this.tokens.links){let e=Object.keys(this.tokens.links);if(e.length>0)for(;null!=(n=this.tokenizer.rules.inline.reflinkSearch.exec(r));)e.includes(n[0].slice(n[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,n.index)+"["+"a".repeat(n[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(n=this.tokenizer.rules.inline.anyPunctuation.exec(r));)r=r.slice(0,n.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;null!=(n=this.tokenizer.rules.inline.blockSkip.exec(r));)r=r.slice(0,n.index)+"["+"a".repeat(n[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let i=!1,a="";for(;e;){let n;if(i||(a=""),i=!1,this.options.extensions?.inline?.some(r=>!!(n=r.call({lexer:this},e,t))&&(e=e.substring(n.raw.length),t.push(n),!0)))continue;if((n=this.tokenizer.escape(e))||(n=this.tokenizer.tag(e))||(n=this.tokenizer.link(e))){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(n.raw.length);let r=t.at(-1);"text"===n.type&&r?.type==="text"?(r.raw+=n.raw,r.text+=n.text):t.push(n);continue}if((n=this.tokenizer.emStrong(e,r,a))||(n=this.tokenizer.codespan(e))||(n=this.tokenizer.br(e))||(n=this.tokenizer.del(e))||(n=this.tokenizer.autolink(e))||!this.state.inLink&&(n=this.tokenizer.url(e))){e=e.substring(n.raw.length),t.push(n);continue}let o=e;if(this.options.extensions?.startInline){let t,r=1/0,n=e.slice(1);this.options.extensions.startInline.forEach(e=>{"number"==typeof(t=e.call({lexer:this},n))&&t>=0&&(r=Math.min(r,t))}),r<1/0&&r>=0&&(o=e.substring(0,r+1))}if(n=this.tokenizer.inlineText(o)){e=e.substring(n.raw.length),"_"!==n.raw.slice(-1)&&(a=n.raw.slice(-1)),i=!0;let r=t.at(-1);r?.type==="text"?(r.raw+=n.raw,r.text+=n.text):t.push(n);continue}if(e){let t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw Error(t)}}return t}},pw=class{options;parser;constructor(e){this.options=e||hh}space(e){return""}code({text:e,lang:t,escaped:r}){let n=(t||"").match(hm.notSpaceStart)?.[0],i=e.replace(hm.endingNewline,"")+"\n";return n?'<pre><code class="language-'+pf(n)+'">'+(r?i:pf(i,!0))+"</code></pre>\n":"<pre><code>"+(r?i:pf(i,!0))+"</code></pre>\n"}blockquote({tokens:e}){let t=this.parser.parse(e);return`<blockquote>
${t}</blockquote>
`}html({text:e}){return e}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>
`}hr(e){return"<hr>\n"}list(e){let t=e.ordered,r=e.start,n="";for(let t=0;t<e.items.length;t++){let r=e.items[t];n+=this.listitem(r)}let i=t?"ol":"ul";return"<"+i+(t&&1!==r?' start="'+r+'"':"")+">\n"+n+"</"+i+">\n"}listitem(e){let t="";if(e.task){let r=this.checkbox({checked:!!e.checked});e.loose?e.tokens[0]?.type==="paragraph"?(e.tokens[0].text=r+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&"text"===e.tokens[0].tokens[0].type&&(e.tokens[0].tokens[0].text=r+" "+pf(e.tokens[0].tokens[0].text),e.tokens[0].tokens[0].escaped=!0)):e.tokens.unshift({type:"text",raw:r+" ",text:r+" ",escaped:!0}):t+=r+" "}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let t="",r="";for(let t=0;t<e.header.length;t++)r+=this.tablecell(e.header[t]);t+=this.tablerow({text:r});let n="";for(let t=0;t<e.rows.length;t++){let i=e.rows[t];r="";for(let e=0;e<i.length;e++)r+=this.tablecell(i[e]);n+=this.tablerow({text:r})}return n&&(n=`<tbody>${n}</tbody>`),"<table>\n<thead>\n"+t+"</thead>\n"+n+"</table>\n"}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){let t=this.parser.parseInline(e.tokens),r=e.header?"th":"td";return(e.align?`<${r} align="${e.align}">`:`<${r}>`)+t+`</${r}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${pf(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:r}){let n=this.parser.parseInline(r),i=ph(e);if(null===i)return n;let a='<a href="'+(e=i)+'"';return t&&(a+=' title="'+pf(t)+'"'),a+=">"+n+"</a>"}image({href:e,title:t,text:r,tokens:n}){n&&(r=this.parser.parseInline(n,this.parser.textRenderer));let i=ph(e);if(null===i)return pf(r);e=i;let a=`<img src="${e}" alt="${r}"`;return t&&(a+=` title="${pf(t)}"`),a+=">"}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:pf(e.text)}},p_=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}},pS=class e{options;renderer;textRenderer;constructor(e){this.options=e||hh,this.options.renderer=this.options.renderer||new pw,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new p_}static parse(t,r){return new e(r).parse(t)}static parseInline(t,r){return new e(r).parseInline(t)}parse(e,t=!0){let r="";for(let n=0;n<e.length;n++){let i=e[n];if(this.options.extensions?.renderers?.[i.type]){let e=i,t=this.options.extensions.renderers[e.type].call({parser:this},e);if(!1!==t||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(e.type)){r+=t||"";continue}}let a=i;switch(a.type){case"space":r+=this.renderer.space(a);continue;case"hr":r+=this.renderer.hr(a);continue;case"heading":r+=this.renderer.heading(a);continue;case"code":r+=this.renderer.code(a);continue;case"table":r+=this.renderer.table(a);continue;case"blockquote":r+=this.renderer.blockquote(a);continue;case"list":r+=this.renderer.list(a);continue;case"html":r+=this.renderer.html(a);continue;case"paragraph":r+=this.renderer.paragraph(a);continue;case"text":{let i=a,o=this.renderer.text(i);for(;n+1<e.length&&"text"===e[n+1].type;)i=e[++n],o+="\n"+this.renderer.text(i);t?r+=this.renderer.paragraph({type:"paragraph",raw:o,text:o,tokens:[{type:"text",raw:o,text:o,escaped:!0}]}):r+=o;continue}default:{let e='Token with "'+a.type+'" type was not found.';if(this.options.silent)return console.error(e),"";throw Error(e)}}}return r}parseInline(e,t=this.renderer){let r="";for(let n=0;n<e.length;n++){let i=e[n];if(this.options.extensions?.renderers?.[i.type]){let e=this.options.extensions.renderers[i.type].call({parser:this},i);if(!1!==e||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(i.type)){r+=e||"";continue}}let a=i;switch(a.type){case"escape":case"text":r+=t.text(a);break;case"html":r+=t.html(a);break;case"link":r+=t.link(a);break;case"image":r+=t.image(a);break;case"strong":r+=t.strong(a);break;case"em":r+=t.em(a);break;case"codespan":r+=t.codespan(a);break;case"br":r+=t.br(a);break;case"del":r+=t.del(a);break;default:{let e='Token with "'+a.type+'" type was not found.';if(this.options.silent)return console.error(e),"";throw Error(e)}}}return r}},pE=class{options;block;constructor(e){this.options=e||hh}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}provideLexer(){return this.block?px.lex:px.lexInline}provideParser(){return this.block?pS.parse:pS.parseInline}},pk=new class{defaults=hf();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=pS;Renderer=pw;TextRenderer=p_;Lexer=px;Tokenizer=py;Hooks=pE;constructor(...e){this.use(...e)}walkTokens(e,t){let r=[];for(let n of e)switch(r=r.concat(t.call(this,n)),n.type){case"table":{let e=n;for(let n of e.header)r=r.concat(this.walkTokens(n.tokens,t));for(let n of e.rows)for(let e of n)r=r.concat(this.walkTokens(e.tokens,t));break}case"list":{let e=n;r=r.concat(this.walkTokens(e.items,t));break}default:{let e=n;this.defaults.extensions?.childTokens?.[e.type]?this.defaults.extensions.childTokens[e.type].forEach(n=>{let i=e[n].flat(1/0);r=r.concat(this.walkTokens(i,t))}):e.tokens&&(r=r.concat(this.walkTokens(e.tokens,t)))}}return r}use(...e){let t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(e=>{let r={...e};if(r.async=this.defaults.async||r.async||!1,e.extensions&&(e.extensions.forEach(e=>{if(!e.name)throw Error("extension name required");if("renderer"in e){let r=t.renderers[e.name];r?t.renderers[e.name]=function(...t){let n=e.renderer.apply(this,t);return!1===n&&(n=r.apply(this,t)),n}:t.renderers[e.name]=e.renderer}if("tokenizer"in e){if(!e.level||"block"!==e.level&&"inline"!==e.level)throw Error("extension level must be 'block' or 'inline'");let r=t[e.level];r?r.unshift(e.tokenizer):t[e.level]=[e.tokenizer],e.start&&("block"===e.level?t.startBlock?t.startBlock.push(e.start):t.startBlock=[e.start]:"inline"===e.level&&(t.startInline?t.startInline.push(e.start):t.startInline=[e.start]))}"childTokens"in e&&e.childTokens&&(t.childTokens[e.name]=e.childTokens)}),r.extensions=t),e.renderer){let t=this.defaults.renderer||new pw(this.defaults);for(let r in e.renderer){if(!(r in t))throw Error(`renderer '${r}' does not exist`);if(["options","parser"].includes(r))continue;let n=r,i=e.renderer[n],a=t[n];t[n]=(...e)=>{let r=i.apply(t,e);return!1===r&&(r=a.apply(t,e)),r||""}}r.renderer=t}if(e.tokenizer){let t=this.defaults.tokenizer||new py(this.defaults);for(let r in e.tokenizer){if(!(r in t))throw Error(`tokenizer '${r}' does not exist`);if(["options","rules","lexer"].includes(r))continue;let n=r,i=e.tokenizer[n],a=t[n];t[n]=(...e)=>{let r=i.apply(t,e);return!1===r&&(r=a.apply(t,e)),r}}r.tokenizer=t}if(e.hooks){let t=this.defaults.hooks||new pE;for(let r in e.hooks){if(!(r in t))throw Error(`hook '${r}' does not exist`);if(["options","block"].includes(r))continue;let n=r,i=e.hooks[n],a=t[n];pE.passThroughHooks.has(r)?t[n]=e=>{if(this.defaults.async)return Promise.resolve(i.call(t,e)).then(e=>a.call(t,e));let r=i.call(t,e);return a.call(t,r)}:t[n]=(...e)=>{let r=i.apply(t,e);return!1===r&&(r=a.apply(t,e)),r}}r.hooks=t}if(e.walkTokens){let t=this.defaults.walkTokens,n=e.walkTokens;r.walkTokens=function(e){let r=[];return r.push(n.call(this,e)),t&&(r=r.concat(t.call(this,e))),r}}this.defaults={...this.defaults,...r}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return px.lex(e,t??this.defaults)}parser(e,t){return pS.parse(e,t??this.defaults)}parseMarkdown(e){return(t,r)=>{let n={...r},i={...this.defaults,...n},a=this.onError(!!i.silent,!!i.async);if(!0===this.defaults.async&&!1===n.async)return a(Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(null==t)return a(Error("marked(): input parameter is undefined or null"));if("string"!=typeof t)return a(Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));i.hooks&&(i.hooks.options=i,i.hooks.block=e);let o=i.hooks?i.hooks.provideLexer():e?px.lex:px.lexInline,s=i.hooks?i.hooks.provideParser():e?pS.parse:pS.parseInline;if(i.async)return Promise.resolve(i.hooks?i.hooks.preprocess(t):t).then(e=>o(e,i)).then(e=>i.hooks?i.hooks.processAllTokens(e):e).then(e=>i.walkTokens?Promise.all(this.walkTokens(e,i.walkTokens)).then(()=>e):e).then(e=>s(e,i)).then(e=>i.hooks?i.hooks.postprocess(e):e).catch(a);try{i.hooks&&(t=i.hooks.preprocess(t));let e=o(t,i);i.hooks&&(e=i.hooks.processAllTokens(e)),i.walkTokens&&this.walkTokens(e,i.walkTokens);let r=s(e,i);return i.hooks&&(r=i.hooks.postprocess(r)),r}catch(e){return a(e)}}}onError(e,t){return r=>{if(r.message+="\nPlease report this to https://github.com/markedjs/marked.",e){let e="<p>An error occurred:</p><pre>"+pf(r.message+"",!0)+"</pre>";return t?Promise.resolve(e):e}if(t)return Promise.reject(r);throw r}}};function pN(e,t){return pk.parse(e,t)}pN.options=pN.setOptions=function(e){return pk.setOptions(e),pN.defaults=pk.defaults,hp(pN.defaults),pN},pN.getDefaults=hf,pN.defaults=hh,pN.use=function(...e){return pk.use(...e),pN.defaults=pk.defaults,hp(pN.defaults),pN},pN.walkTokens=function(e,t){return pk.walkTokens(e,t)},pN.parseInline=pk.parseInline,pN.Parser=pS,pN.parser=pS.parse,pN.Renderer=pw,pN.TextRenderer=p_,pN.Lexer=px,pN.lexer=px.lex,pN.Tokenizer=py,pN.Hooks=pE,pN.parse=pN,pN.options,pN.setOptions,pN.use,pN.walkTokens,pN.parseInline,pS.parse,px.lex;var pj=l,pC=x,pM=iB;let pA="foliate-note:",pR=e=>{let t=e.addAnnotation.bind(e);return e.addAnnotation=(e,r=!1)=>t({value:e.cfi,...e},r),e};var pT=p,pO=hl;function pL(e,t){if(!t)return!1;let r=pO.collapse(t),n=pO.collapse(t,!0);return pO.compare(e,r)>=0&&0>=pO.compare(e,n)}let pI=(e,t)=>{let r=(0,pT.useRef)(null),n=(0,pT.useMemo)(()=>pL(e,t?.location),[e,t]);return(0,pT.useEffect)(()=>{if(!r.current||!n)return;let e=r.current,t=e.getBoundingClientRect();t.top>=0&&t.bottom<=window.innerHeight||e.scrollIntoView({behavior:"smooth",block:"center"}),e.setAttribute("aria-current","page")},[n]),{isCurrent:n,viewRef:r}};var pP=a;let pB=({children:e,onClick:t,disabled:r=!1,className:n,variant:i="primary",size:a="sm",type:o="button"})=>{let s={primary:"text-blue-500 hover:text-blue-600",secondary:"text-gray-500 hover:text-gray-600",danger:"text-red-500 hover:text-red-600",success:"text-green-500 hover:text-green-600"},l={sm:"font-size-sm h-[1.3em] min-h-[1.3em]",md:"font-size-md h-[1.5em] min-h-[1.5em]",lg:"font-size-lg h-[1.8em] min-h-[1.8em]"};return(0,pP.jsx)("button",{type:o,className:h("content settings-content btn btn-ghost hover:bg-transparent","flex items-end p-0",l[a],r?"btn-disabled !bg-opacity-0":"",n),onClick:t,disabled:r,children:(0,pP.jsx)("div",{className:h("align-bottom",l[a].split(" ")[0],s[i]),children:e})})};var pD=a,pz=p;let pF=(0,pz.forwardRef)(({value:e,onChange:t,onBlur:r,onSave:n,onEscape:i,placeholder:a,className:o,autoFocus:s=!1,spellCheck:l=!1,disabled:c=!1,maxRows:u,minRows:d=1},f)=>{let p=(0,pz.useRef)(null);(0,pz.useImperativeHandle)(f,()=>({focus:()=>{p.current?.focus()},blur:()=>{p.current?.blur()},getValue:()=>p.current?.value||"",setValue:e=>{p.current&&(p.current.value=e,b())},getElement:()=>p.current})),(0,pz.useEffect)(()=>{s&&p.current&&p.current.focus()},[s]),(0,pz.useEffect)(()=>{p.current&&(p.current.value=e,b())},[e]);let b=()=>{if(p.current){p.current.style.height="auto";let e=p.current.scrollHeight,t=1/0;u&&(t=parseInt(getComputedStyle(p.current).lineHeight)*u);let r=Math.min(Math.max(e,(parseInt(getComputedStyle(p.current).lineHeight)||20)*d),t);p.current.style.height=`${r}px`}},g=e=>{b(),t(e.target.value)},m=e=>{if("Escape"===e.key&&i)return void i();if("Enter"===e.key&&(e.metaKey||e.ctrlKey)&&n){e.preventDefault(),n();return}};return(0,pD.jsx)("textarea",{ref:p,className:h("textarea textarea-ghost min-h-[1em] resize-none !outline-none","inset-0 w-full rounded-none border-0 bg-transparent p-0","content font-size-sm",o),dir:"auto",rows:d,spellCheck:l,disabled:c,onChange:g,onBlur:r,onKeyDown:m,placeholder:a||""})});pF.displayName="TextEditor";let p$=pF,pU=({bookKey:e,item:t,onClick:r})=>{let n=eU(),{envConfig:i}=(0,pj.useEnv)(),{settings:a}=(0,pC.useSettingsStore)(),{getConfig:o,saveConfig:s,updateBooknotes:l}=ex(),{getProgress:c,getView:u,getViewsById:d}=e_(),{setNotebookEditAnnotation:f,setNotebookVisible:p}=eN(),{text:b,cfi:g,note:m}=t,v=(0,hd.useRef)(null),[y,x]=(0,hd.useState)(b||""),[w,_]=(0,hd.useState)(!1),S=(0,pM.useResponsiveSize)(3),{isCurrent:E,viewRef:k}=pI(g,c(e)),N=t=>{t.preventDefault(),eR.dispatch("navigate",{bookKey:e,cfi:g}),r?.(),u(e)?.goTo(g),m&&p(!0)},j=t=>{if(!e)return;let r=o(e);if(!r)return;let{booknotes:n=[]}=r;n.forEach(r=>{r.id===t.id&&(r.deletedAt=Date.now(),d(e.split("-")[0]).forEach(e=>e?.addAnnotation({...r,value:`${pA}${r.cfi}`},!0)))});let c=l(e,n);c&&s(i,e,c,a)},C=e=>{p(!0),f(e)},M=()=>{x(b||""),_(!0)},A=()=>{_(!1);let r=o(e);if(!r||!y)return;let{booknotes:n=[]}=r,c=n.findIndex(e=>t.id===e.id);if(-1===c)return;n[c].updatedAt=Date.now(),n[c].text=y;let u=l(e,n);u&&s(i,e,u,a)};return w?(0,hc.jsxs)("div",{className:h("border-base-300 content group relative my-2 cursor-pointer rounded-lg p-2",E?"bg-base-300/85 hover:bg-base-300":"hover:bg-base-300/55 bg-base-100","transition-all duration-300 ease-in-out"),children:[(0,hc.jsx)("div",{className:"flex w-full",children:(0,hc.jsx)(p$,{className:"!leading-normal",ref:v,value:y,onChange:x,onSave:A,onEscape:()=>_(!1),spellCheck:!1})}),(0,hc.jsxs)("div",{className:"flex justify-end space-x-3 p-2",dir:"ltr",children:[(0,hc.jsx)(pB,{onClick:()=>_(!1),children:n("Cancel")}),(0,hc.jsx)(pB,{onClick:A,disabled:!y,children:n("Save")})]})]}):(0,hc.jsxs)("li",{role:"button",ref:k,className:h("booknote-item border-base-300 content group relative my-2 cursor-pointer rounded-lg p-2",E?"bg-base-300/85 hover:bg-base-300 focus:bg-base-300":"hover:bg-base-300/55 focus:bg-base-300/55 bg-base-100","transition-all duration-300 ease-in-out"),tabIndex:0,onClick:N,onKeyDown:e=>{"Enter"===e.key||" "===e.key?N(e):e.stopPropagation()},children:[(0,hc.jsxs)("div",{className:h("min-h-4 p-0 transition-all duration-300 ease-in-out"),style:{"--top-override":"0.7rem","--end-override":"0.3rem"},children:[t.note&&(0,hc.jsx)("div",{className:"content prose prose-sm font-size-sm",dir:"auto",dangerouslySetInnerHTML:{__html:pN.parse(t.note)}}),(0,hc.jsxs)("div",{className:"flex items-start",children:[t.note&&(0,hc.jsx)("div",{className:"me-2 mt-2.5 min-h-full self-stretch rounded-xl bg-gray-300",style:{minWidth:`${S}px`}}),(0,hc.jsx)("div",{className:h("content font-size-sm line-clamp-3",t.note&&"mt-2"),children:(0,hc.jsx)("span",{className:h("booknote-text inline leading-normal",t.note&&"content font-size-xs text-gray-500",("underline"===t.style||"squiggly"===t.style)&&"underline decoration-2","highlight"===t.style&&`bg-${t.color}-500 bg-opacity-40`,"underline"===t.style&&`decoration-${t.color}-400`,"squiggly"===t.style&&`decoration-wavy decoration-${t.color}-400`),children:b||""})})]})]}),(0,hc.jsx)("div",{className:h("max-h-0 overflow-hidden p-0","transition-[max-height] duration-300 ease-in-out","group-hover:max-h-8 group-hover:overflow-visible","group-focus-within:max-h-8 group-focus-within:overflow-visible"),style:{"--bottom-override":0},onClick:e=>e.stopPropagation(),children:(0,hc.jsxs)("div",{className:"flex cursor-default items-center justify-between",children:[(0,hc.jsx)("div",{className:"flex items-center",children:(0,hc.jsx)("span",{className:"text-sm text-gray-500 sm:text-xs",children:(0,hu.default)(t.createdAt).fromNow()})}),(0,hc.jsxs)("div",{className:"flex items-center justify-end space-x-3 p-2",dir:"ltr",children:[(t.note||"bookmark"===t.type)&&(0,hc.jsx)(pB,{onClick:"bookmark"===t.type?M:C.bind(null,t),variant:"primary",className:"opacity-0 transition duration-300 ease-in-out group-focus-within:opacity-100 group-hover:opacity-100",children:n("Edit")}),(0,hc.jsx)(pB,{onClick:j.bind(null,t),variant:"danger",className:"opacity-0 transition duration-300 ease-in-out group-focus-within:opacity-100 group-hover:opacity-100",children:n("Delete")})]})]})})]})},pH=({type:e,bookKey:t,toc:r})=>{let{getConfig:n}=ex(),{setActiveBooknoteType:i,setBooknoteResults:a}=ek(),{booknotes:o=[]}=n(t),s=o.filter(t=>t.type===e&&!t.deletedAt),l={};for(let e of s){let t=eu(r??[],e.cfi),n=t?.href||"",i=t?.label||"",a=t?.id||0;l[n]||(l[n]={id:a,href:n,label:i,booknotes:[]}),l[n].booknotes.push(e)}Object.values(l).forEach(e=>{e.booknotes.sort((e,t)=>hl.compare(e.cfi,t.cfi))});let c=Object.values(l).sort((e,t)=>e.id-t.id),u=()=>{if(0===s.length)return;let r=[...s].sort((e,t)=>hl.compare(e.cfi,t.cfi));i(t,e),a(t,r)};return(0,hs.jsx)("div",{className:"rounded pt-2",children:(0,hs.jsx)("ul",{role:"tree",className:"px-2",children:c.map(e=>(0,hs.jsxs)("li",{className:"p-2",children:[(0,hs.jsx)("h3",{className:"content font-size-base line-clamp-1 font-normal",children:e.label}),(0,hs.jsx)("ul",{children:e.booknotes.map((e,r)=>(0,hs.jsx)(pU,{bookKey:t,item:e,onClick:u},`${r}-${e.cfi}`))})]},e.href))})})};var pV=a;function pq(e){return nV({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M441.1 131.1l-44.9 45.1c-.9.9-2.3 1.3-3.5 1.1l-46.4-8.4c-1.6-.3-2.9-1.6-3.2-3.2l-8.3-46.4c-.2-1.3.2-2.6 1.1-3.5l44.8-45c3.5-3.5 3-9.3-1-12.1-10.1-7.2-22.1-10.7-31.8-10.7-.7 0-1.4 0-2 .1-12.5.7-39.3 7.7-60 29.7-20.1 21.2-41.1 60.6-22.5 104.5 2.2 5.3 4.7 12.3-2.7 19.7C253.1 209.4 61 390.3 61 390.3c-18 15.5-16.7 44.2-.1 60.9 8.5 8.4 20 12.8 31.3 12.8 11.1 0 21.9-4.2 29.6-13.1 0 0 179.4-191.1 188.2-199.8 4-3.9 7.7-5.1 11.1-5.1 3.3 0 6.3 1.2 8.6 2.4 9.9 5.1 21 7.4 32.4 7.4 26.8 0 55-12.4 72.2-29.6 24.4-24.4 28.9-48 29.6-60.1.6-9.9-2.2-22.6-10.7-34.2-2.9-3.8-8.6-4.2-12.1-.8zM102.5 429.3c-5.5 5.4-14.4 5.4-19.9 0-5.4-5.5-5.4-14.4 0-19.9 5.5-5.4 14.4-5.4 19.9 0 5.4 5.6 5.4 14.5 0 19.9z"},child:[]}]})(e)}function pW(e){return nV({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"circle",attr:{cx:"92",cy:"256",r:"28"},child:[]},{tag:"circle",attr:{cx:"92",cy:"132",r:"28"},child:[]},{tag:"circle",attr:{cx:"92",cy:"380",r:"28"},child:[]},{tag:"path",attr:{d:"M432 240H191.5c-8.8 0-16 7.2-16 16s7.2 16 16 16H432c8.8 0 16-7.2 16-16s-7.2-16-16-16zM432 364H191.5c-8.8 0-16 7.2-16 16s7.2 16 16 16H432c8.8 0 16-7.2 16-16s-7.2-16-16-16zM191.5 148H432c8.8 0 16-7.2 16-16s-7.2-16-16-16H191.5c-8.8 0-16 7.2-16 16s7.2 16 16 16z"},child:[]}]})(e)}function pK(e){return nV({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 90c44.3 0 86 17.3 117.4 48.6C404.7 170 422 211.7 422 256s-17.3 86-48.6 117.4C342 404.7 300.3 422 256 422s-86-17.3-117.4-48.6C107.3 342 90 300.3 90 256s17.3-86 48.6-117.4C170 107.3 211.7 90 256 90m0-42C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48z"},child:[]},{tag:"path",attr:{d:"M360 330.9L330.9 360 256 285.1 181.1 360 152 330.9l74.9-74.9-74.9-74.9 29.1-29.1 74.9 74.9 74.9-74.9 29.1 29.1-74.9 74.9z"},child:[]}]})(e)}function pG(e){return nV({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 48C140.559 48 48 140.559 48 256c0 115.436 92.559 208 208 208 115.435 0 208-92.564 208-208 0-115.441-92.564-208-208-208zm104.002 282.881l-29.12 29.117L256 285.117l-74.881 74.881-29.121-29.117L226.881 256l-74.883-74.881 29.121-29.116L256 226.881l74.881-74.878 29.12 29.116L285.119 256l74.883 74.881z"},child:[]}]})(e)}function pX(e){return nV({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M396.795 396.8H320V448h128V320h-51.205zM396.8 115.205V192H448V64H320v51.205zM115.205 115.2H192V64H64v128h51.205zM115.2 396.795V320H64v128h128v-51.205z"},child:[]}]})(e)}function pZ(e){return nV({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M112,60a16,16,0,1,1,16,16A16,16,0,0,1,112,60Zm16,52a16,16,0,1,0,16,16A16,16,0,0,0,128,112Zm0,68a16,16,0,1,0,16,16A16,16,0,0,0,128,180Z"},child:[]}]})(e)}function pY(e){return nV({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M253.66,106.34a8,8,0,0,0-11.32,0L192,156.69,107.31,72l50.35-50.34a8,8,0,1,0-11.32-11.32L96,60.69A16,16,0,0,0,93.18,79.5L72,100.69a16,16,0,0,0,0,22.62L76.69,128,18.34,186.34a8,8,0,0,0,3.13,13.25l72,24A7.88,7.88,0,0,0,96,224a8,8,0,0,0,5.66-2.34L136,187.31l4.69,4.69a16,16,0,0,0,22.62,0l21.18-21.18A16,16,0,0,0,203.31,168l50.35-50.34A8,8,0,0,0,253.66,106.34ZM152,180.69,83.31,112,104,91.31,172.69,160Z"},child:[]}]})(e)}function pJ(e){return nV({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M233.54,142.23a8,8,0,0,0-8-2,88.08,88.08,0,0,1-109.8-109.8,8,8,0,0,0-10-10,104.84,104.84,0,0,0-52.91,37A104,104,0,0,0,136,224a103.09,103.09,0,0,0,62.52-20.88,104.84,104.84,0,0,0,37-52.91A8,8,0,0,0,233.54,142.23ZM188.9,190.34A88,88,0,0,1,65.66,67.11a89,89,0,0,1,31.4-26A106,106,0,0,0,96,56,104.11,104.11,0,0,0,200,160a106,106,0,0,0,14.92-1.06A89,89,0,0,1,188.9,190.34Z"},child:[]}]})(e)}function pQ(e){return nV({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M229.66,58.34l-32-32a8,8,0,0,0-11.32,0l-96,96A8,8,0,0,0,88,128v32a8,8,0,0,0,8,8h32a8,8,0,0,0,5.66-2.34l96-96A8,8,0,0,0,229.66,58.34ZM124.69,152H104V131.31l64-64L188.69,88ZM200,76.69,179.31,56,192,43.31,212.69,64ZM224,128v80a16,16,0,0,1-16,16H48a16,16,0,0,1-16-16V48A16,16,0,0,1,48,32h80a8,8,0,0,1,0,16H48V208H208V128a8,8,0,0,1,16,0Z"},child:[]}]})(e)}function p0(e){return nV({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M224,128a8,8,0,0,1-8,8H136v80a8,8,0,0,1-16,0V136H40a8,8,0,0,1,0-16h80V40a8,8,0,0,1,16,0v80h80A8,8,0,0,1,224,128Z"},child:[]}]})(e)}function p1(e){return nV({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M120,40V16a8,8,0,0,1,16,0V40a8,8,0,0,1-16,0Zm72,88a64,64,0,1,1-64-64A64.07,64.07,0,0,1,192,128Zm-16,0a48,48,0,1,0-48,48A48.05,48.05,0,0,0,176,128ZM58.34,69.66A8,8,0,0,0,69.66,58.34l-16-16A8,8,0,0,0,42.34,53.66Zm0,116.68-16,16a8,8,0,0,0,11.32,11.32l16-16a8,8,0,0,0-11.32-11.32ZM192,72a8,8,0,0,0,5.66-2.34l16-16a8,8,0,0,0-11.32-11.32l-16,16A8,8,0,0,0,192,72Zm5.66,114.34a8,8,0,0,0-11.32,11.32l16,16a8,8,0,0,0,11.32-11.32ZM48,128a8,8,0,0,0-8-8H16a8,8,0,0,0,0,16H40A8,8,0,0,0,48,128Zm80,80a8,8,0,0,0-8,8v24a8,8,0,0,0,16,0V216A8,8,0,0,0,128,208Zm112-88H216a8,8,0,0,0,0,16h24a8,8,0,0,0,0-16Z"},child:[]}]})(e)}var p2=l;let p3=({activeTab:e,onTabChange:t})=>{let r=eU(),{appService:n}=(0,p2.useEnv)(),i=["toc","annotations","bookmarks"];return(0,pV.jsxs)("div",{className:h("bottom-tab border-base-300/50 bg-base-200/20 relative flex w-full border-t",n?.hasRoundedWindow&&"rounded-window-bottom-left"),dir:"ltr",children:[(0,pV.jsx)("div",{className:h("bg-base-300/85 absolute bottom-1.5 start-1 z-10 h-[calc(100%-12px)] w-[calc(33.3%-8px)] rounded-lg","transform transition-transform duration-300","toc"===e&&"translate-x-0","annotations"===e&&"translate-x-[calc(100%+8px)]","bookmarks"===e&&"translate-x-[calc(200%+16px)]")}),i.map(e=>(0,pV.jsx)("div",{tabIndex:0,role:"button",className:"z-[11] m-1.5 flex-1 cursor-pointer rounded-md p-2",onClick:()=>t(e),onKeyDown:r=>{("Enter"===r.key||" "===r.key)&&(r.preventDefault(),t(e))},title:"toc"===e?r("TOC"):"annotations"===e?r("Annotate"):r("Bookmark"),"aria-label":"toc"===e?r("TOC"):"annotations"===e?r("Annotate"):r("Bookmark"),children:(0,pV.jsx)("div",{className:h("m-0 flex h-6 items-center p-0"),children:"toc"===e?(0,pV.jsx)(pW,{className:"mx-auto"}):"annotations"===e?(0,pV.jsx)(pQ,{className:"mx-auto"}):(0,pV.jsx)(nK,{className:"mx-auto"})})},e))]})},p4=({bookDoc:e,sideBarBookKey:t})=>{let{safeAreaInsets:r}=(0,cn.useThemeStore)(),{setHoveredBookKey:n}=e_(),{setSideBarVisible:i}=ek(),{getConfig:a,setConfig:o}=ex(),s=a(t),[l,c]=(0,cr.useState)(s?.viewSettings?.sideBarTab||"toc"),[u,d]=(0,cr.useState)(!1),[f,p]=(0,cr.useState)(l),b=window.innerWidth<640||window.innerHeight<640;(0,cr.useEffect)(()=>{t&&c(a(t).viewSettings.sideBarTab)},[t]);let g=e=>{d(!0);let r=setTimeout(()=>{if(l===e&&b){n(t),i(!1);return}p(e),d(!1),o(t,s),clearTimeout(r)},300);c(e);let s=a(t);s.viewSettings.sideBarTab=e};return(0,ct.jsxs)(ct.Fragment,{children:[(0,ct.jsx)("div",{className:h("sidebar-content flex h-full min-h-0 flex-grow flex-col shadow-inner","font-sans text-base font-normal sm:text-sm"),children:(0,ct.jsx)(fT,{className:"min-h-0 flex-1",options:{scrollbars:{autoHide:"scroll",clickScroll:!0},showNativeOverlaidScrollbars:!1},defer:!0,children:(0,ct.jsxs)("div",{className:h("scroll-container h-full transition-opacity duration-300 ease-in-out",{"opacity-0":u,"opacity-100":!u}),children:["toc"===f&&e.toc&&(0,ct.jsx)(ho,{toc:e.toc,sections:e.sections,bookKey:t}),"annotations"===f&&(0,ct.jsx)(pH,{type:"annotation",toc:e.toc??[],bookKey:t}),"bookmarks"===f&&(0,ct.jsx)(pH,{type:"bookmark",toc:e.toc??[],bookKey:t})]})})}),(0,ct.jsx)("div",{className:"flex-shrink-0",style:{paddingBottom:`${(r?.bottom||0)/2}px`},children:(0,ct.jsx)(p3,{activeTab:l,onTabChange:g})})]})};var p6=a,p5=p,p8=y,p9=iB,p7=eg;let be=({book:e})=>{let{title:t,author:r}=e,n=eU(),{isDarkMode:i}=(0,p8.useThemeStore)(),a=(0,p9.useResponsiveSize)(18),o=(0,p5.useRef)(null),s=()=>{eR.dispatchSync("show-book-details",e)};return(0,p6.jsxs)("div",{className:"flex h-20 w-full items-center",children:[(0,p6.jsx)("div",{ref:o,className:h("me-4 aspect-[28/41] max-h-16 w-[15%] max-w-12 overflow-hidden rounded-sm shadow-md",i?"mix-blend-screen":"mix-blend-multiply"),children:(0,p6.jsx)(s_,{book:e,mode:"list",coverFit:"crop",imageClassName:"rounded-sm",onImageError:()=>o.current.style.display="none"})}),(0,p6.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,p6.jsx)("h4",{className:"line-clamp-2 w-[90%] text-sm font-semibold",children:(0,p7.formatTitle)(t).replace(/\u00A0/g," ")}),(0,p6.jsx)("p",{className:"truncate text-xs opacity-75",children:(0,p7.formatAuthors)(r)})]}),(0,p6.jsx)("button",{className:"btn btn-ghost hover:bg-base-300 h-6 min-h-6 w-6 rounded-full p-0 transition-colors","aria-label":n("More Info"),onClick:s,children:(0,p6.jsx)(nZ,{size:a,className:"fill-base-content"})})]})};var bt=p,br=l,bn=x;let bi=(e,t)=>{let{envConfig:r}=(0,br.useEnv)(),{settings:n}=(0,bn.useSettingsStore)(),{sideBarWidth:i,isSideBarVisible:a,isSideBarPinned:o,getSideBarWidth:s,setSideBarWidth:l,setSideBarVisible:c,setSideBarPin:u,toggleSideBar:d,toggleSideBarPin:f}=ek();(0,bt.useEffect)(()=>{l(e),u(t),c(t)},[]);let h=()=>{f(),o&&a&&c(!1),l6(r,"globalReadSettings",{...n.globalReadSettings,isSideBarPinned:!o})};return{sideBarWidth:i,isSideBarPinned:o,isSideBarVisible:a,getSideBarWidth:s,handleSideBarResize:e=>{l(e),n.globalReadSettings.sideBarWidth=e},handleSideBarTogglePin:h,setSideBarVisible:c,toggleSideBar:d}};var ba=a,bo=p,bs=ax,bl=l,bc=x,bu=iB,bd=r0;let bf=({tags:e=[],classes:t=[],attributes:r=[],contents:n=[]})=>i=>{if(i.nodeType===Node.ELEMENT_NODE){let a=i.tagName.toLowerCase();return"script"===a||"style"===a||e.includes(a)||t.some(e=>i.classList.contains(e))||r.some(e=>i.hasAttribute(e))||n.some(({tag:e,content:t})=>a===e&&t.test(i.textContent||""))?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_SKIP}return NodeFilter.FILTER_ACCEPT};var bh=a,bp=iB;let bb=({label:e,isActive:t,onClick:r})=>(0,bh.jsx)("button",{className:"hover:bg-base-300 flex w-full items-center justify-between rounded-md p-2",onClick:r,children:(0,bh.jsxs)("div",{className:"flex items-center",children:[(0,bh.jsx)("span",{style:{minWidth:`${(0,bp.useDefaultIconSize)()}px`},children:t&&(0,bh.jsx)(il,{className:"text-base-content"})}),(0,bh.jsx)("span",{className:"ml-2",children:e})]})}),bg=({isEink:e,searchConfig:t,menuClassName:r,onSearchConfigChanged:n,setIsDropdownOpen:i})=>{let a=eU(),o=(e,r)=>{n({...t,[e]:r}),i?.(!1)};return(0,bh.jsxs)("div",{className:h("search-options dropdown-content dropdown-center border-base-200 z-20 w-56 border shadow-2xl",e?"bordercolor-content border-base-content !bg-base-100 border":"",r),children:[(0,bh.jsx)(bb,{label:a("Book"),isActive:"book"===t.scope,onClick:()=>o("scope","book")}),(0,bh.jsx)(bb,{label:a("Chapter"),isActive:"section"===t.scope,onClick:()=>o("scope","section")}),(0,bh.jsx)("hr",{className:"border-base-200 my-1"}),(0,bh.jsx)(bb,{label:a("Match Case"),isActive:t.matchCase,onClick:()=>o("matchCase",!t.matchCase)}),(0,bh.jsx)(bb,{label:a("Match Whole Words"),isActive:t.matchWholeWords,onClick:()=>o("matchWholeWords",!t.matchWholeWords)}),(0,bh.jsx)(bb,{label:a("Match Diacritics"),isActive:t.matchDiacritics,onClick:()=>o("matchDiacritics",!t.matchDiacritics)})]})},bm=2,bv=1,by="search-history",bx="search",bw=10,b_=({isVisible:e,bookKey:t,onHideSearchBar:r})=>{let n=eU(),{envConfig:i,appService:a}=(0,bl.useEnv)(),{settings:o}=(0,bc.useSettingsStore)(),{getBookData:s}=ex(),{getConfig:l,setConfig:c,saveConfig:u}=ex(),{getView:d,getProgress:f,getViewSettings:p}=e_(),{setSearchTerm:b,setSearchResults:g,setSearchProgress:m}=ek(),{getSearchNavState:v,getSearchStatus:y,setSearchStatus:x}=ek(),w=p(t),{searchTerm:_}=v(t),S=(0,bo.useRef)(""),E=(0,bo.useRef)(null),k=(0,bo.useRef)(!1),N=(0,bo.useMemo)(()=>t.split("-")[0],[t]),j=(0,bo.useMemo)(()=>`${by}-${N}`,[N]),[C,M]=(0,bo.useState)(()=>{{let e=localStorage.getItem(j);return e?JSON.parse(e):[]}});(0,bo.useEffect)(()=>{let e=localStorage.getItem(j);M(e?JSON.parse(e):[])},[j]);let A=(0,bo.useCallback)(e=>{let t=C.filter(t=>t!==e),r=[e,...t].slice(0,bw);localStorage.setItem(j,JSON.stringify(r)),M(r)},[j,C]),R=e=>{b(t,e),Z(e)},T=()=>{b(t,""),X(),E.current?.focus()},O=async()=>{M([]),localStorage.removeItem(j),await B()},L=(0,bo.useCallback)((e,t)=>{let r=JSON.stringify({scope:t.scope,matchCase:t.matchCase,matchWholeWords:t.matchWholeWords,matchDiacritics:t.matchDiacritics});return(0,bs.md5)(`${e}-${r}`)},[]),I=(0,bo.useCallback)(async(e,t)=>{let r=L(e,t),n=`${bx}/${N}/${r}.json`;try{if(await a?.exists(n,"Cache")){let e=await a?.readFile(n,"Cache","text");if(e)return JSON.parse(e)}}catch(e){console.error("Failed to read search cache:",e)}return null},[N,a,L]),P=(0,bo.useCallback)(async(e,t,r)=>{let n=L(e,t),i=`${bx}/${N}`,o=`${i}/${n}.json`;try{await a?.exists(i,"Cache")||await a?.createDir(i,"Cache",!0),await a?.writeFile(o,"Cache",JSON.stringify(r))}catch(e){console.error("Failed to save search cache:",e)}},[N,a,L]),B=(0,bo.useCallback)(async()=>{let e=`${bx}/${N}`;try{await a?.exists(e,"Cache")&&await a?.deleteDir(e,"Cache",!0)}catch(e){console.error("Failed to clear search cache:",e)}},[N,a]),D=d(t),z=l(t),F=s(t),$=f(t),U=F.book?.primaryLanguage||"en",H=(0,bu.useResponsiveSize)(12),V=(0,bu.useResponsiveSize)(16);(0,bo.useEffect)(()=>{Z(_)},[t,_]),(0,bo.useEffect)(()=>{e&&E.current&&(E.current.onblur=()=>{k.current=!1},E.current.onfocus=()=>{k.current=!0},a?.isMobile||E.current.focus()),e&&_&&Z(_)},[a,e]),(0,bo.useEffect)(()=>{let e=e=>{"Escape"===e.key&&(E.current&&k.current?E.current.blur():r())};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[r]);let q=e=>{let r=e.target.value;b(t,r),Z(r)},W=e=>{c(t,{searchConfig:{...e}}),u(i,t,z,o),Z(_)},K=e=>{let t=(0,bd.isCJKStr)(e)?bv:bm;return e.length>=t},G=(0,bo.useCallback)(async e=>{console.log("searching for:",e);let r=z.searchConfig,n=await I(e,r);n&&(g(t,n),m(t,1),n.length>0&&A(e)),m(t,0),x(t,"searching");let{section:i}=$,a="section"===r.scope?i.current:void 0,o=await D.search({...r,index:a,query:e,acceptNode:bf({tags:U.startsWith("ja")?["rt"]:[]}),results:n}),s=[],l=0;(async()=>{for await(let n of o){if("terminated"===y(t))return void console.log("search terminated");if("string"==typeof n)"done"===n&&(x(t,"completed"),g(t,[...s]),m(t,1),s.length>0&&(A(e),await P(e,r,s)),console.log("search done"));else if(n.progress){m(t,n.progress);let r=Date.now();if(r-l>=1e3&&(console.log("search progress:",n.progress),l=r),S.current!==e){console.log("search term changed, resetting search"),X();return}}else s.push(n),g(t,[...s]);await new Promise(e=>setTimeout(e,0))}})()},[$,z.searchConfig,g,m,A,I,P]),X=(0,bo.useCallback)(()=>{g(t,[]),D?.clearSearch()},[t,D,g]),Z=(0,bo.useCallback)(aM(e=>{S.current=e,K(e)?G(e):X()},500),[G,X]);return(0,ba.jsxs)("div",{className:"relative flex flex-col gap-3 p-2",children:[(0,ba.jsxs)("div",{className:"bg-base-100 flex h-8 items-center rounded-lg",children:[(0,ba.jsx)("div",{className:"absolute ps-3",children:(0,ba.jsx)(ac,{size:V,className:"text-base-content/50"})}),(0,ba.jsx)("input",{ref:E,type:"text",value:_,spellCheck:!1,onChange:q,placeholder:n("Search..."),className:"search-input w-full bg-transparent p-2 pr-0 ps-10 font-sans text-sm font-light focus:outline-none"}),_&&(0,ba.jsx)("button",{onClick:T,className:"absolute end-8 flex h-8 w-8 items-center justify-center bg-transparent","aria-label":n("Clear search"),children:(0,ba.jsx)(pG,{size:V,className:"text-base-content/75"})}),(0,ba.jsx)("div",{className:h("absolute end-2 flex h-8 w-8 items-center rounded-r-lg",w?.isEink?"bg-transparent":"bg-base-300"),children:(0,ba.jsx)(sM,{label:n("Search Options"),className:h(window.innerWidth<640&&"dropdown-end","dropdown-bottom flex justify-center"),menuClassName:window.innerWidth<640?"no-triangle mt-1":"dropdown-center mt-3.5",buttonClassName:h("btn btn-ghost h-8 min-h-8 w-8 p-0 rounded-none rounded-r-lg",w?.isEink?"!bg-transparent hover:!bg-transparent":""),toggleButton:(0,ba.jsx)(al,{size:H,className:"text-base-content/50"}),children:(0,ba.jsx)(bg,{isEink:!!w?.isEink,searchConfig:z.searchConfig,onSearchConfigChanged:W})})})]}),C.length>0&&!_&&(0,ba.jsxs)("div",{className:"relative flex",children:[(0,ba.jsx)("div",{className:h("from-base-200 pointer-events-none absolute left-0 top-0 h-full w-3 bg-gradient-to-r to-transparent",w?.isEink?"hidden":""),"aria-hidden":"true"}),(0,ba.jsx)("div",{className:"scrollbar-hidden flex flex-1 gap-1.5 overflow-x-auto",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:C.map((e,t)=>(0,ba.jsx)("button",{onClick:()=>R(e),className:"hover:bg-base-200/20 text-base-content/70 bg-base-100 max-w-[60%] flex-shrink-0 whitespace-nowrap rounded-full px-3 py-0.5 text-xs",children:(0,ba.jsx)("p",{className:"truncate",children:e})},t))}),(0,ba.jsx)("div",{className:h("from-base-200 pointer-events-none absolute right-6 top-0 h-full w-6 bg-gradient-to-l to-transparent",w?.isEink?"hidden":""),"aria-hidden":"true"}),(0,ba.jsx)("button",{onClick:O,className:h("text-base-content/50 hover:text-base-content/80 flex-shrink-0 items-center","flex h-6 min-h-6 w-8 min-w-8 items-center justify-center p-0"),title:n("Clear search history"),"aria-label":n("Clear search history"),children:(0,ba.jsx)(nG,{size:V})})]})]})};var bS=a;let bE=({bookKey:e,cfi:t,excerpt:r,onSelectResult:n})=>{let{getProgress:i}=e_(),{isCurrent:a,viewRef:o}=pI(t,i(e));return(0,bS.jsx)("li",{role:"button",ref:o,className:h("my-2 cursor-pointer rounded-lg p-2 text-sm",a?"bg-base-300 hover:bg-gray-300/70":"hover:bg-base-300 bg-base-100"),tabIndex:0,onClick:()=>n(t),onKeyDown:e=>{"Enter"===e.key||" "===e.key?n(t):e.stopPropagation()},children:(0,bS.jsxs)("div",{className:"line-clamp-3",children:[(0,bS.jsx)("span",{className:"",children:r.pre}),(0,bS.jsx)("span",{className:"font-bold text-red-500",children:r.match}),(0,bS.jsx)("span",{className:"",children:r.post})]})})},bk=({bookKey:e,results:t,onSelectResult:r})=>(0,bS.jsx)("div",{className:"search-results overflow-y-auto p-2 font-sans text-sm font-light",children:(0,bS.jsx)("ul",{className:"px-2",children:t.map((t,n)=>"subitems"in t?(0,bS.jsxs)("ul",{children:[(0,bS.jsx)("h3",{className:"line-clamp-1 font-normal",children:t.label}),(0,bS.jsx)("ul",{children:t.subitems.map((t,n)=>(0,bS.jsx)(bE,{bookKey:e,cfi:t.cfi,excerpt:t.excerpt,onSelectResult:r},`${n}-${t.cfi}`))})]},`${n}-${t.label}`):(0,bS.jsx)(bE,{bookKey:e,cfi:t.cfi,excerpt:t.excerpt,onSelectResult:r},`${n}-${t.cfi}`))})}),bN=.05,bj=.45,bC=.5,bM=({onGoToLibrary:e})=>{let t=eU(),{appService:r}=(0,lC.useEnv)(),{updateAppTheme:n,safeAreaInsets:i}=(0,lM.useThemeStore)(),{settings:a}=(0,lN.useSettingsStore)(),{sideBarBookKey:o,setSideBarBookKey:s,getSearchNavState:l,setSearchTerm:c,clearSearch:u}=ek(),{searchTerm:d="",searchResults:f=null}=(o?l(o):null)||{},{getBookData:p}=ex(),{getView:b,getViewSettings:g}=e_(),[m,v]=(0,lk.useState)(!1),y=(0,lk.useRef)(d),x=(0,lk.useRef)(1),w=window.innerWidth<640,{sideBarWidth:_,isSideBarPinned:S,isSideBarVisible:E,getSideBarWidth:k,setSideBarVisible:N,handleSideBarResize:j,handleSideBarTogglePin:C}=bi(a.globalReadSettings.sideBarWidth,!w&&a.globalReadSettings.isSideBarPinned),M=async e=>{let{term:t,bookKey:r}=e.detail;N(!0),s(r),v(!0),null!=t&&c(r,t)},A=async()=>{let e=document.querySelector(".sidebar-pin-btn");e&&"none"!==window.getComputedStyle(e).display||N(!1)};(0,lk.useEffect)(()=>{E?n("base-200"):n("base-100")},[E]),(0,lk.useEffect)(()=>{y.current=d},[d]),(0,lk.useEffect)(()=>(eR.on("search-term",M),eR.on("navigate",A),()=>{eR.off("search-term",M),eR.off("navigate",A)}),[]);let R=e=>{let t=Math.max(bN,Math.min(bj,e.clientX/window.innerWidth));j(`${Math.round(1e4*t)/100}%`)},T=e=>{let t=parseFloat(k())/100,r=t;"ArrowLeft"===e.key?r=Math.max(bN,t-e.step):"ArrowRight"===e.key&&(r=Math.min(bj,t+e.step)),j(`${Math.round(1e4*r)/100}%`)},{handleDragStart:O}=iI(e=>{if(!w)return;let t=e.clientY/window.innerHeight,r=Math.max(0,Math.min(1,t));x.current=r;let n=document.querySelector(".sidebar-container"),i=document.querySelector(".overlay");n&&i&&(n.style.top=`${100*r}%`,i.style.opacity=`${1-t}`)},()=>{},e=>{let t=document.querySelector(".sidebar-container"),n=document.querySelector(".overlay");if(t&&n)if(e.velocity>bC||e.velocity>=0&&e.clientY>=.5*window.innerHeight){let i=.15/Math.max(e.velocity,.5);t.style.transition=`top ${i}s ease-out`,t.style.top="100%",n.style.transition=`opacity ${i}s ease-out`,n.style.opacity="0",setTimeout(()=>N(!1),300),r?.hasHaptics&&iF("medium")}else t.style.transition="top 0.3s ease-out",t.style.top="0%",n.style.transition="opacity 0.3s ease-out",n.style.opacity="0.8",r?.hasHaptics&&iF("medium")}),{handleDragStart:L,handleDragKeyDown:I}=iI(R,T),P=()=>{N(!1)},B=()=>{v(e=>(e&&z(),!e))},D=(0,lk.useCallback)(()=>{setTimeout(()=>{N(!0),v(!0)},100)},[]),z=(0,lk.useCallback)(()=>{v(!1),setTimeout(()=>{o&&u(o)},100),b(o)?.clearSearch()},[o,u]),F=(0,lk.useCallback)(()=>{y.current?z():S||N(!1)},[o,S]);lw({onShowSearchBar:D,onEscape:F},[F]);let $=e=>{A(),b(o)?.goTo(e)};if(!o)return null;let U=g(o),H=p(o);if(!H||!H.book||!H.bookDoc)return null;let{book:V,bookDoc:q}=H,W=(0,lj.getBookDirFromLanguage)(q.metadata.language);return E?(0,lS.jsxs)(lS.Fragment,{children:[!S&&(0,lS.jsx)(iq,{className:h("z-[45]",U?.isEink?"":"bg-black/50 sm:bg-black/20"),onDismiss:P}),(0,lS.jsxs)("div",{role:"group","aria-label":t("Sidebar"),dir:U?.rtl&&"rtl"===W?"rtl":"ltr",style:{width:`${_}`,maxWidth:`${100*bj}%`,position:S?"relative":"absolute",paddingTop:`${i?.top||0}px`},className:"jsx-fbb074d65c8317d1 "+(h("sidebar-container flex min-w-60 select-none flex-col","full-height transition-[padding-top] duration-300",U?.isEink?"bg-base-100":"bg-base-200",r?.hasRoundedWindow&&"rounded-window-top-left rounded-window-bottom-left",S?"z-20":"z-[45] shadow-2xl",!S&&U?.isEink&&"border-base-content border-e")||""),children:[(0,lS.jsx)(lE.default,{id:"fbb074d65c8317d1",children:"@media (width<=640px){.sidebar-container.jsx-fbb074d65c8317d1{border-top-left-radius:16px;border-top-right-radius:16px;width:100%;min-width:100%}.sidebar-container.open.jsx-fbb074d65c8317d1{top:0%}.overlay.jsx-fbb074d65c8317d1{transition:opacity .3s ease-in-out}}"}),(0,lS.jsx)("div",{role:"slider",tabIndex:0,"aria-label":t("Resize Sidebar"),"aria-orientation":"horizontal","aria-valuenow":parseFloat(_),onMouseDown:L,onTouchStart:L,onKeyDown:I,className:"jsx-fbb074d65c8317d1 "+(h("drag-bar absolute -right-2 top-0 h-full w-0.5 cursor-col-resize bg-transparent p-1",w&&"hidden")||"")}),(0,lS.jsxs)("div",{className:"jsx-fbb074d65c8317d1 flex-shrink-0",children:[w&&(0,lS.jsx)("div",{role:"slider",tabIndex:0,"aria-label":t("Resize Sidebar"),"aria-orientation":"vertical","aria-valuenow":x.current,onMouseDown:O,onTouchStart:O,className:"jsx-fbb074d65c8317d1 drag-handle flex h-10 w-full cursor-row-resize items-center justify-center",children:(0,lS.jsx)("div",{className:"jsx-fbb074d65c8317d1 bg-base-content/50 h-1 w-10 rounded-full"})}),(0,lS.jsx)(ce,{isPinned:S,isSearchBarVisible:m,onGoToLibrary:e,onClose:()=>N(!1),onTogglePin:C,onToggleSearchBar:B}),(0,lS.jsx)("div",{className:"jsx-fbb074d65c8317d1 "+(h("search-bar",{"search-bar-visible":m})||""),children:(0,lS.jsx)(b_,{isVisible:m,bookKey:o,onHideSearchBar:z})}),(0,lS.jsx)("div",{className:"jsx-fbb074d65c8317d1 border-base-300/50 border-b px-3",children:(0,lS.jsx)(be,{book:V})})]}),m&&f?(0,lS.jsx)(bk,{bookKey:o,results:f,onSelectResult:$}):(0,lS.jsx)(p4,{bookDoc:q,sideBarBookKey:o})]})]}):null};var bA=a,bR=lE,bT=p,bO=x,bL=y,bI=l,bP=S,bB=eg,bD=a;function bz(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M13.4 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7.4"},child:[]},{tag:"path",attr:{d:"M2 6h4"},child:[]},{tag:"path",attr:{d:"M2 10h4"},child:[]},{tag:"path",attr:{d:"M2 14h4"},child:[]},{tag:"path",attr:{d:"M2 18h4"},child:[]},{tag:"path",attr:{d:"M21.378 5.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z"},child:[]}]})(e)}var bF=iB;let b$=({isPinned:e,isSearchBarVisible:t,handleClose:r,handleTogglePin:n,handleToggleSearchBar:i})=>{let a=eU(),o=(0,bF.useResponsiveSize)(14),s=(0,bF.useResponsiveSize)(18);return(0,bD.jsxs)("div",{className:"notebook-header relative flex h-11 items-center px-3",dir:"ltr",children:[(0,bD.jsxs)("div",{className:"absolute inset-0 z-[-1] flex items-center justify-center space-x-2",children:[(0,bD.jsx)(bz,{size:s}),(0,bD.jsx)("div",{className:"notebook-title hidden text-sm font-medium sm:flex",children:a("Notebook")})]}),(0,bD.jsxs)("div",{className:"flex w-full items-center gap-x-4",children:[(0,bD.jsx)("button",{title:a(e?"Unpin Notebook":"Pin Notebook"),onClick:n,className:h("btn btn-ghost btn-circle hidden h-6 min-h-6 w-6 sm:flex",e?"bg-base-300":"bg-base-300/65"),children:e?(0,bD.jsx)(ir,{size:o}):(0,bD.jsx)(i_,{size:o})}),(0,bD.jsx)("button",{title:a("Close"),onClick:r,className:"btn btn-ghost btn-circle flex h-6 min-h-6 w-6 hover:bg-transparent sm:hidden",children:(0,bD.jsx)(io,{})})]}),(0,bD.jsx)("div",{className:"flex items-center justify-end gap-x-4",children:(0,bD.jsx)("button",{title:a(t?"Hide Search Bar":"Show Search Bar"),onClick:i,className:h("btn btn-ghost h-8 min-h-8 w-8 p-0",t&&"bg-base-300"),children:(0,bD.jsx)(lB,{size:s})})})]})};var bU=a,bH=p,bV=iB,bq=T;let bW=({onSave:e,onEdit:t})=>{let r=eU(),{notebookNewAnnotation:n,notebookEditAnnotation:i,setNotebookNewAnnotation:a,setNotebookEditAnnotation:o,saveNotebookAnnotationDraft:s,getNotebookAnnotationDraft:l}=eN(),c=(0,bH.useRef)(null),[u,d]=(0,bH.useState)(""),f=(0,bV.useResponsiveSize)(3);(0,bH.useEffect)(()=>{if(i){let e=i.note;d(e),c.current?.setValue(e),c.current?.focus()}else if(n){let e=h();if(e){let t=l((0,bq.md5Fingerprint)(e))||"";d(t),c.current?.setValue(t),c.current?.focus()}}},[n,i]);let h=()=>i?.text||n?.text||"",p=e=>{d(e)},b=()=>{let e=c.current?.getValue();if(e){let t=h();t&&s((0,bq.md5Fingerprint)(t),e)}},g=()=>{let r=c.current?.getValue();r&&(n?e(n,r):i&&(i.note=r,t(i)))},m=()=>{n&&a(null),i&&o(null)};lw({onSaveNote:()=>{c.current?.getValue()&&g()},onEscape:m});let v=!!u.trim();return(0,bU.jsxs)("div",{className:"content booknote-item note-editor-container bg-base-100 mt-2 rounded-md p-2",children:[(0,bU.jsx)("div",{className:"flex w-full",children:(0,bU.jsx)(p$,{ref:c,value:u,onChange:p,onBlur:b,onSave:g,onEscape:m,placeholder:r("Add your notes here..."),spellCheck:!1})}),(0,bU.jsxs)("div",{className:"flex items-center pt-2",children:[(0,bU.jsx)("div",{className:"me-2 mt-0.5 min-h-full self-stretch rounded-xl bg-gray-300",style:{minWidth:`${f}px`}}),(0,bU.jsx)("div",{className:"content font-size-sm line-clamp-3",children:(0,bU.jsx)("span",{className:"content font-size-xs text-gray-500",children:h()})})]}),(0,bU.jsxs)("div",{className:"flex justify-end space-x-3 p-2",dir:"ltr",children:[(0,bU.jsx)(pB,{onClick:m,children:r("Cancel")}),(0,bU.jsx)(pB,{onClick:g,disabled:!v,children:r("Save")})]})]})};var bK=a,bG=p,bX=iB;let bZ=({isVisible:e,bookKey:t,searchTerm:r,onSearchResultChange:n})=>{let i=eU(),{getConfig:a}=ex(),[o,s]=(0,bG.useState)(r),l=(0,bG.useRef)(null),c=(0,bG.useRef)(null),u=(0,bX.useResponsiveSize)(16),d=(0,bX.useResponsiveSize)(12);(0,bG.useEffect)(()=>{b(o)},[t]),(0,bG.useEffect)(()=>{s(r),b(r)},[r]),(0,bG.useEffect)(()=>{e&&l.current&&l.current.focus()},[e]),(0,bG.useEffect)(()=>{let e=e=>{"Escape"===e.key&&l.current&&l.current.blur()};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e),c.current&&clearTimeout(c.current)}},[]);let f=e=>{let t=e.target.value;s(t),c.current&&clearTimeout(c.current),c.current=setTimeout(()=>{b(t)},300)},h=()=>{s(""),b(""),l.current&&l.current.focus()},p=(e,t)=>{if(!t.trim())return[];let r=t.toLowerCase();return e.filter(e=>{let t=e.text?.toLowerCase().includes(r)||!1,n=e.note?.toLowerCase().includes(r)||!1;return t||n})},b=e=>{e.trim().length>=1?g(e):m()},g=e=>{let r=a(t);if(!r)return void m();let{booknotes:i=[]}=r;n(p(i.filter(e=>!e.deletedAt),e))},m=()=>{n(null)};return(0,bK.jsx)("div",{className:"relative px-3 py-2",children:(0,bK.jsxs)("div",{className:"bg-base-100 flex h-8 items-center rounded-lg",children:[(0,bK.jsx)("div",{className:"pl-3",children:(0,bK.jsx)(ac,{size:u,className:"text-base-content/50"})}),(0,bK.jsx)("input",{ref:l,type:"text",value:o,spellCheck:!1,onChange:f,placeholder:i("Search notes and excerpts..."),className:"w-full bg-transparent p-2 font-sans text-sm font-light focus:outline-none"}),o&&(0,bK.jsx)("div",{className:"bg-base-300 flex h-8 w-8 items-center rounded-r-lg",children:(0,bK.jsx)("button",{onClick:h,className:"btn btn-ghost h-8 min-h-8 w-8 rounded-none rounded-r-lg p-0",children:(0,bK.jsx)(au,{size:d,className:"text-base-content/50"})})})]})})},bY=.15,bJ=.45,bQ=({})=>{let e=eU(),{updateAppTheme:t,safeAreaInsets:r}=(0,bL.useThemeStore)(),{envConfig:n,appService:i}=(0,bI.useEnv)(),{settings:a}=(0,bO.useSettingsStore)(),{sideBarBookKey:o}=ek(),{notebookWidth:s,isNotebookVisible:l,isNotebookPinned:c}=eN(),{notebookNewAnnotation:u,notebookEditAnnotation:d,setNotebookPin:f}=eN(),{getBookData:p,getConfig:b,saveConfig:g,updateBooknotes:m}=ex(),{getView:v,getViewSettings:y}=e_(),{getNotebookWidth:x,setNotebookWidth:w,setNotebookVisible:_,toggleNotebookPin:S}=eN(),{setNotebookNewAnnotation:E,setNotebookEditAnnotation:k}=eN(),[N,j]=(0,bT.useState)(!1),[C,M]=(0,bT.useState)(null),[A,R]=(0,bT.useState)(""),T=async()=>{let e=document.querySelector(".sidebar-pin-btn");e&&"none"!==window.getComputedStyle(e).display||_(!1)},O=(0,bT.useCallback)(()=>{c||_(!1)},[c]);lw({onEscape:O},[O]),(0,bT.useEffect)(()=>{l?t("base-200"):t("base-100")},[l]),(0,bT.useEffect)(()=>(w(a.globalReadSettings.notebookWidth),f(a.globalReadSettings.isNotebookPinned),_(a.globalReadSettings.isNotebookPinned),eR.on("navigate",T),()=>{eR.off("navigate",T)}),[]);let L=e=>{w(e),a.globalReadSettings.notebookWidth=e},I=()=>{S(),l6(n,"globalReadSettings",{...a.globalReadSettings,isNotebookPinned:!c})},P=()=>{_(!1),E(null),k(null)},B=(e,t)=>{if(!o)return;let r=v(o),i=b(o),s=r?.getCFI(e.index,e.range);if(!s)return;let{booknotes:l=[]}=i,c={id:(0,bP.uniqueId)(),type:"annotation",cfi:s,note:t,text:e.text,createdAt:Date.now(),updatedAt:Date.now()};r?.addAnnotation({...c,value:`${pA}${c.cfi}`}),l.push(c);let u=m(o,l);u&&g(n,o,u,a),E(null)},D=(e,t)=>{if(!o)return;let r=v(o),{booknotes:i=[]}=b(o),s=i.findIndex(t=>t.id===e.id);if(-1===s)return;t?e.deletedAt=Date.now():e.updatedAt=Date.now(),i[s]=e,r?.addAnnotation({...e,value:`${pA}${e.cfi}`},!0);let l=m(o,i);l&&g(n,o,l,a),k(null)},{handleDragStart:z,handleDragKeyDown:F}=iI(e=>{let t=Math.max(bY,Math.min(bJ,1-e.clientX/window.innerWidth));L(`${Math.round(1e4*t)/100}%`)},e=>{let t=parseFloat(x())/100,r=t;"ArrowLeft"===e.key?r=Math.max(bY,t+e.step):"ArrowRight"===e.key&&(r=Math.min(bJ,t-e.step)),L(`${Math.round(1e4*r)/100}%`)}),{booknotes:$=[]}=b(o)||{},U=$.filter(e=>"annotation"===e.type&&e.note&&!e.deletedAt).sort((e,t)=>t.createdAt-e.createdAt),H=$.filter(e=>"excerpt"===e.type&&e.text&&!e.deletedAt).sort((e,t)=>e.createdAt-t.createdAt),V=()=>{j(e=>!e),N&&(M(null),R(""))},q=(0,bT.useMemo)(()=>N&&C?C.filter(e=>"annotation"===e.type&&e.note&&!e.deletedAt):U,[U,C,N]),W=(0,bT.useMemo)(()=>N&&C?C.filter(e=>"excerpt"===e.type&&e.text&&!e.deletedAt):H,[H,C,N]);if(!o)return null;let K=p(o),G=y(o);if(!K||!K.bookDoc)return null;let{bookDoc:X}=K,Z=(0,bB.getBookDirFromLanguage)(X.metadata.language),Y=q.length>0||W.length>0,J=U.length>0||H.length>0;return l?(0,bA.jsxs)(bA.Fragment,{children:[!c&&(0,bA.jsx)(iq,{className:h("z-[45]",G?.isEink?"":"bg-black/20"),onDismiss:P}),(0,bA.jsxs)("div",{role:"group","aria-label":e("Notebook"),dir:G?.rtl&&"rtl"===Z?"rtl":"ltr",style:{width:`${s}`,maxWidth:`${100*bJ}%`,position:c?"relative":"absolute",paddingTop:`${r?.top||0}px`},className:"jsx-790d1708c20552f7 "+(h("notebook-container right-0 flex min-w-60 select-none flex-col","full-height font-sans text-base font-normal sm:text-sm",G?.isEink?"bg-base-100":"bg-base-200",i?.hasRoundedWindow&&"rounded-window-top-right rounded-window-bottom-right",c?"z-20":"z-[45] shadow-2xl",!c&&G?.isEink&&"border-base-content border-s")||""),children:[(0,bA.jsx)(bR.default,{id:"790d1708c20552f7",children:"@media (width<=640px){.notebook-container.jsx-790d1708c20552f7{width:100%;min-width:100%}}"}),(0,bA.jsx)("div",{role:"slider",tabIndex:0,"aria-label":e("Resize Notebook"),"aria-orientation":"horizontal","aria-valuenow":parseFloat(s),onMouseDown:z,onTouchStart:z,onKeyDown:F,className:"jsx-790d1708c20552f7 "+(h("drag-bar absolute -left-2 top-0 h-full w-0.5 cursor-col-resize bg-transparent p-2")||"")}),(0,bA.jsxs)("div",{className:"jsx-790d1708c20552f7 flex-shrink-0",children:[(0,bA.jsx)(b$,{isPinned:c,isSearchBarVisible:N,handleClose:()=>_(!1),handleTogglePin:I,handleToggleSearchBar:V}),(0,bA.jsx)("div",{className:"jsx-790d1708c20552f7 "+(h("search-bar",{"search-bar-visible":N})||""),children:(0,bA.jsx)(bZ,{isVisible:N,bookKey:o,searchTerm:A,onSearchResultChange:M})})]}),(0,bA.jsxs)("div",{className:"jsx-790d1708c20552f7 flex-grow overflow-y-auto px-3",children:[N&&C&&!Y&&J&&(0,bA.jsx)("div",{className:"jsx-790d1708c20552f7 flex h-32 items-center justify-center text-gray-500",children:(0,bA.jsx)("p",{className:"jsx-790d1708c20552f7 font-size-sm text-center",children:e("No notes match your search")})}),(0,bA.jsx)("div",{dir:"ltr",className:"jsx-790d1708c20552f7",children:W.length>0&&(0,bA.jsxs)("p",{className:"jsx-790d1708c20552f7 content font-size-base",children:[e("Excerpts"),N&&C&&(0,bA.jsxs)("span",{className:"jsx-790d1708c20552f7 font-size-xs ml-2 text-gray-500",children:["(",W.length,")"]})]})}),(0,bA.jsx)("ul",{className:"jsx-790d1708c20552f7 ",children:W.map((t,r)=>(0,bA.jsx)("li",{className:"jsx-790d1708c20552f7 my-2",children:(0,bA.jsxs)("div",{role:"button",tabIndex:0,onKeyDown:e=>{("Backspace"===e.key||"Delete"===e.key)&&D(t,!0)},className:"jsx-790d1708c20552f7 booknote-item collapse-arrow border-base-300 bg-base-100 collapse border",children:[(0,bA.jsx)("div",{style:{"--top-override":"1.25rem","--end-override":"0.7rem"},className:"jsx-790d1708c20552f7 "+(h("collapse-title pe-8 text-sm font-medium","h-[2.5rem] min-h-[2.5rem] p-[0.6rem]")||""),children:(0,bA.jsx)("p",{className:"jsx-790d1708c20552f7 line-clamp-1",children:t.text||`Excerpt ${r+1}`})}),(0,bA.jsxs)("div",{className:"jsx-790d1708c20552f7 collapse-content font-size-xs select-text px-3 pb-0",children:[(0,bA.jsx)("p",{className:"jsx-790d1708c20552f7 hyphens-auto text-justify",children:t.text}),(0,bA.jsx)("div",{dir:"ltr",className:"jsx-790d1708c20552f7 flex justify-end",children:(0,bA.jsx)("div",{onClick:D.bind(null,t,!0),"aria-label":e("Delete"),className:"jsx-790d1708c20552f7 font-size-xs cursor-pointer align-bottom text-red-500 hover:text-red-600",children:e("Delete")})})]})]})},`${r}-${t.id}`))}),(0,bA.jsx)("div",{dir:"ltr",className:"jsx-790d1708c20552f7",children:(u||q.length>0)&&(0,bA.jsxs)("p",{className:"jsx-790d1708c20552f7 content font-size-base",children:[e("Notes"),N&&C&&q.length>0&&(0,bA.jsxs)("span",{className:"jsx-790d1708c20552f7 font-size-xs ml-2 text-gray-500",children:["(",q.length,")"]})]})}),(u||d)&&!N&&(0,bA.jsx)(bW,{onSave:B,onEdit:e=>D(e,!1)}),(0,bA.jsx)("ul",{className:"jsx-790d1708c20552f7",children:q.map((e,t)=>(0,bA.jsx)(pU,{bookKey:o,item:e},`${t}-${e.cfi}`))})]})]})]}):null};var b0=a,b1=p,b2=l,b3=y;let b4=(e,t)=>e<=1?{columns:"1fr",rows:"1fr"}:2===e?t<1?{columns:"1fr",rows:"1fr 1fr"}:{columns:"1fr 1fr",rows:"1fr"}:3===e||4===e?{columns:"1fr 1fr",rows:"1fr 1fr"}:{columns:"1fr 1fr 1fr",rows:"1fr 1fr 1fr"},b6=(e,t,r)=>{let n=b4(t,r),i=n.columns.split(" ").length,a=n.rows.split(" ").length,o=Math.floor(e/i),s=e%i;return{top:0===o,right:s===i-1,bottom:o===a-1,left:0===s}},b5=e=>{let t=e.showHeader,r=e.showFooter,n=e.vertical||e.writingMode.includes("vertical"),i=e.marginPx||e.marginTopPx,a=e.compactMarginPx||e.compactMarginTopPx,o=e.marginBottomPx,s=e.compactMarginBottomPx,l=e.marginLeftPx,c=e.marginRightPx,u=e.compactMarginLeftPx,d=e.compactMarginRightPx;return{top:t&&!n?i:a,right:t&&n?c:d,bottom:r&&!n?o:s,left:r&&n?l:u}};var b8=a,b9=p;function b7(e){let{getView:t,getProgress:r}=e_(),{setSideBarVisible:n}=ek(),{getSearchNavState:i,setSearchResultIndex:a,clearSearch:o}=ek(),{searchTerm:s,searchResults:l,searchResultIndex:c,searchProgress:u}=i(e),d=r(e),f=(0,b9.useMemo)(()=>d?.location,[d]),h=(0,b9.useMemo)(()=>l?gs(l):[],[l]),p=h.length,b=l&&p>0,g=(0,b9.useMemo)(()=>!h.length||c>=h.length?"":h[c]?.sectionLabel||"",[h,c]),m=(0,b9.useMemo)(()=>{if(!h.length||!f)return{firstIndex:-1,lastIndex:-1};let t=-1,r=-1;for(let e=0;e<h.length;e++){let n=h[e];n&&pL(n.cfi,f)&&(-1===t&&(t=e),r=e)}return -1!==t&&setTimeout(()=>a(e,t),0),{firstIndex:t,lastIndex:r}},[h,f,e,a]),v=(0,b9.useCallback)(r=>{if(!h.length||r<0||r>=h.length)return;let n=h[r];n&&(a(e,r),t(e)?.goTo(n.cfi))},[e,h,a,t]),y=(0,b9.useCallback)(()=>{n(!0)},[n]),x=(0,b9.useCallback)(()=>{o(e),t(e)?.clearSearch()},[o,e,t]),w=(0,b9.useCallback)(()=>{let{firstIndex:e}=m;e>0?v(e-1):-1===e&&c>0&&v(c-1)},[m,c,v]),_=(0,b9.useCallback)(()=>{let{lastIndex:e}=m;e>=0&&e<p-1?v(e+1):-1===e&&c<p-1&&v(c+1)},[m,p,c,v]),S=m.firstIndex>0||-1===m.firstIndex&&c>0,E=m.lastIndex>=0&&m.lastIndex<p-1||-1===m.lastIndex&&c<p-1;return{searchTerm:s,searchProgress:u,currentSection:g,searchResultIndex:c,totalResults:p,showSearchNav:b,hasPreviousPage:S,hasNextPage:E,handleShowResults:y,handleCloseSearch:x,handlePreviousResult:w,handleNextResult:_}}var ge=a;function gt(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M7.28 7.72a.75.75 0 0 1 0 1.06l-2.47 2.47H21a.75.75 0 0 1 0 1.5H4.81l2.47 2.47a.75.75 0 1 1-1.06 1.06l-3.75-3.75a.75.75 0 0 1 0-1.06l3.75-3.75a.75.75 0 0 1 1.06 0Z",clipRule:"evenodd"},child:[]}]})(e)}function gr(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M16.72 7.72a.75.75 0 0 1 1.06 0l3.75 3.75a.75.75 0 0 1 0 1.06l-3.75 3.75a.75.75 0 1 1-1.06-1.06l2.47-2.47H3a.75.75 0 0 1 0-1.5h16.19l-2.47-2.47a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"},child:[]}]})(e)}var gn=l,gi=iB;let ga=({bookKey:e,gridInsets:t,title:r,section:n,progress:i,showListButton:a=!0,hasPrevious:o,hasNext:s,previousLabel:l,nextLabel:c,previousTitle:u,nextTitle:d,showResultsTitle:f,closeTitle:p,onShowResults:b,onClose:g,onPrevious:m,onNext:v})=>{let{appService:y}=(0,gn.useEnv)(),x=eU(),{getViewSettings:w}=e_(),_=w(e),S=(0,gi.useResponsiveSize)(16),E=(0,gi.useResponsiveSize)(18),k=(0,gi.useResponsiveSize)(20),N=y?.isMobile||!_?.showHeader;return(0,ge.jsxs)("div",{className:"results-nav-bar pointer-events-none absolute inset-0 z-30 flex flex-col items-center justify-between px-4 py-1",style:{top:t.top,right:t.right,bottom:t.bottom/4,left:t.left},children:[(0,ge.jsxs)("div",{className:"bg-base-100 pointer-events-auto relative flex items-center justify-between overflow-hidden rounded-xl px-2 py-1 shadow-lg sm:gap-6",children:[void 0!==i&&i<1&&(0,ge.jsx)("div",{className:"bg-base-200 absolute inset-y-0 left-0 transition-all duration-300",style:{width:`${100*i}%`}}),1===i&&(0,ge.jsx)("div",{className:"bg-base-200 absolute inset-0"}),a&&b?(0,ge.jsx)("button",{title:f||x("Show Results"),onClick:b,className:"btn btn-ghost relative z-10 h-8 min-h-8 w-8 p-0 hover:bg-transparent",children:(0,ge.jsx)(pW,{size:k,className:"text-base-content"})}):(0,ge.jsx)("div",{className:"relative z-10 w-8"}),(0,ge.jsxs)("div",{className:"relative z-10 flex flex-1 flex-col items-center px-2",children:[(0,ge.jsx)("span",{className:"line-clamp-1 text-sm font-medium",children:r}),n&&N&&(0,ge.jsx)("span",{className:"text-base-content/70 line-clamp-1 text-xs",children:n})]}),(0,ge.jsx)("button",{title:p||x("Close"),onClick:g,className:"btn btn-ghost relative z-10 h-8 min-h-8 w-8 p-0 hover:bg-transparent",children:(0,ge.jsx)(pG,{size:S})})]}),(0,ge.jsxs)("div",{className:"bg-base-200 pointer-events-auto flex items-center justify-between gap-6 rounded-xl px-4 py-0 shadow-lg",children:[(0,ge.jsxs)("button",{title:u||x("Previous"),onClick:m,disabled:!o,className:h("btn btn-ghost flex h-auto min-h-0 flex-1 flex-col items-center gap-0 p-1 hover:bg-transparent",!o&&"opacity-40 disabled:bg-transparent"),children:[(0,ge.jsx)(gt,{size:E,className:"text-base-content"}),(0,ge.jsx)("span",{className:"text-sm font-medium",children:l||x("Previous")})]}),(0,ge.jsxs)("button",{title:d||x("Next"),onClick:v,disabled:!s,className:h("btn btn-ghost flex h-auto min-h-0 flex-1 flex-col items-center gap-0 p-1 hover:bg-transparent",!s&&"opacity-40 disabled:bg-transparent"),children:[(0,ge.jsx)(gr,{size:E,className:"text-base-content"}),(0,ge.jsx)("span",{className:"text-sm font-medium",children:c||x("Next")})]})]})]})},go=({bookKey:e,gridInsets:t})=>{let{searchTerm:r,searchProgress:n,currentSection:i,showSearchNav:a,hasPreviousPage:o,hasNextPage:s,handleShowResults:l,handleCloseSearch:c,handlePreviousResult:u,handleNextResult:d}=b7(e),f=eU();return a?(0,b8.jsx)(ga,{bookKey:e,gridInsets:t,title:f("Search results for '{{term}}'",{term:r}),section:i,progress:n,hasPrevious:o,hasNext:s,previousTitle:f("Previous Result"),nextTitle:f("Next Result"),showResultsTitle:f("Show Search Results"),closeTitle:f("Close Search"),onShowResults:l,onClose:c,onPrevious:u,onNext:d}):null};function gs(e){let t=[];for(let r of e)if("subitems"in r)for(let e of r.subitems)t.push({cfi:e.cfi,sectionLabel:r.label});else t.push({cfi:r.cfi,sectionLabel:""});return t}var gl=a,gc=p,gu=hl;function gd(e,t){let{getView:r,getProgress:n}=e_(),{getConfig:i}=ex(),{setSideBarVisible:a,getBooknotesNavState:o,setActiveBooknoteType:s,setBooknoteResults:l,setBooknoteIndex:c,clearBooknotesNav:u}=ek(),{activeBooknoteType:d,booknoteResults:f,booknoteIndex:h}=o(e),p=n(e),b=p?.location,g=(0,gc.useMemo)(()=>{let t=i(e);return t?.booknotes?.filter(e=>!e.deletedAt)||[]},[e,i]),m=(0,gc.useMemo)(()=>f?[...f].sort((e,t)=>gu.compare(e.cfi,t.cfi)):[],[f]),v=m.length,y=f&&v>0&&null!==d,x=(0,gc.useMemo)(()=>{if(!m.length||h>=m.length)return"";let e=m[h];if(!e)return"";let r=eu(t,e.cfi);return r?.label||""},[m,h,t]),w=(0,gc.useMemo)(()=>{if(!m.length||!b)return{firstIndex:-1,lastIndex:-1};let t=-1,r=-1;for(let e=0;e<m.length;e++){let n=m[e];n&&pL(n.cfi,b)&&(-1===t&&(t=e),r=e)}return -1!==t&&setTimeout(()=>c(e,t),0),{firstIndex:t,lastIndex:r}},[m,b,e,c]),_=(0,gc.useCallback)(t=>{if(!m.length||t<0||t>=m.length)return;let n=m[t];n&&(c(e,t),r(e)?.goTo(n.cfi))},[e,m,c,r]),S=(0,gc.useCallback)(t=>{let n=g.filter(e=>e.type===t);if(0===n.length)return;let i=[...n].sort((e,t)=>gu.compare(e.cfi,t.cfi));s(e,t),l(e,i),c(e,0),i.length>0&&r(e)?.goTo(i[0].cfi)},[g,e,s,l,c,r]),E=(0,gc.useCallback)(()=>{a(!0)},[a]),k=(0,gc.useCallback)(()=>{u(e)},[u,e]),N=(0,gc.useCallback)(()=>{let{firstIndex:e}=w;e>0?_(e-1):-1===e&&h>0&&_(h-1)},[w,h,_]),j=(0,gc.useCallback)(()=>{let{lastIndex:e}=w;e>=0&&e<v-1?_(e+1):-1===e&&h<v-1&&_(h+1)},[w,v,h,_]),C=w.firstIndex>0||-1===w.firstIndex&&h>0,M=w.lastIndex>=0&&w.lastIndex<v-1||-1===w.lastIndex&&h<v-1,A=(0,gc.useMemo)(()=>g.filter(e=>"bookmark"===e.type).length,[g]);return{activeBooknoteType:d,currentSection:x,booknoteIndex:h,totalResults:v,showBooknotesNav:y,hasPreviousPage:C,hasNextPage:M,bookmarkCount:A,annotationCount:(0,gc.useMemo)(()=>g.filter(e=>"annotation"===e.type).length,[g]),excerptCount:(0,gc.useMemo)(()=>g.filter(e=>"excerpt"===e.type).length,[g]),startNavigation:S,handleShowResults:E,handleClose:k,handlePrevious:N,handleNext:j}}let gf=({bookKey:e,gridInsets:t,toc:r})=>{let{activeBooknoteType:n,currentSection:i,showBooknotesNav:a,hasPreviousPage:o,hasNextPage:s,handleShowResults:l,handleClose:c,handlePrevious:u,handleNext:d}=gd(e,r),f=eU();if(!a)return null;let h=()=>{switch(n){case"bookmark":return f("Bookmarks");case"annotation":return f("Annotations");case"excerpt":return f("Excerpts");default:return""}};return(0,gl.jsx)(ga,{bookKey:e,gridInsets:t,title:h(),section:i,hasPrevious:o,hasNext:s,progress:1,previousTitle:f("Previous"),nextTitle:f("Next"),showResultsTitle:h(),closeTitle:f("Close"),onShowResults:l,onClose:c,onPrevious:u,onNext:d})};var gh=a,gp=p,gb=z,gg=l,gm=y,gv=x,gy=x;function gx(e){let{blobUrl:t,loaded:r,error:n,...i}=e;return i}let gw=(0,M.create)((e,t)=>({fonts:[],loading:!1,setFonts:t=>e({fonts:t}),addFont:(r,n)=>{let i=ts(r,n),a=t().fonts.find(e=>e.id===i.id);if(a)return t().updateFont(i.id,{...i,path:i.path,downloadedAt:Date.now(),deletedAt:void 0,loaded:!1,blobUrl:void 0,error:void 0}),e(e=>({fonts:[...e.fonts]})),a;let o={...i,downloadedAt:Date.now()};return e(e=>({fonts:[...e.fonts,o]})),o},removeFont:r=>{let n=t().getFont(r);if(!n)return!1;n.blobUrl&&URL.revokeObjectURL(n.blobUrl);let i=t().updateFont(r,{deletedAt:Date.now(),blobUrl:void 0,loaded:!1,error:void 0});return e(e=>({fonts:[...e.fonts]})),i},updateFont:(r,n)=>{let i=t().fonts.findIndex(e=>e.id===r);return -1!==i&&(e(e=>({fonts:e.fonts.map((e,t)=>t===i?{...e,...n}:e)})),!0)},getFont:e=>t().fonts.find(t=>t.id===e),getAllFonts:()=>t().fonts,getAvailableFonts:()=>t().fonts.filter(e=>!e.deletedAt),clearAllFonts:()=>{let{fonts:r}=t();r.forEach(e=>{e.blobUrl&&URL.revokeObjectURL(e.blobUrl)}),e({fonts:[]})},loadFont:async(e,r)=>{let n=t().getFont(r);if(!n)throw Error(`Font with id "${r}" not found`);if(n.deletedAt)throw Error(`Font "${n.name}" has been deleted`);if(n.loaded&&n.blobUrl&&!n.error)return n;try{t().updateFont(r,{loaded:!1,error:void 0});let i=await e.getAppService(),a=await i.openFile(n.path,"Fonts"),o=tr(n.path),s=tn(o),l=new Blob([await a.arrayBuffer()],{type:s}),c=URL.createObjectURL(l);return t().updateFont(r,{blobUrl:c,loaded:!0,error:void 0}),t().getFont(r)}catch(n){let e=n instanceof Error?n.message:"Unknown error";throw t().updateFont(r,{loaded:!1,error:e,blobUrl:void 0}),n}},loadFonts:async(r,n)=>{e({loading:!0});try{return(await Promise.allSettled(n.map(e=>t().loadFont(r,e)))).filter(e=>"fulfilled"===e.status).map(e=>e.value)}finally{e({loading:!1})}},loadAllFonts:async e=>{let r=t().getAvailableFonts().map(e=>e.id);return await t().loadFonts(e,r)},unloadFont:e=>{let r=t().getFont(e);return r?.blobUrl&&URL.revokeObjectURL(r.blobUrl),t().updateFont(e,{blobUrl:void 0,loaded:!1,error:void 0})},unloadAllFonts:()=>{let e=t().getAllFonts();e.forEach(e=>{e.blobUrl&&URL.revokeObjectURL(e.blobUrl)}),e.forEach(e=>{t().updateFont(e.id,{blobUrl:void 0,loaded:!1,error:void 0})})},getFontFamilies:()=>t().getAvailableFonts().filter(e=>e.loaded&&!e.error).map(e=>e.family||e.name).filter((e,t,r)=>r.indexOf(e)===t).sort((e,t)=>e.localeCompare(t)),getLoadedFonts:()=>t().getAvailableFonts().filter(e=>e.loaded&&!e.error),isFontLoaded:e=>{let r=t().getFont(e);return r?.loaded===!0&&!r.error&&!r.deletedAt},loadCustomFonts:async r=>{try{let{settings:n}=gy.useSettingsStore.getState(),i=t().fonts;if(n?.customFonts){let a=n.customFonts.map(e=>{let t=i.find(t=>t.id===e.id);return{...e,loaded:t?.loaded||!1,error:t?.error,blobUrl:t?.blobUrl}});e({fonts:a}),await t().loadAllFonts(r)}}catch(e){console.error("Failed to load custom fonts settings:",e)}},saveCustomFonts:async e=>{try{let{settings:r,setSettings:n,saveSettings:i}=gy.useSettingsStore.getState(),{fonts:a}=t();r.customFonts=a.map(gx),n(r),i(e,r)}catch(e){throw console.error("Failed to save custom fonts settings:",e),e}}}));window.addEventListener("beforeunload",()=>{gw.getState().getAllFonts().forEach(e=>{e.blobUrl&&URL.revokeObjectURL(e.blobUrl)})});var g_=p;let gS=(e,t,r)=>{let{hoveredBookKey:n}=e_(),i=aM(r,500),a=aM(t,100),o=r=>{r instanceof MessageEvent?r.data&&r.data.bookKey===e&&("iframe-wheel"===r.data.type&&i("mouse",-r.data.deltaY,0),"iframe-wheel"===r.data.type?r.data.ctrlKey?r.data.deltaY>0?eR.dispatch("zoom-out",{factor:Math.abs(r.data.deltaY)/100}):r.data.deltaY<0&&eR.dispatch("zoom-in",{factor:Math.abs(r.data.deltaY)/100}):a(r):t(r)):"wheel"===r.type?i("mouse",-r.deltaY,0):t(r)};return(0,g_.useEffect)(()=>(window.addEventListener("message",o),()=>{window.removeEventListener("message",o)}),[e,n]),{onClick:t,onWheel:o}},gE=(e,t,r)=>{let{getBookData:n}=ex(),{hoveredBookKey:i,setHoveredBookKey:a,getViewSettings:o}=e_(),s=(0,g_.useRef)(null),l=(0,g_.useRef)(null),c=(0,g_.useRef)(null),u=(0,g_.useRef)(null),d=e=>{let t=e.targetTouches[0];t&&(s.current=t,c.current="timeStamp"in e?e.timeStamp:Date.now())},f=t=>{if(!s.current)return;let r=t.targetTouches[0];r&&(l.current=r,u.current="timeStamp"in t?t.timeStamp:Date.now());let{current:n}=s,{current:c}=l;if(i&&c){let t=o(e),r=c.screenY-n.screenY,i=c.screenX-n.screenX;t.scrolled||t.vertical?a(null):Math.abs(i)>Math.abs(r)&&Math.abs(i)>10&&a(null)}},h=d=>{if(!s.current)return;let f=d.targetTouches[0];f&&(l.current=f,u.current="timeStamp"in d?d.timeStamp:Date.now());let h=window.innerWidth,{current:p}=s,{current:b}=l,{current:g}=c,{current:m}=u;if(b){let s=o(e),l=n(e),c=b.screenY-p.screenY,u=b.screenX-p.screenX,d=m&&g?m-g:0;c<-10&&Math.abs(c)>2*Math.abs(u)&&Math.abs(u)<.3*h?s.scrolled||s.vertical||l.isFixedLayout&&!(s.zoomLevel<=100)||a(i?null:e):i&&a(null),t(new CustomEvent("touch-swipe",{detail:{deltaX:u,deltaY:c,deltaT:d,startX:p.screenX,startY:p.screenY,endX:b.screenX,endY:b.screenY}})),r("touch",c,30)}s.current=null,l.current=null},p=t=>{t.data&&t.data.bookKey===e&&("iframe-touchstart"===t.data.type?d(t.data):"iframe-touchmove"===t.data.type?f(t.data):"iframe-touchend"===t.data.type&&h(t.data))};return(0,g_.useEffect)(()=>(window.addEventListener("message",p),()=>{window.removeEventListener("message",p)}),[i]),{onTouchStart:d,onTouchMove:f,onTouchEnd:h}};var gk=p;let gN=(e,t)=>{let r=t?.onLoad,n=t?.onRelocate,i=t?.onLinkClick,a=t?.onRendererRelocate,o=t?.onDrawAnnotation,s=t?.onShowAnnotation;(0,gk.useEffect)(()=>{if(e)return r&&e.addEventListener("load",r),n&&e.addEventListener("relocate",n),i&&e.addEventListener("link",i),a&&e.renderer.addEventListener("relocate",a),o&&e.addEventListener("draw-annotation",o),s&&e.addEventListener("show-annotation",s),()=>{r&&e.removeEventListener("load",r),n&&e.removeEventListener("relocate",n),i&&e.removeEventListener("link",i),a&&e.renderer.removeEventListener("relocate",a),o&&e.removeEventListener("draw-annotation",o),s&&e.removeEventListener("show-annotation",s)}},[e])};var gj=p,gC=s,gM=p,gA=b,gR=u,gT=x;let gO=e=>{let{book_hash:t,meta_hash:r,format:n,title:i,author:a,group_id:o,group_name:s,tags:l,progress:c,source_title:u,metadata:d,created_at:f,updated_at:h,deleted_at:p,uploaded_at:b}=e;return{hash:t,metaHash:r,format:n,title:i,author:a,groupId:o,groupName:s,tags:l,progress:c,sourceTitle:u,metadata:d?JSON.parse(d):null,createdAt:new Date(f).getTime(),updatedAt:new Date(h).getTime(),deletedAt:p?new Date(p).getTime():null,uploadedAt:b?new Date(b).getTime():null}},gL=e=>{let{book_hash:t,meta_hash:r,id:n,type:i,cfi:a,text:o,style:s,color:l,note:c,created_at:u,updated_at:d,deleted_at:f}=e;return{bookHash:t,metaHash:r,id:n,type:i,cfi:a,text:o,style:s,color:l,note:c,createdAt:new Date(u).getTime(),updatedAt:new Date(d).getTime(),deletedAt:f?new Date(f).getTime():null}},gI=e=>{let{book_hash:t,meta_hash:r,progress:n,location:i,xpointer:a,search_config:o,view_settings:s,updated_at:l}=e;return{bookHash:t,metaHash:r,location:i,xpointer:a,progress:n&&JSON.parse(n),searchConfig:o&&JSON.parse(o),viewSettings:s&&JSON.parse(s),updatedAt:new Date(l).getTime()}},gP=e=>{let t=0;for(let r of e)r.updated_at&&(t=Math.max(t,new Date(r.updated_at).getTime())),r.deleted_at&&(t=Math.max(t,new Date(r.deleted_at).getTime()));return t},gB=864e5;function gD(e){let t=(0,gA.useRouter)(),{settings:r,setSettings:n}=(0,gT.useSettingsStore)(),{getConfig:i,setConfig:a}=ex(),{setIsSyncing:o}=e_(),s=e?i(e):null,[l,c]=(0,gM.useState)(!1),[u,d]=(0,gM.useState)(!1),[f,h]=(0,gM.useState)(!1),[p,b]=(0,gM.useState)(null),[g,m]=(0,gM.useState)(0),[v,y]=(0,gM.useState)(0),[x,w]=(0,gM.useState)(0),[_,S]=(0,gM.useState)(!1),[E,k]=(0,gM.useState)(!1),[N,j]=(0,gM.useState)({books:null,configs:null,notes:null}),[C,M]=(0,gM.useState)(null),[A,R]=(0,gM.useState)(null),[T,O]=(0,gM.useState)(null),{syncClient:L}=(0,gR.useSyncContext)();(0,gM.useEffect)(()=>{e&&o(e,E)},[e,E]),(0,gM.useEffect)(()=>{if(!r.version||e&&!s?.location||_)return;let t=r.lastSyncedAtBooks??0,n=s?.lastSyncedAtConfig??r.lastSyncedAtConfigs??0,i=s?.lastSyncedAtNotes??r.lastSyncedAtNotes??0,a=Date.now();m(a-t>3*gB?0:t-gB),y(a-n>3*gB?0:n-gB),w(a-i>3*gB?0:i-gB),S(!0)},[e,r,s]);let I=async(i,o,s,l,c,u)=>{l(!0),b(null);try{let t=await L.pullChanges(o,i,c,u);j({...N,[i]:t[i]});let r=t[i];if(o>0&&!r?.length)return;let l=r?.length?gP(r):Date.now();s(l);let d=gT.useSettingsStore.getState().settings;switch(i){case"books":d.lastSyncedAtBooks=l,n(d);break;case"configs":c?e&&a(e,{lastSyncedAtConfig:l}):(d.lastSyncedAtConfigs=l,n(d));break;case"notes":c?e&&a(e,{lastSyncedAtNotes:l}):(d.lastSyncedAtNotes=l,n(d))}}catch(e){console.error(e),e instanceof Error?(e.message.includes("Not authenticated")&&r.keepLogin&&(r.keepLogin=!1,n(r),oH(t)),b(e.message||`Error pulling ${i}`)):b(`Error pulling ${i}`)}finally{l(!1)}},P=async e=>{k(!0),b(null);try{let t=await L.pushChanges(e);j(t)}catch(e){console.error(e),e instanceof Error?b(e.message||"Error pushing changes"):b("Error pushing changes")}finally{k(!1)}},B=(0,gM.useCallback)(async(e,t="both")=>{_&&(("push"===t||"both"===t)&&e?.length&&await P({books:e}),("pull"===t||"both"===t)&&await I("books",g+1,m,c))},[_,g]),D=(0,gM.useCallback)(async(e,t,r,n="both")=>{(t||_)&&(("push"===n||"both"===n)&&e?.length&&await P({configs:e}),("pull"===n||"both"===n)&&await I("configs",v,y,d,t,r))},[_,v]),z=(0,gM.useCallback)(async(e,t,r,n="both")=>{_&&(("push"===n||"both"===n)&&e?.length&&await P({notes:e}),("pull"===n||"both"===n)&&await I("notes",x,w,h,t,r))},[_,x]);return(0,gM.useEffect)(()=>{if(!E&&N){let{books:e,configs:t,notes:r}=N,n=e?.map(e=>gO(e)),i=t?.map(e=>gI(e)),a=r?.map(e=>gL(e));n&&M(n),i&&R(i),a&&O(a)}},[N,E]),{syncing:l||u||f,syncError:p,syncResult:N,syncedBooks:C,syncedConfigs:A,syncedNotes:T,lastSyncedAtBooks:g,lastSyncedAtNotes:x,lastSyncedAtConfigs:v,useSyncInited:_,pullChanges:I,pushChanges:P,syncBooks:B,syncConfigs:D,syncNotes:z}}var gz=D,gF=x,g$=e.i(767087),gU=z,gH=R,gV=hl;class gq{document;spineItemIndex;constructor(e,t=0){this.document=e,this.spineItemIndex=t}static extractSpineIndex(e){try{if(e.startsWith("epubcfi(")){let t=(0,gV.collapse)((0,gV.parse)(e)),r=t[0]?.[1]?.index;if(void 0===r)throw Error("Cannot extract spine index from CFI");return Math.floor((r-2)/2)}if(e.startsWith("/body/DocFragment[")){let t=e.match(/DocFragment\[(\d+)\]/);if(t)return parseInt(t[1],10)-1;throw Error("Cannot extract spine index from XPath")}throw Error("Unsupported format for spine index extraction")}catch(t){throw Error(`Cannot extract spine index from CFI/XPointer: ${e} - ${t}`)}}xPointerToCFI(e,t){try{if(t)return this.convertRangeXPointerToCFI(e,t);return this.convertPointXPointerToCFI(e)}catch(t){throw Error(`Failed to convert XPointer ${e}: ${t}`)}}cfiToXPointer(e){try{let t=(0,gV.parse)(e);if(t.parent){let e=gV.fake.toIndex(t.parent.shift());if(e!==this.spineItemIndex)throw Error(`CFI spine index ${e} does not match converter spine index ${this.spineItemIndex}`);let r=(0,gV.toRange)(this.document,t),n=this.rangePointToXPointer(r.startContainer,r.startOffset),i=this.rangePointToXPointer(r.endContainer,r.endOffset);return{xpointer:n,pos0:n,pos1:i}}let r=(0,gV.collapse)(t),n=gV.fake.toIndex(t.shift());if(n!==this.spineItemIndex)throw Error(`CFI spine index ${n} does not match converter spine index ${this.spineItemIndex}`);let i=(0,gV.toElement)(this.document,t[0]);if(!i)throw Error(`Element not found for CFI: ${e}`);let a=r[r.length-1]?.[r[r.length-1].length-1],o=a?.offset;return{xpointer:void 0!==o?this.handleTextOffset(i,o):this.buildXPointerPath(i)}}catch(t){throw Error(`Failed to convert CFI ${e}: ${t}`)}}validateCFI(e){try{return(0,gV.parse)(e),this.cfiToXPointer(e),!0}catch{return!1}}validateXPointer(e,t){try{return this.xPointerToCFI(e,t),!0}catch{return!1}}convertPointXPointerToCFI(e){let{element:t,textOffset:r}=this.parseXPointer(e),n=this.document.createRange();if(void 0!==r){let e=this.findTextNodeAtOffset(t,r);e?(n.setStart(e.node,e.offset),n.setEnd(e.node,e.offset)):(n.setStart(t,0),n.setEnd(t,0))}else n.setStart(t,0),n.setEnd(t,0);let i=(0,gV.fromRange)(n);return this.adjustSpineIndex(i)}convertRangeXPointerToCFI(e,t){let r=this.parseXPointer(e),n=this.parseXPointer(t),i=this.document.createRange();if(void 0!==r.textOffset){let e=this.findTextNodeAtOffset(r.element,r.textOffset);e?i.setStart(e.node,e.offset):i.setStart(r.element,0)}else i.setStart(r.element,0);if(void 0!==n.textOffset){let e=this.findTextNodeAtOffset(n.element,n.textOffset);e?i.setEnd(e.node,e.offset):i.setEnd(n.element,0)}else i.setEnd(n.element,0);let a=(0,gV.fromRange)(i);return this.adjustSpineIndex(a)}parseXPointer(e){let t=e.match(/\/text\(\)\.(\d+)$/),r=t?parseInt(t[1],10):void 0,n=void 0!==r?e.replace(/\/text\(\)\.\d+$/,""):e,i=this.resolveXPointerPath(n);if(!i)throw Error(`Cannot resolve XPointer path: ${n}`);return{element:i,textOffset:r}}resolveXPointerPath(e){let t=e.match(/^\/body\/DocFragment\[\d+\]\/body(.*)$/);if(!t)throw Error(`Invalid XPointer format: ${e}`);let r=t[1],n=this.document.body;if(!r||""===r)return n;for(let e of r.split("/").filter(Boolean)){let t,r,i=e.match(/^(\w+)\[(\d+)\]$/),a=e.match(/^(\w+)$/);if(i){let[,e,n]=i;t=e,r=Math.max(0,parseInt(n,10)-1)}else if(a){let[,e]=a;t=e,r=0}else throw Error(`Invalid XPointer segment: ${e}`);let o=Array.from(n.children).filter(e=>e.tagName.toLowerCase()===t?.toLowerCase());if(r>=o.length)throw Error(`Element index ${r} out of bounds for tag ${t}`);n=o[r]}return n}findTextNodeAtOffset(e,t){let r=[];this.collectTextNodes(e,r);let n=0;for(let e of r){let r=(e.textContent||"").length;if(n+r>=t)return{node:e,offset:t-n};n+=r}if(r.length>0){let e=r[r.length-1];return{node:e,offset:(e.textContent||"").length}}return null}adjustSpineIndex(e){let t=e.match(/^epubcfi\((.+)\)$/);if(!t)throw Error(`Invalid CFI format: ${e}`);let r=t[1],n=(this.spineItemIndex+1)*2;if(r.match(/^\/6\/\d+!/)){let e=r.replace(/^\/6\/\d+!/,`/6/${n}!`);return`epubcfi(${e})`}{let e=`/6/${n}!${r}`;return`epubcfi(${e})`}}rangePointToXPointer(e,t){if(e.nodeType===Node.TEXT_NODE){let r=e.parentElement||this.document.documentElement;return this.handleTextOffsetInElement(r,e,t)}if(e.nodeType!==Node.ELEMENT_NODE)return this.buildXPointerPath(this.document.documentElement);{let r=e;if(0===t)return r.childNodes.length>0&&r.childNodes[0].nodeType===Node.ELEMENT_NODE?this.buildXPointerPath(r.childNodes[0]):this.buildXPointerPath(r);{let e=Array.from(r.childNodes),n=e[t-1]||e[e.length-1];return n?.nodeType===Node.ELEMENT_NODE?this.buildXPointerPath(n):n?.nodeType===Node.TEXT_NODE?this.handleTextOffsetInElement(r,n,n.textContent?.length||0):this.buildXPointerPath(r)}}}buildXPointerPath(e){let t=[],r=e;for(;r&&r!==this.document.documentElement;){let e=r.parentElement;if(!e)break;let n=r.tagName.toLowerCase(),i=0,a=0;for(let t of Array.from(e.children))t.tagName.toLowerCase()===n&&(t===r&&(i=a),a++);1===a?t.unshift(n):t.unshift(`${n}[${i+1}]`),r=e}let n=`/body/DocFragment[${this.spineItemIndex+1}]`;return t.length>0&&t[0].startsWith("body")&&t.shift(),n+="/body",t.length>0&&(n+="/"+t.join("/")),n}handleTextOffset(e,t){let r=[];this.collectTextNodes(e,r);let n=0,i=null,a=0;for(let e of r){let r=(e.textContent||"").length;if(n+r>=t){i=e,a=t-n;break}n+=r}if(!i)return this.buildXPointerPath(e);let o=i.parentElement;for(;o&&!this.isSignificantElement(o);)o=o.parentElement;o||(o=e);let s=this.buildXPointerPath(o);return`${s}/text().${a}`}handleTextOffsetInElement(e,t,r){let n=[];this.collectTextNodes(e,n);let i=0;for(let e of n){if(e===t){i+=r;break}i+=(e.textContent||"").length}return this.handleTextOffset(e,i)}collectTextNodes(e,t){for(let r of Array.from(e.childNodes))r.nodeType===Node.TEXT_NODE?(r.textContent||"").length>0&&t.push(r):r.nodeType===Node.ELEMENT_NODE&&this.collectTextNodes(r,t)}isSignificantElement(e){let t=e.tagName.toLowerCase();return!new Set(["span","em","strong","i","b","u","small","mark","sup","sub"]).has(t)}}let gW=async(e,t,r,n)=>{let i,a=gq.extractSpineIndex(e);if(r===a&&t)i=new gq(t,r||0);else{let e=await n?.sections?.[a]?.createDocument();if(!e)throw Error("Failed to load document for XPointer conversion.");i=new gq(e,a||0)}return i.xPointerToCFI(e)},gK=async(e,t,r,n)=>{let i,a=gq.extractSpineIndex(e);if(r===a&&t)i=new gq(t,r||0);else{let e=await n?.sections?.[a]?.createDocument();if(!e)throw Error("Failed to load document for CFI conversion.");i=new gq(e,a||0)}return i.cfiToXPointer(e)},gG=e=>{let t=/\/text\(\).*$/;e.match(t)&&(e=e.replace(t,""));let r=/\.\d+$/;return e.match(r)&&(e=e.replace(r,"")),e},gX=e=>{let t=eU(),{getConfig:r,setConfig:n,getBookData:i}=ex(),{getView:a,getProgress:o,setHoveredBookKey:s}=e_(),{settings:l}=(0,gF.useSettingsStore)(),{syncedConfigs:c,syncConfigs:u}=gD(e),{user:d}=(0,gC.useAuth)(),f=o(e),h=(0,gj.useRef)(!1),p=(0,gj.useRef)(!1),b=async(e,t)=>{let r=i(e)?.book;if(!t||!r||!d)return;let n=e.split("-")[0],a=r.metaHash,o={...t,bookHash:n,metaHash:a},s=JSON.parse((0,g$.serializeConfig)(o,l.globalViewSettings,gH.DEFAULT_BOOK_SEARCH_CONFIG));delete s.booknotes,await u([s],n,a,"push")},g=async e=>{let t=i(e)?.book;if(!d||!t)return;let r=e.split("-")[0],n=t.metaHash;await u([],r,n,"pull")},m=async()=>{if(h.current){let t=r(e),n=a(e),o=i(e)?.book;if(t&&n&&o&&t.progress&&t.progress[0]>0){try{let e=n.renderer.getContents()[0];if(e&&!gz.FIXED_LAYOUT_FORMATS.has(o.format)){let{doc:r,index:n}=e,i=await gK(t.location,r,n||0);t.xpointer=gG(i.xpointer)}}catch(e){console.warn("Failed to convert CFI to XPointer",e)}b(e,t)}}else g(e)},v=async t=>{let{bookKey:r}=t.detail;r===e&&(h.current=!1,await g(e))};(0,gj.useEffect)(()=>(eR.on("sync-book-progress",v),()=>{eR.off("sync-book-progress",v)}),[e]);let y=(0,gj.useCallback)(aM(()=>{m()},1e3*gH.SYNC_PROGRESS_INTERVAL_SEC),[]);(0,gj.useEffect)(()=>{f?.location&&d&&y()},[f?.location]),(0,gj.useEffect)(()=>{f&&!p.current&&(p.current=!0,g(e))},[f]);let x=async o=>{let l=r(e),c=i(e)?.book;if(!o||0===o.length||!l||!c)return;let u=e.split("-")[0],d=c.metaHash,f=o.filter(e=>e.bookHash===u||e.metaHash===d)[0];if(f){let r=l?.location,o=f.location,c=f.xpointer,u=i(e),d=a(e);if(c&&d&&u&&u.bookDoc){let e=d.renderer.getContents()[0],t=gG(c),r=await gW(t,e?.doc,e?.index,u.bookDoc);(!o||0>gU.CFI.compare(o,r))&&(o=r)}let h=Object.fromEntries(Object.entries(f).filter(([e,t])=>null!=t));f.updatedAt>=l.updatedAt?n(e,{...l,...h}):n(e,{...h,...l}),o&&r&&0>gU.CFI.compare(r,o)&&d&&(d.goTo(o),s(null),eR.dispatch("hint",{bookKey:e,message:t("Reading Progress Synced")}))}};(0,gj.useEffect)(()=>{!h.current&&c&&(h.current=!0,x(c).catch(e=>{console.error("Failed to apply remote progress",e)}))},[c])};var gZ=p,gY=l,gJ=x;let gQ=e=>{let{envConfig:t}=(0,gY.useEnv)(),{getConfig:r,saveConfig:n}=ex(),{getProgress:i}=e_(),a=i(e),o=(0,gZ.useCallback)(oz(()=>{setTimeout(async()=>{let i=r(e),a=gJ.useSettingsStore.getState().settings;await n(t,e,i,a)},5e3)},1e4),[]);(0,gZ.useEffect)(()=>{o()},[a,e])};var g0=e.i(187212),g1=p;let g2=(e={})=>{let{delay:t=0,condition:r=!0,preventScroll:n=!1,ref:i}=e,a=(0,g1.useRef)(null),o=i||a;return(0,g1.useEffect)(()=>{if(r&&o.current){let e=()=>{o.current?.focus({preventScroll:n})};if(t>0){let r=setTimeout(e,t);return()=>clearTimeout(r)}e()}},[r,t,n]),o};var g3=e.i(557020),g4=p,g6=l,g5=x,g8=D;let g9=e=>{let t=eU(),{appService:r}=(0,g6.useEnv)(),{settings:n}=(0,g5.useSettingsStore)(),{getProgress:i,getView:a}=e_(),{getBookData:o}=ex(),[s,l]=(0,g4.useState)(null),[c,u]=(0,g4.useState)("idle"),[d,f]=(0,g4.useState)(null),[h]=(0,g4.useState)(null),p=(0,g4.useRef)(!1),b=i(e);(0,g4.useEffect)(()=>{n.kosync.username&&n.kosync.userkey?l(new aC(n.kosync)):l(null)},[n]);let g=(0,g4.useCallback)(()=>{let t,r=i(e),n=o(e)?.book;if(!r||!n)return null;let s="";if(g8.FIXED_LAYOUT_FORMATS.has(n.format)){let e=r.section?.current??0,n=r.section?.total??0;s=e.toString(),t=n>0?(e+1)/n:0}else{let n=a(e),i=r.location;if(!n||!i)return null;try{let e=n.renderer.getContents()[0];if(e){let{doc:t,index:r}=e,n=new gq(t,r||0).cfiToXPointer(i);s=gG(n.xpointer)}}catch(e){console.error("Failed to convert CFI to XPointer",e)}let o=r.pageinfo?.current??0,l=r.pageinfo?.total??0;t=l>0?(o+1)/l:0}return{koProgress:s,percentage:t}},[e,i,o,a]),m=async(r,n,i)=>{let o=a(e);if(g8.FIXED_LAYOUT_FORMATS.has(r.format)){let e=parseInt(i.progress,10);if(isNaN(e))return;o?.select(e-1)}else{if(!i.progress?.startsWith("/body"))return;try{let e=o?.renderer.getContents()[0],t=gG(i.progress),r=await gW(t,e?.doc,e?.index,n);o?.goTo(r)}catch(e){console.error("Failed to convert XPointer to CFI",e);return}}eR.dispatch("toast",{message:t("Reading Progress Synced"),type:"info"})},v=async(e,r,n,i)=>{let a="",o="",s=i.percentage||0;if(g8.FIXED_LAYOUT_FORMATS.has(e.format)){let e=n.section,r=e&&e.total>0?Math.round((e.current+1)/e.total*100):0;a=e?t("Page {{page}} of {{total}} ({{percentage}}%)",{page:e.current+1,total:e.total,percentage:r}):t("Current position");let l=parseInt(i.progress,10);if(!isNaN(l)&&s>0){let r=e?.total??0,n=Math.round(l/s);o=1>=Math.abs(r-n)?t("Page {{page}} of {{total}} ({{percentage}}%)",{page:l,total:n,percentage:Math.round(100*s)}):t("Approximately page {{page}} of {{total}} ({{percentage}}%)",{page:l,total:n,percentage:Math.round(100*s)})}else o=t("Approximately {{percentage}}%",{percentage:Math.round(100*s)})}else{let e=n.pageinfo,r=e&&e.total>0?Math.round((e.current+1)/e.total*100):0;a=`${n.sectionLabel} (${r}%)`,o=t("Approximately {{percentage}}%",{percentage:Math.round(100*s)})}f({book:e,bookDoc:r,local:{cfi:n.location,preview:a},remote:{...i,preview:o}})},y=(0,g4.useMemo)(()=>aM(async()=>{if(!e||!r||!s||!p.current)return;let{settings:t}=g5.useSettingsStore.getState();if(["receive","disable"].includes(t.kosync.strategy))return;let n=o(e)?.book,i=g();n&&i&&i.koProgress&&await s.updateProgress(n,i.koProgress,i.percentage)},5e3),[e,r,s]),x=(0,g4.useCallback)(async()=>{if(!b?.location||!r||!s)return;let t=o(e),i=t?.book,a=t?.bookDoc;if(!i||!a)return;let{strategy:l,enabled:c}=n.kosync;if(!c)return;if(p.current=!0,"send"===l)return void u("synced");u("checking");let d=await s.getProgress(i);if(!d||!d.progress)return void u("synced");let f=t?.config?.updatedAt||i.updatedAt,h=(d.timestamp?1e3*d.timestamp:Date.now())>f;"receive"===l||"silent"===l&&h?(m(i,a,d),u("synced")):"prompt"===l?(v(i,a,b,d),u("conflict")):u("synced")},[e,r,s,n.kosync,b]);(0,g4.useEffect)(()=>{let t=t=>{t.detail.bookKey===e&&(y(),y.flush())},r=t=>{t.detail.bookKey===e&&y.flush()};return eR.on("push-kosync",t),eR.on("flush-kosync",r),()=>{eR.off("push-kosync",t),eR.off("flush-kosync",r),y.flush()}},[e,y]),(0,g4.useEffect)(()=>{let t=t=>{t.detail.bookKey===e&&x()};return eR.on("pull-kosync",t),()=>{eR.off("pull-kosync",t)}},[e,x]),(0,g4.useEffect)(()=>{r&&s&&b?.location&&(p.current||x())},[r,s,b?.location,y,x]),(0,g4.useEffect)(()=>{if("synced"===c&&b){let{strategy:e,enabled:t}=n.kosync;"receive"!==e&&t&&y()}},[b,c,n.kosync,y]);let w=()=>{y(),y.flush(),u("synced"),f(null)},_=async()=>{let t=a(e),r=d?.remote,n=d?.book,i=d?.bookDoc;n&&i&&r&&r.progress&&t&&(m(n,i,r),u("synced"),f(null))};return{syncState:c,conflictDetails:d,errorMessage:h,pushProgress:y,pullProgress:x,resolveWithLocal:w,resolveWithRemote:_}};var g7=ls,me=eg,mt=p,mr=x;let mn=e=>{let{settings:t}=(0,mr.useSettingsStore)(),{getViewSettings:r}=e_(),n=r(e||""),[i,a]=(0,mt.useState)(null);(0,mt.useEffect)(()=>{i&&i.remove();let r=n?.userUIStylesheet||t?.globalViewSettings?.userUIStylesheet||"",o=document.createElement("style");return o.textContent=r.replace("foliate-view",`#foliate-view-${e}`),document.head.appendChild(o),a(o),()=>{o.remove()}},[n?.userUIStylesheet,t?.globalViewSettings?.userUIStylesheet,e])};var mi=R;let ma=0,mo=null,ms={key:"",code:"",ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1},ml=e=>e&&"ctrlKey"in e?{key:ms.key,code:ms.code,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,altKey:e.altKey,metaKey:e.metaKey}:{...ms},mc=(e,t)=>{ms={key:t.key,code:t.code,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,altKey:t.altKey,metaKey:t.metaKey},["Backspace"].includes(t.key)&&t.preventDefault(),window.postMessage({type:"iframe-keydown",bookKey:e,key:t.key,code:t.code,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,altKey:t.altKey,metaKey:t.metaKey},"*")},mu=(e,t)=>{ms={key:"",code:"",ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,altKey:t.altKey,metaKey:t.metaKey},window.postMessage({type:"iframe-keyup",bookKey:e,key:t.key,code:t.code,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,altKey:t.altKey,metaKey:t.metaKey},"*")},md=(e,t)=>{mo=setTimeout(()=>{mo=null},mi.LONG_HOLD_THRESHOLD),window.postMessage({type:"iframe-mousedown",bookKey:e,button:t.button,screenX:t.screenX,screenY:t.screenY,clientX:t.clientX,clientY:t.clientY,offsetX:t.offsetX,offsetY:t.offsetY,...ml(t)},"*")},mf=(e,t)=>{[3,4].includes(t.button)&&t.preventDefault(),window.postMessage({type:"iframe-mouseup",bookKey:e,button:t.button,screenX:t.screenX,screenY:t.screenY,clientX:t.clientX,clientY:t.clientY,offsetX:t.offsetX,offsetY:t.offsetY,...ml(t)},"*")},mh=(e,t)=>{window.postMessage({type:"iframe-wheel",bookKey:e,deltaMode:t.deltaMode,deltaX:t.deltaX,deltaY:t.deltaY,deltaZ:t.deltaZ,screenX:t.screenX,screenY:t.screenY,clientX:t.clientX,clientY:t.clientY,offsetX:t.offsetX,offsetY:t.offsetY,...ml(t)},"*")},mp=(e,t,r)=>{let n=Date.now();if(!t.current&&n-ma<mi.DOUBLE_CLICK_INTERVAL_THRESHOLD_MS){ma=n,window.postMessage({type:"iframe-double-click",bookKey:e,screenX:r.screenX,screenY:r.screenY,clientX:r.clientX,clientY:r.clientY,offsetX:r.offsetX,offsetY:r.offsetY,...ml(r)},"*");return}ma=n;let i=()=>{let t=r.target;if(t?.closest("sup, a, audio, video")&&!t?.closest("a.duokan-footnote:not([href])"))return;let n=t?.closest(".js_readerFooterNote, .zhangyue-footnote, .duokan-footnote");n?eR.dispatch("footnote-popup",{bookKey:e,element:n,footnote:n.getAttribute("data-wr-footernote")||n.getAttribute("zy-footnote")||n.getAttribute("alt")||t?.getAttribute("alt")||""}):mo&&window.postMessage({type:"iframe-single-click",bookKey:e,screenX:r.screenX,screenY:r.screenY,clientX:r.clientX,clientY:r.clientY,offsetX:r.offsetX,offsetY:r.offsetY,...ml(r)},"*")};t.current?i():setTimeout(()=>{Date.now()-ma>=mi.DOUBLE_CLICK_INTERVAL_THRESHOLD_MS&&i()},mi.DOUBLE_CLICK_INTERVAL_THRESHOLD_MS)},mb=(e,t,r)=>{let n=t.targetTouches[0],i=[];n&&i.push({clientX:n.clientX,clientY:n.clientY,screenX:n.screenX,screenY:n.screenY}),window.postMessage({type:r,bookKey:e,timeStamp:Date.now(),targetTouches:i,...ml(t)},"*")},mg=(e,t)=>{mb(e,t,"iframe-touchstart")},mm=(e,t)=>{mb(e,t,"iframe-touchmove")},mv=(e,t)=>{mb(e,t,"iframe-touchend")};var my=e.i(84733),mx=iH,mw=A;let m_={name:"footnote",transform:async e=>{let t=e.content;return t.replace(/<aside\s+epub:type\s*=\s*["'](footnote|endnote|note|rearnote)["']([^>]*)>/gi,'<aside class="epubtype-footnote" epub:type="$1"$2>')}};var mS=r0;let mE={name:"language",transform:async e=>{let t=e.primaryLanguage,r=e.content,n=r.match(/<html\b([^>]*)>/i);if(n){let e=n[1]||"",i=/ lang="([^"]*)"/i,a=/ xml:lang="([^"]*)"/i,o=e.match(a),s=e.match(i),l=s?.[1]||o?.[1];if(!(0,mS.isValidLang)(l)||!(0,mS.isSameLang)(l,t)){let l=r.replace(/<[^>]+>/g," "),c=(0,mS.isValidLang)(t)&&"en"!==t?t:(0,mS.detectLanguage)(l),u=(0,mS.getLanguageInfo)(c||""),d=` lang="${c}"`,f=` xml:lang="${c}"`,h=u?.direction==="rtl"?' dir="rtl"':"";e=s?e.replace(i,d):e+d+h,e=o?e.replace(a,f):e+f+h,r=r.replace(n[0],`<html${e}>`)}}else{let e=(0,mS.isValidLang)(t)&&"en"!==t?t:(0,mS.detectLanguage)(r.replace(/<[^>]+>/g," ")),n=(0,mS.getLanguageInfo)(e||""),i=n?.direction==="rtl"?' dir="rtl"':"",a=` lang="${e}" xml:lang="${e}" ${i}`;r=r.replace(/<html>/i,`<html${a}>`)}return r}},mk={"":"","":"","":"","":"","":"","":"","":"","":""},mN={"":"","":"","":"","":"","":"","":"","":"","":""},mj={"":"","":"","":"","":"","":"","":"","":"","":""},mC={name:"punctuation",transform:async e=>{if(!e.viewSettings.replaceQuotationMarks)return e.content;let t=e.content,r=e.viewSettings.convertChineseVariant,n=e.reversePunctuationTransform||!1;if(r&&"none"!==r)for(let[e,i]of Object.entries(mj)){let[a,o]=n!==r.includes("2s")?[i,e]:[e,i];t=t.replace(RegExp(a,"g"),o)}if(e.viewSettings.vertical){let r=["zh-Hant","zh-TW","zh_TW"],n=mk;for(let[i,a]of((r.includes(e.primaryLanguage||"")||r.includes(e.userLocale))&&(n=mN),Object.entries(n)))t=e.reversePunctuationTransform?t.replace(RegExp(a,"g"),i):t.replace(RegExp(i,"g"),a)}return t}},mM={name:"whitespace",transform:async e=>e.viewSettings.overrideLayout?e.content.replace(/(&amp;)?&nbsp;/g,(e,t)=>t?e:" ").replace(/\u00A0/g," ").replace(/ {2,}/g," "):e.content},{entries:mA,setPrototypeOf:mR,isFrozen:mT,getPrototypeOf:mO,getOwnPropertyDescriptor:mL}=Object,{freeze:mI,seal:mP,create:mB}=Object,{apply:mD,construct:mz}="undefined"!=typeof Reflect&&Reflect;mI||(mI=function(e){return e}),mP||(mP=function(e){return e}),mD||(mD=function(e,t){for(var r=arguments.length,n=Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];return e.apply(t,n)}),mz||(mz=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return new e(...r)});let mF=m0(Array.prototype.forEach),m$=m0(Array.prototype.lastIndexOf),mU=m0(Array.prototype.pop),mH=m0(Array.prototype.push),mV=m0(Array.prototype.splice),mq=m0(String.prototype.toLowerCase),mW=m0(String.prototype.toString),mK=m0(String.prototype.match),mG=m0(String.prototype.replace),mX=m0(String.prototype.indexOf),mZ=m0(String.prototype.trim),mY=m0(Object.prototype.hasOwnProperty),mJ=m0(RegExp.prototype.test),mQ=m1(TypeError);function m0(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return mD(e,t,n)}}function m1(e){return function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return mz(e,r)}}function m2(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:mq;mR&&mR(e,null);let n=t.length;for(;n--;){let i=t[n];if("string"==typeof i){let e=r(i);e!==i&&(mT(t)||(t[n]=e),i=e)}e[i]=!0}return e}function m3(e){for(let t=0;t<e.length;t++)mY(e,t)||(e[t]=null);return e}function m4(e){let t=mB(null);for(let[r,n]of mA(e))mY(e,r)&&(Array.isArray(n)?t[r]=m3(n):n&&"object"==typeof n&&n.constructor===Object?t[r]=m4(n):t[r]=n);return t}function m6(e,t){for(;null!==e;){let r=mL(e,t);if(r){if(r.get)return m0(r.get);if("function"==typeof r.value)return m0(r.value)}e=mO(e)}return function(){return null}}let m5=mI(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),m8=mI(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),m9=mI(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),m7=mI(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),ve=mI(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),vt=mI(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),vr=mI(["#text"]),vn=mI(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),vi=mI(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),va=mI(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),vo=mI(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),vs=mP(/\{\{[\w\W]*|[\w\W]*\}\}/gm),vl=mP(/<%[\w\W]*|[\w\W]*%>/gm),vc=mP(/\$\{[\w\W]*/gm),vu=mP(/^data-[\-\w.\u00B7-\uFFFF]+$/),vd=mP(/^aria-[\-\w]+$/),vf=mP(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),vh=mP(/^(?:\w+script|data):/i),vp=mP(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),vb=mP(/^html$/i);var vg=Object.freeze({__proto__:null,ARIA_ATTR:vd,ATTR_WHITESPACE:vp,CUSTOM_ELEMENT:mP(/^[a-z][.\w]*(-[.\w]+)+$/i),DATA_ATTR:vu,DOCTYPE_NAME:vb,ERB_EXPR:vl,IS_ALLOWED_URI:vf,IS_SCRIPT_OR_DATA:vh,MUSTACHE_EXPR:vs,TMPLIT_EXPR:vc});let vm=1,vv=3,vy=7,vx=8,vw=9,v_=function(){return"undefined"==typeof window?null:window},vS=function(e,t){if("object"!=typeof e||"function"!=typeof e.createPolicy)return null;let r=null,n="data-tt-policy-suffix";t&&t.hasAttribute(n)&&(r=t.getAttribute(n));let i="dompurify"+(r?"#"+r:"");try{return e.createPolicy(i,{createHTML:e=>e,createScriptURL:e=>e})}catch(e){return console.warn("TrustedTypes policy "+i+" could not be created."),null}},vE=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function vk(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v_(),r=e=>vk(e);if(r.version="3.3.0",r.removed=[],!t||!t.document||t.document.nodeType!==vw||!t.Element)return r.isSupported=!1,r;let{document:n}=t,i=n,a=i.currentScript,{DocumentFragment:o,HTMLTemplateElement:s,Node:l,Element:c,NodeFilter:u,NamedNodeMap:d=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:f,DOMParser:h,trustedTypes:p}=t,b=c.prototype,g=m6(b,"cloneNode"),m=m6(b,"remove"),v=m6(b,"nextSibling"),y=m6(b,"childNodes"),x=m6(b,"parentNode");if("function"==typeof s){let e=n.createElement("template");e.content&&e.content.ownerDocument&&(n=e.content.ownerDocument)}let w="",{implementation:_,createNodeIterator:S,createDocumentFragment:E,getElementsByTagName:k}=n,{importNode:N}=i,j=vE();r.isSupported="function"==typeof mA&&"function"==typeof x&&_&&void 0!==_.createHTMLDocument;let{MUSTACHE_EXPR:C,ERB_EXPR:M,TMPLIT_EXPR:A,DATA_ATTR:R,ARIA_ATTR:T,IS_SCRIPT_OR_DATA:O,ATTR_WHITESPACE:L,CUSTOM_ELEMENT:I}=vg,{IS_ALLOWED_URI:P}=vg,B=null,D=m2({},[...m5,...m8,...m9,...ve,...vr]),z=null,F=m2({},[...vn,...vi,...va,...vo]),$=Object.seal(mB(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),U=null,H=null,V=Object.seal(mB(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}})),q=!0,W=!0,K=!1,G=!0,X=!1,Z=!0,Y=!1,J=!1,Q=!1,ee=!1,et=!1,er=!1,en=!0,ei=!1,ea="user-content-",eo=!0,es=!1,el={},ec=null,eu=m2({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),ed=null,ef=m2({},["audio","video","img","source","image","track"]),eh=null,ep=m2({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),eb="http://www.w3.org/1998/Math/MathML",eg="http://www.w3.org/2000/svg",em="http://www.w3.org/1999/xhtml",ev=em,ey=!1,ex=null,ew=m2({},[eb,eg,em],mW),e_=m2({},["mi","mo","mn","ms","mtext"]),eS=m2({},["annotation-xml"]),eE=m2({},["title","style","font","a","script"]),ek=null,eN=["application/xhtml+xml","text/html"],ej="text/html",eC=null,eM=null,eA=n.createElement("form"),eR=function(e){return e instanceof RegExp||e instanceof Function},eT=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!eM||eM!==t){if(t&&"object"==typeof t||(t={}),t=m4(t),ek=-1===eN.indexOf(t.PARSER_MEDIA_TYPE)?ej:t.PARSER_MEDIA_TYPE,eC="application/xhtml+xml"===ek?mW:mq,B=mY(t,"ALLOWED_TAGS")?m2({},t.ALLOWED_TAGS,eC):D,z=mY(t,"ALLOWED_ATTR")?m2({},t.ALLOWED_ATTR,eC):F,ex=mY(t,"ALLOWED_NAMESPACES")?m2({},t.ALLOWED_NAMESPACES,mW):ew,eh=mY(t,"ADD_URI_SAFE_ATTR")?m2(m4(ep),t.ADD_URI_SAFE_ATTR,eC):ep,ed=mY(t,"ADD_DATA_URI_TAGS")?m2(m4(ef),t.ADD_DATA_URI_TAGS,eC):ef,ec=mY(t,"FORBID_CONTENTS")?m2({},t.FORBID_CONTENTS,eC):eu,U=mY(t,"FORBID_TAGS")?m2({},t.FORBID_TAGS,eC):m4({}),H=mY(t,"FORBID_ATTR")?m2({},t.FORBID_ATTR,eC):m4({}),el=!!mY(t,"USE_PROFILES")&&t.USE_PROFILES,q=!1!==t.ALLOW_ARIA_ATTR,W=!1!==t.ALLOW_DATA_ATTR,K=t.ALLOW_UNKNOWN_PROTOCOLS||!1,G=!1!==t.ALLOW_SELF_CLOSE_IN_ATTR,X=t.SAFE_FOR_TEMPLATES||!1,Z=!1!==t.SAFE_FOR_XML,Y=t.WHOLE_DOCUMENT||!1,ee=t.RETURN_DOM||!1,et=t.RETURN_DOM_FRAGMENT||!1,er=t.RETURN_TRUSTED_TYPE||!1,Q=t.FORCE_BODY||!1,en=!1!==t.SANITIZE_DOM,ei=t.SANITIZE_NAMED_PROPS||!1,eo=!1!==t.KEEP_CONTENT,es=t.IN_PLACE||!1,P=t.ALLOWED_URI_REGEXP||vf,ev=t.NAMESPACE||em,e_=t.MATHML_TEXT_INTEGRATION_POINTS||e_,eS=t.HTML_INTEGRATION_POINTS||eS,$=t.CUSTOM_ELEMENT_HANDLING||{},t.CUSTOM_ELEMENT_HANDLING&&eR(t.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&($.tagNameCheck=t.CUSTOM_ELEMENT_HANDLING.tagNameCheck),t.CUSTOM_ELEMENT_HANDLING&&eR(t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&($.attributeNameCheck=t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),t.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&($.allowCustomizedBuiltInElements=t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),X&&(W=!1),et&&(ee=!0),el&&(B=m2({},vr),z=[],!0===el.html&&(m2(B,m5),m2(z,vn)),!0===el.svg&&(m2(B,m8),m2(z,vi),m2(z,vo)),!0===el.svgFilters&&(m2(B,m9),m2(z,vi),m2(z,vo)),!0===el.mathMl&&(m2(B,ve),m2(z,va),m2(z,vo))),t.ADD_TAGS&&("function"==typeof t.ADD_TAGS?V.tagCheck=t.ADD_TAGS:(B===D&&(B=m4(B)),m2(B,t.ADD_TAGS,eC))),t.ADD_ATTR&&("function"==typeof t.ADD_ATTR?V.attributeCheck=t.ADD_ATTR:(z===F&&(z=m4(z)),m2(z,t.ADD_ATTR,eC))),t.ADD_URI_SAFE_ATTR&&m2(eh,t.ADD_URI_SAFE_ATTR,eC),t.FORBID_CONTENTS&&(ec===eu&&(ec=m4(ec)),m2(ec,t.FORBID_CONTENTS,eC)),eo&&(B["#text"]=!0),Y&&m2(B,["html","head","body"]),B.table&&(m2(B,["tbody"]),delete U.tbody),t.TRUSTED_TYPES_POLICY){if("function"!=typeof t.TRUSTED_TYPES_POLICY.createHTML)throw mQ('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof t.TRUSTED_TYPES_POLICY.createScriptURL)throw mQ('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');w=(e=t.TRUSTED_TYPES_POLICY).createHTML("")}else void 0===e&&(e=vS(p,a)),null!==e&&"string"==typeof w&&(w=e.createHTML(""));mI&&mI(t),eM=t}},eO=m2({},[...m8,...m9,...m7]),eL=m2({},[...ve,...vt]),eI=function(e){let t=x(e);t&&t.tagName||(t={namespaceURI:ev,tagName:"template"});let r=mq(e.tagName),n=mq(t.tagName);return!!ex[e.namespaceURI]&&(e.namespaceURI===eg?t.namespaceURI===em?"svg"===r:t.namespaceURI===eb?"svg"===r&&("annotation-xml"===n||e_[n]):!!eO[r]:e.namespaceURI===eb?t.namespaceURI===em?"math"===r:t.namespaceURI===eg?"math"===r&&eS[n]:!!eL[r]:e.namespaceURI===em?(t.namespaceURI!==eg||!!eS[n])&&(t.namespaceURI!==eb||!!e_[n])&&!eL[r]&&(eE[r]||!eO[r]):"application/xhtml+xml"===ek&&!!ex[e.namespaceURI])},eP=function(e){mH(r.removed,{element:e});try{x(e).removeChild(e)}catch(t){m(e)}},eB=function(e,t){try{mH(r.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){mH(r.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e)if(ee||et)try{eP(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},eD=function(t){let r=null,i=null;if(Q)t="<remove></remove>"+t;else{let e=mK(t,/^[\r\n\t ]+/);i=e&&e[0]}"application/xhtml+xml"===ek&&ev===em&&(t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+t+"</body></html>");let a=e?e.createHTML(t):t;if(ev===em)try{r=new h().parseFromString(a,ek)}catch(e){}if(!r||!r.documentElement){r=_.createDocument(ev,"template",null);try{r.documentElement.innerHTML=ey?w:a}catch(e){}}let o=r.body||r.documentElement;return(t&&i&&o.insertBefore(n.createTextNode(i),o.childNodes[0]||null),ev===em)?k.call(r,Y?"html":"body")[0]:Y?r.documentElement:o},ez=function(e){return S.call(e.ownerDocument||e,e,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT|u.SHOW_PROCESSING_INSTRUCTION|u.SHOW_CDATA_SECTION,null)},eF=function(e){return e instanceof f&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof d)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore||"function"!=typeof e.hasChildNodes)},e$=function(e){return"function"==typeof l&&e instanceof l};function eU(e,t,n){mF(e,e=>{e.call(r,t,n,eM)})}let eH=function(e){let t=null;if(eU(j.beforeSanitizeElements,e,null),eF(e))return eP(e),!0;let n=eC(e.nodeName);if(eU(j.uponSanitizeElement,e,{tagName:n,allowedTags:B}),Z&&e.hasChildNodes()&&!e$(e.firstElementChild)&&mJ(/<[/\w!]/g,e.innerHTML)&&mJ(/<[/\w!]/g,e.textContent)||e.nodeType===vy||Z&&e.nodeType===vx&&mJ(/<[/\w]/g,e.data))return eP(e),!0;if(!(V.tagCheck instanceof Function&&V.tagCheck(n))&&(!B[n]||U[n])){if(!U[n]&&eq(n)&&($.tagNameCheck instanceof RegExp&&mJ($.tagNameCheck,n)||$.tagNameCheck instanceof Function&&$.tagNameCheck(n)))return!1;if(eo&&!ec[n]){let t=x(e)||e.parentNode,r=y(e)||e.childNodes;if(r&&t){let n=r.length;for(let i=n-1;i>=0;--i){let n=g(r[i],!0);n.__removalCount=(e.__removalCount||0)+1,t.insertBefore(n,v(e))}}}return eP(e),!0}return e instanceof c&&!eI(e)||("noscript"===n||"noembed"===n||"noframes"===n)&&mJ(/<\/no(script|embed|frames)/i,e.innerHTML)?(eP(e),!0):(X&&e.nodeType===vv&&(t=e.textContent,mF([C,M,A],e=>{t=mG(t,e," ")}),e.textContent!==t&&(mH(r.removed,{element:e.cloneNode()}),e.textContent=t)),eU(j.afterSanitizeElements,e,null),!1)},eV=function(e,t,r){if(en&&("id"===t||"name"===t)&&(r in n||r in eA))return!1;if(W&&!H[t]&&mJ(R,t));else if(q&&mJ(T,t));else if(V.attributeCheck instanceof Function&&V.attributeCheck(t,e));else if(!z[t]||H[t]){if(!(eq(e)&&($.tagNameCheck instanceof RegExp&&mJ($.tagNameCheck,e)||$.tagNameCheck instanceof Function&&$.tagNameCheck(e))&&($.attributeNameCheck instanceof RegExp&&mJ($.attributeNameCheck,t)||$.attributeNameCheck instanceof Function&&$.attributeNameCheck(t,e))||"is"===t&&$.allowCustomizedBuiltInElements&&($.tagNameCheck instanceof RegExp&&mJ($.tagNameCheck,r)||$.tagNameCheck instanceof Function&&$.tagNameCheck(r))))return!1}else if(eh[t]);else if(mJ(P,mG(r,L,"")));else if(("src"===t||"xlink:href"===t||"href"===t)&&"script"!==e&&0===mX(r,"data:")&&ed[e]);else if(K&&!mJ(O,mG(r,L,"")));else if(r)return!1;return!0},eq=function(e){return"annotation-xml"!==e&&mK(e,I)},eW=function(t){eU(j.beforeSanitizeAttributes,t,null);let{attributes:n}=t;if(!n||eF(t))return;let i={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:z,forceKeepAttr:void 0},a=n.length;for(;a--;){let{name:o,namespaceURI:s,value:l}=n[a],c=eC(o),u=l,d="value"===o?u:mZ(u);if(i.attrName=c,i.attrValue=d,i.keepAttr=!0,i.forceKeepAttr=void 0,eU(j.uponSanitizeAttribute,t,i),d=i.attrValue,ei&&("id"===c||"name"===c)&&(eB(o,t),d=ea+d),Z&&mJ(/((--!?|])>)|<\/(style|title|textarea)/i,d)||"attributename"===c&&mK(d,"href")){eB(o,t);continue}if(i.forceKeepAttr)continue;if(!i.keepAttr||!G&&mJ(/\/>/i,d)){eB(o,t);continue}X&&mF([C,M,A],e=>{d=mG(d,e," ")});let f=eC(t.nodeName);if(!eV(f,c,d)){eB(o,t);continue}if(e&&"object"==typeof p&&"function"==typeof p.getAttributeType)if(s);else switch(p.getAttributeType(f,c)){case"TrustedHTML":d=e.createHTML(d);break;case"TrustedScriptURL":d=e.createScriptURL(d)}if(d!==u)try{s?t.setAttributeNS(s,o,d):t.setAttribute(o,d),eF(t)?eP(t):mU(r.removed)}catch(e){eB(o,t)}}eU(j.afterSanitizeAttributes,t,null)},eK=function e(t){let r=null,n=ez(t);for(eU(j.beforeSanitizeShadowDOM,t,null);r=n.nextNode();)eU(j.uponSanitizeShadowNode,r,null),eH(r),eW(r),r.content instanceof o&&e(r.content);eU(j.afterSanitizeShadowDOM,t,null)};return r.sanitize=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=null,s=null,c=null,u=null;if((ey=!t)&&(t="<!-->"),"string"!=typeof t&&!e$(t))if("function"==typeof t.toString){if("string"!=typeof(t=t.toString()))throw mQ("dirty is not a string, aborting")}else throw mQ("toString is not a function");if(!r.isSupported)return t;if(J||eT(n),r.removed=[],"string"==typeof t&&(es=!1),es){if(t.nodeName){let e=eC(t.nodeName);if(!B[e]||U[e])throw mQ("root node is forbidden and cannot be sanitized in-place")}}else if(t instanceof l)(s=(a=eD("<!---->")).ownerDocument.importNode(t,!0)).nodeType===vm&&"BODY"===s.nodeName||"HTML"===s.nodeName?a=s:a.appendChild(s);else{if(!ee&&!X&&!Y&&-1===t.indexOf("<"))return e&&er?e.createHTML(t):t;if(!(a=eD(t)))return ee?null:er?w:""}a&&Q&&eP(a.firstChild);let d=ez(es?t:a);for(;c=d.nextNode();)eH(c),eW(c),c.content instanceof o&&eK(c.content);if(es)return t;if(ee){if(et)for(u=E.call(a.ownerDocument);a.firstChild;)u.appendChild(a.firstChild);else u=a;return(z.shadowroot||z.shadowrootmode)&&(u=N.call(i,u,!0)),u}let f=Y?a.outerHTML:a.innerHTML;return Y&&B["!doctype"]&&a.ownerDocument&&a.ownerDocument.doctype&&a.ownerDocument.doctype.name&&mJ(vb,a.ownerDocument.doctype.name)&&(f="<!DOCTYPE "+a.ownerDocument.doctype.name+">\n"+f),X&&mF([C,M,A],e=>{f=mG(f,e," ")}),e&&er?e.createHTML(f):f},r.setConfig=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};eT(e),J=!0},r.clearConfig=function(){eM=null,J=!1},r.isValidAttribute=function(e,t,r){return eM||eT({}),eV(eC(e),eC(t),r)},r.addHook=function(e,t){"function"==typeof t&&mH(j[e],t)},r.removeHook=function(e,t){if(void 0!==t){let r=m$(j[e],t);return -1===r?void 0:mV(j[e],r,1)[0]}return mU(j[e])},r.removeHooks=function(e){j[e]=[]},r.removeAllHooks=function(){j=vE()},r}var vN=vk(),vj=ls,vC=hl,vM=x;let vA=e=>/[\p{L}\p{N}_]/u.test(e||""),vR=e=>/[^\x00-\x7F]/.test(e),vT="------------",vO=e=>RegExp(`[${vT}]`).test(e||""),vL=e=>RegExp(`^[${vT}]+$`).test(e);function vI(e,t,r=!0){let n=vR(e),i=n?"ug":"g";if(r||(i+="i"),t)return{source:e.includes("\\b")||n?e:`\\b${e}\\b`,flags:i};let a=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");if(n)return{source:a,flags:i};let o=/^[^\w\s]/.test(e),s=/[^\w\s]$/.test(e);if(o||s){let t=e.match(/[\w]+/);if(!t)return{source:a,flags:i};let r=t[0],n=e.indexOf(r),o=n+r.length,s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),l=a.substring(0,n),c=a.substring(o);return{source:`${l}\\b${s}\\b${c}`,flags:i}}return{source:`\\b${a}\\b`,flags:i}}function vP(e,t,r){if(!r.isRegex&&!(!1!==r.caseSensitive?t[0]===r.pattern:t[0].toLowerCase()===r.pattern.toLowerCase()))return!1;if(vR(r.pattern)&&!vL(r.pattern)){let r=e[t.index-1]??"",n=e[t.index+t[0].length]??"";if(!vO(r)&&!vO(n)&&(vA(r)||vA(n)))return!1}return!0}function vB(e,t){let r;try{r=new RegExp(t.normalizedPattern.source,t.normalizedPattern.flags)}catch{return}for(let n of e){let e;if(!n.textContent)continue;let i=n.textContent,a=[];for(;null!==(e=r.exec(i));)vP(i,e,t)&&a.push({index:e.index,length:e[0].length});if(0!==a.length){for(let e=a.length-1;e>=0;e--){let r=a[e];i=i.slice(0,r.index)+t.replacement+i.slice(r.index+r.length)}n.textContent=i}}}function vD(e,t){let r;try{r=new RegExp(t.normalizedPattern.source,t.normalizedPattern.flags)}catch{return}let n=vC.parse(t.cfi);if(n.parent){n.parent.shift();let i=vC.toRange(e,n);if(i){let e=i.startContainer;if(e===i.endContainer&&e.nodeType===Node.TEXT_NODE){let n=e,a=n.textContent||"",o=i.startOffset,s=i.endOffset,l=32,c=Math.max(0,o-32),u=Math.min(a.length,s+l),d=a.slice(c,u),f=a.slice(o,s),h=r.exec(d);if(h&&vP(f,h,t)){let e=c+h.index,r=e+h[0].length;if(r>=o-l&&e<=s+l){n.textContent=a.slice(0,e)+t.replacement+a.slice(r);return}}}}}}function vz(e){let t,r=document.createTreeWalker(e.body||e.documentElement,NodeFilter.SHOW_TEXT,{acceptNode:e=>{let t=e.parentElement;return t?.tagName==="SCRIPT"||t?.tagName==="STYLE"?NodeFilter.FILTER_REJECT:e.textContent?.trim()?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),n=[];for(;t=r.nextNode();)n.push(t);return n}let vF={name:"proofread",transform:async(e,t)=>{let{docType:r="text/html",onlyForTTS:n=!1}=t||{},i=[...vM.useSettingsStore.getState().settings?.globalViewSettings?.proofreadRules??[],...e.viewSettings.proofreadRules??[]].sort((e,t)=>(e.order??0)-(t.order??0));if(!i.length)return e.content;let a=i.filter(e=>e.enabled&&e.pattern.trim()).filter(e=>n?e.onlyForTTS:!e.onlyForTTS).map(e=>({...e,normalizedPattern:vI(e.pattern,e.isRegex,!1!==e.caseSensitive)}));if(!a.length)return e.content;let o=new DOMParser().parseFromString(e.content,r),s=vz(o),l={selection:a.filter(e=>"selection"===e.scope),book:a.filter(e=>"book"===e.scope),library:a.filter(e=>"library"===e.scope)};for(let t of[...l.selection,...l.book,...l.library]){if("selection"===t.scope){let r=t.sectionHref?.split("#")[0];if(e.sectionHref?.split("#")[0]!==r)continue}"selection"===t.scope?vD(o,t):vB(s,t)}return new XMLSerializer().serializeToString(o)}},v$=[mC,m_,mE,{name:"style",transform:async e=>{let t=e.content;for(let r of[...t.matchAll(/<style[^>]*>([\s\S]*?)<\/style>/gi)]){let[n,i]=r,a=await (0,vj.transformStylesheet)(i,e.width||window.innerWidth,e.height||window.innerHeight,e.viewSettings.vertical);t=t.replace(n,`<style>${a}</style>`)}return t}},mM,{name:"sanitizer",transform:async e=>{if(e.viewSettings.allowScript)return e.content;let t=e.content.replaceAll("&nbsp;","&#160;"),r=vN.sanitize(t,{WHOLE_DOCUMENT:!0,FORBID_TAGS:["script"],ALLOWED_URI_REGEXP:/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|blob|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,ADD_TAGS:["link","meta"],ADD_ATTR:e=>["xmlns","http-equiv","content","charset","link","vlink","imt-state","data-wr-footernote","zy-footnote"].includes(e)||e.startsWith("xml:")||e.startsWith("xmlns:")||e.startsWith("epub:"),RETURN_DOM:!0}),n=new XMLSerializer().serializeToString(r);return(n=(n='<?xml version="1.0" encoding="utf-8"?>'+(n=n.replaceAll("&#160;","&nbsp;").replaceAll("","&nbsp;"))).replace(/(<head[^>]*>)/i,"\n$1")).replace(/(<\/body>)(<\/html>)/i,"$1\n$2")}},{name:"simplecc",transform:async e=>{let t,r=e.viewSettings.convertChineseVariant;if(!r||"none"===r)return e.content;await eo();let n=new DOMParser().parseFromString(e.content,"text/html"),i=document.createTreeWalker(n.body||n.documentElement,NodeFilter.SHOW_TEXT,{acceptNode:e=>{let t=e.parentElement;return t&&("SCRIPT"===t.tagName||"STYLE"===t.tagName)?NodeFilter.FILTER_REJECT:e.textContent?.trim()?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),a=[];for(;t=i.nextNode();)a.push(t);for(let e of a)e.textContent&&(e.textContent=el(e.textContent,r));return new XMLSerializer().serializeToString(n)}},vF],vU=async e=>{let t=e.content;for(let r of e.transformers.map(e=>v$.find(t=>t.name===e)).filter(e=>!!e))try{t=await r.transform({...e,content:t})}catch(e){console.warn(`Error in transformer ${r.name}:`,e)}return t};var vH=_,vV=p,vq=l,vW=x,vK=eg;let vG=e=>{let t=eU(),{envConfig:r,appService:n}=(0,vq.useEnv)(),i=(0,vV.useCallback)(oz(()=>{setTimeout(async()=>{let i=vW.useSettingsStore.getState().settings,a=ex.getState().getBookData(e),o=a?.book,s=i.savedBookCoverForLockScreen,l=i.savedBookCoverForLockScreenPath;if(n&&o&&s&&s!==o?.hash){let e=await n.resolveFilePath((0,vK.getCoverFilename)(o),"Books");try{let t="last-book-cover.png",a=await n.resolveFilePath("","Images");l&&l!==a?await n.copyFile(e,`${l}/${t}`,"None"):await n.copyFile(e,t,"Images"),i.savedBookCoverForLockScreen=o.hash,vW.useSettingsStore.getState().setSettings(i),vW.useSettingsStore.getState().saveSettings(r,i)}catch(e){eR.dispatch("toast",{type:"error",message:t("Failed to auto-save book cover for lock screen: {{error}}",{error:e instanceof Error?e.message:String(e)})})}}},5e3)},5e3,{emitLast:!1}),[]);(0,vV.useEffect)(()=>{i()},[])};var vX=p,vZ=l;let vY=(e,t,r)=>{let{appService:n}=(0,vZ.useEnv)(),i=(0,vX.useRef)(Date.now()),a=(0,vX.useRef)(null),o=(0,vX.useRef)(null),s=(0,vX.useRef)(!1);(0,vX.useEffect)(()=>{if(!t||!e||!n?.isDesktopApp)return;let l=()=>{a.current&&(clearInterval(a.current),a.current=null),s.current=!1};if(!r){l(),oQ(n),o.current=null;return}o.current!==e.hash&&(i.current=Date.now(),o.current=e.hash);let c=async()=>{if(!s.current){s.current=!0;try{await oJ(e,i.current,n)}catch(e){console.error("Discord presence update failed:",e)}finally{s.current=!1}}};return c(),a.current=setInterval(()=>{c()},15e3),()=>{l(),oQ(n)}},[e?.hash,t,r,n])},vJ=e.i(197265).default,vQ=["auto-detect","bash","c","cpp","csharp","css","diff","go","graphql","ini","java","javascript","json","kotlin","less","lua","makefile","markdown","objectivec","perl","php","php-t","python","python-r","r","ruby","rust","scss","shell","sql","swift","typescript","vbnet","wasm","xml","yaml"],v0=(e,t)=>{let r="highlight-js-theme-style",{codeHighlighting:n,codeLanguage:i}=t,a=e.getElementById(r);if(a&&a.remove(),!n){let t=e.getElementById(r);t&&t.remove(),e.querySelectorAll("pre").forEach(e=>{e.dataset.highlighted&&(e.innerHTML=e.textContent||"")});return}let o=e.createElement("style");o.id=r,o.textContent=v1(),e.head.appendChild(o);let s=e.querySelectorAll("pre");vJ.configure({ignoreUnescapedHTML:!0}),s.forEach(e=>{e.innerHTML=e.textContent||"",e.className=e.className.replace(/language-\S+/g,""),e.classList.remove("hljs"),e.removeAttribute("data-highlighted"),i&&"auto-detect"!==i&&e.classList.add(`language-${i}`),vJ.highlightElement(e)})},v1=()=>{let e=`
  pre code.hljs{display:block;overflow-x:auto;padding:1em}code.hljs{padding:3px 5px}/*!
  Theme: GitHub
  Description: Light theme as seen on github.com
  Author: github.com
  Maintainer: @Hirse
  Updated: 2021-05-15

  Outdated base version: https://github.com/primer/github-syntax-light
  Current colors taken from GitHub's CSS
  */.hljs{color:#24292e;background:#fff}.hljs-doctag,.hljs-keyword,.hljs-meta .hljs-keyword,.hljs-template-tag,.hljs-template-variable,.hljs-type,.hljs-variable.language_{color:#d73a49}.hljs-title,.hljs-title.class_,.hljs-title.class_.inherited__,.hljs-title.function_{color:#6f42c1}.hljs-attr,.hljs-attribute,.hljs-literal,.hljs-meta,.hljs-number,.hljs-operator,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-variable{color:#005cc5}.hljs-meta .hljs-string,.hljs-regexp,.hljs-string{color:#032f62}.hljs-built_in,.hljs-symbol{color:#e36209}.hljs-code,.hljs-comment,.hljs-formula{color:#6a737d}.hljs-name,.hljs-quote,.hljs-selector-pseudo,.hljs-selector-tag{color:#22863a}.hljs-subst{color:#24292e}.hljs-section{color:#005cc5;font-weight:700}.hljs-bullet{color:#735c0f}.hljs-emphasis{color:#24292e;font-style:italic}.hljs-strong{color:#24292e;font-weight:700}.hljs-addition{color:#22863a;background-color:#f0fff4}.hljs-deletion{color:#b31d28;background-color:#ffeef0}
  `,t=`
  @media (prefers-color-scheme: dark) {
    pre code.hljs{display:block;overflow-x:auto;padding:1em}code.hljs{padding:3px 5px}/*!
    Theme: GitHub Dark
    Description: Dark theme as seen on github.com
    Author: github.com
    Maintainer: @Hirse
    Updated: 2021-05-15
    
    Outdated base version: https://github.com/primer/github-syntax-dark
    Current colors taken from GitHub's CSS
    */.hljs{color:#c9d1d9;background:#0d1117}.hljs-doctag,.hljs-keyword,.hljs-meta .hljs-keyword,.hljs-template-tag,.hljs-template-variable,.hljs-type,.hljs-variable.language_{color:#ff7b72}.hljs-title,.hljs-title.class_,.hljs-title.class_.inherited__,.hljs-title.function_{color:#d2a8ff}.hljs-attr,.hljs-attribute,.hljs-literal,.hljs-meta,.hljs-number,.hljs-operator,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-variable{color:#79c0ff}.hljs-meta .hljs-string,.hljs-regexp,.hljs-string{color:#a5d6ff}.hljs-built_in,.hljs-symbol{color:#ffa657}.hljs-code,.hljs-comment,.hljs-formula{color:#8b949e}.hljs-name,.hljs-quote,.hljs-selector-pseudo,.hljs-selector-tag{color:#7ee787}.hljs-subst{color:#c9d1d9}.hljs-section{color:#1f6feb;font-weight:700}.hljs-bullet{color:#f2cc60}.hljs-emphasis{color:#c9d1d9;font-style:italic}.hljs-strong{color:#c9d1d9;font-weight:700}.hljs-addition{color:#aff5b4;background-color:#033a16}.hljs-deletion{color:#ffdcd7;background-color:#67060c}
  }`;return`${e}
${t}`},v2=e=>{e.querySelectorAll("a").forEach(e=>{e.setAttribute("tabindex","-1")})};var v3=r0,v4=S,v6=a;let v5=({details:e,onResolveWithLocal:t,onResolveWithRemote:r,onClose:n})=>{let i=eU();return e?(0,v6.jsxs)(iG,{isOpen:!0,onClose:n,title:i("Sync Conflict"),children:[(0,v6.jsx)("p",{className:"py-4 text-center",children:i('Sync reading progress from "{{deviceName}}"?',{deviceName:e.remote.device||i("another device")})}),(0,v6.jsxs)("div",{className:"mt-4 space-y-4",children:[(0,v6.jsxs)("button",{className:"btn h-auto w-full flex-col items-start py-2",onClick:t,children:[(0,v6.jsx)("span",{children:i("Local Progress")}),(0,v6.jsx)("span",{className:"text-base-content/50 text-xs font-normal normal-case",children:e.local.preview})]}),(0,v6.jsxs)("button",{className:"btn btn-primary h-auto w-full flex-col items-start py-2",onClick:r,children:[(0,v6.jsx)("span",{children:i("Remote Progress")}),(0,v6.jsx)("span",{className:"text-xs font-normal normal-case",children:e.remote.preview})]})]})]}):null},v8=({bookKey:t,bookDoc:r,config:n,gridInsets:i,contentInsets:a})=>{let o=eU(),{appService:s,envConfig:l}=(0,gg.useEnv)(),{themeCode:c,isDarkMode:u}=(0,gm.useThemeStore)(),{settings:d}=(0,gv.useSettingsStore)(),{loadCustomFonts:f,getLoadedFonts:h}=gw(),{getView:p,setView:b,setViewInited:g,setProgress:m}=e_(),{getViewState:v,getViewSettings:y,setViewSettings:x}=e_(),{getParallels:w}=lr(),{getBookData:_}=ex(),{applyBackgroundTexture:S}=(0,g0.useBackgroundTexture)(),{applyEinkMode:E}=(0,g3.useEinkMode)(),k=_(t),N=v(t),j=y(t),C=(0,gp.useRef)(null),M=(0,gp.useRef)(null),A=(0,gp.useRef)(!1),R=(0,gp.useRef)(!!j?.disableDoubleClick),[T,O]=(0,gp.useState)(""),[L,I]=(0,gp.useState)(!1),P=(0,gp.useRef)(!1);g2({ref:M}),vY(k?.book||null,!!N?.isPrimary,d.discordRichPresenceEnabled),(0,gp.useEffect)(()=>{let e=setTimeout(()=>O(""),2e3);return()=>clearTimeout(e)},[T]),mn(t),gX(t),gQ(t),vG(t);let{syncState:B,conflictDetails:D,resolveWithLocal:z,resolveWithRemote:F}=g9(t);f5(t,C.current);let $=e=>{let r=e.detail;m(t,r.cfi,r.tocItem,r.section,r.location,r.time,r.range)},U=({width:e,height:r})=>n=>{let{detail:i}=n;i.data=Promise.resolve(i.data).then(n=>{let a=y(t),o=_(t);if(a&&"text/css"===i.type)return(0,g7.transformStylesheet)(n,e,r,a.vertical);let s="application/xhtml+xml"===i.type||"text/html"===i.type;return a&&o&&s?Promise.resolve(vU({bookKey:t,viewSettings:a,width:e,height:r,primaryLanguage:o.book?.primaryLanguage,userLocale:(0,v4.getLocale)(),content:n,sectionHref:i.name,transformers:["style","punctuation","footnote","whitespace","language","sanitizer","simplecc","proofread"]})):n}).catch(e=>(console.error(Error(`Failed to load ${i.name}`,{cause:e})),""))},H=e=>{I(!1),P.current=!0;let i=e.detail;if(console.log("doc index loaded:",i.index),i.doc){let e=C.current?.renderer.setStyles&&(0,gb.getDirection)(i.doc),a=y(t),o=_(t),s=e?.vertical||a.writingMode.includes("vertical")||!1,l=e?.rtl||"rtl"===(0,mx.getDirFromUILanguage)()||a.writingMode.includes("rl")||!1;(a.vertical!==s||a.rtl!==l)&&(a.vertical=s,a.rtl=l,x(t,{...a})),o?.isFixedLayout||e7(i.doc,(0,v3.isCJKLang)(o.book?.primaryLanguage)),h().forEach(e=>{tl(i.doc,e)}),r.rendition?.layout==="pre-paginated"&&(0,g7.applyFixedlayoutStyles)(i.doc,a),(0,g7.applyImageStyle)(i.doc),(0,g7.applyTableStyle)(i.doc),(0,g7.applyThemeModeClass)(i.doc,u),(0,g7.applyScrollModeClass)(i.doc,a.scrolled||!1),(0,g7.keepTextAlignment)(i.doc),v2(i.doc),a.allowScript&&(0,mw.isTauriAppPlatform)()&&V(i.doc),a.codeHighlighting&&v0(i.doc,a),setTimeout(()=>{(n.booknotes||[]).filter(e=>!e.deletedAt&&"annotation"===e.type&&e.style).forEach(e=>C.current?.addAnnotation(e))},100),i.doc.isEventListenersAdded||(i.doc.isEventListenersAdded=!0,i.doc.addEventListener("keydown",mc.bind(null,t)),i.doc.addEventListener("keyup",mu.bind(null,t)),i.doc.addEventListener("mousedown",md.bind(null,t)),i.doc.addEventListener("mouseup",mf.bind(null,t)),i.doc.addEventListener("click",mp.bind(null,t,R)),i.doc.addEventListener("wheel",mh.bind(null,t)),i.doc.addEventListener("touchstart",mg.bind(null,t)),i.doc.addEventListener("touchmove",mm.bind(null,t)),i.doc.addEventListener("touchend",mv.bind(null,t)))}},V=e=>{if(e.defaultView&&e.defaultView.frameElement){let t=e.defaultView.frameElement;e.querySelectorAll("script:not([src])").forEach((e,r)=>{let n=e.textContent||e.innerHTML;try{console.warn("Evaluating inline scripts in iframe"),t.contentWindow?.eval(n)}catch(e){console.error(`Error executing iframe script ${r+1}:`,e)}})}},q=e=>{let r=e.detail;if("scroll"!==r.reason&&"page"!==r.reason)return;let n=w(t);n&&n.size>0&&n.forEach(e=>{if(e!==t){let t=p(e)?.renderer;t&&t.goTo?.({index:r.index,anchor:r.fraction})}})},{handlePageFlip:W,handleContinuousScroll:K}=lm(t,C,M),G=gS(t,W,K),X=gE(t,W,K);gN(C.current,{onLoad:H,onRelocate:$,onRendererRelocate:q}),(0,gp.useEffect)(()=>{A.current||(A.current=!0,setTimeout(()=>I(!0),200),(async()=>{console.log("Opening book",t),await e.A(735097);let i=pR(document.createElement("foliate-view"));i.id=`foliate-view-${t}`,M.current?.appendChild(i);let a=y(t),o=a.writingMode;if(o){let e=(0,me.getBookDirFromWritingMode)(o),t=(0,me.getBookDirFromLanguage)(r.metadata.language);"auto"!==e?r.dir=e:"auto"!==t&&(r.dir=t)}if(r.rendition?.layout==="pre-paginated"&&r.sections){r.rendition.spread=a.spreadMode;let e="rtl"===r.dir?"right":"left";r.sections[0].pageSpread=a.keepCoverSpread?"":e}await i.open(r),C.current=i,b(t,i);let{book:l}=i;l.transformTarget?.addEventListener("load",e=>{let{detail:t}=e;t.isScript&&(t.allow=a.allowScript??!1)});let c=s?.isMobile?screen.width:window.innerWidth,u=s?.isMobile?screen.height:window.innerHeight,d=c,f=u;l.transformTarget?.addEventListener("data",U({width:d,height:f})),i.renderer.setStyles?.((0,g7.getStyles)(a)),(0,g7.applyTranslationStyle)(a),R.current=a.disableDoubleClick;let h=a.animated,p=a.isEink,m=a.maxColumnCount,v=(0,my.getMaxInlineSize)(a),x=a.maxBlockSize,w=a.screenOrientation;s?.isMobileApp&&await (0,vH.lockScreenOrientation)({orientation:w}),h?i.renderer.setAttribute("animated",""):i.renderer.removeAttribute("animated"),s?.isAndroidApp&&(p?i.renderer.setAttribute("eink",""):i.renderer.removeAttribute("eink"),E(p)),r?.rendition?.layout==="pre-paginated"?(i.renderer.setAttribute("zoom",a.zoomMode),i.renderer.setAttribute("spread",a.spreadMode),i.renderer.setAttribute("scale-factor",a.zoomLevel)):(i.renderer.setAttribute("max-column-count",m),i.renderer.setAttribute("max-inline-size",`${v}px`),i.renderer.setAttribute("max-block-size",`${x}px`)),Z();let _=n.location;_?await i.init({lastLocation:_}):await i.goToFraction(0),g(t,!0)})())},[]);let Z=()=>{let e=y(t),r=v(t),n=b5(e),o=e.vertical&&e.doubleBorder,s=o&&e.showHeader,l=o&&e.showFooter,c=e.showHeader&&!e.vertical,u=e.showFooter&&!e.vertical,d=c?Math.max(0,44-a.top):0,f=r?.ttsEnabled&&e.showTTSBar?52+.33*i.bottom:0,h=u?Math.max(0,Math.max(f,44)-a.bottom):Math.max(0,f),p=32*!!s,b=32*!!l,g=(c?a.top:n.top)+d,m=a.right+p,x=(u?a.bottom:n.bottom)+h,w=a.left+b,_=e.showMarginsOnScroll&&e.scrolled;C.current?.renderer.setAttribute("margin-top",`${_?0:g}px`),C.current?.renderer.setAttribute("margin-right",`${m}px`),C.current?.renderer.setAttribute("margin-bottom",`${_?0:x}px`),C.current?.renderer.setAttribute("margin-left",`${w}px`),C.current?.renderer.setAttribute("gap",`${e.gapPercent}%`),e.scrolled&&C.current?.renderer.setAttribute("flow","scrolled")};(0,gp.useEffect)(()=>{if(C.current&&C.current.renderer){let e=y(t);C.current.renderer.setStyles?.((0,g7.getStyles)(e)),C.current.renderer.getContents().forEach(({doc:t})=>{r.rendition?.layout==="pre-paginated"&&(0,g7.applyFixedlayoutStyles)(t,e),(0,g7.applyThemeModeClass)(t,u),(0,g7.applyScrollModeClass)(t,e.scrolled||!1)})}},[c,u,j?.scrolled,j?.overrideColor,j?.invertImgColorInDark]),(0,gp.useEffect)(()=>{let e=async()=>{await f(l),h().forEach(e=>{tl(document,e);let t=C.current?.renderer.getContents();t?.forEach(({doc:t})=>tl(t,e))})};d.customFonts&&e()},[d.customFonts,l]),(0,gp.useEffect)(()=>{j&&S(l,j)},[j?.backgroundTextureId,j?.backgroundOpacity,j?.backgroundSize,S]),(0,gp.useEffect)(()=>{C.current&&C.current.renderer&&(R.current=!!j?.disableDoubleClick)},[j?.disableDoubleClick]),(0,gp.useEffect)(()=>{C.current&&C.current.renderer&&j&&Z()},[a.top,a.right,a.bottom,a.left,j?.doubleBorder,j?.showHeader,j?.showFooter,j?.showTTSBar,N?.ttsEnabled]);let Y=j?.showMarginsOnScroll&&j?.scrolled;return(0,gh.jsxs)(gh.Fragment,{children:[(0,gh.jsx)("div",{ref:M,tabIndex:-1,role:"document","aria-label":o("Book Content"),className:"foliate-viewer h-[100%] w-[100%] focus:outline-none",style:{paddingTop:Y?a.top:0,paddingBottom:Y?a.bottom:0},...G,...X}),!P.current&&L&&(0,gh.jsx)(s5,{loading:!0}),"conflict"===B&&D&&(0,gh.jsx)(v5,{details:D,onResolveWithLocal:z,onResolveWithRemote:F,onClose:z})]})};var v9=a,v7=l,ye=y;let yt=({bookKey:e,section:t,showDoubleBorder:r,isScrolled:n,isVertical:i,isEink:a,horizontalGap:o,contentInsets:s,gridInsets:l})=>{let c=eU(),{appService:u}=(0,v7.useEnv)(),{hoveredBookKey:d,setHoveredBookKey:f}=e_(),{systemUIVisible:p,statusBarHeight:b}=(0,ye.useThemeStore)(),g=Math.max(l.top,u?.isAndroidApp&&p?b/2:0);return(0,v9.jsxs)(v9.Fragment,{children:[(0,v9.jsx)("div",{className:h("absolute left-0 right-0 top-0 z-10",n&&!i&&"bg-base-100"),style:{height:`${g}px`}}),(0,v9.jsx)("div",{className:h("sectioninfo absolute flex items-center overflow-hidden font-sans",a?"text-sm font-normal":"text-neutral-content text-xs font-light",i?"writing-vertical-rl max-h-[85%]":"top-0 h-[44px]",n&&!i&&"bg-base-100"),role:"none",onClick:()=>f(e),style:i?{top:`${(s.top-l.top)*1.5}px`,right:r?`calc(${s.right}px)`:`calc(${Math.max(0,s.right-32)}px)`,width:r?"32px":`${s.right}px`,height:`calc(100% - ${s.top+s.bottom}px)`}:{top:`${g}px`,paddingInline:`calc(${o/2}% + ${s.left/2}px)`,width:"100%"},children:(0,v9.jsx)("span",{"aria-label":t?c("Section Title")+`: ${t}`:"",className:h("text-center",i?"":"line-clamp-1",!i&&d==e&&"hidden"),children:t||""})})]})};var yr=a,yn=p,yi=l,ya=y,yo=x,ys=iB,yl=R;let yc=(e,t)=>{if(!t)return t;let r=e.globalReadSettings.customHighlightColors;return r?.[t]??yl.HIGHLIGHT_COLOR_HEX[t]};function yu(e){return nV({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"},child:[]},{tag:"path",attr:{fillRule:"evenodd",d:"M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5z"},child:[]}]})(e)}function yd(e){return nV({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M4.545 6.714 4.11 8H3l1.862-5h1.284L8 8H6.833l-.435-1.286zm1.634-.736L5.5 3.956h-.049l-.679 2.022z"},child:[]},{tag:"path",attr:{d:"M0 2a2 2 0 0 1 2-2h7a2 2 0 0 1 2 2v3h3a2 2 0 0 1 2 2v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-3H2a2 2 0 0 1-2-2zm2-1a1 1 0 0 0-1 1v7a1 1 0 0 0 1 1h7a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1zm7.138 9.995q.289.451.63.846c-.748.575-1.673 1.001-2.768 1.292.178.217.451.635.555.867 1.125-.359 2.08-.844 2.886-1.494.777.665 1.739 1.165 2.93 1.472.133-.254.414-.673.629-.89-1.125-.253-2.057-.694-2.82-1.284.681-.747 1.222-1.651 1.621-2.757H14V8h-3v1.047h.765c-.318.844-.74 1.546-1.272 2.13a6 6 0 0 1-.415-.492 2 2 0 0 1-.94.31"},child:[]}]})(e)}function yf(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M6 21a3 3 0 0 1 -3 -3v-12a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v12a3 3 0 0 1 -3 3zm12 -16h-8v14h8a1 1 0 0 0 1 -1v-12a1 1 0 0 0 -1 -1"},child:[]}]})(e)}function yh(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 12v-6a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v6"},child:[]},{tag:"path",attr:{d:"M10 18h-7"},child:[]},{tag:"path",attr:{d:"M21 18h-7"},child:[]},{tag:"path",attr:{d:"M6 15l-3 3l3 3"},child:[]},{tag:"path",attr:{d:"M18 15l3 3l-3 3"},child:[]}]})(e)}function yp(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M8 8h8v8h-8z"},child:[]},{tag:"path",attr:{d:"M4 4v.01"},child:[]},{tag:"path",attr:{d:"M8 4v.01"},child:[]},{tag:"path",attr:{d:"M12 4v.01"},child:[]},{tag:"path",attr:{d:"M16 4v.01"},child:[]},{tag:"path",attr:{d:"M20 4v.01"},child:[]},{tag:"path",attr:{d:"M4 20v.01"},child:[]},{tag:"path",attr:{d:"M8 20v.01"},child:[]},{tag:"path",attr:{d:"M12 20v.01"},child:[]},{tag:"path",attr:{d:"M16 20v.01"},child:[]},{tag:"path",attr:{d:"M20 20v.01"},child:[]},{tag:"path",attr:{d:"M20 16v.01"},child:[]},{tag:"path",attr:{d:"M20 12v.01"},child:[]},{tag:"path",attr:{d:"M20 8v.01"},child:[]},{tag:"path",attr:{d:"M4 16v.01"},child:[]},{tag:"path",attr:{d:"M4 12v.01"},child:[]},{tag:"path",attr:{d:"M4 8v.01"},child:[]}]})(e)}function yb(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 11l8 3l8 -3"},child:[]}]})(e)}function yg(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 13l8 -3l8 3"},child:[]}]})(e)}function ym(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M5 3m0 1a1 1 0 0 1 1 -1h12a1 1 0 0 1 1 1v16a1 1 0 0 1 -1 1h-12a1 1 0 0 1 -1 -1z"},child:[]}]})(e)}function yv(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 3m0 1a1 1 0 0 1 1 -1h16a1 1 0 0 1 1 1v16a1 1 0 0 1 -1 1h-16a1 1 0 0 1 -1 -1zm9 -1v18"},child:[]}]})(e)}function yy(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19.875 6.27a2.225 2.225 0 0 1 1.125 1.948v7.284c0 .809 -.443 1.555 -1.158 1.948l-6.75 4.27a2.269 2.269 0 0 1 -2.184 0l-6.75 -4.27a2.225 2.225 0 0 1 -1.158 -1.948v-7.285c0 -.809 .443 -1.554 1.158 -1.947l6.75 -3.98a2.33 2.33 0 0 1 2.25 0l6.75 3.98h-.033z"},child:[]},{tag:"path",attr:{d:"M10 8v8h2a2 2 0 0 0 2 -2v-4a2 2 0 0 0 -2 -2h-2z"},child:[]}]})(e)}function yx(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z"},child:[]},{tag:"path",attr:{d:"M9 4l0 16"},child:[]}]})(e)}function yw(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9.173 14.83a4 4 0 1 1 5.657 -5.657"},child:[]},{tag:"path",attr:{d:"M11.294 12.707l.174 .247a7.5 7.5 0 0 0 8.845 2.492a9 9 0 0 1 -14.671 2.914"},child:[]},{tag:"path",attr:{d:"M3 12h1"},child:[]},{tag:"path",attr:{d:"M12 3v1"},child:[]},{tag:"path",attr:{d:"M5.6 5.6l.7 .7"},child:[]},{tag:"path",attr:{d:"M3 21l18 -18"},child:[]}]})(e)}function y_(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 4h-6.5a3.5 3.5 0 0 0 0 7h.5"},child:[]},{tag:"path",attr:{d:"M14 15v-11"},child:[]},{tag:"path",attr:{d:"M10 15v-11"},child:[]},{tag:"path",attr:{d:"M5 19h14"},child:[]},{tag:"path",attr:{d:"M7 21l-2 -2l2 -2"},child:[]}]})(e)}function yS(e){return nV({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 80C149.9 80 62.4 159.4 49.6 262c9.4-3.8 19.6-6 30.4-6c26.5 0 48 21.5 48 48l0 128c0 26.5-21.5 48-48 48c-44.2 0-80-35.8-80-80l0-16 0-48 0-48C0 146.6 114.6 32 256 32s256 114.6 256 256l0 48 0 48 0 16c0 44.2-35.8 80-80 80c-26.5 0-48-21.5-48-48l0-128c0-26.5 21.5-48 48-48c10.8 0 21 2.1 30.4 6C449.6 159.4 362.1 80 256 80z"},child:[]}]})(e)}var yE=S;let yk=[{type:"copy",label:(0,yE.stubTranslation)("Copy"),tooltip:(0,yE.stubTranslation)("Copy text after selection"),Icon:lL},{type:"highlight",label:(0,yE.stubTranslation)("Highlight"),tooltip:(0,yE.stubTranslation)("Highlight text after selection"),Icon:pY,quickAction:!0},{type:"annotate",label:(0,yE.stubTranslation)("Annotate"),tooltip:(0,yE.stubTranslation)("Annotate text after selection"),Icon:yu},{type:"search",label:(0,yE.stubTranslation)("Search"),tooltip:(0,yE.stubTranslation)("Search text after selection"),Icon:lB,quickAction:!0},{type:"dictionary",label:(0,yE.stubTranslation)("Dictionary"),tooltip:(0,yE.stubTranslation)("Look up text in dictionary after selection"),Icon:yy,quickAction:!0},{type:"wikipedia",label:(0,yE.stubTranslation)("Wikipedia"),tooltip:(0,yE.stubTranslation)("Look up text in Wikipedia after selection"),Icon:ao,quickAction:!0},{type:"translate",label:(0,yE.stubTranslation)("Translate"),tooltip:(0,yE.stubTranslation)("Translate text after selection"),Icon:yd,quickAction:!0},{type:"tts",label:(0,yE.stubTranslation)("Speak"),tooltip:(0,yE.stubTranslation)("Read text aloud after selection"),Icon:yS,quickAction:!0},{type:"proofread",label:(0,yE.stubTranslation)("Proofread"),tooltip:(0,yE.stubTranslation)("Proofread text after selection"),Icon:pq}],yN=yk.filter(e=>e.quickAction);function yj({tipColor:e="#FFD700",tipStyle:t={},...r}){return nV({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"none"},child:[{tag:"path",attr:{d:"M253.66,106.34a8,8,0,0,0-11.32,0L192,156.69,107.31,72l50.35-50.34a8,8,0,1,0-11.32-11.32L96,60.69A16,16,0,0,0,93.18,79.5L72,100.69a16,16,0,0,0,0,22.62L76.69,128,136,187.31l4.69,4.69a16,16,0,0,0,22.62,0l21.18-21.18A16,16,0,0,0,203.31,168l50.35-50.34A8,8,0,0,0,253.66,106.34ZM152,180.69,83.31,112,104,91.31,172.69,160Z",fill:"currentColor"},child:[]},{tag:"path",attr:{d:"M18.34,186.34c-4.209212,4.20621-2.516471,11.37196,3.13,13.25l72,24c0.815308,0.27382,1.669943,0.41232,2.53,0.41c2.12237,0.002,4.15842-0.84009,5.66-2.34L136,187.31c13.62143,13.61626-70.243446-70.24754-64-64l4.69,4.69z",fill:e,style:t},child:[]}]})(r)}var yC=a,yM=p,yA=l,yR=A;let yT=({onClick:e,label:t,id:r,children:n})=>(0,yC.jsx)("button",{id:r,onClick:e,className:"window-button bg-base-200/35 hover:bg-base-200 text-base-content/85 hover:text-base-content","aria-label":t,children:n}),yO=({className:t,headerRef:r,showMinimize:n=!0,showMaximize:i=!0,showClose:a=!0,onMinimize:o,onToggleMaximize:s,onClose:l})=>{let c=eU(),u=(0,yM.useRef)(null),{appService:d}=(0,yA.useEnv)(),f=(0,yM.useRef)({lastPointerTime:0,pointerStartPosition:{x:0,y:0},isDragging:!1}),p=e=>e.closest(".btn")||e.closest(".window-button")||e.closest(".dropdown-container")||e.closest(".exclude-title-bar-mousedown"),b=async t=>{if(p(t.target))return;let{getCurrentWindow:r}=await e.A(590976);1===t.buttons&&(2===t.detail?r().toggleMaximize():r().startDragging())},g=async t=>{if(p(t.target)||"mouse"===t.pointerType)return;t.preventDefault();let r=Date.now(),n=r-f.current.lastPointerTime;if(f.current.pointerStartPosition={x:t.clientX,y:t.clientY},n<300){let{getCurrentWindow:t}=await e.A(590976);t().toggleMaximize();return}f.current.lastPointerTime=r,f.current.isDragging=!1},m=async t=>{if(p(t.target)||f.current.isDragging||"mouse"===t.pointerType)return;t.preventDefault();let r=Math.abs(t.clientX-f.current.pointerStartPosition.x),n=Math.abs(t.clientY-f.current.pointerStartPosition.y);if(r>5||n>5){f.current.isDragging=!0;try{let{getCurrentWindow:t}=await e.A(590976);await t().startDragging()}catch(e){console.warn("Failed to start window dragging:",e)}}},v=()=>{f.current.isDragging=!1};(0,yM.useEffect)(()=>{if(!(0,yR.isTauriAppPlatform)())return;let e=r?.current;if(e)return e.addEventListener("mousedown",b),e.addEventListener("pointerdown",g),e.addEventListener("pointermove",m),e.addEventListener("pointerup",v),e.addEventListener("pointercancel",v),()=>{e.removeEventListener("mousedown",b),e.removeEventListener("pointerdown",g),e.removeEventListener("pointermove",m),e.removeEventListener("pointerup",v),e.removeEventListener("pointercancel",v)}},[]);let y=async()=>{o?o():oA()},x=async()=>{s?s():oT()},w=async()=>{l?l():oO()};return(0,yC.jsxs)("div",{ref:u,className:h("window-buttons flex h-8 items-center justify-end space-x-2",a||i||n?"visible":"hidden",t),children:[n&&d?.hasWindowBar&&(0,yC.jsx)(yT,{onClick:y,label:c("Minimize"),id:"titlebar-minimize",children:(0,yC.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:(0,yC.jsx)("path",{fill:"currentColor",d:"M20 14H4v-2h16"})})}),i&&d?.hasWindowBar&&(0,yC.jsx)(yT,{onClick:x,label:c("Maximize or Restore"),id:"titlebar-maximize",children:(0,yC.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:(0,yC.jsx)("path",{fill:"currentColor",d:"M4 4h16v16H4zm2 4v10h12V8z"})})}),a&&(d?.hasWindowBar||l)&&(0,yC.jsx)(yT,{onClick:w,label:c("Close"),id:"titlebar-close",children:(0,yC.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:(0,yC.jsx)("path",{fill:"currentColor",d:"M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12z"})})})]})};var yL=a;let yI=({selectedAction:e,onActionSelect:t,setIsDropdownOpen:r})=>{let n=eU(),i=i=>{t(i),e===i?eR.dispatch("toast",{type:"info",timeout:2e3,message:n("Quick action disabled")}):eR.dispatch("toast",{type:"info",timeout:2e3,message:n(yN.find(e=>e.type===i)?.tooltip||"")}),r?.(!1)};return(0,yL.jsx)(l9,{className:h("annotation-quick-action-menu dropdown-content z-20 mt-1 border","bgcolor-base-200 shadow-2xl"),style:{maxWidth:`${window.innerWidth-40}px`},onCancel:()=>r?.(!1),children:yN.map(t=>(0,yL.jsx)(sj,{label:n(t.label),tooltip:n(t.tooltip),buttonClass:e===t.type?"bg-base-300/85":"",Icon:t.Icon,onClick:()=>i(t.type)},t.type))})};var yP=a,yB=a,yD=l;let yz=({icon:e,onClick:t,disabled:r=!1,label:n,className:i})=>{let{appService:a}=(0,yD.useEnv)();return(0,yB.jsx)("button",{className:h("btn btn-ghost h-8 min-h-8 w-8 p-0",a?.isMobileApp&&"hover:bg-transparent",r&&"cursor-default !bg-transparent opacity-50",i),title:n,"aria-label":n,onClick:r?void 0:t,children:e})},yF=({bookKey:e})=>{let t=eU(),{sideBarBookKey:r,isSideBarVisible:n,setSideBarBookKey:i,toggleSideBar:a}=ek(),{setHoveredBookKey:o}=e_(),s=()=>{r===e?a():(i(e),n||a()),o("")};return(0,yP.jsx)(yz,{icon:r===e&&n?(0,yP.jsx)(yf,{className:"text-base-content"}):(0,yP.jsx)(yx,{className:"text-base-content"}),onClick:s,label:t("Toggle Sidebar")})};var y$=a,yU=p,yH=x,yV=l,yq=S,yW=eg;let yK=({bookKey:e})=>{let t=eU(),{envConfig:r}=(0,yV.useEnv)(),{settings:n}=(0,yH.useSettingsStore)(),{getConfig:i,saveConfig:a,getBookData:o,updateBooknotes:s}=ex(),{getProgress:l,getViewState:c,setBookmarkRibbonVisibility:u}=e_(),[d,f]=(0,yU.useState)(!1),h=i(e),p=l(e),b=()=>{let t=o(e),u=i(e),d=l(e);if(!t||!u||!d)return;let{booknotes:h=[]}=u,{location:p,range:b}=d;if(p)if(c(e)?.ribbonVisible){f(!1),h.forEach(e=>{"bookmark"===e.type&&pL(e.cfi,p)&&(e.deletedAt=Date.now())});let t=s(e,h);t&&a(r,e,t,n)}else{f(!0);let i=b?.startContainer.textContent?.slice(0,128)||"",o=128===i.length?i+"...":i,l={id:(0,yq.uniqueId)(),type:"bookmark",cfi:p,text:o||`${(0,yW.getCurrentPage)(t.book,d)}`,note:"",createdAt:Date.now(),updatedAt:Date.now()},c=h.find(e=>"bookmark"===e.type&&e.cfi===p);c?(c.deletedAt=null,c.updatedAt=Date.now(),c.text=l.text):h.push(l);let u=s(e,h);u&&a(r,e,u,n)}};return(0,yU.useEffect)(()=>{let t=t=>{let{bookKey:r}=t.detail;r===e&&b()};return eR.on("toggle-bookmark",t),()=>{eR.off("toggle-bookmark",t)}},[e]),(0,yU.useEffect)(()=>{let{booknotes:t=[]}=h||{},{location:r}=p||{};if(!r)return;let n=t.filter(e=>"bookmark"===e.type&&!e.deletedAt).some(e=>pL(e.cfi,r));f(n),u(e,n)},[h,p]),(0,y$.jsx)(yz,{icon:d?(0,y$.jsx)(ig,{className:"text-base-content"}):(0,y$.jsx)(ib,{className:"text-base-content"}),onClick:b,label:t(d?"Remove Bookmark":"Add Bookmark")})};var yG=a,yX=l,yZ=iB;let yY=({bookKey:e})=>{let t=eU(),{appService:r}=(0,yX.useEnv)(),{setHoveredBookKey:n}=e_(),{sideBarBookKey:i,setSideBarBookKey:a}=ek(),{isNotebookVisible:o,toggleNotebook:s}=eN(),l=(0,yZ.useResponsiveSize)(16),c=()=>{r?.isMobile&&n(""),i===e?s():(a(e),o||s())};return(0,yG.jsx)(yz,{icon:(0,yG.jsx)(bz,{size:l,className:"text-base-content"}),onClick:c,label:t("Notebook")})};var yJ=a,yQ=x;let y0=({bookKey:e})=>{let t=eU(),{setHoveredBookKey:r}=e_(),{isSettingsDialogOpen:n,setSettingsDialogOpen:i}=(0,yQ.useSettingsStore)(),{setSettingsDialogBookKey:a}=(0,yQ.useSettingsStore)(),o=()=>{r(""),a(e),i(!n)};return(0,yJ.jsx)(yz,{icon:(0,yJ.jsx)(aV,{className:"text-base-content"}),onClick:o,label:t("Font & Layout")})};var y1=a,y2=p,y3=l;let y4=({bookKey:e})=>{let t=eU(),{envConfig:r,appService:n}=(0,y3.useEnv)(),{getBookData:i}=ex(),{getViewSettings:a,setViewSettings:o,setHoveredBookKey:s}=e_(),l=i(e),c=a(e),[u,d]=(0,y2.useState)(c.translationEnabled),[f,h]=(0,y2.useState)(r4(l?.book,c.translateTargetLang));return(0,y2.useEffect)(()=>{u!==c.translationEnabled&&(n?.isMobile&&s(""),l4(r,e,"translationEnabled",u,!0,!1),c.translationEnabled=u,o(e,{...c}))},[u]),(0,y2.useEffect)(()=>{d(c.translationEnabled),h(r4(l?.book,c.translateTargetLang))},[l,c.translationEnabled,c.translateTargetLang]),(0,y1.jsx)(yz,{icon:(0,y1.jsx)(aq,{className:u?"text-blue-500":"text-base-content"}),"aria-label":t("Toggle Translation"),disabled:!f&&!u,onClick:()=>d(!u),label:t(f?u?"Disable Translation":"Enable Translation":"Translation Disabled")})};var y6=a,y5=p,y8=b;function y9(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M20.742 13.045a8.088 8.088 0 0 1-2.077.271c-2.135 0-4.14-.83-5.646-2.336a8.025 8.025 0 0 1-2.064-7.723A1 1 0 0 0 9.73 2.034a10.014 10.014 0 0 0-4.489 2.582c-3.898 3.898-3.898 10.243 0 14.143a9.937 9.937 0 0 0 7.072 2.93 9.93 9.93 0 0 0 7.07-2.929 10.007 10.007 0 0 0 2.583-4.491 1.001 1.001 0 0 0-1.224-1.224zm-2.772 4.301a7.947 7.947 0 0 1-5.656 2.343 7.953 7.953 0 0 1-5.658-2.344c-3.118-3.119-3.118-8.195 0-11.314a7.923 7.923 0 0 1 2.06-1.483 10.027 10.027 0 0 0 2.89 7.848 9.972 9.972 0 0 0 7.848 2.891 8.036 8.036 0 0 1-1.484 2.059z"},child:[]}]})(e)}function y7(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M6.993 12c0 2.761 2.246 5.007 5.007 5.007s5.007-2.246 5.007-5.007S14.761 6.993 12 6.993 6.993 9.239 6.993 12zM12 8.993c1.658 0 3.007 1.349 3.007 3.007S13.658 15.007 12 15.007 8.993 13.658 8.993 12 10.342 8.993 12 8.993zM10.998 19h2v3h-2zm0-17h2v3h-2zm-9 9h3v2h-3zm17 0h3v2h-3zM4.219 18.363l2.12-2.122 1.415 1.414-2.12 2.122zM16.24 6.344l2.122-2.122 1.414 1.414-2.122 2.122zM6.342 7.759 4.22 5.637l1.415-1.414 2.12 2.122zm13.434 10.605-1.414 1.414-2.122-2.122 1.414-1.414z"},child:[]}]})(e)}var xe=R,xt=l,xr=s,xn=y,xi=x,xa=ls,xo=my;let xs=({bookKey:e,setIsDropdownOpen:t})=>{let r=eU(),n=(0,y8.useRouter)(),{user:i}=(0,xr.useAuth)(),{envConfig:a,appService:o}=(0,xt.useEnv)(),{getConfig:s,getBookData:l}=ex(),{setSettingsDialogOpen:c,setSettingsDialogBookKey:u}=(0,xi.useSettingsStore)(),{getView:d,getViewSettings:f,getViewState:p,setViewSettings:b}=e_(),g=s(e),m=l(e),v=f(e),y=p(e),{themeMode:x,isDarkMode:w,setThemeMode:_}=(0,xn.useThemeStore)(),[S,E]=(0,y5.useState)(v.scrolled),[k,N]=(0,y5.useState)(v.zoomLevel),[j,C]=(0,y5.useState)(v.zoomMode),[M,A]=(0,y5.useState)(v.spreadMode),[R,T]=(0,y5.useState)(v.keepCoverSpread),[O,L]=(0,y5.useState)(v.invertImgColorInDark),I=()=>N(e=>Math.min(e+xe.ZOOM_STEP,xe.MAX_ZOOM_LEVEL)),P=()=>N(e=>Math.max(e-xe.ZOOM_STEP,xe.MIN_ZOOM_LEVEL)),B=()=>N(100),D=()=>E(!S),z=()=>{t?.(!1),u(e),c(!0)},F=()=>{_("auto"===x?"light":"light"===x?"dark":"auto")},$=()=>{oI(),t?.(!1)},U=()=>{i?eR.dispatch("sync-book-progress",{bookKey:e}):(oH(n),t?.(!1))};(0,y5.useEffect)(()=>{S!==v.scrolled&&(v.scrolled=S,d(e)?.renderer.setAttribute("flow",S?"scrolled":"paginated"),d(e)?.renderer.setAttribute("max-inline-size",`${(0,xo.getMaxInlineSize)(v)}px`),d(e)?.renderer.setStyles?.((0,xa.getStyles)(v)),b(e,v))},[S]),(0,y5.useEffect)(()=>{l4(a,e,"zoomLevel",k,!0,!0),m.bookDoc?.rendition?.layout==="pre-paginated"&&d(e)?.renderer.setAttribute("scale-factor",k)},[k]),(0,y5.useEffect)(()=>{O!==v.invertImgColorInDark&&l4(a,e,"invertImgColorInDark",O,!0,!0)},[O]),(0,y5.useEffect)(()=>{j!==v.zoomMode&&(v.zoomMode=j,d(e)?.renderer.setAttribute("zoom",j),b(e,v),l4(a,e,"zoomMode",j,!0,!1))},[j]),(0,y5.useEffect)(()=>{M!==v.spreadMode&&(v.spreadMode=M,d(e)?.renderer.setAttribute("spread",M),b(e,v),l4(a,e,"spreadMode",M,!0,!1))},[M]),(0,y5.useEffect)(()=>{if(R===v.keepCoverSpread||!m?.bookDoc?.sections?.length)return;v.keepCoverSpread=R;let t="rtl"===m.bookDoc.dir?"right":"left";m.bookDoc.sections[0].pageSpread=R?"":t,d(e)?.renderer.setAttribute("spread",M),b(e,v),l4(a,e,"keepCoverSpread",R,!0,!1)},[R]);let H=Math.max(g?.lastSyncedAtConfig||0,g?.lastSyncedAtNotes||0);return(0,y6.jsxs)(l9,{className:h("view-menu dropdown-content dropdown-right no-triangle z-20 mt-1 border","bgcolor-base-200 shadow-2xl"),style:{maxWidth:`${window.innerWidth-40}px`,marginRight:window.innerWidth<640?"-36px":"0px"},onCancel:()=>t?.(!1),children:[m.bookDoc?.rendition?.layout==="pre-paginated"&&(0,y6.jsxs)(y6.Fragment,{children:[(0,y6.jsxs)("div",{title:r("Zoom Level"),className:h("flex items-center justify-between rounded-md"),children:[(0,y6.jsx)("button",{title:r("Zoom Out"),onClick:P,className:h("hover:bg-base-300 text-base-content rounded-full p-2",k<=xe.MIN_ZOOM_LEVEL&&"btn-disabled text-gray-400"),children:(0,y6.jsx)(n2,{})}),(0,y6.jsxs)("button",{title:r("Reset Zoom"),className:h("hover:bg-base-300 text-base-content h-8 min-h-8 w-[50%] rounded-md p-1 text-center"),onClick:B,children:[k,"%"]}),(0,y6.jsx)("button",{title:r("Zoom In"),onClick:I,className:h("hover:bg-base-300 text-base-content rounded-full p-2",k>=xe.MAX_ZOOM_LEVEL&&"btn-disabled text-gray-400"),children:(0,y6.jsx)(n1,{})})]}),(0,y6.jsxs)(y6.Fragment,{children:[(0,y6.jsxs)("div",{title:r("Zoom Mode"),className:h("my-2 flex items-center justify-between rounded-md"),children:[(0,y6.jsx)("button",{title:r("Single Page"),onClick:A.bind(null,"none"),className:h("hover:bg-base-300 text-base-content rounded-full p-2","none"===M&&"bg-base-300/75"),children:(0,y6.jsx)(ym,{})}),(0,y6.jsx)("button",{title:r("Auto Spread"),onClick:A.bind(null,"auto"),className:h("hover:bg-base-300 text-base-content rounded-full p-2","auto"===M&&"bg-base-300/75"),children:(0,y6.jsx)(yv,{})}),(0,y6.jsx)("div",{className:"bg-base-300 mx-2 h-6 w-[1px]"}),(0,y6.jsx)("button",{title:r("Fit Page"),onClick:C.bind(null,"fit-page"),className:h("hover:bg-base-300 text-base-content rounded-full p-2","fit-page"===j&&"bg-base-300/75"),children:(0,y6.jsx)(pX,{})}),(0,y6.jsx)("button",{title:r("Fit Width"),onClick:C.bind(null,"fit-width"),className:h("hover:bg-base-300 text-base-content rounded-full p-2","fit-width"===j&&"bg-base-300/75"),children:(0,y6.jsx)(yh,{})})]}),(0,y6.jsx)(sj,{label:r("Separate Cover Page"),Icon:R?il:void 0,onClick:()=>T(!R),disabled:"none"===M})]}),(0,y6.jsx)("hr",{"aria-hidden":"true",className:"border-base-300 my-1"})]}),(0,y6.jsx)(sj,{label:r("Font & Layout"),shortcut:"Shift+F",onClick:z}),(0,y6.jsx)(sj,{label:r("Scrolled Mode"),shortcut:"Shift+J",Icon:S?il:void 0,onClick:D,disabled:m.isFixedLayout}),(0,y6.jsx)("hr",{"aria-hidden":"true",className:"border-base-300 my-1"}),(0,y6.jsx)(sj,{label:i?H?r("Synced at {{time}}",{time:new Date(H).toLocaleString()}):r("Never synced"):r("Sign in to Sync"),Icon:i?id:iu,iconClassName:i&&y?.syncing?"animate-reverse-spin":"",onClick:U}),(0,y6.jsx)("hr",{"aria-hidden":"true",className:"border-base-300 my-1"}),o?.hasWindow&&(0,y6.jsx)(sj,{label:r("Fullscreen"),onClick:$}),(0,y6.jsx)(sj,{label:r("dark"===x?"Dark Mode":"light"===x?"Light Mode":"Auto Mode"),Icon:"dark"===x?y9:"light"===x?y7:yw,onClick:F}),(0,y6.jsx)(sj,{label:r("Invert Image In Dark Mode"),disabled:!w,Icon:O?il:void 0,onClick:()=>L(!O)})]})},xl=({bookKey:e,bookTitle:t,isTopLeft:r,isHoveredAnim:n,gridInsets:i,onCloseBook:a})=>{let o=eU(),{envConfig:s,appService:l}=(0,yi.useEnv)(),{settings:c}=(0,yo.useSettingsStore)(),{isTrafficLightVisible:u}=lV(),{trafficLightInFullscreen:d,setTrafficLightVisibility:f}=lH(),{bookKeys:p,hoveredBookKey:b}=e_(),{isDarkMode:g,systemUIVisible:m,statusBarHeight:v}=(0,ya.useThemeStore)(),{isSideBarVisible:y}=ek(),{getView:x,getViewSettings:w,setHoveredBookKey:_}=e_(),S=w(e),[E,k]=(0,yn.useState)(!1),N=x(e),j=(0,ys.useResponsiveSize)(16),C=(0,yn.useRef)(null),M=l?.hasWindowBar&&!u,A=(N?.renderer.getContents()??[]).some(({doc:e})=>e?.body?.style.cursor==="pointer"),R=S?.enableAnnotationQuickActions,T=yN.find(e=>e.type===S?.annotationQuickAction)||yN[0],O=S?.annotationQuickAction,L=T.Icon,I=c.globalReadSettings.highlightStyle,P=c.globalReadSettings.highlightStyles[I],B=yc(c,P),D=e=>{k(e),e||_("")},z=t=>{S?.annotationQuickAction===t&&(t=null),l4(s,e,"annotationQuickAction",t,!1,!0)};(0,yn.useEffect)(()=>{l?.hasTrafficLight&&!y&&(b===e&&r?f(!0,{x:10,y:20}):b||f(!1))},[l,y,b]);let F=(0,yn.useCallback)((e,t)=>{if(!C.current)return!0;let r=C.current.getBoundingClientRect();return e<=r.left||e>=r.right||t<=r.top||t>=r.bottom},[]),$=b===e||E,U=l?.hasTrafficLight&&!d&&!y&&r;return(0,yr.jsxs)("div",{className:h("bg-base-100 absolute top-0 w-full"),style:{paddingTop:l?.hasSafeAreaInset?`${i.top}px`:"0px"},children:[(0,yr.jsx)("div",{role:"none",className:h("absolute top-0 z-10 h-11 w-full",A&&"pointer-events-none"),onClick:()=>_(e),onMouseEnter:()=>!l?.isMobile&&_(e),onTouchStart:()=>!l?.isMobile&&_(e)}),(0,yr.jsx)("div",{className:h("bg-base-100 absolute left-0 right-0 top-0 z-10",l?.hasRoundedWindow&&"rounded-window-top-right",$?"visible":"hidden"),style:{height:m?`${Math.max(i.top,v)}px`:"0px"}}),(0,yr.jsxs)("div",{ref:C,role:"group","aria-label":o("Header Bar"),className:h("header-bar bg-base-100 absolute top-0 z-10 flex h-11 w-full items-center pr-4","shadow-xs transition-[opacity,margin-top] duration-300",U?"pl-20":"pl-4",l?.hasRoundedWindow&&"rounded-window-top-right",!y&&l?.hasRoundedWindow&&"rounded-window-top-left",n&&"hover-bar-anim",$?"pointer-events-auto visible":"pointer-events-none opacity-0",E&&"header-bar-pinned"),style:{marginTop:m?`${Math.max(i.top,v)}px`:`${i.top}px`},onFocus:()=>!l?.isMobile&&_(e),onMouseLeave:e=>{!l?.isMobile&&F(e.clientX,e.clientY)&&_("")},children:[(0,yr.jsxs)("div",{className:"bg-base-100 sidebar-bookmark-toggler z-20 flex h-full items-center gap-x-4 pe-2",children:[(0,yr.jsx)("div",{className:"hidden sm:flex",children:(0,yr.jsx)(yF,{bookKey:e})}),(0,yr.jsx)(yK,{bookKey:e}),(0,yr.jsx)(y4,{bookKey:e}),R&&(0,yr.jsx)(sM,{label:o(O?"Disable Quick Action":"Enable Quick Action on Selection"),className:"exclude-title-bar-mousedown dropdown-bottom",buttonClassName:h("btn btn-ghost h-8 min-h-8 w-8 p-0",S?.annotationQuickAction&&"bg-base-300/50"),toggleButton:"highlight"===O||null===O?(0,yr.jsx)(yj,{size:j,tipColor:null===O?"#8F8F8F":B,tipStyle:{opacity:null===O?.5:.8,mixBlendMode:g?"screen":"multiply"}}):(0,yr.jsx)(L,{size:j}),onToggle:D,children:(0,yr.jsx)(yI,{selectedAction:S.annotationQuickAction,onActionSelect:z})})]}),(0,yr.jsx)("div",{role:"contentinfo","aria-label":o("Title")+" - "+t,className:h("header-title z-15 bg-base-100 pointer-events-none hidden flex-1 items-center justify-center sm:flex",!M&&"absolute inset-0"),children:(0,yr.jsx)("div",{"aria-hidden":"true",className:h("line-clamp-1 text-center text-xs font-semibold",!M&&"max-w-[50%]"),children:t})}),(0,yr.jsxs)("div",{className:"bg-base-100 z-20 ml-auto flex h-full items-center space-x-4 ps-2",children:[(0,yr.jsx)(y0,{bookKey:e}),(0,yr.jsx)(yY,{bookKey:e}),(0,yr.jsx)(sM,{label:o("View Options"),className:"exclude-title-bar-mousedown dropdown-bottom dropdown-end",buttonClassName:"btn btn-ghost h-8 min-h-8 w-8 p-0",toggleButton:(0,yr.jsx)(pZ,{size:j}),onToggle:D,children:(0,yr.jsx)(xs,{bookKey:e})}),(0,yr.jsx)(yO,{className:"window-buttons flex h-full items-center",headerRef:C,showMinimize:1==p.length&&M,showMaximize:1==p.length&&M,onClose:()=>{_(null),a(e)}})]})]})]})};var xc=a,xu=p,xd=l,xf=a,xh=iB,xp=a,xb=p;let xg=(e,t,r)=>e?r:t,xm=(e,t,r)=>e?r:t,xv=(e,t,r)=>e?r:t;var xy=a,xx=p;let xw=({label:e,min:t=0,max:r=100,step:n=1,initialValue:i=50,heightPx:a=40,minLabel:o="",maxLabel:s="",minIcon:l,maxIcon:c,bubbleElement:u,bubbleLabel:d="",className:f="",minClassName:h="",maxClassName:p="",bubbleClassName:b="",onChange:g,valueToPosition:m,positionToValue:v})=>{let[y,x]=(0,xx.useState)(i),[w,_]=(0,xx.useState)(!1),S=(0,xx.useRef)(null),E=(e,t,r)=>(e-t)/(r-t)*100,k=(e,t,r)=>t+e/100*(r-t),N=m||E,j=v||k,C=e=>{let i=Math.round(j(parseInt(e.target.value,10),t,r)/n)*n;x(i),g&&g(i)};(0,xx.useEffect)(()=>{let e=S.current;for(;e;){if("rtl"===e.getAttribute("dir")){_(!0);break}e=e.parentElement}},[]),(0,xx.useEffect)(()=>{x(i)},[i]);let M=N(y,t,r),A=M/100*95;return(0,xy.jsx)("div",{ref:S,"aria-label":e,className:`slider bg-base-200 mx-auto w-full rounded-xl ${f}`,dir:w?"rtl":void 0,children:(0,xy.jsxs)("div",{className:"relative",style:{height:`${a}px`},children:[(0,xy.jsx)("div",{className:"bg-base-300/40 absolute h-full w-full rounded-full"}),(0,xy.jsx)("div",{className:"bg-base-300 absolute h-full rounded-full",style:{width:A>0?`max(calc(${A}% + ${a/2}px), ${a}px)`:"0px",[w?"right":"left"]:0}}),(0,xy.jsxs)("div",{className:"absolute inset-0 flex items-center justify-between px-4 text-sm",children:[l||(0,xy.jsx)("span",{className:`ml-2 ${h}`,children:o}),c||(0,xy.jsx)("span",{className:`mr-2 ${p}`,children:s})]}),(0,xy.jsx)("div",{className:"pointer-events-none absolute top-0 z-10",style:{[w?"right":"left"]:`max(${a/2}px, calc(${A}%))`,transform:w?"translateX(calc(50%))":"translateX(calc(-50%))",height:"100%"},children:(0,xy.jsx)("div",{className:`bg-base-200 flex h-full items-center justify-center rounded-full text-xs shadow-md ${b}`,style:{width:`${a}px`},children:u||d})}),(0,xy.jsx)("input",{type:"range",min:0,max:100,step:n,value:M,className:"absolute inset-0 h-full w-full cursor-pointer opacity-0",onChange:C,"aria-label":e,"aria-valuemin":t,"aria-valuemax":r,"aria-valuenow":y,"aria-valuetext":`${y}`,"aria-orientation":"horizontal"})]})})},x_=({bookKey:e,actionTab:t,progressFraction:r,progressValid:n,navigationHandlers:i,viewSettings:a,bottomOffset:o,sliderHeight:s})=>{let l=eU(),{getView:c}=e_(),u=c(e),[d,f]=xb.default.useState(n?100*r:0);(0,xb.useEffect)(()=>{n&&f(100*r)},[n,r]);let p=(0,xb.useCallback)(e=>{f(e),i.onProgressChange(e)},[i]),b=h("footerbar-progress-mobile bg-base-200 absolute flex w-full flex-col items-center gap-y-8 px-4 transition-all sm:hidden","progress"===t?"pointer-events-auto translate-y-0 pb-4 pt-8 ease-out":"pointer-events-none invisible translate-y-full overflow-hidden pb-0 pt-0 ease-in");return(0,xp.jsxs)("div",{className:b,style:{bottom:o},children:[(0,xp.jsx)("div",{className:"flex w-full items-center justify-between gap-x-6",children:(0,xp.jsx)(xw,{label:l("Reading Progress"),heightPx:s,bubbleLabel:`${Math.round(d)}%`,initialValue:d,onChange:p})}),(0,xp.jsxs)("div",{className:"flex w-full items-center justify-between gap-x-6",children:[(0,xp.jsx)(yz,{icon:xg(a?.rtl,(0,xp.jsx)(aD,{}),(0,xp.jsx)(aF,{})),onClick:xv(a?.rtl,i.onPrevSection,i.onNextSection),label:xm(a?.rtl,l("Previous Section"),l("Next Section"))}),(0,xp.jsx)(yz,{icon:xg(a?.rtl,(0,xp.jsx)(az,{}),(0,xp.jsx)(a$,{})),onClick:xv(a?.rtl,i.onPrevPage,i.onNextPage),label:xm(a?.rtl,l("Previous Page"),l("Next Page"))}),(0,xp.jsx)(yz,{icon:xg(a?.rtl,(0,xp.jsx)(aP,{}),(0,xp.jsx)(aB,{})),onClick:i.onGoBack,label:l("Go Back"),disabled:!u?.history.canGoBack}),(0,xp.jsx)(yz,{icon:xg(a?.rtl,(0,xp.jsx)(aB,{}),(0,xp.jsx)(aP,{})),onClick:i.onGoForward,label:l("Go Forward"),disabled:!u?.history.canGoForward}),(0,xp.jsx)(yz,{icon:xg(a?.rtl,(0,xp.jsx)(a$,{}),(0,xp.jsx)(az,{})),onClick:xv(a?.rtl,i.onNextPage,i.onPrevPage),label:xm(a?.rtl,l("Next Page"),l("Previous Page"))}),(0,xp.jsx)(yz,{icon:xg(a?.rtl,(0,xp.jsx)(aF,{}),(0,xp.jsx)(aD,{})),onClick:xv(a?.rtl,i.onNextSection,i.onPrevSection),label:xm(a?.rtl,l("Next Section"),l("Previous Section"))})]})]})};var xS=a,xE=p;function xk(e){return nV({tag:"svg",attr:{viewBox:"0 0 15 15",fill:"none"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M3.78233 2.21713C3.70732 2.14212 3.60557 2.09998 3.49949 2.09998C3.3934 2.09998 3.29166 2.14212 3.21664 2.21713L1.21664 4.21713C1.06044 4.37334 1.06044 4.62661 1.21664 4.78282C1.37285 4.93903 1.62612 4.93903 1.78233 4.78282L3.09949 3.46566L3.09949 11.5343L1.78233 10.2171C1.62612 10.0609 1.37285 10.0609 1.21664 10.2171C1.06043 10.3733 1.06043 10.6266 1.21664 10.7828L3.21664 12.7828C3.29166 12.8578 3.3934 12.9 3.49949 12.9C3.60557 12.9 3.70731 12.8578 3.78233 12.7828L5.78233 10.7828C5.93854 10.6266 5.93854 10.3733 5.78233 10.2171C5.62612 10.0609 5.37285 10.0609 5.21664 10.2171L3.89949 11.5343L3.89949 3.46566L5.21664 4.78282C5.37285 4.93903 5.62612 4.93903 5.78233 4.78282C5.93854 4.62661 5.93854 4.37334 5.78233 4.21713L3.78233 2.21713ZM8.49998 3.99997C8.22383 3.99997 7.99998 4.22382 7.99998 4.49997C7.99998 4.77611 8.22383 4.99997 8.49998 4.99997H14.5C14.7761 4.99997 15 4.77611 15 4.49997C15 4.22382 14.7761 3.99997 14.5 3.99997H8.49998ZM7.99998 7.49997C7.99998 7.22382 8.22383 6.99997 8.49998 6.99997H14.5C14.7761 6.99997 15 7.22382 15 7.49997C15 7.77611 14.7761 7.99997 14.5 7.99997H8.49998C8.22383 7.99997 7.99998 7.77611 7.99998 7.49997ZM8.49998 9.99997C8.22383 9.99997 7.99998 10.2238 7.99998 10.5C7.99998 10.7761 8.22383 11 8.49998 11H14.5C14.7761 11 15 10.7761 15 10.5C15 10.2238 14.7761 9.99997 14.5 9.99997H8.49998Z",fill:"currentColor"},child:[]}]})(e)}function xN(e){return nV({tag:"svg",attr:{viewBox:"0 0 15 15",fill:"none"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M10.3004 7.49991C10.3004 8.4943 9.49426 9.30041 8.49988 9.30041C7.50549 9.30041 6.69938 8.4943 6.69938 7.49991C6.69938 6.50553 7.50549 5.69942 8.49988 5.69942C9.49426 5.69942 10.3004 6.50553 10.3004 7.49991ZM11.205 8C10.9699 9.28029 9.84816 10.2504 8.49988 10.2504C7.1516 10.2504 6.0299 9.28029 5.79473 8H0.5C0.223858 8 0 7.77614 0 7.5C0 7.22386 0.223858 7 0.5 7H5.7947C6.0298 5.71962 7.15154 4.74942 8.49988 4.74942C9.84822 4.74942 10.97 5.71962 11.2051 7H14.5C14.7761 7 15 7.22386 15 7.5C15 7.77614 14.7761 8 14.5 8H11.205Z",fill:"currentColor"},child:[]}]})(e)}var xj=l;let xC=8,xM=30,xA=16,xR=8,xT=24,xO=10,xL={MAX_MARGIN_PX:88,MAX_GAP_PERCENT:10,MARGIN_RATIO:50},xI=({bookKey:e,actionTab:t,bottomOffset:r,marginIconSize:n})=>{let i=eU(),{envConfig:a}=(0,xj.useEnv)(),{getView:o,getViewSettings:s}=e_(),l=s(e),c=o(e),u=(0,xE.useCallback)(t=>{l4(a,e,"defaultFontSize",t)},[a,e]),d=(0,xE.useCallback)(t=>{let r=s(e);if(!r)return;let{MAX_MARGIN_PX:n,MAX_GAP_PERCENT:i}=xL,o=Math.round(t/100*n),l=Math.round(t/100*i);r.marginTopPx=o,r.marginBottomPx=o/2,r.marginLeftPx=o/2,r.marginRightPx=o/2,l4(a,e,"gapPercent",l,!1,!1),c?.renderer.setAttribute("margin",`${o}px`),c?.renderer.setAttribute("gap",`${l}%`),r?.scrolled&&c?.renderer.setAttribute("flow","scrolled")},[a,e,c,s]),f=(0,xE.useCallback)(t=>{l4(a,e,"lineHeight",t/xO)},[a,e]),p=(0,xE.useCallback)((e,t)=>{let{MAX_MARGIN_PX:r,MAX_GAP_PERCENT:n,MARGIN_RATIO:i}=xL;return(e/r+t/n)*i},[]),b=h("footerbar-font-mobile bg-base-200 absolute flex w-full flex-col items-center gap-y-8 px-4 transition-all sm:hidden","font"===t?"pointer-events-auto translate-y-0 pb-4 pt-8 ease-out":"pointer-events-none invisible translate-y-full overflow-hidden pb-0 pt-0 ease-in");return(0,xS.jsxs)("div",{className:b,style:{bottom:r},children:[(0,xS.jsx)(xw,{label:i("Font Size"),initialValue:l?.defaultFontSize??xA,bubbleLabel:`${l?.defaultFontSize??xA}`,minLabel:"A",maxLabel:"A",minClassName:"text-xs",maxClassName:"text-base",onChange:u,min:xC,max:xM}),(0,xS.jsxs)("div",{className:"flex w-full items-center justify-between gap-x-6",children:[(0,xS.jsx)(xw,{label:i("Page Margin"),initialValue:p(l?.marginTopPx??44,l?.gapPercent??5),bubbleElement:(0,xS.jsx)(yp,{size:n}),minLabel:i("Small"),maxLabel:i("Large"),step:10,onChange:d}),(0,xS.jsx)(xw,{label:i("Line Spacing"),initialValue:(l?.lineHeight??1.6)*xO,bubbleElement:(0,xS.jsx)(xk,{size:n}),minLabel:i("Small"),maxLabel:i("Large"),min:xR,max:xT,onChange:f})]})]})};var xP=a,xB=p,xD=l,xz=y,xF=x,x$=w;let xU=0,xH=100,xV=50,xq=({actionTab:e,bottomOffset:t})=>{let r=eU(),{envConfig:n,appService:i}=(0,xD.useEnv)(),{settings:a}=(0,xF.useSettingsStore)(),{getScreenBrightness:o,setScreenBrightness:s}=eO(),{themeMode:l,themeColor:c,isDarkMode:u,setThemeMode:d,setThemeColor:f}=(0,xz.useThemeStore)(),[p,b]=(0,xB.useState)(a.screenBrightness>=0?a.screenBrightness:xV);(0,xB.useEffect)(()=>{i?.isMobileApp&&"color"===e&&o().then(e=>{e>=0&&e<=1&&b(Math.round(100*e))})},[e,i,o]);let g=(0,xB.useMemo)(()=>aM(async e=>{l6(n,"screenBrightness",e),l6(n,"autoScreenBrightness",!1),await s(e/100)},100),[n,s]),m=(0,xB.useCallback)(async e=>{i?.isMobileApp&&(b(e),g(e))},[i,g]),v=()=>{d("auto"===l?"light":"light"===l?"dark":"auto")},y=h("footerbar-color-mobile bg-base-200 absolute flex w-full flex-col items-center gap-y-8 px-4 transition-all sm:hidden","color"===e?"pointer-events-auto translate-y-0 pb-4 pt-8 ease-out":"pointer-events-none invisible translate-y-full overflow-hidden pb-0 pt-0 ease-in");return(0,xP.jsxs)("div",{className:y,style:{bottom:t},children:[i?.hasScreenBrightness&&(0,xP.jsx)(xw,{label:r("Screen Brightness"),initialValue:p,bubbleLabel:`${p}`,minIcon:(0,xP.jsx)(p1,{size:16}),maxIcon:(0,xP.jsx)(p1,{size:24}),onChange:m,min:xU,max:xH,valueToPosition:(e,t,r)=>e<=t?0:e>=r?100:100*Math.pow(e/r,.5),positionToValue:(e,t,r)=>{if(e<=0)return t;if(e>=100)return r;let n=Math.pow(e/100,2)*r;return Math.max(t,Math.min(r,n))}}),(0,xP.jsxs)("div",{className:"w-full",children:[(0,xP.jsx)("div",{className:"flex items-center justify-between p-2",children:(0,xP.jsx)("span",{className:"text-sm font-medium",children:r("Color")})}),(0,xP.jsxs)("div",{className:"flex gap-3 overflow-x-auto p-2",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:[x$.themes.map(({name:e,label:t,colors:n})=>(0,xP.jsx)("button",{onClick:()=>f(e),className:h("flex flex-shrink-0 flex-col items-center justify-center rounded-lg p-3 transition-all","h-[40px] min-w-[80px]",c===e?"ring-primary ring-offset-base-200 ring-2 ring-offset-2":"hover:opacity-80"),style:{backgroundColor:u?n.dark["base-100"]:n.light["base-100"],color:u?n.dark["base-content"]:n.light["base-content"]},children:(0,xP.jsx)("span",{className:"text-xs font-medium",children:r(t)})},e)),(0,xP.jsx)("button",{onClick:()=>v(),className:h("flex flex-shrink-0 flex-col items-center justify-center rounded-lg p-3 transition-all","h-[40px] min-w-[80px]","dark"===l?"ring-primary ring-offset-base-200 ring-2 ring-offset-2":"hover:opacity-80"),style:{backgroundColor:(x$.themes.find(e=>e.name===c)||x$.themes[0]).colors.dark["base-100"],color:(x$.themes.find(e=>e.name===c)||x$.themes[0]).colors.dark["base-content"]},children:"light"===l?(0,xP.jsx)(p1,{size:20}):"dark"===l?(0,xP.jsx)(pJ,{size:20}):(0,xP.jsx)(yw,{size:20})})]})]})]})};var xW=a,xK=iB;let xG=({bookKey:e,actionTab:t,navPadding:r,onSetActionTab:n})=>{let i=eU(),{getViewState:a}=e_(),o=a(e),s=(0,xK.useResponsiveSize)(23),l=(0,xK.useResponsiveSize)(18);return(0,xW.jsxs)("div",{className:h("bg-base-200 z-30 mt-auto flex w-full justify-between px-8 py-4 sm:hidden"),style:{paddingBottom:r},children:[(0,xW.jsx)(yz,{label:i("Table of Contents"),icon:(0,xW.jsx)(pW,{size:s}),onClick:()=>n("toc")}),(0,xW.jsx)(yz,{label:i("Color"),icon:(0,xW.jsx)(p1,{className:h("color"===t&&"text-blue-500")}),onClick:()=>n("color")}),(0,xW.jsx)(yz,{label:i("Reading Progress"),icon:(0,xW.jsx)(xN,{className:h("progress"===t&&"text-blue-500")}),onClick:()=>n("progress")}),(0,xW.jsx)(yz,{label:i("Font & Layout"),icon:(0,xW.jsx)(aH,{size:l,className:h("font"===t&&"text-blue-500")}),onClick:()=>n("font")}),(0,xW.jsx)(yz,{label:i("Speak"),icon:(0,xW.jsx)(iC,{className:o?.ttsEnabled?"text-blue-500":""}),onClick:()=>n("tts")})]})},xX=({bookKey:e,gridInsets:t,actionTab:r,progressValid:n,progressFraction:i,navigationHandlers:a,onSetActionTab:o})=>{let s=window.innerWidth<640||window.innerHeight<640,l=(0,xh.useResponsiveSize)(28),c=(0,xh.useResponsiveSize)(20),u=s?`${.33*t.bottom+64}px`:"64px",d=s?`${.33*t.bottom+16}px`:"0px";return(0,xf.jsxs)(xf.Fragment,{children:[(0,xf.jsx)(xq,{actionTab:r,bottomOffset:u}),(0,xf.jsx)(x_,{bookKey:e,actionTab:r,progressFraction:i,progressValid:n,navigationHandlers:a,bottomOffset:u,sliderHeight:l}),(0,xf.jsx)(xI,{bookKey:e,actionTab:r,bottomOffset:u,marginIconSize:c}),(0,xf.jsx)(xG,{bookKey:e,actionTab:r,navPadding:d,onSetActionTab:o})]})};var xZ=a,xY=p;let xJ=(e,t,r=!1)=>{let n=t.toLowerCase();if(!n.startsWith("zh"))return e.toString();let i=n.includes("tw")||n.includes("hk"),a=r?"":"",o=(i?"":"").replace("",a),s=i?["","","","","",""]:["","","","","",""],l=String(e),c=l.length,u="";for(let e=0;e<c;e++){let t=Number(l[e]),r=c-e-1;0!==t?u+=o[t]+s[r%4]:!u.endsWith(a)&&e<c-1&&(u+=a),4===r&&(u+=s[4]),8===r&&(u+=s[5])}return u=u.replace(RegExp(`${a}+$`),"").replace(`${a}`,"").replace(`${a}`,"").replace(RegExp(`${a}+`,"g"),a),r||(u=i?u.replace(/^$/,"").replace(/(^|[^])([^]|$)/g,"$1$2"):u.replace(/^$/,"").replace(/(^|[^])([^]|$)/g,"$1$2")),u};function xQ(e,t,r,n=!1,i="en",a=1){if(void 0===e||void 0===t||!(t>0)||!(e>=0))return"";{let o=n?xJ(e+1,i,!0):String(e+1),s=n?xJ(t,i,!0):String(t);return r.replace("{current}",o).replace("{total}",s).replace("{percent}",((e+1)/t*100).toFixed(a))}}function x0(e,t=!1,r="en"){return void 0===e||e<0?"":t?xJ(e,r):String(e)}let x1=({bookKey:e,gridInsets:t,progressValid:r,progressFraction:n,navigationHandlers:i,onSpeakText:a})=>{let o=eU(),{hoveredBookKey:s,getView:l,getViewState:c,getProgress:u,getViewSettings:d}=e_(),{getBookData:f}=ex(),h=l(e),p=f(e),b=u(e),g=c(e),m=d(e),v=m?.progressStyle||"percentage",[y,x]=xY.default.useState(r?100*n:0),{section:w,pageinfo:_}=b||{},S="fraction"===v?"{current} / {total}":"{percent}%",E=p?.isFixedLayout?w:_,k=xQ(E?.current,E?.total,S,!1,"en",0),N=(0,xY.useRef)(null);(0,xY.useEffect)(()=>{s!==e&&N.current&&document.activeElement===N.current&&N.current.blur()},[s,e]),(0,xY.useEffect)(()=>{r&&x(100*n)},[r,n]);let j=(0,xY.useCallback)(e=>{x(e),i.onProgressChange(e)},[i]),C=window.innerWidth<640||window.innerHeight<640;return(0,xZ.jsxs)("div",{className:"absolute hidden h-8 w-full items-center gap-x-4 px-4 sm:flex",style:{bottom:C?`${.33*t.bottom}px`:"0px"},children:[(0,xZ.jsx)(yz,{icon:xg(m?.rtl,(0,xZ.jsx)(aD,{}),(0,xZ.jsx)(aF,{})),onClick:xv(m?.rtl,i.onPrevSection,i.onNextSection),label:xm(m?.rtl,o("Previous Section"),o("Next Section"))}),(0,xZ.jsx)(yz,{icon:xg(m?.rtl,(0,xZ.jsx)(az,{}),(0,xZ.jsx)(a$,{})),onClick:xv(m?.rtl,i.onPrevPage,i.onNextPage),label:xm(m?.rtl,o("Previous Page"),o("Next Page"))}),(0,xZ.jsx)(yz,{icon:xg(m?.rtl,(0,xZ.jsx)(aP,{}),(0,xZ.jsx)(aB,{})),onClick:i.onGoBack,label:o("Go Back"),disabled:!h?.history.canGoBack}),(0,xZ.jsx)(yz,{icon:xg(m?.rtl,(0,xZ.jsx)(aB,{}),(0,xZ.jsx)(aP,{})),onClick:i.onGoForward,label:o("Go Forward"),disabled:!h?.history.canGoForward}),r&&(0,xZ.jsx)("span",{title:o("Reading Progress"),"aria-label":`${o("Reading Progress")}: ${Math.round(100*n)}%`,className:"mx-2 text-center text-sm",children:(0,xZ.jsx)("span",{"aria-hidden":"true",children:k})}),(0,xZ.jsx)("input",{ref:N,type:"range",className:"text-base-content mx-2 min-w-0 flex-1",min:0,max:100,"aria-label":o("Jump to Location"),value:y,onChange:e=>j(parseInt(e.target.value,10))}),(0,xZ.jsx)(yz,{icon:(0,xZ.jsx)(yS,{className:g?.ttsEnabled?"text-blue-500":""}),onClick:a,label:o("Speak")}),(0,xZ.jsx)(yz,{icon:xg(m?.rtl,(0,xZ.jsx)(a$,{}),(0,xZ.jsx)(az,{})),onClick:xv(m?.rtl,i.onNextPage,i.onPrevPage),label:xm(m?.rtl,o("Next Page"),o("Previous Page"))}),(0,xZ.jsx)(yz,{icon:xg(m?.rtl,(0,xZ.jsx)(aF,{}),(0,xZ.jsx)(aD,{})),onClick:xv(m?.rtl,i.onNextSection,i.onPrevSection),label:xm(m?.rtl,o("Next Section"),o("Previous Section"))})]})};var x2=a,x3=p,x4=l,x6=s,x5=y,x8=x,x9=iB,x7=S,we=r0;let wt=e=>e.replace(/\r\n/g,"  ").replace(/\r/g," ").replace(/\n/g," ").trimStart(),wr=(e,t,r,n)=>{let i=t.replace(/^<break\b[^>]*>/i,"");return`
    <speak version="1.0" xml:lang="${e}">
      <voice name="${r}">
        <prosody rate="${n}" >
            ${i}
        </prosody>
      </voice>
    </speak>
  `},wn=(e,t)=>{let r="en",n=e.match(/xml:lang\s*=\s*"([^"]+)"/);if(n&&n[1]){let e=n[1].split("-");r=e.length>1?`${e[0].toLowerCase()}-${e[1].toUpperCase()}`:e[0].toLowerCase(),r=(0,we.code6392to6391)(r)||r,(0,we.isValidLang)(r)||(r="en")}t=(0,we.code6392to6391)(t?.toLowerCase()||"")||t,"en"===r&&t&&!(0,we.isSameLang)(r,t)&&(r=t.split("-")[0].toLowerCase());let i=e.replace(/<lang[^>]*>.*?<\/lang>/gs,"");return(0,we.inferLangFromScript)(i,r)},wi=(e,t)=>{let r,n=wn(e,t)||"en";e=e.replace(/<speak[^>]*>/i,"").replace(/<\/speak>/i,"");let i="",a=[],o=null,s=n,l=[],c=/<(\/?)(\w+)([^>]*)>|([^<]+)/g;for(;null!==(r=c.exec(e));)if(r[4]){let e=r[4],t=wt(e);if(t&&o){let e=i.length;i+=t,a.push({offset:e,name:o,text:t,language:(0,we.inferLangFromScript)(t,s)||s})}else i+=wt(e)}else{let e="/"===r[1],t=r[2],i=r[3];if("mark"!==t||e){if("lang"===t)if(e)s=l.pop()??n;else{l.push(s);let e=i?.match(/xml:lang="([^"]+)"/);e&&(s=e[1])}}else{let e=i?.match(/name="([^"]+)"/);e&&(o=e[1])}}return{plainText:i,marks:a}},wa=(e,t,r)=>{let n,i=wn(e,r),a=(0,we.code6392to6391)(t.toLowerCase())||t.toLowerCase();if((0,we.isSameLang)(a,i))return e.replace(/<lang\s+xml:lang="([^"]+)"[^>]*>.*?<\/lang>/gs,(e,t)=>{let r=(0,we.code6392to6391)(t.toLowerCase())||t.toLowerCase();return(0,we.isSameLang)(r,i)?e:""});let o=[],s=/<lang\s+xml:lang="([^"]+)"[^>]*>(.*?)<\/lang>/gs,l=new RegExp(s.source,s.flags);for(;null!==(n=l.exec(e));){let e=(0,we.code6392to6391)(n[1].toLowerCase())||n[1].toLowerCase();(0,we.isSameLang)(e,a)&&o.push({match:n[0],lang:n[1],content:n[2]})}if(o.length>0){let t=e.match(/<speak[^>]*>/i),r=e.match(/<\/speak>/i);if(!t||!r)return e;let n=o.map(e=>e.match).join("");return`${t[0]}${n}${r[0]}`}return e},wo="data:audio/mp3;base64,//MkxAAHiAICWABElBeKPL/RANb2w+yiT1g/gTok//lP/W/l3h8QO/OCdCqCW2Cw//MkxAQHkAIWUAhEmAQXWUOFW2dxPu//9mr60ElY5sseQ+xxesmHKtZr7bsqqX2L//MkxAgFwAYiQAhEAC2hq22d3///9FTV6tA36JdgBJoOGgc+7qvqej5Zu7/7uI9l//MkxBQHAAYi8AhEAO193vt9KGOq+6qcT7hhfN5FTInmwk8RkqKImTM55pRQHQSq//MkxBsGkgoIAABHhTACIJLf99nVI///yuW1uBqWfEu7CgNPWGpUadBmZ////4sL//MkxCMHMAH9iABEmAsKioqKigsLCwtVTEFNRTMuOTkuNVVVVVVVVVVVVVVVVVVV//MkxCkECAUYCAAAAFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV",ws=["Albert","Bad News","Bahh","Bells","Boing","Bubbles","Cellos","Eddy","Flo","Fred","Good News","Grandma","Grandpa","Jester","Junior","Kathy","Organ","Ralph","Reed","Rocko","Sandy","Shelley","Superstar","Trinoids","Whisper","Wobble","Zarvox"];class wl{static LOCAL_STORAGE_KEY="ttsPreferredVoices";static PREFERRED_CLIENT_KEY="preferredClient";static normalizeLanguage(e){return e?e.toLowerCase().slice(0,2):"n/a"}static setPreferredClient(e){if(!e)return;let t=this.getPreferences();t[this.PREFERRED_CLIENT_KEY]=e,localStorage.setItem(this.LOCAL_STORAGE_KEY,JSON.stringify(t))}static setPreferredVoice(e,t,r){if(!e||!t||!r)return;let n=this.getPreferences(),i=this.normalizeLanguage(t);n[`${e}-${i}`]=r,localStorage.setItem(this.LOCAL_STORAGE_KEY,JSON.stringify(n))}static getPreferredClient(){return this.getPreferences()[this.PREFERRED_CLIENT_KEY]||null}static getPreferredVoice(e,t){let r=this.getPreferences(),n=this.normalizeLanguage(t);return r[`${e}-${n}`]||null}static getPreferences(){let e=localStorage.getItem(this.LOCAL_STORAGE_KEY);return e?JSON.parse(e):{}}static sortVoicesFunc(e,t){let r=e.lang.split("-")[1]||"",n=t.lang.split("-")[1]||"";return r===n?e.name<t.name?-1:+(e.name>t.name):"CN"===r?-1:"CN"===n?1:"TW"===r?-1:"TW"===n?1:"HK"===r?-1:"HK"===n?1:"US"===r?-1:"US"===n?1:"GB"===r?-1:"GB"===n?1:e.name<t.name?-1:+(e.name>t.name)}}async function*wc(e,t,r,n,i,a,o,s){let{marks:l}=wi(e,t),c=window.speechSynthesis,u=new SpeechSynthesisUtterance;for(let e of l){let{language:t}=e;s(e),u.text=e.text,u.rate=r(),u.pitch=n();let l=await i(t);l&&(u.voice=l,a(l.voiceURI)),t&&(u.lang=t,o(t)),yield{type:"boundary",speaking:!0,name:"sentence",mark:e.name};let d=await new Promise(e=>{u.onend=()=>e({type:"end",speaking:!1}),u.onerror=t=>e({type:"error",speaking:!1,error:t.error}),c.speak(u)});if(yield d,"error"===d.type)break}}class wu{name="web-speech";initialized=!1;controller;#e=[];#t="en";#r="";#n="";#i=1;#a=1;#o=window.speechSynthesis;constructor(e){this.controller=e}async init(){return this.#o?(await new Promise(e=>{let t=()=>{this.#e=this.#o.getVoices().map(e=>{let t=e;return t.id=e.voiceURI||e.name,t}),e()};this.#o.getVoices().length>0?t():void 0!==this.#o.onvoiceschanged?this.#o.onvoiceschanged=t:(console.warn("Voiceschanged event not supported."),e())}),this.initialized=!0):this.initialized=!1,this.initialized}getVoiceIdFromLang=async e=>{let t=wl.getPreferredVoice(this.name,e),r=this.#e.find(e=>e.id===t)||(await this.getVoices(e))[0]?.voices[0]||null;return r?.id||this.#n||""};getWebSpeechVoiceFromLang=async e=>{let t=await this.getVoiceIdFromLang(e);return this.#e.find(e=>e.id===t)||null};async *speak(e,t,r=!1){if(!r)for await(let r of wc(e,this.#t,()=>this.#i,()=>this.#a,this.getWebSpeechVoiceFromLang,e=>this.#n=e,e=>this.#r=e,e=>this.controller?.dispatchSpeakMark(e))){if(t.aborted){console.log("TTS aborted"),yield{code:"error",message:"Aborted"};return}"boundary"===r.type?yield{code:"boundary",mark:r.mark??"",message:`${r.name??"Unknown"} ${r.charIndex??0}/${r.charLength??0}`}:"error"===r.type?yield{code:"error",message:r.error??"Unknown error"}:"end"===r.type&&(yield{code:"end",message:"Speech finished"})}}async pause(){return this.#o.pause(),!0}async resume(){return this.#o.resume(),!0}async stop(){this.#o.cancel()}setPrimaryLang(e){this.#t=e}async setRate(e){this.#i=e}async setPitch(e){this.#a=e}async setVoice(e){let t=this.#e.find(t=>t.id===e);t&&(this.#n=t.id)}async getAllVoices(){return this.#e.map(e=>({id:e.id,name:e.name,lang:e.lang,disabled:!this.initialized}))}async getVoices(e){let t="en"===e&&(0,x7.getUserLocale)(e)||e,r=e=>!e.includes("com.apple")||e.includes("com.apple.voice.compact"),n=e=>!1===ws.some(t=>e.name.includes(t)),i=this.#e.filter(r=>r.lang.startsWith(t)||"en"===e&&["en-US","en-GB"].includes(r.lang)).filter(e=>r(e.voiceURI||"")).filter(n),a=new Set,o=i.map(e=>({id:e.voiceURI,name:e.name,lang:e.lang})).filter(e=>!a.has(e.id)&&(a.add(e.id),!0));return o.forEach(e=>{e.disabled=!this.initialized}),[{id:"web-speech-api",name:"Web TTS",voices:o.sort(wl.sortVoicesFunc),disabled:!this.initialized||0===o.length}]}getGranularities(){return["sentence"]}getVoiceId(){return this.#n}getSpeakingLang(){return this.#r}async shutdown(){this.initialized=!1,this.#e=[],await this.stop()}}var wd=S,wf=ax,wh=null;let wp=wh="undefined"!=typeof WebSocket?WebSocket:"undefined"!=typeof MozWebSocket?MozWebSocket:e.g.WebSocket||e.g.MozWebSocket;var wb=e.i(520657),wg=S;class wm{capacity;map;onEvict;constructor(e,t){if(e<=0)throw Error("LRUCache capacity must be greater than 0");this.capacity=e,this.map=new Map,this.onEvict=t}get(e){if(!this.map.has(e))return;let t=this.map.get(e);return this.map.delete(e),this.map.set(e,t),t}set(e,t){if(this.map.has(e)){let t=this.map.get(e);this.map.delete(e),this.onEvict&&this.onEvict(e,t)}else if(this.map.size===this.capacity){let e=this.map.keys().next().value;if(e){let t=this.map.get(e);this.map.delete(e),this.onEvict&&this.onEvict(e,t)}}this.map.set(e,t)}has(e){return this.map.has(e)}delete(e){if(this.map.has(e)){let t=this.map.get(e),r=this.map.delete(e);return r&&this.onEvict&&this.onEvict(e,t),r}return!1}clear(){if(this.onEvict)for(let[e,t]of this.map)this.onEvict(e,t);this.map.clear()}size(){return this.map.size}entries(){return Array.from(this.map).reverse()}}var wv=A;let wy="wss://speech.platform.bing.com/consumer/speech/synthesize/readaloud/edge/v1",wx="6A5AA1D4EAFF4E9FB37E23D68491D6F4",ww="143.0.3650.75",w_=ww.split(".")[0],wS={"af-ZA":["af-ZA-AdriNeural","af-ZA-WillemNeural"],"am-ET":["am-ET-AmehaNeural","am-ET-MekdesNeural"],"ar-AE":["ar-AE-FatimaNeural","ar-AE-HamdanNeural"],"ar-BH":["ar-BH-AliNeural","ar-BH-LailaNeural"],"ar-DZ":["ar-DZ-AminaNeural","ar-DZ-IsmaelNeural"],"ar-EG":["ar-EG-SalmaNeural","ar-EG-ShakirNeural"],"ar-IQ":["ar-IQ-BasselNeural","ar-IQ-RanaNeural"],"ar-JO":["ar-JO-SanaNeural","ar-JO-TaimNeural"],"ar-KW":["ar-KW-FahedNeural","ar-KW-NouraNeural"],"ar-LB":["ar-LB-LaylaNeural","ar-LB-RamiNeural"],"ar-LY":["ar-LY-ImanNeural","ar-LY-OmarNeural"],"ar-MA":["ar-MA-JamalNeural","ar-MA-MounaNeural"],"ar-OM":["ar-OM-AbdullahNeural","ar-OM-AyshaNeural"],"ar-QA":["ar-QA-AmalNeural","ar-QA-MoazNeural"],"ar-SA":["ar-SA-HamedNeural","ar-SA-ZariyahNeural"],"ar-SY":["ar-SY-AmanyNeural","ar-SY-LaithNeural"],"ar-TN":["ar-TN-HediNeural","ar-TN-ReemNeural"],"ar-YE":["ar-YE-MaryamNeural","ar-YE-SalehNeural"],"az-AZ":["az-AZ-BabekNeural","az-AZ-BanuNeural"],"bg-BG":["bg-BG-BorislavNeural","bg-BG-KalinaNeural"],"bn-BD":["bn-BD-NabanitaNeural","bn-BD-PradeepNeural"],"bn-IN":["bn-IN-BashkarNeural","bn-IN-TanishaaNeural"],"bs-BA":["bs-BA-GoranNeural","bs-BA-VesnaNeural"],"ca-ES":["ca-ES-EnricNeural","ca-ES-JoanaNeural"],"cs-CZ":["cs-CZ-AntoninNeural","cs-CZ-VlastaNeural"],"cy-GB":["cy-GB-AledNeural","cy-GB-NiaNeural"],"da-DK":["da-DK-ChristelNeural","da-DK-JeppeNeural"],"de-AT":["de-AT-IngridNeural","de-AT-JonasNeural"],"de-CH":["de-CH-JanNeural","de-CH-LeniNeural"],"de-DE":["de-DE-AmalaNeural","de-DE-ConradNeural","de-DE-FlorianMultilingualNeural","de-DE-KatjaNeural","de-DE-KillianNeural","de-DE-SeraphinaMultilingualNeural"],"el-GR":["el-GR-AthinaNeural","el-GR-NestorasNeural"],"en-AU":["en-AU-NatashaNeural","en-AU-WilliamNeural"],"en-CA":["en-CA-ClaraNeural","en-CA-LiamNeural"],"en-GB":["en-GB-LibbyNeural","en-GB-MaisieNeural","en-GB-RyanNeural","en-GB-SoniaNeural","en-GB-ThomasNeural"],"en-HK":["en-HK-SamNeural","en-HK-YanNeural"],"en-IE":["en-IE-ConnorNeural","en-IE-EmilyNeural"],"en-IN":["en-IN-NeerjaExpressiveNeural","en-IN-NeerjaNeural","en-IN-PrabhatNeural"],"en-KE":["en-KE-AsiliaNeural","en-KE-ChilembaNeural"],"en-NG":["en-NG-AbeoNeural","en-NG-EzinneNeural"],"en-NZ":["en-NZ-MitchellNeural","en-NZ-MollyNeural"],"en-PH":["en-PH-JamesNeural","en-PH-RosaNeural"],"en-SG":["en-SG-LunaNeural","en-SG-WayneNeural"],"en-TZ":["en-TZ-ElimuNeural","en-TZ-ImaniNeural"],"en-US":["en-US-AnaNeural","en-US-AndrewMultilingualNeural","en-US-AndrewNeural","en-US-AriaNeural","en-US-AvaMultilingualNeural","en-US-AvaNeural","en-US-BrianMultilingualNeural","en-US-BrianNeural","en-US-ChristopherNeural","en-US-EmmaMultilingualNeural","en-US-EmmaNeural","en-US-EricNeural","en-US-GuyNeural","en-US-JennyNeural","en-US-MichelleNeural","en-US-RogerNeural","en-US-SteffanNeural"],"es-AR":["es-AR-ElenaNeural","es-AR-TomasNeural"],"es-BO":["es-BO-MarceloNeural","es-BO-SofiaNeural"],"es-CL":["es-CL-CatalinaNeural","es-CL-LorenzoNeural"],"es-CO":["es-CO-GonzaloNeural","es-CO-SalomeNeural"],"es-CR":["es-CR-JuanNeural","es-CR-MariaNeural"],"es-CU":["es-CU-BelkysNeural","es-CU-ManuelNeural"],"es-DO":["es-DO-EmilioNeural","es-DO-RamonaNeural"],"es-EC":["es-EC-AndreaNeural","es-EC-LuisNeural"],"es-ES":["es-ES-AlvaroNeural","es-ES-ElviraNeural","es-ES-XimenaNeural"],"es-US":["es-US-AlonsoNeural","es-US-PalomaNeural"],"et-EE":["et-EE-AnuNeural","et-EE-KertNeural"],"fa-IR":["fa-IR-DilaraNeural","fa-IR-FaridNeural"],"fi-FI":["fi-FI-HarriNeural","fi-FI-NooraNeural"],"fil-PH":["fil-PH-AngeloNeural","fil-PH-BlessicaNeural"],"fr-BE":["fr-BE-CharlineNeural","fr-BE-GerardNeural"],"fr-CA":["fr-CA-AntoineNeural","fr-CA-JeanNeural","fr-CA-SylvieNeural","fr-CA-ThierryNeural"],"fr-CH":["fr-CH-ArianeNeural","fr-CH-FabriceNeural"],"fr-FR":["fr-FR-DeniseNeural","fr-FR-EloiseNeural","fr-FR-HenriNeural","fr-FR-RemyMultilingualNeural","fr-FR-VivienneMultilingualNeural"],"ga-IE":["ga-IE-ColmNeural","ga-IE-OrlaNeural"],"gl-ES":["gl-ES-RoiNeural","gl-ES-SabelaNeural"],"gu-IN":["gu-IN-DhwaniNeural","gu-IN-NiranjanNeural"],"he-IL":["he-IL-AvriNeural","he-IL-HilaNeural"],"hi-IN":["hi-IN-MadhurNeural","hi-IN-SwaraNeural"],"hr-HR":["hr-HR-GabrijelaNeural","hr-HR-SreckoNeural"],"hu-HU":["hu-HU-NoemiNeural","hu-HU-TamasNeural"],"id-ID":["id-ID-ArdiNeural","id-ID-GadisNeural"],"is-IS":["is-IS-GudrunNeural","is-IS-GunnarNeural"],"it-IT":["it-IT-DiegoNeural","it-IT-ElsaNeural","it-IT-GiuseppeMultilingualNeural","it-IT-IsabellaNeural"],"iu-Cans-CA":["iu-Cans-CA-SiqiniqNeural","iu-Cans-CA-TaqqiqNeural"],"iu-Latn-CA":["iu-Latn-CA-SiqiniqNeural","iu-Latn-CA-TaqqiqNeural"],"ja-JP":["ja-JP-KeitaNeural","ja-JP-NanamiNeural"],"jv-ID":["jv-ID-DimasNeural","jv-ID-SitiNeural"],"ka-GE":["ka-GE-EkaNeural","ka-GE-GiorgiNeural"],"kk-KZ":["kk-KZ-AigulNeural","kk-KZ-DauletNeural"],"km-KH":["km-KH-PisethNeural","km-KH-SreymomNeural"],"kn-IN":["kn-IN-GaganNeural","kn-IN-SapnaNeural"],"ko-KR":["ko-KR-HyunsuMultilingualNeural","ko-KR-InJoonNeural","ko-KR-SunHiNeural"],"lo-LA":["lo-LA-ChanthavongNeural","lo-LA-KeomanyNeural"],"lt-LT":["lt-LT-LeonasNeural","lt-LT-OnaNeural"],"lv-LV":["lv-LV-EveritaNeural","lv-LV-NilsNeural"],"mk-MK":["mk-MK-AleksandarNeural","mk-MK-MarijaNeural"],"ml-IN":["ml-IN-MidhunNeural","ml-IN-SobhanaNeural"],"mn-MN":["mn-MN-BataaNeural","mn-MN-YesuiNeural"],"mr-IN":["mr-IN-AarohiNeural","mr-IN-ManoharNeural"],"ms-MY":["ms-MY-OsmanNeural","ms-MY-YasminNeural"],"mt-MT":["mt-MT-GraceNeural","mt-MT-JosephNeural"],"my-MM":["my-MM-NilarNeural","my-MM-ThihaNeural"],"nb-NO":["nb-NO-FinnNeural","nb-NO-PernilleNeural"],"ne-NP":["ne-NP-HemkalaNeural","ne-NP-SagarNeural"],"nl-BE":["nl-BE-ArnaudNeural","nl-BE-DenaNeural"],"nl-NL":["nl-NL-ColetteNeural","nl-NL-FennaNeural","nl-NL-MaartenNeural"],"pl-PL":["pl-PL-MarekNeural","pl-PL-ZofiaNeural"],"ps-AF":["ps-AF-GulNawazNeural","ps-AF-LatifaNeural"],"pt-BR":["pt-BR-AntonioNeural","pt-BR-FranciscaNeural","pt-BR-ThalitaMultilingualNeural"],"pt-PT":["pt-PT-DuarteNeural","pt-PT-RaquelNeural"],"ro-RO":["ro-RO-AlinaNeural","ro-RO-EmilNeural"],"ru-RU":["ru-RU-DmitryNeural","ru-RU-SvetlanaNeural"],"si-LK":["si-LK-SameeraNeural","si-LK-ThiliniNeural"],"sk-SK":["sk-SK-LukasNeural","sk-SK-ViktoriaNeural"],"sl-SI":["sl-SI-PetraNeural","sl-SI-RokNeural"],"so-SO":["so-SO-MuuseNeural","so-SO-UbaxNeural"],"sq-AL":["sq-AL-AnilaNeural","sq-AL-IlirNeural"],"sr-RS":["sr-RS-NicholasNeural","sr-RS-SophieNeural"],"su-ID":["su-ID-JajangNeural","su-ID-TutiNeural"],"sv-SE":["sv-SE-MattiasNeural","sv-SE-SofieNeural"],"sw-KE":["sw-KE-RafikiNeural","sw-KE-ZuriNeural"],"sw-TZ":["sw-TZ-DaudiNeural","sw-TZ-RehemaNeural"],"ta-IN":["ta-IN-PallaviNeural","ta-IN-ValluvarNeural"],"ta-LK":["ta-LK-KumarNeural","ta-LK-SaranyaNeural"],"ta-MY":["ta-MY-KaniNeural","ta-MY-SuryaNeural"],"ta-SG":["ta-SG-AnbuNeural","ta-SG-VenbaNeural"],"te-IN":["te-IN-MohanNeural","te-IN-ShrutiNeural"],"th-TH":["th-TH-NiwatNeural","th-TH-PremwadeeNeural"],"tr-TR":["tr-TR-AhmetNeural","tr-TR-EmelNeural"],"uk-UA":["uk-UA-OstapNeural","uk-UA-PolinaNeural"],"ur-IN":["ur-IN-GulNeural","ur-IN-SalmanNeural"],"ur-PK":["ur-PK-AsadNeural","ur-PK-UzmaNeural"],"uz-UZ":["uz-UZ-MadinaNeural","uz-UZ-SardorNeural"],"vi-VN":["vi-VN-HoaiMyNeural","vi-VN-NamMinhNeural"],"zh-CN":["zh-CN-XiaoxiaoNeural","zh-CN-XiaoyiNeural","zh-CN-YunjianNeural","zh-CN-YunxiNeural","zh-CN-YunxiaNeural","zh-CN-YunyangNeural","zh-CN-liaoning-XiaobeiNeural","zh-CN-shaanxi-XiaoniNeural"],"zh-HK":["zh-HK-HiuGaaiNeural","zh-HK-HiuMaanNeural","zh-HK-WanLungNeural"],"zh-TW":["zh-TW-HsiaoChenNeural","zh-TW-HsiaoYuNeural","zh-TW-YunJheNeural"],"zu-ZA":["zu-ZA-ThandoNeural","zu-ZA-ThembaNeural"]},wE=0x2b6109100,wk=1e9,wN=()=>{let e=Math.floor(Date.now()/1e3);e+=wE,e-=e%300,e*=wk/100;let t=`${e.toFixed(0)}${wx}`;return(0,wb.createHash)("sha256").update(t,"ascii").digest("hex").toUpperCase()},wj=()=>{let e=new Uint8Array(16);return crypto.getRandomValues(e),Array.from(e).map(e=>e.toString(16).padStart(2,"0")).join("").toUpperCase()},wC=e=>Object.entries(e).flatMap(([e,t])=>t.map(t=>({name:t.replace(`${e}-`,"").replace("Neural",""),id:t,lang:e}))),wM=e=>{let t=JSON.stringify(e);return(0,wf.md5)(t)};class wA{static voices=wC(wS);static audioCache=new wm(200);static audioUrlCache=new wm(200,(e,t)=>{t.startsWith("blob:")&&URL.revokeObjectURL(t)});protocol="wss";constructor(e){e&&(this.protocol=e)}async #s({lang:e,text:t,voice:r,rate:n}){let i=(0,wv.getNodeAPIBaseUrl)()+"/tts/edge",a=await sn(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({input:t,voice:r,rate:n,lang:e})});if(!a.ok)throw Error(`Edge TTS HTTP request failed: ${a.status} ${a.statusText}`);return a}async #l({lang:t,text:r,voice:n,rate:i}){let a=(0,wg.randomMd5)(),o=new URLSearchParams({ConnectionId:a,TrustedClientToken:wx,"Sec-MS-GEC":wN(),"Sec-MS-GEC-Version":`1-${ww}`}),s=`${wy}?${o.toString()}`,l=new Date().toString(),c={"User-Agent":`Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/${w_}.0.0.0 Safari/537.36 Edg/${w_}.0.0.0`,"Accept-Encoding":"gzip, deflate, br, zstd","Accept-Language":"en-US,en;q=0.9",Pragma:"no-cache","Cache-Control":"no-cache",Origin:"chrome-extension://jdiccldimpdaibmpdkjnbmckianbfold","Sec-WebSocket-Version":"13",Cookie:`muid=${wj()};`},u={"Content-Type":"application/json; charset=utf-8",Path:"speech.config","X-Timestamp":l},d={"Content-Type":"application/ssml+xml",Path:"ssml","X-RequestId":a,"X-Timestamp":l},f=JSON.stringify({context:{synthesis:{audio:{metadataoptions:{sentenceBoundaryEnabled:!1,wordBoundaryEnabled:!0},outputFormat:"audio-24khz-48kbitrate-mono-mp3"}}}}),h=(e,t)=>{let r="";for(let t of Object.keys(e))r+=`${t}: ${e[t]}\r
`;return`${r}\r
${t}`},p=e=>{let t=e.split("\n"),r={},n="",i=0;for(i=0;i<t.length;i++){let e=t[i].trim();if(!e)break;let n=e.indexOf(":");if(-1===n)continue;let a=e.slice(0,n).trim(),o=e.slice(n+1).trim();r[a]=o}for(i+=1;i<t.length;i++)n+=t[i]+"\n";return{headers:r,body:n}},b=h(d,wr(t,r,n,i)),g=h(u,f);return new Promise((0,wv.isTauriAppPlatform)()?async(t,r)=>{try{let n=(await e.A(237110)).default,i=await n.connect(s,{headers:c}),a=new ArrayBuffer(0),o=await i.addListener(e=>{if("Text"===e.type){let{headers:n}=p(e.data);if("turn.end"===n.Path){if(i.disconnect(),o(),!a.byteLength)return r(Error("No audio data received."));let e=new Response(a);t(e)}}else if("Binary"===e.type){let t;t=e.data instanceof Uint8Array?e.data.buffer:new Uint8Array(e.data).buffer;let r=new DataView(t).getInt16(0);if(t.byteLength>r+2){let e=t.slice(2+r),n=new Uint8Array(a.byteLength+e.byteLength);n.set(new Uint8Array(a),0),n.set(new Uint8Array(e),a.byteLength),a=n.buffer}}});await i.send(g),await i.send(b)}catch(e){r(Error(`WebSocket error occurred: ${e}`))}}:(e,t)=>{let r=new wp(s,{headers:c});r.binaryType="arraybuffer";let n=new ArrayBuffer(0);r.addEventListener("open",()=>{r.send(g),r.send(b)}),r.addEventListener("message",i=>{if("string"==typeof i.data){let{headers:a}=p(i.data);if("turn.end"===a.Path){if(r.close(),!n.byteLength)return t(Error("No audio data received."));e(new Response(n))}}else if(i.data instanceof ArrayBuffer){let e=new DataView(i.data).getInt16(0);if(i.data.byteLength>e+2){let t=i.data.slice(2+e),r=new Uint8Array(n.byteLength+t.byteLength);r.set(new Uint8Array(n),0),r.set(new Uint8Array(t),n.byteLength),n=r.buffer}}}),r.addEventListener("close",()=>{n.byteLength||t(Error("No audio data received."))}),r.addEventListener("error",()=>{t(Error("WebSocket error occurred."))})})}async create(e){return"https"===this.protocol?this.#s(e):this.#l(e)}async createAudioUrl(e){let t=wM(e);if(wA.audioUrlCache.has(t))return wA.audioUrlCache.get(t);try{let r=await this.create(e),n=await r.arrayBuffer(),i=new Blob([n],{type:"audio/mpeg"}),a=URL.createObjectURL(i);return wA.audioCache.set(t,i),wA.audioUrlCache.set(t,a),a}catch(e){throw e}}}class wR{name="edge-tts";initialized=!1;controller;#e=[];#t="en";#r="";#n="";#i=1;#a=1;#c=null;#u=null;#d=!1;#f=0;#h=0;#p=null;constructor(e){this.controller=e}async init(e="wss"){this.#c=new wA(e),this.#e=wA.voices;try{await this.#c.create({lang:"en",text:"test",voice:"en-US-AriaNeural",rate:1,pitch:1}),this.initialized=!0}catch{"wss"===e?this.controller?.isAuthenticated?await this.init("https"):this.controller?.dispatchEvent(new CustomEvent("tts-need-auth")):this.initialized=!1}return this.initialized}getPayload=(e,t,r)=>({lang:e,text:t,voice:r,rate:1,pitch:this.#a});getVoiceIdFromLang=async e=>{let t=wl.getPreferredVoice(this.name,e),r=this.#e.find(e=>e.id===t);if(r)return r.id;let n=((await this.getVoices(e))[0]?.voices||[])[0]||null;return n?.id==="en-US-AnaNeural"?"en-US-AriaNeural":n?.id||this.#n||"en-US-AriaNeural"};async *speak(e,t,r=!1){let{marks:n}=wi(e,this.#t);if(r){let e=2;for(let r=0;r<Math.min(e,n.length)&&!t.aborted;r++){let e=n[r],{language:t}=e,i=await this.getVoiceIdFromLang(t);this.#n=i,await this.#c?.createAudioUrl(this.getPayload(t,e.text,i)).catch(e=>{console.warn("Error preloading mark",r,e)})}n.length>e&&(async()=>{for(let r=e;r<n.length;r++){let e=n[r];try{if(t.aborted)break;let{language:r}=e,n=await this.getVoiceIdFromLang(r);await this.#c?.createAudioUrl(this.getPayload(r,e.text,n))}catch(e){console.warn("Error preloading mark (bg)",r,e)}}})(),yield{code:"end",message:"Preload finished"};return}await this.stopInternal(),this.#u||(this.#u=new Audio);let i=this.#u;for(let e of(i.setAttribute("x-webkit-airplay","deny"),i.preload="auto",n)){this.controller?.dispatchSpeakMark(e);let r=null;try{let{language:n}=e,a=await this.getVoiceIdFromLang(n);this.#r=n;let o=await this.#c?.createAudioUrl(this.getPayload(n,e.text,a));if(t.aborted){yield{code:"error",message:"Aborted"};break}yield{code:"boundary",message:`Start chunk: ${e.name}`,mark:e.name};let s=await new Promise(n=>{let a=()=>{i.onended=null,i.onerror=null,i.src=""};(r=()=>{a(),n({code:"error",message:"Aborted"})},t.aborted)?r():(t.addEventListener("abort",r),i.onended=()=>{a(),n({code:"end",message:`Chunk finished: ${e.name}`})},i.onerror=e=>{a(),console.warn("Audio playback error:",e),n({code:"error",message:"Audio playback error"})},this.#d=!0,i.src=o||"",i.play().then(()=>i.playbackRate=this.#i).catch(e=>{a(),console.error("Failed to play audio:",e),n({code:"error",message:"Playback failed: "+e.message})}))});yield s}catch(r){if(r instanceof Error&&"No audio data received."===r.message){console.warn("No audio data received for:",e.text),yield{code:"end",message:`Chunk finished: ${e.name}`};continue}let t=r instanceof Error?r.message:String(r);console.warn("TTS error for mark:",e.text,t),yield{code:"error",message:t};break}finally{r&&t.removeEventListener("abort",r)}}await this.stopInternal()}async pause(){return!this.#d||!this.#u||(this.#f=this.#u.currentTime-this.#h,await this.#u.pause(),this.#d=!1,!0)}#b(){if(null!==this.#p)return this.#p;let e=navigator.userAgent,t=/Safari/.test(e)&&!/Chrome/.test(e),r=/iPad|iPhone|iPod/.test(e);return t||r?this.#p=.2:this.#p=0,this.#p}async resume(){if(this.#d||!this.#u)return!0;let e=this.#b();return this.#u.currentTime=Math.max(0,this.#u.currentTime-e),await this.#u.play(),this.#d=!0,this.#h=this.#u.currentTime-this.#f,!0}async stop(){await this.stopInternal()}async stopInternal(){this.#d=!1,this.#f=0,this.#h=0,this.#u&&(this.#u.pause(),this.#u.currentTime=0,this.#u?.onended&&this.#u.onended(new Event("stopped")),this.#u.src="")}async setRate(e){this.#i=e}async setPitch(e){this.#a=e}async setVoice(e){let t=this.#e.find(t=>t.id===e);t&&(this.#n=t.id)}async getAllVoices(){return this.#e.forEach(e=>{e.disabled=!this.initialized}),this.#e}async getVoices(e){let t="en"===e&&(0,wd.getUserLocale)(e)||e,r=(await this.getAllVoices()).filter(r=>r.lang.startsWith(t)||"en"===e&&["en-US","en-GB"].includes(r.lang));return[{id:"edge-tts",name:"Edge TTS",voices:r.sort(wl.sortVoicesFunc),disabled:!this.initialized||0===r.length}]}setPrimaryLang(e){this.#t=e}getGranularities(){return["sentence"]}getVoiceId(){return this.#n}getSpeakingLang(){return this.#r}async shutdown(){this.initialized=!1,this.#u=null,this.#e=[]}}var wT=eZ,wO=S;let wL={default:"System TTS",msctts:"Msc TTS",mstrans:"MSTrans TTS",microsoft:"Microsoft TTS",bytedance:"ByteDance TTS",peiyinya:"PeiYinYa TTS",huoshan:"HuoShan TTS",sougou:"Sougou TTS",xiaomi:"XiaoMi TTS",bdetts:"BDeTTS",bdotts:"BDoTTS",vcstts:"VcsTTS",isstts:"IssTTS",xfpeiyin:"XFPeiYin",azure:"Azure TTS",edgetts:"Edge TTS",google:"Google TTS",gemini:"Gemini TTS",weread:"WeRead TTS",aispeech:"Aispeech"};class wI{name="native-tts";initialized=!1;controller;#e=[];#t="en";#r="";#n="";#i=1;#a=1;#g=null;#m=new Map;constructor(e){this.controller=e}async setupEventListener(){try{if(this.#g)return;this.#g=await (0,wT.addPluginListener)("native-tts","tts_events",e=>{let{utteranceId:t,code:r,message:n,mark:i}=e,a=this.#m.get(t);if(!a)return;let o={code:r,message:n,mark:i};a.eventQueue.push(o),"end"===r||"error"===r?(a.finished=!0,a.resolver&&a.resolver({value:void 0,done:!0})):a.resolver&&(a.resolver({value:o,done:!1}),a.resolver=null)})}catch(e){console.error("Failed to setup TTS event listener:",e)}}async init(){let e=await (0,wT.invoke)("plugin:native-tts|init");return this.initialized=e.success,this.initialized&&this.setupEventListener(),this.initialized}async *speakMark(e,t,r){if(t)return void(yield{code:"end",message:"Dummy preload finished"});let{language:n}=e,i=await this.getVoiceIdFromLang(n);this.#n=i,this.#r=n,await this.setVoice(i);try{let n=(await (0,wT.invoke)("plugin:native-tts|speak",{payload:{text:e.text,preload:t}})).utteranceId;this.#m.set(n,{eventQueue:[],resolver:null,finished:!1});let i=()=>{let e=this.#m.get(n);if(e&&e.resolver){let t={code:"error",message:"Aborted"};e.resolver({value:t,done:!0}),e.resolver=null}this.stop()};r.addEventListener("abort",i);try{for(;;){let t=this.#m.get(n);if(!t)break;if(t.eventQueue.length>0){let r=t.eventQueue.shift();if(r.mark=e.name,yield r,"end"===r.code||"error"===r.code)break}else if(t.finished)break;else{let e=new Promise(e=>{let t=this.#m.get(n);if(!t)return e();t.resolver=t=>e(t.value?.code==="error"?t.value:void 0)}),t=new Promise(e=>setTimeout(()=>e(null),100)),r=await Promise.race([e,t]);r&&(yield r)}if(r.aborted)break}}finally{r.removeEventListener("abort",i),this.#m.delete(n)}}catch(e){throw console.error("Failed to speak:",e),e}}async *speak(e,t,r=!1){let{marks:n}=wi(e,this.#t);for(let e of n)for await(let n of(this.controller?.dispatchSpeakMark(e),this.speakMark(e,r,t))){if(t.aborted)return void(yield{code:"error",message:"Aborted"});yield n}}async getVoiceIdFromLang(e){let t=wl.getPreferredVoice(this.name,e),r=this.#e.find(e=>e.id===t)||(await this.getVoices(e))[0]?.voices[0]||null;return r?.id||""}async pause(){return await (0,wT.invoke)("plugin:native-tts|pause"),!1}async resume(){return await (0,wT.invoke)("plugin:native-tts|resume"),!1}async stop(){await (0,wT.invoke)("plugin:native-tts|stop"),this.#m.clear()}async setRate(e){this.#i=parseFloat(Math.pow(e,2.5).toFixed(2)),await (0,wT.invoke)("plugin:native-tts|set_rate",{payload:{rate:this.#i}})}async setPitch(e){this.#a=e,await (0,wT.invoke)("plugin:native-tts|set_pitch",{payload:{pitch:this.#a}})}async setVoice(e){this.#n=e,await (0,wT.invoke)("plugin:native-tts|set_voice",{payload:{voice:e}})}async getAllVoices(){if(this.#e.length>0)return this.#e;try{let e=await (0,wT.invoke)("plugin:native-tts|get_all_voices");return this.#e=e.voices,this.#e}catch(e){return console.error("Failed to get all voices:",e),[]}}async getVoices(e){let t="en"===e&&(0,wO.getUserLocale)(e)||e,r=(await this.getAllVoices()).filter(r=>r.lang.startsWith(t)||"en"===e&&["en-US","en-GB"].includes(r.lang)),n=new Map;return r.forEach(e=>{let{name:t,lang:r}=e,i=e.id.split("_")[0];i in wL?e.name=t.replace(`${i}_`,"").replace(`${r}-`,"").replace("Neural","").trim():i="default",e.name=e.name.replace("NOT_SET",(0,wO.stubTranslation)("Default")),n.has(i)||n.set(i,[]),n.get(i).push(e)}),Array.from(n.entries()).map(([e,t])=>({id:e,name:wL[e]||e,voices:t.sort(wl.sortVoicesFunc),disabled:!this.initialized||0===t.length})).sort((e,t)=>"default"===e.id?-1:"default"===t.id?1:e.id.localeCompare(t.id))}setPrimaryLang(e){this.#t=e}getGranularities(){return["sentence"]}getVoiceId(){return this.#n}getSpeakingLang(){return this.#r}async shutdown(){this.#g&&(this.#g.unregister(),this.#g=null),await this.stop()}}var wP=e.i(816188);let wB="tts-highlight";class wD extends EventTarget{appService=null;view;isAuthenticated=!1;preprocessCallback;#v=0;#y=null;#x=null;state="stopped";ttsLang="";ttsRate=1;ttsClient;ttsWebClient;ttsEdgeClient;ttsNativeClient=null;ttsWebVoices=[];ttsEdgeVoices=[];ttsNativeVoices=[];ttsTargetLang="";options={style:"highlight",color:"gray"};constructor(e,t,r=!1,n){super(),this.ttsWebClient=new wu(this),this.ttsEdgeClient=new wR(this),e?.isAndroidApp&&(this.ttsNativeClient=new wI(this)),this.ttsClient=this.ttsWebClient,this.appService=e,this.view=t,this.isAuthenticated=r,this.preprocessCallback=n}async init(){let e=[];await this.ttsEdgeClient.init()&&e.push(this.ttsEdgeClient),this.ttsNativeClient&&await this.ttsNativeClient.init()&&(e.push(this.ttsNativeClient),this.ttsNativeVoices=await this.ttsNativeClient.getAllVoices()),await this.ttsWebClient.init()&&e.push(this.ttsWebClient),this.ttsClient=e[0]||this.ttsWebClient;let t=wl.getPreferredClient();if(t){let r=e.find(e=>e.name===t);r&&(this.ttsClient=r)}this.ttsWebVoices=await this.ttsWebClient.getAllVoices(),this.ttsEdgeVoices=await this.ttsEdgeClient.getAllVoices()}#w(){return e=>{let{overlayer:t}=this.view.renderer.getContents()[0],{style:r,color:n}=this.options;t?.remove(wB),t?.add(wB,e,wP.Overlayer[r],{color:n})}}#_(){let{overlayer:e}=this.view.renderer.getContents()?.[0]||{};e?.remove(wB)}async initViewTTS(e){e&&(this.options.style=e.style,this.options.color=e.color);let t=this.view.language.isCJK?"sentence":"word",r=this.ttsClient.getGranularities();r.includes(t)||(t=r[0]),await this.view.initTTS(t,bf({tags:["rt"],contents:[{tag:"a",content:/^[\[\(]?[\*\d]+[\)\]]?$/}]}),this.#w())}async preloadSSML(e,t){if(e)for await(let r of(await this.ttsClient.speak(e,t,!0)));}async preloadNextSSML(e=4){let t=this.view.tts;if(!t)return;let r=0;for(let n=0;n<e;n++){let e=await this.#S(t.next());this.preloadSSML(e,new AbortController().signal),e&&r++}for(let e=0;e<r;e++)t.prev()}async #S(e){if(e)return e=e.replace(/<emphasis[^>]*>([^<]+)<\/emphasis>/g,"$1").replace(/[]/g,",").replace("<break/>"," ").replace(/\.{3,}/g,"   ").replace(//g,"  ").replace(/\*/g," ").replace(//g," "),this.ttsTargetLang&&(e=wa(e,this.ttsTargetLang)),this.preprocessCallback&&(e=await this.preprocessCallback(e)),e}async #E(e,t=!1){await this.stop(),this.#y=new AbortController;let{signal:r}=this.#y;this.#x=new Promise(async(n,i)=>{try{let i;if(console.log("TTS speak"),this.state="playing",r.addEventListener("abort",()=>{n()}),e=await this.#S(await e))this.#v=0;else{this.#v++,this.#v<10&&"playing"===this.state&&!t&&(n(),await this.view.next(),await this.forward()),console.log("no SSML, skipping for",this.#v);return}let{plainText:a,marks:o}=wi(e);if((!a||0===o.length)&&!t)return n(),await this.forward();for await(let{code:t}of(this.dispatchSpeakMark(o[0]),await this.preloadSSML(e,r),await this.ttsClient.speak(e,r))){if(r.aborted)return void n();i=t}"end"!==i||"playing"!==this.state||t||(n(),await this.forward()),n()}catch(e){r.aborted?n():i(e)}finally{this.#y&&(this.#y.abort(),this.#y=null)}}),await this.#x.catch(e=>this.error(e))}async speak(e,t=!1){await this.initViewTTS(),this.#E(e,t).catch(e=>this.error(e)),this.preloadNextSSML(),this.dispatchSpeakMark()}play(){"playing"!==this.state?this.start():this.pause()}async start(){await this.initViewTTS();let e=this.state.includes("paused")?this.view.tts?.resume():this.view.tts?.start();this.state.includes("paused")&&this.resume(),this.#E(e),this.preloadNextSSML()}async pause(){this.state="paused",await this.ttsClient.pause().catch(e=>this.error(e))||(await this.stop(),this.state="stop-paused")}async resume(){this.state="playing",await this.ttsClient.resume().catch(e=>this.error(e))}async stop(){if(this.#y&&this.#y.abort(),await this.ttsClient.stop().catch(e=>this.error(e)),this.#x){let e=new Promise((e,t)=>setTimeout(()=>t(Error("Stop operation timed out")),3e3));await Promise.race([this.#x.catch(e=>this.error(e)),e]).catch(e=>this.error(e)),this.#x=null}this.state="stopped"}async backward(e=!1){await this.initViewTTS(),"playing"===this.state?(await this.stop(),e?this.#E(this.view.tts?.prevMark()):this.#E(this.view.tts?.prev())):(await this.stop(),this.state="backward-paused",e?this.view.tts?.prevMark(!0):this.view.tts?.prev(!0))}async forward(e=!1){await this.initViewTTS(),"playing"===this.state?(await this.stop(),e?this.#E(this.view.tts?.nextMark()):(this.#E(this.view.tts?.next()),this.preloadNextSSML())):(await this.stop(),this.state="forward-paused",e?this.view.tts?.nextMark(!0):this.view.tts?.next(!0))}async setLang(e){this.ttsLang=e,this.setPrimaryLang(e)}async setPrimaryLang(e){this.ttsEdgeClient.initialized&&this.ttsEdgeClient.setPrimaryLang(e),this.ttsWebClient.initialized&&this.ttsWebClient.setPrimaryLang(e),this.ttsNativeClient?.initialized&&this.ttsNativeClient?.setPrimaryLang(e)}async setRate(e){this.state="setrate-paused",this.ttsRate=e,await this.ttsClient.setRate(this.ttsRate)}async getVoices(e){let t=await this.ttsWebClient.getVoices(e),r=await this.ttsEdgeClient.getVoices(e);return[...await this.ttsNativeClient?.getVoices(e)??[],...r,...t]}async setVoice(e,t){this.state="setvoice-paused";let r=!!this.ttsEdgeVoices.find(t=>(""===e||t.id===e)&&!t.disabled),n=!!this.ttsNativeVoices.find(t=>(""===e||t.id===e)&&!t.disabled);if(r)this.ttsClient=this.ttsEdgeClient,await this.ttsClient.setRate(this.ttsRate);else if(n){if(!this.ttsNativeClient)throw Error("Native TTS client is not available");this.ttsClient=this.ttsNativeClient,await this.ttsClient.setRate(this.ttsRate)}else this.ttsClient=this.ttsWebClient,await this.ttsClient.setRate(this.ttsRate);wl.setPreferredClient(this.ttsClient.name),wl.setPreferredVoice(this.ttsClient.name,t,e),await this.ttsClient.setVoice(e)}getVoiceId(){return this.ttsClient.getVoiceId()}getSpeakingLang(){return this.ttsClient.getSpeakingLang()}setTargetLang(e){this.ttsTargetLang=e}dispatchSpeakMark(e){if(this.dispatchEvent(new CustomEvent("tts-speak-mark",{detail:e||{text:""}})),e){let t=this.view.tts?.setMark(e.name);this.dispatchEvent(new CustomEvent("tts-highlight-mark",{detail:t}))}}error(e){console.error(e),this.state="stopped"}async shutdown(){await this.stop(),this.#_(),this.ttsWebClient.initialized&&await this.ttsWebClient.shutdown(),this.ttsEdgeClient.initialized&&await this.ttsEdgeClient.shutdown(),this.ttsNativeClient?.initialized&&await this.ttsNativeClient.shutdown()}}var wz=A,wF=S,w$=eZ;class wU{handlers={};eventListenerInited=!1;eventListeners=[];async requestPostNotificationPermission(){(await (0,w$.invoke)("plugin:native-tts|checkPermissions")).postNotification.startsWith("prompt")&&await (0,w$.invoke)("plugin:native-tts|requestPermissions",{permissions:["postNotification"]})}async initializeListeners(){if(this.eventListenerInited)return;this.eventListenerInited=!0;let e=await (0,w$.addPluginListener)("native-tts","media-session-play",()=>{this.handlers.play&&this.handlers.play()});this.eventListeners.push(e);let t=await (0,w$.addPluginListener)("native-tts","media-session-pause",()=>{this.handlers.pause&&this.handlers.pause()});this.eventListeners.push(t);let r=await (0,w$.addPluginListener)("native-tts","media-session-next",()=>{this.handlers.nexttrack&&this.handlers.nexttrack()});this.eventListeners.push(r);let n=await (0,w$.addPluginListener)("native-tts","media-session-previous",()=>{this.handlers.previoustrack&&this.handlers.previoustrack()});this.eventListeners.push(n);let i=await (0,w$.addPluginListener)("native-tts","media-session-seek",e=>{let t=e.payload.position;this.handlers.seekto&&this.handlers.seekto(t)});this.eventListeners.push(i)}async cleanupListeners(){for(let e of this.eventListeners)await e.unregister();this.eventListeners=[],this.eventListenerInited=!1}async updateMetadata(e){try{await (0,w$.invoke)("plugin:native-tts|update_media_session_metadata",{payload:e})}catch(e){console.error("Failed to update media metadata:",e)}}async updatePlaybackState(e){try{await (0,w$.invoke)("plugin:native-tts|update_media_session_state",{payload:e})}catch(e){console.error("Failed to update playback state:",e)}}async setActive(e){try{e.active?(e.keepAppInForeground&&await this.requestPostNotificationPermission(),await this.initializeListeners()):await this.cleanupListeners(),await (0,w$.invoke)("plugin:native-tts|set_media_session_active",{payload:e})}catch(e){console.error("Failed to set media session active state:",e)}}setActionHandler(e,t){t?this.handlers[e]=t:delete this.handlers[e]}}function wH(){return"mediaSession"in navigator?navigator.mediaSession:"android"===(0,wF.getOSPlatform)()&&(0,wz.isTauriAppPlatform)()?new wU:null}let wV=(e,t,r=1,n=1)=>{if(!t)return{left:0,right:0,top:0,bottom:0};let i=r*t.left+e.left,a=r*t.right+e.left;return{left:i,right:a,top:n*t.top+e.top,bottom:n*t.bottom+e.top}},wq=({x:e,y:t})=>e>0&&t>0&&e<window.innerWidth&&t<window.innerHeight,wW=e=>{let t;for(t=e&&"object"==typeof e&&("tagName"in e)?e:e&&"object"==typeof e&&("collapse"in e)?e.commonAncestorContainer:e;t;){if(t.nodeType===Node.DOCUMENT_NODE){let e=t;if(e.defaultView&&e.defaultView.frameElement)return e.defaultView.frameElement}t=t.parentNode}return null},wK=(e,t,r)=>({x:Math.max(r,Math.min(e.x,t.right-t.left-r)),y:Math.max(r,Math.min(e.y,t.bottom-t.top-r))}),wG=(e,t)=>{if(0===e.rangeCount)return!1;let r=e.getRangeAt(0).getClientRects(),n=80;for(let e=0;e<r.length;e++){let i=r[e];if(t.clientX>=i.left-n&&t.clientX<=i.right+n&&t.clientY>=i.top-n&&t.clientY<=i.bottom+n)return!0}return!1},wX=(e,t,r,n=!1)=>{let{range:i,rect:a}=e&&"range"in e?e:{range:e,rect:void 0},o=wW(i),s=(o?getComputedStyle(o).transform:"").match(/matrix\((.+)\)/),[l,,,c]=s?.[1]?.split(/\s*,\s*/)?.map(e=>parseFloat(e))??[],u=o?.getBoundingClientRect()??{top:0,left:0},d={top:0,right:0,bottom:0,left:0};if("nodeType"in i&&1===i.nodeType){let e=window.getComputedStyle(i);d={top:parseInt(e.paddingTop,10)||0,right:parseInt(e.paddingRight,10)||0,bottom:parseInt(e.paddingBottom,10)||0,left:parseInt(e.paddingLeft,10)||0}}let f=Array.from(i.getClientRects()).map(e=>({top:e.top+d.top,right:e.right-d.right,bottom:e.bottom-d.bottom,left:e.left+d.left})),h=a?wV(u,a,l,c):wV(u,f[0],l,c),p=a?wV(u,a,l,c):wV(u,f.at(-1),l,c);if(n){let e=h.left-t.left>t.right-h.right?"left":"right",n={point:wK({x:"left"===e?h.left-t.left-6:h.right-t.left+6,y:(h.top+h.bottom)/2-t.top},t,r),dir:e};return wq(n.point)?n:{point:{x:0,y:0},dir:e}}let b={point:wK({x:(h.left+h.right)/2-t.left,y:h.top-t.top-12},t,r),dir:"up"},g={point:wK({x:(p.left+p.right)/2-t.left,y:p.bottom-t.top+6},t,r),dir:"down"},m=wq(b.point),v=wq(g.point);return m||v?m?v?b.point.y>window.innerHeight-g.point.y?b:g:b:g:{point:{x:0,y:0}}},wZ=(e,t,r,n,i)=>{let a={x:0,y:0};return"up"===e.dir?(a.x=e.point.x-r/2,a.y=e.point.y-n):"down"===e.dir?(a.x=e.point.x-r/2,a.y=e.point.y+6):"left"===e.dir?(a.x=e.point.x-r,a.y=e.point.y-n/2):"right"===e.dir&&(a.x=e.point.x+6,a.y=e.point.y-n/2),a.x<i&&(a.x=i),a.y<i&&(a.y=i),a.x+r>t.right-t.left-i&&(a.x=t.right-t.left-i-r),a.y+n>t.bottom-t.top-i&&(a.y=t.bottom-t.top-i-n),{point:a,dir:e.dir}},wY=(e,t=[])=>{let r,n=e.cloneRange().cloneContents(),i=document.createTreeWalker(n,NodeFilter.SHOW_TEXT,{acceptNode:e=>{let r=e.parentElement;return t.includes(r?.tagName.toLowerCase()||"")?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}}),a="";for(;r=i.nextNode();)a+=r.nodeValue??"";return a};var wJ=_,wQ=S,w0=a,w1=p,w2=iB;let w3=(e,t,r)=>{if(!e)return{left:"-999px",top:"-999px"};let{dir:n,point:i}=e,a=0,o=0;switch(n){case"up":a=r;break;case"down":a=-r;break;case"left":o=r;break;case"right":o=-r}return{left:`${i.x+o}px`,top:`${i.y+a}px`,borderLeft:"right"===n?"none":"left"===n?`${t}px solid`:`${t}px solid transparent`,borderRight:"left"===n?"none":"right"===n?`${t}px solid`:`${t}px solid transparent`,borderTop:"down"===n?"none":"up"===n?`${t}px solid`:`${t}px solid transparent`,borderBottom:"up"===n?"none":"down"===n?`${t}px solid`:`${t}px solid transparent`,transform:"left"===n||"right"===n?"translateY(-50%)":"translateX(-50%)"}},w4=({width:e,height:t,minHeight:r,maxHeight:n,position:i,trianglePosition:a,children:o,className:s="",triangleClassName:l="",additionalStyle:c={},isOpen:u=!0,onDismiss:d})=>{let f=(0,w1.useRef)(null),[p,b]=(0,w1.useState)(i),[g,m]=(0,w1.useState)(t||r||0);sh({onCancel:d,elementRef:f,enabled:u});let v=(0,w2.useResponsiveSize)(10),y=window.innerHeight-2*v;a?.dir==="up"?y=a.point.y-v:a?.dir==="down"&&(y=window.innerHeight-a.point.y-v),n=Math.min(n||y,y),(0,w1.useEffect)(()=>{if(!f.current)return;let e=new ResizeObserver(e=>{for(let t of e){let e=t.contentRect.height;if(e!==g)return void m(e)}});return e.observe(f.current),()=>{e.disconnect()}},[]),(0,w1.useEffect)(()=>{if(!f.current)return;if(!i||!a||"up"!==i.dir)return void b(i);let e=g||f.current.offsetHeight;b({...i,point:{...i.point,y:Math.max(v,a.point.y-e)}})},[i,a,v,g]);let x=w3(a,7,0),w=w3(a,7,-1);return(0,w0.jsxs)("div",{children:[(0,w0.jsx)("div",{className:h("popup-triangle-outer text-base-300 absolute z-50",l),style:x}),(0,w0.jsx)("div",{id:"popup-container",ref:f,className:h("popup-container bg-base-300 absolute z-50 rounded-lg font-sans","eink:border eink:border-base-content",a?.dir!=="up"&&"not-eink:shadow-xl",s),style:{width:`${e}px`,height:t?`${t}px`:"auto",minHeight:r?`${r}px`:"none",maxHeight:n?`${n}px`:"none",left:`${p?p.point.x:-999}px`,top:`${p?p.point.y:-999}px`,...c},children:o}),(0,w0.jsx)("div",{className:h("popup-triangle-inner text-base-300 absolute z-50",l),style:w})]})};var w6=a,w5=p,w8=l,w9=x,w7=iB,_e=r0;let _t=e=>[{label:e("No Timeout"),value:0},{label:e("{{value}} minute",{value:1}),value:60},{label:e("{{value}} minutes",{value:3}),value:180},{label:e("{{value}} minutes",{value:5}),value:300},{label:e("{{value}} minutes",{value:10}),value:600},{label:e("{{value}} minutes",{value:20}),value:1200},{label:e("{{value}} minutes",{value:30}),value:1800},{label:e("{{value}} minutes",{value:45}),value:2700},{label:e("{{value}} hour",{value:1}),value:3600},{label:e("{{value}} hours",{value:2}),value:7200},{label:e("{{value}} hours",{value:3}),value:10800},{label:e("{{value}} hours",{value:4}),value:14400},{label:e("{{value}} hours",{value:6}),value:21600},{label:e("{{value}} hours",{value:8}),value:28800}],_r=e=>{let t=Date.now();if(e>t){let r=Math.floor((e-t)/1e3),n=60*Math.floor(r/3600)+Math.floor(r%3600/60),i=r%60;return`${n}:${i<10?"0":""}${i}`}return""},_n=({bookKey:e,ttsLang:t,isPlaying:r,timeoutOption:n,timeoutTimestamp:i,onTogglePlay:a,onBackward:o,onForward:s,onSetRate:l,onGetVoices:c,onSetVoice:u,onGetVoiceId:d,onSelectTimeout:f,onToogleTTSBar:p})=>{let b=eU(),{envConfig:g}=(0,w8.useEnv)(),{getViewSettings:m,setViewSettings:v}=e_(),{settings:y,setSettings:x,saveSettings:w}=(0,w9.useSettingsStore)(),_=m(e),[S,E]=(0,w5.useState)([]),[k,N]=(0,w5.useState)(_?.ttsRate??1),[j,C]=(0,w5.useState)(_?.ttsVoice??""),[M,A]=(0,w5.useState)(()=>_r(i)),R=(0,w7.useDefaultIconSize)(),T=(0,w7.useResponsiveSize)(32),O=(0,w7.useResponsiveSize)(48),L=t=>{let r=parseFloat(t.target.value);N(r=Math.max(.2,Math.min(3,r))),l(r);let n=m(e);n.ttsRate=r,y.globalViewSettings.ttsRate=r,v(e,n),x(y),w(g,y)},I=(t,r)=>{u(t,r),C(t);let n=m(e);n.ttsVoice=t,v(e,n)},P=t=>{let r=Date.now();t>0&&t<r?(f(e,0),A("")):t>0&&A(_r(t))};(0,w5.useEffect)(()=>{setTimeout(()=>{P(i)},1e3)},[i,M]),(0,w5.useEffect)(()=>{C(d())},[]),(0,w5.useEffect)(()=>{(async()=>{let e=await c(t),r=e.reduce((e,t)=>e+t.voices.length,0);e&&0!==r?E(e):(console.warn("No voices found for TTSPanel"),E([{id:"no-voices",name:b("Voices for {{lang}}",{lang:(0,_e.getLanguageName)(t)}),voices:[]}]))})()},[t]);let B=_t(b);return(0,w6.jsxs)("div",{className:"flex w-full flex-col items-center justify-center gap-2 rounded-2xl px-4 pt-4 sm:gap-1",children:[(0,w6.jsxs)("div",{className:"flex w-full flex-col items-center gap-0.5",children:[(0,w6.jsx)("input",{className:"range",type:"range",min:0,max:3,step:"0.1",value:k,onChange:L}),(0,w6.jsxs)("div",{className:"grid w-full grid-cols-7 text-xs",children:[(0,w6.jsx)("span",{className:"text-center",children:"|"}),(0,w6.jsx)("span",{className:"text-center",children:"|"}),(0,w6.jsx)("span",{className:"text-center",children:"|"}),(0,w6.jsx)("span",{className:"text-center",children:"|"}),(0,w6.jsx)("span",{className:"text-center",children:"|"}),(0,w6.jsx)("span",{className:"text-center",children:"|"}),(0,w6.jsx)("span",{className:"text-center",children:"|"})]}),(0,w6.jsxs)("div",{className:"grid w-full grid-cols-7 text-xs",children:[(0,w6.jsx)("span",{className:"text-center",children:b("Slow")}),(0,w6.jsx)("span",{className:"text-center"}),(0,w6.jsx)("span",{className:"text-center",children:"1.0"}),(0,w6.jsx)("span",{className:"text-center",children:"1.5"}),(0,w6.jsx)("span",{className:"text-center",children:"2.0"}),(0,w6.jsx)("span",{className:"text-center"}),(0,w6.jsx)("span",{className:"text-center",children:b("Fast")})]})]}),(0,w6.jsxs)("div",{className:"flex items-center justify-between space-x-2",children:[(0,w6.jsx)("button",{onClick:()=>o(),className:"rounded-full p-1 transition-transform duration-200 hover:scale-105",title:b("Previous Paragraph"),"aria-label":b("Previous Paragraph"),children:(0,w6.jsx)(n6,{size:T})}),(0,w6.jsx)("button",{onClick:a,className:"rounded-full p-1 transition-transform duration-200 hover:scale-105",title:r?b("Pause"):b("Play"),"aria-label":r?b("Pause"):b("Play"),children:r?(0,w6.jsx)(n5,{size:O,className:"fill-primary"}):(0,w6.jsx)(n9,{size:O,className:"fill-primary"})}),(0,w6.jsx)("button",{onClick:()=>s(),className:"rounded-full p-1 transition-transform duration-200 hover:scale-105",title:b("Next Paragraph"),"aria-label":b("Next Paragraph"),children:(0,w6.jsx)(n4,{size:T})}),(0,w6.jsxs)("div",{className:"dropdown dropdown-top",children:[(0,w6.jsxs)("button",{tabIndex:0,className:"flex flex-col items-center justify-center rounded-full p-1 transition-transform duration-200 hover:scale-105",onClick:e=>e.currentTarget.focus(),title:b("Set Timeout"),"aria-label":b("Set Timeout"),children:[(0,w6.jsx)(nW,{size:T}),M&&(0,w6.jsx)("span",{className:h("absolute bottom-0 left-1/2 w-12 translate-x-[-50%] translate-y-[80%] px-1","bg-primary/80 text-base-100 rounded-full text-center text-xs"),children:M})]}),(0,w6.jsx)("ul",{tabIndex:0,className:h("dropdown-content bgcolor-base-200 no-triangle menu menu-vertical rounded-box absolute right-0 z-[1] shadow","mt-4 inline max-h-96 w-[200px] overflow-y-scroll"),children:B.map((t,r)=>(0,w6.jsx)("li",{onClick:()=>f(e,t.value),children:(0,w6.jsxs)("div",{className:"flex items-center px-2",children:[(0,w6.jsx)("span",{style:{width:`${R}px`,height:`${R}px`},children:n===t.value&&(0,w6.jsx)(il,{className:"text-base-content"})}),(0,w6.jsx)("span",{className:h("text-base sm:text-sm"),children:t.label})]})},`${r}-${t.value}`))})]}),(0,w6.jsxs)("div",{className:"dropdown dropdown-top",children:[(0,w6.jsx)("button",{tabIndex:0,className:"rounded-full p-1 transition-transform duration-200 hover:scale-105",onClick:e=>e.currentTarget.focus(),children:(0,w6.jsx)(aK,{size:T})}),(0,w6.jsx)("ul",{tabIndex:0,className:h("dropdown-content bgcolor-base-200 no-triangle menu menu-vertical rounded-box absolute right-0 z-[1] shadow","mt-4 inline max-h-96 w-[250px] overflow-y-scroll"),title:b("Select Voice"),"aria-label":b("Select Voice"),children:S.map((e,t)=>(0,w6.jsxs)("div",{className:"",children:[(0,w6.jsxs)("div",{className:"flex items-center gap-2 px-2 py-1",children:[(0,w6.jsx)("span",{style:{width:`${R}px`,height:`${R}px`}}),(0,w6.jsx)("span",{className:"text-sm text-gray-400 sm:text-xs",children:b("{{engine}}: {{count}} voices",{engine:b(e.name),count:e.voices.length})})]}),e.voices.map((r,n)=>(0,w6.jsx)("li",{onClick:()=>!r.disabled&&I(r.id,r.lang),children:(0,w6.jsxs)("div",{className:"flex items-center px-2",children:[(0,w6.jsx)("span",{style:{width:`${R}px`,height:`${R}px`},children:j===r.id&&(0,w6.jsx)(il,{className:"text-base-content"})}),(0,w6.jsx)("span",{className:h("max-w-[180px] overflow-hidden text-ellipsis text-base sm:text-sm",r.disabled&&"text-gray-400"),children:b(r.name)})]})},`${t}-${e.id}-${n}`))]},e.id))})]})]}),(0,w6.jsx)("div",{className:"flex h-4 items-center justify-center opacity-60 transition-transform duration-200 hover:scale-105 hover:opacity-100",children:(0,w6.jsx)("button",{onClick:p,className:"p-0",title:b("Toggle Sticky Bottom TTS Bar"),"aria-label":b("Toggle Sticky Bottom TTS Bar"),children:_?.showTTSBar?(0,w6.jsx)(yg,{size:O,style:{transform:"scaleY(0.85)"}}):(0,w6.jsx)(yb,{size:O,style:{transform:"scaleY(0.85)"}})})})]})};var _i=a;let _a=({isPlaying:e,ttsInited:t,onClick:r})=>{let n=[1,2,3,4];return(0,_i.jsxs)("button",{className:h("relative h-full w-full rounded-full",t?"cursor-pointer":"cursor-not-allowed"),style:{maskImage:"radial-gradient(circle, white 100%, transparent 100%)",WebkitMaskImage:"radial-gradient(circle, white 100%, transparent 100%)"},onClick:r,children:[(0,_i.jsx)("div",{className:"absolute inset-0 overflow-hidden rounded-full bg-gradient-to-r from-blue-500 via-emerald-500 to-violet-500",children:(0,_i.jsx)("div",{className:"absolute -inset-full rounded-full bg-gradient-to-r from-blue-500 via-emerald-500 to-violet-500",style:{animation:e&&t?"moveGradient 2s alternate infinite":"none"}})}),(0,_i.jsxs)("div",{className:"absolute inset-0 flex items-center justify-center",children:[(0,_i.jsx)("style",{children:`
          @keyframes moveGradient {
            0% { transform: translate(0, 0); }
            100% { transform: translate(25%, 25%); }
          }
          @keyframes bounce {
            0%, 100% { transform: scaleY(1); }
            50% { transform: scaleY(0.6); }
          }
        `}),(0,_i.jsx)("div",{className:"flex items-end space-x-1",children:n.map(t=>(0,_i.jsx)("div",{className:"w-1 rounded-t bg-white",style:{height:"16px",animationName:e?"bounce":"none",animationDuration:e?`${1+.1*t}s`:"0s",animationTimingFunction:"ease-in-out",animationIterationCount:"infinite",animationDelay:`${.1*t}s`}},t))})]})]})};var _o=a,_s=l,_l=iB;let _c=({bookKey:e,isPlaying:t,onTogglePlay:r,onBackward:n,onForward:i,gridInsets:a})=>{let o=eU(),{appService:s}=(0,_s.useEnv)(),{hoveredBookKey:l,setHoveredBookKey:c}=e_(),u=(0,_l.useResponsiveSize)(30),d=(0,_l.useResponsiveSize)(36),f=l!==e;return(0,_o.jsx)("div",{className:h("bg-base-100 absolute bottom-0 z-40","inset-x-0 mx-auto flex w-full justify-center sm:w-fit","transition-opacity duration-300",f?"pointer-events-auto opacity-100":"pointer-events-none opacity-0"),style:{paddingBottom:s?.hasSafeAreaInset?`${.33*a.bottom}px`:0},onMouseEnter:()=>!s?.isMobile&&c(""),onTouchStart:()=>!s?.isMobile&&c(""),children:(0,_o.jsxs)("div",{className:"text-base-content flex h-[52px] items-center space-x-2 px-2",children:[(0,_o.jsx)("button",{onClick:n.bind(null,!1),className:"rounded-full p-1 transition-transform duration-200 hover:scale-105",title:o("Previous Paragraph"),"aria-label":o("Previous Paragraph"),children:(0,_o.jsx)(n6,{size:u})}),(0,_o.jsx)("button",{onClick:n.bind(null,!0),className:"rounded-full p-1 transition-transform duration-200 hover:scale-105",title:o("Previous Sentence"),"aria-label":o("Previous Sentence"),children:(0,_o.jsx)(ie,{size:u})}),(0,_o.jsx)("button",{onClick:r,className:"rounded-full p-1 transition-transform duration-200 hover:scale-105",title:o(t?"Pause":"Play"),"aria-label":o(t?"Pause":"Play"),children:t?(0,_o.jsx)(iw,{size:d}):(0,_o.jsx)(n8,{size:d})}),(0,_o.jsx)("button",{onClick:i.bind(null,!0),className:"rounded-full p-1 transition-transform duration-200 hover:scale-105",title:o("Next Sentence"),"aria-label":o("Next Sentence"),children:(0,_o.jsx)(n7,{size:u})}),(0,_o.jsx)("button",{onClick:i.bind(null,!1),className:"rounded-full p-1 transition-transform duration-200 hover:scale-105",title:o("Next Paragraph"),"aria-label":o("Next Paragraph"),children:(0,_o.jsx)(n4,{size:u})})]})})},_u=282,_d=160,_f=10,_h=({bookKey:e,gridInsets:t})=>{let r=eU(),{appService:n}=(0,x4.useEnv)(),{user:i}=(0,x6.useAuth)(),{safeAreaInsets:a,isDarkMode:o}=(0,x5.useThemeStore)(),{settings:s}=(0,x8.useSettingsStore)(),{getBookData:l}=ex(),{hoveredBookKey:c,getView:u,getProgress:d,getViewSettings:f}=e_(),{setViewSettings:p,setTTSEnabled:b}=e_(),{getMergedRules:g}=a3(),m=f(e),[v,y]=(0,x3.useState)("en"),[x,w]=(0,x3.useState)(!1),[_,S]=(0,x3.useState)(!1),[E,k]=(0,x3.useState)(!1),[N,j]=(0,x3.useState)(!1),[C,M]=(0,x3.useState)(()=>!!m?.showTTSBar),[A,R]=(0,x3.useState)(),[T,O]=(0,x3.useState)(),[L,I]=(0,x3.useState)(0),[P,B]=(0,x3.useState)(0),[D,z]=(0,x3.useState)(null),F=(0,x3.useRef)(null),[$,U]=(0,x3.useState)(!0),H=(0,x9.useResponsiveSize)(_f),V=Math.min(window.innerWidth-2*H,(0,x9.useResponsiveSize)(_u)),q=(0,x9.useResponsiveSize)(_d),W=(0,x3.useRef)(null),K=(0,x3.useRef)(null),G=(0,x3.useRef)(null),X=(0,x3.useRef)(null),[Z,Y]=(0,x3.useState)(null),[J,Q]=(0,x3.useState)(!1),ee=()=>{K.current||(K.current=document.createElement("audio"),K.current.setAttribute("x-webkit-airplay","deny"),K.current.addEventListener("play",()=>{"mediaSession"in navigator&&(navigator.mediaSession.metadata=null)}),K.current.preload="auto",K.current.loop=!0,K.current.src=wo,K.current.play())},et=()=>{if(K.current)try{K.current.pause(),K.current.currentTime=0,K.current.removeAttribute("src"),K.current.src="",K.current.load(),K.current=null,console.log("Unblock audio released")}catch(e){console.warn("Error releasing unblock audio:",e)}},er=async()=>{let t=wH();if(t&&(X.current=t,t instanceof wU)){let n=l(e),i=d(e);if(!n||!n.book)return;let{title:a,author:o,coverImageUrl:c}=n.book,{sectionLabel:u}=i||{},f="/icon.png";try{f=await oG(c||"/icon.png")}catch{f=await oG("/icon.png")}await t.setActive({active:!0,keepAppInForeground:s.alwaysInForeground,notificationTitle:r("Read Aloud"),notificationText:r("Ready to read aloud"),foregroundServiceTitle:r("Read Aloud"),foregroundServiceText:r("Ready to read aloud")}),t.updateMetadata({title:a,artist:u||a,album:o,artwork:f})}},en=async()=>{X.current&&X.current instanceof wU&&await X.current.setActive({active:!1,keepAppInForeground:s.alwaysInForeground}),X.current=null};(0,x3.useEffect)(()=>()=>{G.current&&(G.current.shutdown(),G.current=null)},[]),(0,x3.useEffect)(()=>(eR.on("tts-speak",el),eR.on("tts-stop",ec),()=>{eR.off("tts-speak",el),eR.off("tts-stop",ec)}),[]),(0,x3.useEffect)(()=>{if(!Z||!e)return;let t=l(e);if(!t||!t.book)return;let{title:n,author:i,coverImageUrl:a}=t.book,o=()=>{eR.dispatch("toast",{message:r("Please log in to use advanced TTS features"),type:"error",timeout:5e3})},s=t=>{let{sectionLabel:r}=d(e)||{},o=t.detail;if(X.current){let e=X.current;e instanceof wU?e.updateMetadata({title:o?.text||"",artist:r||n,album:i,artwork:""}):e.metadata=new MediaMetadata({title:o?.text||"",artist:r||n,album:i,artwork:[{src:a||"/icon.png",sizes:"512x512",type:"image/png"}]})}},c=t=>{let r=t.detail,n=u(e),i=d(e),a=f(e);if(!r||!n||!i||!a)return;let{location:o}=i,{index:s}=n.resolveCFI(o),l=n?.getCFI(s,r);if(l&&(a.ttsLocation=l||"",p(e,a)),!n.renderer.getContents().some(({doc:e})=>(e.getSelection()?.toString().length??0)>0))if(n.renderer.scrolled){let e=r.getBoundingClientRect(),{start:t,size:i,viewSize:o,sideProp:s}=n.renderer,l=e["height"===s?"y":"x"]+a.marginTopPx,c=e["height"===s?"height":"width"]+l,u="rtl"===n.book.dir?o-l:l,d="rtl"===n.book.dir?o-c:c,f=a.showHeader,h=a.showFooter,p=a.showBarsOnScroll,b=f&&p?44:0,g=h&&p?44:0,m=a.scrollingOverlap,v=d>t+i-g-m,y=u<t+b+m;if(v||y){let e=u-b-m;n.renderer.scrollToAnchor(e/o)}}else n.renderer.scrollToAnchor(r)};return Z.addEventListener("tts-need-auth",o),Z.addEventListener("tts-speak-mark",s),Z.addEventListener("tts-highlight-mark",c),()=>{Z.removeEventListener("tts-need-auth",o),Z.removeEventListener("tts-speak-mark",s),Z.removeEventListener("tts-highlight-mark",c)}},[Z,e]);let ei=(0,x3.useCallback)(()=>{let t=m?.ttsReadAloudText;if(m?.translationEnabled&&"translated"===t)return m?.translateTargetLang||(0,wQ.getLocale)();if(m?.translationEnabled&&"source"===t){let t=l(e);return t?.book?.primaryLanguage||""}return null},[e,l,m?.translationEnabled,m?.ttsReadAloudText,m?.translateTargetLang]);(0,x3.useEffect)(()=>{G.current?.setTargetLang(ei()||"")},[ei]);let ea=(0,x3.useMemo)(()=>({bookKey:e,viewSettings:f(e),userLocale:(0,wQ.getLocale)(),content:"",transformers:[],reversePunctuationTransform:!0}),[]),eo=(0,x3.useCallback)(async t=>{let r=g(e),n=f(e);return 0===r.filter(e=>e.enabled&&e.onlyForTTS&&("book"===e.scope||"library"===e.scope)).length?t:(ea.content=t,ea.viewSettings=n,t=await vF.transform(ea,{docType:"text/xml",onlyForTTS:!0}))},[e,g,f,ea]),es=(0,x3.useCallback)((e,t)=>{let r=o?"#000000":"#ffffff",n=t?r:e.color;return{...e,color:n}},[o]);(0,x3.useEffect)(()=>{let e=m?.ttsHighlightOptions;G.current&&e&&G.current.initViewTTS(es(e,m.isEink))},[m?.ttsHighlightOptions,m?.isEink,es]);let el=async t=>{let{bookKey:a,range:o,oneTime:s=!1}=t.detail;if(e!==a)return;let c=u(e),h=d(e),p=f(e),g=l(e);if(!c||!h||!p||!g||!g.book)return;if(g.book?.format==="PDF")return void eR.dispatch("toast",{message:r("TTS not supported for PDF"),type:"warning"});let m=o;if(!m&&p.ttsLocation){let{location:e}=h,t=p.ttsLocation;if(pL(t,e)){let{index:e,anchor:r}=c.resolveCFI(t),{doc:n}=c.renderer.getContents().find(t=>t.index===e)||{};n&&(m=r(n))}}m||(m=h.range);let v=g.book.primaryLanguage;G.current&&(G.current.stop(),G.current=null);try{n?.isIOSApp&&await (0,wJ.invokeUseBackgroundAudio)({enabled:!0}),n?.isMobile&&ee(),await er(),Q(!1),s||k(!0);let t=new wD(n,c,!!i?.id,eo);G.current=t,Y(t),await t.init(),await t.initViewTTS(es(p.ttsHighlightOptions,p.isEink));let r=c.tts?.from(m);if(r){let e=wn(r,v)||"en";w(!0),y(e),t.setLang(e),t.setRate(p.ttsRate),t.speak(r,s),t.setTargetLang(ei()||"")}Q(!0),b(e,!0)}catch(e){eR.dispatch("toast",{message:r("TTS not supported for this document"),type:"error"}),console.error(e)}},ec=async t=>{let{bookKey:r}=t.detail;G.current&&e===r&&ep(e)},eu=(0,x3.useCallback)(async()=>{let e=G.current;if(e&&(x?(w(!1),S(!0),await e.pause()):_&&(w(!0),S(!1),"paused"===e.state?await e.resume():await e.start()),X.current)){let e=X.current;e instanceof wU?await e.updatePlaybackState({playing:!x}):e.playbackState=x?"paused":"playing"}},[x,_]),ed=(0,x3.useCallback)(async(e=!1)=>{let t=G.current;t&&await t.backward(e)},[]),ef=(0,x3.useCallback)(async(e=!1)=>{let t=G.current;t&&await t.forward(e)},[]),eh=(0,x3.useCallback)(async()=>{let e=G.current;e&&(w(!1),S(!0),await e.pause())},[]),ep=(0,x3.useCallback)(async e=>{let t=G.current;t&&(await t.shutdown(),G.current=null,Y(null),u(e)?.deselect(),w(!1),j(!1),k(!1)),n?.isIOSApp&&await (0,wJ.invokeUseBackgroundAudio)({enabled:!1}),n?.isMobile&&et(),await en(),b(e,!1)},[n]),eb=(0,x3.useCallback)(oz(async e=>{let t=G.current;t&&("playing"===t.state?(await t.stop(),await t.setRate(e),await t.start()):await t.setRate(e))},3e3),[]),eg=(0,x3.useCallback)(oz(async(e,t)=>{let r=G.current;r&&("playing"===r.state?(await r.stop(),await r.setVoice(e,t),await r.start()):await r.setVoice(e,t))},3e3),[]),em=async e=>{let t=G.current;return t?t.getVoices(e):[]},ev=()=>{let e=G.current;return e?e.getVoiceId():""},ey=(e,t)=>{I(t),D&&clearTimeout(D),t>0?(z(setTimeout(()=>{ep(e)},1e3*t)),B(Date.now()+1e3*t)):B(0)},ew=()=>{let t=f(e);t.showTTSBar=!t.showTTSBar,M(t.showTTSBar),t.showTTSBar&&j(!1),p(e,t)},eS=()=>{if(W.current){let e=W.current.getBoundingClientRect(),t=W.current.parentElement?.getBoundingClientRect()||document.documentElement.getBoundingClientRect(),r={dir:"up",point:{x:e.left+e.width/2-t.left,y:e.top-12}};R(wZ(r,t,V,q,H)),O(r)}},eE=()=>{eS(),!N&&G.current&&y(G.current.getSpeakingLang()||v),j(e=>!e)},ek=()=>{j(!1)};return(0,x3.useEffect)(()=>{let{current:e}=X;e&&(e.setActionHandler("play",()=>{eu()}),e.setActionHandler("pause",()=>{eu()}),e.setActionHandler("stop",()=>{eh()}),e.setActionHandler("seekforward",()=>{ef(!0)}),e.setActionHandler("seekbackward",()=>{ed(!0)}),e.setActionHandler("nexttrack",()=>{ef()}),e.setActionHandler("previoustrack",()=>{ed()}))},[eu,eh,ef,ed]),(0,x3.useEffect)(()=>{if(!W.current||!N)return;let e=W.current.parentElement;if(!e)return;let t=new ResizeObserver(()=>{eS()});return t.observe(e),()=>{t.disconnect()}},[N]),(0,x3.useEffect)(()=>(c?(F.current&&(clearTimeout(F.current),F.current=null),F.current=setTimeout(()=>{U(!0)},100)):(F.current&&(clearTimeout(F.current),F.current=null),F.current=setTimeout(()=>{U(!1)},5e3)),()=>{F.current&&clearTimeout(F.current)}),[c]),(0,x2.jsxs)(x2.Fragment,{children:[N&&(0,x2.jsx)(iq,{onDismiss:ek}),(N||E&&$)&&(0,x2.jsx)("div",{ref:W,className:h("absolute h-12 w-12","transition-transform duration-300",m?.rtl?"left-8":"right-6",!n?.hasSafeAreaInset&&"bottom-[70px] sm:bottom-14"),style:{bottom:n?.hasSafeAreaInset?`${.33*(a?.bottom||0)+(c?70:52)}px`:void 0},children:(0,x2.jsx)(_a,{isPlaying:x,ttsInited:J,onClick:eE})}),N&&A&&T&&J&&(0,x2.jsx)(w4,{width:V,height:q,position:A,trianglePosition:T,className:"bg-base-200 flex shadow-lg",onDismiss:ek,children:(0,x2.jsx)(_n,{bookKey:e,ttsLang:v,isPlaying:x,timeoutOption:L,timeoutTimestamp:P,onTogglePlay:eu,onBackward:ed,onForward:ef,onSetRate:eb,onGetVoices:em,onSetVoice:eg,onGetVoiceId:ev,onSelectTimeout:ey,onToogleTTSBar:ew})}),E&&C&&J&&(0,x2.jsx)(_c,{bookKey:e,isPlaying:x,onBackward:ed,onTogglePlay:eu,onForward:ef,gridInsets:t})]})},_p=({bookKey:e,bookFormat:t,section:r,pageinfo:n,isHoveredAnim:i,gridInsets:a})=>{let o=eU(),{appService:s}=(0,xd.useEnv)(),{getConfig:l,setConfig:c,getBookData:u}=ex(),{hoveredBookKey:d,setHoveredBookKey:f}=e_(),{getView:p,getViewState:b,getProgress:g,getViewSettings:m}=e_(),{isSideBarVisible:v,setSideBarVisible:y}=ek(),{acquireBackKeyInterception:x,releaseBackKeyInterception:w}=eO(),_=p(e),S=l(e),E=u(e),k=b(e),N=g(e),j=m(e),[C,M]=(0,xu.useState)(""),A=d===e?C:"",R=d===e,T=(_?.renderer.getContents()??[]).some(({doc:e})=>e?.body?.style.cursor==="pointer"),O=(0,xu.useMemo)(()=>"PDF"===t?r:n,[t,r,n]),L=!!O&&O.total>0&&O.current>=0,I=(0,xu.useMemo)(()=>L&&O.total>0&&O.current>=0?(O.current+1)/O.total:0,[L,O]),P=(0,xu.useMemo)(()=>aM(e=>{_?.goToFraction(e/100)},100),[_]),B=(0,xu.useCallback)(()=>{lg(_,j,"left","page")},[_,j]),D=(0,xu.useCallback)(()=>{lg(_,j,"right","page")},[_,j]),z=(0,xu.useCallback)(()=>{_?.renderer.prevSection?.()},[_]),F=(0,xu.useCallback)(()=>{_?.renderer.nextSection?.()},[_]),$=(0,xu.useCallback)(()=>{_?.history.back()},[_]),U=(0,xu.useCallback)(()=>{_?.history.forward()},[_]),H=(0,xu.useCallback)(async()=>{if(!_||!N||!k)return;let t=k.ttsEnabled?"tts-stop":"tts-speak";eR.dispatch(t,{bookKey:e})},[_,N,k,e]),V=(0,xu.useCallback)(t=>{M(e=>e===t?"":t),"tts"===t?(k?.ttsEnabled&&f(""),H()):"toc"===t?(f(""),S?.viewSettings&&c(e,{viewSettings:{...S.viewSettings,sideBarTab:"toc"}}),y(!0)):"note"===t&&(f(""),y(!0),S?.viewSettings&&c(e,{viewSettings:{...S.viewSettings,sideBarTab:"annotations"}}))},[S,e,k?.ttsEnabled,c,y,f,H]),q=(0,xu.useMemo)(()=>({onPrevPage:B,onNextPage:D,onPrevSection:z,onNextSection:F,onGoBack:$,onGoForward:U,onProgressChange:P}),[B,D,z,F,$,U,P]),W=(0,xu.useCallback)(e=>{if(e instanceof CustomEvent){if("Back"===e.detail.keyName)return f(""),!0}else"Escape"===e.key&&f(""),e.stopPropagation();return!1},[f]);(0,xu.useEffect)(()=>{if(s?.isAndroidApp)return d&&(x(),eR.onSync("native-key-down",W)),()=>{d&&(w(),eR.offSync("native-key-down",W))}},[d]);let K={bookKey:e,gridInsets:a,actionTab:A,progressValid:L,progressFraction:I,navigationHandlers:q,onSetActionTab:V,onSpeakText:H},G=j?.vertical&&j?.scrolled||E?.isFixedLayout&&j?.zoomLevel&&j.zoomLevel>100,X=h("footer-bar shadow-xs bottom-0 z-10 flex w-full flex-col","sm:h-[52px] sm:justify-center","sm:bg-base-100 border-base-300/50 border-t sm:border-none","transition-[opacity,transform] duration-300",window.innerWidth<640?"fixed":"absolute",s?.hasRoundedWindow&&"rounded-window-bottom-right",!v&&s?.hasRoundedWindow&&"rounded-window-bottom-left",i&&"hover-bar-anim",G&&"sm:!bottom-3 sm:!h-10 sm:justify-end",R?"pointer-events-auto translate-y-0 opacity-100":"pointer-events-none translate-y-full opacity-0 sm:translate-y-0"),Z=s?.isMobile||window.innerWidth<640;return(0,xc.jsxs)(xc.Fragment,{children:[(0,xc.jsx)("div",{role:"none",className:h("absolute bottom-0 left-0 z-10 flex h-[52px] w-full",G&&"sm:!bottom-3 sm:!h-7",Z||T?"pointer-events-none":""),onMouseEnter:()=>!Z&&f(e),onTouchStart:()=>!Z&&f(e)}),(0,xc.jsxs)("div",{role:"group","aria-label":o("Footer Bar"),className:X,dir:j?.rtl?"rtl":"ltr",onFocus:()=>!s?.isMobile&&f(e),onMouseLeave:()=>window.innerWidth>=640&&f(""),children:[(0,xc.jsx)(xX,{...K}),(0,xc.jsx)(x1,{...K})]}),R&&G&&(0,xc.jsx)("div",{className:"bg-base-100 pointer-events-none absolute bottom-0 left-0 hidden h-3 w-full sm:block"}),(0,xc.jsx)(_h,{bookKey:e,gridInsets:a})]})};var _b=a,_g=p,_m=l;let _v=({bookKey:e,section:t,pageinfo:r,timeinfo:n,horizontalGap:i,contentInsets:a,gridInsets:o})=>{let s=eU(),{envConfig:l,appService:c}=(0,_m.useEnv)(),{getBookData:u}=ex(),{getView:d,getViewSettings:f}=e_(),p=d(e),b=u(e),g=f(e),m=g.vertical&&g.doubleBorder,v=g.scrolled,y=g.vertical,x=g.isEink,{progressStyle:w}=g,_="fraction"===w?y?"{current}  {total}":"{current} / {total}":"{percent}%",S=localStorage?.getItem("i18nextLng")||"",E=y&&S.toLowerCase().startsWith("zh"),k=b?.isFixedLayout?t:r,N=xQ(k?.current,k?.total,_,E,S),j=n?s("{{time}} min left in chapter",{time:x0(Math.round(n.section),E,S)}):"",{page:C=0,pages:M=0}=p?.renderer||{},A=M-1>C?E?s("{{number}} pages left in chapter",{number:x0(M-C-1,E,S)}):s("{{count}} pages left in chapter",{count:M-C-1}):"",[R,T]=(0,_g.useState)(g.progressInfoMode),O=()=>{if(!g.tapToToggleFooter)return;let e=g.showRemainingTime||g.showRemainingPages,t=g.showProgressInfo,r=["all","remaining","progress","none"],n=r.indexOf(R);for(let i=1;i<=r.length;i++){let a=(n+i)%r.length,o=r[a],s={remaining:("all"===R||"remaining"===R)&&e,progress:("all"===R||"progress"===R)&&t},l={remaining:("all"===o||"remaining"===o)&&e,progress:("all"===o||"progress"===o)&&t};if(s.remaining!==l.remaining||s.progress!==l.progress)return void T(o)}let i=(n+1)%r.length;T(r[i])};(0,_g.useEffect)(()=>{l4(l,e,"progressInfoMode",R)},[R]);let L=c?.isMobile||window.innerWidth<640;return(0,_b.jsx)("div",{role:"presentation",className:h("progressinfo absolute bottom-0 flex items-center justify-between font-sans",x?"text-sm font-normal":"text-neutral-content text-xs font-extralight",y?"writing-vertical-rl":"w-full",v&&!y&&"bg-base-100",L?"pointer-events-auto":"pointer-events-none"),onClick:()=>O(),"aria-label":[k?s("On {{current}} of {{total}} page",{current:k.current+1,total:k.total}):"",j,A].filter(Boolean).join(", "),style:y?{bottom:`${(a.bottom-o.bottom)*1.5}px`,left:m?`calc(${a.left}px)`:`calc(${Math.max(0,a.left-32)}px)`,width:m?"32px":`${a.left}px`,height:`calc(100% - ${(a.top+a.bottom)/2*3}px)`}:{paddingInlineStart:`calc(${i/2}% + ${a.left/2}px)`,paddingInlineEnd:`calc(${i/2}% + ${a.right/2}px)`,paddingBottom:c?.hasSafeAreaInset?`${.33*o.bottom}px`:0},children:(0,_b.jsxs)("div",{"aria-hidden":"true",className:h("flex items-center justify-between",y?"h-full":"h-[52px] w-full"),children:[("all"===R||"remaining"===R)&&(0,_b.jsx)(_b.Fragment,{children:g.showRemainingTime?(0,_b.jsx)("span",{className:"text-start",children:j}):g.showRemainingPages?(0,_b.jsx)("span",{className:"text-start",children:A}):null}),("all"===R||"progress"===R)&&(0,_b.jsx)(_b.Fragment,{children:g.showProgressInfo&&(0,_b.jsx)("span",{className:h("text-end",y?"mt-auto":"ms-auto"),children:N})})]})})};var _y=a,_x=y;let _w=({})=>{let{safeAreaInsets:e}=(0,_x.useThemeStore)();return(0,_y.jsx)("div",{className:h("ribbon absolute inset-0 z-10 flex w-8 justify-center sm:w-6"),style:{height:`${(e?.top||0)+44}px`},children:(0,_y.jsx)("svg",{width:"100%",height:"100%",preserveAspectRatio:"none",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",shapeRendering:"geometricPrecision",imageRendering:"optimizeQuality",children:(0,_y.jsx)("polygon",{fill:"#F44336",points:"100 100, 50 78, 0 100, 0 0, 100 0"})})})};var __=a,_S=p,_E=hl,_k=wP,_N=l,_j=S,_C=y,_M=x,_A=iB,_R=p,_T=s,_O=R;let _L=e=>{let{user:t}=(0,_T.useAuth)(),{syncedNotes:r,syncNotes:n,lastSyncedAtNotes:i}=gD(e),{getConfig:a,setConfig:o,getBookData:s}=ex(),l=a(e),c=(0,_R.useCallback)(()=>{let r=a(e),n=s(e)?.book;if(!r?.location||!n||!t)return{};let o=(r.booknotes??[]).filter(e=>i<e.updatedAt||i<(e.deletedAt??0));return o.forEach(e=>{e.bookHash=n.hash,e.metaHash=n.metaHash}),{notes:o,lastSyncedAt:i}},[t,e,i,a,s]),u=(0,_R.useCallback)(oz(()=>{let t=s(e)?.book;n(c().notes,t?.hash,t?.metaHash,"both")},1e3*_O.SYNC_NOTES_INTERVAL_SEC,{emitLast:!1}),[n]);(0,_R.useEffect)(()=>{l?.location&&t&&u()},[l?.booknotes,u]),(0,_R.useEffect)(()=>{let t=t=>{let r=a(e),n=(r?.booknotes??[]).find(e=>e.id===t.id);if(n)if(n.updatedAt<t.updatedAt||(n.deletedAt??0)<(t.deletedAt??0))return{...n,...t};else return{...t,...n};return t};if(r?.length&&l){let n=s(e)?.book,i=r.filter(e=>e.bookHash===n?.hash||e.metaHash===n?.metaHash);if(!i.length)return;o(e,{booknotes:[...(l.booknotes??[]).filter(e=>!i.some(t=>t.id===e.id)),...i.map(t)]})}},[r])};var _I=p,_P=l,_B=S,_D=p,_z=l,_F=x,_$=S;let _U=({bookKey:e,getAnnotationText:t})=>{let{envConfig:r}=(0,_z.useEnv)(),{settings:n}=(0,_F.useSettingsStore)(),{getConfig:i,saveConfig:a,updateBooknotes:o}=ex(),{getView:s,getViewsById:l,getViewSettings:c}=e_(),u=(0,_D.useRef)(null),d=(0,_D.useRef)(null),f=(0,_D.useRef)(0),h=(0,_D.useRef)(null),p=(0,_D.useRef)((0,_$.uniqueId)()),b=(0,_D.useCallback)(()=>{let t=c(e);return t?.enableAnnotationQuickActions&&t?.annotationQuickAction==="highlight"},[e,c]),g=(0,_D.useCallback)(()=>{h.current&&(l(e.split("-")[0]).forEach(e=>e?.addAnnotation(h.current,!0)),h.current=null)},[e,l]),m=(0,_D.useCallback)((e,t,r)=>{if(e.caretPositionFromPoint){let n=e.caretPositionFromPoint(t,r);if(n)return{node:n.offsetNode,offset:n.offset}}if(e.caretRangeFromPoint){let n=e.caretRangeFromPoint(t,r);if(n)return{node:n.startContainer,offset:n.startOffset}}return null},[]),v=(0,_D.useCallback)((e,t,r)=>{let n=m(e,t,r);if(!n||n.node.nodeType!==Node.TEXT_NODE)return!1;let i=n.node,a=i.length;if(0===a)return!1;let o=e.createRange();try{let e=Math.min(n.offset,a-1),s=Math.min(n.offset+1,a);for(let n of(o.setStart(i,e),o.setEnd(i,s),o.getClientRects())){let e=20;if(t>=n.left-e&&t<=n.right+e&&r>=n.top-e&&r<=n.bottom+e)return!0}}catch{}return!1},[m]),y=(0,_D.useCallback)((e,t,r)=>{let n=m(e,t.x,t.y),i=m(e,r.x,r.y);if(!n||!i)return null;let a=e.createRange();try{if(n.node.compareDocumentPosition(i.node)&Node.DOCUMENT_POSITION_PRECEDING||n.node===i.node&&n.offset>i.offset?(a.setStart(i.node,i.offset),a.setEnd(n.node,n.offset)):(a.setStart(n.node,n.offset),a.setEnd(i.node,i.offset)),a.collapsed)return null;return a}catch(e){return console.warn("Failed to create range:",e),null}},[m]),x=(0,_D.useCallback)((e,t)=>{let r=n.globalReadSettings.highlightStyle,i=n.globalReadSettings.highlightStyles[r];return{id:p.current,type:"annotation",cfi:e,style:r,color:i,text:t??"",note:"",createdAt:Date.now(),updatedAt:Date.now()}},[]),w=(0,_D.useCallback)((e,t,r)=>!!b()&&0===r.button&&!!v(e,r.clientX,r.clientY)&&(u.current={x:r.clientX,y:r.clientY},d.current=e,f.current=t,h.current=null,p.current=(0,_$.uniqueId)(),!0),[b,v]),_=(0,_D.useCallback)((t,r,n)=>{if(!b())return!1;let i=s(e);if(!u.current||!d.current||!i)return!1;let a={x:n.clientX,y:n.clientY},o=u.current,c=Math.abs(a.x-o.x),f=Math.abs(a.y-o.y),p=Math.sqrt(Math.pow(c,2)+Math.pow(f,2));if(p<20||c/f<5&&f/c<5&&p<30)return!1;let m=y(t,o,a);if(!m)return!1;let v=i.getCFI(r,m);if(!v)return!1;g();let w=x(v);return l(e.split("-")[0]).forEach(e=>e?.addAnnotation(w)),h.current=w,!0},[b,y]),S=(0,_D.useCallback)(()=>!!b()&&(u.current=null,d.current=null,g(),!0),[b,g]),E=(0,_D.useCallback)(async(c,f,h)=>{if(!b())return!1;let p=s(e);if(!u.current||!p)return u.current=null,d.current=null,g(),!1;let m={x:h.clientX,y:h.clientY},v=u.current;if(u.current=null,d.current=null,10>Math.sqrt(Math.pow(m.x-v.x,2)+Math.pow(m.y-v.y,2)))return g(),!1;let w=y(c,v,m);if(!w)return g(),!1;let _=await t(w),S=p.getCFI(f,w);if(!_||!S||0===_.trim().length)return g(),!1;g();let E=x(S,_);l(e.split("-")[0]).forEach(e=>e?.addAnnotation(E));let{booknotes:k=[]}=i(e),N=k.findIndex(e=>e.cfi===S&&"annotation"===e.type&&e.style&&!e.deletedAt);-1!==N?k[N]={...k[N],...E,id:k[N].id}:k.push(E);let j=o(e,k);return j&&a(r,e,j,n),!0},[b,y,t,g]);return{isInstantAnnotationEnabled:b,handleInstantAnnotationPointerDown:w,handleInstantAnnotationPointerMove:_,handleInstantAnnotationPointerCancel:S,handleInstantAnnotationPointerUp:E,cancelInstantAnnotation:(0,_D.useCallback)(()=>{u.current=null,d.current=null,g()},[g])}},_H=(e,t,r,n)=>{let{appService:i}=(0,_P.useEnv)(),{getView:a,getViewSettings:o}=e_(),s=a(e),l=(0,_B.getOSPlatform)(),c=(0,_I.useRef)(!1),u=(0,_I.useRef)(!1),d=(0,_I.useRef)(!1),f=(0,_I.useRef)(!1),h=(0,_I.useRef)(null),p=(0,_I.useRef)("mouse"),b=(0,_I.useRef)(!1),g=(0,_I.useRef)(!1),{isInstantAnnotationEnabled:m,handleInstantAnnotationPointerDown:v,handleInstantAnnotationPointerMove:y,handleInstantAnnotationPointerCancel:x,handleInstantAnnotationPointerUp:w}=_U({bookKey:e,getAnnotationText:r,setSelection:t}),_=e=>e&&e.toString().trim().length>0&&e.rangeCount>0,S=async(n,i,a=!1)=>{d.current=!0;let o=n.getRangeAt(0);a&&(n.removeAllRanges(),n.addRange(o)),t({key:e,text:await r(o),cfi:s?.getCFI(i,o),range:o,index:i})},E=async(n,i)=>{d.current=!0;let a=n.getRangeAt(0);setTimeout(()=>{n.removeAllRanges(),setTimeout(async()=>{d.current&&(n.addRange(a),t({key:e,text:await r(a),cfi:s?.getCFI(i,a),range:a,index:i}))},30)},30)},k=e=>{b.current=!0,g.current=!1,s&&(s.renderer.scrollLocked=!0),e.target.style.userSelect="none"},N=e=>{b.current=!1,g.current=!1,s&&(s.renderer.scrollLocked=!1),e.target.style.userSelect=""},j=(e,t,r)=>{p.current=r.pointerType,m()&&v(e,t,r)&&(r.preventDefault(),k(r))},C=(e,t,r)=>{b.current&&(r.preventDefault(),g.current=y(e,t,r))},M=(e,t,r)=>{b.current&&(N(r),x())},A=async(e,t,r)=>{if(b.current&&r){if(N(r),await w(e,t,r)){d.current=!0;return}r.target?.dispatchEvent(new MouseEvent("mousedown",{...r,bubbles:!0,cancelable:!0}))}let n=e.getSelection();if(_(n)){let e=r&&wG(n,r),a="ios"===l||i?.isIOSApp;e&&a?E(n,t):e&&(u.current=!0,S(n,t,!0))}},R=()=>{f.current=!0},T=e=>{b.current&&g.current&&e.preventDefault()},O=()=>{f.current=!1},L=(e,t)=>{if("android"!==l||!i?.isAndroidApp)return;let r=e.getSelection();_(r)?(h.current||(h.current=s?.renderer?.start||null),S(r,t,!1)):h.current=null},I=()=>{if("android"!==l||!i?.isAndroidApp)return;let t=o(e);!t?.scrolled&&d.current&&s?.renderer?.containerPosition&&h.current&&(console.warn("Keep container position",h.current),s.renderer.containerPosition=h.current)},P=e=>{setTimeout(()=>{e&&!c.current&&(u.current=!1),c.current=e},500)},B=()=>{u.current=!0},D=e=>i?.isMobile||"touch"===p.current||"pen"===p.current?(e.preventDefault(),e.stopPropagation(),!1):void 0;return(0,_I.useEffect)(()=>{let e=()=>u.current?(u.current=!1,!0):d.current?(n(),d.current=!1,s?.deselect(),!0):!!c.current&&(n(),!0);return eR.onSync("iframe-single-click",e),()=>{eR.offSync("iframe-single-click",e)}},[]),{isTextSelected:d,handleScroll:I,handleTouchStart:R,handleTouchMove:T,handleTouchEnd:O,handlePointerDown:j,handlePointerMove:C,handlePointerCancel:M,handlePointerUp:A,handleSelectionchange:L,handleShowPopup:P,handleUpToPopup:B,handleContextmenu:D}},_V=(e,t)=>{try{let r=t.trim();if(!r)return!1;let n=/[\p{L}\p{N}\p{M}_]/u,i=/[\p{Script=Han}\p{Script=Hiragana}\p{Script=Katakana}\p{Script=Hangul}]/u;if(!n.test(r))return!1;if(i.test(r)||/[\s\p{P}\p{S}]/u.test(r))return!0;let{charBefore:a,charAfter:o}=_W(e),s=e=>n.test(e);return(!a||!s(a))&&(!o||!s(o))}catch(e){return console.warn("Failed to check whole word:",e),/[\p{L}\p{N}\p{M}_]/u.test(t)}},_q=e=>/^[\p{P}\p{S}\s]+$/u.test(e),_W=e=>{let t="",r="";try{let n=e.startContainer;if(n.nodeType===Node.TEXT_NODE){let r=n;if(e.startOffset>0)t=r.textContent?.charAt(e.startOffset-1)||"";else{let e=n.previousSibling;for(;e&&e.nodeType!==Node.TEXT_NODE;)e=e.previousSibling;if(e?.nodeType===Node.TEXT_NODE){let r=e.textContent||"";t=r.charAt(r.length-1)}}}let i=e.endContainer;if(i.nodeType===Node.TEXT_NODE){let t=i,n=t.textContent||"";if(e.endOffset<n.length)r=n.charAt(e.endOffset);else{let e=t.nextSibling;for(;e&&e.nodeType!==Node.TEXT_NODE;)e=e.nextSibling;e?.nodeType===Node.TEXT_NODE&&(r=(e.textContent||"").charAt(0))}}}catch(e){console.warn("[getBoundaryChars] Error:",e)}return{charBefore:t,charAfter:r}},_K=e=>e?e.trim().split(/\s+/).filter(Boolean).length:0;var _G=a,_X=p,_Z=y,_Y=x,_J=iB,_Q=p,_0=l,_1=x;let _2=({bookKey:e,annotation:t,getAnnotationText:r,setSelection:n})=>{let{envConfig:i}=(0,_0.useEnv)(),{settings:a}=(0,_1.useSettingsStore)(),{getConfig:o,saveConfig:s,updateBooknotes:l}=ex(),{getView:c,getViewsById:u}=e_(),d=c(e),f=(0,_Q.useRef)(t),[h,p]=(0,_Q.useState)(null),b=(0,_Q.useCallback)((t,r)=>{if(!document.querySelector(`#gridcell-${e}`))return null;let n=Array.from(t.getClientRects());if(0===n.length)return null;let i=n[0],a=n[n.length-1],o=t.commonAncestorContainer.ownerDocument?.defaultView?.frameElement,s=o?.getBoundingClientRect()??{top:0,left:0};return{start:{x:s.left+(r?i.right:i.left),y:s.top+i.top},end:{x:s.left+(r?a.left:a.right),y:s.top+a.bottom}}},[e]),g=(0,_Q.useCallback)(async(t,c,h,g)=>{if(!f.current||!d)return;let m=d.renderer.getContents();if(!m||0===m.length)return;let v=(e,t,r)=>{let n=e.defaultView?.frameElement,i=n?.getBoundingClientRect()??{top:0,left:0},a=t-i.left,o=r-i.top;if(e.caretPositionFromPoint){let t=e.caretPositionFromPoint(a,o);if(t)return{node:t.offsetNode,offset:t.offset}}if(e.caretRangeFromPoint){let t=e.caretRangeFromPoint(a,o);if(t)return{node:t.startContainer,offset:t.startOffset}}return null},y=null,x=null,w=null,_=0;for(let e of m){let{doc:r,index:n}=e;if(!r)continue;let i=v(r,t.x,t.y),a=v(r,c.x,c.y);if(i&&a){y=i,x=a,w=r,_=n??0;break}}if(!y||!x||!w)return;let S=w.createRange();try{if(y.node.compareDocumentPosition(x.node)&Node.DOCUMENT_POSITION_PRECEDING||y.node===x.node&&y.offset>x.offset?(S.setStart(x.node,x.offset),S.setEnd(y.node,y.offset)):(S.setStart(y.node,y.offset),S.setEnd(x.node,x.offset)),S.collapsed)return void console.warn("Range is collapsed")}catch(e){console.warn("Failed to create range:",e);return}let E=b(S,h);E&&p(E);let k=d.getCFI(_,S),N=await r(S);if(k&&N){let{booknotes:t=[]}=o(e),r=t.findIndex(e=>e.id===f.current.id&&!e.deletedAt);if(-1!==r){let o={...t[r],cfi:k,text:N,updatedAt:Date.now()},c=u(e.split("-")[0]);if(c.forEach(e=>e?.addAnnotation(f.current,!0)),c.forEach(e=>e?.addAnnotation(o)),f.current=o,!g){t[r]=o;let c=l(e,t);c&&s(i,e,c,a),n({key:e,annotated:!0,text:N,cfi:k,range:S,index:_})}}}},[e,b,r,n]);return{handlePositions:h,setHandlePositions:p,getHandlePositionsFromRange:b,handleAnnotationRangeChange:g}},_3=({position:e,isVertical:t,type:r,color:n,onDragStart:i,onDrag:a,onDragEnd:o})=>{let s=(0,_X.useRef)(!1),l=(0,_J.useResponsiveSize)(24),c=(0,_J.useResponsiveSize)(8),u=(0,_J.useResponsiveSize)(12),d=(0,_X.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),s.current=!0,i(),e.target.setPointerCapture(e.pointerId)},[i]),f=(0,_X.useCallback)(e=>{s.current&&(e.preventDefault(),e.stopPropagation(),a({x:e.clientX,y:e.clientY}))},[a]),p=(0,_X.useCallback)(e=>{s.current&&(e.preventDefault(),e.stopPropagation(),s.current=!1,e.target.releasePointerCapture(e.pointerId),o())},[o]);return(0,_G.jsx)("div",{className:"pointer-events-auto absolute z-50 cursor-grab touch-none active:cursor-grabbing",style:{left:t&&"start"===r?e.x-l/2+u/4:e.x-l/2,top:t?"start"===r?e.y-l+u/2:e.y-l/2-u/2:"start"===r?e.y-l:e.y-l/2-u/8,width:l,height:l+u},onPointerDown:d,onPointerMove:f,onPointerUp:p,onPointerCancel:p,children:(0,_G.jsxs)("svg",{width:l,height:l+u,viewBox:`0 0 ${l} ${l+u}`,className:h("start"===r&&"rotate-180"),style:{transform:t?"start"===r?"rotate(270deg)":"rotate(90deg)":"start"===r?"rotate(180deg)":void 0},children:[(0,_G.jsx)("line",{x1:l/2,y1:0,x2:l/2,y2:u,stroke:n,strokeWidth:2,strokeLinecap:"round"}),(0,_G.jsx)("circle",{cx:l/2,cy:u+c,r:c,fill:n})]})})},_4=({bookKey:e,isVertical:t,annotation:r,selection:n,handleColor:i,getAnnotationText:a,setSelection:o,onStartEdit:s})=>{let{settings:l}=(0,_Y.useSettingsStore)(),{isDarkMode:c}=(0,_Z.useThemeStore)(),u=l.globalViewSettings.isEink,d=c?"#ffffff":"#000000",{handlePositions:f,getHandlePositionsFromRange:h,handleAnnotationRangeChange:p}=_2({bookKey:e,annotation:r,getAnnotationText:a,setSelection:o}),b=(0,_X.useRef)(!1),g=yc(l,i)??"#FFFF00",m=(0,_X.useRef)(null),v=(0,_X.useRef)({x:0,y:0}),y=(0,_X.useRef)({x:0,y:0}),[x,w]=(0,_X.useState)({x:0,y:0}),[_,S]=(0,_X.useState)({x:0,y:0});(0,_X.useEffect)(()=>{if(b.current)return;b.current=!0;let e=h(n.range,t);e&&(setTimeout(()=>{w(e.start),S(e.end)},0),v.current=e.start,y.current=e.end)},[r,n,t,h]),(0,_X.useEffect)(()=>{f&&!m.current&&(setTimeout(()=>{w(f.start),S(f.end)},0),v.current=f.start,y.current=f.end)},[f]);let E=(0,_X.useCallback)(()=>{m.current="start",s()},[s]),k=(0,_X.useCallback)(()=>{m.current="end",s()},[s]),N=(0,_X.useCallback)(e=>{w(e),v.current=e,p(e,y.current,t,!0)},[t,p]),j=(0,_X.useCallback)(e=>{S(e),y.current=e,p(v.current,e,t,!0)},[t,p]),C=(0,_X.useCallback)(()=>{m.current=null,p(v.current,y.current,t,!1)},[t,p]);return 0===x.x&&0===x.y?null:(0,_G.jsxs)("div",{className:"pointer-events-none fixed inset-0 z-50",children:[(0,_G.jsx)(_3,{position:x,isVertical:t,type:"start",color:u?d:g,onDragStart:E,onDrag:N,onDragEnd:C}),(0,_G.jsx)(_3,{position:_,isVertical:t,type:"end",color:u?d:g,onDragStart:k,onDrag:j,onDragEnd:C})]})};var _6=a,_5=a,_8=p;let _9=({showTooltip:e,tooltipText:t,disabled:r,Icon:n,onClick:i})=>{let[a,o]=(0,_8.useState)(!1),s=()=>{o(!0),i()};return(0,_5.jsx)("div",{className:"lg:tooltip lg:tooltip-bottom",title:!a&&e?t:void 0,children:(0,_5.jsx)("button",{onClick:s,className:h("flex h-8 min-h-8 w-8 items-center justify-center p-0",r?"cursor-not-allowed opacity-50":"not-eink:hover:bg-gray-500 eink:hover:border rounded-md"),disabled:r,children:(0,_5.jsx)(n,{})})})};var _7=a,Se=hu,St=p,Sr=l,Sn=iB;let Si=({bookKey:e,isVertical:t,notes:r,toolsVisible:n,triangleDir:i,popupWidth:a,popupHeight:o,onDismiss:s})=>{let{appService:l}=(0,Sr.useEnv)(),{getConfig:c,setConfig:u}=ex(),{setHoveredBookKey:d}=e_(),{setSideBarVisible:f}=ek(),p=c(e),b=(0,Sn.useResponsiveSize)(250),g=(0,St.useMemo)(()=>[...r].sort((e,t)=>t.updatedAt-e.updatedAt),[r]),m=t=>{t.id&&(l?.isMobile&&s(),d(""),f(!0),p?.viewSettings&&u(e,{viewSettings:{...p.viewSettings,sideBarTab:"annotations"}}))};return(0,_7.jsx)("div",{className:h("annotation-notes absolute flex rounded-lg text-white"),style:{...t?{right:"left"===i?`${n?a+16:0}px`:void 0,left:"right"===i?`${n?a+16:0}px`:void 0,height:`${o}px`,maxWidth:`${b}px`,overflowX:"auto"}:{top:"down"===i?`${n?o+16:0}px`:void 0,bottom:"up"===i?`${n?o+16:0}px`:void 0,width:`${a}px`,maxHeight:`${b}px`,overflowY:"auto"},scrollbarWidth:"thin"},children:(0,_7.jsx)("div",{className:h("flex gap-4",t?"h-full flex-row":"w-full flex-col"),style:t?{display:"grid",gridAutoFlow:"column",gridAutoColumns:"max-content",minWidth:"min-content",height:`${o}px`,maxHeight:`${o}px`}:{},children:g.map((e,r)=>(0,_7.jsx)("div",{role:"none",onClick:()=>m?.(e),className:h("popup-container cursor-pointer rounded-lg bg-gray-600 shadow-lg transition-colors"),style:t?{minWidth:"max-content",height:`${o}px`,maxHeight:`${o}px`}:{},children:e.note&&(0,_7.jsx)("div",{dir:"auto",className:h("m-4 hyphens-auto text-justify font-sans text-sm","not-eink:text-white eink:text-base-content",t&&"writing-vertical-rl"),style:t?{fontFeatureSettings:"'vrt2' 1, 'vert' 1",minWidth:"max-content"}:{},children:(0,_7.jsxs)("div",{className:h("flex flex-col justify-between gap-2"),children:[e.note,(0,_7.jsx)("span",{className:"not-eink:text-white/50 eink:text-base-content/50 text-sm sm:text-xs",children:(0,Se.default)(e.createdAt).fromNow()})]})})},e.id||r))})})};var Sa=a,So=p,Ss=l,Sl=y,Sc=x,Su=iB;let Sd=["highlight","underline","squiggly"],Sf=["red","violet","blue","green","yellow"],Sh=28,Sp=16,Sb=({isVertical:e,popupWidth:t,popupHeight:r,triangleDir:n,selectedStyle:i,selectedColor:a,onHandleHighlight:o})=>{let{envConfig:s}=(0,Ss.useEnv)(),{settings:l}=(0,Sc.useSettingsStore)(),{isDarkMode:c}=(0,Sl.useThemeStore)(),u=l.globalReadSettings,d=l.globalViewSettings.isEink,f=c?"#000000":"#ffffff",p=c?"#ffffff":"#000000",b=u.customHighlightColors,[g,m]=(0,So.useState)(i),[v,y]=(0,So.useState)(a),x=(0,Su.useResponsiveSize)(16),w=(0,Su.useResponsiveSize)(28),_=(0,Su.useResponsiveSize)(Sh),S=(0,Su.useResponsiveSize)(Sp),E=e=>{l6(s,"globalReadSettings",{...u,highlightStyle:e}),m(e),y(u.highlightStyles[e]),o(!0)},k=e=>{l6(s,"globalReadSettings",{...u,highlightStyle:g,highlightStyles:{...u.highlightStyles,[g]:e}}),y(e),o(!0)};return(0,Sa.jsxs)("div",{className:h("highlight-options absolute flex items-center justify-between",e?"flex-col":"flex-row"),style:{width:`${t}px`,height:`${r}px`,...e?{left:`${(_+S)*("left"===n?-1:1)}px`}:{top:`${(_+S)*("up"===n?-1:1)}px`}},children:[(0,Sa.jsx)("div",{className:h("flex gap-2",e?"flex-col":"flex-row"),style:e?{width:w}:{height:w},children:Sd.map(e=>(0,Sa.jsx)("button",{onClick:()=>E(e),className:"not-eink:bg-gray-700 eink-bordered flex items-center justify-center rounded-full p-0",style:{width:w,height:w,minHeight:w},children:(0,Sa.jsx)("div",{style:{width:x,height:x,..."highlight"===e&&"highlight"===g&&{backgroundColor:d?p:b[v],color:d?f:"#d1d5db",paddingTop:"2px"},..."highlight"===e&&"highlight"!==g&&{backgroundColor:"#d1d5db",paddingTop:"2px"},...("underline"===e||"squiggly"===e)&&{color:d?p:"#d1d5db",textDecoration:"underline",textDecorationThickness:"2px",textDecorationColor:g===e?d?p:b[v]:"#d1d5db",..."squiggly"===e&&{textDecorationStyle:"wavy"}}},className:"w-4 p-0 text-center leading-none",children:"A"})},e))}),(0,Sa.jsx)("div",{className:h("not-eink:bg-gray-700 eink-bordered flex items-center justify-center gap-2 rounded-3xl",e?"flex-col py-2":"flex-row px-2"),style:e?{width:w}:{height:w},children:Sf.filter(e=>!d||v===e).map(e=>(0,Sa.jsx)("button",{onClick:()=>k(e),style:{width:x,height:x,backgroundColor:v!==e?b[e]:"transparent"},className:"rounded-full p-0",children:v===e&&(0,Sa.jsx)(as,{size:x,style:{fill:d?p:b[e]}})},e))})]})},Sg=({bookKey:e,dir:t,isVertical:r,buttons:n,notes:i,position:a,trianglePosition:o,highlightOptionsVisible:s,selectedStyle:l,selectedColor:c,popupWidth:u,popupHeight:d,onHighlight:f,onDismiss:p})=>(0,_6.jsx)("div",{dir:t,children:(0,_6.jsx)(w4,{width:r?d:u,height:r?u:d,minHeight:r?u:d,position:a,trianglePosition:o,className:h("selection-popup bg-gray-600 text-white",i.length>0&&"bg-transparent"),triangleClassName:"text-gray-600",onDismiss:p,children:(0,_6.jsxs)("div",{className:h("flex h-full gap-4",r?"flex-row":"flex-col"),children:[(0,_6.jsx)("div",{className:h("selection-buttons flex h-full w-full items-center justify-between p-2",r?"flex-col overflow-y-auto":"flex-row overflow-x-auto",i.length>0&&"hidden"),style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:n.map((e,t)=>!1===e.visible?null:(0,_6.jsx)(_9,{showTooltip:!s,tooltipText:e.tooltipText,Icon:e.Icon,onClick:e.onClick,disabled:e.disabled},t))}),i.length>0?(0,_6.jsx)(Si,{bookKey:e,isVertical:r,notes:i,toolsVisible:!1,triangleDir:o.dir,popupWidth:r?d:u,popupHeight:r?u:d,onDismiss:p}):s&&(0,_6.jsx)(Sb,{isVertical:r,triangleDir:o.dir,popupWidth:r?d:u,popupHeight:r?u:d,selectedStyle:l,selectedColor:c,onHandleHighlight:f})]})})});var Sm=a,Sv=p;let Sy=({word:e,lang:t,position:r,trianglePosition:n,popupWidth:i,popupHeight:a,onDismiss:o})=>{let s=eU(),[l,c]=(0,Sv.useState)(e),u=(0,Sv.useRef)(!1),d=e=>{let t=document.createElement("div");return t.innerHTML=e,t.querySelectorAll('a[rel="mw:WikiLink"]').forEach(e=>{let t=e.getAttribute("title");t&&(e.addEventListener("click",e=>{e.preventDefault(),c(t),u.current=!1}),e.className="text-primary underline cursor-pointer")}),Array.from(t.childNodes)};return(0,Sv.useEffect)(()=>{if(u.current)return;u.current=!0;let e=document.querySelector("main"),r=document.querySelector("footer");(async(t,n)=>{e.innerHTML="",r.dataset.state="loading";try{let i=await fetch(`https://en.wiktionary.org/api/rest_v1/page/definition/${t}`);if(!i.ok)throw Error("Failed to fetch definitions");let a=await i.json(),o=n?a[n]||a.en:a[Object.keys(a)[0]];if(!o||0===o.length)throw Error("No results found");let s=document.createElement("hgroup"),l=document.createElement("h1");l.innerText=t,l.className="text-lg font-bold";let c=document.createElement("p");c.innerText=o[0].language,c.className="text-sm italic opacity-75",s.append(l,c),e.append(s),o.forEach(({partOfSpeech:t,definitions:r})=>{let n=document.createElement("h2");n.innerText=t,n.className="text-base font-semibold mt-4";let i=document.createElement("ol");i.className="pl-8 list-decimal",r.forEach(({definition:e,examples:t})=>{if(!e)return;let r=document.createElement("li"),n=d(e);if(r.append(...n),t){let e=document.createElement("ul");e.className="pl-8 list-disc text-sm italic opacity-75",t.forEach(t=>{let r=document.createElement("li");r.innerHTML=t,e.appendChild(r)}),r.appendChild(e)}i.appendChild(r)}),e.appendChild(n),e.appendChild(i)}),r.dataset.state="loaded"}catch(o){console.error(o),r.dataset.state="error";let n=document.createElement("div");n.className="flex flex-col items-center justify-center w-full h-full text-center absolute inset-0";let i=document.createElement("h1");i.innerText=s("Error"),i.className="text-lg font-bold";let a=document.createElement("p");a.innerHTML=s("Unable to load the word. Try searching directly on {{link}}.",{link:`<a href="https://en.wiktionary.org/w/index.php?search=${encodeURIComponent(t)}" target="_blank" rel="noopener noreferrer" class="text-primary underline">Wiktionary</a>`}),n.append(i,a),e.append(n)}})(l,"string"==typeof t?t:t?.[0])},[s,l,t]),(0,Sm.jsx)("div",{children:(0,Sm.jsx)(w4,{trianglePosition:n,width:i,height:a,position:r,className:"select-text",onDismiss:o,children:(0,Sm.jsxs)("div",{className:"flex h-full flex-col",children:[(0,Sm.jsx)("main",{className:"flex-grow overflow-y-auto p-4 font-sans"}),(0,Sm.jsx)("footer",{className:"mt-auto hidden data-[state=loaded]:block data-[state=error]:hidden data-[state=loading]:hidden",children:(0,Sm.jsx)("div",{className:"flex items-center px-4 py-2 text-sm opacity-60",children:"Source: Wiktionary (CC BY-SA)"})})]})})})};var Sx=a,Sw=p;let S_=({text:e,lang:t,position:r,trianglePosition:n,popupWidth:i,popupHeight:a,onDismiss:o})=>{let s=eU(),l=(0,Sw.useRef)(!1);return(0,Sw.useEffect)(()=>{if(l.current)return;l.current=!0;let r=document.querySelector("main"),n=document.querySelector("footer"),i=async(e,t)=>{r.innerHTML="",n.dataset.state="loading";try{let i=await fetch(`https://${t}.wikipedia.org/api/rest_v1/page/summary/${encodeURIComponent(e)}`);if(!i.ok)throw Error("Failed to fetch Wikipedia summary");let a=await i.json(),o=document.createElement("hgroup");o.style.color="white",o.style.backgroundPosition="center center",o.style.backgroundSize="cover",o.style.backgroundColor="rgba(0, 0, 0, .4)",o.style.backgroundBlendMode="darken",o.style.borderRadius="6px",o.style.padding="12px",o.style.marginBottom="12px",o.style.minHeight="100px";let s=document.createElement("h1");if(s.innerHTML=a.titles.display,s.className="text-lg font-bold",o.append(s),a.description){let e=document.createElement("p");e.innerText=a.description,o.appendChild(e)}a.thumbnail&&(o.style.backgroundImage=`url("${a.thumbnail.source}")`);let l=document.createElement("div");l.innerHTML=a.extract_html,l.className="p-2 text-sm",l.dir=a.dir,r.append(o,l),n.dataset.state="loaded"}catch(l){console.error(l);let i=document.createElement("div"),a=document.createElement("h1");a.innerText=s("Error");let o=document.createElement("p");o.innerHTML=s("Unable to load the article. Try searching directly on {{link}}.",{link:`<a href="https://${t}.wikipedia.org/w/index.php?search=${encodeURIComponent(e)}" target="_blank" rel="noopener noreferrer" class="text-primary underline">Wikipedia</a>`}),i.append(a,o),r.appendChild(i),n.dataset.state="error"}},a="string"==typeof t?t:t?.[0];i(e,a?a.split("-")[0]:"en")},[s,e,t]),(0,Sx.jsx)("div",{children:(0,Sx.jsx)(w4,{width:i,height:a,position:r,trianglePosition:n,className:"select-text",onDismiss:o,children:(0,Sx.jsxs)("div",{className:"text-base-content flex h-full flex-col pt-2",children:[(0,Sx.jsx)("main",{className:"flex-grow overflow-y-auto px-2 font-sans"}),(0,Sx.jsx)("footer",{className:"mt-auto hidden data-[state=loaded]:block data-[state=error]:hidden data-[state=loading]:hidden",children:(0,Sx.jsx)("div",{className:"flex items-center px-4 py-2 text-sm opacity-60",children:"Source: Wikipedia (CC BY-SA)"})})]})})})};var SS=a,SE=p,Sk=s,SN=x,Sj=R,SC=a;function SM({value:e,onChange:t,options:r,className:n,disabled:i=!1}){return(0,SC.jsx)("select",{value:e,onChange:t,onKeyDown:e=>e.stopPropagation(),className:h("select bg-base-200 h-8 min-h-8 max-w-[60%] truncate rounded-md border-none text-sm",n),disabled:i,style:{textAlignLast:"end"},children:r.map(({value:e,label:t})=>(0,SC.jsx)("option",{value:e,children:t},e))})}let SA=[""],SR=Object.fromEntries(Object.entries(Sj.TRANSLATOR_LANGS).filter(([e])=>!SA.includes(e))),ST=({text:e,position:t,trianglePosition:r,popupWidth:n,popupHeight:i,onDismiss:a})=>{let o=eU(),{token:s}=(0,Sk.useAuth)(),{settings:l,setSettings:c}=(0,SN.useSettingsStore)(),[u,d]=(0,SE.useState)([]),[f,h]=(0,SE.useState)("AUTO"),[p,b]=(0,SE.useState)(l.globalReadSettings.translateTargetLang),[g,m]=(0,SE.useState)(l.globalReadSettings.translationProvider),[v,y]=(0,SE.useState)(null),[x,w]=(0,SE.useState)(null),[_,S]=(0,SE.useState)(!1),[E,k]=(0,SE.useState)(null),{translate:N,translators:j}=nw({provider:g,sourceLang:f,targetLang:p}),C=e=>{h(e.target.value)},M=e=>{l.globalReadSettings.translateTargetLang=e.target.value,c(l),b(e.target.value)},A=e=>{let t=e.target.value,r=ny().filter(e=>(!e.authRequired||!!s)&&!e.quotaExceeded),n=r.find(e=>e.name===t)||r[0];n&&(l.globalReadSettings.translationProvider=n.name,c(l),m(n.name))};return(0,SE.useEffect)(()=>{d(j.map(e=>{let t=e.label;return e.authRequired&&!s?t=`${t} (${o("Login Required")})`:e.quotaExceeded&&(t=`${t} (${o("Quota Exceeded")})`),{name:e.name,label:t}}))},[j]),(0,SE.useEffect)(()=>{S(!0),(async()=>{k(null),y(null);try{let t=e.replaceAll("\n","").trim(),r=(await N([t]))[0];if(!r)throw Error("No translation found");y(r)}catch(e){console.error(e),s?k(o("Unable to fetch the translation. Try again later.")):k(o("Unable to fetch the translation. Please log in first and try again."))}finally{S(!1)}})()},[e,s,f,p,g,N]),(0,SS.jsx)("div",{children:(0,SS.jsxs)(w4,{trianglePosition:r,width:n,minHeight:i,maxHeight:720,position:t,className:"not-eink:text-white grid h-full select-text grid-rows-[1fr,auto,1fr] bg-gray-600",triangleClassName:"text-gray-600",onDismiss:a,children:[(0,SS.jsxs)("div",{className:"overflow-y-auto p-4 font-sans",children:[(0,SS.jsxs)("div",{className:"mb-2 flex items-center justify-between",children:[(0,SS.jsx)("h1",{className:"text-sm font-normal",children:o("Original Text")}),(0,SS.jsx)(SM,{className:"not-eink:bg-gray-600 not-eink:text-white eink:bg-base-100",value:f,onChange:C,options:[{value:"AUTO",label:o("Auto Detect")},...Object.entries(SR).sort((e,t)=>e[1].localeCompare(t[1])).map(([e,t])=>{let r=x&&"AUTO"===f&&"AUTO"===e?`${SR[x]||x} `+o("(detected)"):t;return{value:e,label:r}})]})]}),(0,SS.jsx)("p",{className:"not-eink:text-white/90 text-base",children:e})]}),(0,SS.jsx)("div",{className:"mx-4 flex-shrink-0 border-t border-gray-500/30"}),(0,SS.jsxs)("div",{className:"overflow-y-auto px-4 pb-8 pt-4 font-sans",children:[(0,SS.jsxs)("div",{className:"mb-2 flex items-center justify-between",children:[(0,SS.jsx)("h2",{className:"text-sm font-normal",children:o("Translated Text")}),(0,SS.jsx)(SM,{className:"not-eink:bg-gray-600 not-eink:text-white eink:bg-base-100",value:p,onChange:M,options:[{value:"",label:o("System Language")},...Object.entries(SR).sort((e,t)=>e[1].localeCompare(t[1])).map(([e,t])=>({value:e,label:t}))]})]}),_?(0,SS.jsx)("p",{className:"text-base italic text-gray-500",children:o("Loading...")}):(0,SS.jsx)("div",{children:E?(0,SS.jsx)("p",{className:"text-base text-red-600",children:E}):(0,SS.jsx)("p",{className:"not-eink:text-white/90 text-base",children:v||o("No translation available.")})})]}),(0,SS.jsxs)("div",{className:"absolute bottom-0 flex h-8 w-full items-center justify-between px-4",children:[(0,SS.jsx)("div",{className:"line-clamp-1 text-xs opacity-60",children:g&&!_&&!E&&o("Translated by {{provider}}.",{provider:u.find(e=>e.name===g)?.label})}),(0,SS.jsx)(SM,{className:"not-eink:bg-gray-600 not-eink:text-white eink:bg-base-100",value:g,onChange:A,options:u.map(({name:e,label:t})=>({value:e,label:t}))})]})]})})};var SO=a,SL=p,SI=l;let SP=({bookKey:e,selection:t,position:r,trianglePosition:n,popupWidth:i,popupHeight:a,onConfirm:o,onDismiss:s})=>{let l=eU(),{envConfig:c}=(0,SI.useEnv)(),{getProgress:u,getView:d,recreateViewer:f}=e_(),{addRule:p}=a3(),b=u(e),[g,m]=(0,SL.useState)(""),[v,y]=(0,SL.useState)(!0),[x,w]=(0,SL.useState)(!_q(t?.text||"")),[_,S]=(0,SL.useState)("selection"),[E,k]=(0,SL.useState)(!1),N=(0,SL.useRef)(null);g2({ref:N});let j=e=>{m(e.target.value)},C=e=>{S(e.target.value)},M=async()=>{if(!t)return;let r=t?.range;if(r){let n=_V(r,t?.text||"");if(x&&!n)return void eR.dispatch("toast",{type:"warning",message:'Please select a whole word or uncheck the "Whole word" option.',timeout:5e3});if("selection"===_){r.deleteContents();let e=document.createTextNode(g);r.insertNode(e)}let i={scope:_,pattern:t.text,replacement:g.trim(),cfi:t.cfi,sectionHref:b?.sectionHref,isRegex:!1,enabled:!0,caseSensitive:v,wholeWord:x,onlyForTTS:"selection"!==_?E:void 0};o?.(i),await p(c,e,i),s(),"selection"!==_&&!E&&d(e)&&f(c,e)}},A=[{value:"selection",label:l("Current selection")},{value:"book",label:l("All occurrences in this book")},{value:"library",label:l("All occurrences in your library")}];return(0,SO.jsx)("div",{children:(0,SO.jsxs)(w4,{trianglePosition:n,width:i,minHeight:a,position:r,className:"not-eink:text-gray-400 flex flex-col justify-between rounded-lg bg-gray-700",triangleClassName:"text-gray-700",onDismiss:s,children:[(0,SO.jsxs)("div",{className:"flex flex-col gap-6 p-4",children:[(0,SO.jsxs)("div",{className:"not-eink:text-gray-400 flex gap-1 text-xs",children:[(0,SO.jsx)("span",{className:"text-nowrap",children:l("Selected text:")}),(0,SO.jsxs)("span",{className:"not-eink:text-yellow-300 line-clamp-1 select-text break-words font-medium",children:['"',t?.text||"",'"']})]}),(0,SO.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,SO.jsx)("label",{htmlFor:"replacement-input",className:"text-xs",children:l("Replace with:")}),(0,SO.jsx)("input",{ref:N,type:"text",value:g,onChange:j,onKeyDown:e=>{"Enter"===e.key&&g&&M()},placeholder:l("Enter text..."),className:h("w-full flex-1 rounded-md p-2 text-sm placeholder-gray-400 focus:outline-none focus:ring-0","not-eink:bg-gray-600 not-eink:text-white eink:border eink:border-base-content")}),(0,SO.jsx)("button",{onClick:M,disabled:!g,className:h("btn btn-sm btn-ghost btn-primary disabled:text-base-content/75 text-blue-600 disabled:opacity-75","bg-transparent hover:bg-transparent disabled:bg-transparent"),children:l("Apply")})]})]}),(0,SO.jsxs)("div",{className:"flex flex-wrap items-center gap-4 p-4",children:[(0,SO.jsxs)("label",{className:"flex cursor-pointer items-center gap-2",children:[(0,SO.jsx)("span",{className:"line-clamp-1 text-xs",title:l("Case sensitive:"),children:l("Case sensitive:")}),(0,SO.jsx)("input",{type:"checkbox",className:"toggle toggle-sm bg-gray-500 checked:bg-black hover:bg-gray-500 hover:checked:bg-black",style:{"--tglbg":"#4B5563"},checked:v,onChange:e=>y(e.target.checked)})]}),(0,SO.jsxs)("label",{className:"flex cursor-pointer items-center gap-2",children:[(0,SO.jsx)("span",{className:"line-clamp-1 text-xs",title:l("Whole word:"),children:l("Whole word:")}),(0,SO.jsx)("input",{type:"checkbox",className:"toggle toggle-sm bg-gray-500 checked:bg-black hover:bg-gray-500 hover:checked:bg-black",style:{"--tglbg":"#4B5563"},checked:x,onChange:e=>w(e.target.checked)})]}),(0,SO.jsxs)("label",{className:"flex cursor-pointer items-center gap-2",children:[(0,SO.jsx)("span",{className:"line-clamp-1 text-xs",title:l("Only for TTS:"),children:l("Only for TTS:")}),(0,SO.jsx)("input",{type:"checkbox",disabled:"selection"===_,className:"toggle toggle-sm bg-gray-500 checked:bg-black hover:bg-gray-500 hover:checked:bg-black",style:{"--tglbg":"#4B5563"},checked:E,onChange:e=>k(e.target.checked)})]})]}),(0,SO.jsxs)("div",{className:"flex flex-1 items-center justify-between gap-2 p-4",children:[(0,SO.jsx)("label",{htmlFor:"scope-select",className:"line-clamp-1 text-xs",title:l("Scope:"),children:l("Scope:")}),(0,SO.jsx)(SM,{className:"not-eink:bg-gray-600 eink:bg-base-100 not-eink:text-white max-w-[85%]",value:_,onChange:C,options:A})]})]})})};var SB=a,SD=p,Sz=R,SF=l;let S$=(e,t)=>{let r=(e,t,r)=>{if("date"===t&&"number"==typeof e){let t=new Date(e);return r?r.replace("%Y",t.getFullYear().toString()).replace("%m",String(t.getMonth()+1).padStart(2,"0")).replace("%d",String(t.getDate()).padStart(2,"0")).replace("%H",String(t.getHours()).padStart(2,"0")).replace("%M",String(t.getMinutes()).padStart(2,"0")).replace("%S",String(t.getSeconds()).padStart(2,"0")):t.toLocaleString()}return e},n=(e,t)=>{let r=e.trim().split("."),n=t;for(let e of r)n=n?.[e];return n},i=e,a=i.match(/\{%\s*for\s+(\w+)\s+in\s+(\w+(?:\.\w+)*)\s*%\}/);if(a){let e=a[1],r=a[2],o=0,s=-1,l=a.index+a[0].length;for(let e=l;e<i.length;e++){let t=i.slice(e);if(t.startsWith("{% for "))o++,e+=6;else if(t.startsWith("{% endfor %}")){if(0===o){s=e;break}o--,e+=11}}if(-1!==s){let o=i.slice(0,a.index),c=i.slice(l,s),u=i.slice(s+13),d=n(r,t);return Array.isArray(d)?(i=o+d.map(r=>S$(c,{...t,[e]:r})).join("")+u,S$(i,t)):S$(i=o+u,t)}}return(i=i.replace(/\{%\s*if\s+([^%]+?)\s*%\}([\s\S]*?)\{%\s*endif\s*%\}/g,(e,r,i)=>n(r,t)?S$(i,t):"")).replace(/\{\{\s*([^}|]+?)(?:\s*\|\s*(\w+)(?:\s*\((['"]?)([^)'"]*)\3\))?)?\s*\}\}/g,(e,i,a,o,s)=>{let l=n(i,t);return null==l?"":a?r(l,a,s):String(l)})},SU=({bookKey:e,isOpen:t,bookTitle:r,bookAuthor:n,booknotes:i,booknoteGroups:a,onCancel:o,onExport:s})=>{let l=eU(),{envConfig:c}=(0,SF.useEnv)(),{getViewSettings:u}=e_(),d=u(e),f=`## {{ title }}
**${l("Author")}**: {{ author }}

**${l("Exported from Readest")}**: {{ exportDate }}

---

### ${l("Highlights & Annotations")}

{% for chapter in chapters %}
#### {{ chapter.title }}
{% for annotation in chapter.annotations %}
> {{ annotation.text }}
{% if annotation.note %}
**${l("Note:")}** {{ annotation.note }}
{% endif %}
*${l("Time:")} {{ annotation.timestamp | date('%Y-%m-%d %H:%M') }}*
{% endfor %}

---
{% endfor %}`,[p,b]=(0,SD.useState)(()=>{let e=d?.noteExportConfig||Sz.DEFAULT_NOTE_EXPORT_CONFIG;return e.customTemplate?e:{...e,customTemplate:f}}),[g,m]=(0,SD.useState)(!1),[v,y]=(0,SD.useState)(!1);(0,SD.useEffect)(()=>{let t=p.customTemplate;l4(c,e,"noteExportConfig",{...p,customTemplate:t===f?"":t},!1,!1)},[p,c,e]);let x=(0,SD.useMemo)(()=>{if(p.useCustomTemplate){let e=Object.values(a).sort((e,t)=>e.id-t.id),t={title:r,author:n,exportDate:new Date().toISOString().slice(0,10),chapters:e.map(e=>({title:e.label||l("Untitled"),annotations:e.booknotes.map(e=>({text:e.text||"",note:e.note||"",style:e.style,color:e.color,timestamp:e.updatedAt}))}))};return S$(p.customTemplate,t)}let e=Object.values(a).sort((e,t)=>e.id-t.id),t=[];for(let i of(p.includeTitle&&t.push(`# ${r}`),p.includeAuthor&&n&&(t.push(`**${l("Author")}**: ${n}`),t.push("")),p.includeDate&&(t.push(`**${l("Exported from Readest")}**: ${new Date().toISOString().slice(0,10)}`),t.push("")),(p.includeTitle||p.includeAuthor||p.includeDate)&&(t.push("---"),t.push("")),t.push(`## ${l("Highlights & Annotations")}`),t.push(""),e)){if(p.includeChapterTitles){let e=i.label||l("Untitled");t.push(`### ${e}`)}for(let e of i.booknotes){if(p.includeQuotes&&e.text&&t.push(`> ${e.text}`),p.includeNotes&&e.note&&(t.push(""),t.push(`**${l("Note")}**:: ${e.note}`)),p.includeTimestamp&&e.updatedAt){let r=new Date(e.updatedAt).toLocaleString();t.push(""),t.push(`*${l("Time:")} ${r}*`)}t.push(p.noteSeparator)}p.includeChapterSeparator&&(t.push("---"),t.push(""))}return t.join("\n")},[p,a,r,n,l]),w=(0,SD.useMemo)(()=>x?pN.parse(x):"",[x]),_=e=>{b(t=>({...t,[e]:!t[e]}))},S=()=>{s(x)};return(0,SB.jsx)(iG,{isOpen:t,title:l("Export Annotations"),onClose:o,boxClassName:"sm:!w-[75%] sm:h-auto sm:!max-h-[90vh] sm:!max-w-5xl",contentClassName:"sm:!px-8 sm:!py-2",children:(0,SB.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,SB.jsxs)("div",{className:"space-y-3",children:[(0,SB.jsx)("h3",{className:"font-bold",children:l("Format Options")}),(0,SB.jsxs)("div",{className:h("grid grid-cols-2 gap-x-6 gap-y-3 sm:grid-cols-3",p.useCustomTemplate&&"pointer-events-none opacity-50"),children:[(0,SB.jsxs)("label",{className:"flex cursor-pointer items-center gap-2",children:[(0,SB.jsx)("input",{type:"checkbox",checked:p.includeTitle,onChange:()=>_("includeTitle"),className:"checkbox checkbox-sm",disabled:p.useCustomTemplate}),(0,SB.jsx)("span",{className:"text-sm",children:l("Title")})]}),(0,SB.jsxs)("label",{className:"flex cursor-pointer items-center gap-2",children:[(0,SB.jsx)("input",{type:"checkbox",checked:p.includeAuthor,onChange:()=>_("includeAuthor"),className:"checkbox checkbox-sm",disabled:p.useCustomTemplate}),(0,SB.jsx)("span",{className:"text-sm",children:l("Author")})]}),(0,SB.jsxs)("label",{className:"flex cursor-pointer items-center gap-2",children:[(0,SB.jsx)("input",{type:"checkbox",checked:p.includeDate,onChange:()=>_("includeDate"),className:"checkbox checkbox-sm",disabled:p.useCustomTemplate}),(0,SB.jsx)("span",{className:"text-sm",children:l("Export Date")})]}),(0,SB.jsxs)("label",{className:"flex cursor-pointer items-center gap-2",children:[(0,SB.jsx)("input",{type:"checkbox",checked:p.includeChapterTitles,onChange:()=>_("includeChapterTitles"),className:"checkbox checkbox-sm",disabled:p.useCustomTemplate}),(0,SB.jsx)("span",{className:"text-sm",children:l("Chapter Titles")})]}),(0,SB.jsxs)("label",{className:"flex cursor-pointer items-center gap-2",children:[(0,SB.jsx)("input",{type:"checkbox",checked:p.includeChapterSeparator,onChange:()=>_("includeChapterSeparator"),className:"checkbox checkbox-sm",disabled:p.useCustomTemplate}),(0,SB.jsx)("span",{className:"text-sm",children:l("Chapter Separator")})]}),(0,SB.jsxs)("label",{className:"flex cursor-pointer items-center gap-2",children:[(0,SB.jsx)("input",{type:"checkbox",checked:p.includeQuotes,onChange:()=>_("includeQuotes"),className:"checkbox checkbox-sm",disabled:p.useCustomTemplate}),(0,SB.jsx)("span",{className:"text-sm",children:l("Highlights")})]}),(0,SB.jsxs)("label",{className:"flex cursor-pointer items-center gap-2",children:[(0,SB.jsx)("input",{type:"checkbox",checked:p.includeNotes,onChange:()=>_("includeNotes"),className:"checkbox checkbox-sm",disabled:p.useCustomTemplate}),(0,SB.jsx)("span",{className:"text-sm",children:l("Notes")})]}),(0,SB.jsxs)("label",{className:"flex cursor-pointer items-center gap-2",children:[(0,SB.jsx)("input",{type:"checkbox",checked:p.includeTimestamp,onChange:()=>_("includeTimestamp"),className:"checkbox checkbox-sm",disabled:p.useCustomTemplate}),(0,SB.jsx)("span",{className:"text-sm",children:l("Note Date")})]})]})]}),(0,SB.jsxs)("div",{className:"space-y-3",children:[(0,SB.jsxs)("div",{className:"flex items-center justify-between",children:[(0,SB.jsx)("h3",{className:"font-bold",children:l("Advanced")}),(0,SB.jsx)("button",{onClick:()=>y(!v),className:"text-sm text-blue-500 hover:underline",children:v?l("Hide"):l("Show")})]}),v&&(0,SB.jsxs)("div",{className:"space-y-3",children:[(0,SB.jsxs)("label",{className:"flex cursor-pointer items-center gap-2",children:[(0,SB.jsx)("input",{type:"checkbox",checked:p.useCustomTemplate,onChange:()=>_("useCustomTemplate"),className:"checkbox checkbox-sm"}),(0,SB.jsx)("span",{className:"text-sm font-medium",children:l("Use Custom Template")})]}),p.useCustomTemplate&&(0,SB.jsxs)(SB.Fragment,{children:[(0,SB.jsxs)("div",{className:"space-y-2",children:[(0,SB.jsx)("label",{className:"text-sm font-medium",children:l("Export Template")}),(0,SB.jsx)("textarea",{value:p.customTemplate,onChange:e=>b({...p,customTemplate:e.target.value}),className:"textarea textarea-bordered w-full font-mono text-xs",rows:12,placeholder:f})]}),(0,SB.jsxs)("div",{className:"bg-base-200 space-y-3 rounded-lg p-3 text-xs",children:[(0,SB.jsxs)("div",{children:[(0,SB.jsx)("p",{className:"mb-2 font-bold",children:l("Template Syntax:")}),(0,SB.jsxs)("ul",{className:"space-y-1 font-mono",children:[(0,SB.jsxs)("li",{children:[(0,SB.jsx)("code",{className:"bg-base-300 rounded px-1",children:"{{ variable }}"})," -"," ",l("Insert value")]}),(0,SB.jsxs)("li",{children:[(0,SB.jsx)("code",{className:"bg-base-300 rounded px-1",children:"{{ variable | date }}"})," ","- ",l("Format date (locale)")]}),(0,SB.jsxs)("li",{children:[(0,SB.jsx)("code",{className:"bg-base-300 rounded px-1",children:"{{ variable | date('%Y-%m-%d') }}"})," ","- ",l("Format date (custom)")]}),(0,SB.jsxs)("li",{children:[(0,SB.jsx)("code",{className:"bg-base-300 rounded px-1",children:"{% if variable %}...{% endif %}"})," ","- ",l("Conditional")]}),(0,SB.jsxs)("li",{children:[(0,SB.jsx)("code",{className:"bg-base-300 rounded px-1",children:"{% for item in list %}...{% endfor %}"})," ","- ",l("Loop")]})]})]}),(0,SB.jsxs)("div",{children:[(0,SB.jsx)("p",{className:"mb-2 font-bold",children:l("Available Variables:")}),(0,SB.jsxs)("ul",{className:"space-y-1",children:[(0,SB.jsxs)("li",{children:[(0,SB.jsx)("code",{className:"bg-base-300 rounded px-1",children:"title"})," -"," ",l("Book title")]}),(0,SB.jsxs)("li",{children:[(0,SB.jsx)("code",{className:"bg-base-300 rounded px-1",children:"author"})," -"," ",l("Book author")]}),(0,SB.jsxs)("li",{children:[(0,SB.jsx)("code",{className:"bg-base-300 rounded px-1",children:"exportDate"})," -"," ",l("Export date")]}),(0,SB.jsxs)("li",{children:[(0,SB.jsx)("code",{className:"bg-base-300 rounded px-1",children:"chapters"})," -"," ",l("Array of chapters")]}),(0,SB.jsxs)("li",{className:"ml-4",children:[(0,SB.jsx)("code",{className:"bg-base-300 rounded px-1",children:"chapter.title"})," -"," ",l("Chapter title")]}),(0,SB.jsxs)("li",{className:"ml-4",children:[(0,SB.jsx)("code",{className:"bg-base-300 rounded px-1",children:"chapter.annotations"})," -"," ",l("Array of annotations")]}),(0,SB.jsxs)("li",{className:"ml-8",children:[(0,SB.jsx)("code",{className:"bg-base-300 rounded px-1",children:"annotation.text"})," -"," ",l("Highlighted text")]}),(0,SB.jsxs)("li",{className:"ml-8",children:[(0,SB.jsx)("code",{className:"bg-base-300 rounded px-1",children:"annotation.note"})," -"," ",l("Annotation note")]}),(0,SB.jsxs)("li",{className:"ml-8",children:[(0,SB.jsx)("code",{className:"bg-base-300 rounded px-1",children:"annotation.timestamp"})," -"," ",l("Update time")]})]})]}),(0,SB.jsxs)("div",{children:[(0,SB.jsx)("p",{className:"mb-2 font-bold",children:l("Date Format Tokens:")}),(0,SB.jsxs)("ul",{className:"space-y-1 font-mono",children:[(0,SB.jsxs)("li",{children:[(0,SB.jsx)("code",{className:"bg-base-300 rounded px-1",children:"%Y"})," -"," ",l("Year (4 digits)")]}),(0,SB.jsxs)("li",{children:[(0,SB.jsx)("code",{className:"bg-base-300 rounded px-1",children:"%m"})," -"," ",l("Month (01-12)")]}),(0,SB.jsxs)("li",{children:[(0,SB.jsx)("code",{className:"bg-base-300 rounded px-1",children:"%d"})," - ",l("Day (01-31)")]}),(0,SB.jsxs)("li",{children:[(0,SB.jsx)("code",{className:"bg-base-300 rounded px-1",children:"%H"})," - ",l("Hour (00-23)")]}),(0,SB.jsxs)("li",{children:[(0,SB.jsx)("code",{className:"bg-base-300 rounded px-1",children:"%M"})," -"," ",l("Minute (00-59)")]}),(0,SB.jsxs)("li",{children:[(0,SB.jsx)("code",{className:"bg-base-300 rounded px-1",children:"%S"})," -"," ",l("Second (00-59)")]})]})]})]})]})]})]}),(0,SB.jsxs)("div",{className:"space-y-2",children:[(0,SB.jsxs)("div",{className:"flex items-center justify-between",children:[(0,SB.jsx)("h3",{className:"font-bold",children:l("Preview")}),(0,SB.jsxs)("label",{className:"flex cursor-pointer items-center gap-2",children:[(0,SB.jsx)("input",{type:"checkbox",checked:g,onChange:()=>m(!g),className:"checkbox checkbox-sm"}),(0,SB.jsx)("span",{className:"text-sm",children:l("Show Source")})]})]}),g?(0,SB.jsx)("div",{className:h("bg-base-200 max-h-[40vh] overflow-y-auto rounded-lg p-4 font-mono text-xs","select-text whitespace-pre-wrap break-words"),children:x||l("No content to preview")}):(0,SB.jsx)("div",{className:h("bg-base-200 prose prose-sm max-w-none overflow-y-auto rounded-lg p-4","max-h-[40vh] select-text break-words"),dangerouslySetInnerHTML:{__html:w||`<p class="text-base-content/50">${l("No content to preview")}</p>`}})]}),(0,SB.jsxs)("div",{className:"mt-4 flex justify-end gap-4",children:[(0,SB.jsx)("button",{onClick:o,className:"btn btn-ghost btn-sm",children:l("Cancel")}),(0,SB.jsx)("button",{onClick:S,className:"btn btn-primary btn-sm",disabled:0===i.length,children:l("Export")})]})]})})},SH=({bookKey:e})=>{let t=eU(),{envConfig:r,appService:n}=(0,_N.useEnv)(),{settings:i}=(0,_M.useSettingsStore)(),{isDarkMode:a}=(0,_C.useThemeStore)(),{getConfig:o,saveConfig:s,getBookData:l,updateBooknotes:c}=ex(),{getProgress:u,getView:d,getViewsById:f,getViewSettings:h}=e_(),{setNotebookVisible:p,setNotebookNewAnnotation:b}=eN(),{listenToNativeTouchEvents:g}=eO();_L(e);let m=(0,_j.getOSPlatform)(),v=o(e),y=u(e),x=l(e),w=d(e),_=h(e),S=x.book?.primaryLanguage||"en",E=_S.default.useRef(null),[k,N]=(0,_S.useState)(null),[j,C]=(0,_S.useState)(!1),[M,A]=(0,_S.useState)(!1),[R,T]=(0,_S.useState)(!1),[O,L]=(0,_S.useState)(!1),[I,P]=(0,_S.useState)(!1),[B,D]=(0,_S.useState)(),[z,F]=(0,_S.useState)(),[$,U]=(0,_S.useState)(),[H,V]=(0,_S.useState)(),[q,W]=(0,_S.useState)(),[K,G]=(0,_S.useState)(!1),[X,Z]=(0,_S.useState)(!1),[Y,J]=(0,_S.useState)([]),[Q,ee]=(0,_S.useState)(null),[et,er]=(0,_S.useState)(!1),[en,ei]=(0,_S.useState)(null),[ea,eo]=(0,_S.useState)(i.globalReadSettings.highlightStyle),[es,ec]=(0,_S.useState)(i.globalReadSettings.highlightStyles[ea]),ed=j||M||R||O||I,ef=(0,_A.useResponsiveSize)(10),eh=2*ef+6,ep=window.innerWidth-2*ef,eb=window.innerHeight-2*ef,eg=Math.min(480,ep),em=Math.min(300,eb),ev=Math.min(480,ep),ey=Math.min(265,eb),ew=Math.min(440,ep),eS=Math.min(200,eb),eE=Math.min((0,_A.useResponsiveSize)(300),ep),ek=(0,_A.useResponsiveSize)(44),ej=0,eC=(0,_S.useCallback)(()=>{if(!k||!k.text)return;let t=document.querySelector(`#gridcell-${e}`);if(!t)return;let r=t.getBoundingClientRect(),n=wX(k,r,eh,_.vertical),i=wZ(n,r,_.vertical?ek:eE,_.vertical?eE:ek,ef);"down"===i.dir&&"android"===m&&(n.point.y+=ej,i.point.y+=ej);let a=wZ(n,r,eg,em,ef),o=wZ(n,r,ev,ey,ef),s=wZ(n,r,ew,eS,ef);0!=n.point.x&&0!=n.point.y&&(F(i),U(a),V(o),W(s),D(n))},[k,e,_.vertical]);(0,_S.useEffect)(()=>{eo(i.globalReadSettings.highlightStyle)},[i.globalReadSettings.highlightStyle]),(0,_S.useEffect)(()=>{ec(i.globalReadSettings.highlightStyles[ea])},[i.globalReadSettings.highlightStyles,ea]);let eM=(0,_S.useMemo)(()=>({bookKey:e,viewSettings:h(e),userLocale:(0,_j.getLocale)(),content:"",transformers:["punctuation"],reversePunctuationTransform:!0}),[]),eA=(0,_S.useCallback)(async e=>(eM.content=wY(e,S.startsWith("ja")?["rt"]:[]),await vU(eM)),[S,eM]),eT=(0,_S.useCallback)(oz(()=>{N(null),C(!1),A(!1),T(!1),L(!1),P(!1),ee(null)},500),[]),{isTextSelected:eL,handleScroll:eI,handleTouchStart:eP,handleTouchMove:eB,handleTouchEnd:eD,handlePointerDown:ez,handlePointerMove:eF,handlePointerCancel:e$,handlePointerUp:eH,handleSelectionchange:eV,handleShowPopup:eq,handleUpToPopup:eW,handleContextmenu:eK}=_H(e,N,eA,eT),eG=()=>{eT(),w?.deselect(),eL.current=!1},eX=t=>{let r=t.detail,{doc:i,index:a}=r,o=e=>{C(!1),ee(null),eB(e)},s=e=>{let t=e.detail;"touchstart"===t.type?eP():"touchend"===t.type&&(eD(),eH(i,a))};n?.isAndroidApp&&(g(),eR.on("native-touch",s)),w?.renderer?.addEventListener("scroll",eI),w?.renderer?.addEventListener("scroll",()=>{eC()});let l={passive:!1};r.doc?.addEventListener("touchstart",eP,l),r.doc?.addEventListener("touchmove",o,l),r.doc?.addEventListener("touchend",eD),r.doc?.addEventListener("pointerdown",ez.bind(null,i,a),l),r.doc?.addEventListener("pointermove",eF.bind(null,i,a),l),r.doc?.addEventListener("pointercancel",e$.bind(null,i,a)),r.doc?.addEventListener("pointerup",eH.bind(null,i,a)),r.doc?.addEventListener("selectionchange",eV.bind(null,i,a)),x.book?.format==="PDF"&&r.doc?.addEventListener("contextmenu",t=>{try{let t=i.getSelection?.();if(t&&!t.isCollapsed){let r=t.getRangeAt(0),n=t.toString();n.trim()&&(N({key:e,text:n,range:r,index:a,cfi:w?.getCFI(a,r)}),C(!1),L(!0),A(!1),T(!1))}}catch(e){console.warn("PDF context menu translation failed:",e)}return t.preventDefault(),t.stopPropagation(),!1}),r.doc?.addEventListener("contextmenu",eK)};gN(w,{onLoad:eX,onDrawAnnotation:t=>{let r=h(e),o=r.isEink,{draw:s,annotation:l,doc:c,range:u}=t.detail,{style:d,color:f}=l,p=yc(i,f),b=a?"#000000":"#ffffff",g=a?"#ffffff":"#000000";if(l.note){let{defaultView:e}=c,t=u.startContainer,r=1===t.nodeType?t:t.parentElement,{writingMode:n}=e.getComputedStyle(r);s(_k.Overlayer.bubble,{writingMode:n})}else if("highlight"===d)s(_k.Overlayer.highlight,{color:o?b:p});else if(["underline","squiggly"].includes(d)){let{defaultView:e}=c,t=u.startContainer,i=1===t.nodeType?t:t.parentElement,{writingMode:a,lineHeight:l,fontSize:f}=e.getComputedStyle(i),h=parseFloat(f)||r.defaultFontSize,b=parseFloat(l)||r.lineHeight*h,m=2,v=n?.isMobile?0:-1,y=n?.isMobile?-1:0,x=r.vertical?(b-h)/2-m+v:(b-h)/2-m+y;s(_k.Overlayer[d],{writingMode:a,color:o?g:p,padding:x})}},onShowAnnotation:t=>{let r=t.detail,{value:n,index:i,range:a}=r,{booknotes:s=[]}=o(e),l=n.startsWith(pA),c=l?n.replace(pA,""):n,u=s.filter(e=>"annotation"===e.type&&!e.deletedAt&&e.cfi===c).find(e=>!l&&e.style||l&&e.note);if(!u)return;let{style:d,color:f,text:h,note:p}=u,b={key:e,annotated:!0,text:h??"",note:p??"",rect:l?r.rect:void 0,cfi:c,range:a,index:i};l?(Z(!0),G(!1),ee(null)):(Z(!1),J([]),d&&f&&(eo(d),ec(f)),d&&a&&ee(u)),N(b),eW()}}),(0,_S.useEffect)(()=>{eq(ed)},[ed]),(0,_S.useEffect)(()=>{let t=d(e);if(!t?.renderer)return;let r=()=>{ed&&eC()};return t.renderer.addEventListener("scroll",r),()=>{t.renderer.removeEventListener("scroll",r)}},[e,ed,eC]),(0,_S.useEffect)(()=>(eR.on("export-annotations",e9),()=>{eR.off("export-annotations",e9)}),[]);let eZ=()=>{switch(_.annotationQuickAction){case"copy":eJ(!1),eG();break;case"highlight":eG();break;case"search":e1();break;case"dictionary":e2();break;case"wikipedia":e3();break;case"translate":e4();break;case"tts":e6(!0)}};(0,_S.useEffect)(()=>{if(G(!!(k&&k.annotated)),k&&k.text.trim().length>0){let t=document.querySelector(`#gridcell-${e}`);if(!t)return;let r=t.getBoundingClientRect(),n=wX(k,r,eh,_.vertical),i=wZ(n,r,_.vertical?ek:eE,_.vertical?eE:ek,ef);"down"===i.dir&&"android"===m&&(n.point.y+=ej,i.point.y+=ej);let a=wZ(n,r,eg,em,ef),o=wZ(n,r,ev,ey,ef),s=wZ(n,r,ew,eS,ef);if(0==n.point.x||0==n.point.y)return;F(i),U(a),V(o),W(s),D(n);let{enableAnnotationQuickActions:l,annotationQuickAction:c}=_;l&&c&&eL.current?eZ():eY()}},[k,e]),(0,_S.useEffect)(()=>{if(!y)return;let{location:e}=y,{booknotes:t=[]}=v,r=t.filter(t=>!t.deletedAt&&"annotation"===t.type&&t.style&&pL(t.cfi,e)),n=t.filter(t=>!t.deletedAt&&"annotation"===t.type&&t.note&&t.note.trim().length>0&&pL(t.cfi,e));try{Promise.all(r.map(e=>w?.addAnnotation(e))),Promise.all(n.map(e=>w?.addAnnotation({...e,value:`${pA}${e.cfi}`})))}catch(e){console.warn(e)}},[y]),(0,_S.useEffect)(()=>{v.booknotes&&k?.cfi&&X&&J(v.booknotes.filter(e=>"annotation"===e.type&&!e.deletedAt&&e.cfi===k.cfi).filter(e=>e.note&&e.note.trim().length>0))},[k?.cfi,X,v.booknotes]);let eY=()=>{n?.isMobile||E.current?.focus(),C(!0),L(!1),A(!1),T(!1)},eJ=(a=!0)=>{if(!k||!k.text||(setTimeout(()=>{navigator.clipboard?.writeText(k.text)},100),a&&eG(),!_?.copyToNotebook))return;eR.dispatch("toast",{type:"info",message:t("Copied to notebook"),className:"whitespace-nowrap",timeout:2e3});let{booknotes:o=[]}=v,l=w?.getCFI(k.index,k.range);if(!l)return;let u={id:(0,_j.uniqueId)(),type:"excerpt",cfi:l,text:k.text,note:"",createdAt:Date.now(),updatedAt:Date.now()},d=o.findIndex(e=>e.cfi===l&&"excerpt"===e.type&&!e.deletedAt);-1!==d?o[d]=u:o.push(u);let f=c(e,o);f&&s(r,e,f,i),n?.isMobile||p(!0)},eQ=(t=!1,n)=>{if(!k||!k.text)return;G(!0);let{booknotes:a=[]}=v,o=w?.getCFI(k.index,k.range);if(!o)return;let l=n||i.globalReadSettings.highlightStyle,u=i.globalReadSettings.highlightStyles[l],d={id:(0,_j.uniqueId)(),type:"annotation",cfi:o,style:l,color:u,text:k.text,note:"",createdAt:Date.now(),updatedAt:Date.now()},h=a.findIndex(e=>e.cfi===o&&"annotation"===e.type&&e.style&&!e.deletedAt),p=f(e.split("-")[0]);-1!==h?(p.forEach(e=>e?.addAnnotation(d,!0)),t?(d.id=a[h].id,a[h]=d,p.forEach(e=>e?.addAnnotation(d))):(a[h].deletedAt=Date.now(),eT())):(a.push(d),p.forEach(e=>e?.addAnnotation(d)),N({...k,cfi:o,annotated:!0}));let b=c(e,a);b&&s(r,e,b,i)},e0=()=>{if(!k||!k.text)return;let{sectionHref:e}=y;k.href=e,eQ(!0),p(!0),b(k),eT()},e1=()=>{if(!k||!k.text)return;eG();let t=k.text,r=_.convertChineseVariant;r&&"none"!==r&&(t=el(t,r,!0)),eR.dispatch("search-term",{term:t,bookKey:e})},e2=()=>{k&&k.text&&(C(!1),A(!0))},e3=()=>{k&&k.text&&(C(!1),T(!0))},e4=()=>{k&&k.text&&(C(!1),L(!0))},e6=async(t=!1)=>{k&&k.text&&(C(!1),eR.dispatch("tts-speak",{bookKey:e,range:k.range,oneTime:t}))},e5=()=>{if(k&&k.text&&(C(!1),P(!0),_K(k.text)>30))return void eR.dispatch("toast",{type:"warning",message:t("Word limit of 30 words exceeded."),timeout:3e3})},e8=(0,_S.useCallback)(()=>{C(!1)},[]);lw({onHighlightSelection:()=>{eQ(!1,"highlight")},onUnderlineSelection:()=>{eQ(!1,"underline")},onAnnotateSelection:()=>{e0()},onSearchSelection:()=>{e1()},onCopySelection:()=>{eJ(!1)},onTranslateSelection:()=>{e4()},onDictionarySelection:()=>{e2()},onWikipediaSelection:()=>{e3()},onReadAloudSelection:()=>{e6()},onProofreadSelection:()=>{e5()}},[k?.text]);let e9=async r=>{let{bookKey:n}=r.detail;if(e!==n)return;let{bookDoc:i,book:a}=x;if(!i||!a||!i.toc)return;let{booknotes:s=[]}=o(e),l=s.filter(e=>!e.deletedAt);if(0===l.length)return void eR.dispatch("toast",{type:"info",message:t("No annotations to export"),className:"whitespace-nowrap",timeout:2e3});let c={};for(let e of l){let t=eu(i.toc??[],e.cfi),r=t?.href||"",n=t?.label||"",a=t?.id||0;c[r]||(c[r]={id:a,href:r,label:n,booknotes:[]}),c[r].booknotes.push(e)}Object.values(c).forEach(e=>{e.booknotes.sort((e,t)=>_E.compare(e.cfi,t.cfi))}),ei({booknotes:l,booknoteGroups:c}),er(!0)},e7=async e=>{let{book:r}=x;if(!r)return;setTimeout(()=>{navigator.clipboard?.writeText(e)},100);let i=`${(0,_j.makeSafeFilename)(r.title)}.md`,a=await n?.saveFile(i,e,"text/markdown");eR.dispatch("toast",{type:"info",message:a?t("Exported successfully"):t("Copied to clipboard"),timeout:2e3}),er(!1),ei(null)},te=()=>{er(!1),ei(null)},tt=k?.annotated,tr=yk.map(({type:e,label:r,Icon:n})=>{switch(e){case"copy":return{tooltipText:t(r),Icon:n,onClick:eJ};case"highlight":return{tooltipText:tt?t("Delete Highlight"):t(r),Icon:tt?aZ:n,onClick:eQ,disabled:x.book?.format==="PDF"};case"annotate":return{tooltipText:t(r),Icon:n,onClick:e0,disabled:x.book?.format==="PDF"};case"search":return{tooltipText:t(r),Icon:n,onClick:e1,disabled:x.book?.format==="PDF"};case"dictionary":return{tooltipText:t(r),Icon:n,onClick:e2};case"wikipedia":return{tooltipText:t(r),Icon:n,onClick:e3};case"translate":return{tooltipText:t(r),Icon:n,onClick:e4};case"tts":return{tooltipText:t(r),Icon:n,onClick:e6,disabled:x.book?.format==="PDF"};case"proofread":return{tooltipText:t(r),Icon:n,onClick:e5,disabled:x.book?.format!=="EPUB"};default:return{tooltipText:"",Icon:n,onClick:()=>{}}}});return(0,__.jsxs)("div",{ref:E,role:"toolbar",tabIndex:-1,children:[M&&B&&$&&(0,__.jsx)(Sy,{word:k?.text,lang:x.bookDoc?.metadata.language,position:$,trianglePosition:B,popupWidth:eg,popupHeight:em,onDismiss:eG}),R&&B&&$&&(0,__.jsx)(S_,{text:k?.text,lang:x.bookDoc?.metadata.language,position:$,trianglePosition:B,popupWidth:eg,popupHeight:em,onDismiss:eG}),O&&B&&H&&(0,__.jsx)(ST,{text:k?.text,position:H,trianglePosition:B,popupWidth:ev,popupHeight:ey,onDismiss:eG}),j&&B&&z&&(0,__.jsx)(Sg,{bookKey:e,dir:_.rtl?"rtl":"ltr",isVertical:_.vertical,buttons:tr,notes:Y,position:z,trianglePosition:B,highlightOptionsVisible:K,selectedStyle:ea,selectedColor:es,popupWidth:eE,popupHeight:ek,onHighlight:eQ,onDismiss:eG}),I&&B&&q&&k&&(0,__.jsx)(SP,{bookKey:e,selection:k,position:q,trianglePosition:B,popupWidth:ew,popupHeight:eS,onDismiss:eG}),Q&&Q.color&&k&&(0,__.jsx)(_4,{bookKey:e,isVertical:_.vertical,annotation:Q,selection:k,handleColor:es,getAnnotationText:eA,setSelection:N,onStartEdit:e8}),et&&en&&x.book&&(0,__.jsx)(SU,{bookKey:e,isOpen:et,bookTitle:x.book.title,bookAuthor:x.book.author||"",booknotes:en.booknotes,booknoteGroups:en.booknoteGroups,onCancel:te,onExport:e7})]})};var SV=a,Sq=p,SW=ls;let SK=e=>new Set([...e?.getAttributeNS?.("http://www.idpf.org/2007/ops","type")?.split(" ")??[],...e?.attributes?.getNamedItem?.("epub:type")?.value?.split(" ")??[]]),SG=e=>new Set(e?.getAttribute?.("role")?.split(" ")),SX=e=>{if(e.matches("sup"))return!0;let{verticalAlign:t}=getComputedStyle(e);return"super"===t||"top"===t||"text-top"===t||/^\d/.test(t)},SZ=["biblioref","glossref","noteref"],SY=["doc-biblioref","doc-glossref","doc-noteref"],SJ=e=>{let t=SK(e),r=SG(e);return{yes:SY.some(e=>r.has(e))||SZ.some(e=>t.has(e)),maybe:()=>!t.has("backlink")&&!r.has("doc-backlink")&&(SX(e)||1===e.children.length&&SX(e.children[0])||SX(e.parentElement))}},SQ=e=>{let t=SK(e),r=SG(e);return r.has("doc-biblioentry")||t.has("biblioentry")?"biblioentry":r.has("definition")||t.has("glossdef")?"definition":r.has("doc-endnote")||t.has("endnote")||t.has("rearnote")?"endnote":r.has("doc-footnote")||t.has("footnote")?"footnote":r.has("note")||t.has("note")?"note":null},S0="a, span, sup, sub, em, strong, i, b, small, big",S1=(e,t)=>{let r=t(e),n=r;for(;r.matches(S0);){let e=r.parentElement;if(!e)break;r=e}if(r===e.body){let e=n.nextElementSibling;if(e&&!e.matches(S0))return e;throw Error("Failed to extract footnote")}return r};class S2 extends EventTarget{detectFootnotes=!0;#k(e,{index:t,anchor:r},n){let i=document.createElement("foliate-view");return new Promise((a,o)=>{i.addEventListener("load",e=>{try{let{doc:t}=e.detail,o=r(t),s=SQ(o),l=o?.matches?.("aside")&&"footnote"===s;if(o){let e;if(o.startContainer)e=o;else if(o.matches("li, aside"))(e=t.createRange()).selectNodeContents(o);else if(o.matches("dt")){(e=t.createRange()).setStartBefore(o);let r=o.nextElementSibling,n=null;for(;r&&r.matches("dd");)n=r,r=r.nextElementSibling;e.setEndAfter(n||o)}else if(o.closest("li"))(e=t.createRange()).selectNodeContents(o.closest("li"));else if(o.closest(".note"))(e=t.createRange()).selectNodeContents(o.closest(".note"));else if(o.querySelector("a")){(e=t.createRange()).setStartBefore(o);let r=o.nextElementSibling;for(;r&&!r.querySelector("a");)r=r.nextElementSibling;r?e.setEndBefore(r):e.setEndAfter(o.parentNode.lastChild)}else e=t.createRange(),!(o.textContent?.trim()||o.children.length>0)&&o.parentElement?e.selectNodeContents(o.parentElement):e.selectNode(o);let r=e.extractContents();t.body.replaceChildren(),t.body.appendChild(r)}let c={view:i,href:n,type:s,hidden:l,target:o};this.dispatchEvent(new CustomEvent("render",{detail:c})),a()}catch(e){o(e)}}),i.open(e).then(()=>this.dispatchEvent(new CustomEvent("before-render",{detail:{view:i}}))).then(()=>i.goTo(t)).catch(o)})}handle(e,t){let{a:r,href:n,follow:i}=t.detail,{yes:a,maybe:o}=SJ(r);return a||i?(t.preventDefault(),Promise.resolve(e.resolveHref(n)).then(t=>this.#k(e,t,n))):this.detectFootnotes&&o()?(t.preventDefault(),Promise.resolve(e.resolveHref(n)).then(({index:t,anchor:r})=>{let i={index:t,anchor:e=>S1(e,r)};return this.#k(e,i,n)})):void 0}}var S3=r0;let S4=360,S6=88,S5=10,S8=({bookKey:e,bookDoc:t})=>{let r=(0,Sq.useRef)(null),n=(0,Sq.useRef)(null),[i,a]=(0,Sq.useState)(),[o,s]=(0,Sq.useState)(),[l,c]=(0,Sq.useState)(!1),{getBookData:u}=ex(),{getView:d,getViewSettings:f}=e_(),{getLoadedFonts:h}=gw(),p=d(e),b=f(e),g=new S2,m=(0,Sq.useRef)(null),[v,y]=(0,Sq.useState)(null),[x,w]=(0,Sq.useState)(S4),[_,S]=(0,Sq.useState)(S6),E=(e,t)=>Math.min(e,(t?window.innerWidth/2:window.innerHeight/2)-S5-12),k=e=>Math.min(e,window.innerWidth-S5-12),N=e=>Math.min(e,window.innerHeight-S5-12);(0,Sq.useEffect)(()=>{let i=i=>{let{view:a}=i.detail;a.addEventListener("link",r=>{r.preventDefault();let{detail:n}=r;n.follow=!0,g.handle(t,r)?.catch(t=>{console.warn(t),d(e)?.goTo(n.href)})}),a.addEventListener("load",t=>{let{doc:r}=t.detail,n=u(e);e7(r,(0,S3.isCJKLang)(n.book?.primaryLanguage)),h().forEach(e=>{tl(r,e)})}),n.current=a,r.current?.replaceChildren(a);let{renderer:o}=a;o.setAttribute("flow","scrolled"),o.setAttribute("margin-top","0px"),o.setAttribute("margin-right","0px"),o.setAttribute("margin-bottom","0px"),o.setAttribute("margin-left","0px"),o.setAttribute("gap","0%");let s=f(e),l={...(0,SW.getThemeCode)()},c=document.getElementById("popup-container");c&&(l.bg=getComputedStyle(c).backgroundColor);let p=(0,SW.getStyles)(s,l),b=(0,SW.getFootnoteStyles)();o.setStyles?.(`${p}
${b}`)},a=t=>{let{view:r}=t.detail;r.addEventListener("relocate",()=>{let{renderer:t}=r;f(e).vertical?w(k(E(t.viewSize,!0))):S(N(E(t.viewSize,!1))),c(!0)})};return g.addEventListener("before-render",i),g.addEventListener("render",a),()=>{g.removeEventListener("before-render",i),g.removeEventListener("render",a)}},[p]),(0,Sq.useEffect)(()=>{l&&m.current?.focus()},[l]),(0,Sq.useEffect)(()=>{b.vertical?(w(k(S6)),S(N(Math.max(S4,window.innerHeight/4)))):(w(k(Math.max(S4,window.innerWidth/4))),S(N(S6)))},[b]),(0,Sq.useEffect)(()=>{i&&v&&s(wZ(i,v,x,_,S5))},[i,v,x,_]);let j=async r=>{let n=r.detail,i=document.querySelector(`#gridcell-${e}`);if(!i)return;let o=i.getBoundingClientRect(),s=f(e),l=wX(n.a,o,S5,s.vertical);y(o),a(l);let{a:c}=n;["duokan-footnote","footnote-link","footnote"].some(e=>c.classList.contains(e))&&(n.follow=!0),g.handle(t,r)?.catch(e=>{console.warn(e);let t=r.detail;p?.goTo(t.href)})},C=()=>{let e=r.current?.querySelector("foliate-view");e?.close(),e?.remove()},M=()=>{C(),y(null),s(null),a(null),c(!1)},A=t=>{let{element:n,footnote:i}=t.detail,o=document.querySelector(`#gridcell-${e}`);if(!o)return;let s=o.getBoundingClientRect(),l=f(e),u=wX(n,s,S5,l.vertical);if(r.current){let e=document.createElement("p");e.textContent=i,e.setAttribute("style","padding: 1em; hanging-punctuation: allow-end last;"),e.style.visibility="hidden",l.vertical?e.style.height=`${_}px`:e.style.width=`${x}px`,document.body.appendChild(e);let t=e.getBoundingClientRect();l.vertical?w(E(t.width,!0)):S(E(t.height,!1)),document.body.removeChild(e),e.style.visibility="visible",r.current.replaceChildren(e),y(s),a(u),c(!0)}};return gN(p,{onLinkClick:j}),(0,Sq.useEffect)(()=>(window.addEventListener("resize",M),eR.on("footnote-popup",A),()=>{window.removeEventListener("resize",M),eR.off("footnote-popup",A)}),[]),(0,Sq.useEffect)(()=>{n.current&&r.current?.replaceChildren(n.current)},[r]),(0,SV.jsxs)("div",{ref:m,role:"toolbar",tabIndex:-1,children:[l&&(0,SV.jsx)(iq,{onDismiss:M}),(0,SV.jsx)(w4,{isOpen:l,width:x,height:_,position:l?o:void 0,trianglePosition:l?i:void 0,className:"select-text overflow-y-auto",onDismiss:M,children:(0,SV.jsx)("div",{className:"footnote-content",ref:r,style:{width:`${x}px`,height:`${_}px`}})})]})};var S9=a,S7=p,Ee=l,Et=y;let Er=({bookKey:e,showDoubleBorder:t,isScrolled:r,isVertical:n,isEink:i,horizontalGap:a,contentInsets:o,gridInsets:s})=>{let{appService:l}=(0,Ee.useEnv)(),{systemUIVisible:c,statusBarHeight:u}=(0,Et.useThemeStore)(),d=Math.max(s.top,l?.isAndroidApp&&c?u/2:0),[f,p]=S7.default.useState(null),b=(0,S7.useRef)(2e3),g=(0,S7.useRef)(null),m=t=>{let{message:r,bookKey:n,timeout:i=2e3}=t.detail;n===e&&(p(r),b.current=i)};return((0,S7.useEffect)(()=>(eR.on("hint",m),()=>{eR.off("hint",m)}),[]),(0,S7.useEffect)(()=>(g.current&&clearTimeout(g.current),g.current=setTimeout(()=>p(""),b.current),()=>{g.current&&clearTimeout(g.current)}),[f]),f)?(0,S9.jsxs)(S9.Fragment,{children:[(0,S9.jsx)("div",{className:h("absolute left-0 right-0 top-0 z-10",f?"":"bg-transparent"),style:{height:`${d}px`}}),(0,S9.jsx)("div",{className:h("hintinfo absolute flex items-center justify-end overflow-hidden ps-2",f?"":"bg-transparent",n?"writing-vertical-rl":"top-0 h-[44px]",r?n?"h-full":"w-full":n?"max-h-[50%]":"max-w-[50%]"),style:n?{bottom:`${(o.bottom-s.bottom)*1.5}px`,right:t?`calc(${o.right}px)`:`calc(${Math.max(0,o.right-32)}px)`,width:t?"30px":`${o.right}px`}:{top:`${d}px`,insetInlineEnd:`calc(${a/2}% + ${o.right/2}px)`},children:(0,S9.jsx)("h2",{className:h("text-center font-sans",i?"text-sm font-normal":"text-neutral-content text-xs font-light"),children:f||""})})]}):null};var En=a;let Ei=10,Ea=({borderColor:e,showHeader:t,showFooter:r,insets:n})=>(0,En.jsxs)("div",{children:[(0,En.jsx)("div",{className:"borderframe pointer-events-none absolute",style:{border:`4px solid ${e}`,height:`calc(100% - ${n.top+n.bottom}px + ${2*Ei}px)`,top:`calc(${n.top}px - ${Ei}px)`,left:`calc(${n.left}px - ${Ei}px)`,right:`calc(${n.right}px - ${Ei}px)`}}),(0,En.jsx)("div",{className:"borderframe pointer-events-none absolute",style:{border:`1px solid ${e}`,height:`calc(100% - ${n.top+n.bottom}px)`,top:`${n.top}px`,left:`calc(${n.left+32*!!r}px`,right:`calc(${n.right+32*!!t}px`}}),r&&(0,En.jsx)("div",{className:"borderframe pointer-events-none absolute",style:{borderTop:`1px solid ${e}`,borderBottom:`1px solid ${e}`,borderLeft:`1px solid ${e}`,width:"32px",height:`calc(100% - ${n.top+n.bottom}px)`,top:`${n.top}px`,left:`calc(${n.left}px)`}}),t&&(0,En.jsx)("div",{className:"borderframe pointer-events-none absolute",style:{borderTop:`1px solid ${e}`,borderBottom:`1px solid ${e}`,borderRight:`1px solid ${e}`,width:"32px",height:`calc(100% - ${n.top+n.bottom}px)`,top:`${n.top}px`,left:`calc(100% - ${n.right}px - 32px)`}})]}),Eo=({bookKeys:e,onCloseBook:t})=>{let r=eU(),{appService:n}=(0,b2.useEnv)(),{getConfig:i,getBookData:a}=ex(),{getProgress:o,getViewState:s,getViewSettings:l}=e_(),{setGridInsets:c,hoveredBookKey:u}=e_(),{sideBarBookKey:d}=ek(),{safeAreaInsets:f}=(0,b3.useThemeStore)(),p=window.innerWidth/window.innerHeight,b=b4(e.length,p);(0,b1.useEffect)(()=>{if(!d)return;let e=a(d);e&&e.book&&(document.title=e.book.title)},[d]);let g=(e,t)=>{if(!f)return{top:0,right:0,bottom:0,left:0};let{top:r,right:n,bottom:i,left:a}=b6(e,t,p);return{top:r?f.top:0,right:n?f.right:0,bottom:i?f.bottom:0,left:a?f.left:0}};return((0,b1.useEffect)(()=>{f&&e.forEach((t,r)=>{c(t,g(r,e.length))})},[e,f]),f)?(0,b0.jsx)("div",{className:h("books-grid bg-base-100 relative grid h-full flex-grow"),style:{gridTemplateColumns:b.columns,gridTemplateRows:b.rows},role:"main","aria-label":r("Books Content"),children:e.map((r,c)=>{let d=a(r),f=i(r),p=o(r),b=l(r),m=s(r),v=g(c,e.length),{book:y,bookDoc:x}=d||{};if(!y||!f||!x||!b||!m)return null;let{section:w,pageinfo:_,timeinfo:S,sectionLabel:E}=p||{},k=m.ribbonVisible,N=m.viewerKey,j=b.gapPercent,C=b5(b),M={top:v.top+C.top,right:v.right+C.right,bottom:v.bottom+C.bottom,left:v.left+C.left},A=b.scrolled,R=b.showBarsOnScroll,T=b.showHeader&&(!A||R),O=b.showFooter&&(!A||R);return(0,b0.jsxs)("div",{id:`gridcell-${r}`,className:h("relative h-full w-full overflow-hidden",n?.hasRoundedWindow&&"rounded-window"),children:[k&&!u&&(0,b0.jsx)(_w,{width:`${j}%`}),(0,b0.jsx)(xl,{bookKey:r,bookTitle:y.title,isTopLeft:0===c,isHoveredAnim:e.length>2,onCloseBook:t,gridInsets:v}),(0,b0.jsx)(v8,{bookKey:r,bookDoc:x,config:f,gridInsets:v,contentInsets:M},N),b.vertical&&b.scrolled&&(0,b0.jsxs)(b0.Fragment,{children:[(O||b.doubleBorder)&&(0,b0.jsx)("div",{className:"bg-base-100 absolute left-0 top-0 h-full",style:{width:`calc(${M.left+32*!!O}px)`,height:"calc(100%)"}}),(T||b.doubleBorder)&&(0,b0.jsx)("div",{className:"bg-base-100 absolute right-0 top-0 h-full",style:{width:`calc(${M.right+32*!!T}px)`,height:"calc(100%)"}})]}),b.vertical&&b.doubleBorder&&(0,b0.jsx)(Ea,{showHeader:T,showFooter:O,borderColor:b.borderColor,horizontalGap:j,insets:C}),T&&(0,b0.jsx)(yt,{bookKey:r,section:E,showDoubleBorder:b.vertical&&b.doubleBorder,isScrolled:b.scrolled,isVertical:b.vertical,isEink:b.isEink,horizontalGap:j,contentInsets:M,gridInsets:v}),(0,b0.jsx)(Er,{bookKey:r,showDoubleBorder:b.vertical&&b.doubleBorder,isScrolled:b.scrolled,isVertical:b.vertical,isEink:b.isEink,horizontalGap:j,contentInsets:M,gridInsets:v}),O&&(0,b0.jsx)(_v,{bookKey:r,section:w,pageinfo:_,timeinfo:S,horizontalGap:j,contentInsets:M,gridInsets:v}),(0,b0.jsx)(SH,{bookKey:r}),(0,b0.jsx)(go,{bookKey:r,gridInsets:v}),(0,b0.jsx)(gf,{bookKey:r,gridInsets:v,toc:x.toc||[]}),(0,b0.jsx)(S8,{bookKey:r,bookDoc:x}),(0,b0.jsx)(_p,{bookKey:r,bookFormat:y.format,section:w,pageinfo:_,isHoveredAnim:!1,gridInsets:v})]},r)})}):null};var Es=a,El=p,Ec=l,Eu=x,Ed=iB;function Ef(e){return nV({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M8 1.003a7 7 0 0 0-7 7v.43c.09 1.51 1.91 1.79 3 .7a1.87 1.87 0 0 1 2.64 2.64c-1.1 1.16-.79 3.07.8 3.2h.6a7 7 0 1 0 0-14l-.04.03zm0 13h-.52a.58.58 0 0 1-.36-.14.56.56 0 0 1-.15-.3 1.24 1.24 0 0 1 .35-1.08 2.87 2.87 0 0 0 0-4 2.87 2.87 0 0 0-4.06 0 1 1 0 0 1-.9.34.41.41 0 0 1-.22-.12.42.42 0 0 1-.1-.29v-.37a6 6 0 1 1 6 6l-.04-.04zM9 3.997a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 7.007a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm-7-5a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm7-1a1 1 0 1 1-2 0 1 1 0 0 1 2 0zM13 8a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"},child:[]}]})(e)}function Eh(e){return nV({tag:"svg",attr:{viewBox:"0 0 32 32"},child:[{tag:"path",attr:{d:"M 13 2 C 11.355469 2 10 3.355469 10 5 L 10 16.8125 L 9.34375 16.125 L 9.09375 15.90625 C 7.941406 14.753906 6.058594 14.753906 4.90625 15.90625 C 3.753906 17.058594 3.753906 18.941406 4.90625 20.09375 L 4.90625 20.125 L 13.09375 28.21875 L 13.15625 28.25 L 13.1875 28.3125 C 14.535156 29.324219 16.253906 30 18.1875 30 L 19.90625 30 C 24.441406 30 28.09375 26.347656 28.09375 21.8125 L 28.09375 14 C 28.09375 12.355469 26.738281 11 25.09375 11 C 24.667969 11 24.273438 11.117188 23.90625 11.28125 C 23.578125 9.980469 22.394531 9 21 9 C 20.234375 9 19.53125 9.300781 19 9.78125 C 18.46875 9.300781 17.765625 9 17 9 C 16.648438 9 16.316406 9.074219 16 9.1875 L 16 5 C 16 3.355469 14.644531 2 13 2 Z M 13 4 C 13.554688 4 14 4.445313 14 5 L 14 16 L 16 16 L 16 12 C 16 11.445313 16.445313 11 17 11 C 17.554688 11 18 11.445313 18 12 L 18 16 L 20 16 L 20 12 C 20 11.445313 20.445313 11 21 11 C 21.554688 11 22 11.445313 22 12 L 22 16 L 24.09375 16 L 24.09375 14 C 24.09375 13.445313 24.539063 13 25.09375 13 C 25.648438 13 26.09375 13.445313 26.09375 14 L 26.09375 21.8125 C 26.09375 25.277344 23.371094 28 19.90625 28 L 18.1875 28 C 16.722656 28 15.457031 27.476563 14.40625 26.6875 L 6.3125 18.6875 C 5.867188 18.242188 5.867188 17.757813 6.3125 17.3125 C 6.757813 16.867188 7.242188 16.867188 7.6875 17.3125 L 12 21.625 L 12 5 C 12 4.445313 12.445313 4 13 4 Z"},child:[]}]})(e)}function Ep(e){return nV({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"circle",attr:{cx:"256",cy:"56",r:"40",fill:"none",strokeLinejoin:"round",strokeWidth:"32"},child:[]},{tag:"path",attr:{fill:"none",strokeLinejoin:"round",strokeWidth:"32",d:"M204.23 274.44c2.9-18.06 4.2-35.52-.5-47.59-4-10.38-12.7-16.19-23.2-20.15L88 176.76c-12-4-23.21-10.7-24-23.94-1-17 14-28 29-24 0 0 88 31.14 163 31.14s162-31 162-31c18-5 30 9 30 23.79 0 14.21-11 19.21-24 23.94l-88 31.91c-8 3-21 9-26 18.18-6 10.75-5 29.53-2.1 47.59l5.9 29.63 37.41 163.9c2.8 13.15-6.3 25.44-19.4 27.74S308 489 304.12 476.28l-37.56-115.93q-2.71-8.34-4.8-16.87L256 320l-5.3 21.65q-2.52 10.35-5.8 20.48L208 476.18c-4 12.85-14.5 21.75-27.6 19.46s-22.4-15.59-19.46-27.74l37.39-163.83z"},child:[]}]})(e)}function Eb(e){return nV({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"rect",attr:{width:"256",height:"480",x:"128",y:"16",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",rx:"48",ry:"48",transform:"rotate(-90 256 256)"},child:[]},{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M16 336v-24a8 8 0 0 1 8-8h0a16 16 0 0 0 16-16v-64a16 16 0 0 0-16-16h0a8 8 0 0 1-8-8v-24"},child:[]}]})(e)}function Eg(e){return nV({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"rect",attr:{width:"256",height:"480",x:"128",y:"16",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",rx:"48",ry:"48"},child:[]},{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M176 16h24a8 8 0 0 1 8 8h0a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16h0a8 8 0 0 1 8-8h24"},child:[]}]})(e)}var Em=iH,Ev=a,Ey=p,Ex=R,Ew=l,E_=x,ES=iB,EE=S,Ek=_,EN=r0,Ej=A,EC=l;let EM=()=>{let{appService:e}=(0,EC.useEnv)();return t=>{if(!e)return;let r=e.getDefaultViewSettings();Object.entries(t).forEach(([e,t])=>{let n=r[e];void 0!==n&&t(n)})}};var EA=a,ER=p;let ET=({className:e,inputClassName:t,label:r,iconSize:n,value:i,onChange:a,min:o,max:s,step:l,disabled:c})=>{let u=eU(),[d,f]=(0,ER.useState)(i),p=l||1;(0,ER.useEffect)(()=>{f(i)},[i]);let b=e=>{let t=e.target.value;if(""===t||/^[1-9]\d*\.?\d*$|^0?\.?\d*$/.test(t)){let e=""===t?0:parseFloat(t);f(e),isNaN(e)||a(Math.max(o,Math.min(s,Math.round(10*e)/10)))}},g=()=>{let e=Math.round(10*Math.min(s,d+p))/10;f(e),a(e)},m=()=>{let e=Math.round(10*Math.max(o,d-p))/10;f(e),a(e)},v=()=>{let e=Math.max(o,Math.min(s,d));f(e),a(e)};return(0,EA.jsxs)("div",{className:h("config-item",e),children:[(0,EA.jsx)("span",{className:"text-base-content line-clamp-2",children:r}),n&&(0,EA.jsx)("span",{style:{minWidth:`${n}px`}}),(0,EA.jsxs)("div",{className:"text-base-content flex items-center gap-2",children:[(0,EA.jsx)("input",{type:"text",inputMode:"decimal",disabled:c,value:d,onChange:b,onBlur:v,className:h("input input-ghost settings-content text-base-content w-16 max-w-xs rounded border-0 bg-transparent pe-3 !outline-none",r&&"py-1 ps-1 text-right",c&&"input-disabled cursor-not-allowed disabled:bg-transparent",t),onFocus:e=>e.target.select()}),(0,EA.jsx)("button",{tabIndex:c?-1:0,"aria-label":u("Decrease"),onClick:m,className:`btn btn-circle btn-sm ${i<=o||c?"btn-disabled !bg-opacity-5":""}`,children:(0,EA.jsx)(lI,{className:"h-4 w-4"})}),(0,EA.jsx)("button",{tabIndex:c?-1:0,"aria-label":u("Increase"),onClick:g,className:`btn btn-circle btn-sm ${i>=s||c?"btn-disabled !bg-opacity-5":""}`,children:(0,EA.jsx)(lP,{className:"h-4 w-4"})})]})]})};var EO=a,EL=p,EI=l,EP=iB;let EB=({index:e,style:t,data:r})=>{let{options:n,selected:i,onSelect:a,onGetFontFamily:o,family:s,iconSize:l}=r,c=n[e];return(0,EO.jsx)("li",{role:"option","aria-selected":i===c.option,className:"px-2",style:t,children:(0,EO.jsxs)("div",{role:"button",tabIndex:0,onClick:()=>a(c.option),onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&a(c.option)},"aria-label":c.label||c.option,className:"flex w-full items-center overflow-hidden !px-0 text-sm",children:[(0,EO.jsx)("span",{style:{minWidth:`${l}px`},children:i===c.option&&(0,EO.jsx)(il,{className:"text-base-content",size:l})}),(0,EO.jsx)("span",{className:"line-clamp-1 overflow-visible break-all leading-loose",style:{fontFamily:o(c.option,s)},title:c.label||c.option,children:c.label||c.option})]})},c.option)},ED=({family:e,selected:t,options:r,moreOptions:n,onSelect:i,onGetFontFamily:a})=>{let o=eU(),{appService:s}=(0,EI.useEnv)(),l=(0,EP.useResponsiveSize)(16),c=[...r,...n??[]],u=c.find(e=>e.option===t)??c[0],d=40,f=320,p=(0,EL.useMemo)(()=>({options:r,selected:t,onSelect:i,onGetFontFamily:a,family:e??"",iconSize:l,appService:s}),[r,t,i,a,e,l,s]),b=(0,EL.useMemo)(()=>({options:n??[],selected:t,onSelect:i,onGetFontFamily:a,family:e??"",iconSize:l}),[n,t,i,a,e,l]);return(0,EO.jsxs)("div",{className:"dropdown dropdown-top",children:[(0,EO.jsx)("button",{tabIndex:0,className:"btn btn-sm flex items-center px-[10px] font-normal normal-case sm:px-[20px]",onClick:e=>e.currentTarget.focus(),children:(0,EO.jsxs)("div",{className:"flex items-center gap-x-1",children:[(0,EO.jsx)("span",{className:"line-clamp-1 break-all leading-loose",style:{fontFamily:a(u.option,e??"")},children:u.label}),(0,EO.jsx)(lO,{size:l})]})}),(0,EO.jsxs)("ul",{role:"listbox",tabIndex:0,className:h("dropdown-content bgcolor-base-200 no-triangle menu rounded-box absolute z-[1] mt-4 shadow","right-[-32px] w-[46vw] !px-0 sm:right-0 sm:w-44",n?.length?"":"inline overflow-hidden"),children:[(0,EO.jsx)("div",{style:{height:Math.min(r.length*d,f)},children:(0,EO.jsx)(f0,{width:"100%",height:Math.min(r.length*d,f),itemCount:r.length,itemSize:d,itemData:p,children:EB})}),n&&n.length>0&&(0,EO.jsxs)("li",{className:"dropdown dropdown-left dropdown-top px-2",children:[(0,EO.jsxs)("div",{className:"flex items-center px-0 text-sm",children:[(0,EO.jsx)("span",{style:{minWidth:`${l}px`},children:(0,EO.jsx)(lT,{size:l})}),(0,EO.jsx)("span",{children:o("System Fonts")})]}),(0,EO.jsx)("ul",{role:"listbox",tabIndex:0,className:h("dropdown-content bgcolor-base-200 menu rounded-box relative z-[1] shadow","!mr-4 mb-[-46px] inline w-[46vw] overflow-hidden !px-0 sm:w-[200px]"),children:(0,EO.jsx)("div",{style:{height:Math.min(n.length*d,f)},children:(0,EO.jsx)(f0,{width:"100%",height:Math.min(n.length*d,f),itemCount:n.length,itemSize:d,itemData:b,children:EB})})})]})]})]})};var Ez=a,EF=p,E$=l,EU=x;let EH=({bookKey:e,onBack:t})=>{let r=eU(),{appService:n,envConfig:i}=(0,E$.useEnv)(),{settings:a}=(0,EU.useSettingsStore)(),{fonts:o,addFont:s,loadFont:l,removeFont:c,getAvailableFonts:u,saveCustomFonts:d}=gw(),{getViewSettings:f}=e_(),p=f(e)||a.globalViewSettings,[b,g]=(0,EF.useState)(!1),{selectFiles:m}=sH(n,r),v="serif"===p.defaultFont.toLowerCase()?"serif":"sans-serif",y="serif"===v?p.serifFont:p.sansSerifFont,x=()=>{m({type:"fonts",multiple:!0}).then(async e=>{if(!e.error&&0!==e.files.length){for(let t of e.files){let e=await n?.importFont(t.path||t.file);if(!e)continue;let r=s(e.path,{name:e.name,family:e.family,style:e.style,weight:e.weight,variable:e.variable});console.log("Added custom font:",r),r&&!r.error&&tl(document,await l(i,r.id))}d(i)}})},w=e=>{for(let t of e.fonts)t&&c(t.id)&&(n?.deleteFont(t),d(i),0===u().length&&g(!1))},_=t=>{"serif"===v?l4(i,e,"serifFont",t.name):l4(i,e,"sansSerifFont",t.name)},S=()=>{g(!b)},E=e=>{let t=new Map;for(let r of e){let e=r.family||r.name;t.has(e)||t.set(e,[]),t.get(e).push(r.id)}return Array.from(t.entries()).map(([t,r])=>({name:t,fonts:r.map(t=>e.find(e=>e.id===t)).filter(e=>!!e)}))},k=o.filter(e=>!e.deletedAt).sort((e,t)=>(t.downloadedAt||0)-(e.downloadedAt||0)),N=E(k);return(0,Ez.jsxs)("div",{className:"w-full",children:[(0,Ez.jsxs)("div",{className:"mb-6 flex h-8 items-center justify-between",children:[(0,Ez.jsx)("div",{className:"breadcrumbs py-1",children:(0,Ez.jsxs)("ul",{children:[(0,Ez.jsx)("li",{children:(0,Ez.jsx)("button",{className:"font-semibold",onClick:t,children:r("Font")})}),(0,Ez.jsx)("li",{className:"font-medium",children:r("Custom Fonts")})]})}),k.length>0&&(0,Ez.jsx)("button",{onClick:S,className:"btn btn-ghost btn-sm text-base-content gap-2",title:b?r("Cancel Delete"):r("Delete Font"),children:b?(0,Ez.jsx)(Ez.Fragment,{children:r("Cancel")}):(0,Ez.jsxs)(Ez.Fragment,{children:[(0,Ez.jsx)(nX,{className:"h-4 w-4"}),r("Delete")]})})]}),(0,Ez.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Ez.jsx)("div",{className:"card border-primary/50 hover:border-primary/75 group h-12 border-2 transition-colors",children:(0,Ez.jsx)("button",{className:"card-body flex cursor-pointer items-center justify-center p-2 text-center",onClick:x,children:(0,Ez.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Ez.jsx)("div",{className:"flex items-center justify-center",children:(0,Ez.jsx)(it,{className:"text-primary/85 group-hover:text-primary h-6 w-6"})}),(0,Ez.jsx)("div",{className:"text-primary/85 group-hover:text-primary line-clamp-1 font-medium",children:r("Import Font")})]})})}),N.map(e=>(0,Ez.jsx)("div",{role:"none",className:h("card h-12 border shadow-sm",y===e.name?"border-primary/50 bg-primary/50":`border-base-200 bg-base-200 ${b?"":"cursor-pointer"}`),onClick:b?void 0:()=>_(e),title:e.fonts.map(e=>e.name).join("\n"),children:(0,Ez.jsxs)("div",{className:"card-body flex items-center justify-center p-2",children:[(0,Ez.jsx)("div",{style:{fontFamily:`"${e.name}", sans-serif`,fontWeight:400},className:"text-base-content line-clamp-1 break-all",children:e.name}),b&&(0,Ez.jsx)("button",{onClick:()=>w(e),className:"btn btn-ghost btn-xs absolute right-[-10px] top-[-10px] h-6 min-h-0 w-6 p-0 hover:bg-transparent",title:r("Delete Font"),children:(0,Ez.jsx)(pK,{className:"text-base-content/75 h-6 w-6"})})]})},e.name))]}),(0,Ez.jsx)("div",{className:"bg-base-200/30 my-8 rounded-lg p-4",children:(0,Ez.jsxs)("div",{className:"text-base-content/70 text-sm sm:text-xs",children:[(0,Ez.jsxs)("div",{className:"mb-1 indent-2 font-medium",children:[r("Tips"),":"]}),(0,Ez.jsxs)("ul",{className:"list-outside list-disc space-y-1 ps-2",children:[(0,Ez.jsx)("li",{children:r("Supported font formats: .ttf, .otf, .woff, .woff2")}),(0,Ez.jsx)("li",{children:r("Custom fonts can be selected from the Font Face menu")})]})]})})]})},EV=e=>Array.from(new Set([...e,...Ex.CJK_SERIF_FONTS,...Ex.CJK_SANS_SERIF_FONTS])).filter(e=>Ex.CJK_FONTS_PATTENS.test(e)||(0,EN.isCJKStr)(e)).filter(e=>!Ex.CJK_EXCLUDE_PATTENS.test(e)).sort((e,t)=>e.localeCompare(t)),Eq=e=>/emoji|icons|symbol|dingbats|ornaments|webdings|wingdings|miuiex/i.test(e),EW=(e,t)=>`'${e}', ${t}`,EK=e=>!["android","linux"].includes((0,EE.getOSPlatform)())||!Ex.NON_FREE_FONTS.includes(e),EG=({className:e,family:t,label:r,options:n,moreOptions:i,selected:a,onSelect:o})=>{let s=eU();return(0,Ev.jsxs)("div",{className:h("config-item",e),children:[(0,Ev.jsx)("span",{className:"line-clamp-2 min-w-10",children:r}),(0,Ev.jsx)(ED,{family:t,options:n.map(e=>({option:e,label:s(e)})),moreOptions:i?.map(e=>({option:e,label:e}))??[],selected:a,onSelect:o,onGetFontFamily:EW})]})},EX=({bookKey:e,onRegisterReset:t})=>{let r=eU(),{envConfig:n,appService:i}=(0,Ew.useEnv)(),{getView:a,getViewSettings:o}=e_(),{settings:s,fontPanelView:l,setFontPanelView:c}=(0,E_.useSettingsStore)(),{fonts:u,getFontFamilies:d}=gw(),f=o(e)||s.globalViewSettings,h=a(e),p=(0,ES.useResponsiveSize)(18),b=[{option:"Serif",label:r("Serif Font")},{option:"Sans-serif",label:r("Sans-Serif Font")}],g=(0,EE.getOSPlatform)(),m=[];switch(g){case"macos":m=Ex.MACOS_FONTS;break;case"windows":m=Ex.WINDOWS_FONTS;break;case"linux":m=Ex.LINUX_FONTS;break;case"ios":m=Ex.IOS_FONTS;break;case"android":m=[]}let[v,y]=(0,Ey.useState)(m),[x,w]=(0,Ey.useState)(f.defaultFont),[_,S]=(0,Ey.useState)(f.defaultFontSize),[E,k]=(0,Ey.useState)(f.minimumFontSize),[N,j]=(0,Ey.useState)(f.overrideFont),[C,M]=(0,Ey.useState)(f.defaultCJKFont),[A,R]=(0,Ey.useState)(f.serifFont),[T,O]=(0,Ey.useState)(f.sansSerifFont),[L,I]=(0,Ey.useState)(f.monospaceFont),[P,B]=(0,Ey.useState)(f.fontWeight),[D,z]=(0,Ey.useState)(d()),[F,$]=(0,Ey.useState)(()=>EV([...D,...v])),U=EM(),H=()=>{U({defaultFont:w,defaultFontSize:S,minimumFontSize:k,overrideFont:j,defaultCJKFont:M,serifFont:R,sansSerifFont:O,monospaceFont:I,fontWeight:B})},V=()=>{c("custom-fonts")},q=()=>{c("main-fonts")};(0,Ey.useEffect)(()=>{t(H)},[i]),(0,Ey.useEffect)(()=>{$(e=>{let t=EV([...D,...v]);return e.length!==t.length?t:e})},[D,v]),(0,Ey.useEffect)(()=>{z(d())},[u,d]),(0,Ey.useEffect)(()=>{R(f.serifFont),O(f.sansSerifFont),I(f.monospaceFont)},[f.serifFont,f.sansSerifFont,f.monospaceFont]),(0,Ey.useEffect)(()=>{(0,Ej.isTauriAppPlatform)()&&i&&!i.isAndroidApp&&(0,Ek.getSysFontsList)().then(e=>{if(e.error||0===Object.keys(e.fonts).length)return void console.error("Failed to get system fonts list:",e.error);let t=[];Object.entries(e.fonts).forEach(([r,n])=>{!r||Eq(r)||(1===Object.entries(e.fonts).filter(([e,t])=>t===n).length?t.push(n):t.push(r))}),y([...new Set(t)].sort((e,t)=>e.localeCompare(t)))})},[i]),(0,Ey.useEffect)(()=>{l4(n,e,"defaultFont",x)},[x]),(0,Ey.useEffect)(()=>{l4(n,e,"defaultCJKFont",C)},[C]),(0,Ey.useEffect)(()=>{l4(n,e,"defaultFontSize",_)},[_]),(0,Ey.useEffect)(()=>{l4(n,e,"minimumFontSize",E)},[E]),(0,Ey.useEffect)(()=>{l4(n,e,"fontWeight",P)},[P]),(0,Ey.useEffect)(()=>{l4(n,e,"serifFont",A)},[A]),(0,Ey.useEffect)(()=>{l4(n,e,"sansSerifFont",T)},[T]),(0,Ey.useEffect)(()=>{l4(n,e,"monospaceFont",L)},[L]),(0,Ey.useEffect)(()=>{l4(n,e,"overrideFont",N)},[N]);let W=e=>{switch(e){case"Serif":return`'${A}', serif`;case"Sans-serif":return`'${T}', sans-serif`;case"Monospace":return`'${L}', monospace`;default:return""}};return"custom-fonts"===l?(0,Ev.jsx)("div",{className:"my-4 w-full",children:(0,Ev.jsx)(EH,{bookKey:e,onBack:q})}):(0,Ev.jsxs)("div",{className:"my-4 w-full space-y-6",children:[(0,Ev.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ev.jsx)("h2",{className:"font-medium",children:r("Override Book Font")}),(0,Ev.jsx)("input",{type:"checkbox",className:"toggle",checked:N,onChange:()=>j(!N)})]}),(0,Ev.jsxs)("div",{className:"w-full",children:[(0,Ev.jsx)("h2",{className:"mb-2 font-medium",children:r("Font Size")}),(0,Ev.jsx)("div",{className:"card border-base-200 border shadow",children:(0,Ev.jsxs)("div",{className:"divide-base-200 divide-y",children:[(0,Ev.jsx)(ET,{label:r("Default Font Size"),value:_,onChange:S,min:E,max:120}),(0,Ev.jsx)(ET,{label:r("Minimum Font Size"),value:E,onChange:k,min:1,max:120})]})})]}),(0,Ev.jsxs)("div",{className:"w-full",children:[(0,Ev.jsx)("h2",{className:"mb-2 font-medium",children:r("Font Weight")}),(0,Ev.jsx)("div",{className:"card border-base-200 border shadow",children:(0,Ev.jsx)("div",{className:"divide-base-200 divide-y",children:(0,Ev.jsx)(ET,{label:r("Font Weight"),value:P,onChange:B,min:100,max:900,step:100})})})]}),(0,Ev.jsxs)("div",{className:"w-full",children:[(0,Ev.jsx)("h2",{className:"mb-2 font-medium",children:r("Font Family")}),(0,Ev.jsx)("div",{className:"card border-base-200 border shadow",children:(0,Ev.jsxs)("div",{className:"divide-base-200 divide-y",children:[(0,Ev.jsxs)("div",{className:"config-item",children:[(0,Ev.jsx)("span",{className:"",children:r("Default Font")}),(0,Ev.jsx)(ED,{options:b,selected:x,onSelect:w,onGetFontFamily:W})]}),((0,EE.isCJKEnv)()||h?.language.isCJK)&&(0,Ev.jsx)(EG,{className:"config-item-top",family:"serif",label:r("CJK Font"),options:F,selected:C,onSelect:M})]})})]}),(0,Ev.jsxs)("div",{className:"w-full",children:[(0,Ev.jsxs)("div",{className:"mb-2 flex items-center justify-between",children:[(0,Ev.jsx)("h2",{className:"font-medium",children:r("Font Face")}),(0,Ev.jsx)("button",{onClick:V,className:"btn btn-ghost btn-xs gap-1 hover:bg-transparent",title:r("Manage Custom Fonts"),children:(0,Ev.jsx)(nQ,{size:p})})]}),(0,Ev.jsx)("div",{className:"card border-base-200 border shadow",children:(0,Ev.jsxs)("div",{className:"divide-base-200 divide-y",children:[(0,Ev.jsx)(EG,{className:"config-item-top",family:"serif",label:r("Serif Font"),options:[...D,...Ex.SERIF_FONTS.filter(EK),...Ex.CJK_SERIF_FONTS],moreOptions:v,selected:A,onSelect:R}),(0,Ev.jsx)(EG,{family:"sans-serif",label:r("Sans-Serif Font"),options:[...D,...Ex.SANS_SERIF_FONTS.filter(EK),...Ex.CJK_SANS_SERIF_FONTS],moreOptions:v,selected:T,onSelect:O}),(0,Ev.jsx)(EG,{className:"config-item-bottom",family:"monospace",label:r("Monospace Font"),options:[...D,...Ex.MONOSPACE_FONTS],moreOptions:v,selected:L,onSelect:I})]})})]})]})};var EZ=a,EY=p,EJ=l,EQ=x,E0=S,E1=ls,E2=my,E3=_,E4=eg,E6=R;let E5=({bookKey:e,onRegisterReset:t})=>{let r=eU(),{envConfig:n,appService:i}=(0,EJ.useEnv)(),{settings:a}=(0,EQ.useSettingsStore)(),{getView:o,getViewSettings:s,getGridInsets:l}=e_(),{setViewSettings:c,recreateViewer:u}=e_(),{getBookData:d}=ex(),f=s(e)||a.globalViewSettings,h=o(e),p=d(e),b=l(e)||{top:0,bottom:0,left:0,right:0},[g,m]=(0,EY.useState)(f.paragraphMargin),[v,y]=(0,EY.useState)(f.lineHeight),[x,w]=(0,EY.useState)(f.wordSpacing),[_,S]=(0,EY.useState)(f.letterSpacing),[E,k]=(0,EY.useState)(f.textIndent),[N,j]=(0,EY.useState)(f.fullJustification),[C,M]=(0,EY.useState)(f.hyphenation),[A,R]=(0,EY.useState)(f.marginPx||f.marginTopPx),[T,O]=(0,EY.useState)(f.marginBottomPx),[L,I]=(0,EY.useState)(f.marginLeftPx),[P,B]=(0,EY.useState)(f.marginRightPx),[D,z]=(0,EY.useState)(f.compactMarginPx||f.compactMarginTopPx),[F,$]=(0,EY.useState)(f.compactMarginBottomPx),[U,H]=(0,EY.useState)(f.gapPercent),[V,q]=(0,EY.useState)(f.compactMarginLeftPx),[W,K]=(0,EY.useState)(f.compactMarginRightPx),[G,X]=(0,EY.useState)(f.maxColumnCount),[Z,Y]=(0,EY.useState)(f.maxInlineSize),[J,Q]=(0,EY.useState)(f.maxBlockSize),[ee,et]=(0,EY.useState)(f.writingMode),[er,en]=(0,EY.useState)(f.overrideLayout),[ei,ea]=(0,EY.useState)(f.doubleBorder),[eo,es]=(0,EY.useState)(f.borderColor),[el,ec]=(0,EY.useState)(f.showHeader),[eu,ed]=(0,EY.useState)(f.showFooter),[ef,eh]=(0,EY.useState)(f.showBarsOnScroll),[ep,eb]=(0,EY.useState)(f.showMarginsOnScroll),[eg,em]=(0,EY.useState)(f.showRemainingTime),[ev,ey]=(0,EY.useState)(f.showRemainingPages),[ew,eS]=(0,EY.useState)(f.showProgressInfo),[eE,ek]=(0,EY.useState)(f.tapToToggleFooter),[eN,ej]=(0,EY.useState)(f.progressStyle),[eC,eM]=(0,EY.useState)(f.screenOrientation),eA=EM(),eR=()=>{eA({paragraphMargin:m,lineHeight:y,wordSpacing:w,letterSpacing:S,textIndent:k,fullJustification:j,hyphenation:M,marginTopPx:R,marginBottomPx:O,marginLeftPx:I,marginRightPx:B,compactMarginTopPx:z,compactMarginBottomPx:$,compactMarginLeftPx:q,compactMarginRightPx:K,gapPercent:H,maxColumnCount:X,maxInlineSize:Y,maxBlockSize:Q,overrideLayout:en,doubleBorder:ea,borderColor:es,showHeader:ec,showFooter:ed,showBarsOnScroll:eh,showRemainingTime:em,showRemainingPages:ey,showProgressInfo:eS,tapToToggleFooter:ek,showMarginsOnScroll:eb})};(0,EY.useEffect)(()=>{t(eR)},[]),(0,EY.useEffect)(()=>{l4(n,e,"paragraphMargin",g)},[g]),(0,EY.useEffect)(()=>{l4(n,e,"lineHeight",v)},[v]),(0,EY.useEffect)(()=>{l4(n,e,"wordSpacing",x)},[x]),(0,EY.useEffect)(()=>{l4(n,e,"letterSpacing",_)},[_]),(0,EY.useEffect)(()=>{l4(n,e,"textIndent",E)},[E]),(0,EY.useEffect)(()=>{l4(n,e,"fullJustification",N)},[N]),(0,EY.useEffect)(()=>{l4(n,e,"hyphenation",C)},[C]),(0,EY.useEffect)(()=>{A!==f.marginTopPx&&(void 0!==f.marginPx&&l4(n,e,"marginPx",void 0,!1,!1),l4(n,e,"marginTopPx",A,!1,!1))},[A]),(0,EY.useEffect)(()=>{T!==f.marginBottomPx&&(void 0!==f.marginPx&&l4(n,e,"marginPx",void 0,!1,!1),l4(n,e,"marginBottomPx",T,!1,!1))},[T]),(0,EY.useEffect)(()=>{P!==f.marginRightPx&&(void 0!==f.marginPx&&l4(n,e,"marginPx",void 0,!1,!1),l4(n,e,"marginRightPx",P,!1,!1))},[P]),(0,EY.useEffect)(()=>{L!==f.marginLeftPx&&(void 0!==f.marginPx&&l4(n,e,"marginPx",void 0,!1,!1),l4(n,e,"marginLeftPx",L,!1,!1))},[L]),(0,EY.useEffect)(()=>{D!==f.compactMarginTopPx&&(void 0!==f.compactMarginPx&&l4(n,e,"compactMarginPx",void 0,!1,!1),l4(n,e,"compactMarginTopPx",D,!1,!1))},[D]),(0,EY.useEffect)(()=>{F!==f.compactMarginBottomPx&&(void 0!==f.compactMarginPx&&l4(n,e,"compactMarginPx",void 0,!1,!1),l4(n,e,"compactMarginBottomPx",F,!1,!1))},[F]),(0,EY.useEffect)(()=>{W!==f.compactMarginRightPx&&(void 0!==f.compactMarginPx&&l4(n,e,"compactMarginPx",void 0,!1,!1),l4(n,e,"compactMarginRightPx",W,!1,!1))},[W]),(0,EY.useEffect)(()=>{V!==f.compactMarginLeftPx&&(void 0!==f.compactMarginPx&&l4(n,e,"compactMarginPx",void 0,!1,!1),l4(n,e,"compactMarginLeftPx",V,!1,!1))},[V]),(0,EY.useEffect)(()=>{U!==f.gapPercent&&(l4(n,e,"gapPercent",U,!1,!1),h?.renderer.setAttribute("gap",`${U}%`),f.scrolled&&h?.renderer.setAttribute("flow","scrolled"))},[U]),(0,EY.useEffect)(()=>{if(G===f.maxColumnCount)return;l4(n,e,"maxColumnCount",G,!1,!1);let t=s(e);h?.renderer.setAttribute("max-column-count",G),h?.renderer.setAttribute("max-inline-size",`${(0,E2.getMaxInlineSize)(t)}px`)},[G]),(0,EY.useEffect)(()=>{if(Z===f.maxInlineSize)return;l4(n,e,"maxInlineSize",Z,!1,!1);let t=s(e);h?.renderer.setAttribute("max-inline-size",`${(0,E2.getMaxInlineSize)(t)}px`)},[Z]),(0,EY.useEffect)(()=>{J!==f.maxBlockSize&&(l4(n,e,"maxBlockSize",J,!1,!1),h?.renderer.setAttribute("max-block-size",`${J}px`))},[J]),(0,EY.useEffect)(()=>{if(ee===f.writingMode)return;let t=f.writingMode;ee.includes("vertical")?f.vertical=!0:f.vertical=!1,l4(n,e,"writingMode",ee,!0).then(()=>{if(h){let t=s(e);h.renderer.setStyles?.((0,E1.getStyles)(t)),h.book.dir=(0,E4.getBookDirFromWritingMode)(ee)}t!==ee&&(["horizontal-rl","vertical-rl"].includes(ee)||["horizontal-rl","vertical-rl"].includes(t))&&u(n,e)})},[ee]),(0,EY.useEffect)(()=>{er!==f.overrideLayout&&l4(n,e,"overrideLayout",er)},[er]),(0,EY.useEffect)(()=>{ei!==f.doubleBorder&&l4(n,e,"doubleBorder",ei,!1,!1)},[ei]),(0,EY.useEffect)(()=>{l4(n,e,"borderColor",eo,!1,!1)},[eo]),(0,EY.useEffect)(()=>{l4(n,e,"showBarsOnScroll",ef,!1,!1)},[ef]),(0,EY.useEffect)(()=>{l4(n,e,"showMarginsOnScroll",ep,!1,!1)},[ep]),(0,EY.useEffect)(()=>{l4(n,e,"showRemainingTime",eg,!1,!1)},[eg]),(0,EY.useEffect)(()=>{l4(n,e,"showRemainingPages",ev,!1,!1)},[ev]),(0,EY.useEffect)(()=>{l4(n,e,"showProgressInfo",ew,!1,!1)},[ew]),(0,EY.useEffect)(()=>{l4(n,e,"progressStyle",eN,!1,!1)},[eN]),(0,EY.useEffect)(()=>{l4(n,e,"tapToToggleFooter",eE,!1,!1)},[eE]),(0,EY.useEffect)(()=>{if(el!==f.showHeader){if(el&&!f.vertical){let t=Math.max(0,4*Math.round((44-b.top)/4));f.marginTopPx=Math.max(f.marginTopPx,t),R(f.marginTopPx),c(e,f)}l4(n,e,"showHeader",el,!1,!1)}},[el]),(0,EY.useEffect)(()=>{if(eu!==f.showFooter){if(eu&&!f.vertical){let t=Math.max(0,4*Math.round((44-b.bottom)/4));f.marginBottomPx=Math.max(f.marginBottomPx,t),O(f.marginBottomPx),c(e,f)}l4(n,e,"showFooter",eu,!1,!1)}},[eu]),(0,EY.useEffect)(()=>{l4(n,e,"screenOrientation",eC,!1,!1),i?.isMobileApp&&(0,E3.lockScreenOrientation)({orientation:eC})},[eC]);let eT=(0,E4.getBookLangCode)(p?.bookDoc?.metadata?.language),eO=E6.MIGHT_BE_RTL_LANGS.includes(eT)||(0,E0.isCJKEnv)(),eL=f.vertical||ee.includes("vertical");return(0,EZ.jsxs)("div",{className:"my-4 w-full space-y-6",children:[(0,EZ.jsxs)("div",{className:"flex items-center justify-between",children:[(0,EZ.jsx)("h2",{className:"font-medium",children:r("Override Book Layout")}),(0,EZ.jsx)("input",{type:"checkbox",className:"toggle",checked:er,onChange:()=>en(!er)})]}),eO&&(0,EZ.jsxs)("div",{className:"flex items-center justify-between",children:[(0,EZ.jsx)("h2",{className:"font-medium",children:r("Writing Mode")}),(0,EZ.jsxs)("div",{className:"flex gap-4",children:[(0,EZ.jsx)("button",{title:r("Default"),className:`btn btn-ghost btn-circle btn-sm ${"auto"===ee?"btn-active bg-base-300":""}`,onClick:()=>et("auto"),children:(0,EZ.jsx)(iM,{})}),(0,EZ.jsx)("button",{title:r("Horizontal Direction"),className:`btn btn-ghost btn-circle btn-sm ${"horizontal-tb"===ee?"btn-active bg-base-300":""}`,onClick:()=>et("horizontal-tb"),children:(0,EZ.jsx)(ix,{})}),(0,EZ.jsx)("button",{title:r("Vertical Direction"),className:`btn btn-ghost btn-circle btn-sm ${"vertical-rl"===ee?"btn-active bg-base-300":""}`,onClick:()=>et("vertical-rl"),children:(0,EZ.jsx)(n0,{})}),(0,EZ.jsx)("button",{title:r("RTL Direction"),className:`btn btn-ghost btn-circle btn-sm ${"horizontal-rl"===ee?"btn-active bg-base-300":""}`,onClick:()=>et("horizontal-rl"),children:(0,EZ.jsx)(y_,{})})]})]}),f.vertical&&(0,EZ.jsxs)("div",{className:"w-full",children:[(0,EZ.jsx)("h2",{className:"mb-2 font-medium",children:r("Border Frame")}),(0,EZ.jsx)("div",{className:"card bg-base-100 border-base-200 border shadow",children:(0,EZ.jsxs)("div",{className:"divide-base-200 divide-y",children:[(0,EZ.jsxs)("div",{className:"config-item",children:[(0,EZ.jsx)("span",{className:"",children:r("Double Border")}),(0,EZ.jsx)("input",{type:"checkbox",className:"toggle",checked:ei,onChange:()=>ea(!ei)})]}),(0,EZ.jsxs)("div",{className:"config-item",children:[(0,EZ.jsx)("span",{className:"",children:r("Border Color")}),(0,EZ.jsxs)("div",{className:"flex gap-4",children:[(0,EZ.jsx)("button",{className:`btn btn-circle btn-sm bg-red-300 hover:bg-red-500 ${"red"===eo?"btn-active !bg-red-500":""}`,onClick:()=>es("red")}),(0,EZ.jsx)("button",{className:`btn btn-circle btn-sm bg-black/50 hover:bg-black ${"black"===eo?"btn-active !bg-black":""}`,onClick:()=>es("black")})]})]})]})})]}),(0,EZ.jsxs)("div",{className:"w-full",children:[(0,EZ.jsx)("h2",{className:"mb-2 font-medium",children:r("Paragraph")}),(0,EZ.jsx)("div",{className:"card bg-base-100 border-base-200 border shadow",children:(0,EZ.jsxs)("div",{className:"divide-base-200 divide-y",children:[(0,EZ.jsx)(ET,{label:r("Paragraph Margin"),value:g,onChange:m,min:0,max:4,step:.1}),(0,EZ.jsx)(ET,{label:r("Line Spacing"),value:v,onChange:y,min:1,max:3,step:.1}),"zh"!==eT&&(0,EZ.jsx)(ET,{label:r("Word Spacing"),value:x,onChange:w,min:-4,max:8,step:.5}),(0,EZ.jsx)(ET,{label:r("Letter Spacing"),value:_,onChange:S,min:-2,max:4,step:.5}),(0,EZ.jsx)(ET,{label:r("Text Indent"),value:E,onChange:k,min:-2,max:4,step:1}),(0,EZ.jsxs)("div",{className:"config-item",children:[(0,EZ.jsx)("span",{className:"",children:r("Full Justification")}),(0,EZ.jsx)("input",{type:"checkbox",className:"toggle",checked:N,onChange:()=>j(!N)})]}),(0,EZ.jsxs)("div",{className:"config-item",children:[(0,EZ.jsx)("span",{className:"",children:r("Hyphenation")}),(0,EZ.jsx)("input",{type:"checkbox",className:"toggle",checked:C,onChange:()=>M(!C)})]})]})})]}),(0,EZ.jsxs)("div",{className:"w-full",children:[(0,EZ.jsx)("h2",{className:"mb-2 font-medium",children:r("Page")}),(0,EZ.jsx)("div",{className:"card bg-base-100 border-base-200 border shadow",children:(0,EZ.jsxs)("div",{className:"divide-base-200 divide-y",children:[(0,EZ.jsx)(ET,{label:r("Top Margin (px)"),value:el&&!eL?A:D,onChange:el&&!eL?R:z,min:el&&!eL?Math.max(0,4*Math.round((44-b.top)/4)):0,max:88,step:4}),(0,EZ.jsx)(ET,{label:r("Bottom Margin (px)"),value:eu&&!eL?T:F,onChange:eu&&!eL?O:$,min:eu&&!eL?Math.max(0,4*Math.round((44-b.bottom)/4)):0,max:88,step:4}),(0,EZ.jsx)(ET,{label:r("Left Margin (px)"),value:eu&&eL?L:V,onChange:eu&&eL?I:q,min:0,max:88,step:4}),(0,EZ.jsx)(ET,{label:r("Right Margin (px)"),value:el&&eL?P:W,onChange:el&&eL?B:K,min:0,max:88,step:4}),(0,EZ.jsx)(ET,{label:r("Column Gap (%)"),value:U,onChange:H,min:0,max:30}),(0,EZ.jsx)(ET,{label:r("Maximum Number of Columns"),value:G,onChange:X,min:1,max:4}),(0,EZ.jsx)(ET,{label:r(f.vertical?"Maximum Column Height":"Maximum Column Width"),value:Z,onChange:Y,disabled:!1,min:200,max:9999,step:50}),(0,EZ.jsx)(ET,{label:r(f.vertical?"Maximum Column Width":"Maximum Column Height"),value:J,onChange:Q,disabled:!1,min:400,max:9999,step:50}),(0,EZ.jsxs)("div",{className:"config-item",children:[(0,EZ.jsx)("span",{className:"",children:r("Apply also in Scrolled Mode")}),(0,EZ.jsx)("input",{type:"checkbox",className:"toggle",checked:ep,onChange:()=>eb(!ep)})]})]})})]}),(0,EZ.jsxs)("div",{className:"w-full",children:[(0,EZ.jsx)("h2",{className:"mb-2 font-medium",children:r("Header & Footer")}),(0,EZ.jsx)("div",{className:"card bg-base-100 border-base-200 border shadow",children:(0,EZ.jsxs)("div",{className:"divide-base-200 divide-y",children:[(0,EZ.jsxs)("div",{className:"config-item",children:[(0,EZ.jsx)("span",{className:"",children:r("Show Header")}),(0,EZ.jsx)("input",{type:"checkbox",className:"toggle",checked:el,onChange:()=>ec(!el)})]}),(0,EZ.jsxs)("div",{className:"config-item",children:[(0,EZ.jsx)("span",{className:"",children:r("Show Footer")}),(0,EZ.jsx)("input",{type:"checkbox",className:"toggle",checked:eu,onChange:()=>ed(!eu)})]}),(0,EZ.jsxs)("div",{className:"config-item",children:[(0,EZ.jsx)("span",{className:"",children:r("Show Remaining Time")}),(0,EZ.jsx)("input",{type:"checkbox",className:"toggle",checked:eg,disabled:!eu,onChange:()=>{eg?em(!1):(em(!0),ey(!1))}})]}),(0,EZ.jsxs)("div",{className:"config-item",children:[(0,EZ.jsx)("span",{className:"",children:r("Show Remaining Pages")}),(0,EZ.jsx)("input",{type:"checkbox",className:"toggle",checked:ev,disabled:!eu,onChange:()=>{ev?ey(!1):(ey(!0),em(!1))}})]}),(0,EZ.jsxs)("div",{className:"config-item",children:[(0,EZ.jsx)("span",{className:"",children:r("Show Reading Progress")}),(0,EZ.jsx)("input",{type:"checkbox",className:"toggle",checked:ew,disabled:!eu,onChange:()=>eS(!ew)})]}),(0,EZ.jsxs)("div",{className:"config-item",children:[(0,EZ.jsx)("span",{className:"",children:r("Reading Progress Style")}),(0,EZ.jsx)(SM,{value:eN,onChange:e=>ej(e.target.value),options:[{value:"fraction",label:r("Page Number")},{value:"percentage",label:r("Percentage")}],disabled:!ew})]}),(0,EZ.jsxs)("div",{className:"config-item",children:[(0,EZ.jsx)("span",{className:"",children:r("Tap to Toggle Footer")}),(0,EZ.jsx)("input",{type:"checkbox",className:"toggle",checked:eE,disabled:!eu,onChange:()=>ek(!eE)})]}),(0,EZ.jsxs)("div",{className:"config-item",children:[(0,EZ.jsx)("span",{className:"",children:r("Apply also in Scrolled Mode")}),(0,EZ.jsx)("input",{type:"checkbox",className:"toggle",checked:ef,onChange:()=>eh(!ef)})]})]})})]}),i?.hasOrientationLock&&(0,EZ.jsxs)("div",{className:"w-full",children:[(0,EZ.jsx)("h2",{className:"mb-2 font-medium",children:r("Screen")}),(0,EZ.jsx)("div",{className:"card border-base-200 bg-base-100 border shadow",children:(0,EZ.jsx)("div",{className:"divide-base-200 divide-y",children:(0,EZ.jsxs)("div",{className:"config-item",children:[(0,EZ.jsx)("span",{className:"",children:r("Orientation")}),(0,EZ.jsxs)("div",{className:"flex gap-4",children:[(0,EZ.jsx)("div",{className:"lg:tooltip lg:tooltip-bottom","data-tip":r("Auto"),children:(0,EZ.jsx)("button",{className:`btn btn-ghost btn-circle btn-sm ${"auto"===eC?"btn-active bg-base-300":""}`,onClick:()=>eM("auto"),children:(0,EZ.jsx)(ik,{})})}),(0,EZ.jsx)("div",{className:"lg:tooltip lg:tooltip-bottom","data-tip":r("Portrait"),children:(0,EZ.jsx)("button",{className:`btn btn-ghost btn-circle btn-sm ${"portrait"===eC?"btn-active bg-base-300":""}`,onClick:()=>eM("portrait"),children:(0,EZ.jsx)(Eg,{})})}),(0,EZ.jsx)("div",{className:"lg:tooltip lg:tooltip-bottom","data-tip":r("Landscape"),children:(0,EZ.jsx)("button",{className:`btn btn-ghost btn-circle btn-sm ${"landscape"===eC?"btn-active bg-base-300":""}`,onClick:()=>eM("landscape"),children:(0,EZ.jsx)(Eb,{})})})]})]})})})]})]})};var E8=a,E9=p,E7=w,ke=l,kt=y,kr=x,kn=e.i(918438),ki=e.i(57338),ka=R,ko=a,ks=p,kl=T,kc=R,ku=x,kd=a,kf=p,kh=p,kp=e.i(521783),kb=p,kg=kp,km=function(e,t,r,n,i){var a=i.clientWidth,o=i.clientHeight,s="number"==typeof e.pageX?e.pageX:e.touches[0].pageX,l="number"==typeof e.pageY?e.pageY:e.touches[0].pageY,c=s-(i.getBoundingClientRect().left+window.pageXOffset),u=l-(i.getBoundingClientRect().top+window.pageYOffset);if("vertical"===r){var d=void 0;if(d=u<0?0:u>o?1:Math.round(100*u/o)/100,t.a!==d)return{h:t.h,s:t.s,l:t.l,a:d,source:"rgb"}}else{var f=void 0;if(n!==(f=c<0?0:c>a?1:Math.round(100*c/a)/100))return{h:t.h,s:t.s,l:t.l,a:f,source:"rgb"}}return null},kv=p,ky=kp,kx={},kw=function(e,t,r,n){if("undefined"==typeof document&&!n)return null;var i=n?new n:document.createElement("canvas");i.width=2*r,i.height=2*r;var a=i.getContext("2d");return a?(a.fillStyle=e,a.fillRect(0,0,i.width,i.height),a.fillStyle=t,a.fillRect(0,0,r,r),a.translate(r,r),a.fillRect(0,0,r,r),i.toDataURL()):null},k_=function(e,t,r,n){var i=e+"-"+t+"-"+r+(n?"-server":"");if(kx[i])return kx[i];var a=kw(e,t,r,n);return kx[i]=a,a},kS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kE=function(e){var t=e.white,r=e.grey,n=e.size,i=e.renderers,a=e.borderRadius,o=e.boxShadow,s=e.children,l=(0,ky.default)({default:{grid:{borderRadius:a,boxShadow:o,absolute:"0px 0px 0px 0px",background:"url("+k_(t,r,n,i.canvas)+") center left"}}});return(0,kv.isValidElement)(s)?kv.default.cloneElement(s,kS({},s.props,{style:kS({},s.props.style,l.grid)})):kv.default.createElement("div",{style:l.grid})};kE.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}};let kk=kE;var kN=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kj=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function kC(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function kM(e,t){if(!e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}function kA(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}let kR=function(e){function t(){kC(this,t);for(var e,r,n,i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return r=n=kM(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),n.handleChange=function(e){var t=km(e,n.props.hsl,n.props.direction,n.props.a,n.container);t&&"function"==typeof n.props.onChange&&n.props.onChange(t,e)},n.handleMouseDown=function(e){n.handleChange(e),window.addEventListener("mousemove",n.handleChange),window.addEventListener("mouseup",n.handleMouseUp)},n.handleMouseUp=function(){n.unbindEventListeners()},n.unbindEventListeners=function(){window.removeEventListener("mousemove",n.handleChange),window.removeEventListener("mouseup",n.handleMouseUp)},kM(n,r)}return kA(t,e),kj(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var e=this,t=this.props.rgb,r=(0,kg.default)({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+t.r+","+t.g+","+t.b+", 0) 0%,\n           rgba("+t.r+","+t.g+","+t.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:100*t.a+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+t.r+","+t.g+","+t.b+", 0) 0%,\n           rgba("+t.r+","+t.g+","+t.b+", 1) 100%)"},pointer:{left:0,top:100*t.a+"%"}},overwrite:kN({},this.props.style)},{vertical:"vertical"===this.props.direction,overwrite:!0});return kb.default.createElement("div",{style:r.alpha},kb.default.createElement("div",{style:r.checkboard},kb.default.createElement(kk,{renderers:this.props.renderers})),kb.default.createElement("div",{style:r.gradient}),kb.default.createElement("div",{style:r.container,ref:function(t){return e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},kb.default.createElement("div",{style:r.pointer},this.props.pointer?kb.default.createElement(this.props.pointer,this.props):kb.default.createElement("div",{style:r.slider}))))}}]),t}(kb.PureComponent||kb.Component);var kT=p,kO=kp,kL=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function kI(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kP(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function kB(e,t){if(!e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}function kD(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var kz=1,kF=38,k$=[38,40],kU=function(e){return k$.indexOf(e)>-1},kH=function(e){return Number(String(e).replace(/%/g,""))},kV=1;let kq=function(e){function t(e){kP(this,t);var r=kB(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.handleBlur=function(){r.state.blurValue&&r.setState({value:r.state.blurValue,blurValue:null})},r.handleChange=function(e){r.setUpdatedValue(e.target.value,e)},r.handleKeyDown=function(e){var t=kH(e.target.value);if(!isNaN(t)&&kU(e.keyCode)){var n=r.getArrowOffset(),i=e.keyCode===kF?t+n:t-n;r.setUpdatedValue(i,e)}},r.handleDrag=function(e){if(r.props.dragLabel){var t=Math.round(r.props.value+e.movementX);t>=0&&t<=r.props.dragMax&&r.props.onChange&&r.props.onChange(r.getValueObjectWithLabel(t),e)}},r.handleMouseDown=function(e){r.props.dragLabel&&(e.preventDefault(),r.handleDrag(e),window.addEventListener("mousemove",r.handleDrag),window.addEventListener("mouseup",r.handleMouseUp))},r.handleMouseUp=function(){r.unbindEventListeners()},r.unbindEventListeners=function(){window.removeEventListener("mousemove",r.handleDrag),window.removeEventListener("mouseup",r.handleMouseUp)},r.state={value:String(e.value).toUpperCase(),blurValue:String(e.value).toUpperCase()},r.inputId="rc-editable-input-"+kV++,r}return kD(t,e),kL(t,[{key:"componentDidUpdate",value:function(e,t){this.props.value!==this.state.value&&(e.value!==this.props.value||t.value!==this.state.value)&&(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(e){return kI({},this.props.label,e)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||kz}},{key:"setUpdatedValue",value:function(e,t){var r=this.props.label?this.getValueObjectWithLabel(e):e;this.props.onChange&&this.props.onChange(r,t),this.setState({value:e})}},{key:"render",value:function(){var e=this,t=(0,kO.default)({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return kT.default.createElement("div",{style:t.wrap},kT.default.createElement("input",{id:this.inputId,style:t.input,ref:function(t){return e.input=t},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?kT.default.createElement("label",{htmlFor:this.inputId,style:t.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),t}(kT.PureComponent||kT.Component);var kW=p,kK=kp,kG=function(e,t,r,n){var i=n.clientWidth,a=n.clientHeight,o="number"==typeof e.pageX?e.pageX:e.touches[0].pageX,s="number"==typeof e.pageY?e.pageY:e.touches[0].pageY,l=o-(n.getBoundingClientRect().left+window.pageXOffset),c=s-(n.getBoundingClientRect().top+window.pageYOffset);if("vertical"===t){var u=void 0;if(u=c<0?359:c>a?0:360*(-(100*c/a)+100)/100,r.h!==u)return{h:u,s:r.s,l:r.l,a:r.a,source:"hsl"}}else{var d=void 0;if(d=l<0?0:l>i?359:100*l/i*360/100,r.h!==d)return{h:d,s:r.s,l:r.l,a:r.a,source:"hsl"}}return null},kX=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function kZ(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function kY(e,t){if(!e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}function kJ(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}let kQ=function(e){function t(){kZ(this,t);for(var e,r,n,i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return r=n=kY(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),n.handleChange=function(e){var t=kG(e,n.props.direction,n.props.hsl,n.container);t&&"function"==typeof n.props.onChange&&n.props.onChange(t,e)},n.handleMouseDown=function(e){n.handleChange(e),window.addEventListener("mousemove",n.handleChange),window.addEventListener("mouseup",n.handleMouseUp)},n.handleMouseUp=function(){n.unbindEventListeners()},kY(n,r)}return kJ(t,e),kX(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var e=this,t=this.props.direction,r=void 0===t?"horizontal":t,n=(0,kK.default)({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:100*this.props.hsl.h/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-(100*this.props.hsl.h/360)+100+"%"}}},{vertical:"vertical"===r});return kW.default.createElement("div",{style:n.hue},kW.default.createElement("div",{className:"hue-"+r,style:n.container,ref:function(t){return e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},kW.default.createElement("style",null,"\n            .hue-horizontal {\n              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0\n                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n              background: -webkit-linear-gradient(to right, #f00 0%, #ff0\n                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n            }\n\n            .hue-vertical {\n              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,\n                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,\n                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n            }\n          "),kW.default.createElement("div",{style:n.pointer},this.props.pointer?kW.default.createElement(this.props.pointer,this.props):kW.default.createElement("div",{style:n.slider}))))}}]),t}(kW.PureComponent||kW.Component);var k0=p,k1=e.i(203537),k2=kp;let k3=function(){this.__data__=[],this.size=0},k4=function(e,t){return e===t||e!=e&&t!=t},k6=function(e,t){for(var r=e.length;r--;)if(k4(e[r][0],t))return r;return -1};var k5=Array.prototype.splice;let k8=function(e){var t=this.__data__,r=k6(t,e);return!(r<0)&&(r==t.length-1?t.pop():k5.call(t,r,1),--this.size,!0)},k9=function(e){var t=this.__data__,r=k6(t,e);return r<0?void 0:t[r][1]},k7=function(e){return k6(this.__data__,e)>-1},Ne=function(e,t){var r=this.__data__,n=k6(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this};function Nt(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Nt.prototype.clear=k3,Nt.prototype.delete=k8,Nt.prototype.get=k9,Nt.prototype.has=k7,Nt.prototype.set=Ne;let Nr=Nt,Nn=function(){this.__data__=new Nr,this.size=0},Ni=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},Na=function(e){return this.__data__.get(e)},No=function(e){return this.__data__.has(e)},Ns=e.g&&e.g.Object===Object&&e.g;var Nl="object"==typeof self&&self&&self.Object===Object&&self;let Nc=Ns||Nl||Function("return this")(),Nu=Nc.Symbol;var Nd=Object.prototype,Nf=Nd.hasOwnProperty,Nh=Nd.toString,Np=Nu?Nu.toStringTag:void 0;let Nb=function(e){var t=Nf.call(e,Np),r=e[Np];try{e[Np]=void 0;var n=!0}catch(e){}var i=Nh.call(e);return n&&(t?e[Np]=r:delete e[Np]),i};var Ng=Object.prototype.toString;let Nm=function(e){return Ng.call(e)};var Nv="[object Null]",Ny="[object Undefined]",Nx=Nu?Nu.toStringTag:void 0;let Nw=function(e){return null==e?void 0===e?Ny:Nv:Nx&&Nx in Object(e)?Nb(e):Nm(e)},N_=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};var NS="[object AsyncFunction]",NE="[object Function]",Nk="[object GeneratorFunction]",NN="[object Proxy]";let Nj=function(e){if(!N_(e))return!1;var t=Nw(e);return t==NE||t==Nk||t==NS||t==NN},NC=Nc["__core-js_shared__"];var NM=function(){var e=/[^.]+$/.exec(NC&&NC.keys&&NC.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();let NA=function(e){return!!NM&&NM in e};var NR=Function.prototype.toString;let NT=function(e){if(null!=e){try{return NR.call(e)}catch(e){}try{return e+""}catch(e){}}return""};var NO=/[\\^$.*+?()[\]{}|]/g,NL=/^\[object .+?Constructor\]$/,NI=Object.prototype,NP=Function.prototype.toString,NB=NI.hasOwnProperty,ND=RegExp("^"+NP.call(NB).replace(NO,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");let Nz=function(e){return!(!N_(e)||NA(e))&&(Nj(e)?ND:NL).test(NT(e))},NF=function(e,t){return null==e?void 0:e[t]},N$=function(e,t){var r=NF(e,t);return Nz(r)?r:void 0},NU=N$(Nc,"Map"),NH=N$(Object,"create"),NV=function(){this.__data__=NH?NH(null):{},this.size=0},Nq=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=!!t,t};var NW="__lodash_hash_undefined__",NK=Object.prototype.hasOwnProperty;let NG=function(e){var t=this.__data__;if(NH){var r=t[e];return r===NW?void 0:r}return NK.call(t,e)?t[e]:void 0};var NX=Object.prototype.hasOwnProperty;let NZ=function(e){var t=this.__data__;return NH?void 0!==t[e]:NX.call(t,e)};var NY="__lodash_hash_undefined__";let NJ=function(e,t){var r=this.__data__;return this.size+=+!this.has(e),r[e]=NH&&void 0===t?NY:t,this};function NQ(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}NQ.prototype.clear=NV,NQ.prototype.delete=Nq,NQ.prototype.get=NG,NQ.prototype.has=NZ,NQ.prototype.set=NJ;let N0=NQ,N1=function(){this.size=0,this.__data__={hash:new N0,map:new(NU||Nr),string:new N0}},N2=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e},N3=function(e,t){var r=e.__data__;return N2(t)?r["string"==typeof t?"string":"hash"]:r.map},N4=function(e){var t=N3(this,e).delete(e);return this.size-=!!t,t},N6=function(e){return N3(this,e).get(e)},N5=function(e){return N3(this,e).has(e)},N8=function(e,t){var r=N3(this,e),n=r.size;return r.set(e,t),this.size+=+(r.size!=n),this};function N9(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}N9.prototype.clear=N1,N9.prototype.delete=N4,N9.prototype.get=N6,N9.prototype.has=N5,N9.prototype.set=N8;let N7=N9;var je=200;let jt=function(e,t){var r=this.__data__;if(r instanceof Nr){var n=r.__data__;if(!NU||n.length<je-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new N7(n)}return r.set(e,t),this.size=r.size,this};function jr(e){var t=this.__data__=new Nr(e);this.size=t.size}jr.prototype.clear=Nn,jr.prototype.delete=Ni,jr.prototype.get=Na,jr.prototype.has=No,jr.prototype.set=jt;let jn=jr,ji=function(){try{var e=N$(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),ja=function(e,t,r){"__proto__"==t&&ji?ji(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r},jo=function(e,t,r){(void 0===r||k4(e[t],r))&&(void 0!==r||t in e)||ja(e,t,r)},js=function(e){return function(e,t,r){for(var n=-1,i=Object(e),a=r(e),o=a.length;o--;){var s=a[++n];if(!1===t(i[s],s,i))break}return e}}(),jl=function(e,t){if(t)return e.slice();var r=e.length,n=new e.constructor(r);return e.copy(n),n},jc=Nc.Uint8Array,ju=function(e){var t=new e.constructor(e.byteLength);return new jc(t).set(new jc(e)),t},jd=function(e,t){var r=t?ju(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)},jf=function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t};var jh=Object.create;let jp=function(){function e(){}return function(t){if(!N_(t))return{};if(jh)return jh(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),jb=function(e,t){return function(r){return e(t(r))}},jg=jb(Object.getPrototypeOf,Object);var jm=Object.prototype;let jv=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||jm)},jy=function(e){return"function"!=typeof e.constructor||jv(e)?{}:jp(jg(e))},jx=function(e){return null!=e&&"object"==typeof e};var jw="[object Arguments]";let j_=function(e){return jx(e)&&Nw(e)==jw};var jS=Object.prototype,jE=jS.hasOwnProperty,jk=jS.propertyIsEnumerable;let jN=j_(function(){return arguments}())?j_:function(e){return jx(e)&&jE.call(e,"callee")&&!jk.call(e,"callee")},jj=Array.isArray;var jC=0x1fffffffffffff;let jM=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=jC},jA=function(e){return null!=e&&jM(e.length)&&!Nj(e)},jR=function(e){return jx(e)&&jA(e)},jT=function(){return!1},jO=jT;var jL="[object Object]",jI=Object.prototype,jP=Function.prototype.toString,jB=jI.hasOwnProperty,jD=jP.call(Object);let jz=function(e){if(!jx(e)||Nw(e)!=jL)return!1;var t=jg(e);if(null===t)return!0;var r=jB.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&jP.call(r)==jD};var jF="[object Arguments]",j$="[object Array]",jU="[object Boolean]",jH="[object Date]",jV="[object Error]",jq="[object Function]",jW="[object Map]",jK="[object Number]",jG="[object Object]",jX="[object RegExp]",jZ="[object Set]",jY="[object String]",jJ="[object WeakMap]",jQ="[object ArrayBuffer]",j0="[object DataView]",j1="[object Float64Array]",j2="[object Int8Array]",j3="[object Int16Array]",j4="[object Int32Array]",j6="[object Uint8Array]",j5="[object Uint8ClampedArray]",j8="[object Uint16Array]",j9="[object Uint32Array]",j7={};j7["[object Float32Array]"]=j7[j1]=j7[j2]=j7[j3]=j7[j4]=j7[j6]=j7[j5]=j7[j8]=j7[j9]=!0,j7[jF]=j7[j$]=j7[jQ]=j7[jU]=j7[j0]=j7[jH]=j7[jV]=j7[jq]=j7[jW]=j7[jK]=j7[jG]=j7[jX]=j7[jZ]=j7[jY]=j7[jJ]=!1;let Ce=function(e){return jx(e)&&jM(e.length)&&!!j7[Nw(e)]},Ct=function(e){return function(t){return e(t)}};var Cr=!1,Cn=!1;let Ci=function(){try{return Cr&&Cr.require&&Cr.require("util").types,Cn&&Cn.binding&&Cn.binding("util")}catch(e){}}();var Ca=Ci&&Ci.isTypedArray;let Co=Ca?Ct(Ca):Ce,Cs=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]};var Cl=Object.prototype.hasOwnProperty;let Cc=function(e,t,r){var n=e[t];Cl.call(e,t)&&k4(n,r)&&(void 0!==r||t in e)||ja(e,t,r)},Cu=function(e,t,r,n){var i=!r;r||(r={});for(var a=-1,o=t.length;++a<o;){var s=t[a],l=n?n(r[s],e[s],s,r,e):void 0;void 0===l&&(l=e[s]),i?ja(r,s,l):Cc(r,s,l)}return r},Cd=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n};var Cf=0x1fffffffffffff,Ch=/^(?:0|[1-9]\d*)$/;let Cp=function(e,t){var r=typeof e;return!!(t=null==t?Cf:t)&&("number"==r||"symbol"!=r&&Ch.test(e))&&e>-1&&e%1==0&&e<t};var Cb=Object.prototype.hasOwnProperty;let Cg=function(e,t){var r=jj(e),n=!r&&jN(e),i=!r&&!n&&jO(e),a=!r&&!n&&!i&&Co(e),o=r||n||i||a,s=o?Cd(e.length,String):[],l=s.length;for(var c in e)(t||Cb.call(e,c))&&!(o&&("length"==c||i&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Cp(c,l)))&&s.push(c);return s},Cm=function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t};var Cv=Object.prototype.hasOwnProperty;let Cy=function(e){if(!N_(e))return Cm(e);var t=jv(e),r=[];for(var n in e)"constructor"==n&&(t||!Cv.call(e,n))||r.push(n);return r},Cx=function(e){return jA(e)?Cg(e,!0):Cy(e)},Cw=function(e){return Cu(e,Cx(e))},C_=function(e,t,r,n,i,a,o){var s=Cs(e,r),l=Cs(t,r),c=o.get(l);if(c)return void jo(e,r,c);var u=a?a(s,l,r+"",e,t,o):void 0,d=void 0===u;if(d){var f=jj(l),h=!f&&jO(l),p=!f&&!h&&Co(l);u=l,f||h||p?jj(s)?u=s:jR(s)?u=jf(s):h?(d=!1,u=jl(l,!0)):p?(d=!1,u=jd(l,!0)):u=[]:jz(l)||jN(l)?(u=s,jN(s)?u=Cw(s):(!N_(s)||Nj(s))&&(u=jy(l))):d=!1}d&&(o.set(l,u),i(u,l,n,a,o),o.delete(l)),jo(e,r,u)};function CS(e,t,r,n,i){e!==t&&js(t,function(a,o){if(i||(i=new jn),N_(a))C_(e,t,o,r,CS,n,i);else{var s=n?n(Cs(e,o),a,o+"",e,t,i):void 0;void 0===s&&(s=a),jo(e,o,s)}},Cx)}let CE=CS,Ck=function(e){return e},CN=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)};var Cj=Math.max;let CC=function(e,t,r){return t=Cj(void 0===t?e.length-1:t,0),function(){for(var n=arguments,i=-1,a=Cj(n.length-t,0),o=Array(a);++i<a;)o[i]=n[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=n[i];return s[t]=r(o),CN(e,this,s)}},CM=function(e){return function(){return e}};var CA=800,CR=16,CT=Date.now;let CO=function(e){var t=0,r=0;return function(){var n=CT(),i=CR-(n-r);if(r=n,i>0){if(++t>=CA)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(ji?function(e,t){return ji(e,"toString",{configurable:!0,enumerable:!1,value:CM(t),writable:!0})}:Ck),CL=function(e,t){return CO(CC(e,t,Ck),e+"")},CI=function(e,t,r){if(!N_(r))return!1;var n=typeof t;return("number"==n?!!(jA(r)&&Cp(t,r.length)):"string"==n&&t in r)&&k4(r[t],e)},CP=function(e){return CL(function(t,r){var n=-1,i=r.length,a=i>1?r[i-1]:void 0,o=i>2?r[2]:void 0;for(a=e.length>3&&"function"==typeof a?(i--,a):void 0,o&&CI(r[0],r[1],o)&&(a=i<3?void 0:a,i=1),t=Object(t);++n<i;){var s=r[n];s&&e(t,s,n,a)}return t})}(function(e,t,r){CE(e,t,r)});var CB=function(e){var t=e.zDepth,r=e.radius,n=e.background,i=e.children,a=e.styles,o=void 0===a?{}:a,s=(0,k2.default)(CP({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+t+"px "+4*t+"px rgba(0,0,0,.24)",borderRadius:r,background:n}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},o),{"zDepth-1":1===t});return k0.default.createElement("div",{style:s.wrap},k0.default.createElement("div",{style:s.bg}),k0.default.createElement("div",{style:s.content},i))};CB.propTypes={background:k1.default.string,zDepth:k1.default.oneOf([0,1,2,3,4,5]),radius:k1.default.number,styles:k1.default.object},CB.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}};let CD=CB;var Cz=p,CF=kp;let C$=function(){return Nc.Date.now()};var CU=/\s/;let CH=function(e){for(var t=e.length;t--&&CU.test(e.charAt(t)););return t};var CV=/^\s+/;let Cq=function(e){return e?e.slice(0,CH(e)+1).replace(CV,""):e};var CW="[object Symbol]";let CK=function(e){return"symbol"==typeof e||jx(e)&&Nw(e)==CW};var CG=0/0,CX=/^[-+]0x[0-9a-f]+$/i,CZ=/^0b[01]+$/i,CY=/^0o[0-7]+$/i,CJ=parseInt;let CQ=function(e){if("number"==typeof e)return e;if(CK(e))return CG;if(N_(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=N_(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Cq(e);var r=CZ.test(e);return r||CY.test(e)?CJ(e.slice(2),r?2:8):CX.test(e)?CG:+e};var C0="Expected a function",C1=Math.max,C2=Math.min;let C3=function(e,t,r){var n,i,a,o,s,l,c=0,u=!1,d=!1,f=!0;if("function"!=typeof e)throw TypeError(C0);function h(t){var r=n,a=i;return n=i=void 0,c=t,o=e.apply(a,r)}function p(e){return c=e,s=setTimeout(m,t),u?h(e):o}function b(e){var r=e-l,n=e-c,i=t-r;return d?C2(i,a-n):i}function g(e){var r=e-l,n=e-c;return void 0===l||r>=t||r<0||d&&n>=a}function m(){var e=C$();if(g(e))return v(e);s=setTimeout(m,b(e))}function v(e){return(s=void 0,f&&n)?h(e):(n=i=void 0,o)}function y(){return void 0===s?o:v(C$())}function x(){var e=C$(),r=g(e);if(n=arguments,i=this,l=e,r){if(void 0===s)return p(l);if(d)return clearTimeout(s),s=setTimeout(m,t),h(l)}return void 0===s&&(s=setTimeout(m,t)),o}return t=CQ(t)||0,N_(r)&&(u=!!r.leading,a=(d="maxWait"in r)?C1(CQ(r.maxWait)||0,t):a,f="trailing"in r?!!r.trailing:f),x.cancel=function(){void 0!==s&&clearTimeout(s),c=0,n=l=i=s=void 0},x.flush=y,x};var C4="Expected a function";let C6=function(e,t,r){var n=!0,i=!0;if("function"!=typeof e)throw TypeError(C4);return N_(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),C3(e,t,{leading:n,maxWait:t,trailing:i})};var C5=function(e,t,r){var n=r.getBoundingClientRect(),i=n.width,a=n.height,o="number"==typeof e.pageX?e.pageX:e.touches[0].pageX,s="number"==typeof e.pageY?e.pageY:e.touches[0].pageY,l=o-(r.getBoundingClientRect().left+window.pageXOffset),c=s-(r.getBoundingClientRect().top+window.pageYOffset);l<0?l=0:l>i&&(l=i),c<0?c=0:c>a&&(c=a);var u=l/i,d=1-c/a;return{h:t.h,s:u,v:d,a:t.a,source:"hsv"}},C8=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function C9(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function C7(e,t){if(!e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}function Me(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}let Mt=function(e){function t(e){C9(this,t);var r=C7(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.handleChange=function(e){"function"==typeof r.props.onChange&&r.throttle(r.props.onChange,C5(e,r.props.hsl,r.container),e)},r.handleMouseDown=function(e){r.handleChange(e);var t=r.getContainerRenderWindow();t.addEventListener("mousemove",r.handleChange),t.addEventListener("mouseup",r.handleMouseUp)},r.handleMouseUp=function(){r.unbindEventListeners()},r.throttle=C6(function(e,t,r){e(t,r)},50),r}return Me(t,e),C8(t,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var e=this.container,t=window;!t.document.contains(e)&&t.parent!==t;)t=t.parent;return t}},{key:"unbindEventListeners",value:function(){var e=this.getContainerRenderWindow();e.removeEventListener("mousemove",this.handleChange),e.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var e=this,t=this.props.style||{},r=t.color,n=t.white,i=t.black,a=t.pointer,o=t.circle,s=(0,CF.default)({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-(100*this.props.hsv.v)+100+"%",left:100*this.props.hsv.s+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:"0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),\n            0 0 1px 2px rgba(0,0,0,.4)",borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:r,white:n,black:i,pointer:a,circle:o}},{custom:!!this.props.style});return Cz.default.createElement("div",{style:s.color,ref:function(t){return e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},Cz.default.createElement("style",null,"\n          .saturation-white {\n            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));\n            background: linear-gradient(to right, #fff, rgba(255,255,255,0));\n          }\n          .saturation-black {\n            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));\n            background: linear-gradient(to top, #000, rgba(0,0,0,0));\n          }\n        "),Cz.default.createElement("div",{style:s.white,className:"saturation-white"},Cz.default.createElement("div",{style:s.black,className:"saturation-black"}),Cz.default.createElement("div",{style:s.pointer},this.props.pointer?Cz.default.createElement(this.props.pointer,this.props):Cz.default.createElement("div",{style:s.circle}))))}}]),t}(Cz.PureComponent||Cz.Component);var Mr=p;let Mn=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e},Mi=jb(Object.keys,Object);var Ma=Object.prototype.hasOwnProperty;let Mo=function(e){if(!jv(e))return Mi(e);var t=[];for(var r in Object(e))Ma.call(e,r)&&"constructor"!=r&&t.push(r);return t},Ms=function(e){return jA(e)?Cg(e):Mo(e)},Ml=function(e,t){return function(t,r){if(null==t)return t;if(!jA(t))return e(t,r);for(var n=t.length,i=-1,a=Object(t);++i<n&&!1!==r(a[i],i,a););return t}}(function(e,t){return e&&js(e,t,Ms)}),Mc=function(e){return"function"==typeof e?e:Ck},Mu=function(e,t){return(jj(e)?Mn:Ml)(e,Mc(t))};var Md=e.i(93293),Mf=function(e){var t=0,r=0;return Mu(["r","g","b","a","h","s","l","v"],function(n){e[n]&&(t+=1,isNaN(e[n])||(r+=1),("s"===n||"l"===n)&&/^\d+%$/.test(e[n])&&(r+=1))}),t===r&&e},Mh=function(e,t){var r=e.hex?(0,Md.default)(e.hex):(0,Md.default)(e),n=r.toHsl(),i=r.toHsv(),a=r.toRgb(),o=r.toHex();return 0===n.s&&(n.h=t||0,i.h=t||0),{hsl:n,hex:"000000"===o&&0===a.a?"transparent":"#"+o,rgb:a,hsv:i,oldHue:e.h||t||n.h,source:e.source}},Mp=function(e){if("transparent"===e)return!0;var t=+("#"===String(e).charAt(0));return e.length!==4+t&&e.length<7+t&&(0,Md.default)(e).isValid()},Mb=function(e){if(!e)return"#fff";var t=Mh(e);return"transparent"===t.hex?"rgba(0,0,0,0.4)":(299*t.rgb.r+587*t.rgb.g+114*t.rgb.b)/1e3>=128?"#000":"#fff"},Mg=function(e,t){var r=e.replace("","");return(0,Md.default)(t+" ("+r+")")._ok},Mm=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Mv=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function My(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function Mx(e,t){if(!e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}function Mw(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}let M_=function(e){var t=function(t){function r(e){My(this,r);var t=Mx(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));return t.handleChange=function(e,r){if(Mf(e)){var n=Mh(e,e.h||t.state.oldHue);t.setState(n),t.props.onChangeComplete&&t.debounce(t.props.onChangeComplete,n,r),t.props.onChange&&t.props.onChange(n,r)}},t.handleSwatchHover=function(e,r){if(Mf(e)){var n=Mh(e,e.h||t.state.oldHue);t.props.onSwatchHover&&t.props.onSwatchHover(n,r)}},t.state=Mm({},Mh(e.color,0)),t.debounce=C3(function(e,t,r){e(t,r)},100),t}return Mw(r,t),Mv(r,[{key:"render",value:function(){var t={};return this.props.onSwatchHover&&(t.onSwatchHover=this.handleSwatchHover),Mr.default.createElement(e,Mm({},this.props,this.state,{onChange:this.handleChange},t))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return Mm({},Mh(e.color,t.oldHue))}}]),r}(Mr.PureComponent||Mr.Component);return t.propTypes=Mm({},e.propTypes),t.defaultProps=Mm({},e.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),t};var MS=p,ME=kp,Mk=p,MN=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Mj=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function MC(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function MM(e,t){if(!e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}function MA(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var MR=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},MT=13;let MO=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(r){function n(){MC(this,n);for(var e,t,r,i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=r=MM(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(a))),r.state={focus:!1},r.handleFocus=function(){return r.setState({focus:!0})},r.handleBlur=function(){return r.setState({focus:!1})},MM(r,t)}return MA(n,r),Mj(n,[{key:"render",value:function(){return Mk.default.createElement(t,{onFocus:this.handleFocus,onBlur:this.handleBlur},Mk.default.createElement(e,MN({},this.props,this.state)))}}]),n}(Mk.default.Component)}(function(e){var t=e.color,r=e.style,n=e.onClick,i=void 0===n?function(){}:n,a=e.onHover,o=e.title,s=void 0===o?t:o,l=e.children,c=e.focus,u=e.focusStyle,d=void 0===u?{}:u,f="transparent"===t,h=(0,ME.default)({default:{swatch:MR({background:t,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},r,c?d:{})}}),p=function(e){return i(t,e)},b=function(e){return e.keyCode===MT&&i(t,e)},g=function(e){return a(t,e)},m={};return a&&(m.onMouseOver=g),MS.default.createElement("div",MR({style:h.swatch,onClick:p,title:s,tabIndex:0,onKeyDown:b},m),l,f&&MS.default.createElement(kk,{borderRadius:h.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))});var ML=p,MI=kp,MP=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},MB=function(e){var t=e.rgb,r=e.hsl,n=e.width,i=e.height,a=e.onChange,o=e.direction,s=e.style,l=e.renderers,c=e.pointer,u=e.className,d=void 0===u?"":u,f=(0,kp.default)({default:{picker:{position:"relative",width:n,height:i},alpha:{radius:"2px",style:s}}});return kh.default.createElement("div",{style:f.picker,className:"alpha-picker "+d},kh.default.createElement(kR,MP({},f.alpha,{rgb:t,hsl:r,pointer:c,renderers:l,onChange:a,direction:o})))};MB.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:function(e){var t=e.direction,r=(0,MI.default)({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:"vertical"===t});return ML.default.createElement("div",{style:r.picker})}},M_(MB);var MD=p,Mz=k1,MF=kp,M$=p,MU=kp;let MH=function(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i};var MV="__lodash_hash_undefined__";let Mq=function(e){return this.__data__.set(e,MV),this},MW=function(e){return this.__data__.has(e)};function MK(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new N7;++t<r;)this.add(e[t])}MK.prototype.add=MK.prototype.push=Mq,MK.prototype.has=MW;let MG=MK,MX=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1},MZ=function(e,t){return e.has(t)};var MY=1,MJ=2;let MQ=function(e,t,r,n,i,a){var o=r&MY,s=e.length,l=t.length;if(s!=l&&!(o&&l>s))return!1;var c=a.get(e),u=a.get(t);if(c&&u)return c==t&&u==e;var d=-1,f=!0,h=r&MJ?new MG:void 0;for(a.set(e,t),a.set(t,e);++d<s;){var p=e[d],b=t[d];if(n)var g=o?n(b,p,d,t,e,a):n(p,b,d,e,t,a);if(void 0!==g){if(g)continue;f=!1;break}if(h){if(!MX(t,function(e,t){if(!MZ(h,t)&&(p===e||i(p,e,r,n,a)))return h.push(t)})){f=!1;break}}else if(!(p===b||i(p,b,r,n,a))){f=!1;break}}return a.delete(e),a.delete(t),f},M0=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r},M1=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r};var M2=1,M3=2,M4="[object Boolean]",M6="[object Date]",M5="[object Error]",M8="[object Map]",M9="[object Number]",M7="[object RegExp]",Ae="[object Set]",At="[object String]",Ar="[object Symbol]",An="[object ArrayBuffer]",Ai="[object DataView]",Aa=Nu?Nu.prototype:void 0,Ao=Aa?Aa.valueOf:void 0;let As=function(e,t,r,n,i,a,o){switch(r){case Ai:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)break;e=e.buffer,t=t.buffer;case An:if(e.byteLength!=t.byteLength||!a(new jc(e),new jc(t)))break;return!0;case M4:case M6:case M9:return k4(+e,+t);case M5:return e.name==t.name&&e.message==t.message;case M7:case At:return e==t+"";case M8:var s=M0;case Ae:var l=n&M2;if(s||(s=M1),e.size!=t.size&&!l)break;var c=o.get(e);if(c)return c==t;n|=M3,o.set(e,t);var u=MQ(s(e),s(t),n,i,a,o);return o.delete(e),u;case Ar:if(Ao)return Ao.call(e)==Ao.call(t)}return!1},Al=function(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e},Ac=function(e,t,r){var n=t(e);return jj(e)?n:Al(n,r(e))},Au=function(e,t){for(var r=-1,n=null==e?0:e.length,i=0,a=[];++r<n;){var o=e[r];t(o,r,e)&&(a[i++]=o)}return a},Ad=function(){return[]};var Af=Object.prototype.propertyIsEnumerable,Ah=Object.getOwnPropertySymbols;let Ap=Ah?function(e){return null==e?[]:Au(Ah(e=Object(e)),function(t){return Af.call(e,t)})}:Ad,Ab=function(e){return Ac(e,Ms,Ap)};var Ag=1,Am=Object.prototype.hasOwnProperty;let Av=function(e,t,r,n,i,a){var o=r&Ag,s=Ab(e),l=s.length;if(l!=Ab(t).length&&!o)return!1;for(var c=l;c--;){var u=s[c];if(!(o?u in t:Am.call(t,u)))return!1}var d=a.get(e),f=a.get(t);if(d&&f)return d==t&&f==e;var h=!0;a.set(e,t),a.set(t,e);for(var p=o;++c<l;){var b=e[u=s[c]],g=t[u];if(n)var m=o?n(g,b,u,t,e,a):n(b,g,u,e,t,a);if(!(void 0===m?b===g||i(b,g,r,n,a):m)){h=!1;break}p||(p="constructor"==u)}if(h&&!p){var v=e.constructor,y=t.constructor;v!=y&&"constructor"in e&&"constructor"in t&&!("function"==typeof v&&v instanceof v&&"function"==typeof y&&y instanceof y)&&(h=!1)}return a.delete(e),a.delete(t),h},Ay=N$(Nc,"DataView"),Ax=N$(Nc,"Promise"),Aw=N$(Nc,"Set"),A_=N$(Nc,"WeakMap");var AS="[object Map]",AE="[object Object]",Ak="[object Promise]",AN="[object Set]",Aj="[object WeakMap]",AC="[object DataView]",AM=NT(Ay),AA=NT(NU),AR=NT(Ax),AT=NT(Aw),AO=NT(A_),AL=Nw;(Ay&&AL(new Ay(new ArrayBuffer(1)))!=AC||NU&&AL(new NU)!=AS||Ax&&AL(Ax.resolve())!=Ak||Aw&&AL(new Aw)!=AN||A_&&AL(new A_)!=Aj)&&(AL=function(e){var t=Nw(e),r=t==AE?e.constructor:void 0,n=r?NT(r):"";if(n)switch(n){case AM:return AC;case AA:return AS;case AR:return Ak;case AT:return AN;case AO:return Aj}return t});let AI=AL;var AP=1,AB="[object Arguments]",AD="[object Array]",Az="[object Object]",AF=Object.prototype.hasOwnProperty;let A$=function(e,t,r,n,i,a){var o=jj(e),s=jj(t),l=o?AD:AI(e),c=s?AD:AI(t);l=l==AB?Az:l,c=c==AB?Az:c;var u=l==Az,d=c==Az,f=l==c;if(f&&jO(e)){if(!jO(t))return!1;o=!0,u=!1}if(f&&!u)return a||(a=new jn),o||Co(e)?MQ(e,t,r,n,i,a):As(e,t,l,r,n,i,a);if(!(r&AP)){var h=u&&AF.call(e,"__wrapped__"),p=d&&AF.call(t,"__wrapped__");if(h||p){var b=h?e.value():e,g=p?t.value():t;return a||(a=new jn),i(b,g,r,n,a)}}return!!f&&(a||(a=new jn),Av(e,t,r,n,i,a))};function AU(e,t,r,n,i){return e===t||(null!=e&&null!=t&&(jx(e)||jx(t))?A$(e,t,r,n,AU,i):e!=e&&t!=t)}let AH=AU;var AV=1,Aq=2;let AW=function(e,t,r,n){var i=r.length,a=i,o=!n;if(null==e)return!a;for(e=Object(e);i--;){var s=r[i];if(o&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<a;){var l=(s=r[i])[0],c=e[l],u=s[1];if(o&&s[2]){if(void 0===c&&!(l in e))return!1}else{var d=new jn;if(n)var f=n(c,u,l,e,t,d);if(!(void 0===f?AH(u,c,AV|Aq,n,d):f))return!1}}return!0},AK=function(e){return e==e&&!N_(e)},AG=function(e){for(var t=Ms(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,AK(i)]}return t},AX=function(e,t){return function(r){return null!=r&&r[e]===t&&(void 0!==t||e in Object(r))}},AZ=function(e){var t=AG(e);return 1==t.length&&t[0][2]?AX(t[0][0],t[0][1]):function(r){return r===e||AW(r,e,t)}};var AY=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,AJ=/^\w*$/;let AQ=function(e,t){if(jj(e))return!1;var r=typeof e;return!!("number"==r||"symbol"==r||"boolean"==r||null==e||CK(e))||AJ.test(e)||!AY.test(e)||null!=t&&e in Object(t)};var A0="Expected a function";function A1(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw TypeError(A0);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],a=r.cache;if(a.has(i))return a.get(i);var o=e.apply(this,n);return r.cache=a.set(i,o)||a,o};return r.cache=new(A1.Cache||N7),r}A1.Cache=N7;let A2=A1;var A3=500,A4=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,A6=/\\(\\)?/g;let A5=function(e){var t=A2(e,function(e){return r.size===A3&&r.clear(),e}),r=t.cache;return t}(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(A4,function(e,r,n,i){t.push(n?i.replace(A6,"$1"):r||e)}),t});var A8=1/0,A9=Nu?Nu.prototype:void 0,A7=A9?A9.toString:void 0;function Re(e){if("string"==typeof e)return e;if(jj(e))return MH(e,Re)+"";if(CK(e))return A7?A7.call(e):"";var t=e+"";return"0"==t&&1/e==-A8?"-0":t}let Rt=Re,Rr=function(e){return null==e?"":Rt(e)},Rn=function(e,t){return jj(e)?e:AQ(e,t)?[e]:A5(Rr(e))};var Ri=1/0;let Ra=function(e){if("string"==typeof e||CK(e))return e;var t=e+"";return"0"==t&&1/e==-Ri?"-0":t},Ro=function(e,t){t=Rn(t,e);for(var r=0,n=t.length;null!=e&&r<n;)e=e[Ra(t[r++])];return r&&r==n?e:void 0},Rs=function(e,t,r){var n=null==e?void 0:Ro(e,t);return void 0===n?r:n},Rl=function(e,t){return null!=e&&t in Object(e)},Rc=function(e,t,r){t=Rn(t,e);for(var n=-1,i=t.length,a=!1;++n<i;){var o=Ra(t[n]);if(!(a=null!=e&&r(e,o)))break;e=e[o]}return a||++n!=i?a:!!(i=null==e?0:e.length)&&jM(i)&&Cp(o,i)&&(jj(e)||jN(e))},Ru=function(e,t){return null!=e&&Rc(e,t,Rl)};var Rd=1,Rf=2;let Rh=function(e,t){return AQ(e)&&AK(t)?AX(Ra(e),t):function(r){var n=Rs(r,e);return void 0===n&&n===t?Ru(r,e):AH(t,n,Rd|Rf)}},Rp=function(e){return function(t){return null==t?void 0:t[e]}},Rb=function(e){return function(t){return Ro(t,e)}},Rg=function(e){return AQ(e)?Rp(Ra(e)):Rb(e)},Rm=function(e){return"function"==typeof e?e:null==e?Ck:"object"==typeof e?jj(e)?Rh(e[0],e[1]):AZ(e):Rg(e)},Rv=function(e,t){var r=-1,n=jA(e)?Array(e.length):[];return Ml(e,function(e,i,a){n[++r]=t(e,i,a)}),n},Ry=function(e,t){return(jj(e)?MH:Rv)(e,Rm(t,3))},Rx=function(e){var t=e.colors,r=e.onClick,n=e.onSwatchHover,i=(0,MU.default)({default:{swatches:{marginRight:"-10px"},swatch:{width:"22px",height:"22px",float:"left",marginRight:"10px",marginBottom:"10px",borderRadius:"4px"},clear:{clear:"both"}}});return M$.default.createElement("div",{style:i.swatches},Ry(t,function(e){return M$.default.createElement(MO,{key:e,color:e,style:i.swatch,onClick:r,onHover:n,focusStyle:{boxShadow:"0 0 4px "+e}})}),M$.default.createElement("div",{style:i.clear}))};var Rw=function(e){var t=e.onChange,r=e.onSwatchHover,n=e.hex,i=e.colors,a=e.width,o=e.triangle,s=e.styles,l=void 0===s?{}:s,c=e.className,u=void 0===c?"":c,d="transparent"===n,f=function(e,r){Mp(e)&&t({hex:e,source:"hex"},r)},h=(0,MF.default)(CP({default:{card:{width:a,background:"#fff",boxShadow:"0 1px rgba(0,0,0,.1)",borderRadius:"6px",position:"relative"},head:{height:"110px",background:n,borderRadius:"6px 6px 0 0",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},body:{padding:"10px"},label:{fontSize:"18px",color:Mb(n),position:"relative"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 10px 10px 10px",borderColor:"transparent transparent "+n+" transparent",position:"absolute",top:"-10px",left:"50%",marginLeft:"-10px"},input:{width:"100%",fontSize:"12px",color:"#666",border:"0px",outline:"none",height:"22px",boxShadow:"inset 0 0 0 1px #ddd",borderRadius:"4px",padding:"0 7px",boxSizing:"border-box"}},"hide-triangle":{triangle:{display:"none"}}},l),{"hide-triangle":"hide"===o});return MD.default.createElement("div",{style:h.card,className:"block-picker "+u},MD.default.createElement("div",{style:h.triangle}),MD.default.createElement("div",{style:h.head},d&&MD.default.createElement(kk,{borderRadius:"6px 6px 0 0"}),MD.default.createElement("div",{style:h.label},n)),MD.default.createElement("div",{style:h.body},MD.default.createElement(Rx,{colors:i,onClick:f,onSwatchHover:r}),MD.default.createElement(kq,{style:{input:h.input},value:n,onChange:f})))};Rw.propTypes={width:Mz.default.oneOfType([Mz.default.string,Mz.default.number]),colors:Mz.default.arrayOf(Mz.default.string),triangle:Mz.default.oneOf(["top","hide"]),styles:Mz.default.object},Rw.defaultProps={width:170,colors:["#D9E3F0","#F47373","#697689","#37D67A","#2CCCE4","#555555","#dce775","#ff8a65","#ba68c8"],triangle:"top",styles:{}},M_(Rw);var R_=p,RS=k1,RE=kp,Rk={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",a100:"#ff8a80",a200:"#ff5252",a400:"#ff1744",a700:"#d50000"},RN={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",a100:"#ff80ab",a200:"#ff4081",a400:"#f50057",a700:"#c51162"},Rj={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",a100:"#ea80fc",a200:"#e040fb",a400:"#d500f9",a700:"#aa00ff"},RC={50:"#ede7f6",100:"#d1c4e9",200:"#b39ddb",300:"#9575cd",400:"#7e57c2",500:"#673ab7",600:"#5e35b1",700:"#512da8",800:"#4527a0",900:"#311b92",a100:"#b388ff",a200:"#7c4dff",a400:"#651fff",a700:"#6200ea"},RM={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",a100:"#8c9eff",a200:"#536dfe",a400:"#3d5afe",a700:"#304ffe"},RA={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",a100:"#82b1ff",a200:"#448aff",a400:"#2979ff",a700:"#2962ff"},RR={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",a100:"#80d8ff",a200:"#40c4ff",a400:"#00b0ff",a700:"#0091ea"},RT={50:"#e0f7fa",100:"#b2ebf2",200:"#80deea",300:"#4dd0e1",400:"#26c6da",500:"#00bcd4",600:"#00acc1",700:"#0097a7",800:"#00838f",900:"#006064",a100:"#84ffff",a200:"#18ffff",a400:"#00e5ff",a700:"#00b8d4"},RO={50:"#e0f2f1",100:"#b2dfdb",200:"#80cbc4",300:"#4db6ac",400:"#26a69a",500:"#009688",600:"#00897b",700:"#00796b",800:"#00695c",900:"#004d40",a100:"#a7ffeb",a200:"#64ffda",a400:"#1de9b6",a700:"#00bfa5"},RL={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",a100:"#b9f6ca",a200:"#69f0ae",a400:"#00e676",a700:"#00c853"},RI={50:"#f1f8e9",100:"#dcedc8",200:"#c5e1a5",300:"#aed581",400:"#9ccc65",500:"#8bc34a",600:"#7cb342",700:"#689f38",800:"#558b2f",900:"#33691e",a100:"#ccff90",a200:"#b2ff59",a400:"#76ff03",a700:"#64dd17"},RP={50:"#f9fbe7",100:"#f0f4c3",200:"#e6ee9c",300:"#dce775",400:"#d4e157",500:"#cddc39",600:"#c0ca33",700:"#afb42b",800:"#9e9d24",900:"#827717",a100:"#f4ff81",a200:"#eeff41",a400:"#c6ff00",a700:"#aeea00"},RB={50:"#fffde7",100:"#fff9c4",200:"#fff59d",300:"#fff176",400:"#ffee58",500:"#ffeb3b",600:"#fdd835",700:"#fbc02d",800:"#f9a825",900:"#f57f17",a100:"#ffff8d",a200:"#ffff00",a400:"#ffea00",a700:"#ffd600"},RD={50:"#fff8e1",100:"#ffecb3",200:"#ffe082",300:"#ffd54f",400:"#ffca28",500:"#ffc107",600:"#ffb300",700:"#ffa000",800:"#ff8f00",900:"#ff6f00",a100:"#ffe57f",a200:"#ffd740",a400:"#ffc400",a700:"#ffab00"},Rz={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",a100:"#ffd180",a200:"#ffab40",a400:"#ff9100",a700:"#ff6d00"},RF={50:"#fbe9e7",100:"#ffccbc",200:"#ffab91",300:"#ff8a65",400:"#ff7043",500:"#ff5722",600:"#f4511e",700:"#e64a19",800:"#d84315",900:"#bf360c",a100:"#ff9e80",a200:"#ff6e40",a400:"#ff3d00",a700:"#dd2c00"},R$={50:"#efebe9",100:"#d7ccc8",200:"#bcaaa4",300:"#a1887f",400:"#8d6e63",500:"#795548",600:"#6d4c41",700:"#5d4037",800:"#4e342e",900:"#3e2723"},RU={50:"#eceff1",100:"#cfd8dc",200:"#b0bec5",300:"#90a4ae",400:"#78909c",500:"#607d8b",600:"#546e7a",700:"#455a64",800:"#37474f",900:"#263238"},RH=p,RV=kp,Rq=function(e){var t=e.color,r=e.onClick,n=e.onSwatchHover,i=e.hover,a=e.active,o=e.circleSize,s=e.circleSpacing,l=(0,RV.default)({default:{swatch:{width:o,height:o,marginRight:s,marginBottom:s,transform:"scale(1)",transition:"100ms transform ease"},Swatch:{borderRadius:"50%",background:"transparent",boxShadow:"inset 0 0 0 "+(o/2+1)+"px "+t,transition:"100ms box-shadow ease"}},hover:{swatch:{transform:"scale(1.2)"}},active:{Swatch:{boxShadow:"inset 0 0 0 3px "+t}}},{hover:i,active:a});return RH.default.createElement("div",{style:l.swatch},RH.default.createElement(MO,{style:l.Swatch,color:t,onClick:r,onHover:n,focusStyle:{boxShadow:l.Swatch.boxShadow+", 0 0 5px "+t}}))};Rq.defaultProps={circleSize:28,circleSpacing:14};let RW=(0,RV.handleHover)(Rq);var RK=function(e){var t=e.width,r=e.onChange,n=e.onSwatchHover,i=e.colors,a=e.hex,o=e.circleSize,s=e.styles,l=void 0===s?{}:s,c=e.circleSpacing,u=e.className,d=void 0===u?"":u,f=(0,RE.default)(CP({default:{card:{width:t,display:"flex",flexWrap:"wrap",marginRight:-c,marginBottom:-c}}},l)),h=function(e,t){return r({hex:e,source:"hex"},t)};return R_.default.createElement("div",{style:f.card,className:"circle-picker "+d},Ry(i,function(e){return R_.default.createElement(RW,{key:e,color:e,onClick:h,onSwatchHover:n,active:a===e.toLowerCase(),circleSize:o,circleSpacing:c})}))};RK.propTypes={width:RS.default.oneOfType([RS.default.string,RS.default.number]),circleSize:RS.default.number,circleSpacing:RS.default.number,styles:RS.default.object},RK.defaultProps={width:252,circleSize:28,circleSpacing:14,colors:[Rk["500"],RN["500"],Rj["500"],RC["500"],RM["500"],RA["500"],RR["500"],RT["500"],RO["500"],RL["500"],RI["500"],RP["500"],RB["500"],RD["500"],Rz["500"],RF["500"],R$["500"],RU["500"]],styles:{}},M_(RK);var RG=p,RX=k1,RZ=kp,RY=p,RJ=kp;let RQ=function(e){return void 0===e};var R0=e.i(770362),R1=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function R2(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function R3(e,t){if(!e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}function R4(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var R6=function(e){function t(e){R2(this,t);var r=R3(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.toggleViews=function(){"hex"===r.state.view?r.setState({view:"rgb"}):"rgb"===r.state.view?r.setState({view:"hsl"}):"hsl"===r.state.view&&(1===r.props.hsl.a?r.setState({view:"hex"}):r.setState({view:"rgb"}))},r.handleChange=function(e,t){e.hex?Mp(e.hex)&&r.props.onChange({hex:e.hex,source:"hex"},t):e.r||e.g||e.b?r.props.onChange({r:e.r||r.props.rgb.r,g:e.g||r.props.rgb.g,b:e.b||r.props.rgb.b,source:"rgb"},t):e.a?(e.a<0?e.a=0:e.a>1&&(e.a=1),r.props.onChange({h:r.props.hsl.h,s:r.props.hsl.s,l:r.props.hsl.l,a:Math.round(100*e.a)/100,source:"rgb"},t)):(e.h||e.s||e.l)&&("string"==typeof e.s&&e.s.includes("%")&&(e.s=e.s.replace("%","")),"string"==typeof e.l&&e.l.includes("%")&&(e.l=e.l.replace("%","")),1==e.s?e.s=.01:1==e.l&&(e.l=.01),r.props.onChange({h:e.h||r.props.hsl.h,s:Number(RQ(e.s)?r.props.hsl.s:e.s),l:Number(RQ(e.l)?r.props.hsl.l:e.l),source:"hsl"},t))},r.showHighlight=function(e){e.currentTarget.style.background="#eee"},r.hideHighlight=function(e){e.currentTarget.style.background="transparent"},1!==e.hsl.a&&"hex"===e.view?r.state={view:"rgb"}:r.state={view:e.view},r}return R4(t,e),R1(t,[{key:"render",value:function(){var e=this,t=(0,RJ.default)({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),r=void 0;return"hex"===this.state.view?r=RY.default.createElement("div",{style:t.fields,className:"flexbox-fix"},RY.default.createElement("div",{style:t.field},RY.default.createElement(kq,{style:{input:t.input,label:t.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):"rgb"===this.state.view?r=RY.default.createElement("div",{style:t.fields,className:"flexbox-fix"},RY.default.createElement("div",{style:t.field},RY.default.createElement(kq,{style:{input:t.input,label:t.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),RY.default.createElement("div",{style:t.field},RY.default.createElement(kq,{style:{input:t.input,label:t.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),RY.default.createElement("div",{style:t.field},RY.default.createElement(kq,{style:{input:t.input,label:t.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),RY.default.createElement("div",{style:t.alpha},RY.default.createElement(kq,{style:{input:t.input,label:t.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):"hsl"===this.state.view&&(r=RY.default.createElement("div",{style:t.fields,className:"flexbox-fix"},RY.default.createElement("div",{style:t.field},RY.default.createElement(kq,{style:{input:t.input,label:t.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),RY.default.createElement("div",{style:t.field},RY.default.createElement(kq,{style:{input:t.input,label:t.label},label:"s",value:Math.round(100*this.props.hsl.s)+"%",onChange:this.handleChange})),RY.default.createElement("div",{style:t.field},RY.default.createElement(kq,{style:{input:t.input,label:t.label},label:"l",value:Math.round(100*this.props.hsl.l)+"%",onChange:this.handleChange})),RY.default.createElement("div",{style:t.alpha},RY.default.createElement(kq,{style:{input:t.input,label:t.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),RY.default.createElement("div",{style:t.wrap,className:"flexbox-fix"},r,RY.default.createElement("div",{style:t.toggle},RY.default.createElement("div",{style:t.icon,onClick:this.toggleViews,ref:function(t){return e.icon=t}},RY.default.createElement(R0.default,{style:t.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return 1!==e.hsl.a&&"hex"===t.view?{view:"rgb"}:null}}]),t}(RY.default.Component);R6.defaultProps={view:"hex"};let R5=R6;var R8=p,R9=kp;let R7=function(){var e=(0,R9.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return R8.default.createElement("div",{style:e.picker})};var Te=p,Tt=kp;let Tr=function(){var e=(0,Tt.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return Te.default.createElement("div",{style:e.picker})};var Tn=function(e){var t=e.width,r=e.onChange,n=e.disableAlpha,i=e.rgb,a=e.hsl,o=e.hsv,s=e.hex,l=e.renderers,c=e.styles,u=void 0===c?{}:c,d=e.className,f=void 0===d?"":d,h=e.defaultView,p=(0,RZ.default)(CP({default:{picker:{width:t,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+i.r+", "+i.g+", "+i.b+", "+i.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},u),{disableAlpha:n});return RG.default.createElement("div",{style:p.picker,className:"chrome-picker "+f},RG.default.createElement("div",{style:p.saturation},RG.default.createElement(Mt,{style:p.Saturation,hsl:a,hsv:o,pointer:Tr,onChange:r})),RG.default.createElement("div",{style:p.body},RG.default.createElement("div",{style:p.controls,className:"flexbox-fix"},RG.default.createElement("div",{style:p.color},RG.default.createElement("div",{style:p.swatch},RG.default.createElement("div",{style:p.active}),RG.default.createElement(kk,{renderers:l}))),RG.default.createElement("div",{style:p.toggles},RG.default.createElement("div",{style:p.hue},RG.default.createElement(kQ,{style:p.Hue,hsl:a,pointer:R7,onChange:r})),RG.default.createElement("div",{style:p.alpha},RG.default.createElement(kR,{style:p.Alpha,rgb:i,hsl:a,pointer:R7,renderers:l,onChange:r})))),RG.default.createElement(R5,{rgb:i,hsl:a,hex:s,view:h,onChange:r,disableAlpha:n})))};Tn.propTypes={width:RX.default.oneOfType([RX.default.string,RX.default.number]),disableAlpha:RX.default.bool,styles:RX.default.object,defaultView:RX.default.oneOf(["hex","rgb","hsl"])},Tn.defaultProps={width:225,disableAlpha:!1,styles:{}},M_(Tn);var Ti=p,Ta=k1,To=kp,Ts=p,Tl=kp;let Tc=function(e){var t=e.color,r=e.onClick,n=void 0===r?function(){}:r,i=e.onSwatchHover,a=e.active,o=(0,Tl.default)({default:{color:{background:t,width:"15px",height:"15px",float:"left",marginRight:"5px",marginBottom:"5px",position:"relative",cursor:"pointer"},dot:{absolute:"5px 5px 5px 5px",background:Mb(t),borderRadius:"50%",opacity:"0"}},active:{dot:{opacity:"1"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},dot:{background:"#000"}},transparent:{dot:{background:"#000"}}},{active:a,"color-#FFFFFF":"#FFFFFF"===t,transparent:"transparent"===t});return Ts.default.createElement(MO,{style:o.color,color:t,onClick:n,onHover:i,focusStyle:{boxShadow:"0 0 4px "+t}},Ts.default.createElement("div",{style:o.dot}))};var Tu=p,Td=kp;let Tf=function(e){var t=e.hex,r=e.rgb,n=e.onChange,i=(0,Td.default)({default:{fields:{display:"flex",paddingBottom:"6px",paddingRight:"5px",position:"relative"},active:{position:"absolute",top:"6px",left:"5px",height:"9px",width:"9px",background:t},HEXwrap:{flex:"6",position:"relative"},HEXinput:{width:"80%",padding:"0px",paddingLeft:"20%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},HEXlabel:{display:"none"},RGBwrap:{flex:"3",position:"relative"},RGBinput:{width:"70%",padding:"0px",paddingLeft:"30%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},RGBlabel:{position:"absolute",top:"3px",left:"0px",lineHeight:"16px",textTransform:"uppercase",fontSize:"12px",color:"#999"}}}),a=function(e,t){e.r||e.g||e.b?n({r:e.r||r.r,g:e.g||r.g,b:e.b||r.b,source:"rgb"},t):n({hex:e.hex,source:"hex"},t)};return Tu.default.createElement("div",{style:i.fields,className:"flexbox-fix"},Tu.default.createElement("div",{style:i.active}),Tu.default.createElement(kq,{style:{wrap:i.HEXwrap,input:i.HEXinput,label:i.HEXlabel},label:"hex",value:t,onChange:a}),Tu.default.createElement(kq,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"r",value:r.r,onChange:a}),Tu.default.createElement(kq,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"g",value:r.g,onChange:a}),Tu.default.createElement(kq,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"b",value:r.b,onChange:a}))};var Th=function(e){var t=e.onChange,r=e.onSwatchHover,n=e.colors,i=e.hex,a=e.rgb,o=e.styles,s=void 0===o?{}:o,l=e.className,c=void 0===l?"":l,u=(0,To.default)(CP({default:{Compact:{background:"#f6f6f6",radius:"4px"},compact:{paddingTop:"5px",paddingLeft:"5px",boxSizing:"initial",width:"240px"},clear:{clear:"both"}}},s)),d=function(e,r){e.hex?Mp(e.hex)&&t({hex:e.hex,source:"hex"},r):t(e,r)};return Ti.default.createElement(CD,{style:u.Compact,styles:s},Ti.default.createElement("div",{style:u.compact,className:"compact-picker "+c},Ti.default.createElement("div",null,Ry(n,function(e){return Ti.default.createElement(Tc,{key:e,color:e,active:e.toLowerCase()===i,onClick:d,onSwatchHover:r})}),Ti.default.createElement("div",{style:u.clear})),Ti.default.createElement(Tf,{hex:i,rgb:a,onChange:d})))};Th.propTypes={colors:Ta.default.arrayOf(Ta.default.string),styles:Ta.default.object},Th.defaultProps={colors:["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"],styles:{}},M_(Th);var Tp=p,Tb=k1,Tg=kp,Tm=p,Tv=kp,Ty=function(e){var t=e.hover,r=e.color,n=e.onClick,i=e.onSwatchHover,a={position:"relative",zIndex:"2",outline:"2px solid #fff",boxShadow:"0 0 5px 2px rgba(0,0,0,0.25)"},o=(0,Tv.default)({default:{swatch:{width:"25px",height:"25px",fontSize:"0"}},hover:{swatch:a}},{hover:t});return Tm.default.createElement("div",{style:o.swatch},Tm.default.createElement(MO,{color:r,onClick:n,onHover:i,focusStyle:a}))};let Tx=(0,Tv.handleHover)(Ty);var Tw=function(e){var t=e.width,r=e.colors,n=e.onChange,i=e.onSwatchHover,a=e.triangle,o=e.styles,s=void 0===o?{}:o,l=e.className,c=void 0===l?"":l,u=(0,Tg.default)(CP({default:{card:{width:t,background:"#fff",border:"1px solid rgba(0,0,0,0.2)",boxShadow:"0 3px 12px rgba(0,0,0,0.15)",borderRadius:"4px",position:"relative",padding:"5px",display:"flex",flexWrap:"wrap"},triangle:{position:"absolute",border:"7px solid transparent",borderBottomColor:"#fff"},triangleShadow:{position:"absolute",border:"8px solid transparent",borderBottomColor:"rgba(0,0,0,0.15)"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-14px",left:"10px"},triangleShadow:{top:"-16px",left:"9px"}},"top-right-triangle":{triangle:{top:"-14px",right:"10px"},triangleShadow:{top:"-16px",right:"9px"}},"bottom-left-triangle":{triangle:{top:"35px",left:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",left:"9px",transform:"rotate(180deg)"}},"bottom-right-triangle":{triangle:{top:"35px",right:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",right:"9px",transform:"rotate(180deg)"}}},s),{"hide-triangle":"hide"===a,"top-left-triangle":"top-left"===a,"top-right-triangle":"top-right"===a,"bottom-left-triangle":"bottom-left"===a,"bottom-right-triangle":"bottom-right"===a}),d=function(e,t){return n({hex:e,source:"hex"},t)};return Tp.default.createElement("div",{style:u.card,className:"github-picker "+c},Tp.default.createElement("div",{style:u.triangleShadow}),Tp.default.createElement("div",{style:u.triangle}),Ry(r,function(e){return Tp.default.createElement(Tx,{color:e,key:e,onClick:d,onSwatchHover:i})}))};Tw.propTypes={width:Tb.default.oneOfType([Tb.default.string,Tb.default.number]),colors:Tb.default.arrayOf(Tb.default.string),triangle:Tb.default.oneOf(["hide","top-left","top-right","bottom-left","bottom-right"]),styles:Tb.default.object},Tw.defaultProps={width:200,colors:["#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6","#BED3F3","#D4C4FB"],triangle:"top-left",styles:{}},M_(Tw);var T_=p,TS=kp,TE=p,Tk=kp;let TN=function(e){var t=e.direction,r=(0,Tk.default)({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:"vertical"===t});return TE.default.createElement("div",{style:r.picker})};var Tj=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},TC=function(e){var t=e.width,r=e.height,n=e.onChange,i=e.hsl,a=e.direction,o=e.pointer,s=e.styles,l=void 0===s?{}:s,c=e.className,u=void 0===c?"":c,d=(0,TS.default)(CP({default:{picker:{position:"relative",width:t,height:r},hue:{radius:"2px"}}},l)),f=function(e){return n({a:1,h:e.h,l:.5,s:1})};return T_.default.createElement("div",{style:d.picker,className:"hue-picker "+u},T_.default.createElement(kQ,Tj({},d.hue,{hsl:i,pointer:o,onChange:f,direction:a})))};TC.propTypes={styles:k1.default.object},TC.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:TN,styles:{}},M_(TC);var TM=p,TA=kp;M_(function(e){var t=e.onChange,r=e.hex,n=e.rgb,i=e.styles,a=void 0===i?{}:i,o=e.className,s=void 0===o?"":o,l=(0,TA.default)(CP({default:{material:{width:"98px",height:"98px",padding:"16px",fontFamily:"Roboto"},HEXwrap:{position:"relative"},HEXinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"2px solid "+r,outline:"none",height:"30px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},Hex:{style:{}},RGBwrap:{position:"relative"},RGBinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"1px solid #eee",outline:"none",height:"30px"},RGBlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},split:{display:"flex",marginRight:"-10px",paddingTop:"11px"},third:{flex:"1",paddingRight:"10px"}}},a)),c=function(e,r){e.hex?Mp(e.hex)&&t({hex:e.hex,source:"hex"},r):(e.r||e.g||e.b)&&t({r:e.r||n.r,g:e.g||n.g,b:e.b||n.b,source:"rgb"},r)};return TM.default.createElement(CD,{styles:a},TM.default.createElement("div",{style:l.material,className:"material-picker "+s},TM.default.createElement(kq,{style:{wrap:l.HEXwrap,input:l.HEXinput,label:l.HEXlabel},label:"hex",value:r,onChange:c}),TM.default.createElement("div",{style:l.split,className:"flexbox-fix"},TM.default.createElement("div",{style:l.third},TM.default.createElement(kq,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:"r",value:n.r,onChange:c})),TM.default.createElement("div",{style:l.third},TM.default.createElement(kq,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:"g",value:n.g,onChange:c})),TM.default.createElement("div",{style:l.third},TM.default.createElement(kq,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:"b",value:n.b,onChange:c})))))});var TR=p,TT=k1,TO=kp,TL=p,TI=kp;let TP=function(e){var t=e.onChange,r=e.rgb,n=e.hsv,i=e.hex,a=(0,TI.default)({default:{fields:{paddingTop:"5px",paddingBottom:"9px",width:"80px",position:"relative"},divider:{height:"5px"},RGBwrap:{position:"relative"},RGBinput:{marginLeft:"40%",width:"40%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"5px",fontSize:"13px",paddingLeft:"3px",marginRight:"10px"},RGBlabel:{left:"0px",top:"0px",width:"34px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px",position:"absolute"},HEXwrap:{position:"relative"},HEXinput:{marginLeft:"20%",width:"80%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"6px",fontSize:"13px",paddingLeft:"3px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",width:"14px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px"},fieldSymbols:{position:"absolute",top:"5px",right:"-7px",fontSize:"13px"},symbol:{height:"20px",lineHeight:"22px",paddingBottom:"7px"}}}),o=function(e,i){e["#"]?Mp(e["#"])&&t({hex:e["#"],source:"hex"},i):e.r||e.g||e.b?t({r:e.r||r.r,g:e.g||r.g,b:e.b||r.b,source:"rgb"},i):(e.h||e.s||e.v)&&t({h:e.h||n.h,s:e.s||n.s,v:e.v||n.v,source:"hsv"},i)};return TL.default.createElement("div",{style:a.fields},TL.default.createElement(kq,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"h",value:Math.round(n.h),onChange:o}),TL.default.createElement(kq,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"s",value:Math.round(100*n.s),onChange:o}),TL.default.createElement(kq,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"v",value:Math.round(100*n.v),onChange:o}),TL.default.createElement("div",{style:a.divider}),TL.default.createElement(kq,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"r",value:r.r,onChange:o}),TL.default.createElement(kq,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"g",value:r.g,onChange:o}),TL.default.createElement(kq,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"b",value:r.b,onChange:o}),TL.default.createElement("div",{style:a.divider}),TL.default.createElement(kq,{style:{wrap:a.HEXwrap,input:a.HEXinput,label:a.HEXlabel},label:"#",value:i.replace("#",""),onChange:o}),TL.default.createElement("div",{style:a.fieldSymbols},TL.default.createElement("div",{style:a.symbol},""),TL.default.createElement("div",{style:a.symbol},"%"),TL.default.createElement("div",{style:a.symbol},"%")))};var TB=p,TD=kp;let Tz=function(e){var t=e.hsl,r=(0,TD.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}},"black-outline":{picker:{boxShadow:"inset 0 0 0 1px #000"}}},{"black-outline":t.l>.5});return TB.default.createElement("div",{style:r.picker})};var TF=p,T$=kp;let TU=function(){var e=(0,T$.default)({default:{triangle:{width:0,height:0,borderStyle:"solid",borderWidth:"4px 0 4px 6px",borderColor:"transparent transparent transparent #fff",position:"absolute",top:"1px",left:"1px"},triangleBorder:{width:0,height:0,borderStyle:"solid",borderWidth:"5px 0 5px 8px",borderColor:"transparent transparent transparent #555"},left:{Extend:"triangleBorder",transform:"translate(-13px, -4px)"},leftInside:{Extend:"triangle",transform:"translate(-8px, -5px)"},right:{Extend:"triangleBorder",transform:"translate(20px, -14px) rotate(180deg)"},rightInside:{Extend:"triangle",transform:"translate(-8px, -5px)"}}});return TF.default.createElement("div",{style:e.pointer},TF.default.createElement("div",{style:e.left},TF.default.createElement("div",{style:e.leftInside})),TF.default.createElement("div",{style:e.right},TF.default.createElement("div",{style:e.rightInside})))};var TH=p,TV=kp;let Tq=function(e){var t=e.onClick,r=e.label,n=e.children,i=e.active,a=(0,TV.default)({default:{button:{backgroundImage:"linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%)",border:"1px solid #878787",borderRadius:"2px",height:"20px",boxShadow:"0 1px 0 0 #EAEAEA",fontSize:"14px",color:"#000",lineHeight:"20px",textAlign:"center",marginBottom:"10px",cursor:"pointer"}},active:{button:{boxShadow:"0 0 0 1px #878787"}}},{active:i});return TH.default.createElement("div",{style:a.button,onClick:t},r||n)};var TW=p,TK=kp;let TG=function(e){var t=e.rgb,r=e.currentColor,n=(0,TK.default)({default:{swatches:{border:"1px solid #B3B3B3",borderBottom:"1px solid #F0F0F0",marginBottom:"2px",marginTop:"1px"},new:{height:"34px",background:"rgb("+t.r+","+t.g+", "+t.b+")",boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000"},current:{height:"34px",background:r,boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 -1px 0 #000"},label:{fontSize:"14px",color:"#000",textAlign:"center"}}});return TW.default.createElement("div",null,TW.default.createElement("div",{style:n.label},"new"),TW.default.createElement("div",{style:n.swatches},TW.default.createElement("div",{style:n.new}),TW.default.createElement("div",{style:n.current})),TW.default.createElement("div",{style:n.label},"current"))};var TX=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function TZ(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function TY(e,t){if(!e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}function TJ(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var TQ=function(e){function t(e){TZ(this,t);var r=TY(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.state={currentColor:e.hex},r}return TJ(t,e),TX(t,[{key:"render",value:function(){var e=this.props,t=e.styles,r=void 0===t?{}:t,n=e.className,i=void 0===n?"":n,a=(0,TO.default)(CP({default:{picker:{background:"#DCDCDC",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15)",boxSizing:"initial",width:"513px"},head:{backgroundImage:"linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%)",borderBottom:"1px solid #B1B1B1",boxShadow:"inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02)",height:"23px",lineHeight:"24px",borderRadius:"4px 4px 0 0",fontSize:"13px",color:"#4D4D4D",textAlign:"center"},body:{padding:"15px 15px 0",display:"flex"},saturation:{width:"256px",height:"256px",position:"relative",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0",overflow:"hidden"},hue:{position:"relative",height:"256px",width:"19px",marginLeft:"10px",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0"},controls:{width:"180px",marginLeft:"10px"},top:{display:"flex"},previews:{width:"60px"},actions:{flex:"1",marginLeft:"20px"}}},r));return TR.default.createElement("div",{style:a.picker,className:"photoshop-picker "+i},TR.default.createElement("div",{style:a.head},this.props.header),TR.default.createElement("div",{style:a.body,className:"flexbox-fix"},TR.default.createElement("div",{style:a.saturation},TR.default.createElement(Mt,{hsl:this.props.hsl,hsv:this.props.hsv,pointer:Tz,onChange:this.props.onChange})),TR.default.createElement("div",{style:a.hue},TR.default.createElement(kQ,{direction:"vertical",hsl:this.props.hsl,pointer:TU,onChange:this.props.onChange})),TR.default.createElement("div",{style:a.controls},TR.default.createElement("div",{style:a.top,className:"flexbox-fix"},TR.default.createElement("div",{style:a.previews},TR.default.createElement(TG,{rgb:this.props.rgb,currentColor:this.state.currentColor})),TR.default.createElement("div",{style:a.actions},TR.default.createElement(Tq,{label:"OK",onClick:this.props.onAccept,active:!0}),TR.default.createElement(Tq,{label:"Cancel",onClick:this.props.onCancel}),TR.default.createElement(TP,{onChange:this.props.onChange,rgb:this.props.rgb,hsv:this.props.hsv,hex:this.props.hex}))))))}}]),t}(TR.default.Component);TQ.propTypes={header:TT.default.string,styles:TT.default.object},TQ.defaultProps={header:"Color Picker",styles:{}},M_(TQ);var T0=p,T1=k1,T2=kp,T3=p,T4=kp;let T6=function(e){var t=e.onChange,r=e.rgb,n=e.hsl,i=e.hex,a=e.disableAlpha,o=(0,T4.default)({default:{fields:{display:"flex",paddingTop:"4px"},single:{flex:"1",paddingLeft:"6px"},alpha:{flex:"1",paddingLeft:"6px"},double:{flex:"2"},input:{width:"80%",padding:"4px 10% 3px",border:"none",boxShadow:"inset 0 0 0 1px #ccc",fontSize:"11px"},label:{display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}},disableAlpha:{alpha:{display:"none"}}},{disableAlpha:a}),s=function(e,i){e.hex?Mp(e.hex)&&t({hex:e.hex,source:"hex"},i):e.r||e.g||e.b?t({r:e.r||r.r,g:e.g||r.g,b:e.b||r.b,a:r.a,source:"rgb"},i):e.a&&(e.a<0?e.a=0:e.a>100&&(e.a=100),e.a/=100,t({h:n.h,s:n.s,l:n.l,a:e.a,source:"rgb"},i))};return T3.default.createElement("div",{style:o.fields,className:"flexbox-fix"},T3.default.createElement("div",{style:o.double},T3.default.createElement(kq,{style:{input:o.input,label:o.label},label:"hex",value:i.replace("#",""),onChange:s})),T3.default.createElement("div",{style:o.single},T3.default.createElement(kq,{style:{input:o.input,label:o.label},label:"r",value:r.r,onChange:s,dragLabel:"true",dragMax:"255"})),T3.default.createElement("div",{style:o.single},T3.default.createElement(kq,{style:{input:o.input,label:o.label},label:"g",value:r.g,onChange:s,dragLabel:"true",dragMax:"255"})),T3.default.createElement("div",{style:o.single},T3.default.createElement(kq,{style:{input:o.input,label:o.label},label:"b",value:r.b,onChange:s,dragLabel:"true",dragMax:"255"})),T3.default.createElement("div",{style:o.alpha},T3.default.createElement(kq,{style:{input:o.input,label:o.label},label:"a",value:Math.round(100*r.a),onChange:s,dragLabel:"true",dragMax:"100"})))};var T5=p,T8=k1,T9=kp,T7=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Oe=function(e){var t=e.colors,r=e.onClick,n=void 0===r?function(){}:r,i=e.onSwatchHover,a=(0,T9.default)({default:{colors:{margin:"0 -10px",padding:"10px 0 0 10px",borderTop:"1px solid #eee",display:"flex",flexWrap:"wrap",position:"relative"},swatchWrap:{width:"16px",height:"16px",margin:"0 10px 10px 0"},swatch:{borderRadius:"3px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"}},"no-presets":{colors:{display:"none"}}},{"no-presets":!t||!t.length}),o=function(e,t){n({hex:e,source:"hex"},t)};return T5.default.createElement("div",{style:a.colors,className:"flexbox-fix"},t.map(function(e){var t="string"==typeof e?{color:e}:e,r=""+t.color+(t.title||"");return T5.default.createElement("div",{key:r,style:a.swatchWrap},T5.default.createElement(MO,T7({},t,{style:a.swatch,onClick:o,onHover:i,focusStyle:{boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px "+t.color}})))}))};Oe.propTypes={colors:T8.default.arrayOf(T8.default.oneOfType([T8.default.string,T8.default.shape({color:T8.default.string,title:T8.default.string})])).isRequired};let Ot=Oe;var Or=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},On=function(e){var t=e.width,r=e.rgb,n=e.hex,i=e.hsv,a=e.hsl,o=e.onChange,s=e.onSwatchHover,l=e.disableAlpha,c=e.presetColors,u=e.renderers,d=e.styles,f=void 0===d?{}:d,h=e.className,p=void 0===h?"":h,b=(0,T2.default)(CP({default:Or({picker:{width:t,padding:"10px 10px 0",boxSizing:"initial",background:"#fff",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.15), 0 8px 16px rgba(0,0,0,.15)"},saturation:{width:"100%",paddingBottom:"75%",position:"relative",overflow:"hidden"},Saturation:{radius:"3px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},controls:{display:"flex"},sliders:{padding:"4px 0",flex:"1"},color:{width:"24px",height:"24px",position:"relative",marginTop:"4px",marginLeft:"4px",borderRadius:"3px"},activeColor:{absolute:"0px 0px 0px 0px",borderRadius:"2px",background:"rgba("+r.r+","+r.g+","+r.b+","+r.a+")",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},hue:{position:"relative",height:"10px",overflow:"hidden"},Hue:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},alpha:{position:"relative",height:"10px",marginTop:"4px",overflow:"hidden"},Alpha:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"}},f),disableAlpha:{color:{height:"10px"},hue:{height:"10px"},alpha:{display:"none"}}},f),{disableAlpha:l});return T0.default.createElement("div",{style:b.picker,className:"sketch-picker "+p},T0.default.createElement("div",{style:b.saturation},T0.default.createElement(Mt,{style:b.Saturation,hsl:a,hsv:i,onChange:o})),T0.default.createElement("div",{style:b.controls,className:"flexbox-fix"},T0.default.createElement("div",{style:b.sliders},T0.default.createElement("div",{style:b.hue},T0.default.createElement(kQ,{style:b.Hue,hsl:a,onChange:o})),T0.default.createElement("div",{style:b.alpha},T0.default.createElement(kR,{style:b.Alpha,rgb:r,hsl:a,renderers:u,onChange:o}))),T0.default.createElement("div",{style:b.color},T0.default.createElement(kk,null),T0.default.createElement("div",{style:b.activeColor}))),T0.default.createElement(T6,{rgb:r,hsl:a,hex:n,onChange:o,disableAlpha:l}),T0.default.createElement(Ot,{colors:c,onClick:o,onSwatchHover:s}))};On.propTypes={disableAlpha:T1.default.bool,width:T1.default.oneOfType([T1.default.string,T1.default.number]),styles:T1.default.object},On.defaultProps={disableAlpha:!1,width:200,styles:{},presetColors:["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"]};let Oi=M_(On);var Oa=p,Oo=kp,Os=p,Ol=kp,Oc=p,Ou=kp;let Od=function(e){var t=e.hsl,r=e.offset,n=e.onClick,i=void 0===n?function(){}:n,a=e.active,o=e.first,s=e.last,l=(0,Ou.default)({default:{swatch:{height:"12px",background:"hsl("+t.h+", 50%, "+100*r+"%)",cursor:"pointer"}},first:{swatch:{borderRadius:"2px 0 0 2px"}},last:{swatch:{borderRadius:"0 2px 2px 0"}},active:{swatch:{transform:"scaleY(1.8)",borderRadius:"3.6px/2px"}}},{active:a,first:o,last:s}),c=function(e){return i({h:t.h,s:.5,l:r,source:"hsl"},e)};return Oc.default.createElement("div",{style:l.swatch,onClick:c})},Of=function(e){var t=e.onClick,r=e.hsl,n=(0,Ol.default)({default:{swatches:{marginTop:"20px"},swatch:{boxSizing:"border-box",width:"20%",paddingRight:"1px",float:"left"},clear:{clear:"both"}}}),i=.1;return Os.default.createElement("div",{style:n.swatches},Os.default.createElement("div",{style:n.swatch},Os.default.createElement(Od,{hsl:r,offset:".80",active:Math.abs(r.l-.8)<i&&Math.abs(r.s-.5)<i,onClick:t,first:!0})),Os.default.createElement("div",{style:n.swatch},Os.default.createElement(Od,{hsl:r,offset:".65",active:Math.abs(r.l-.65)<i&&Math.abs(r.s-.5)<i,onClick:t})),Os.default.createElement("div",{style:n.swatch},Os.default.createElement(Od,{hsl:r,offset:".50",active:Math.abs(r.l-.5)<i&&Math.abs(r.s-.5)<i,onClick:t})),Os.default.createElement("div",{style:n.swatch},Os.default.createElement(Od,{hsl:r,offset:".35",active:Math.abs(r.l-.35)<i&&Math.abs(r.s-.5)<i,onClick:t})),Os.default.createElement("div",{style:n.swatch},Os.default.createElement(Od,{hsl:r,offset:".20",active:Math.abs(r.l-.2)<i&&Math.abs(r.s-.5)<i,onClick:t,last:!0})),Os.default.createElement("div",{style:n.clear}))};var Oh=p,Op=kp;let Ob=function(){var e=(0,Op.default)({default:{picker:{width:"14px",height:"14px",borderRadius:"6px",transform:"translate(-7px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return Oh.default.createElement("div",{style:e.picker})};var Og=function(e){var t=e.hsl,r=e.onChange,n=e.pointer,i=e.styles,a=void 0===i?{}:i,o=e.className,s=void 0===o?"":o,l=(0,Oo.default)(CP({default:{hue:{height:"12px",position:"relative"},Hue:{radius:"2px"}}},a));return Oa.default.createElement("div",{style:l.wrap||{},className:"slider-picker "+s},Oa.default.createElement("div",{style:l.hue},Oa.default.createElement(kQ,{style:l.Hue,hsl:t,pointer:n,onChange:r})),Oa.default.createElement("div",{style:l.swatches},Oa.default.createElement(Of,{hsl:t,onClick:r})))};Og.propTypes={styles:k1.default.object},Og.defaultProps={pointer:Ob,styles:{}},M_(Og);var Om=p,Ov=k1,Oy=kp,Ox=p,Ow=kp,O_=p,OS=kp,OE=e.i(836765);let Ok=function(e){var t=e.color,r=e.onClick,n=void 0===r?function(){}:r,i=e.onSwatchHover,a=e.first,o=e.last,s=e.active,l=(0,OS.default)({default:{color:{width:"40px",height:"24px",cursor:"pointer",background:t,marginBottom:"1px"},check:{color:Mb(t),marginLeft:"8px",display:"none"}},first:{color:{overflow:"hidden",borderRadius:"2px 2px 0 0"}},last:{color:{overflow:"hidden",borderRadius:"0 0 2px 2px"}},active:{check:{display:"block"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},check:{color:"#333"}},transparent:{check:{color:"#333"}}},{first:a,last:o,active:s,"color-#FFFFFF":"#FFFFFF"===t,transparent:"transparent"===t});return O_.default.createElement(MO,{color:t,style:l.color,onClick:n,onHover:i,focusStyle:{boxShadow:"0 0 4px "+t}},O_.default.createElement("div",{style:l.check},O_.default.createElement(OE.default,null)))},ON=function(e){var t=e.onClick,r=e.onSwatchHover,n=e.group,i=e.active,a=(0,Ow.default)({default:{group:{paddingBottom:"10px",width:"40px",float:"left",marginRight:"10px"}}});return Ox.default.createElement("div",{style:a.group},Ry(n,function(e,a){return Ox.default.createElement(Ok,{key:e,color:e,active:e.toLowerCase()===i,first:0===a,last:a===n.length-1,onClick:t,onSwatchHover:r})}))};var Oj=function(e){var t=e.width,r=e.height,n=e.onChange,i=e.onSwatchHover,a=e.colors,o=e.hex,s=e.styles,l=void 0===s?{}:s,c=e.className,u=void 0===c?"":c,d=(0,Oy.default)(CP({default:{picker:{width:t,height:r},overflow:{height:r,overflowY:"scroll"},body:{padding:"16px 0 6px 16px"},clear:{clear:"both"}}},l)),f=function(e,t){return n({hex:e,source:"hex"},t)};return Om.default.createElement("div",{style:d.picker,className:"swatches-picker "+u},Om.default.createElement(CD,null,Om.default.createElement("div",{style:d.overflow},Om.default.createElement("div",{style:d.body},Ry(a,function(e){return Om.default.createElement(ON,{key:e.toString(),group:e,active:o,onClick:f,onSwatchHover:i})}),Om.default.createElement("div",{style:d.clear})))))};Oj.propTypes={width:Ov.default.oneOfType([Ov.default.string,Ov.default.number]),height:Ov.default.oneOfType([Ov.default.string,Ov.default.number]),colors:Ov.default.arrayOf(Ov.default.arrayOf(Ov.default.string)),styles:Ov.default.object},Oj.defaultProps={width:320,height:240,colors:[[Rk["900"],Rk["700"],Rk["500"],Rk["300"],Rk["100"]],[RN["900"],RN["700"],RN["500"],RN["300"],RN["100"]],[Rj["900"],Rj["700"],Rj["500"],Rj["300"],Rj["100"]],[RC["900"],RC["700"],RC["500"],RC["300"],RC["100"]],[RM["900"],RM["700"],RM["500"],RM["300"],RM["100"]],[RA["900"],RA["700"],RA["500"],RA["300"],RA["100"]],[RR["900"],RR["700"],RR["500"],RR["300"],RR["100"]],[RT["900"],RT["700"],RT["500"],RT["300"],RT["100"]],[RO["900"],RO["700"],RO["500"],RO["300"],RO["100"]],["#194D33",RL["700"],RL["500"],RL["300"],RL["100"]],[RI["900"],RI["700"],RI["500"],RI["300"],RI["100"]],[RP["900"],RP["700"],RP["500"],RP["300"],RP["100"]],[RB["900"],RB["700"],RB["500"],RB["300"],RB["100"]],[RD["900"],RD["700"],RD["500"],RD["300"],RD["100"]],[Rz["900"],Rz["700"],Rz["500"],Rz["300"],Rz["100"]],[RF["900"],RF["700"],RF["500"],RF["300"],RF["100"]],[R$["900"],R$["700"],R$["500"],R$["300"],R$["100"]],[RU["900"],RU["700"],RU["500"],RU["300"],RU["100"]],["#000000","#525252","#969696","#D9D9D9","#FFFFFF"]],styles:{}},M_(Oj);var OC=p,OM=k1,OA=kp,OR=function(e){var t=e.onChange,r=e.onSwatchHover,n=e.hex,i=e.colors,a=e.width,o=e.triangle,s=e.styles,l=void 0===s?{}:s,c=e.className,u=void 0===c?"":c,d=(0,OA.default)(CP({default:{card:{width:a,background:"#fff",border:"0 solid rgba(0,0,0,0.25)",boxShadow:"0 1px 4px rgba(0,0,0,0.25)",borderRadius:"4px",position:"relative"},body:{padding:"15px 9px 9px 15px"},label:{fontSize:"18px",color:"#fff"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent #fff transparent",position:"absolute"},triangleShadow:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent rgba(0,0,0,.1) transparent",position:"absolute"},hash:{background:"#F0F0F0",height:"30px",width:"30px",borderRadius:"4px 0 0 4px",float:"left",color:"#98A1A4",display:"flex",alignItems:"center",justifyContent:"center"},input:{width:"100px",fontSize:"14px",color:"#666",border:"0px",outline:"none",height:"28px",boxShadow:"inset 0 0 0 1px #F0F0F0",boxSizing:"content-box",borderRadius:"0 4px 4px 0",float:"left",paddingLeft:"8px"},swatch:{width:"30px",height:"30px",float:"left",borderRadius:"4px",margin:"0 6px 6px 0"},clear:{clear:"both"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-10px",left:"12px"},triangleShadow:{top:"-11px",left:"12px"}},"top-right-triangle":{triangle:{top:"-10px",right:"12px"},triangleShadow:{top:"-11px",right:"12px"}}},l),{"hide-triangle":"hide"===o,"top-left-triangle":"top-left"===o,"top-right-triangle":"top-right"===o}),f=function(e,r){Mp(e)&&t({hex:e,source:"hex"},r)};return OC.default.createElement("div",{style:d.card,className:"twitter-picker "+u},OC.default.createElement("div",{style:d.triangleShadow}),OC.default.createElement("div",{style:d.triangle}),OC.default.createElement("div",{style:d.body},Ry(i,function(e,t){return OC.default.createElement(MO,{key:t,color:e,hex:e,style:d.swatch,onClick:f,onHover:r,focusStyle:{boxShadow:"0 0 4px "+e}})}),OC.default.createElement("div",{style:d.hash},"#"),OC.default.createElement(kq,{label:null,style:{input:d.input},value:n.replace("#",""),onChange:f}),OC.default.createElement("div",{style:d.clear})))};OR.propTypes={width:OM.default.oneOfType([OM.default.string,OM.default.number]),triangle:OM.default.oneOf(["hide","top-left","top-right"]),colors:OM.default.arrayOf(OM.default.string),styles:OM.default.object},OR.defaultProps={width:276,colors:["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"],triangle:"top-left",styles:{}},M_(OR);var OT=p,OO=k1,OL=kp,OI=p,OP=kp,OB=k1,OD=function(e){var t=(0,OP.default)({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",border:"2px #fff solid",transform:"translate(-12px, -13px)",background:"hsl("+Math.round(e.hsl.h)+", "+Math.round(100*e.hsl.s)+"%, "+Math.round(100*e.hsl.l)+"%)"}}});return OI.default.createElement("div",{style:t.picker})};OD.propTypes={hsl:OB.default.shape({h:OB.default.number,s:OB.default.number,l:OB.default.number,a:OB.default.number})},OD.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};let Oz=OD;var OF=p,O$=kp,OU=k1,OH=function(e){var t=(0,O$.default)({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",transform:"translate(-10px, -7px)",background:"hsl("+Math.round(e.hsl.h)+", 100%, 50%)",border:"2px white solid"}}});return OF.default.createElement("div",{style:t.picker})};OH.propTypes={hsl:OU.default.shape({h:OU.default.number,s:OU.default.number,l:OU.default.number,a:OU.default.number})},OH.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};let OV=OH;var Oq=p,OW=kp;let OK=function(e){var t=e.onChange,r=e.rgb,n=e.hsl,i=e.hex,a=e.hsv,o=function(e,r){if(e.hex)Mp(e.hex)&&t({hex:e.hex,source:"hex"},r);else if(e.rgb){var n=e.rgb.split(",");Mg(e.rgb,"rgb")&&t({r:n[0],g:n[1],b:n[2],a:1,source:"rgb"},r)}else if(e.hsv){var i=e.hsv.split(",");Mg(e.hsv,"hsv")&&(i[2]=i[2].replace("%",""),i[1]=i[1].replace("%",""),i[0]=i[0].replace("",""),1==i[1]?i[1]=.01:1==i[2]&&(i[2]=.01),t({h:Number(i[0]),s:Number(i[1]),v:Number(i[2]),source:"hsv"},r))}else if(e.hsl){var a=e.hsl.split(",");Mg(e.hsl,"hsl")&&(a[2]=a[2].replace("%",""),a[1]=a[1].replace("%",""),a[0]=a[0].replace("",""),1==u[1]?u[1]=.01:1==u[2]&&(u[2]=.01),t({h:Number(a[0]),s:Number(a[1]),v:Number(a[2]),source:"hsl"},r))}},s=(0,OW.default)({default:{wrap:{display:"flex",height:"100px",marginTop:"4px"},fields:{width:"100%"},column:{paddingTop:"10px",display:"flex",justifyContent:"space-between"},double:{padding:"0px 4.4px",boxSizing:"border-box"},input:{width:"100%",height:"38px",boxSizing:"border-box",padding:"4px 10% 3px",textAlign:"center",border:"1px solid #dadce0",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",fontFamily:"Roboto,Arial,sans-serif"},input2:{height:"38px",width:"100%",border:"1px solid #dadce0",boxSizing:"border-box",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",paddingLeft:"10px",fontFamily:"Roboto,Arial,sans-serif"},label:{textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"35px",top:"-6px",left:"0",right:"0",marginLeft:"auto",marginRight:"auto",fontFamily:"Roboto,Arial,sans-serif"},label2:{left:"10px",textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"32px",top:"-6px",fontFamily:"Roboto,Arial,sans-serif"},single:{flexGrow:"1",margin:"0px 4.4px"}}}),l=r.r+", "+r.g+", "+r.b,c=Math.round(n.h)+", "+Math.round(100*n.s)+"%, "+Math.round(100*n.l)+"%",u=Math.round(a.h)+", "+Math.round(100*a.s)+"%, "+Math.round(100*a.v)+"%";return Oq.default.createElement("div",{style:s.wrap,className:"flexbox-fix"},Oq.default.createElement("div",{style:s.fields},Oq.default.createElement("div",{style:s.double},Oq.default.createElement(kq,{style:{input:s.input,label:s.label},label:"hex",value:i,onChange:o})),Oq.default.createElement("div",{style:s.column},Oq.default.createElement("div",{style:s.single},Oq.default.createElement(kq,{style:{input:s.input2,label:s.label2},label:"rgb",value:l,onChange:o})),Oq.default.createElement("div",{style:s.single},Oq.default.createElement(kq,{style:{input:s.input2,label:s.label2},label:"hsv",value:u,onChange:o})),Oq.default.createElement("div",{style:s.single},Oq.default.createElement(kq,{style:{input:s.input2,label:s.label2},label:"hsl",value:c,onChange:o})))))};var OG=function(e){var t=e.width,r=e.onChange,n=e.rgb,i=e.hsl,a=e.hsv,o=e.hex,s=e.header,l=e.styles,c=void 0===l?{}:l,u=e.className,d=void 0===u?"":u,f=(0,OL.default)(CP({default:{picker:{width:t,background:"#fff",border:"1px solid #dfe1e5",boxSizing:"initial",display:"flex",flexWrap:"wrap",borderRadius:"8px 8px 0px 0px"},head:{height:"57px",width:"100%",paddingTop:"16px",paddingBottom:"16px",paddingLeft:"16px",fontSize:"20px",boxSizing:"border-box",fontFamily:"Roboto-Regular,HelveticaNeue,Arial,sans-serif"},saturation:{width:"70%",padding:"0px",position:"relative",overflow:"hidden"},swatch:{width:"30%",height:"228px",padding:"0px",background:"rgba("+n.r+", "+n.g+", "+n.b+", 1)",position:"relative",overflow:"hidden"},body:{margin:"auto",width:"95%"},controls:{display:"flex",boxSizing:"border-box",height:"52px",paddingTop:"22px"},color:{width:"32px"},hue:{height:"8px",position:"relative",margin:"0px 16px 0px 16px",width:"100%"},Hue:{radius:"2px"}}},c));return OT.default.createElement("div",{style:f.picker,className:"google-picker "+d},OT.default.createElement("div",{style:f.head},s),OT.default.createElement("div",{style:f.swatch}),OT.default.createElement("div",{style:f.saturation},OT.default.createElement(Mt,{hsl:i,hsv:a,pointer:Oz,onChange:r})),OT.default.createElement("div",{style:f.body},OT.default.createElement("div",{style:f.controls,className:"flexbox-fix"},OT.default.createElement("div",{style:f.hue},OT.default.createElement(kQ,{style:f.Hue,hsl:i,radius:"4px",pointer:OV,onChange:r}))),OT.default.createElement(OK,{rgb:n,hsl:i,hex:o,hsv:a,onChange:r})))};OG.propTypes={width:OO.default.oneOfType([OO.default.string,OO.default.number]),styles:OO.default.object,header:OO.default.string},OG.defaultProps={width:652,styles:{},header:"Color picker"},M_(OG);let OX=({label:e,value:t,onChange:r,compact:n=!1,pickerPosition:i="left"})=>{let[a,o]=(0,kf.useState)(!1),s=(0,kf.useRef)(null);(0,kf.useEffect)(()=>{function e(e){s.current&&!s.current.contains(e.target)&&o(!1)}return a?document.addEventListener("mousedown",e):document.removeEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[a]);let l=e=>{r(e.hex)},c=()=>"right"===i?"right-0":"center"===i?"left-1/2 -translate-x-1/2":"left-0";return n?(0,kd.jsxs)("div",{className:"relative",children:[(0,kd.jsx)("input",{type:"text",value:t,spellCheck:!1,onChange:e=>r(e.target.value),onClick:()=>o(!a),className:"bg-base-100 text-base-content border-base-200/75 w-16 cursor-pointer rounded border px-1 py-0.5 text-center font-mono text-xs"}),a&&(0,kd.jsx)("div",{ref:s,className:`absolute top-full z-50 py-1 ${c()}`,children:(0,kd.jsx)(Oi,{width:"200px",color:t,onChange:l,disableAlpha:!0})})]}):(0,kd.jsxs)("div",{className:"mb-3",children:[(0,kd.jsx)("label",{className:"mb-1 block text-sm font-medium",children:e}),(0,kd.jsxs)("div",{className:"flex items-center",children:[(0,kd.jsx)("button",{className:"border-base-200/75 relative mr-2 flex h-7 w-8 cursor-pointer items-center justify-center overflow-hidden rounded border",style:{backgroundColor:t},onClick:()=>o(!a)}),(0,kd.jsx)("input",{type:"text",value:t,spellCheck:!1,onChange:e=>r(e.target.value),className:"bg-base-100 text-base-content border-base-200/75 min-w-4 max-w-36 flex-1 rounded border p-1 font-mono text-sm"})]}),a&&(0,kd.jsx)("div",{ref:s,className:"relative z-50 mt-2",children:(0,kd.jsx)("div",{className:"absolute",children:(0,kd.jsx)(Oi,{width:"100%",color:t,onChange:l,disableAlpha:!0})})})]})},OZ=({textColor:e,backgroundColor:t,primaryColor:r,label:n})=>{let i=eU();return(0,ko.jsxs)("div",{className:"mb-2 mt-4",children:[(0,ko.jsx)("label",{className:"mb-1 block text-sm font-medium",children:n}),(0,ko.jsx)("div",{className:"border-base-300 overflow-hidden rounded border p-2",style:{backgroundColor:t,color:e},children:(0,ko.jsxs)("p",{className:"mb-2 whitespace-pre-line text-xs",children:[i("All the world's a stage,\nAnd all the men and women merely players;\nThey have their exits and their entrances,\nAnd one man in his time plays many parts,\nHis acts being seven ages.\n\n William Shakespeare"),"\n\n",(0,ko.jsx)("span",{className:"mt-4 cursor-pointer italic",style:{color:r},children:i("(from 'As You Like It', Act II)")})]})})]})},OY=({customTheme:e,onSave:t,onDelete:r,onCancel:n})=>{let i=eU(),{settings:a}=(0,ku.useSettingsStore)(),[o]=(0,ks.useState)(()=>kc.CUSTOM_THEME_TEMPLATES[Math.floor(Math.random()*kc.CUSTOM_THEME_TEMPLATES.length)]),[s,l]=(0,ks.useState)(e?.colors.light.fg||o.light.fg),[c,u]=(0,ks.useState)(e?.colors.light.bg||o.light.bg),[d,f]=(0,ks.useState)(e?.colors.light.primary||o.light.primary),[p,b]=(0,ks.useState)(e?.colors.dark.fg||o.dark.fg),[g,m]=(0,ks.useState)(e?.colors.dark.bg||o.dark.bg),[v,y]=(0,ks.useState)(e?.colors.dark.primary||o.dark.primary),[x,w]=(0,ks.useState)(e?.label||i("Custom")),_=()=>({name:(0,kl.md5Fingerprint)(x),label:x,colors:{light:{fg:s,bg:c,primary:d},dark:{fg:p,bg:g,primary:v}}});return(0,ko.jsxs)("div",{className:"mt-6 rounded-lg",children:[(0,ko.jsxs)("div",{className:"mb-4",children:[(0,ko.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,ko.jsx)("label",{className:"font-medium",children:i("Custom Theme")}),(0,ko.jsxs)("div",{className:"flex w-[calc(50%-12px)] justify-between",children:[(0,ko.jsx)("button",{className:"btn btn-ghost btn-sm text-base-content px-2",onClick:()=>t(_()),children:i("Save")}),a.globalReadSettings.customThemes.find(e=>e.name===(0,kl.md5Fingerprint)(x))&&(0,ko.jsx)("button",{className:h("btn btn-ghost btn-sm px-2"),onClick:()=>r(_()),children:i("Delete")}),(0,ko.jsx)("button",{className:"btn btn-ghost btn-sm px-2",onClick:n,children:i("Cancel")})]})]}),(0,ko.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,ko.jsx)("label",{className:"font-medium",children:i("Theme Name")}),(0,ko.jsx)("input",{type:"text",value:x,onChange:e=>w(e.target.value),className:"bg-base-100 text-base-content border-base-200 w-[calc(50%-12px)] rounded border p-2 text-sm"})]})]}),(0,ko.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,ko.jsxs)("div",{className:"bg-base-200 rounded-lg p-3",children:[(0,ko.jsx)("h3",{className:"mb-3 text-center font-medium",children:i("Light Mode")}),(0,ko.jsx)(OX,{label:i("Text Color"),value:s,onChange:l}),(0,ko.jsx)(OX,{label:i("Background Color"),value:c,onChange:u}),(0,ko.jsx)(OX,{label:i("Link Color"),value:d,onChange:f}),(0,ko.jsx)(OZ,{textColor:s,backgroundColor:c,primaryColor:d,label:i("Preview")})]}),(0,ko.jsxs)("div",{className:"bg-base-300 rounded-lg p-3",children:[(0,ko.jsx)("h3",{className:"mb-3 text-center font-medium",children:i("Dark Mode")}),(0,ko.jsx)(OX,{label:i("Text Color"),value:p,onChange:b}),(0,ko.jsx)(OX,{label:i("Background Color"),value:g,onChange:m}),(0,ko.jsx)(OX,{label:i("Link Color"),value:v,onChange:y}),(0,ko.jsx)(OZ,{textColor:p,backgroundColor:g,primaryColor:v,label:i("Preview")})]})]})]})};var OJ=a;let OQ=({themeMode:e,onThemeModeChange:t})=>{let r=eU();return(0,OJ.jsxs)("div",{className:"flex items-center justify-between",children:[(0,OJ.jsx)("h2",{className:"font-medium",children:r("Theme Mode")}),(0,OJ.jsxs)("div",{className:"flex gap-4",children:[(0,OJ.jsx)("button",{title:r("Auto Mode"),className:`btn btn-ghost btn-circle btn-sm ${"auto"===e?"btn-active bg-base-300":""}`,onClick:()=>t("auto"),children:(0,OJ.jsx)(yw,{})}),(0,OJ.jsx)("button",{title:r("Light Mode"),className:`btn btn-ghost btn-circle btn-sm ${"light"===e?"btn-active bg-base-300":""}`,onClick:()=>t("light"),children:(0,OJ.jsx)(iE,{})}),(0,OJ.jsx)("button",{title:r("Dark Mode"),className:`btn btn-ghost btn-circle btn-sm ${"dark"===e?"btn-active bg-base-300":""}`,onClick:()=>t("dark"),children:(0,OJ.jsx)(iS,{})})]})]})};var O0=a;function O1(e){return nV({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none"},child:[{tag:"path",attr:{d:"M20.3847 2.87868C19.2132 1.70711 17.3137 1.70711 16.1421 2.87868L14.0202 5.00052L13.313 4.29332C12.9225 3.9028 12.2894 3.9028 11.8988 4.29332C11.5083 4.68385 11.5083 5.31701 11.8988 5.70754L17.5557 11.3644C17.9462 11.7549 18.5794 11.7549 18.9699 11.3644C19.3604 10.9739 19.3604 10.3407 18.9699 9.95018L18.2629 9.24316L20.3847 7.12132C21.5563 5.94975 21.5563 4.05025 20.3847 2.87868Z",fill:"currentColor"},child:[]},{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M11.9297 7.09116L4.1515 14.8693C3.22786 15.793 3.03239 17.169 3.5651 18.2842L1.99994 19.8493L3.41415 21.2635L4.97931 19.6984C6.09444 20.2311 7.4705 20.0356 8.39414 19.112L16.1723 11.3338L11.9297 7.09116ZM13.3439 11.3338L11.9297 9.91959L5.56571 16.2835C5.17518 16.6741 5.17518 17.3072 5.56571 17.6978C5.95623 18.0883 6.5894 18.0883 6.97992 17.6978L13.3439 11.3338Z",fill:"currentColor"},child:[]}]})(e)}var O2=iB;let O3=({themes:e,themeColor:t,isDarkMode:r,onThemeColorChange:n,onEditTheme:i,onCreateTheme:a})=>{let o=eU(),s=(0,O2.useResponsiveSize)(16),l=(0,O2.useResponsiveSize)(24);return(0,O0.jsxs)("div",{children:[(0,O0.jsx)("h2",{className:"mb-2 font-medium",children:o("Theme Color")}),(0,O0.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[e.map(({name:e,label:a,colors:c,isCustomizale:u})=>(0,O0.jsxs)("button",{tabIndex:0,onClick:()=>n(e),onKeyDown:t=>{("Enter"===t.key||" "===t.key)&&n(e),t.stopPropagation()},className:`relative flex cursor-pointer flex-col items-center justify-center rounded-lg px-2 py-4 shadow-md ${t===e?"ring-2 ring-indigo-500 ring-offset-2":""}`,style:{backgroundColor:r?c.dark["base-100"]:c.light["base-100"],color:r?c.dark["base-content"]:c.light["base-content"]},children:[(0,O0.jsx)("input",{"aria-label":o(a),type:"radio",name:"theme",value:e,checked:t===e,onChange:()=>n(e),className:"hidden"}),t===e?(0,O0.jsx)(ih,{size:l}):(0,O0.jsx)(ip,{size:l}),(0,O0.jsx)("span",{className:"max-w-full truncate",children:o(a)}),u&&t===e&&(0,O0.jsx)("button",{onClick:()=>i(e),children:(0,O0.jsx)(O1,{size:s,className:"absolute right-2 top-2"})})]},e)),(0,O0.jsxs)("button",{className:"relative flex cursor-pointer flex-col items-center justify-center rounded-lg border border-dashed px-2 py-4 shadow-md",onClick:a,children:[(0,O0.jsx)(p0,{size:l}),(0,O0.jsx)("span",{className:"max-w-full truncate",children:o("Custom")})]})]})]})};var O4=a,O6=iB;let O5=({predefinedTextures:e,customTextures:t,selectedTextureId:r,backgroundOpacity:n,backgroundSize:i,onTextureSelect:a,onOpacityChange:o,onSizeChange:s,onImportImage:l,onDeleteTexture:c})=>{let u=eU(),d=(0,O6.useResponsiveSize)(24),f=[...e,...t];return(0,O4.jsxs)("div",{children:[(0,O4.jsx)("h2",{className:"mb-2 font-medium",children:u("Background Image")}),(0,O4.jsxs)("div",{className:"mb-4 grid grid-cols-2 gap-4",children:[f.map(t=>(0,O4.jsxs)("button",{onClick:()=>a(t.id),className:`bg-base-100 relative flex flex-col items-center justify-center rounded-lg border-2 p-4 shadow-md transition-all ${r===t.id?"ring-2 ring-indigo-500 ring-offset-2":"border-base-300"}`,style:{backgroundImage:t.loaded?`url("${t.blobUrl||t.url}")`:"none",backgroundSize:"cover",backgroundPosition:"top",minHeight:"80px"},children:[r===t.id&&(0,O4.jsx)(ih,{size:d,className:"absolute right-2 top-2 rounded-full bg-white text-indigo-500"}),!e.find(e=>e.id===t.id)&&(0,O4.jsx)("button",{onClick:e=>{e.stopPropagation(),c(t.id)},className:"absolute left-2 top-2 rounded-full bg-red-500 p-1 text-white transition-colors hover:bg-red-600",title:u("Delete"),children:(0,O4.jsx)(ic,{size:16})})]},t.id)),(0,O4.jsx)("div",{className:"border-base-300 relative flex cursor-pointer flex-col items-center justify-center rounded-lg border-2 border-dashed p-4 shadow-md transition-all",style:{minHeight:"80px"},children:(0,O4.jsx)("button",{className:"card-body flex cursor-pointer items-center justify-center p-2 text-center",onClick:l,children:(0,O4.jsxs)("div",{className:"flex items-center gap-2",children:[(0,O4.jsx)("div",{className:"flex items-center justify-center",children:(0,O4.jsx)(it,{className:"text-primary/85 group-hover:text-primary h-6 w-6"})}),(0,O4.jsx)("div",{className:"text-primary/85 group-hover:text-primary line-clamp-1 font-medium",children:u("Import Image")})]})})})]}),"none"!==r&&(0,O4.jsxs)("div",{className:"card border-base-200 bg-base-100 space-y-4 border p-4 shadow",children:[(0,O4.jsxs)("div",{className:"flex items-center justify-between",children:[(0,O4.jsx)("span",{className:"text-sm font-medium",children:u("Opacity")}),(0,O4.jsxs)("div",{className:"flex items-center gap-2",children:[(0,O4.jsx)("input",{type:"range",min:"0",max:"1",step:"0.05",value:n,onChange:e=>o(parseFloat(e.target.value)),className:"range range-sm w-32"}),(0,O4.jsxs)("span",{className:"w-12 text-right text-sm",children:[Math.round(100*n),"%"]})]})]}),(0,O4.jsxs)("div",{className:"flex items-center justify-between",children:[(0,O4.jsx)("span",{className:"text-sm font-medium",children:u("Size")}),(0,O4.jsx)(SM,{value:i,onChange:e=>s(e.target.value),options:[{value:"auto",label:u("Auto")},{value:"cover",label:u("Cover")},{value:"contain",label:u("Contain")}]})]})]})]})};var O8=a;let O9=({customHighlightColors:e,onChange:t})=>{let r=eU(),n=(r,n)=>{t({...e,[r]:n})};return(0,O8.jsxs)("div",{children:[(0,O8.jsx)("h2",{className:"mb-2 font-medium",children:r("Highlight Colors")}),(0,O8.jsx)("div",{className:"card border-base-200 bg-base-100 overflow-visible border p-4 shadow",children:(0,O8.jsx)("div",{className:"grid grid-cols-3 gap-3 sm:grid-cols-5",children:["red","violet","blue","green","yellow"].map((t,r,i)=>{let a=0===r?"left":r===i.length-1?"right":"center";return(0,O8.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,O8.jsx)("div",{className:"border-base-300 h-8 w-8 rounded-full border-2 shadow-sm",style:{backgroundColor:e[t]}}),(0,O8.jsx)(OX,{label:"",value:e[t],compact:!0,pickerPosition:a,onChange:e=>n(t,e)})]},t)})})})]})};var O7=a;let Le=({style:e,color:t,customColors:r,onStyleChange:n,onColorChange:i,onCustomColorsChange:a})=>{let o=eU(),s=[{color:"#FFD700",label:"Gold"},{color:"#00CED1",label:"Cyan"},{color:"#FF69B4",label:"Pink"},{color:"#90EE90",label:"Green"},{color:"#FFA500",label:"Orange"}],l=()=>{r.includes(t)||s.some(e=>e.color===t)||a([...r,t])},c=e=>{a(r.filter(t=>t!==e))};return(0,O7.jsxs)("div",{className:"w-full",children:[(0,O7.jsx)("h2",{className:"mb-2 font-medium",children:o("TTS Highlighting")}),(0,O7.jsx)("div",{className:"card border-base-200 bg-base-100 border p-4 shadow",children:(0,O7.jsxs)("div",{className:"space-y-4",children:[(0,O7.jsxs)("div",{className:"flex items-center justify-between",children:[(0,O7.jsx)("span",{className:"text-sm font-medium",children:o("Style")}),(0,O7.jsx)(SM,{value:e,onChange:e=>n(e.target.value),options:[{value:"highlight",label:o("Highlighter")},{value:"underline",label:o("Underline")},{value:"strikethrough",label:o("Strikethrough")},{value:"squiggly",label:o("Squiggly")},{value:"outline",label:o("Outline")}]})]}),(0,O7.jsxs)("div",{className:"flex items-center justify-between",children:[(0,O7.jsx)("span",{className:"text-sm font-medium",children:o("Color")}),(0,O7.jsxs)("div",{className:"flex items-center gap-2",children:[(0,O7.jsx)("div",{className:"border-base-300 pointer-events-none h-8 w-8 cursor-pointer rounded-full border-2 shadow-sm",style:{backgroundColor:t}}),(0,O7.jsx)(OX,{label:"",value:t,compact:!0,pickerPosition:"center",onChange:i}),(0,O7.jsx)("button",{onClick:l,disabled:r.includes(t)||s.some(e=>e.color===t),className:"btn btn-ghost btn-sm gap-1 bg-transparent disabled:bg-transparent",title:o("Save Current Color"),children:(0,O7.jsx)("span",{className:"text-xs",children:o("Save")})})]})]}),(0,O7.jsxs)("div",{className:"border-base-200 flex justify-between border-t pt-4",children:[(0,O7.jsx)("div",{className:"flex items-center",children:(0,O7.jsx)("span",{className:"text-sm font-medium",children:o("Quick Colors")})}),(0,O7.jsxs)("div",{className:"flex max-w-[70%] flex-wrap justify-end gap-2",children:[s.map(({color:e})=>(0,O7.jsx)("button",{onClick:()=>i(e),className:`h-8 w-8 rounded-full border-2 transition-all hover:scale-110 ${t===e?"ring-2 ring-indigo-500 ring-offset-2":"border-base-300"}`,style:{backgroundColor:e}},e)),r.map(e=>(0,O7.jsxs)("div",{className:"group relative",children:[(0,O7.jsx)("button",{onClick:()=>i(e),className:`h-8 w-8 rounded-full border-2 transition-all hover:scale-110 ${t===e?"ring-2 ring-indigo-500 ring-offset-2":"border-base-300"}`,style:{backgroundColor:e}}),(0,O7.jsx)("button",{onClick:()=>c(e),className:"absolute -right-1 -top-1 rounded-full bg-red-500 p-0.5 text-white opacity-0 transition-opacity hover:opacity-100 group-hover:opacity-100",title:o("Delete"),children:(0,O7.jsx)(ic,{size:12})})]},e))]})]})]})})]})};var Lt=a;let Lr=({codeHighlighting:e,codeLanguage:t,onToggle:r,onLanguageChange:n})=>{let i=eU();return(0,Lt.jsxs)("div",{className:"w-full",children:[(0,Lt.jsx)("h2",{className:"mb-2 font-medium",children:i("Code Highlighting")}),(0,Lt.jsx)("div",{className:"card border-base-200 bg-base-100 border shadow",children:(0,Lt.jsxs)("div",{className:"divide-base-200",children:[(0,Lt.jsxs)("div",{className:"config-item",children:[(0,Lt.jsx)("span",{children:i("Enable Highlighting")}),(0,Lt.jsx)("input",{type:"checkbox",className:"toggle",checked:e,onChange:()=>r(!e)})]}),(0,Lt.jsxs)("div",{className:"config-item",children:[(0,Lt.jsx)("span",{children:i("Code Language")}),(0,Lt.jsx)(SM,{value:t,onChange:e=>n(e.target.value),options:vQ.map(e=>({value:e,label:"auto-detect"===e?i("Auto"):e})),disabled:!e})]})]})})]})},Ln=({bookKey:e,onRegisterReset:t})=>{let r=eU(),{themeMode:n,themeColor:i,isDarkMode:a,setThemeMode:o,setThemeColor:s,saveCustomTheme:l}=(0,kt.useThemeStore)(),{envConfig:c,appService:u}=(0,ke.useEnv)(),{settings:d,setSettings:f,saveSettings:h}=(0,kr.useSettingsStore)(),{getView:p,getViewSettings:b}=e_(),g=b(e)||d.globalViewSettings,[m,v]=(0,E9.useState)(g.invertImgColorInDark),[y,x]=(0,E9.useState)(null),[w,_]=(0,E9.useState)([]),[S,E]=(0,E9.useState)(!1),[k,N]=(0,E9.useState)(g.overrideColor),[j,C]=(0,E9.useState)(g.codeHighlighting),[M,A]=(0,E9.useState)(g.codeLanguage),[R,T]=(0,E9.useState)(g.backgroundTextureId),[O,L]=(0,E9.useState)(g.backgroundOpacity),[I,P]=(0,E9.useState)(g.backgroundSize),[B,D]=(0,E9.useState)(g.ttsHighlightOptions.style),[z,F]=(0,E9.useState)(g.ttsHighlightOptions.color),[$,U]=(0,E9.useState)(d.globalReadSettings.customHighlightColors),[H,V]=(0,E9.useState)(d.globalReadSettings.customTtsHighlightColors||[]),{textures:q,addTexture:W,loadTexture:K,applyTexture:G,removeTexture:X,loadCustomTextures:Z,saveCustomTextures:Y}=(0,kn.useCustomTextureStore)(),J=EM(),{selectFiles:Q}=sH(u,r),ee=()=>{J({overrideColor:N,invertImgColorInDark:v,codeHighlighting:C,codeLanguage:A}),s("default"),o("auto"),T("none"),L(.6),P("cover"),U(ka.HIGHLIGHT_COLOR_HEX)};(0,E9.useEffect)(()=>{t(ee)},[]),(0,E9.useEffect)(()=>{Z(c)},[Z,c]),(0,E9.useEffect)(()=>{m!==g.invertImgColorInDark&&l4(c,e,"invertImgColorInDark",m)},[m]),(0,E9.useEffect)(()=>{k!==g.overrideColor&&l4(c,e,"overrideColor",k)},[k]),(0,E9.useEffect)(()=>{let t=!1;if(j!==g.codeHighlighting&&(l4(c,e,"codeHighlighting",j),t=!0),M!==g.codeLanguage&&(l4(c,e,"codeLanguage",M),t=!0),!t)return;let r=p(e);r&&r.renderer.getContents().forEach(({doc:e})=>v0(e,g))},[j,M]),(0,E9.useEffect)(()=>{R!==g.backgroundTextureId&&(l4(c,e,"backgroundTextureId",R),et())},[R]),(0,E9.useEffect)(()=>{O!==g.backgroundOpacity&&(l4(c,e,"backgroundOpacity",O),et())},[O]),(0,E9.useEffect)(()=>{I!==g.backgroundSize&&(l4(c,e,"backgroundSize",I),et())},[I]);let et=()=>{G(c,R),document.documentElement.style.setProperty("--bg-texture-opacity",`${O}`),document.documentElement.style.setProperty("--bg-texture-size",I)};(0,E9.useEffect)(()=>{_((d.globalReadSettings.customThemes??[]).map(e=>({name:e.name,label:e.label,colors:{light:(0,E7.generateLightPalette)(e.colors.light),dark:(0,E7.generateDarkPalette)(e.colors.dark)},isCustomizale:!0})))},[d]);let er=e=>{(0,E7.applyCustomTheme)(e),l(c,d,e),f({...d}),s(e.name),E(!1)},en=e=>{l(c,d,e,!0),f({...d}),s("default"),E(!1)},ei=e=>{let t=d.globalReadSettings.customThemes.find(t=>t.name===e);t&&(x(t),E(!0))},ea=()=>{Q({type:"images",multiple:!0}).then(async e=>{if(!e.error&&0!==e.files.length){for(let t of e.files){let e=await u?.importImage(t.path||t.file);if(!e)continue;let r=W(e.path);console.log("Added custom texture:",r),r&&!r.error&&await K(c,r.id)}Y(c)}})},eo=e=>{X(e),d.customTextures=q.filter(t=>t.id!==e),f(d),R===e&&T("none"),Y(c)},es=e=>{U(e),d.globalReadSettings.customHighlightColors=e,f(d),h(c,d)},el=t=>{D(t),l4(c,e,"ttsHighlightOptions",{style:t,color:z})},ec=t=>{F(t),l4(c,e,"ttsHighlightOptions",{style:B,color:t})},eu=e=>{V(e),d.globalReadSettings.customTtsHighlightColors=e,f(d),h(c,d)};return(0,E8.jsx)("div",{className:"my-4 w-full space-y-6",children:S?(0,E8.jsx)(OY,{customTheme:y,onSave:er,onDelete:en,onCancel:()=>E(!1)}):(0,E8.jsxs)(E8.Fragment,{children:[(0,E8.jsx)(OQ,{themeMode:n,onThemeModeChange:o}),(0,E8.jsxs)("div",{className:"flex items-center justify-between",children:[(0,E8.jsx)("h2",{className:"font-medium",children:r("Invert Image In Dark Mode")}),(0,E8.jsx)("input",{type:"checkbox",className:"toggle",checked:m,disabled:!a,onChange:()=>v(!m)})]}),(0,E8.jsxs)("div",{className:"flex items-center justify-between",children:[(0,E8.jsx)("h2",{className:"font-medium",children:r("Override Book Color")}),(0,E8.jsx)("input",{type:"checkbox",className:"toggle",checked:k,onChange:()=>N(!k)})]}),(0,E8.jsx)(O3,{themes:E7.themes.concat(w),themeColor:i,isDarkMode:a,onThemeColorChange:s,onEditTheme:ei,onCreateTheme:()=>E(!0)}),(0,E8.jsx)(O5,{predefinedTextures:ki.PREDEFINED_TEXTURES,customTextures:q.filter(e=>!e.deletedAt),selectedTextureId:R,backgroundOpacity:O,backgroundSize:I,onTextureSelect:T,onOpacityChange:L,onSizeChange:P,onImportImage:ea,onDeleteTexture:eo}),(0,E8.jsx)(O9,{customHighlightColors:$,onChange:es}),(0,E8.jsx)(Le,{style:B,color:z,customColors:H,onStyleChange:el,onColorChange:ec,onCustomColorsChange:eu}),(0,E8.jsx)(Lr,{codeHighlighting:j,codeLanguage:M,onToggle:C,onLanguageChange:A})]})})};var Li=a,La=l,Lo=x,Ls=iB;let Ll=({activePanel:e,setIsDropdownOpen:t,onReset:r,resetLabel:n})=>{let i=eU(),{envConfig:a,appService:o}=(0,La.useEnv)(),s=(0,Ls.useResponsiveSize)(16),{setFontPanelView:l,isSettingsGlobal:c,setSettingsGlobal:u}=(0,Lo.useSettingsStore)(),{getAllFonts:d,removeFont:f,saveCustomFonts:p}=gw(),b=()=>{u(!c),t?.(!1)},g=()=>{r(),t?.(!1)},m=()=>{l("custom-fonts"),t?.(!1)},v=()=>{d().forEach(e=>{f(e.id)&&o.deleteFont(e)}),p(a),t?.(!1)};return(0,Li.jsxs)("div",{className:h("dropdown-content dropdown-right no-triangle border-base-200 z-20 mt-1 border shadow-2xl","text-base sm:text-sm"),children:[(0,Li.jsx)(sj,{label:i("Global Settings"),tooltip:i(c?"Apply to All Books":"Apply to This Book"),buttonClass:"lg:tooltip",Icon:c?(0,Li.jsx)(il,{size:s,className:"text-base-content"}):null,onClick:b}),(0,Li.jsx)(sj,{label:n||i("Reset Settings"),onClick:g}),"Font"===e&&(0,Li.jsxs)(Li.Fragment,{children:[(0,Li.jsx)(sj,{label:i("Clear Custom Fonts"),onClick:v}),(0,Li.jsx)(sj,{label:i("Manage Custom Fonts"),onClick:m})]})]})};var Lc=a,Lu=p,Ld=l,Lf=x,Lh=g3,Lp=ls,Lb=my;let Lg=({bookKey:e,onRegisterReset:t})=>{let r=eU(),{envConfig:n,appService:i}=(0,Ld.useEnv)(),{getView:a,getViewSettings:o,recreateViewer:s}=e_(),{getBookData:l}=ex(),{settings:c}=(0,Lf.useSettingsStore)(),{applyEinkMode:u}=(0,Lh.useEinkMode)(),{acquireVolumeKeyInterception:d,releaseVolumeKeyInterception:f}=eO(),h=l(e),p=o(e)||c.globalViewSettings,[b,g]=(0,Lu.useState)(p.scrolled),[m,v]=(0,Lu.useState)(p.continuousScroll),[y,x]=(0,Lu.useState)(p.scrollingOverlap),[w,_]=(0,Lu.useState)(p.volumeKeysToFlip),[S,E]=(0,Lu.useState)(p.disableClick),[k,N]=(0,Lu.useState)(p.fullscreenClickArea),[j,C]=(0,Lu.useState)(p.swapClickArea),[M,A]=(0,Lu.useState)(p.disableDoubleClick),[R,T]=(0,Lu.useState)(p.enableAnnotationQuickActions),[O,L]=(0,Lu.useState)(p.annotationQuickAction),[I,P]=(0,Lu.useState)(p.copyToNotebook),[B,D]=(0,Lu.useState)(p.animated),[z,F]=(0,Lu.useState)(p.isEink),[$,U]=(0,Lu.useState)(c.autoScreenBrightness),[H,V]=(0,Lu.useState)(p.allowScript),q=EM(),W=()=>{q({scrolled:g,continuousScroll:v,scrollingOverlap:x,volumeKeysToFlip:_,disableClick:E,swapClickArea:C,animated:D,isEink:F,allowScript:V,fullscreenClickArea:N,disableDoubleClick:A,enableAnnotationQuickActions:T,copyToNotebook:P})};(0,Lu.useEffect)(()=>{t(W)},[]),(0,Lu.useEffect)(()=>{b!==p.scrolled&&(l4(n,e,"scrolled",b),a(e)?.renderer.setAttribute("flow",b?"scrolled":"paginated"),a(e)?.renderer.setAttribute("max-inline-size",`${(0,Lb.getMaxInlineSize)(p)}px`),a(e)?.renderer.setStyles?.((0,Lp.getStyles)(p)))},[b]),(0,Lu.useEffect)(()=>{l4(n,e,"continuousScroll",m,!1,!1)},[m]),(0,Lu.useEffect)(()=>{y!==p.scrollingOverlap&&l4(n,e,"scrollingOverlap",y,!1,!1)},[y]),(0,Lu.useEffect)(()=>{l4(n,e,"volumeKeysToFlip",w,!1,!1),i?.isMobileApp&&(w?d():f())},[w]),(0,Lu.useEffect)(()=>{l4(n,e,"disableClick",S,!1,!1)},[S]),(0,Lu.useEffect)(()=>{l4(n,e,"disableDoubleClick",M,!1,!1)},[M]),(0,Lu.useEffect)(()=>{l4(n,e,"fullscreenClickArea",k,!1,!1)},[k]),(0,Lu.useEffect)(()=>{l4(n,e,"swapClickArea",j,!1,!1)},[j]),(0,Lu.useEffect)(()=>{l4(n,e,"animated",B,!1,!1),B?a(e)?.renderer.setAttribute("animated",""):a(e)?.renderer.removeAttribute("animated")},[B]),(0,Lu.useEffect)(()=>{l4(n,e,"isEink",z),z?a(e)?.renderer.setAttribute("eink",""):a(e)?.renderer.removeAttribute("eink"),u(z)},[z]),(0,Lu.useEffect)(()=>{$!==c.autoScreenBrightness&&l6(n,"autoScreenBrightness",$)},[$]),(0,Lu.useEffect)(()=>{p.allowScript!==H&&l4(n,e,"allowScript",H,!0,!1).then(()=>{s(n,e)})},[H]),(0,Lu.useEffect)(()=>{l4(n,e,"enableAnnotationQuickActions",R,!1,!1)},[R]),(0,Lu.useEffect)(()=>{l4(n,e,"copyToNotebook",I,!1,!1)},[I]);let K=()=>[{value:"",label:r("None")},...yN.map(e=>({value:e.type,label:r(e.label)}))],G=t=>{let r=t.target.value;L(r),l4(n,e,"annotationQuickAction",r,!1,!0)};return(0,Lc.jsxs)("div",{className:"my-4 w-full space-y-6",children:[(0,Lc.jsxs)("div",{className:"w-full",children:[(0,Lc.jsx)("h2",{className:"mb-2 font-medium",children:r("Scroll")}),(0,Lc.jsx)("div",{className:"card border-base-200 bg-base-100 border shadow",children:(0,Lc.jsxs)("div",{className:"divide-base-200 divide-y",children:[(0,Lc.jsxs)("div",{className:"config-item",children:[(0,Lc.jsx)("span",{className:"",children:r("Scrolled Mode")}),(0,Lc.jsx)("input",{type:"checkbox",className:"toggle",checked:b,disabled:h?.isFixedLayout,onChange:()=>g(!b)})]}),(0,Lc.jsxs)("div",{className:"config-item",children:[(0,Lc.jsx)("span",{className:"",children:r("Continuous Scroll")}),(0,Lc.jsx)("input",{type:"checkbox",className:"toggle",checked:m,disabled:h?.isFixedLayout,onChange:()=>v(!m)})]}),(0,Lc.jsx)(ET,{label:r("Overlap Pixels"),value:y,onChange:x,disabled:!p.scrolled,min:0,max:200,step:10})]})})]}),(0,Lc.jsxs)("div",{className:"w-full",children:[(0,Lc.jsx)("h2",{className:"mb-2 font-medium",children:r("Pagination")}),(0,Lc.jsx)("div",{className:"card border-base-200 bg-base-100 border shadow",children:(0,Lc.jsxs)("div",{className:"divide-base-200",children:[(0,Lc.jsxs)("div",{className:"config-item",children:[(0,Lc.jsx)("span",{className:"",children:i?.isMobileApp?r("Tap to Paginate"):r("Click to Paginate")}),(0,Lc.jsx)("input",{type:"checkbox",className:"toggle",checked:!S,onChange:()=>E(!S)})]}),(0,Lc.jsxs)("div",{className:"config-item",children:[(0,Lc.jsx)("span",{className:"",children:i?.isMobileApp?r("Tap Both Sides"):r("Click Both Sides")}),(0,Lc.jsx)("input",{type:"checkbox",className:"toggle",checked:k,disabled:S,onChange:()=>N(!k)})]}),(0,Lc.jsxs)("div",{className:"config-item",children:[(0,Lc.jsx)("span",{className:"",children:i?.isMobileApp?r("Swap Tap Sides"):r("Swap Click Sides")}),(0,Lc.jsx)("input",{type:"checkbox",className:"toggle",checked:j,disabled:S||k,onChange:()=>C(!j)})]}),(0,Lc.jsxs)("div",{className:"config-item",children:[(0,Lc.jsx)("span",{className:"",children:i?.isMobileApp?r("Disable Double Tap"):r("Disable Double Click")}),(0,Lc.jsx)("input",{type:"checkbox",className:"toggle",checked:M,onChange:()=>A(!M)})]}),i?.isMobileApp&&(0,Lc.jsxs)("div",{className:"config-item",children:[(0,Lc.jsx)("span",{className:"",children:r("Volume Keys for Page Flip")}),(0,Lc.jsx)("input",{type:"checkbox",className:"toggle",checked:w,onChange:()=>_(!w)})]})]})})]}),(0,Lc.jsxs)("div",{className:"w-full",children:[(0,Lc.jsx)("h2",{className:"mb-2 font-medium",children:r("Annotation Tools")}),(0,Lc.jsx)("div",{className:"card border-base-200 bg-base-100 border shadow",children:(0,Lc.jsxs)("div",{className:"divide-base-200 divide-y",children:[(0,Lc.jsxs)("div",{className:"config-item",children:[(0,Lc.jsx)("span",{className:"",children:r("Enable Quick Actions")}),(0,Lc.jsx)("input",{type:"checkbox",className:"toggle",checked:R,onChange:()=>T(!R)})]}),(0,Lc.jsxs)("div",{className:"config-item",children:[(0,Lc.jsx)("span",{className:"",children:r("Quick Action")}),(0,Lc.jsx)(SM,{value:O||"",onChange:G,options:K(),disabled:!R})]}),(0,Lc.jsxs)("div",{className:"config-item",children:[(0,Lc.jsx)("span",{className:"",children:r("Copy to Notebook")}),(0,Lc.jsx)("input",{type:"checkbox",className:"toggle",checked:I,onChange:()=>P(!I)})]})]})})]}),(0,Lc.jsxs)("div",{className:"w-full",children:[(0,Lc.jsx)("h2",{className:"mb-2 font-medium",children:r("Animation")}),(0,Lc.jsx)("div",{className:"card border-base-200 bg-base-100 border shadow",children:(0,Lc.jsx)("div",{className:"divide-base-200 divide-y",children:(0,Lc.jsxs)("div",{className:"config-item",children:[(0,Lc.jsx)("span",{className:"",children:r("Paging Animation")}),(0,Lc.jsx)("input",{type:"checkbox",className:"toggle",checked:B,onChange:()=>D(!B)})]})})})]}),(i?.isMobileApp||i?.appPlatform==="web")&&(0,Lc.jsxs)("div",{className:"w-full",children:[(0,Lc.jsx)("h2",{className:"mb-2 font-medium",children:r("Device")}),(0,Lc.jsx)("div",{className:"card border-base-200 bg-base-100 border shadow",children:(0,Lc.jsxs)("div",{className:"divide-base-200 divide-y",children:[(i?.isAndroidApp||i?.appPlatform==="web")&&(0,Lc.jsxs)("div",{className:"config-item",children:[(0,Lc.jsx)("span",{className:"",children:r("E-Ink Mode")}),(0,Lc.jsx)("input",{type:"checkbox",className:"toggle",checked:z,onChange:()=>F(!z)})]}),i?.isMobileApp&&(0,Lc.jsxs)("div",{className:"config-item",children:[(0,Lc.jsx)("span",{className:"",children:r("Auto Screen Brightness")}),(0,Lc.jsx)("input",{type:"checkbox",className:"toggle",checked:$,onChange:()=>U(!$)})]})]})})]}),(0,Lc.jsxs)("div",{className:"w-full",children:[(0,Lc.jsx)("h2",{className:"mb-2 font-medium",children:r("Security")}),(0,Lc.jsx)("div",{className:"card border-base-200 bg-base-100 border shadow",children:(0,Lc.jsx)("div",{className:"divide-base-200 divide-y",children:(0,Lc.jsxs)("div",{className:"config-item !h-16",children:[(0,Lc.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,Lc.jsx)("span",{className:"",children:r("Allow JavaScript")}),(0,Lc.jsx)("span",{className:"text-xs",children:r("Enable only if you trust the file.")})]}),(0,Lc.jsx)("input",{type:"checkbox",className:"toggle",checked:H,disabled:h?.book?.format!=="EPUB",onChange:()=>V(!H)})]})})})]})]})};var Lm=a,Lv=p,Ly=l,Lx=s,Lw=x,L_=R,LS=S;let LE=({bookKey:e,onRegisterReset:t})=>{let r=eU(),{token:n}=(0,Lx.useAuth)(),{envConfig:i}=(0,Ly.useEnv)(),{settings:a,applyUILanguage:o}=(0,Lw.useSettingsStore)(),{getView:s,getViewSettings:l,setViewSettings:c,recreateViewer:u}=e_(),d=s(e),f=l(e)||a.globalViewSettings,[p,b]=(0,Lv.useState)(f.uiLanguage),[g,m]=(0,Lv.useState)(f.translationEnabled),[v,y]=(0,Lv.useState)(f.translationProvider),[x,w]=(0,Lv.useState)(f.translateTargetLang),[_,S]=(0,Lv.useState)(f.showTranslateSource),[E,k]=(0,Lv.useState)(f.ttsReadAloudText),[N,j]=(0,Lv.useState)(f.replaceQuotationMarks),[C,M]=(0,Lv.useState)(f.convertChineseVariant),A=EM(),R=()=>{A({uiLanguage:b,translationEnabled:m,translationProvider:y,translateTargetLang:w,showTranslateSource:S,ttsReadAloudText:k,replaceQuotationMarks:j})};(0,Lv.useEffect)(()=>{t(R)},[]);let T=()=>{let e=f.uiLanguage;return{value:e,label:""===e?r("Auto"):L_.TRANSLATED_LANGS[e]}},O=e=>{let t=Object.entries(e).map(([e,t])=>({value:e,label:t}));return t.sort((e,t)=>e.label.localeCompare(t.label)),t.unshift({value:"",label:r("System Language")}),t},L=e=>{b(e.target.value)},I=()=>ny().map(e=>{let t=e.label;return e.authRequired&&!n?t=`${t} (${r("Login Required")})`:e.quotaExceeded&&(t=`${t} (${r("Quota Exceeded")})`),{value:e.name,label:t}}),P=()=>{let e=v,t=I(),r=ny().filter(e=>(!e.authRequired||!!n)&&!e.quotaExceeded),i=r.find(t=>t.name===e)?e:r[0]?.name;return t.find(e=>e.value===i)||t[0]},B=t=>{let r=t.target.value;y(r),l4(i,e,"translationProvider",r,!1,!1),f.translationProvider=r,c(e,{...f})},D=()=>{let e=x,t=O(L_.TRANSLATOR_LANGS);return t.find(t=>t.value===e)||t[0]},z=t=>{let r=t.target.value;w(r),l4(i,e,"translateTargetLang",r,!1,!1),f.translateTargetLang=r,c(e,{...f})},F=t=>{let r=t.target.value;k(r),l4(i,e,"ttsReadAloudText",r,!1,!1)},$=()=>[{value:"both",label:r("Source and Translated")},{value:"translated",label:r("Translated Only")},{value:"source",label:r("Source Only")}];(0,Lv.useEffect)(()=>{p!==f.uiLanguage&&(l4(i,e,"uiLanguage",p,!1,!1),o(p))},[p]),(0,Lv.useEffect)(()=>{g!==f.translationEnabled&&l4(i,e,"translationEnabled",g,!0,!1).then(()=>{!_&&g&&u(i,e)})},[g]),(0,Lv.useEffect)(()=>{_!==f.showTranslateSource&&l4(i,e,"showTranslateSource",_,!1,!1).then(()=>{u(i,e)})},[_]),(0,Lv.useEffect)(()=>{E!==f.ttsReadAloudText&&l4(i,e,"ttsReadAloudText",E,!1,!1)},[E]),(0,Lv.useEffect)(()=>{N!==f.replaceQuotationMarks&&l4(i,e,"replaceQuotationMarks",N,!1,!1).then(()=>{u(i,e)})},[N]);let U=()=>[{value:"none",label:r("No Conversion")},{value:"s2t",label:r("Simplified to Traditional")},{value:"t2s",label:r("Traditional to Simplified")},{value:"s2tw",label:r("Simplified to Traditional (Taiwan)")},{value:"s2hk",label:r("Simplified to Traditional (Hong Kong)")},{value:"s2twp",label:r("Simplified to Traditional (Taiwan), with phrases")},{value:"tw2s",label:r("Traditional (Taiwan) to Simplified")},{value:"hk2s",label:r("Traditional (Hong Kong) to Simplified")},{value:"tw2sp",label:r("Traditional (Taiwan) to Simplified, with phrases")}],H=()=>{let e=C,t=U();return t.find(t=>t.value===e)||t[0]},V=e=>{M(e.target.value)};return(0,Lv.useEffect)(()=>{C!==f.convertChineseVariant&&l4(i,e,"convertChineseVariant",C,!1,!1).then(()=>{u(i,e)})},[C]),(0,Lm.jsxs)("div",{className:h("my-4 w-full space-y-6"),children:[(0,Lm.jsxs)("div",{className:"w-full",children:[(0,Lm.jsx)("h2",{className:"mb-2 font-medium",children:r("Language")}),(0,Lm.jsx)("div",{className:"card border-base-200 bg-base-100 border shadow",children:(0,Lm.jsx)("div",{className:"divide-base-200 divide-y",children:(0,Lm.jsxs)("div",{className:"config-item",children:[(0,Lm.jsx)("span",{className:"",children:r("Interface Language")}),(0,Lm.jsx)(SM,{value:T().value,onChange:L,options:O(L_.TRANSLATED_LANGS)})]})})})]}),(0,Lm.jsxs)("div",{className:"w-full",children:[(0,Lm.jsx)("h2",{className:"mb-2 font-medium",children:r("Translation")}),(0,Lm.jsx)("div",{className:"card border-base-200 bg-base-100 border shadow",children:(0,Lm.jsxs)("div",{className:"divide-base-200",children:[(0,Lm.jsxs)("div",{className:"config-item",children:[(0,Lm.jsx)("span",{className:"",children:r("Enable Translation")}),(0,Lm.jsx)("input",{type:"checkbox",className:"toggle",checked:g,onChange:()=>m(!g),disabled:!e})]}),(0,Lm.jsxs)("div",{className:"config-item",children:[(0,Lm.jsx)("span",{className:"",children:r("Show Source Text")}),(0,Lm.jsx)("input",{type:"checkbox",className:"toggle",checked:_,onChange:()=>S(!_)})]}),(0,Lm.jsxs)("div",{className:"config-item",children:[(0,Lm.jsx)("span",{className:"",children:r("TTS Text")}),(0,Lm.jsx)(SM,{value:E,onChange:F,options:$()})]}),(0,Lm.jsxs)("div",{className:"config-item",children:[(0,Lm.jsx)("span",{className:"",children:r("Translation Service")}),(0,Lm.jsx)(SM,{value:P().value,onChange:B,options:I()})]}),(0,Lm.jsxs)("div",{className:"config-item",children:[(0,Lm.jsx)("span",{className:"",children:r("Translate To")}),(0,Lm.jsx)(SM,{value:D().value,onChange:z,options:O(L_.TRANSLATOR_LANGS)})]})]})})]}),((0,LS.isCJKEnv)()||d?.language.isCJK)&&(0,Lm.jsxs)("div",{className:"w-full",children:[(0,Lm.jsx)("h2",{className:"mb-2 font-medium",children:r("Punctuation")}),(0,Lm.jsx)("div",{className:"card border-base-200 bg-base-100 border shadow",children:(0,Lm.jsx)("div",{className:"divide-base-200",children:(0,Lm.jsxs)("div",{className:"config-item !h-16",children:[(0,Lm.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,Lm.jsx)("span",{className:"",children:r("Replace Quotation Marks")}),(0,Lm.jsx)("span",{className:"text-xs",children:r("Enabled only in vertical layout.")})]}),(0,Lm.jsx)("input",{type:"checkbox",className:"toggle",checked:N,onChange:()=>j(!N)})]})})})]}),((0,LS.isCJKEnv)()||d?.language.isCJK)&&(0,Lm.jsxs)("div",{className:"w-full",children:[(0,Lm.jsx)("h2",{className:"mb-2 font-medium",children:r("Convert Simplified and Traditional Chinese")}),(0,Lm.jsx)("div",{className:"card border-base-200 bg-base-100 border shadow",children:(0,Lm.jsx)("div",{className:"divide-base-200",children:(0,Lm.jsxs)("div",{className:"config-item",children:[(0,Lm.jsx)("span",{className:"",children:r("Convert Mode")}),(0,Lm.jsx)(SM,{value:H().value,onChange:V,options:U()})]})})})]})]})};var Lk=a,LN=p,Lj=l,LC=x;let LM=e=>{let t;e=e.replace(/\/\*[\s\S]*?\*\//g,"").trim();let r=/^[\s\n]*[-\w]+\s*:\s*[^;]+;?$/;if(!e)return{isValid:!1,error:"Empty CSS"};if((e.match(/{/g)||[]).length!==(e.match(/}/g)||[]).length)return{isValid:!1,error:"Unbalanced curly braces"};let n=/@[\w-]+[^{]*\{/g,i="",a=0;for(;null!==(t=n.exec(e));){let r=t.index,o=e.slice(a,r).trim();o&&(i+=o+"\n");let s=n.lastIndex,l=1;for(;s<e.length&&l>0;)"{"===e[s]?l++:"}"===e[s]&&l--,s++;if(0!==l)return{isValid:!1,error:"Unbalanced curly braces in at-rule"};let c=LM(e.slice(n.lastIndex,s-1).trim());if(!c.isValid)return c;a=s}for(let t of(i+=e.slice(a).trim(),(e=i).split("}").map(e=>e.trim()).filter(Boolean))){let e=t.split("{").map(e=>e.trim());if(2!==e.length)return{isValid:!1,error:"Invalid CSS structure"};let[n,i]=e;if(!n)return{isValid:!1,error:"Missing selector"};if(!i)return{isValid:!1,error:`Missing declarations for selector: ${n}`};let a=i.split(";").map(e=>e.trim()).filter(Boolean);if(0===a.length)return{isValid:!1,error:`No valid properties for selector: ${n}`};for(let e of a){if(!e.includes(":"))return{isValid:!1,error:`Missing property or value: ${e}`};let[t,n]=e.split(":").map(e=>e.trim());if(!t)return{isValid:!1,error:`Missing property name: ${e}`};if(!n)return{isValid:!1,error:`Missing property value: ${e}`};if(!r.test(e.endsWith(";")?e:e+";"))return{isValid:!1,error:`Invalid property: ${e}`}}}return{isValid:!0,error:null}},LA=e=>{let t="	",r="",n=0,i=!1;e=(e=(e=e.replace(/\s*\n\s*/g,"")).replace(/\s{2,}/g," ").trim()).replace(/([^\s{};][^{};]*:[^{};]+)\s*}/g,"$1;}");for(let a=0;a<e.length;a++){let o=e[a],s=e.slice(a,a+2);if("/*"===s){i=!0,r+="\n"+t.repeat(n)+"/*",a++;continue}if("*/"===s&&i){i=!1,r+="*/\n"+t.repeat(n),a++;continue}if(i){r+=o;continue}if("{"===o)n++,r+=" {\n"+t.repeat(n);else if("}"===o)n--,r+="\n"+t.repeat(n)+"}\n"+t.repeat(n);else if(";"===o)for(r+=";\n"+t.repeat(n);" "===e[a+1]||";"===e[a+1];)a++;else r+=o}return r.replace(/\n([ \t]*\n)+/g,"\n").replace(/[ ]{2,}/g," ").trim()};var LR=ls;let LT=({bookKey:e,onRegisterReset:t})=>{let r=eU(),{appService:n,envConfig:i}=(0,Lj.useEnv)(),{settings:a,isSettingsGlobal:o,setSettings:s}=(0,LC.useSettingsStore)(),{getView:l,getViewSettings:c,setViewSettings:u}=e_(),d=c(e)||a.globalViewSettings,[f,p]=(0,LN.useState)(d.userStylesheet),[b,g]=(0,LN.useState)(!0),[m,v]=(0,LN.useState)(null),[y,x]=(0,LN.useState)(d.userUIStylesheet),[w,_]=(0,LN.useState)(!0),[S,E]=(0,LN.useState)(null),[k,N]=(0,LN.useState)(!1),j=(0,LN.useRef)(null),C=(0,LN.useRef)(null),M=EM(),A=()=>{M({userStylesheet:p,userUIStylesheet:x}),O("book",!0),O("reader",!0)};(0,LN.useEffect)(()=>{t(A)},[]);let R=e=>{if(!e.trim())return{isValid:!0};try{let{isValid:t,error:r}=LM(e);if(!t)return{isValid:!1,error:r||"Invalid CSS"};return{isValid:!0}}catch(e){if(e instanceof Error)return{isValid:!1,error:e.message};return{isValid:!1,error:"Invalid CSS: Please check your input."}}},T=(e,t)=>{let r=e.target.value;if("book"===t){p(r),g(!1);let{isValid:e,error:t}=R(r);v(e?null:t||"Invalid CSS")}else{x(r),_(!1);let{isValid:e,error:t}=R(r);E(e?null:t||"Invalid CSS")}},O=(t,r=!1)=>{let n="book"===t?f:y,c=LA(r?"":n);"book"===t?(p(c),g(!0),d.userStylesheet=c,o&&(a.globalViewSettings.userStylesheet=c,s(a))):(x(c),_(!0),d.userUIStylesheet=c,o&&(a.globalViewSettings.userUIStylesheet=c,s(a))),u(e,{...d}),l(e)?.renderer.setStyles?.((0,LR.getStyles)(d)),l4(i,e,"book"===t?"userStylesheet":"userUIStylesheet",c,!1,!1)},L=e=>{e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()},I=e=>{n?.isAndroidApp&&N(!0),setTimeout(()=>{e.current?.scrollIntoView({behavior:"instant",block:"center"})},300)},P=()=>{n?.isAndroidApp&&setTimeout(()=>{N(!1)},100)},B=(e,t,n,i,a,o,s)=>(0,Lk.jsxs)("div",{className:"w-full",children:[(0,Lk.jsx)("h2",{className:"mb-2 font-medium","aria-label":r(t),children:r(t)}),(0,Lk.jsx)("div",{className:`card border-base-200 bg-base-100 border shadow ${a?"border-red-500":""}`,children:(0,Lk.jsxs)("div",{className:"relative p-1",children:[(0,Lk.jsx)("textarea",{ref:s,className:h("textarea textarea-ghost h-48 w-full border-0 p-3 text-base !outline-none sm:text-sm","placeholder:text-base-content/70"),placeholder:r(n),spellCheck:"false",value:i,onFocus:()=>I(s),onBlur:P,onInput:L,onKeyDown:L,onKeyUp:L,onChange:t=>T(t,e)}),(0,Lk.jsx)("button",{className:h("btn btn-ghost bg-base-200 absolute bottom-2 right-4 h-8 min-h-8 px-4 py-2",o?"hidden":"",a?"btn-disabled":""),onClick:()=>O(e),disabled:!!a,children:r("Apply")})]})}),a&&(0,Lk.jsx)("p",{className:"mt-1 text-sm text-red-500",children:a})]});return(0,Lk.jsxs)("div",{className:h("my-4 w-full space-y-6",k&&"h-[50%] overflow-y-auto pb-[200px]"),children:[B("book",r("Custom Content CSS"),r("Enter CSS for book content styling..."),f,m,b,j),B("reader",r("Custom Reader UI CSS"),r("Enter CSS for reader interface styling..."),y,S,w,C)]})},LO=({bookKey:e})=>{let t=eU(),{appService:r}=(0,Ec.useEnv)(),n=(0,Ed.useResponsiveSize)(16),[i]=(0,El.useState)(()=>"rtl"===(0,Em.getDirFromUILanguage)()),a=(0,El.useRef)(null),[o,s]=(0,El.useState)(!1),{setFontPanelView:l,setSettingsDialogOpen:c}=(0,Eu.useSettingsStore)(),u=[{tab:"Font",icon:aV,label:t("Font")},{tab:"Layout",icon:aG,label:t("Layout")},{tab:"Color",icon:Ef,label:t("Color")},{tab:"Control",icon:Eh,label:t("Behavior")},{tab:"Language",icon:aW,label:t("Language")},{tab:"Custom",icon:Ep,label:t("Custom")}],[d,f]=(0,El.useState)(()=>{let e=localStorage.getItem("lastConfigPanel");return e&&u.some(t=>t.tab===e)?e:"Font"}),p=e=>{f(e),l("main-fonts"),localStorage.setItem("lastConfigPanel",e)},[b,g]=(0,El.useState)({Font:null,Layout:null,Color:null,Control:null,Language:null,Custom:null}),m=(e,t)=>{g(r=>({...r,[e]:t}))},v=()=>{let e=b[d];e&&e()},y=()=>{c(!1)};(0,El.useEffect)(()=>{l("main-fonts");let e=a.current;if(!e)return;let t=()=>{let t=(e.clientWidth-64)*.22;s(!Array.from(e.querySelectorAll("button")).some(e=>{let r=e.querySelector("span"),n=r?.textContent||"",i=e.cloneNode(!0);i.style.position="absolute",i.style.visibility="hidden",i.style.width="auto";let a=i.querySelector("span");a&&(a.classList.remove("hidden"),a.textContent=n),document.body.appendChild(i);let o=i.scrollWidth;return document.body.removeChild(i),o>t}))};t();let r=new ResizeObserver(t);r.observe(e);let n=new MutationObserver(t);return n.observe(e,{subtree:!0,characterData:!0}),()=>{r.disconnect(),n.disconnect()}},[l]);let x=u.find(e=>e.tab===d);return(0,Es.jsx)(iG,{isOpen:!0,onClose:y,className:"modal-open",bgClassName:e?"sm:!bg-black/20":"sm:!bg-black/50",boxClassName:h("sm:min-w-[520px]",r?.isMobile&&"sm:max-w-[90%] sm:w-3/4"),snapHeight:r?.isMobile?.7:void 0,header:(0,Es.jsxs)("div",{className:"flex w-full flex-col items-center",children:[(0,Es.jsx)("div",{className:"tab-title flex pb-2 text-base font-semibold sm:hidden",children:x?.label||""}),(0,Es.jsxs)("div",{className:"flex w-full flex-row items-center justify-between",children:[(0,Es.jsx)("button",{tabIndex:-1,"aria-label":t("Close"),onClick:y,className:"btn btn-ghost btn-circle flex h-8 min-h-8 w-8 hover:bg-transparent focus:outline-none sm:hidden",children:i?(0,Es.jsx)(is,{}):(0,Es.jsx)(io,{})}),(0,Es.jsx)("div",{ref:a,role:"group","aria-label":t("Settings Panels")+" - "+(x?.label||""),className:h("dialog-tabs ms-1 flex h-10 w-full items-center gap-1 sm:ms-0"),children:u.map(({tab:e,icon:t,label:r})=>(0,Es.jsxs)("button",{"data-tab":e,tabIndex:0,title:r,className:h("btn btn-ghost text-base-content btn-sm gap-1 px-2",d===e?"btn-active":""),onClick:()=>p(e),children:[(0,Es.jsx)(t,{className:"mr-0"}),(0,Es.jsx)("span",{className:h(window.innerWidth<640&&"hidden",!(o||d===e)&&"hidden"),children:r})]},e))}),(0,Es.jsxs)("div",{className:"flex h-full items-center justify-end gap-x-2",children:[(0,Es.jsx)(sM,{label:t("Settings Menu"),className:"dropdown-bottom dropdown-end",buttonClassName:"btn btn-ghost h-8 min-h-8 w-8 p-0 flex items-center justify-center",toggleButton:(0,Es.jsx)(pZ,{}),children:(0,Es.jsx)(Ll,{activePanel:d,onReset:v,resetLabel:x?t("Reset {{settings}}",{settings:x.label}):void 0})}),(0,Es.jsx)("button",{onClick:y,"aria-label":t("Close"),className:"bg-base-300/65 btn btn-ghost btn-circle hidden h-6 min-h-6 w-6 p-0 sm:flex",children:(0,Es.jsx)(ic,{size:n})})]})]})]}),children:(0,Es.jsxs)("div",{role:"group","aria-label":`${t(x?.label||"")} - ${t("Settings")}`,children:["Font"===d&&(0,Es.jsx)(EX,{bookKey:e,onRegisterReset:e=>m("Font",e)}),"Layout"===d&&(0,Es.jsx)(E5,{bookKey:e,onRegisterReset:e=>m("Layout",e)}),"Color"===d&&(0,Es.jsx)(Ln,{bookKey:e,onRegisterReset:e=>m("Color",e)}),"Control"===d&&(0,Es.jsx)(Lg,{bookKey:e,onRegisterReset:e=>m("Control",e)}),"Language"===d&&(0,Es.jsx)(LE,{bookKey:e,onRegisterReset:e=>m("Language",e)}),"Custom"===d&&(0,Es.jsx)(LT,{bookKey:e,onRegisterReset:e=>m("Custom",e)})]})})},LL=({ids:e,settings:t})=>{let r=eU(),n=(0,ob.useRouter)(),i=(0,ob.useSearchParams)(),{envConfig:a,appService:o}=(0,og.useEnv)(),{bookKeys:s,dismissBook:l,getNextBookKey:c}=ln(),{sideBarBookKey:u,setSideBarBookKey:d}=ek(),{saveSettings:f}=(0,om.useSettingsStore)(),{getConfig:h,getBookData:p,saveConfig:b}=ex(),{getView:g,setBookKeys:m,getViewSettings:v}=e_(),{initViewState:y,getViewState:x,clearViewState:w}=e_(),{isSettingsDialogOpen:_,settingsDialogBookKey:S}=(0,om.useSettingsStore)(),[E,k]=(0,op.useState)(null),N=(0,op.useRef)(!1),[j,C]=(0,op.useState)(!1),[M,A]=(0,op.useState)(!1);l_({sideBarBookKey:u,bookKeys:s}),(0,op.useEffect)(()=>{if(N.current)return;N.current=!0;let t=window.location.pathname,n=(e||i?.get("ids")||t.split("/reader/")[1]||"").split(o0.BOOK_IDS_SEPARATOR).filter(Boolean).map(e=>`${e}-${(0,oD.uniqueId)()}`);m(n);let o=new Set;console.log("Initialize books",n),n.forEach((e,t)=>{let n=e.split("-")[0],i=!o.has(n);o.add(n),x(e)||(y(a,n,e,i).catch(t=>{console.log("Error initializing book",e,t),A(!0),eR.dispatch("toast",{message:r("Unable to open book"),callback:()=>O(),timeout:2e3,type:"error"})}),0===t&&d(e))})},[]),(0,op.useEffect)(()=>{let e=e=>(k(e.detail),!0);return eR.onSync("show-book-details",e),()=>{eR.offSync("show-book-details",e)}},[]),(0,op.useEffect)(()=>{let e;if(s&&s.length>0){let e=om.useSettingsStore.getState().settings,t=s.map(e=>e.split("-")[0]);e.lastOpenBooks?.toString()!==t.toString()&&(e.lastOpenBooks=t,f(a,e))}return(0,oB.isTauriAppPlatform)()&&(e=oL(I)),window.addEventListener("beforeunload",I),eR.on("beforereload",I),eR.on("close-reader",I),eR.on("quit-app",I),()=>{window.removeEventListener("beforeunload",I),eR.off("beforereload",I),eR.off("close-reader",I),eR.off("quit-app",I),e?.then(e=>e())}},[s]);let R=async e=>{let t=h(e),{book:r}=p(e)||{},{isPrimary:n}=x(e)||{};if(n&&r&&t){let r=om.useSettingsStore.getState().settings;eR.dispatch("sync-book-progress",{bookKey:e}),eR.dispatch("flush-kosync",{bookKey:e}),await b(a,e,t,r)}},T=async e=>{console.log("Closing book",e);let t=x(e);t?.isPrimary&&o?.isDesktopApp&&await oQ(o);try{g(e)?.close(),g(e)?.remove()}catch{console.info("Error closing book",e)}eR.dispatch("tts-stop",{bookKey:e}),await R(e),w(e)},O=()=>{oV(n,"",void 0,!0)},L=()=>{f(a,t),O()},I=oz(async()=>{let e=om.useSettingsStore.getState().settings;await Promise.all(s.map(async e=>await T(e))),await f(a,e)},200),P=()=>{if(I(),(0,oB.isTauriAppPlatform)()){let e=(0,ok.getCurrentWindow)();"main"===e.label?O():e.close()}else O()},B=async e=>{if(T(e),u===e&&d(c(u)),l(e),0==s.filter(t=>t!==e).length){let e=await oE(o)||[];if(o?.hasWindow){if(e.length>0)return oL(I),await oO();let t=(0,ok.getCurrentWindow)();if(t.label.startsWith("reader"))return await t.close()}L()}};if(!s||0===s.length)return null;let D=p(s[0]),z=v(s[0]);return D&&D.book&&D.bookDoc&&z?(0,oh.jsxs)("div",{className:"reader-content full-height flex",children:[(0,oh.jsx)(bM,{onGoToLibrary:P}),(0,oh.jsx)(Eo,{bookKeys:s,onCloseBook:B}),_&&(0,oh.jsx)(LO,{bookKey:S}),(0,oh.jsx)(bQ,{}),E&&(0,oh.jsx)(s8,{isOpen:!!E,book:E,onClose:()=>k(null)})]}):(setTimeout(()=>C(!0),200),j&&!M&&(0,oh.jsx)("div",{className:"hero hero-content full-height",children:(0,oh.jsx)(s5,{loading:!0})}))},LI=({ids:e})=>{let t=(0,b.useRouter)(),{appService:r}=(0,g.useEnv)(),{settings:n}=(0,ej.useSettingsStore)(),{libraryLoaded:i}=I(),{sideBarBookKey:a}=ek(),{hoveredBookKey:o}=e_(),{showSystemUI:s,dismissSystemUI:l}=(0,P.useThemeStore)(),{getScreenBrightness:c,setScreenBrightness:u}=eO(),{acquireBackKeyInterception:f,releaseBackKeyInterception:m}=eO(),{isSideBarVisible:v,isSideBarPinned:y}=ek(),{getIsSideBarVisible:x,setSideBarVisible:w}=ek(),{isNotebookVisible:_,isNotebookPinned:S}=eN(),{getIsNotebookVisible:E,setNotebookVisible:k}=eN(),{isDarkMode:j,systemUIAlwaysHidden:C,isRoundedWindow:M}=(0,P.useThemeStore)();N({systemUIVisible:n.alwaysShowStatusBar,appThemeColor:"base-100"}),eB(n.screenWakeLock),eX(i,5e3),(0,p.useEffect)(()=>{e7(document),eQ(),(0,tc.isTauriAppPlatform)()&&setTimeout(tu.getSysFontsList,3e3),(0,of.initDayjs)((0,od.getLocale)())},[]),(0,p.useEffect)(()=>{let e=n.screenBrightness,t=n.autoScreenBrightness;r?.hasScreenBrightness&&!t&&e>=0&&u(e/100);let i=-1;return r?.isIOSApp&&c().then(e=>{i=e}),()=>{r?.hasScreenBrightness&&!t&&u(i)}},[r]);let A=e=>"Back"===e.detail.keyName&&(x()&&!y?w(!1):E()&&!S?k(!1):(eR.dispatch("close-reader"),t.back()),!0);return(0,p.useEffect)(()=>{if(r?.isAndroidApp)return f(),()=>{m()}},[r?.isAndroidApp]),(0,p.useEffect)(()=>(r?.isAndroidApp&&eR.onSync("native-key-down",A),()=>{r?.isAndroidApp&&eR.offSync("native-key-down",A)}),[r?.isAndroidApp,a,y,v,S,_]),(0,p.useEffect)(()=>{if(!r?.isMobileApp)return;let e=!!((o||n.alwaysShowStatusBar)&&!C);(0,tu.setSystemUIVisibility)({visible:e,darkMode:j}),e?s():l()},[o]),i&&n.globalReadSettings?(0,d.jsx)("div",{className:h("reader-page bg-base-100 text-base-content full-height select-none overflow-hidden",r?.hasRoundedWindow&&M&&"window-border rounded-window"),children:(0,d.jsxs)(p.Suspense,{fallback:(0,d.jsx)("div",{className:"full-height"}),children:[(0,d.jsx)(LL,{ids:e,settings:n}),(0,d.jsx)(am,{}),(0,d.jsx)(i0,{}),(0,d.jsx)(aO,{}),(0,d.jsx)(oo,{}),(0,d.jsx)(ou,{})]})}):(0,d.jsx)("div",{className:h("full-height",!r?.isLinuxApp&&"bg-base-100")})};function LP(){let e=(0,o.useRouter)().query.ids;return(0,a.jsx)(c.CSPostHogProvider,{children:(0,a.jsx)(l.EnvProvider,{children:(0,a.jsx)(s.AuthProvider,{children:(0,a.jsx)(u.SyncProvider,{children:(0,a.jsx)(LI,{ids:e})})})})})}e.s(["default",()=>LP],925502)},712796,(e,t,r)=>{let n="/reader/[ids]";(window.__NEXT_P=window.__NEXT_P||[]).push([n,()=>e.r(925502)]),t.hot&&t.hot.dispose(function(){window.__NEXT_P.push([n])})}]);
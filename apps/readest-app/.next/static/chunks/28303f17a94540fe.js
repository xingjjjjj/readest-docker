(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,7284,943897,e=>{"use strict";function t(){for(var e,t,r=0,i="",n=arguments.length;r<n;r++)(e=arguments[r])&&(t=function e(t){var r,i,n="";if("string"==typeof t||"number"==typeof t)n+=t;else if("object"==typeof t)if(Array.isArray(t)){var s=t.length;for(r=0;r<s;r++)t[r]&&(i=e(t[r]))&&(n&&(n+=" "),n+=i)}else for(i in t)t[i]&&(n&&(n+=" "),n+=i);return n}(e))&&(i&&(i+=" "),i+=t);return i}e.s(["clsx",()=>t,"default",0,t],7284);var r=e.i(917409),i=e.i(233878),n=["attr","size","title"];function s(){return(s=Object.assign.bind()).apply(this,arguments)}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){var i,n,s;i=e,n=t,s=r[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in i?Object.defineProperty(i,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[n]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function o(e){return t=>r.default.createElement(c,s({attr:a({},e.attr)},t),function e(t){return t&&t.map((t,i)=>r.default.createElement(t.tag,a({key:i},t.attr),e(t.child)))}(e.child))}function c(e){var t=t=>{var i,{attr:l,size:o,title:c}=e,u=function(e,t){if(null==e)return{};var r,i,n=function(e,t){if(null==e)return{};var r={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;r[i]=e[i]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}(e,n),m=o||t.size||"1em";return t.className&&(i=t.className),e.className&&(i=(i?i+" ":"")+e.className),r.default.createElement("svg",s({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,l,u,{className:i,style:a(a({color:e.color||t.color},t.style),e.style),height:m,width:m,xmlns:"http://www.w3.org/2000/svg"}),c&&r.default.createElement("title",null,c),e.children)};return void 0!==i.IconContext?r.default.createElement(i.IconContext.Consumer,null,e=>t(e)):t(i.DefaultContext)}e.s(["GenIcon",()=>o],943897)},763790,e=>{"use strict";let t=e=>{let t=navigator.userAgent;if(e?.isAndroidApp){let e=t.match(/Chrome\/([0-9.]+)/);return e?`WebView ${e[1]}`:"Android WebView"}if(e?.isIOSApp){let e=t.match(/AppleWebKit\/([0-9.]+)/);return e?`WebView ${e[1]}`:"iOS WebView"}if(e?.isMacOSApp){let e=t.match(/AppleWebKit\/([0-9.]+)/);return e?`WebView ${e[1]}`:"macOS WebView"}if(e?.appPlatform==="tauri"&&e?.osPlatform==="windows"){let e=t.match(/Edg\/([0-9.]+)/);return e?`Edge ${e[1]}`:"Edge WebView2"}if(e?.appPlatform==="tauri"&&e?.osPlatform==="linux"){let e=t.match(/AppleWebKit\/([0-9.]+)/);return e?`WebView ${e[1]}`:"Linux WebView"}else if(t.includes("CriOS")&&t.includes("Mobile/")&&t.includes("Safari")){let e=t.match(/CriOS\/([0-9.]+)/);return e?`Chrome ${e[1]}`:"iOS Chrome"}else if(t.includes("FxiOS")&&t.includes("Mobile/")&&t.includes("Safari")){let e=t.match(/FxiOS\/([0-9.]+)/);return e?`Firefox ${e[1]}`:"iOS Firefox"}else if(t.includes("Chrome")&&t.includes("AppleWebKit")&&t.includes("Macintosh")){let e=t.match(/Chrome\/([0-9.]+)/);return e?`Chrome ${e[1]}`:"macOS Chrome"}else if(t.includes("Safari")&&t.includes("AppleWebKit")&&t.includes("Macintosh")){let e=t.match(/Safari\/([0-9.]+)/);return e?`Safari ${e[1]}`:"macOS Safari"}else if(t.includes("Edg/")){let e=t.match(/Edg\/([0-9.]+)/);return e?`Edge ${e[1]}`:"Edge WebView"}else if(t.includes("Firefox/")){let e=t.match(/Firefox\/([0-9.]+)/);return e?`Firefox ${e[1]}`:"Firefox Gecko"}else if(t.includes("Chrome/")&&!t.includes("Chromium")){let e=t.match(/Chrome\/([0-9.]+)/);return e?`Chrome ${e[1]}`:"Chrome"}else if(t.includes("Chromium/")){let e=t.match(/Chromium\/([0-9.]+)/);return e?`Chromium ${e[1]}`:"Chromium"}else{if(!t.includes("MSIE "))return"Unknown";let e=t.match(/MSIE ([0-9.]+)/);return e?`IE ${e[1]}`:"Internet Explorer"}};e.s(["parseWebViewInfo",0,t,"parseWebViewVersion",0,e=>{let r=t(e).match(/([0-9]+)\./);return r?parseFloat(r[1]):0}])},604111,e=>{"use strict";e.i(875785);var t=e.i(917409);e.i(993014);var r=e.i(421141);e.s(["useTranslation",0,(e="translation")=>{let{t:i}=(0,r.useTranslation)(e);return(0,t.useCallback)((e,t={})=>i(e,{defaultValue:e,...t}),[i])}])},553438,(e,t,r)=>{t.exports=e.r(196260)},29755,e=>{"use strict";var t=e.i(917409),r=e.i(96508),i=e.i(981441),n=e.i(424439),s=e.i(415810),l=e.i(341537),a=e.i(62725),o=e.i(763790);e.s(["useTheme",0,({systemUIVisible:e=!0,appThemeColor:c="base-100"}={})=>{let{appService:u}=(0,r.useEnv)(),{settings:m}=(0,n.useSettingsStore)(),{themeColor:d,isDarkMode:f,isEinkMode:h,showSystemUI:p,dismissSystemUI:b,updateAppTheme:g,setStatusBarHeight:y,systemUIAlwaysHidden:v,setSystemUIAlwaysHidden:S}=(0,i.useThemeStore)(),w=(0,t.useRef)(!1);(0,t.useEffect)(()=>{g(c),u?.isAndroidApp&&(0,l.getStatusBarHeight)().then(e=>{e.height&&e.height>0&&y(e.height/window.devicePixelRatio)})},[u?.isAndroidApp]);let x=(0,t.useCallback)(()=>{if(!u?.isMobileApp)return;let t=!!(e&&!v);t?p():b(),(0,l.setSystemUIVisibility)({visible:t,darkMode:f})},[u,f,e]);(0,t.useEffect)(()=>{u?.isMobileApp&&x()},[x]),(0,t.useEffect)(()=>{if(!u?.isMobileApp)return;x();let e=()=>{"visible"===document.visibilityState&&x()},t=()=>{u?.isIOSApp&&"ios"===(0,a.getOSPlatform)()&&(S(screen.orientation?.type.includes("landscape")),x())};return document.addEventListener("visibilitychange",e),screen.orientation?.addEventListener("change",t),()=>{document.removeEventListener("visibilitychange",e),screen.orientation?.removeEventListener("change",t)}},[x]),(0,t.useEffect)(()=>{u?.isAndroidApp&&(w.current=111>(0,o.parseWebViewVersion)(u))},[u]),(0,t.useEffect)(()=>{d&&s.themes.find(e=>e.name===d)&&w.current&&(0,s.applyCustomTheme)(void 0,d,!0)},[d]),(0,t.useEffect)(()=>{let e=m.globalReadSettings?.customThemes??[];e.forEach(e=>{(0,s.applyCustomTheme)(e,void 0,w.current)}),localStorage.setItem("customThemes",JSON.stringify(e))},[m.globalReadSettings?.customThemes]),(0,t.useEffect)(()=>{let e=f?"dark":"light";document.documentElement.setAttribute("data-theme",`${d}-${e}`),document.documentElement.style.setProperty("color-scheme",e),document.documentElement.style.setProperty("--overlayer-highlight-opacity",h?"1.0":"0.3"),document.documentElement.style.setProperty("--overlayer-highlight-blend-mode",h?"difference":f?"lighten":"normal"),document.documentElement.style.setProperty("--bg-texture-blend-mode",f?"lighten":"multiply")},[d,f,h])}])},334262,e=>{"use strict";var t=e.i(374517),r=e.i(7284),i=e.i(917409),n=e.i(553438),s=e.i(971319),l=e.i(57290),a=e.i(29755),o=e.i(981441),c=e.i(424439),u=e.i(604111),m=e.i(96508);function d(){let e=(0,u.useTranslation)(),d=(0,n.useRouter)(),f=(0,n.useSearchParams)(),{login:h,isLoggedIn:p}=(0,l.useAuth)(),{envConfig:b}=(0,m.useEnv)(),{isDarkMode:g}=(0,o.useThemeStore)(),{settings:y,setSettings:v,saveSettings:S}=(0,c.useSettingsStore)(),[w,x]=(0,i.useState)(""),[O,j]=(0,i.useState)(!1),[E,C]=(0,i.useState)(""),[P,A]=(0,i.useState)(!1),N=f?.get("redirect")||"/library";(0,a.useTheme)({systemUIVisible:!1});let T=async t=>{t.preventDefault(),j(!0),C("");try{let t=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({username:"xingjjjjj",password:w})});if(!t.ok)throw Error(e("Invalid password"));let{token:r,user:i}=await t.json();h(r,i),setTimeout(()=>{d.replace(N)},100)}catch(t){C(t instanceof Error?t.message:e("Login failed"))}finally{j(!1)}};return((0,i.useEffect)(()=>{A(!0)},[]),(0,i.useEffect)(()=>{P&&p&&d.replace(N)},[P,p]),P)?(0,t.jsxs)("div",{className:(0,r.default)("min-h-screen flex flex-col items-center justify-center","bg-base-100"),children:[(0,t.jsx)("button",{onClick:()=>{y.keepLogin=!1,v(y),S(b,y),d.back()},className:"btn btn-ghost fixed left-6 top-6 h-8 min-h-8 w-8 p-0","aria-label":e("Go Back"),children:(0,t.jsx)(s.IoArrowBack,{className:"text-base-content"})}),(0,t.jsx)("div",{className:(0,r.default)("card shadow-lg w-full max-w-sm","bg-base-100 border border-base-300"),children:(0,t.jsxs)("div",{className:"card-body",children:[(0,t.jsx)("h1",{className:"card-title justify-center text-2xl mb-6",children:e("Sign in")}),(0,t.jsxs)("form",{onSubmit:T,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"form-control",children:[(0,t.jsx)("label",{className:"label",children:(0,t.jsx)("span",{className:"label-text",children:e("Password")})}),(0,t.jsx)("input",{type:"password",placeholder:e("Your password"),className:(0,r.default)("input input-bordered w-full",E&&"input-error"),value:w,onChange:e=>x(e.target.value),disabled:O,required:!0})]}),E&&(0,t.jsx)("div",{className:"alert alert-error",children:(0,t.jsx)("span",{children:E})}),(0,t.jsx)("button",{type:"submit",className:"btn btn-primary w-full",disabled:O,children:O?e("Signing in..."):e("Sign in")})]}),(0,t.jsx)("p",{className:"text-center text-sm text-base-content/60 mt-4",children:e("Single user mode")})]})})]}):null}e.s(["default",()=>d])}]);
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,237189,e=>{"use strict";var t=e.i(374517),i=e.i(96508),n=e.i(604111),r=e.i(194072);e.s(["default",0,()=>{let e=(0,n.useTranslation)(),{appService:a}=(0,i.useEnv)(),s=a?.isIOSApp||a?.isMacOSApp?"https://www.apple.com/legal/internet-services/itunes/dev/stdeula/":"https://readest.com/terms-of-service";return(0,t.jsxs)("div",{className:"my-2 flex flex-wrap justify-center gap-4 text-sm sm:text-xs",children:[(0,t.jsx)(r.default,{href:s,className:"text-blue-500 underline hover:text-blue-600",children:e("Terms of Service")}),(0,t.jsx)(r.default,{href:"https://readest.com/privacy-policy",className:"text-blue-500 underline hover:text-blue-600",children:e("Privacy Policy")})]})}])},647735,e=>{"use strict";e.i(553438);var t=e.i(503523),i=e.i(841964),n=e.i(141886),r=e.i(262504);let a=0,s=(e,n)=>{let r=(0,t.getCurrentWindow)().label,s=new i.WebviewWindow(`${"main"===r?"reader":r}-${a}`,{url:n,width:800,height:600,center:!0,resizable:!0,title:e.isMacOSApp?"":"Readest",decorations:!!e.isMacOSApp,transparent:!e.isMacOSApp,shadow:!e.isMacOSApp||void 0,titleBarStyle:e.isMacOSApp?"overlay":void 0});s.once("tauri://created",()=>{console.log("new window created"),a+=1}),s.once("tauri://error",e=>{console.error("error creating window",e)}),s.once("tauri://destroyed",()=>{a-=1})};e.s(["navigateToLibrary",0,(e,t,i,n)=>{let r=sessionStorage.getItem("lastLibraryParams");n&&r&&(t=r),e.replace(`/library${t?`?${t}`:""}`,i)},"navigateToLogin",0,e=>{let t=window.location.pathname,i=window.location.search;e.push(`/auth?redirect=${encodeURIComponent("/auth"!==t?t+i:"/")}`)},"navigateToProfile",0,e=>{e.push("/user")},"navigateToReader",0,(e,t,i,a)=>{let s=t.join(r.BOOK_IDS_SEPARATOR);if((0,n.isWebAppPlatform)()&&!(0,n.isPWA)())e.push(`/reader/${s}${i?`?${i}`:""}`,a);else{let t=new URLSearchParams(i||"");t.set("ids",s),e.push(`/reader?${t.toString()}`,a)}},"showLibraryWindow",0,(e,t)=>{let i=new URLSearchParams;t.forEach(e=>i.append("file",e)),s(e,`/library?${i.toString()}`)},"showReaderWindow",0,(e,t)=>{let i=t.join(r.BOOK_IDS_SEPARATOR),n=new URLSearchParams("");n.set("ids",i),s(e,`/reader?${n.toString()}`)}])},168375,e=>{"use strict";var t=e.i(374517),i=e.i(7284),n=e.i(917409),r=e.i(981441),a=e.i(305133);e.s(["Toast",0,()=>{let{safeAreaInsets:e}=(0,r.useThemeStore)(),[s,l]=(0,n.useState)(""),[o,c]=(0,n.useState)("info"),[u,d]=(0,n.useState)(5e3),[w,h]=(0,n.useState)(""),[p,f]=(0,n.useState)(!1),m=(0,n.useRef)(null),v={info:"toast-info toast-center toast-middle",success:"toast-success toast-top sm:toast-end toast-center",warning:"toast-warning toast-top sm:toast-end toast-center",error:"toast-error toast-top sm:toast-end toast-center"},g={info:(0,t.jsx)("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),success:(0,t.jsx)("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),warning:(0,t.jsx)("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),error:(0,t.jsx)("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})};(0,n.useEffect)(()=>{s&&setTimeout(()=>{f(!0)},0)},[s]),(0,n.useEffect)(()=>{if(m.current&&clearTimeout(m.current),s){let e=setTimeout(()=>{f(!1),setTimeout(()=>l(""),300)},u);return m.current=e,()=>{e&&clearTimeout(e)}}},[s,u]);let b=async e=>{let{message:t,type:i="info",timeout:n,className:r="",callback:a=null}=e.detail;l(t),c(i),n&&d(n),a&&"function"==typeof a&&setTimeout(()=>a(),n||5e3),h(r)};return(0,n.useEffect)(()=>(a.eventDispatcher.on("toast",b),()=>{a.eventDispatcher.off("toast",b)}),[]),s&&(0,t.jsx)("div",{className:(0,i.default)("toast z-50 w-auto max-w-screen-sm transition-all duration-300",v[o],p?"scale-100 opacity-100":"scale-95 opacity-0"),style:{top:v[o].includes("toast-top")?`${(e?.top||0)+44}px`:void 0},children:(0,t.jsxs)("div",{className:(0,i.default)("alert flex items-center gap-3 shadow-2xl backdrop-blur-sm","min-h-0 rounded-2xl px-5 py-4","not-eink:bg-gradient-to-r border-0",{info:"alert-primary border-base-300",success:"alert-success not-eink:from-green-500 not-eink:to-emerald-500",warning:"alert-warning not-eink:from-amber-500 not-eink:to-orange-500",error:"alert-error not-eink:from-red-500 not-eink:to-rose-500"}[o],"eink:bg-base-100 eink:border eink:border-base-content","info"!==o&&"text-white"),children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:g[o]}),(0,t.jsx)("span",{className:(0,i.default)("max-h-[50vh] flex-1 overflow-y-auto","font-sans text-base font-medium leading-snug sm:text-sm","info"===o?"max-w-[60vw] truncate sm:max-w-[80vw]":"min-w-[60vw] max-w-[80vw] whitespace-normal break-words sm:min-w-40 sm:max-w-80",w),children:s.split("\n").map((e,i)=>(0,t.jsxs)(n.default.Fragment,{children:[e||(0,t.jsx)(t.Fragment,{children:"Â "}),i<s.split("\n").length-1&&(0,t.jsx)("br",{})]},i))}),(0,t.jsx)("button",{onClick:()=>{f(!1),setTimeout(()=>l(""),300),m.current&&clearTimeout(m.current)},className:(0,i.default)("flex-shrink-0 rounded-lg p-1 transition-colors","info"===o?"hover:bg-base-300":"hover:bg-white/20 active:bg-white/30"),"aria-label":"Dismiss",children:(0,t.jsx)("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})})}])},20414,e=>{"use strict";var t=e.i(128818),i=e.i(871611);let n=(0,t.create)((t,n)=>({appService:void 0,isTrafficLightVisible:!1,shouldShowTrafficLight:!1,trafficLightInFullscreen:!1,initializeTrafficLightStore:e=>{t({appService:e,isTrafficLightVisible:e.hasTrafficLight,shouldShowTrafficLight:e.hasTrafficLight})},setTrafficLightVisibility:async(n,r)=>{let{getCurrentWindow:a}=await e.A(888741),s=a(),l=await s.isFullscreen();t({isTrafficLightVisible:!l&&n,shouldShowTrafficLight:n,trafficLightInFullscreen:l}),(0,i.invoke)("set_traffic_lights",{visible:n,x:r?.x??10,y:r?.y??22})},initializeTrafficLightListeners:async()=>{let{getCurrentWindow:i}=await e.A(888741),r=i(),a=await r.listen("will-enter-fullscreen",()=>{t({isTrafficLightVisible:!1,trafficLightInFullscreen:!0})}),s=await r.listen("will-exit-fullscreen",()=>{let{shouldShowTrafficLight:e}=n();t({isTrafficLightVisible:e,trafficLightInFullscreen:!1})});t({unlistenEnterFullScreen:a,unlistenExitFullScreen:s})},cleanupTrafficLightListeners:()=>{let{unlistenEnterFullScreen:e,unlistenExitFullScreen:i}=n();e&&e(),i&&i(),t({unlistenEnterFullScreen:void 0,unlistenExitFullScreen:void 0})}}));e.s(["useTrafficLightStore",0,n])},345598,e=>{"use strict";var t=e.i(503523),i=e.i(283683),n=e.i(44438),r=e.i(897755),a=e.i(305133);let s=async()=>{let e=(0,t.getCurrentWindow)(),i=await e.scaleFactor(),n=await e.outerPosition();return{x:n.x/i,y:n.y/i}},l=async()=>{(0,t.getCurrentWindow)().minimize()},o=async()=>{let e=await (0,t.getCurrentWindow)().innerSize();e.width-=1,e.height-=1,await (0,t.getCurrentWindow)().setSize(e),setTimeout(async()=>{let e=await (0,t.getCurrentWindow)().innerSize();e.width+=1,e.height+=1,await (0,t.getCurrentWindow)().setSize(e)},100)},c=async()=>{let e=(0,t.getCurrentWindow)();await e.isFullscreen()?(await e.setFullscreen(!1),await e.unmaximize()):await e.toggleMaximize(),await (0,r.type)()==="linux"&&o()},u=async()=>{(0,t.getCurrentWindow)().close()},d=async e=>{let n=(0,t.getCurrentWindow)();return await n.onCloseRequested(async t=>{t.preventDefault(),await e(),n.label.startsWith("reader")?(await (0,i.emitTo)("main","close-reader-window",{label:n.label}),setTimeout(()=>n.destroy(),300)):"main"===n.label&&await n.destroy()})},w=async()=>{let e=(0,t.getCurrentWindow)(),i=await e.isFullscreen();await e.isMaximized()?await e.unmaximize():await e.setFullscreen(!i),await (0,r.type)()==="linux"&&o()},h=async e=>{let i=(0,t.getCurrentWindow)();await i.setAlwaysOnTop(e)},p=async()=>{await a.eventDispatcher.dispatch("quit-app"),await (0,n.exit)(0)};e.s(["tauriGetWindowLogicalPosition",0,s,"tauriHandleClose",0,u,"tauriHandleMinimize",0,l,"tauriHandleOnCloseWindow",0,d,"tauriHandleSetAlwaysOnTop",0,h,"tauriHandleToggleFullScreen",0,w,"tauriHandleToggleMaximize",0,c,"tauriQuitApp",0,p])},675788,e=>{"use strict";var t=e.i(374517),i=e.i(7284),n=e.i(917409),r=e.i(96508),a=e.i(345598),s=e.i(141886),l=e.i(604111);let o=({onClick:e,label:i,id:n,children:r})=>(0,t.jsx)("button",{id:n,onClick:e,className:"window-button bg-base-200/35 hover:bg-base-200 text-base-content/85 hover:text-base-content","aria-label":i,children:r});e.s(["default",0,({className:c,headerRef:u,showMinimize:d=!0,showMaximize:w=!0,showClose:h=!0,onMinimize:p,onToggleMaximize:f,onClose:m})=>{let v=(0,l.useTranslation)(),g=(0,n.useRef)(null),{appService:b}=(0,r.useEnv)(),y=(0,n.useRef)({lastPointerTime:0,pointerStartPosition:{x:0,y:0},isDragging:!1}),x=e=>e.closest(".btn")||e.closest(".window-button")||e.closest(".dropdown-container")||e.closest(".exclude-title-bar-mousedown"),S=async t=>{if(x(t.target))return;let{getCurrentWindow:i}=await e.A(888741);1===t.buttons&&(2===t.detail?i().toggleMaximize():i().startDragging())},L=async t=>{if(x(t.target)||"mouse"===t.pointerType)return;t.preventDefault();let i=Date.now(),n=i-y.current.lastPointerTime;if(y.current.pointerStartPosition={x:t.clientX,y:t.clientY},n<300){let{getCurrentWindow:t}=await e.A(888741);t().toggleMaximize();return}y.current.lastPointerTime=i,y.current.isDragging=!1},E=async t=>{if(x(t.target)||y.current.isDragging||"mouse"===t.pointerType)return;t.preventDefault();let i=Math.abs(t.clientX-y.current.pointerStartPosition.x),n=Math.abs(t.clientY-y.current.pointerStartPosition.y);if(i>5||n>5){y.current.isDragging=!0;try{let{getCurrentWindow:t}=await e.A(888741);await t().startDragging()}catch(e){console.warn("Failed to start window dragging:",e)}}},T=()=>{y.current.isDragging=!1};(0,n.useEffect)(()=>{if(!(0,s.isTauriAppPlatform)())return;let e=u?.current;if(e)return e.addEventListener("mousedown",S),e.addEventListener("pointerdown",L),e.addEventListener("pointermove",E),e.addEventListener("pointerup",T),e.addEventListener("pointercancel",T),()=>{e.removeEventListener("mousedown",S),e.removeEventListener("pointerdown",L),e.removeEventListener("pointermove",E),e.removeEventListener("pointerup",T),e.removeEventListener("pointercancel",T)}},[]);let O=async()=>{p?p():(0,a.tauriHandleMinimize)()},_=async()=>{f?f():(0,a.tauriHandleToggleMaximize)()},k=async()=>{m?m():(0,a.tauriHandleClose)()};return(0,t.jsxs)("div",{ref:g,className:(0,i.default)("window-buttons flex h-8 items-center justify-end space-x-2",h||w||d?"visible":"hidden",c),children:[d&&b?.hasWindowBar&&(0,t.jsx)(o,{onClick:O,label:v("Minimize"),id:"titlebar-minimize",children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{fill:"currentColor",d:"M20 14H4v-2h16"})})}),w&&b?.hasWindowBar&&(0,t.jsx)(o,{onClick:_,label:v("Maximize or Restore"),id:"titlebar-maximize",children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{fill:"currentColor",d:"M4 4h16v16H4zm2 4v10h12V8z"})})}),h&&(b?.hasWindowBar||m)&&(0,t.jsx)(o,{onClick:k,label:v("Close"),id:"titlebar-close",children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{fill:"currentColor",d:"M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12z"})})})]})}])},897755,e=>{"use strict";function t(){return window.__TAURI_OS_PLUGIN_INTERNALS__.os_type}function i(){return window.__TAURI_OS_PLUGIN_INTERNALS__.arch}e.i(871611),e.s(["arch",()=>i,"type",()=>t])},7284,943897,e=>{"use strict";function t(){for(var e,t,i=0,n="",r=arguments.length;i<r;i++)(e=arguments[i])&&(t=function e(t){var i,n,r="";if("string"==typeof t||"number"==typeof t)r+=t;else if("object"==typeof t)if(Array.isArray(t)){var a=t.length;for(i=0;i<a;i++)t[i]&&(n=e(t[i]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}(e))&&(n&&(n+=" "),n+=t);return n}e.s(["clsx",()=>t,"default",0,t],7284);var i=e.i(917409),n=e.i(233878),r=["attr","size","title"];function a(){return(a=Object.assign.bind()).apply(this,arguments)}function s(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function l(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?s(Object(i),!0).forEach(function(t){var n,r,a;n=e,r=t,a=i[t],(r=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(r))in n?Object.defineProperty(n,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[r]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function o(e){return t=>i.default.createElement(c,a({attr:l({},e.attr)},t),function e(t){return t&&t.map((t,n)=>i.default.createElement(t.tag,l({key:n},t.attr),e(t.child)))}(e.child))}function c(e){var t=t=>{var n,{attr:s,size:o,title:c}=e,u=function(e,t){if(null==e)return{};var i,n,r=function(e,t){if(null==e)return{};var i={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;i[n]=e[n]}return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)i=a[n],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}(e,r),d=o||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),i.default.createElement("svg",a({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,s,u,{className:n,style:l(l({color:e.color||t.color},t.style),e.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),c&&i.default.createElement("title",null,c),e.children)};return void 0!==n.IconContext?i.default.createElement(n.IconContext.Consumer,null,e=>t(e)):t(n.DefaultContext)}e.s(["GenIcon",()=>o],943897)},763790,e=>{"use strict";let t=e=>{let t=navigator.userAgent;if(e?.isAndroidApp){let e=t.match(/Chrome\/([0-9.]+)/);return e?`WebView ${e[1]}`:"Android WebView"}if(e?.isIOSApp){let e=t.match(/AppleWebKit\/([0-9.]+)/);return e?`WebView ${e[1]}`:"iOS WebView"}if(e?.isMacOSApp){let e=t.match(/AppleWebKit\/([0-9.]+)/);return e?`WebView ${e[1]}`:"macOS WebView"}if(e?.appPlatform==="tauri"&&e?.osPlatform==="windows"){let e=t.match(/Edg\/([0-9.]+)/);return e?`Edge ${e[1]}`:"Edge WebView2"}if(e?.appPlatform==="tauri"&&e?.osPlatform==="linux"){let e=t.match(/AppleWebKit\/([0-9.]+)/);return e?`WebView ${e[1]}`:"Linux WebView"}else if(t.includes("CriOS")&&t.includes("Mobile/")&&t.includes("Safari")){let e=t.match(/CriOS\/([0-9.]+)/);return e?`Chrome ${e[1]}`:"iOS Chrome"}else if(t.includes("FxiOS")&&t.includes("Mobile/")&&t.includes("Safari")){let e=t.match(/FxiOS\/([0-9.]+)/);return e?`Firefox ${e[1]}`:"iOS Firefox"}else if(t.includes("Chrome")&&t.includes("AppleWebKit")&&t.includes("Macintosh")){let e=t.match(/Chrome\/([0-9.]+)/);return e?`Chrome ${e[1]}`:"macOS Chrome"}else if(t.includes("Safari")&&t.includes("AppleWebKit")&&t.includes("Macintosh")){let e=t.match(/Safari\/([0-9.]+)/);return e?`Safari ${e[1]}`:"macOS Safari"}else if(t.includes("Edg/")){let e=t.match(/Edg\/([0-9.]+)/);return e?`Edge ${e[1]}`:"Edge WebView"}else if(t.includes("Firefox/")){let e=t.match(/Firefox\/([0-9.]+)/);return e?`Firefox ${e[1]}`:"Firefox Gecko"}else if(t.includes("Chrome/")&&!t.includes("Chromium")){let e=t.match(/Chrome\/([0-9.]+)/);return e?`Chrome ${e[1]}`:"Chrome"}else if(t.includes("Chromium/")){let e=t.match(/Chromium\/([0-9.]+)/);return e?`Chromium ${e[1]}`:"Chromium"}else{if(!t.includes("MSIE "))return"Unknown";let e=t.match(/MSIE ([0-9.]+)/);return e?`IE ${e[1]}`:"Internet Explorer"}};e.s(["parseWebViewInfo",0,t,"parseWebViewVersion",0,e=>{let i=t(e).match(/([0-9]+)\./);return i?parseFloat(i[1]):0}])},604111,e=>{"use strict";e.i(875785);var t=e.i(917409);e.i(993014);var i=e.i(421141);e.s(["useTranslation",0,(e="translation")=>{let{t:n}=(0,i.useTranslation)(e);return(0,t.useCallback)((e,t={})=>n(e,{defaultValue:e,...t}),[n])}])},553438,(e,t,i)=>{t.exports=e.r(196260)},29755,e=>{"use strict";var t=e.i(917409),i=e.i(96508),n=e.i(981441),r=e.i(424439),a=e.i(415810),s=e.i(341537),l=e.i(62725),o=e.i(763790);e.s(["useTheme",0,({systemUIVisible:e=!0,appThemeColor:c="base-100"}={})=>{let{appService:u}=(0,i.useEnv)(),{settings:d}=(0,r.useSettingsStore)(),{themeColor:w,isDarkMode:h,isEinkMode:p,showSystemUI:f,dismissSystemUI:m,updateAppTheme:v,setStatusBarHeight:g,systemUIAlwaysHidden:b,setSystemUIAlwaysHidden:y}=(0,n.useThemeStore)(),x=(0,t.useRef)(!1);(0,t.useEffect)(()=>{v(c),u?.isAndroidApp&&(0,s.getStatusBarHeight)().then(e=>{e.height&&e.height>0&&g(e.height/window.devicePixelRatio)})},[u?.isAndroidApp]);let S=(0,t.useCallback)(()=>{if(!u?.isMobileApp)return;let t=!!(e&&!b);t?f():m(),(0,s.setSystemUIVisibility)({visible:t,darkMode:h})},[u,h,e]);(0,t.useEffect)(()=>{u?.isMobileApp&&S()},[S]),(0,t.useEffect)(()=>{if(!u?.isMobileApp)return;S();let e=()=>{"visible"===document.visibilityState&&S()},t=()=>{u?.isIOSApp&&"ios"===(0,l.getOSPlatform)()&&(y(screen.orientation?.type.includes("landscape")),S())};return document.addEventListener("visibilitychange",e),screen.orientation?.addEventListener("change",t),()=>{document.removeEventListener("visibilitychange",e),screen.orientation?.removeEventListener("change",t)}},[S]),(0,t.useEffect)(()=>{u?.isAndroidApp&&(x.current=111>(0,o.parseWebViewVersion)(u))},[u]),(0,t.useEffect)(()=>{w&&a.themes.find(e=>e.name===w)&&x.current&&(0,a.applyCustomTheme)(void 0,w,!0)},[w]),(0,t.useEffect)(()=>{let e=d.globalReadSettings?.customThemes??[];e.forEach(e=>{(0,a.applyCustomTheme)(e,void 0,x.current)}),localStorage.setItem("customThemes",JSON.stringify(e))},[d.globalReadSettings?.customThemes]),(0,t.useEffect)(()=>{let e=h?"dark":"light";document.documentElement.setAttribute("data-theme",`${w}-${e}`),document.documentElement.style.setProperty("color-scheme",e),document.documentElement.style.setProperty("--overlayer-highlight-opacity",p?"1.0":"0.3"),document.documentElement.style.setProperty("--overlayer-highlight-blend-mode",p?"difference":h?"lighten":"normal"),document.documentElement.style.setProperty("--bg-texture-blend-mode",h?"lighten":"multiply")},[w,h,p])}])},841964,894019,e=>{"use strict";var t,i,n=e.i(650047),r=e.i(283683),a=e.i(871611),s=e.i(503523);function l(){return new u((0,s.getCurrentWindow)(),window.__TAURI_INTERNALS__.metadata.currentWebview.label,{skip:!0})}async function o(){return(0,a.invoke)("plugin:webview|get_all_webviews").then(e=>e.map(e=>new u(new s.Window(e.windowLabel,{skip:!0}),e.label,{skip:!0})))}let c=["tauri://created","tauri://error"];class u{constructor(e,t,i){this.window=e,this.label=t,this.listeners=Object.create(null),(null==i?void 0:i.skip)||(0,a.invoke)("plugin:webview|create_webview",{windowLabel:e.label,options:{...i,label:t}}).then(async()=>this.emit("tauri://created")).catch(async e=>this.emit("tauri://error",e))}static async getByLabel(e){var t;return null!=(t=(await o()).find(t=>t.label===e))?t:null}static getCurrent(){return l()}static async getAll(){return o()}async listen(e,t){return this._handleTauriEvent(e,t)?()=>{let i=this.listeners[e];i.splice(i.indexOf(t),1)}:(0,r.listen)(e,t,{target:{kind:"Webview",label:this.label}})}async once(e,t){return this._handleTauriEvent(e,t)?()=>{let i=this.listeners[e];i.splice(i.indexOf(t),1)}:(0,r.once)(e,t,{target:{kind:"Webview",label:this.label}})}async emit(e,t){if(c.includes(e)){for(let i of this.listeners[e]||[])i({event:e,id:-1,payload:t});return}return(0,r.emit)(e,t)}async emitTo(e,t,i){if(c.includes(t)){for(let e of this.listeners[t]||[])e({event:t,id:-1,payload:i});return}return(0,r.emitTo)(e,t,i)}_handleTauriEvent(e,t){return!!c.includes(e)&&(e in this.listeners?this.listeners[e].push(t):this.listeners[e]=[t],!0)}async position(){return(0,a.invoke)("plugin:webview|webview_position",{label:this.label}).then(e=>new n.PhysicalPosition(e))}async size(){return(0,a.invoke)("plugin:webview|webview_size",{label:this.label}).then(e=>new n.PhysicalSize(e))}async close(){return(0,a.invoke)("plugin:webview|webview_close",{label:this.label})}async setSize(e){return(0,a.invoke)("plugin:webview|set_webview_size",{label:this.label,value:e instanceof n.Size?e:new n.Size(e)})}async setPosition(e){return(0,a.invoke)("plugin:webview|set_webview_position",{label:this.label,value:e instanceof n.Position?e:new n.Position(e)})}async setFocus(){return(0,a.invoke)("plugin:webview|set_webview_focus",{label:this.label})}async setAutoResize(e){return(0,a.invoke)("plugin:webview|set_webview_auto_resize",{label:this.label,value:e})}async hide(){return(0,a.invoke)("plugin:webview|webview_hide",{label:this.label})}async show(){return(0,a.invoke)("plugin:webview|webview_show",{label:this.label})}async setZoom(e){return(0,a.invoke)("plugin:webview|set_webview_zoom",{label:this.label,value:e})}async reparent(e){return(0,a.invoke)("plugin:webview|reparent",{label:this.label,window:"string"==typeof e?e:e.label})}async clearAllBrowsingData(){return(0,a.invoke)("plugin:webview|clear_all_browsing_data")}async setBackgroundColor(e){return(0,a.invoke)("plugin:webview|set_webview_background_color",{color:e})}async onDragDropEvent(e){let t=await this.listen(r.TauriEvent.DRAG_ENTER,t=>{e({...t,payload:{type:"enter",paths:t.payload.paths,position:new n.PhysicalPosition(t.payload.position)}})}),i=await this.listen(r.TauriEvent.DRAG_OVER,t=>{e({...t,payload:{type:"over",position:new n.PhysicalPosition(t.payload.position)}})}),a=await this.listen(r.TauriEvent.DRAG_DROP,t=>{e({...t,payload:{type:"drop",paths:t.payload.paths,position:new n.PhysicalPosition(t.payload.position)}})}),s=await this.listen(r.TauriEvent.DRAG_LEAVE,t=>{e({...t,payload:{type:"leave"}})});return()=>{t(),a(),i(),s()}}}async function d(){return(0,a.invoke)("plugin:window|get_all_windows").then(e=>e.map(e=>new w(e,{skip:!0})))}e.s(["Webview",()=>u,"getCurrentWebview",()=>l],894019);class w{constructor(e,t={}){var i;this.label=e,this.listeners=Object.create(null),(null==t?void 0:t.skip)||(0,a.invoke)("plugin:webview|create_webview_window",{options:{...t,parent:"string"==typeof t.parent?t.parent:null==(i=t.parent)?void 0:i.label,label:e}}).then(async()=>this.emit("tauri://created")).catch(async e=>this.emit("tauri://error",e))}static async getByLabel(e){var t;let i=null!=(t=(await d()).find(t=>t.label===e))?t:null;return i?new w(i.label,{skip:!0}):null}static getCurrent(){return new w(l().label,{skip:!0})}static async getAll(){return d()}async listen(e,t){return this._handleTauriEvent(e,t)?()=>{let i=this.listeners[e];i.splice(i.indexOf(t),1)}:(0,r.listen)(e,t,{target:{kind:"WebviewWindow",label:this.label}})}async once(e,t){return this._handleTauriEvent(e,t)?()=>{let i=this.listeners[e];i.splice(i.indexOf(t),1)}:(0,r.once)(e,t,{target:{kind:"WebviewWindow",label:this.label}})}async setBackgroundColor(e){return(0,a.invoke)("plugin:window|set_background_color",{color:e}).then(()=>(0,a.invoke)("plugin:webview|set_webview_background_color",{color:e}))}}t=w,(Array.isArray(i=[s.Window,u])?i:[i]).forEach(e=>{Object.getOwnPropertyNames(e.prototype).forEach(i=>{var n;"object"==typeof t.prototype&&t.prototype&&i in t.prototype||Object.defineProperty(t.prototype,i,null!=(n=Object.getOwnPropertyDescriptor(e.prototype,i))?n:Object.create(null))})}),e.s(["WebviewWindow",()=>w],841964)},305133,e=>{"use strict";let t=new class{syncListeners;asyncListeners;constructor(){this.syncListeners=new Map,this.asyncListeners=new Map}on(e,t){this.asyncListeners.has(e)||this.asyncListeners.set(e,new Set),this.asyncListeners.get(e).add(t)}off(e,t){this.asyncListeners.get(e)?.delete(t)}async dispatch(e,t){let i=this.asyncListeners.get(e);if(i){let n=new CustomEvent(e,{detail:t});for(let e of i)await e(n)}}onSync(e,t){this.syncListeners.has(e)||this.syncListeners.set(e,[]),this.syncListeners.get(e).push(t)}offSync(e,t){let i=this.syncListeners.get(e);i&&this.syncListeners.set(e,i.filter(e=>e!==t))}dispatchSync(e,t){let i=this.syncListeners.get(e);if(i){let n=new CustomEvent(e,{detail:t});for(let e of[...i].reverse())if(e(n))return!0}return!1}};e.s(["eventDispatcher",0,t])},699475,e=>{"use strict";var t=e.i(871611);async function i(e,i){await (0,t.invoke)("plugin:opener|open_url",{url:e,with:i})}async function n(e){return(0,t.invoke)("plugin:opener|reveal_item_in_dir",{paths:"string"==typeof e?[e]:e})}e.s(["openUrl",()=>i,"revealItemInDir",()=>n])},44438,e=>{"use strict";var t=e.i(871611);async function i(e=0){await (0,t.invoke)("plugin:process|exit",{code:e})}async function n(){await (0,t.invoke)("plugin:process|restart")}e.s(["exit",()=>i,"relaunch",()=>n])},194072,e=>{"use strict";var t=e.i(374517),i=e.i(141886),n=e.i(699475);e.s(["default",0,({href:e,children:r,...a})=>{let s=async t=>{(0,i.isTauriAppPlatform)()&&(t.preventDefault(),await (0,n.openUrl)(e))};return(0,t.jsx)("a",{href:e,target:"_blank",rel:"noopener noreferrer",onClick:s,...a,children:r})}])}]);
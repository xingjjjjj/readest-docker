module.exports=[983135,e=>{"use strict";let t=async({entries:e,loadBlob:t,getSize:a,getComment:l},r)=>{let i=new Map,o=new Map,n=async e=>{if(i.has(e))return i.get(e);let a=URL.createObjectURL(await t(e)),l=URL.createObjectURL(new Blob([`<!DOCTYPE html><html><head><meta charset="utf-8"></head><body style="margin: 0"><img src="${a}"></body></html>`],{type:"text/html"}));return o.set(e,[a,l]),i.set(e,l),l},s=[".jpg",".jpeg",".png",".gif",".bmp",".webp",".svg",".jxl",".avif"],d=e.map(e=>e.filename).filter(e=>s.some(t=>e.endsWith(t))).sort();if(!d.length)throw Error("No supported image files in archive");let m={};try{let e=JSON.parse(await l()||"")["ComicBookInfo/1.0"];if(e){let t=e.publicationYear,a=e.publicationMonth,l=a&&a>=1&&a<=12?String(a).padStart(2,"0"):null;m.metadata={title:e.title||r.name,publisher:e.publisher,language:e.language||e.lang,author:e.credits?e.credits.map(e=>`${e.person} (${e.role})`).join(", "):"",published:t&&a?`${t}-${l}`:void 0}}else m.metadata={title:r.name}}catch{m.metadata={title:r.name}}return m.getCover=()=>t(d[0]),m.sections=d.map(e=>({id:e,load:()=>n(e),unload:()=>{o.get(e)?.forEach?.(e=>URL.revokeObjectURL(e)),o.delete(e),i.delete(e)},size:a(e)})),m.toc=d.map(e=>({label:e,href:e})),m.rendition={layout:"pre-paginated"},m.resolveHref=e=>({index:m.sections.findIndex(t=>t.id===e)}),m.splitTOCHref=e=>[e,null],m.getTOCFragment=e=>e.documentElement,m.destroy=()=>{for(let e of o.values())for(let t of e)URL.revokeObjectURL(t)},m};e.s(["makeComicBook",0,t])}];

//# sourceMappingURL=packages_foliate-js_comic-book_4b3761e5.js.map
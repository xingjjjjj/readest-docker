module.exports=[116575,e=>{"use strict";var t,r,a,n,o,i,s,l,c,d,u,p,g=((t=g||{}).handleRequest="BaseServer.handleRequest",t.run="BaseServer.run",t.pipe="BaseServer.pipe",t.getStaticHTML="BaseServer.getStaticHTML",t.render="BaseServer.render",t.renderToResponseWithComponents="BaseServer.renderToResponseWithComponents",t.renderToResponse="BaseServer.renderToResponse",t.renderToHTML="BaseServer.renderToHTML",t.renderError="BaseServer.renderError",t.renderErrorToResponse="BaseServer.renderErrorToResponse",t.renderErrorToHTML="BaseServer.renderErrorToHTML",t.render404="BaseServer.render404",t),f=((r=f||{}).loadDefaultErrorComponents="LoadComponents.loadDefaultErrorComponents",r.loadComponents="LoadComponents.loadComponents",r),v=((a=v||{}).getRequestHandler="NextServer.getRequestHandler",a.getRequestHandlerWithMetadata="NextServer.getRequestHandlerWithMetadata",a.getServer="NextServer.getServer",a.getServerRequestHandler="NextServer.getServerRequestHandler",a.createServer="createServer.createServer",a),_=((n=_||{}).compression="NextNodeServer.compression",n.getBuildId="NextNodeServer.getBuildId",n.createComponentTree="NextNodeServer.createComponentTree",n.clientComponentLoading="NextNodeServer.clientComponentLoading",n.getLayoutOrPageModule="NextNodeServer.getLayoutOrPageModule",n.generateStaticRoutes="NextNodeServer.generateStaticRoutes",n.generateFsStaticRoutes="NextNodeServer.generateFsStaticRoutes",n.generatePublicRoutes="NextNodeServer.generatePublicRoutes",n.generateImageRoutes="NextNodeServer.generateImageRoutes.route",n.sendRenderResult="NextNodeServer.sendRenderResult",n.proxyRequest="NextNodeServer.proxyRequest",n.runApi="NextNodeServer.runApi",n.render="NextNodeServer.render",n.renderHTML="NextNodeServer.renderHTML",n.imageOptimizer="NextNodeServer.imageOptimizer",n.getPagePath="NextNodeServer.getPagePath",n.getRoutesManifest="NextNodeServer.getRoutesManifest",n.findPageComponents="NextNodeServer.findPageComponents",n.getFontManifest="NextNodeServer.getFontManifest",n.getServerComponentManifest="NextNodeServer.getServerComponentManifest",n.getRequestHandler="NextNodeServer.getRequestHandler",n.renderToHTML="NextNodeServer.renderToHTML",n.renderError="NextNodeServer.renderError",n.renderErrorToHTML="NextNodeServer.renderErrorToHTML",n.render404="NextNodeServer.render404",n.startResponse="NextNodeServer.startResponse",n.route="route",n.onProxyReq="onProxyReq",n.apiResolver="apiResolver",n.internalFetch="internalFetch",n),h=((o=h||{}).startServer="startServer.startServer",o),S=((i=S||{}).getServerSideProps="Render.getServerSideProps",i.getStaticProps="Render.getStaticProps",i.renderToString="Render.renderToString",i.renderDocument="Render.renderDocument",i.createBodyResult="Render.createBodyResult",i),y=((s=y||{}).renderToString="AppRender.renderToString",s.renderToReadableStream="AppRender.renderToReadableStream",s.getBodyResult="AppRender.getBodyResult",s.fetch="AppRender.fetch",s),T=((l=T||{}).executeRoute="Router.executeRoute",l),m=((c=m||{}).runHandler="Node.runHandler",c),b=((d=b||{}).runHandler="AppRouteRouteHandlers.runHandler",d),E=((u=E||{}).generateMetadata="ResolveMetadata.generateMetadata",u.generateViewport="ResolveMetadata.generateViewport",u),P=((p=P||{}).execute="Middleware.execute",p);let O=new Set(["Middleware.execute","BaseServer.handleRequest","Render.getServerSideProps","Render.getStaticProps","AppRender.fetch","AppRender.getBodyResult","Render.renderDocument","Node.runHandler","AppRouteRouteHandlers.runHandler","ResolveMetadata.generateMetadata","ResolveMetadata.generateViewport","NextNodeServer.createComponentTree","NextNodeServer.findPageComponents","NextNodeServer.getLayoutOrPageModule","NextNodeServer.startResponse","NextNodeServer.clientComponentLoading"]),N=new Set(["NextNodeServer.findPageComponents","NextNodeServer.createComponentTree","NextNodeServer.clientComponentLoading"]);e.s(["BaseServerSpan",()=>g,"LogSpanAllowList",0,N,"NextVanillaSpanAllowlist",0,O,"NodeSpan",()=>m])},461388,(e,t,r)=>{(()=>{"use strict";let r,a,n,o,i;var s,l,c,d,u,p,g,f,v,_,h,S,y,T,m,b,E={491:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ContextAPI=void 0;let a=r(223),n=r(172),o=r(930),i="context",s=new a.NoopContextManager;class l{constructor(){}static getInstance(){return this._instance||(this._instance=new l),this._instance}setGlobalContextManager(e){return(0,n.registerGlobal)(i,e,o.DiagAPI.instance())}active(){return this._getContextManager().active()}with(e,t,r,...a){return this._getContextManager().with(e,t,r,...a)}bind(e,t){return this._getContextManager().bind(e,t)}_getContextManager(){return(0,n.getGlobal)(i)||s}disable(){this._getContextManager().disable(),(0,n.unregisterGlobal)(i,o.DiagAPI.instance())}}t.ContextAPI=l},930:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DiagAPI=void 0;let a=r(56),n=r(912),o=r(957),i=r(172);class s{constructor(){function e(e){return function(...t){let r=(0,i.getGlobal)("diag");if(r)return r[e](...t)}}const t=this;t.setLogger=(e,r={logLevel:o.DiagLogLevel.INFO})=>{var a,s,l;if(e===t){let e=Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return t.error(null!=(a=e.stack)?a:e.message),!1}"number"==typeof r&&(r={logLevel:r});let c=(0,i.getGlobal)("diag"),d=(0,n.createLogLevelDiagLogger)(null!=(s=r.logLevel)?s:o.DiagLogLevel.INFO,e);if(c&&!r.suppressOverrideMessage){let e=null!=(l=Error().stack)?l:"<failed to generate stacktrace>";c.warn(`Current logger will be overwritten from ${e}`),d.warn(`Current logger will overwrite one already registered from ${e}`)}return(0,i.registerGlobal)("diag",d,t,!0)},t.disable=()=>{(0,i.unregisterGlobal)("diag",t)},t.createComponentLogger=e=>new a.DiagComponentLogger(e),t.verbose=e("verbose"),t.debug=e("debug"),t.info=e("info"),t.warn=e("warn"),t.error=e("error")}static instance(){return this._instance||(this._instance=new s),this._instance}}t.DiagAPI=s},653:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MetricsAPI=void 0;let a=r(660),n=r(172),o=r(930),i="metrics";class s{constructor(){}static getInstance(){return this._instance||(this._instance=new s),this._instance}setGlobalMeterProvider(e){return(0,n.registerGlobal)(i,e,o.DiagAPI.instance())}getMeterProvider(){return(0,n.getGlobal)(i)||a.NOOP_METER_PROVIDER}getMeter(e,t,r){return this.getMeterProvider().getMeter(e,t,r)}disable(){(0,n.unregisterGlobal)(i,o.DiagAPI.instance())}}t.MetricsAPI=s},181:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PropagationAPI=void 0;let a=r(172),n=r(874),o=r(194),i=r(277),s=r(369),l=r(930),c="propagation",d=new n.NoopTextMapPropagator;class u{constructor(){this.createBaggage=s.createBaggage,this.getBaggage=i.getBaggage,this.getActiveBaggage=i.getActiveBaggage,this.setBaggage=i.setBaggage,this.deleteBaggage=i.deleteBaggage}static getInstance(){return this._instance||(this._instance=new u),this._instance}setGlobalPropagator(e){return(0,a.registerGlobal)(c,e,l.DiagAPI.instance())}inject(e,t,r=o.defaultTextMapSetter){return this._getGlobalPropagator().inject(e,t,r)}extract(e,t,r=o.defaultTextMapGetter){return this._getGlobalPropagator().extract(e,t,r)}fields(){return this._getGlobalPropagator().fields()}disable(){(0,a.unregisterGlobal)(c,l.DiagAPI.instance())}_getGlobalPropagator(){return(0,a.getGlobal)(c)||d}}t.PropagationAPI=u},997:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TraceAPI=void 0;let a=r(172),n=r(846),o=r(139),i=r(607),s=r(930),l="trace";class c{constructor(){this._proxyTracerProvider=new n.ProxyTracerProvider,this.wrapSpanContext=o.wrapSpanContext,this.isSpanContextValid=o.isSpanContextValid,this.deleteSpan=i.deleteSpan,this.getSpan=i.getSpan,this.getActiveSpan=i.getActiveSpan,this.getSpanContext=i.getSpanContext,this.setSpan=i.setSpan,this.setSpanContext=i.setSpanContext}static getInstance(){return this._instance||(this._instance=new c),this._instance}setGlobalTracerProvider(e){let t=(0,a.registerGlobal)(l,this._proxyTracerProvider,s.DiagAPI.instance());return t&&this._proxyTracerProvider.setDelegate(e),t}getTracerProvider(){return(0,a.getGlobal)(l)||this._proxyTracerProvider}getTracer(e,t){return this.getTracerProvider().getTracer(e,t)}disable(){(0,a.unregisterGlobal)(l,s.DiagAPI.instance()),this._proxyTracerProvider=new n.ProxyTracerProvider}}t.TraceAPI=c},277:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deleteBaggage=t.setBaggage=t.getActiveBaggage=t.getBaggage=void 0;let a=r(491),n=(0,r(780).createContextKey)("OpenTelemetry Baggage Key");function o(e){return e.getValue(n)||void 0}t.getBaggage=o,t.getActiveBaggage=function(){return o(a.ContextAPI.getInstance().active())},t.setBaggage=function(e,t){return e.setValue(n,t)},t.deleteBaggage=function(e){return e.deleteValue(n)}},993:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaggageImpl=void 0;class r{constructor(e){this._entries=e?new Map(e):new Map}getEntry(e){let t=this._entries.get(e);if(t)return Object.assign({},t)}getAllEntries(){return Array.from(this._entries.entries()).map(([e,t])=>[e,t])}setEntry(e,t){let a=new r(this._entries);return a._entries.set(e,t),a}removeEntry(e){let t=new r(this._entries);return t._entries.delete(e),t}removeEntries(...e){let t=new r(this._entries);for(let r of e)t._entries.delete(r);return t}clear(){return new r}}t.BaggageImpl=r},830:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.baggageEntryMetadataSymbol=void 0,t.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")},369:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.baggageEntryMetadataFromString=t.createBaggage=void 0;let a=r(930),n=r(993),o=r(830),i=a.DiagAPI.instance();t.createBaggage=function(e={}){return new n.BaggageImpl(new Map(Object.entries(e)))},t.baggageEntryMetadataFromString=function(e){return"string"!=typeof e&&(i.error(`Cannot create baggage metadata from unknown type: ${typeof e}`),e=""),{__TYPE__:o.baggageEntryMetadataSymbol,toString:()=>e}}},67:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.context=void 0,t.context=r(491).ContextAPI.getInstance()},223:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NoopContextManager=void 0;let a=r(780);t.NoopContextManager=class{active(){return a.ROOT_CONTEXT}with(e,t,r,...a){return t.call(r,...a)}bind(e,t){return t}enable(){return this}disable(){return this}}},780:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ROOT_CONTEXT=t.createContextKey=void 0,t.createContextKey=function(e){return Symbol.for(e)};class r{constructor(e){const t=this;t._currentContext=e?new Map(e):new Map,t.getValue=e=>t._currentContext.get(e),t.setValue=(e,a)=>{let n=new r(t._currentContext);return n._currentContext.set(e,a),n},t.deleteValue=e=>{let a=new r(t._currentContext);return a._currentContext.delete(e),a}}}t.ROOT_CONTEXT=new r},506:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.diag=void 0,t.diag=r(930).DiagAPI.instance()},56:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DiagComponentLogger=void 0;let a=r(172);function n(e,t,r){let n=(0,a.getGlobal)("diag");if(n)return r.unshift(t),n[e](...r)}t.DiagComponentLogger=class{constructor(e){this._namespace=e.namespace||"DiagComponentLogger"}debug(...e){return n("debug",this._namespace,e)}error(...e){return n("error",this._namespace,e)}info(...e){return n("info",this._namespace,e)}warn(...e){return n("warn",this._namespace,e)}verbose(...e){return n("verbose",this._namespace,e)}}},972:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DiagConsoleLogger=void 0;let r=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}];t.DiagConsoleLogger=class{constructor(){for(let e=0;e<r.length;e++)this[r[e].n]=function(e){return function(...t){if(console){let r=console[e];if("function"!=typeof r&&(r=console.log),"function"==typeof r)return r.apply(console,t)}}}(r[e].c)}}},912:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createLogLevelDiagLogger=void 0;let a=r(957);t.createLogLevelDiagLogger=function(e,t){function r(r,a){let n=t[r];return"function"==typeof n&&e>=a?n.bind(t):function(){}}return e<a.DiagLogLevel.NONE?e=a.DiagLogLevel.NONE:e>a.DiagLogLevel.ALL&&(e=a.DiagLogLevel.ALL),t=t||{},{error:r("error",a.DiagLogLevel.ERROR),warn:r("warn",a.DiagLogLevel.WARN),info:r("info",a.DiagLogLevel.INFO),debug:r("debug",a.DiagLogLevel.DEBUG),verbose:r("verbose",a.DiagLogLevel.VERBOSE)}}},957:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.DiagLogLevel=void 0,(r=t.DiagLogLevel||(t.DiagLogLevel={}))[r.NONE=0]="NONE",r[r.ERROR=30]="ERROR",r[r.WARN=50]="WARN",r[r.INFO=60]="INFO",r[r.DEBUG=70]="DEBUG",r[r.VERBOSE=80]="VERBOSE",r[r.ALL=9999]="ALL"},172:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.unregisterGlobal=t.getGlobal=t.registerGlobal=void 0;let a=r(200),n=r(521),o=r(130),i=n.VERSION.split(".")[0],s=Symbol.for(`opentelemetry.js.api.${i}`),l=a._globalThis;t.registerGlobal=function(e,t,r,a=!1){var o;let i=l[s]=null!=(o=l[s])?o:{version:n.VERSION};if(!a&&i[e]){let t=Error(`@opentelemetry/api: Attempted duplicate registration of API: ${e}`);return r.error(t.stack||t.message),!1}if(i.version!==n.VERSION){let t=Error(`@opentelemetry/api: Registration of version v${i.version} for ${e} does not match previously registered API v${n.VERSION}`);return r.error(t.stack||t.message),!1}return i[e]=t,r.debug(`@opentelemetry/api: Registered a global for ${e} v${n.VERSION}.`),!0},t.getGlobal=function(e){var t,r;let a=null==(t=l[s])?void 0:t.version;if(a&&(0,o.isCompatible)(a))return null==(r=l[s])?void 0:r[e]},t.unregisterGlobal=function(e,t){t.debug(`@opentelemetry/api: Unregistering a global for ${e} v${n.VERSION}.`);let r=l[s];r&&delete r[e]}},130:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isCompatible=t._makeCompatibilityCheck=void 0;let a=r(521),n=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function o(e){let t=new Set([e]),r=new Set,a=e.match(n);if(!a)return()=>!1;let o={major:+a[1],minor:+a[2],patch:+a[3],prerelease:a[4]};if(null!=o.prerelease)return function(t){return t===e};function i(e){return r.add(e),!1}return function(e){if(t.has(e))return!0;if(r.has(e))return!1;let a=e.match(n);if(!a)return i(e);let s={major:+a[1],minor:+a[2],patch:+a[3],prerelease:a[4]};if(null!=s.prerelease||o.major!==s.major)return i(e);if(0===o.major)return o.minor===s.minor&&o.patch<=s.patch?(t.add(e),!0):i(e);return o.minor<=s.minor?(t.add(e),!0):i(e)}}t._makeCompatibilityCheck=o,t.isCompatible=o(a.VERSION)},886:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.metrics=void 0,t.metrics=r(653).MetricsAPI.getInstance()},901:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ValueType=void 0,(r=t.ValueType||(t.ValueType={}))[r.INT=0]="INT",r[r.DOUBLE=1]="DOUBLE"},102:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createNoopMeter=t.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=t.NOOP_OBSERVABLE_GAUGE_METRIC=t.NOOP_OBSERVABLE_COUNTER_METRIC=t.NOOP_UP_DOWN_COUNTER_METRIC=t.NOOP_HISTOGRAM_METRIC=t.NOOP_COUNTER_METRIC=t.NOOP_METER=t.NoopObservableUpDownCounterMetric=t.NoopObservableGaugeMetric=t.NoopObservableCounterMetric=t.NoopObservableMetric=t.NoopHistogramMetric=t.NoopUpDownCounterMetric=t.NoopCounterMetric=t.NoopMetric=t.NoopMeter=void 0;class r{constructor(){}createHistogram(e,r){return t.NOOP_HISTOGRAM_METRIC}createCounter(e,r){return t.NOOP_COUNTER_METRIC}createUpDownCounter(e,r){return t.NOOP_UP_DOWN_COUNTER_METRIC}createObservableGauge(e,r){return t.NOOP_OBSERVABLE_GAUGE_METRIC}createObservableCounter(e,r){return t.NOOP_OBSERVABLE_COUNTER_METRIC}createObservableUpDownCounter(e,r){return t.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC}addBatchObservableCallback(e,t){}removeBatchObservableCallback(e){}}t.NoopMeter=r;class a{}t.NoopMetric=a;class n extends a{add(e,t){}}t.NoopCounterMetric=n;class o extends a{add(e,t){}}t.NoopUpDownCounterMetric=o;class i extends a{record(e,t){}}t.NoopHistogramMetric=i;class s{addCallback(e){}removeCallback(e){}}t.NoopObservableMetric=s;class l extends s{}t.NoopObservableCounterMetric=l;class c extends s{}t.NoopObservableGaugeMetric=c;class d extends s{}t.NoopObservableUpDownCounterMetric=d,t.NOOP_METER=new r,t.NOOP_COUNTER_METRIC=new n,t.NOOP_HISTOGRAM_METRIC=new i,t.NOOP_UP_DOWN_COUNTER_METRIC=new o,t.NOOP_OBSERVABLE_COUNTER_METRIC=new l,t.NOOP_OBSERVABLE_GAUGE_METRIC=new c,t.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=new d,t.createNoopMeter=function(){return t.NOOP_METER}},660:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NOOP_METER_PROVIDER=t.NoopMeterProvider=void 0;let a=r(102);class n{getMeter(e,t,r){return a.NOOP_METER}}t.NoopMeterProvider=n,t.NOOP_METER_PROVIDER=new n},200:function(e,t,r){var a=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r),Object.defineProperty(e,a,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||a(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(46),t)},651:(t,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r._globalThis=void 0,r._globalThis="object"==typeof globalThis?globalThis:e.g},46:function(e,t,r){var a=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r),Object.defineProperty(e,a,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||a(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(651),t)},939:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.propagation=void 0,t.propagation=r(181).PropagationAPI.getInstance()},874:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NoopTextMapPropagator=void 0,t.NoopTextMapPropagator=class{inject(e,t){}extract(e,t){return e}fields(){return[]}}},194:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.defaultTextMapSetter=t.defaultTextMapGetter=void 0,t.defaultTextMapGetter={get(e,t){if(null!=e)return e[t]},keys:e=>null==e?[]:Object.keys(e)},t.defaultTextMapSetter={set(e,t,r){null!=e&&(e[t]=r)}}},845:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.trace=void 0,t.trace=r(997).TraceAPI.getInstance()},403:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NonRecordingSpan=void 0;let a=r(476);t.NonRecordingSpan=class{constructor(e=a.INVALID_SPAN_CONTEXT){this._spanContext=e}spanContext(){return this._spanContext}setAttribute(e,t){return this}setAttributes(e){return this}addEvent(e,t){return this}setStatus(e){return this}updateName(e){return this}end(e){}isRecording(){return!1}recordException(e,t){}}},614:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NoopTracer=void 0;let a=r(491),n=r(607),o=r(403),i=r(139),s=a.ContextAPI.getInstance();t.NoopTracer=class{startSpan(e,t,r=s.active()){var a;if(null==t?void 0:t.root)return new o.NonRecordingSpan;let l=r&&(0,n.getSpanContext)(r);return"object"==typeof(a=l)&&"string"==typeof a.spanId&&"string"==typeof a.traceId&&"number"==typeof a.traceFlags&&(0,i.isSpanContextValid)(l)?new o.NonRecordingSpan(l):new o.NonRecordingSpan}startActiveSpan(e,t,r,a){let o,i,l;if(arguments.length<2)return;2==arguments.length?l=t:3==arguments.length?(o=t,l=r):(o=t,i=r,l=a);let c=null!=i?i:s.active(),d=this.startSpan(e,o,c),u=(0,n.setSpan)(c,d);return s.with(u,l,void 0,d)}}},124:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NoopTracerProvider=void 0;let a=r(614);t.NoopTracerProvider=class{getTracer(e,t,r){return new a.NoopTracer}}},125:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ProxyTracer=void 0;let a=new(r(614)).NoopTracer;t.ProxyTracer=class{constructor(e,t,r,a){this._provider=e,this.name=t,this.version=r,this.options=a}startSpan(e,t,r){return this._getTracer().startSpan(e,t,r)}startActiveSpan(e,t,r,a){let n=this._getTracer();return Reflect.apply(n.startActiveSpan,n,arguments)}_getTracer(){if(this._delegate)return this._delegate;let e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):a}}},846:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ProxyTracerProvider=void 0;let a=r(125),n=new(r(124)).NoopTracerProvider;t.ProxyTracerProvider=class{getTracer(e,t,r){var n;return null!=(n=this.getDelegateTracer(e,t,r))?n:new a.ProxyTracer(this,e,t,r)}getDelegate(){var e;return null!=(e=this._delegate)?e:n}setDelegate(e){this._delegate=e}getDelegateTracer(e,t,r){var a;return null==(a=this._delegate)?void 0:a.getTracer(e,t,r)}}},996:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.SamplingDecision=void 0,(r=t.SamplingDecision||(t.SamplingDecision={}))[r.NOT_RECORD=0]="NOT_RECORD",r[r.RECORD=1]="RECORD",r[r.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"},607:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSpanContext=t.setSpanContext=t.deleteSpan=t.setSpan=t.getActiveSpan=t.getSpan=void 0;let a=r(780),n=r(403),o=r(491),i=(0,a.createContextKey)("OpenTelemetry Context Key SPAN");function s(e){return e.getValue(i)||void 0}function l(e,t){return e.setValue(i,t)}t.getSpan=s,t.getActiveSpan=function(){return s(o.ContextAPI.getInstance().active())},t.setSpan=l,t.deleteSpan=function(e){return e.deleteValue(i)},t.setSpanContext=function(e,t){return l(e,new n.NonRecordingSpan(t))},t.getSpanContext=function(e){var t;return null==(t=s(e))?void 0:t.spanContext()}},325:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TraceStateImpl=void 0;let a=r(564);class n{constructor(e){this._internalState=new Map,e&&this._parse(e)}set(e,t){let r=this._clone();return r._internalState.has(e)&&r._internalState.delete(e),r._internalState.set(e,t),r}unset(e){let t=this._clone();return t._internalState.delete(e),t}get(e){return this._internalState.get(e)}serialize(){return this._keys().reduce((e,t)=>(e.push(t+"="+this.get(t)),e),[]).join(",")}_parse(e){!(e.length>512)&&(this._internalState=e.split(",").reverse().reduce((e,t)=>{let r=t.trim(),n=r.indexOf("=");if(-1!==n){let o=r.slice(0,n),i=r.slice(n+1,t.length);(0,a.validateKey)(o)&&(0,a.validateValue)(i)&&e.set(o,i)}return e},new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let e=new n;return e._internalState=new Map(this._internalState),e}}t.TraceStateImpl=n},564:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.validateValue=t.validateKey=void 0;let r="[_0-9a-z-*/]",a=`[a-z]${r}{0,255}`,n=`[a-z0-9]${r}{0,240}@[a-z]${r}{0,13}`,o=RegExp(`^(?:${a}|${n})$`),i=/^[ -~]{0,255}[!-~]$/,s=/,|=/;t.validateKey=function(e){return o.test(e)},t.validateValue=function(e){return i.test(e)&&!s.test(e)}},98:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createTraceState=void 0;let a=r(325);t.createTraceState=function(e){return new a.TraceStateImpl(e)}},476:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.INVALID_SPAN_CONTEXT=t.INVALID_TRACEID=t.INVALID_SPANID=void 0;let a=r(475);t.INVALID_SPANID="0000000000000000",t.INVALID_TRACEID="00000000000000000000000000000000",t.INVALID_SPAN_CONTEXT={traceId:t.INVALID_TRACEID,spanId:t.INVALID_SPANID,traceFlags:a.TraceFlags.NONE}},357:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.SpanKind=void 0,(r=t.SpanKind||(t.SpanKind={}))[r.INTERNAL=0]="INTERNAL",r[r.SERVER=1]="SERVER",r[r.CLIENT=2]="CLIENT",r[r.PRODUCER=3]="PRODUCER",r[r.CONSUMER=4]="CONSUMER"},139:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.wrapSpanContext=t.isSpanContextValid=t.isValidSpanId=t.isValidTraceId=void 0;let a=r(476),n=r(403),o=/^([0-9a-f]{32})$/i,i=/^[0-9a-f]{16}$/i;function s(e){return o.test(e)&&e!==a.INVALID_TRACEID}function l(e){return i.test(e)&&e!==a.INVALID_SPANID}t.isValidTraceId=s,t.isValidSpanId=l,t.isSpanContextValid=function(e){return s(e.traceId)&&l(e.spanId)},t.wrapSpanContext=function(e){return new n.NonRecordingSpan(e)}},847:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.SpanStatusCode=void 0,(r=t.SpanStatusCode||(t.SpanStatusCode={}))[r.UNSET=0]="UNSET",r[r.OK=1]="OK",r[r.ERROR=2]="ERROR"},475:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.TraceFlags=void 0,(r=t.TraceFlags||(t.TraceFlags={}))[r.NONE=0]="NONE",r[r.SAMPLED=1]="SAMPLED"},521:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VERSION=void 0,t.VERSION="1.6.0"}},P={};function O(e){var t=P[e];if(void 0!==t)return t.exports;var r=P[e]={exports:{}},a=!0;try{E[e].call(r.exports,r,r.exports,O),a=!1}finally{a&&delete P[e]}return r.exports}O.ab="/ROOT/node_modules/.pnpm/next@16.0.10_@babel+core@7.28.0_react-dom@19.2.0_react@19.2.0__react@19.2.0/node_modules/next/dist/compiled/@opentelemetry/api/";var N={};Object.defineProperty(N,"__esModule",{value:!0}),N.trace=N.propagation=N.metrics=N.diag=N.context=N.INVALID_SPAN_CONTEXT=N.INVALID_TRACEID=N.INVALID_SPANID=N.isValidSpanId=N.isValidTraceId=N.isSpanContextValid=N.createTraceState=N.TraceFlags=N.SpanStatusCode=N.SpanKind=N.SamplingDecision=N.ProxyTracerProvider=N.ProxyTracer=N.defaultTextMapSetter=N.defaultTextMapGetter=N.ValueType=N.createNoopMeter=N.DiagLogLevel=N.DiagConsoleLogger=N.ROOT_CONTEXT=N.createContextKey=N.baggageEntryMetadataFromString=void 0,s=O(369),Object.defineProperty(N,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return s.baggageEntryMetadataFromString}}),l=O(780),Object.defineProperty(N,"createContextKey",{enumerable:!0,get:function(){return l.createContextKey}}),Object.defineProperty(N,"ROOT_CONTEXT",{enumerable:!0,get:function(){return l.ROOT_CONTEXT}}),c=O(972),Object.defineProperty(N,"DiagConsoleLogger",{enumerable:!0,get:function(){return c.DiagConsoleLogger}}),d=O(957),Object.defineProperty(N,"DiagLogLevel",{enumerable:!0,get:function(){return d.DiagLogLevel}}),u=O(102),Object.defineProperty(N,"createNoopMeter",{enumerable:!0,get:function(){return u.createNoopMeter}}),p=O(901),Object.defineProperty(N,"ValueType",{enumerable:!0,get:function(){return p.ValueType}}),g=O(194),Object.defineProperty(N,"defaultTextMapGetter",{enumerable:!0,get:function(){return g.defaultTextMapGetter}}),Object.defineProperty(N,"defaultTextMapSetter",{enumerable:!0,get:function(){return g.defaultTextMapSetter}}),f=O(125),Object.defineProperty(N,"ProxyTracer",{enumerable:!0,get:function(){return f.ProxyTracer}}),v=O(846),Object.defineProperty(N,"ProxyTracerProvider",{enumerable:!0,get:function(){return v.ProxyTracerProvider}}),_=O(996),Object.defineProperty(N,"SamplingDecision",{enumerable:!0,get:function(){return _.SamplingDecision}}),h=O(357),Object.defineProperty(N,"SpanKind",{enumerable:!0,get:function(){return h.SpanKind}}),S=O(847),Object.defineProperty(N,"SpanStatusCode",{enumerable:!0,get:function(){return S.SpanStatusCode}}),y=O(475),Object.defineProperty(N,"TraceFlags",{enumerable:!0,get:function(){return y.TraceFlags}}),T=O(98),Object.defineProperty(N,"createTraceState",{enumerable:!0,get:function(){return T.createTraceState}}),m=O(139),Object.defineProperty(N,"isSpanContextValid",{enumerable:!0,get:function(){return m.isSpanContextValid}}),Object.defineProperty(N,"isValidTraceId",{enumerable:!0,get:function(){return m.isValidTraceId}}),Object.defineProperty(N,"isValidSpanId",{enumerable:!0,get:function(){return m.isValidSpanId}}),b=O(476),Object.defineProperty(N,"INVALID_SPANID",{enumerable:!0,get:function(){return b.INVALID_SPANID}}),Object.defineProperty(N,"INVALID_TRACEID",{enumerable:!0,get:function(){return b.INVALID_TRACEID}}),Object.defineProperty(N,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return b.INVALID_SPAN_CONTEXT}}),r=O(67),Object.defineProperty(N,"context",{enumerable:!0,get:function(){return r.context}}),a=O(506),Object.defineProperty(N,"diag",{enumerable:!0,get:function(){return a.diag}}),n=O(886),Object.defineProperty(N,"metrics",{enumerable:!0,get:function(){return n.metrics}}),o=O(939),Object.defineProperty(N,"propagation",{enumerable:!0,get:function(){return o.propagation}}),i=O(845),Object.defineProperty(N,"trace",{enumerable:!0,get:function(){return i.trace}}),N.default={context:r.context,diag:a.diag,metrics:n.metrics,propagation:o.propagation,trace:i.trace},t.exports=N})()},977138,e=>{"use strict";let t,r;var a=e.i(116575);let n=process.env.NEXT_OTEL_PERFORMANCE_PREFIX;try{t=e.r(270406)}catch(r){t=e.r(461388)}let{context:o,propagation:i,trace:s,SpanStatusCode:l,SpanKind:c,ROOT_CONTEXT:d}=t;class u extends Error{constructor(e,t){super(),this.bubble=e,this.result=t}}let p=(e,t)=>{"object"==typeof t&&null!==t&&t instanceof u&&t.bubble?e.setAttribute("next.bubble",!0):(t&&(e.recordException(t),e.setAttribute("error.type",t.name)),e.setStatus({code:l.ERROR,message:null==t?void 0:t.message})),e.end()},g=new Map,f=t.createContextKey("next.rootSpanId"),v=0,_={set(e,t,r){e.push({key:t,value:r})}},h=(r=new class e{getTracerInstance(){return s.getTracer("next.js","0.0.1")}getContext(){return o}getTracePropagationData(){let e=o.active(),t=[];return i.inject(e,t,_),t}getActiveScopeSpan(){return s.getSpan(null==o?void 0:o.active())}withPropagatedContext(e,t,r){let a=o.active();if(s.getSpanContext(a))return t();let n=i.extract(a,e,r);return o.with(n,t)}trace(...e){let[t,r,i]=e,{fn:s,options:l}="function"==typeof r?{fn:r,options:{}}:{fn:i,options:{...r}},c=l.spanName??t;if(!a.NextVanillaSpanAllowlist.has(t)&&"1"!==process.env.NEXT_OTEL_VERBOSE||l.hideSpan)return s();let u=this.getSpanContext((null==l?void 0:l.parentSpan)??this.getActiveScopeSpan());u||(u=(null==o?void 0:o.active())??d);let _=u.getValue(f),h="number"!=typeof _||!g.has(_),S=v++;return l.attributes={"next.span_name":c,"next.span_type":t,...l.attributes},o.with(u.setValue(f,S),()=>this.getTracerInstance().startActiveSpan(c,l,e=>{let r;n&&t&&a.LogSpanAllowList.has(t)&&(r="performance"in globalThis&&"measure"in performance?globalThis.performance.now():void 0);let o=!1,i=()=>{!o&&(o=!0,g.delete(S),r&&performance.measure(`${n}:next-${(t.split(".").pop()||"").replace(/[A-Z]/g,e=>"-"+e.toLowerCase())}`,{start:r,end:performance.now()}))};if(h&&g.set(S,new Map(Object.entries(l.attributes??{}))),s.length>1)try{return s(e,t=>p(e,t))}catch(t){throw p(e,t),t}finally{i()}try{let t=s(e);if(null!==t&&"object"==typeof t&&"then"in t&&"function"==typeof t.then)return t.then(t=>(e.end(),t)).catch(t=>{throw p(e,t),t}).finally(i);return e.end(),i(),t}catch(t){throw p(e,t),i(),t}}))}wrap(...e){let t=this,[r,n,i]=3===e.length?e:[e[0],{},e[1]];return a.NextVanillaSpanAllowlist.has(r)||"1"===process.env.NEXT_OTEL_VERBOSE?function(){let e=n;"function"==typeof e&&"function"==typeof i&&(e=e.apply(this,arguments));let a=arguments.length-1,s=arguments[a];if("function"!=typeof s)return t.trace(r,e,()=>i.apply(this,arguments));{let n=t.getContext().bind(o.active(),s);return t.trace(r,e,(e,t)=>(arguments[a]=function(e){return null==t||t(e),n.apply(this,arguments)},i.apply(this,arguments)))}}:i}startSpan(...e){let[t,r]=e,a=this.getSpanContext((null==r?void 0:r.parentSpan)??this.getActiveScopeSpan());return this.getTracerInstance().startSpan(t,r,a)}getSpanContext(e){return e?s.setSpan(o.active(),e):void 0}getRootSpanAttributes(){let e=o.active().getValue(f);return g.get(e)}setRootSpanAttribute(e,t){let r=o.active().getValue(f),a=g.get(r);a&&!a.has(e)&&a.set(e,t)}},()=>r);e.s(["SpanKind",()=>c,"getTracer",()=>h],977138)},700980,(e,t,r)=>{(()=>{"use strict";"undefined"!=typeof __nccwpck_require__&&(__nccwpck_require__.ab="/ROOT/node_modules/.pnpm/next@16.0.10_@babel+core@7.28.0_react-dom@19.2.0_react@19.2.0__react@19.2.0/node_modules/next/dist/compiled/cookie/");var e,r,a,n,o={};o.parse=function(t,r){if("string"!=typeof t)throw TypeError("argument str must be a string");for(var n={},o=t.split(a),i=(r||{}).decode||e,s=0;s<o.length;s++){var l=o[s],c=l.indexOf("=");if(!(c<0)){var d=l.substr(0,c).trim(),u=l.substr(++c,l.length).trim();'"'==u[0]&&(u=u.slice(1,-1)),void 0==n[d]&&(n[d]=function(e,t){try{return t(e)}catch(t){return e}}(u,i))}}return n},o.serialize=function(e,t,a){var o=a||{},i=o.encode||r;if("function"!=typeof i)throw TypeError("option encode is invalid");if(!n.test(e))throw TypeError("argument name is invalid");var s=i(t);if(s&&!n.test(s))throw TypeError("argument val is invalid");var l=e+"="+s;if(null!=o.maxAge){var c=o.maxAge-0;if(isNaN(c)||!isFinite(c))throw TypeError("option maxAge is invalid");l+="; Max-Age="+Math.floor(c)}if(o.domain){if(!n.test(o.domain))throw TypeError("option domain is invalid");l+="; Domain="+o.domain}if(o.path){if(!n.test(o.path))throw TypeError("option path is invalid");l+="; Path="+o.path}if(o.expires){if("function"!=typeof o.expires.toUTCString)throw TypeError("option expires is invalid");l+="; Expires="+o.expires.toUTCString()}if(o.httpOnly&&(l+="; HttpOnly"),o.secure&&(l+="; Secure"),o.sameSite)switch("string"==typeof o.sameSite?o.sameSite.toLowerCase():o.sameSite){case!0:case"strict":l+="; SameSite=Strict";break;case"lax":l+="; SameSite=Lax";break;case"none":l+="; SameSite=None";break;default:throw TypeError("option sameSite is invalid")}return l},e=decodeURIComponent,r=encodeURIComponent,a=/; */,n=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,t.exports=o})()},161747,e=>{"use strict";class t{static get(e,t,r){let a=Reflect.get(e,t,r);return"function"==typeof a?a.bind(e):a}static set(e,t,r,a){return Reflect.set(e,t,r,a)}static has(e,t){return Reflect.has(e,t)}static deleteProperty(e,t){return Reflect.deleteProperty(e,t)}}class r extends Error{constructor(){super("Headers cannot be modified. Read more: https://nextjs.org/docs/app/api-reference/functions/headers")}static callable(){throw new r}}class a extends Headers{constructor(e){super(),this.headers=new Proxy(e,{get(r,a,n){if("symbol"==typeof a)return t.get(r,a,n);let o=a.toLowerCase(),i=Object.keys(e).find(e=>e.toLowerCase()===o);if(void 0!==i)return t.get(r,i,n)},set(r,a,n,o){if("symbol"==typeof a)return t.set(r,a,n,o);let i=a.toLowerCase(),s=Object.keys(e).find(e=>e.toLowerCase()===i);return t.set(r,s??a,n,o)},has(r,a){if("symbol"==typeof a)return t.has(r,a);let n=a.toLowerCase(),o=Object.keys(e).find(e=>e.toLowerCase()===n);return void 0!==o&&t.has(r,o)},deleteProperty(r,a){if("symbol"==typeof a)return t.deleteProperty(r,a);let n=a.toLowerCase(),o=Object.keys(e).find(e=>e.toLowerCase()===n);return void 0===o||t.deleteProperty(r,o)}})}static seal(e){return new Proxy(e,{get(e,a,n){switch(a){case"append":case"delete":case"set":return r.callable;default:return t.get(e,a,n)}}})}merge(e){return Array.isArray(e)?e.join(", "):e}static from(e){return e instanceof Headers?e:new a(e)}append(e,t){let r=this.headers[e];"string"==typeof r?this.headers[e]=[r,t]:Array.isArray(r)?r.push(t):this.headers[e]=t}delete(e){delete this.headers[e]}get(e){let t=this.headers[e];return void 0!==t?this.merge(t):null}has(e){return void 0!==this.headers[e]}set(e,t){this.headers[e]=t}forEach(e,t){for(let[r,a]of this.entries())e.call(t,a,r,this)}*entries(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase(),r=this.get(t);yield[t,r]}}*keys(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase();yield t}}*values(){for(let e of Object.keys(this.headers)){let t=this.get(e);yield t}}[Symbol.iterator](){return this.entries()}}let n={shared:"shared",reactServerComponents:"rsc",serverSideRendering:"ssr",actionBrowser:"action-browser",apiNode:"api-node",apiEdge:"api-edge",middleware:"middleware",instrument:"instrument",edgeAsset:"edge-asset",appPagesBrowser:"app-pages-browser",pagesDirBrowser:"pages-dir-browser",pagesDirEdge:"pages-dir-edge",pagesDirNode:"pages-dir-node"};function o(e,t,r){e.statusCode=t,e.statusMessage=r,e.end(r)}n.reactServerComponents,n.actionBrowser,n.reactServerComponents,n.actionBrowser,n.instrument,n.middleware,n.apiNode,n.apiEdge,n.serverSideRendering,n.appPagesBrowser,n.reactServerComponents,n.actionBrowser,n.serverSideRendering,n.appPagesBrowser,n.shared,n.instrument,n.middleware,n.reactServerComponents,n.serverSideRendering,n.appPagesBrowser,n.actionBrowser,e.i(977138),e.i(116575),Symbol("__next_preview_data"),Symbol("__prerender_bypass"),e.s(["sendError",()=>o],161747)},296254,e=>{"use strict";var t,r=((t={}).PAGES="PAGES",t.PAGES_API="PAGES_API",t.APP_PAGE="APP_PAGE",t.APP_ROUTE="APP_ROUTE",t.IMAGE="IMAGE",t);e.s(["RouteKind",()=>r])},236907,(e,t,r)=>{t.exports=e.x("next/dist/compiled/next-server/pages-api-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/pages-api-turbo.runtime.prod.js"))},943494,(e,t,r)=>{t.exports=e.r(236907)},975551,e=>{"use strict";e.s(["hoist",()=>function e(t,r){return r in t?t[r]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,r)):"function"==typeof t&&"default"===r?t:void 0}])},386981,(e,t,r)=>{t.exports=e.x("cors",()=>require("cors"))},597101,e=>{"use strict";let t=(0,e.i(386981).default)({methods:["POST","GET","PUT","DELETE","HEAD","OPTIONS"],maxAge:86400});e.s(["corsAllMethods",0,t,"runMiddleware",0,(e,t,r)=>new Promise((a,n)=>{r(e,t,e=>e instanceof Error?n(e):a(e))})])},799189,e=>e.a(async(t,r)=>{try{let t=await e.y("@opennextjs/cloudflare");e.n(t),r()}catch(e){r(e)}},!0),156829,e=>e.a(async(t,r)=>{try{var a=e.i(160745),n=t([a]);[a]=n.then?(await n)():n;let i=process.env.AUTH_SECRET||"dev-secret";process.env.AUTH_PASSWORD||Math.random().toString(36).substring(2,15);let s=new TextEncoder().encode(i);async function o(e){try{return(await (0,a.jwtVerify)(e,s)).payload}catch{return null}}e.s(["verifyJWT",()=>o]),r()}catch(e){r(e)}},!1),281612,e=>e.a(async(t,r)=>{try{var a=e.i(252919);e.i(191587);var n=t([a]);[a]=n.then?(await n)():n,e.s(["getDailyUsage",0,e=>null,"saveDailyUsage",0,(e,t)=>{}]),r()}catch(e){r(e)}},!1),688812,e=>e.a(async(t,r)=>{try{var a=e.i(457492),n=e.i(156829),o=e.i(827667);e.i(667814);var i=e.i(281612),s=t([a,n,i]);[a,n,i]=s.then?(await s)():s;let l=async e=>{if(!e)return{};let t=e.replace("Bearer ","");try{if(!await (0,n.verifyJWT)(t))return{};return{user:{id:"xingjjjjj",email:"admin@local"},token:t}}catch(e){return{}}};e.s(["getDailyTranslationPlanData",0,e=>{let t=((0,a.jwtDecode)(e)||{}).plan||"free",r=parseInt(process.env.NEXT_PUBLIC_TRANSLATION_FIXED_QUOTA||"0")||o.DEFAULT_DAILY_TRANSLATION_QUOTA[t]||o.DEFAULT_DAILY_TRANSLATION_QUOTA.free;return{plan:t,quota:r}},"getSubscriptionPlan",0,e=>((0,a.jwtDecode)(e)||{}).plan||"free","validateUserAndToken",0,l]),r()}catch(e){r(e)}},!1),436033,e=>{"use strict";e.s(["ErrorCodes",0,{UNAUTHORIZED:"Unauthorized",DEEPL_API_ERROR:"DeepL API Error",DAILY_QUOTA_EXCEEDED:"Daily Quota Exceeded",INTERNAL_SERVER_ERROR:"Internal Server Error"}])},571848,e=>{"use strict";e.s([])},945302,e=>{"use strict";e.s([])},157260,e=>{"use strict";e.s([])},790125,e=>e.a(async(t,r)=>{try{var a=e.i(667814),n=e.i(191587),o=e.i(436033),i=e.i(688812),s=e.i(252919),l=e.i(827667),c=e.i(281612),d=t([i,s,c]);[i,s,c]=d.then?(await d)():d;let u=(0,a.getAPIBaseUrl)()+"/deepl/translate",p={name:"deepl",label:(0,n.stubTranslation)("DeepL"),authRequired:!0,quotaExceeded:!1,translate:async(e,t,r,a,n=!1)=>{let d=p.authRequired,g={"Content-Type":"application/json"},f="free";if(a&&(f=(0,i.getSubscriptionPlan)(a),g.Authorization=`Bearer ${a}`),d&&!a)throw Error("Authentication token is required for DeepL translation");let v=JSON.stringify({text:e,source_lang:(0,s.normalizeToShortLang)(t).toUpperCase(),target_lang:(0,s.normalizeToShortLang)(r).toUpperCase(),use_cache:n}),_=l.DEFAULT_DAILY_TRANSLATION_QUOTA[f];try{let t=await fetch(u,{method:"POST",headers:g,body:v});if(!t.ok){let e=await t.json();if(e&&e.error&&e.error===o.ErrorCodes.DAILY_QUOTA_EXCEEDED)throw(0,c.saveDailyUsage)(_),p.quotaExceeded=!0,Error(o.ErrorCodes.DAILY_QUOTA_EXCEEDED);throw Error(`Translation failed with status ${t.status}`)}let r=await t.json();if(!r||!r.translations)throw Error("Invalid response from translation service");return e.map((e,t)=>{if(!e?.trim().length)return e;let a=r.translations?.[t];return a?.daily_usage&&((0,c.saveDailyUsage)(a.daily_usage),p.quotaExceeded=r.daily_usage>=_),a?.text||e})}catch(e){throw e}}};e.s(["deeplProvider",0,p]),r()}catch(e){r(e)}},!1),735464,e=>e.a(async(t,r)=>{try{var a=e.i(191587),n=e.i(592583),o=e.i(667814),i=e.i(252919),s=t([i]);[i]=s.then?(await s)():s;let l=null,c=async()=>{let e=Date.now();if(l&&l.expiresAt>e)return l.token;try{let t=(0,o.isTauriAppPlatform)()?n.fetch:window.fetch,r=await t("https://edge.microsoft.com/translate/auth",{method:"GET",headers:{"User-Agent":"Mozilla/5.0"}});if(!r.ok)throw Error(`Failed to get auth token: ${r.status}`);let a=await r.text();return l={token:a,expiresAt:e+48e4},a}catch(e){throw console.error("Error getting Microsoft translation auth token:",e),e}},d={name:"azure",label:(0,a.stubTranslation)("Azure Translator"),translate:async(e,t,r)=>{if(!e.length)return[];let a=[],s=t?(0,i.normalizeToFullLang)(t):"",l=(0,i.normalizeToFullLang)(r),d=e.map(async(e,t)=>{if(!e?.trim().length){a[t]=e;return}let r=new URLSearchParams({to:l,"api-version":"3.0"});s&&"auto"!==s.toLowerCase()&&r.append("from",s);let i=await c(),d=(0,o.isTauriAppPlatform)()?n.fetch:window.fetch,u=await d(`https://api-edge.cognitive.microsofttranslator.com/translate?${r.toString()}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`},body:JSON.stringify([{Text:e}])});if(!u.ok)throw Error(`Translation failed with status ${u.status}`);let p=await u.json();Array.isArray(p)&&p.length>0&&p[0].translations?a[t]=p[0].translations[0].text||e:a[t]=e});return await Promise.all(d),a}};e.s(["azureProvider",0,d]),r()}catch(e){r(e)}},!1),931703,e=>e.a(async(t,r)=>{try{var a=e.i(191587),n=e.i(592583),o=e.i(667814),i=e.i(252919),s=t([i]);[i]=s.then?(await s)():s;let l={name:"google",label:(0,a.stubTranslation)("Google Translate"),translate:async(e,t,r)=>{if(!e.length)return[];let a=[],s=e.map(async(e,s)=>{if(!e?.trim().length){a[s]=e;return}let l=new URL("https://translate.googleapis.com/translate_a/single");l.searchParams.append("client","gtx"),l.searchParams.append("dt","t"),l.searchParams.append("sl",(0,i.normalizeToShortLang)(t).toLowerCase()||"auto"),l.searchParams.append("tl",(0,i.normalizeToShortLang)(r).toLowerCase()),l.searchParams.append("q",e);let c=(0,o.isTauriAppPlatform)()?n.fetch:window.fetch,d=await c(l.toString());if(!d.ok)throw Error(`Translation failed with status ${d.status}`);let u=await d.json();if(Array.isArray(u)&&Array.isArray(u[0])){let t=u[0].filter(e=>Array.isArray(e)&&e[0]).map(e=>e[0]).join("");a[s]=t||e}else a[s]=e});return await Promise.all(s),a}};e.s(["googleProvider",0,l]),r()}catch(e){r(e)}},!1),687584,e=>e.a(async(t,r)=>{try{var a=e.i(191587),n=e.i(592583),o=e.i(667814),i=e.i(252919),s=t([i]);async function l(e,t,r){let a=(0,o.isTauriAppPlatform)()?n.fetch:window.fetch,i={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({lang:t,service:r,text:e})},s=await a("https://translate.toil.cc/v2/translate/",i);if(!s.ok){let t=JSON.stringify(await s.json());throw Error(`${r} failed with status ${s.status}
${e.length}
${JSON.stringify(i)}
${t}`)}let l=await s.json();return l&&Array.isArray(l.translations)?l.translations:[e]}[i]=s.then?(await s)():s;let c={name:"yandex",label:(0,a.stubTranslation)("Yandex Translate"),authRequired:!1,translate:async(e,t,r)=>{if(!e.length)return[];let a="AUTO"==t?"en":(0,i.normalizeToShortLang)(t).toLowerCase(),n=(0,i.normalizeToShortLang)(r).toLowerCase(),o=`${a}-${n}`;return(await Promise.all(e.map(async e=>await l(e,o,"yandexgpt")))).flat()}};e.s(["yandexProvider",0,c]),r()}catch(e){r(e)}},!1),829099,e=>e.a(async(t,r)=>{try{var a=e.i(790125),n=e.i(735464),o=e.i(931703),i=e.i(687584),s=t([a,n,o,i]);function l(e,t){if(e!==t.name)throw Error(`Translator name "${e}" does not match implementation name "${t.name}"`);return t}[a,n,o,i]=s.then?(await s)():s,l("deepl",a.deeplProvider),l("azure",n.azureProvider),l("google",o.googleProvider),l("yandex",i.yandexProvider),e.s([]),r()}catch(e){r(e)}},!1),165881,e=>e.a(async(t,r)=>{try{e.i(436033),e.i(571848),e.i(945302),e.i(157260);var a=e.i(829099),n=t([a]);[a]=n.then?(await n)():n,e.s([]),r()}catch(e){r(e)}},!1),342276,e=>{"use strict";class t{static async getCurrentUsage(e,t,r){return 0}static async trackUsage(e,t,r,a){return 0}}e.s(["UsageStatsManager",()=>t])},179173,e=>e.a(async(t,r)=>{try{var a=e.i(254799),n=e.i(597101),o=e.i(799189),i=e.i(688812),s=e.i(165881),l=e.i(436033),c=e.i(342276),d=t([o,i,s]);[o,i,s]=d.then?(await d)():d;let p={"ZH-HANS":"ZH","ZH-HANT":"ZH-TW"},g=e=>{let t=e?.split(",")??[];return t.length?t[Math.floor(Math.random()*t.length)]:""},f=(e,t,r)=>{let n=`${t}:${r}:${e}`,o=a.default.createHash("sha1").update(n).digest("hex");return`tr:${o}`},v=async(e,t,r)=>{let{quota:a}=(0,i.getDailyTranslationPlanData)(t),n=await c.UsageStatsManager.getCurrentUsage(e,"translation_chars","daily");if(a<=n+r)throw Error(l.ErrorCodes.DAILY_QUOTA_EXCEEDED);return n},_=async(e,t,r)=>{if(!e||!t)return 0;try{let a=(0,i.getSubscriptionPlan)(t);return await c.UsageStatsManager.trackUsage(e,"translation_chars",r,{plan_type:a,source:"deepl_api"})}catch(e){console.error("Update daily usage error:",e)}return 0},h=async(e,t)=>{if(await (0,n.runMiddleware)(e,t,n.corsAllMethods),"POST"!==e.method)return t.status(405).json({error:"Method not allowed"});let r=(0,o.getCloudflareContext)().env||{},a=!!r.TRANSLATIONS_KV,{user:s,token:c}=await (0,i.validateUserAndToken)(e.headers.authorization),{DEEPL_PRO_API:d,DEEPL_FREE_API:p}=process.env,h=d||"https://api.deepl.com/v2/translate",S=p||"https://api-free.deepl.com/v2/translate",y="free";s&&c&&(y=(0,i.getSubscriptionPlan)(c),"pro"===y&&(S=h));let T=S===h?g(process.env.DEEPL_PRO_API_KEYS):g(process.env.DEEPL_FREE_API_KEYS),{text:m,source_lang:b="AUTO",target_lang:E="EN",use_cache:P=!1}=e.body;try{let e=await Promise.all(m.map(async e=>{if(!e?.trim())return{text:"",daily_usage:0};if(P&&a)try{let t=f(e,b,E),a=await r.TRANSLATIONS_KV.get(t);if(a)return{text:a,daily_usage:0,detected_source_language:b}}catch(e){console.error("Cache retrieval error:",e)}return s&&c?(await v(s?.id,c,e.length),await u(e,b,E,S,T,r.TRANSLATIONS_KV,P)):t.status(401).json({error:l.ErrorCodes.UNAUTHORIZED})})),n=m.reduce((e,t)=>e+t.length,0),o=e.reduce((e,t)=>e+(t?.text.length||0),0),i=await _(s?.id,c,n+o);return e.forEach(e=>{e&&e.text&&(e.daily_usage=i)}),t.status(200).json({translations:e})}catch(e){if(e instanceof Error&&e.message.includes(l.ErrorCodes.DAILY_QUOTA_EXCEEDED))return t.status(429).json({error:l.ErrorCodes.DAILY_QUOTA_EXCEEDED});return console.error("Error proxying DeepL request:",e),t.status(500).json({error:l.ErrorCodes.INTERNAL_SERVER_ERROR})}};async function u(e,t,r,a,n,o,i){let s=a.endsWith("/v2/translate"),l=e.replaceAll("\n","").trim(),c={text:s?[l]:l,source_lang:s?t:p[t]??t,target_lang:s?r:p[r]??r},d=await fetch(a,{method:"POST",headers:{Authorization:`DeepL-Auth-Key ${n}`,"x-fingerprint":process.env.DEEPL_X_FINGERPRINT||"","Content-Type":"application/json"},body:JSON.stringify(c)});if(!d.ok){let e=await d.text();throw Error(`DeepL API error (${d.status}): ${e}`)}let u=await d.json(),g="",v="";if(u.translations&&u.translations.length>0?(g=u.translations[0].text,v=u.translations[0].detected_source_language||""):u.data&&(g=u.data),i&&o&&g)try{let a=f(e,t,r);await o.put(a,g,{expirationTtl:7776e3})}catch(e){console.error("Cache storage error:",e)}return{text:g,daily_usage:0,detected_source_language:v}}e.s(["default",0,h]),r()}catch(e){r(e)}},!1),985521,e=>{"use strict";let t=Symbol.for("NextInternalRequestMeta");function r(e,r,a){let n=e[t]||{};return n[r]=a,e[t]=n,n}e.s(["addRequestMeta",()=>r])},104142,e=>e.a(async(t,r)=>{try{var a=e.i(161747),n=e.i(296254),o=e.i(943494),i=e.i(975551),s=e.i(179173),l=e.i(977138),c=e.i(116575),d=e.i(985521),u=t([s]);[s]=u.then?(await u)():u;let g=(0,i.hoist)(s,"default"),f=(0,i.hoist)(s,"config"),v=new o.PagesAPIRouteModule({definition:{kind:n.RouteKind.PAGES_API,page:"/api/deepl/translate",pathname:"/api/deepl/translate",bundlePath:"",filename:""},userland:s,distDir:".next",relativeProjectDir:""});async function p(e,t,r){v.isDev&&(0,d.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let n="/api/deepl/translate";n=n.replace(/\/index$/,"")||"/";let o=await v.prepare(e,t,{srcPage:n});if(!o){t.statusCode=400,t.end("Bad Request"),null==r.waitUntil||r.waitUntil.call(r,Promise.resolve());return}let{query:i,params:s,prerenderManifest:u,routerServerContext:p}=o;try{let r=e.method||"GET",a=(0,l.getTracer)(),o=a.getActiveScopeSpan(),d=v.instrumentationOnRequestError.bind(v),g=async o=>v.render(e,t,{query:{...i,...s},params:s,allowedRevalidateHeaderKeys:[],multiZoneDraftMode:!1,trustHostHeader:!1,previewProps:u.preview,propagateError:!1,dev:v.isDev,page:"/api/deepl/translate",internalRevalidate:null==p?void 0:p.revalidate,onError:(...t)=>d(e,...t)}).finally(()=>{if(!o)return;o.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let e=a.getRootSpanAttributes();if(!e)return;if(e.get("next.span_type")!==c.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${e.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let i=e.get("next.route");if(i){let e=`${r} ${i}`;o.setAttributes({"next.route":i,"http.route":i,"next.span_name":e}),o.updateName(e)}else o.updateName(`${r} ${n}`)});o?await g(o):await a.withPropagatedContext(e.headers,()=>a.trace(c.BaseServerSpan.handleRequest,{spanName:`${r} ${n}`,kind:l.SpanKind.SERVER,attributes:{"http.method":r,"http.target":e.url}},g))}catch(e){if(v.isDev)throw e;(0,a.sendError)(t,500,"Internal Server Error")}finally{null==r.waitUntil||r.waitUntil.call(r,Promise.resolve())}}e.s(["config",0,f,"default",0,g,"handler",()=>p]),r()}catch(e){r(e)}},!1)];

//# sourceMappingURL=%5Broot-of-the-server%5D__f3d522a7._.js.map
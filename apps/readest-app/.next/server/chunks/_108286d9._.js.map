{"version":3,"sources":["../../../../../apps/readest-app/src/utils/misc.ts","../../../../../apps/readest-app/src/utils/config.ts","../../../../../apps/readest-app/src/services/constants.ts","../../../../../apps/readest-app/src/utils/lang.ts","../../../../../node_modules/.pnpm/%40tauri-apps%2Bapi%402.9.1/node_modules/%40tauri-apps/api/external/tslib/tslib.es6.js","../../../../../node_modules/.pnpm/%40tauri-apps%2Bapi%402.9.1/node_modules/%40tauri-apps/api/core.js","../../../../../node_modules/.pnpm/%40tauri-apps%2Bplugin-http%402.5.6/node_modules/%40tauri-apps/plugin-http/dist-js/index.js"],"sourcesContent":["import { OsPlatform } from '@/types/system';\nimport { md5 } from 'js-md5';\n\nexport const uniqueId = () => Math.random().toString(36).substring(2, 9);\n\nexport const randomMd5 = () => md5(Math.random().toString());\n\nexport const getContentMd5 = (content: unknown) => md5(JSON.stringify(content));\n\nexport const makeSafeFilename = (filename: string, replacement = '_') => {\n  // Windows restricted characters + control characters and reserved names\n  const unsafeCharacters = /[<>:%\"\\/\\\\|?*\\x00-\\x1F]/g;\n  const reservedFilenames = /^(con|prn|aux|nul|com[1-9]|lpt[1-9])$/i;\n  // Unsafe to use filename including file extensions over 255 bytes on Android\n  const maxFilenameBytes = 250;\n\n  let safeName = filename.replace(unsafeCharacters, replacement);\n\n  if (reservedFilenames.test(safeName)) {\n    safeName = `${safeName}${replacement}`;\n  }\n\n  const encoder = new TextEncoder();\n  let utf8Bytes = encoder.encode(safeName);\n\n  while (utf8Bytes.length > maxFilenameBytes) {\n    safeName = safeName.slice(0, -1);\n    utf8Bytes = encoder.encode(safeName);\n  }\n\n  return safeName.trim();\n};\n\nexport const getLocale = () => {\n  return localStorage?.getItem('i18nextLng') || navigator?.language || '';\n};\n\nexport const getUserLang = () => {\n  const locale = getLocale();\n  return locale.split('-')[0] || 'en';\n};\n\nexport const getTargetLang = () => {\n  const locale = getLocale();\n  if (locale.startsWith('zh')) {\n    return locale === 'zh-Hant' || locale === 'zh-HK' || locale === 'zh-TW' ? 'zh-Hant' : 'zh-Hans';\n  }\n  return locale.split('-')[0] || 'en';\n};\n\nexport const isCJKEnv = () => {\n  const browserLanguage = navigator.language || '';\n  const uiLanguage = localStorage?.getItem('i18nextLng') || '';\n  const isCJKUI = ['zh', 'ja', 'ko'].some((lang) => uiLanguage.startsWith(lang));\n  const isCJKLocale = ['zh', 'ja', 'ko'].some((lang) => browserLanguage.startsWith(lang));\n  return isCJKLocale || isCJKUI;\n};\n\nexport const getUserLocale = (lang: string): string | undefined => {\n  const languages =\n    navigator.languages && navigator.languages.length > 0\n      ? navigator.languages\n      : [navigator.language];\n\n  const filteredLocales = languages.filter((locale) => locale.startsWith(lang));\n  return filteredLocales.length > 0 ? filteredLocales[0] : undefined;\n};\n\n// Note that iPad may have a user agent string like a desktop browser\n// when possible please use appService.isIOSApp || getOSPlatform() === 'ios'\n// to check if the app is running on iOS\nexport const getOSPlatform = (): OsPlatform => {\n  const userAgent = navigator.userAgent.toLowerCase();\n\n  if (/iphone|ipad|ipod/.test(userAgent)) return 'ios';\n  if (userAgent.includes('android')) return 'android';\n  if (userAgent.includes('macintosh') || userAgent.includes('mac os x')) return 'macos';\n  if (userAgent.includes('windows nt')) return 'windows';\n  if (userAgent.includes('linux')) return 'linux';\n\n  return 'unknown';\n};\n\nexport const isContentURI = (uri: string) => {\n  return uri.startsWith('content://');\n};\n\nexport const isFileURI = (uri: string) => {\n  return uri.startsWith('file://');\n};\n\nexport const isValidURL = (url: string, allowedSchemes: string[] = ['http', 'https']) => {\n  try {\n    const { protocol } = new URL(url);\n    return allowedSchemes.some((scheme) => `${scheme}:` === protocol);\n  } catch {\n    return false;\n  }\n};\n\nexport const stubTranslation = (stubKey: string) => {\n  return stubKey;\n};\n","import { ViewSettings } from '@/types/book';\n\nexport const getMaxInlineSize = (viewSettings: ViewSettings) => {\n  const isVertical = viewSettings.vertical;\n  const screenWidth = window.innerWidth;\n  const screenHeight = window.innerHeight;\n\n  const screenAspectRatio = isVertical ? screenHeight / screenWidth : screenWidth / screenHeight;\n  const isUnfoldedScreen = screenAspectRatio < 1.3 && screenAspectRatio > 0.77 && screenWidth > 600;\n\n  return isVertical\n    ? Math.max(screenWidth, screenHeight, 720, viewSettings.maxInlineSize)\n    : isUnfoldedScreen\n      ? viewSettings.maxInlineSize * 0.8\n      : viewSettings.maxInlineSize;\n};\n\nexport const getDefaultMaxInlineSize = () => {\n  if (typeof window === 'undefined') return 720;\n\n  const screenWidth = window.innerWidth;\n  const screenHeight = window.innerHeight;\n  return screenWidth < screenHeight ? Math.max(screenWidth, 720) : 720;\n};\n\nexport const getDefaultMaxBlockSize = () => {\n  if (typeof window === 'undefined') return 1440;\n\n  const screenWidth = window.innerWidth;\n  const screenHeight = window.innerHeight;\n  return Math.max(screenWidth, screenHeight, 1440);\n};\n","import {\n  AnnotatorConfig,\n  BookFont,\n  BookLanguage,\n  BookLayout,\n  BookSearchConfig,\n  BookStyle,\n  HighlightColor,\n  NoteExportConfig,\n  ScreenConfig,\n  TranslatorConfig,\n  TTSConfig,\n  ViewConfig,\n  ViewSettings,\n} from '@/types/book';\nimport { KOSyncSettings, ReadSettings, SystemSettings } from '@/types/settings';\nimport { UserStorageQuota, UserDailyTranslationQuota } from '@/types/quota';\nimport { getDefaultMaxBlockSize, getDefaultMaxInlineSize } from '@/utils/config';\nimport { stubTranslation as _ } from '@/utils/misc';\n\nexport const DATA_SUBDIR = 'Readest';\nexport const LOCAL_BOOKS_SUBDIR = `${DATA_SUBDIR}/Books`;\nexport const LOCAL_FONTS_SUBDIR = `${DATA_SUBDIR}/Fonts`;\nexport const LOCAL_IMAGES_SUBDIR = `${DATA_SUBDIR}/Images`;\n\nexport const SETTINGS_FILENAME = 'settings.json';\n\nexport const SUPPORTED_BOOK_EXTS = [\n  'epub',\n  'mobi',\n  'azw',\n  'azw3',\n  'fb2',\n  'zip',\n  'cbz',\n  'pdf',\n  'txt',\n];\nexport const BOOK_ACCEPT_FORMATS = SUPPORTED_BOOK_EXTS.map((ext) => `.${ext}`).join(', ');\nexport const BOOK_UNGROUPED_NAME = '';\nexport const BOOK_UNGROUPED_ID = '';\n\nexport const SUPPORTED_IMAGE_EXTS = ['png', 'jpg', 'jpeg'];\nexport const IMAGE_ACCEPT_FORMATS = SUPPORTED_IMAGE_EXTS.map((ext) => `.${ext}`).join(', ');\n\nexport const DEFAULT_KOSYNC_SETTINGS = {\n  serverUrl: 'https://sync.koreader.rocks/', // https://kosync.ak-team.com:3042/\n  username: '',\n  userkey: '',\n  deviceId: '',\n  deviceName: '',\n  checksumMethod: 'binary',\n  strategy: 'prompt',\n  enabled: false,\n} as KOSyncSettings;\n\nexport const DEFAULT_SYSTEM_SETTINGS: Partial<SystemSettings> = {\n  keepLogin: false,\n  autoUpload: true,\n  alwaysOnTop: false,\n  openBookInNewWindow: true,\n  alwaysShowStatusBar: false,\n  alwaysInForeground: false,\n  autoCheckUpdates: true,\n  screenWakeLock: false,\n  screenBrightness: -1, // -1~100, -1 for system default\n  autoScreenBrightness: true,\n  openLastBooks: false,\n  lastOpenBooks: [],\n  autoImportBooksOnOpen: false,\n  telemetryEnabled: true,\n  discordRichPresenceEnabled: false,\n  libraryViewMode: 'grid',\n  librarySortBy: 'updated',\n  librarySortAscending: false,\n  libraryCoverFit: 'crop',\n  libraryAutoColumns: true,\n  libraryColumns: 6,\n\n  kosync: DEFAULT_KOSYNC_SETTINGS,\n\n  lastSyncedAtBooks: 0,\n  lastSyncedAtConfigs: 0,\n  lastSyncedAtNotes: 0,\n};\n\nexport const DEFAULT_MOBILE_SYSTEM_SETTINGS: Partial<SystemSettings> = {\n  libraryColumns: 3,\n};\n\nexport const HIGHLIGHT_COLOR_HEX: Record<HighlightColor, string> = {\n  red: '#f87171', // red-400\n  yellow: '#facc15', // yellow-400\n  green: '#4ade80', // green-400\n  blue: '#60a5fa', // blue-400\n  violet: '#a78bfa', // violet-400\n};\n\nexport const DEFAULT_READSETTINGS: ReadSettings = {\n  sideBarWidth: '15%',\n  isSideBarPinned: true,\n  notebookWidth: '25%',\n  isNotebookPinned: false,\n  autohideCursor: true,\n  translationProvider: 'deepl',\n  translateTargetLang: 'EN',\n\n  customThemes: [],\n  highlightStyle: 'highlight',\n  highlightStyles: {\n    highlight: 'yellow',\n    underline: 'green',\n    squiggly: 'blue',\n  },\n  customHighlightColors: HIGHLIGHT_COLOR_HEX,\n  customTtsHighlightColors: [],\n};\n\nexport const DEFAULT_MOBILE_READSETTINGS: Partial<ReadSettings> = {\n  sideBarWidth: '25%',\n  isSideBarPinned: false,\n};\n\nexport const DEFAULT_BOOK_FONT: BookFont = {\n  serifFont: 'Bitter',\n  sansSerifFont: 'Roboto',\n  monospaceFont: 'Consolas',\n  defaultFont: 'Serif',\n  defaultCJKFont: 'LXGW WenKai GB Screen',\n  defaultFontSize: 16,\n  minimumFontSize: 8,\n  fontWeight: 400,\n};\n\nexport const DEFAULT_BOOK_LAYOUT: BookLayout = {\n  marginTopPx: 44,\n  marginBottomPx: 44,\n  marginLeftPx: 16,\n  marginRightPx: 16,\n  compactMarginTopPx: 16,\n  compactMarginBottomPx: 16,\n  compactMarginLeftPx: 16,\n  compactMarginRightPx: 16,\n  gapPercent: 5,\n  scrolled: false,\n  disableClick: false,\n  fullscreenClickArea: false,\n  swapClickArea: false,\n  disableDoubleClick: false,\n  volumeKeysToFlip: false,\n  continuousScroll: false,\n  maxColumnCount: 2,\n  maxInlineSize: getDefaultMaxInlineSize(),\n  maxBlockSize: getDefaultMaxBlockSize(),\n  animated: false,\n  isEink: false,\n  writingMode: 'auto',\n  vertical: false,\n  rtl: false,\n  scrollingOverlap: 0,\n  allowScript: false,\n};\n\nexport const DEFAULT_BOOK_LANGUAGE: BookLanguage = {\n  replaceQuotationMarks: true,\n  convertChineseVariant: 'none',\n};\n\nexport const DEFAULT_BOOK_STYLE: BookStyle = {\n  zoomLevel: 100,\n  paragraphMargin: 0.6,\n  lineHeight: 1.4,\n  wordSpacing: 0,\n  letterSpacing: 0,\n  textIndent: 0,\n  fullJustification: true,\n  hyphenation: true,\n  invertImgColorInDark: false,\n  theme: 'light',\n  overrideFont: false,\n  overrideLayout: false,\n  overrideColor: false,\n  backgroundTextureId: 'none',\n  backgroundOpacity: 0.6,\n  backgroundSize: 'cover',\n  codeHighlighting: false,\n  codeLanguage: 'auto-detect',\n  userStylesheet: '',\n  userUIStylesheet: '',\n\n  zoomMode: 'fit-page',\n  spreadMode: 'auto',\n  keepCoverSpread: true,\n};\n\nexport const DEFAULT_MOBILE_VIEW_SETTINGS: Partial<ViewSettings> = {\n  fullJustification: false,\n  animated: true,\n  defaultFont: 'Sans-serif',\n  marginBottomPx: 16,\n  disableDoubleClick: true,\n  spreadMode: 'none',\n};\n\nexport const DEFAULT_CJK_VIEW_SETTINGS: Partial<ViewSettings> = {\n  fullJustification: true,\n  textIndent: 2,\n  paragraphMargin: 1,\n  lineHeight: 1.6,\n};\n\nexport const DEFAULT_FIXED_LAYOUT_VIEW_SETTINGS: Partial<ViewSettings> = {\n  overrideColor: false,\n};\n\nexport const DEFAULT_EINK_VIEW_SETTINGS: Partial<ViewSettings> = {\n  isEink: true,\n  animated: false,\n  volumeKeysToFlip: true,\n};\n\nexport const DEFAULT_VIEW_CONFIG: ViewConfig = {\n  sideBarTab: 'toc',\n  uiLanguage: '',\n  sortedTOC: false,\n\n  doubleBorder: false,\n  borderColor: 'red',\n\n  showHeader: true,\n  showFooter: true,\n  showBarsOnScroll: false,\n  showRemainingTime: false,\n  showRemainingPages: false,\n  showProgressInfo: true,\n  tapToToggleFooter: false,\n  showMarginsOnScroll: false,\n  progressStyle: 'fraction',\n  progressInfoMode: 'all',\n};\n\nexport const DEFAULT_TTS_CONFIG: TTSConfig = {\n  ttsRate: 1.3,\n  ttsVoice: '',\n  ttsLocation: '',\n  showTTSBar: false,\n  ttsHighlightOptions: { style: 'highlight', color: '#808080' },\n};\n\nexport const DEFAULT_TRANSLATOR_CONFIG: TranslatorConfig = {\n  translationEnabled: false,\n  translationProvider: 'deepl',\n  translateTargetLang: '',\n  showTranslateSource: true,\n  ttsReadAloudText: 'both',\n};\n\nexport const DEFAULT_NOTE_EXPORT_CONFIG: NoteExportConfig = {\n  includeTitle: true,\n  includeAuthor: true,\n  includeDate: true,\n  includeChapterTitles: true,\n  includeQuotes: true,\n  includeNotes: true,\n  includeTimestamp: false,\n  includeChapterSeparator: false,\n  noteSeparator: '\\n\\n',\n  useCustomTemplate: false,\n  customTemplate: '',\n};\n\nexport const DEFAULT_ANNOTATOR_CONFIG: AnnotatorConfig = {\n  enableAnnotationQuickActions: true,\n  annotationQuickAction: null,\n  copyToNotebook: false,\n  noteExportConfig: DEFAULT_NOTE_EXPORT_CONFIG,\n};\n\nexport const DEFAULT_SCREEN_CONFIG: ScreenConfig = {\n  screenOrientation: 'auto',\n};\n\nexport const DEFAULT_BOOK_SEARCH_CONFIG: BookSearchConfig = {\n  scope: 'book',\n  matchCase: false,\n  matchWholeWords: false,\n  matchDiacritics: false,\n};\n\nexport const SYSTEM_SETTINGS_VERSION = 1;\n\nexport const SERIF_FONTS = [\n  'Bitter',\n  'Literata',\n  'Merriweather',\n  'Roboto Slab',\n  'Vollkorn',\n  'PT Serif',\n  'Georgia',\n  'Times New Roman',\n];\n\nexport const NON_FREE_FONTS = ['Georgia', 'Times New Roman'];\n\nexport const CJK_SERIF_FONTS = [\n  _('LXGW WenKai GB Screen'),\n  _('LXGW WenKai TC'),\n  _('GuanKiapTsingKhai-T'),\n  _('Source Han Serif CN VF'),\n  _('Huiwen-mincho'),\n  _('KingHwa_OldSong'),\n];\n\nexport const CJK_SANS_SERIF_FONTS = ['Noto Sans SC', 'Noto Sans TC'];\n\nexport const SANS_SERIF_FONTS = ['Roboto', 'Noto Sans', 'Open Sans', 'PT Sans', 'Helvetica'];\n\nexport const MONOSPACE_FONTS = [\n  'Fira Code',\n  'Consolas',\n  'Courier New',\n  'Lucida Console',\n  'PT Mono',\n];\n\nexport const FALLBACK_FONTS = ['MiSans L3'];\n\nexport const WINDOWS_FONTS = [\n  'Arial',\n  'Arial Black',\n  'Bahnschrift',\n  'Calibri',\n  'Cambria',\n  'Cambria Math',\n  'Candara',\n  'Comic Sans MS',\n  'Consolas',\n  'Constantia',\n  'Corbel',\n  'Courier New',\n  'Ebrima',\n  'FangSong',\n  'Franklin Gothic Medium',\n  'Gabriola',\n  'Gadugi',\n  'Georgia',\n  'Heiti',\n  'HoloLens MDL2 Assets',\n  'Impact',\n  'Ink Free',\n  'Javanese Text',\n  'KaiTi',\n  'Leelawadee UI',\n  'Lucida Console',\n  'Lucida Sans Unicode',\n  'LXGW WenKai GB Screen',\n  'LXGW WenKai TC',\n  'Malgun Gothic',\n  'Marlett',\n  'Microsoft Himalaya',\n  'Microsoft JhengHei',\n  'Microsoft New Tai Lue',\n  'Microsoft PhagsPa',\n  'Microsoft Sans Serif',\n  'Microsoft Tai Le',\n  'Microsoft YaHei',\n  'Microsoft Yi Baiti',\n  'MingLiU',\n  'MingLiU-ExtB',\n  'Mongolian Baiti',\n  'MS Gothic',\n  'MS Mincho',\n  'MV Boli',\n  'Myanmar Text',\n  'Nirmala UI',\n  'Noto Serif JP',\n  'NSimSun',\n  'Palatino Linotype',\n  'PMingLiU',\n  'Segoe MDL2 Assets',\n  'Segoe Print',\n  'Segoe Script',\n  'Segoe UI',\n  'Segoe UI Historic',\n  'Segoe UI Emoji',\n  'Segoe UI Symbol',\n  'SimHei',\n  'SimSun',\n  'SimSun-ExtB',\n  'Sitka',\n  'Sylfaen',\n  'Tahoma',\n  'Times New Roman',\n  'Trebuchet MS',\n  'Verdana',\n  'XiHeiti',\n  'Yu Gothic',\n  'Yu Mincho',\n];\n\nexport const MACOS_FONTS = [\n  'American Typewriter',\n  'Andale Mono',\n  'Arial',\n  'Arial Black',\n  'Arial Narrow',\n  'Arial Rounded MT Bold',\n  'Arial Unicode MS',\n  'Avenir',\n  'Avenir Next',\n  'Avenir Next Condensed',\n  'Baskerville',\n  'BiauKai',\n  'Big Caslon',\n  'Bodoni 72',\n  'Bodoni 72 Oldstyle',\n  'Bodoni 72 Smallcaps',\n  'Bradley Hand',\n  'Brush Script MT',\n  'Chalkboard',\n  'Chalkboard SE',\n  'Chalkduster',\n  'Charter',\n  'Cochin',\n  'Comic Sans MS',\n  'Copperplate',\n  'Courier',\n  'Courier New',\n  'Didot',\n  'DIN Alternate',\n  'DIN Condensed',\n  'FangSong',\n  'Futura',\n  'Geneva',\n  'Georgia',\n  'Gill Sans',\n  'Heiti SC',\n  'Heiti TC',\n  'Helvetica',\n  'Helvetica Neue',\n  'Herculanum',\n  'Hiragino Sans',\n  'Hiragino Mincho',\n  'Hoefler Text',\n  'Impact',\n  'Kaiti SC',\n  'Kaiti TC',\n  'Kozuka Gothic Pro',\n  'Kozuka Mincho Pro',\n  'Lucida Grande',\n  'Luminari',\n  'LXGW WenKai GB Screen',\n  'LXGW WenKai TC',\n  'Marker Felt',\n  'Menlo',\n  'Microsoft Sans Serif',\n  'Monaco',\n  'Noteworthy',\n  'Noto Serif JP',\n  'Optima',\n  'Palatino',\n  'Papyrus',\n  'PingFang HK',\n  'PingFang SC',\n  'PingFang TC',\n  'Phosphate',\n  'Rockwell',\n  'Savoye LET',\n  'SignPainter',\n  'Skia',\n  'Snell Roundhand',\n  'Songti SC',\n  'Songti TC',\n  'STFangsong',\n  'STKaiti',\n  'STSong',\n  'STXihei',\n  'Tahoma',\n  'Times',\n  'Times New Roman',\n  'Trattatello',\n  'Trebuchet MS',\n  'Verdana',\n  'XiHeiti',\n  'Yu Mincho',\n  'Zapfino',\n];\n\nexport const LINUX_FONTS = [\n  'Arial',\n  'Cantarell',\n  'Comic Sans MS',\n  'Courier New',\n  'DejaVu Sans',\n  'DejaVu Sans Mono',\n  'DejaVu Serif',\n  'Droid Sans',\n  'Droid Sans Mono',\n  'FangSong',\n  'FreeMono',\n  'FreeSans',\n  'FreeSerif',\n  'Georgia',\n  'Heiti',\n  'Impact',\n  'Kaiti',\n  'Liberation Mono',\n  'Liberation Sans',\n  'Liberation Serif',\n  'LXGW WenKai GB Screen',\n  'LXGW WenKai TC',\n  'Noto Mono',\n  'Noto Sans',\n  'Noto Sans JP',\n  'Noto Sans CJK SC',\n  'Noto Sans CJK TC',\n  'Noto Serif',\n  'Noto Serif JP',\n  'Noto Serif CJK SC',\n  'Noto Serif CJK TC',\n  'Open Sans',\n  'Poppins',\n  'Sazanami Gothic',\n  'Sazanami Mincho',\n  'Source Han Sans',\n  'Source Han Serif',\n  'Times New Roman',\n  'Ubuntu',\n  'Ubuntu Mono',\n  'WenQuanYi Micro Hei',\n  'WenQuanYi Zen Hei',\n  'XiHeiti',\n];\n\nexport const IOS_FONTS = [\n  'Avenir',\n  'Avenir Next',\n  'Courier',\n  'Courier New',\n  'FangSong',\n  'Georgia',\n  'Heiti',\n  'Helvetica',\n  'Helvetica Neue',\n  'Hiragino Mincho',\n  'Hiragino Sans',\n  'Kaiti',\n  'LXGW WenKai GB Screen',\n  'LXGW WenKai TC',\n  'Palatino',\n  'PingFang SC',\n  'PingFang TC',\n  'San Francisco',\n  'SF Pro Display',\n  'SF Pro Rounded',\n  'SF Pro Text',\n  'Songti',\n  'Times New Roman',\n  'Verdana',\n  'XiHeiti',\n];\n\nexport const ANDROID_FONTS = [\n  'Arial',\n  'Droid Sans',\n  'Droid Serif',\n  'FangSong',\n  'FZLanTingHei',\n  'Georgia',\n  'Heiti',\n  'Kaiti',\n  'LXGW WenKai GB Screen',\n  'LXGW WenKai TC',\n  'Noto Sans',\n  'Noto Sans CJK',\n  'Noto Sans JP',\n  'Noto Serif',\n  'Noto Serif CJK',\n  'Noto Serif JP',\n  'PingFang SC',\n  'Roboto',\n  'Source Han Sans',\n  'Source Han Serif',\n  'STHeiti',\n  'STSong',\n  'Tahoma',\n  'Verdana',\n  'XiHeiti',\n];\n\nexport const CJK_EXCLUDE_PATTENS = new RegExp(\n  ['AlBayan', 'STIX', 'Kailasa', 'ITCTT', 'Luminari', 'Myanmar'].join('|'),\n  'i',\n);\nexport const CJK_FONTS_PATTENS = new RegExp(\n  [\n    'CJK',\n    'TC$',\n    'SC$',\n    'HK',\n    'JP',\n    'TW',\n    'Sim',\n    'Kai',\n    'Hei',\n    'Yan',\n    'Min',\n    'Khai',\n    'Yuan',\n    'Song',\n    'Ming',\n    'FZ',\n    'Huiwen',\n    'KingHwa',\n    'FangZheng',\n    'WenQuanYi',\n    'PingFang',\n    'Hiragino',\n    'Meiryo',\n    'Source\\\\s?Han',\n    'Yu\\\\s?Gothic',\n    'Yu\\\\s?Mincho',\n    'Mincho',\n    'Nanum',\n    'Malgun',\n    'Gulim',\n    'Dotum',\n    'Batang',\n    'Gungsuh',\n    'OPPO sans',\n    'MiSans',\n    'Fallback',\n  ].join('|'),\n  'i',\n);\n\nexport const BOOK_IDS_SEPARATOR = '+';\n\nexport const DOWNLOAD_READEST_URL = 'https://readest.com?utm_source=readest_web';\n\n// 支持通过环境变量自定义 API 地址（用于本地部署或自托管）\nexport const READEST_WEB_BASE_URL = process.env['NEXT_PUBLIC_WEB_BASE_URL'] || 'https://web.readest.com';\nexport const READEST_NODE_BASE_URL = process.env['NEXT_PUBLIC_NODE_BASE_URL'] || 'https://node.readest.com';\n\nconst LATEST_DOWNLOAD_BASE_URL = 'https://download.readest.com/releases';\n\nexport const READEST_UPDATER_FILE = `${LATEST_DOWNLOAD_BASE_URL}/latest.json`;\n\nexport const READEST_CHANGELOG_FILE = `${LATEST_DOWNLOAD_BASE_URL}/release-notes.json`;\n\n// 支持通过环境变量自定义存储 URL\nexport const READEST_PUBLIC_STORAGE_BASE_URL = process.env['NEXT_PUBLIC_STORAGE_BASE_URL'] || 'https://storage.readest.com';\n\nexport const READEST_OPDS_USER_AGENT = 'Readest/1.0 (OPDS Browser)';\n\nexport const SYNC_PROGRESS_INTERVAL_SEC = 3;\nexport const SYNC_NOTES_INTERVAL_SEC = 5;\nexport const SYNC_BOOKS_INTERVAL_SEC = 5;\nexport const CHECK_UPDATE_INTERVAL_SEC = 24 * 60 * 60;\n\nexport const MAX_ZOOM_LEVEL = 500;\nexport const MIN_ZOOM_LEVEL = 50;\nexport const ZOOM_STEP = 10;\n\nexport const DEFAULT_STORAGE_QUOTA: UserStorageQuota = {\n  free: 500 * 1024 * 1024,\n  plus: 5 * 1024 * 1024 * 1024,\n  pro: 20 * 1024 * 1024 * 1024,\n  purchase: 0,\n};\n\nexport const DEFAULT_DAILY_TRANSLATION_QUOTA: UserDailyTranslationQuota = {\n  free: 10 * 1024,\n  plus: 100 * 1024,\n  pro: 500 * 1024,\n  purchase: 0,\n};\n\nexport const DOUBLE_CLICK_INTERVAL_THRESHOLD_MS = 250;\nexport const DISABLE_DOUBLE_CLICK_ON_MOBILE = true;\nexport const LONG_HOLD_THRESHOLD = 500;\n\nexport const CUSTOM_THEME_TEMPLATES = [\n  {\n    light: {\n      fg: '#2b2b2b',\n      bg: '#f3f3f3',\n      primary: '#3c5a72',\n    },\n    dark: {\n      fg: '#d0d0d0',\n      bg: '#1a1c1f',\n      primary: '#486e8a',\n    },\n  },\n  {\n    light: {\n      fg: '#3f2f3c',\n      bg: '#f5ecf8',\n      primary: '#7b5291',\n    },\n    dark: {\n      fg: '#d6cadd',\n      bg: '#3a2c3d',\n      primary: '#bda0cc',\n    },\n  },\n  {\n    light: {\n      fg: '#2b2b2b',\n      bg: '#defcd9',\n      primary: '#00796b',\n    },\n    dark: {\n      fg: '#c8e6c9',\n      bg: '#273c33',\n      primary: '#26a69a',\n    },\n  },\n];\n\nexport const MIGHT_BE_RTL_LANGS = [\n  'zh',\n  'ja',\n  'ko',\n  'ar',\n  'he',\n  'fa',\n  'ur',\n  'dv',\n  'ps',\n  'sd',\n  'yi',\n  '',\n];\n\nexport const TRANSLATED_LANGS = {\n  en: 'English',\n  fr: 'Français',\n  de: 'Deutsch',\n  nl: 'Nederlands',\n  it: 'Italiano',\n  ja: '日本語',\n  ko: '한국어',\n  es: 'Español',\n  pt: 'Português',\n  ru: 'Русский',\n  ar: 'العربية',\n  fa: 'فارسی',\n  el: 'Ελληνικά',\n  uk: 'Українська',\n  pl: 'Polski',\n  tr: 'Türkçe',\n  hi: 'हिन्दी',\n  id: 'Indonesia',\n  vi: 'Tiếng Việt',\n  th: 'ภาษาไทย',\n  ms: 'Melayu',\n  bo: 'བོད་སྐད་',\n  bn: 'বাংলা',\n  ta: 'தமிழ்',\n  si: 'සිංහල',\n  'zh-CN': '简体中文',\n  'zh-TW': '正體中文',\n};\n\nexport const TRANSLATOR_LANGS: Record<string, string> = {\n  ...TRANSLATED_LANGS,\n  nb: 'Bokmål',\n  sv: 'Svenska',\n  fi: 'Suomi',\n  da: 'Dansk',\n  cs: 'Čeština',\n  hu: 'Magyar',\n  ro: 'Română',\n  bg: 'Български',\n  hr: 'Hrvatski',\n  lt: 'Lietuvių',\n  sl: 'Slovenščina',\n  sk: 'Slovenčina',\n  fa: 'فارسی',\n};\n\nexport const SUPPORTED_LANGS: Record<string, string> = { ...TRANSLATED_LANGS, zh: '中文' };\n\nexport const SUPPORTED_LANGNAMES: Record<string, string> = Object.fromEntries(\n  Object.entries(SUPPORTED_LANGS).map(([code, name]) => [name, code]),\n);\n","import { LocaleWithTextInfo } from '@/types/misc';\nimport { franc } from 'franc-min';\nimport { iso6392 } from 'iso-639-2';\nimport { iso6393To1 } from 'iso-639-3';\n\nexport const isCJKStr = (str: string) => {\n  return /[\\p{Script=Han}\\p{Script=Hiragana}\\p{Script=Katakana}\\p{Script=Hangul}]/u.test(str ?? '');\n};\n\nexport const isCJKLang = (lang: string | null | undefined): boolean => {\n  if (!lang) return false;\n  const normalizedLang = normalizedLangCode(lang);\n  return ['zh', 'ja', 'ko', 'zho', 'jpn', 'kor'].includes(normalizedLang);\n};\n\nconst ZH_SCRIPTS_MAPPING: Record<string, string> = {\n  zh: 'zh-Hans',\n  'zh-cn': 'zh-Hans',\n  'zh-hk': 'zh-Hant',\n  'zh-tw': 'zh-Hant',\n  'zh-mo': 'zh-Hant',\n  'zh-hans': 'zh-Hans',\n  'zh-hant': 'zh-Hant',\n};\n\nexport const normalizeToFullLang = (langCode: string): string => {\n  try {\n    const locale = new Intl.Locale(langCode.toLowerCase());\n    const maximized = locale.maximize();\n\n    if (maximized.language === 'zh') {\n      return maximized.script === 'Hant' ? 'zh-Hant' : 'zh-Hans';\n    }\n\n    return maximized.region ? `${maximized.language}-${maximized.region}` : langCode;\n  } catch {\n    return ZH_SCRIPTS_MAPPING[langCode.toLowerCase()] || langCode;\n  }\n};\n\nexport const normalizeToShortLang = (langCode: string): string => {\n  const lang = langCode.toLowerCase();\n  if (lang.startsWith('zh')) {\n    return ZH_SCRIPTS_MAPPING[lang] || 'zh-Hans';\n  }\n  return lang.split('-')[0]!;\n};\n\nexport const normalizedLangCode = (lang: string | null | undefined): string => {\n  if (!lang) return '';\n  return lang.split('-')[0]!.toLowerCase();\n};\n\nexport const isSameLang = (lang1?: string | null, lang2?: string | null): boolean => {\n  if (!lang1 || !lang2) return false;\n  const normalizedLang1 = normalizedLangCode(lang1);\n  const normalizedLang2 = normalizedLangCode(lang2);\n  return normalizedLang1 === normalizedLang2;\n};\n\nexport const isValidLang = (lang?: string) => {\n  if (!lang) return false;\n  if (typeof lang !== 'string') return false;\n  if (['und', 'mul', 'mis', 'zxx'].includes(lang)) return false;\n  const code = normalizedLangCode(lang);\n  return iso6392.some((l) => l.iso6391 === code || l.iso6392B === code);\n};\n\nexport const code6392to6391 = (code: string): string => {\n  const lang = iso6392.find((l) => l.iso6392B === code);\n  return lang?.iso6391 || '';\n};\n\nconst commonIndivToMacro: Record<string, string> = {\n  cmn: 'zho',\n  arb: 'ara',\n  arz: 'ara',\n  ind: 'msa',\n  zsm: 'msa',\n  nob: 'nor',\n  nno: 'nor',\n  pes: 'fas',\n  quy: 'que',\n};\n\nexport const code6393to6391 = (code: string): string => {\n  const macro = commonIndivToMacro[code] || code;\n  return iso6393To1[macro] || '';\n};\n\nexport const getLanguageName = (code: string): string => {\n  const lang = normalizedLangCode(code);\n  const language = iso6392.find((l) => l.iso6391 === lang || l.iso6392B === lang);\n  return language ? language.name : lang;\n};\n\nexport const inferLangFromScript = (text: string, lang: string): string => {\n  if (!lang || lang === 'en') {\n    if (/[\\p{Script=Hangul}]/u.test(text)) {\n      return 'ko';\n    } else if (/[\\p{Script=Hiragana}\\p{Script=Katakana}]/u.test(text)) {\n      return 'ja';\n    } else if (/[\\p{Script=Han}]/u.test(text)) {\n      return 'zh';\n    }\n  }\n  return lang;\n};\n\nexport const detectLanguage = (content: string): string => {\n  try {\n    const iso6393Lang = franc(content.substring(0, 1000));\n    const iso6391Lang = code6393to6391(iso6393Lang) || 'en';\n    return iso6391Lang;\n  } catch {\n    console.warn('Language detection failed, defaulting to en.');\n    return 'en';\n  }\n};\n\nexport const getLanguageInfo = (lang: string) => {\n  if (!lang) return {};\n  try {\n    const canonical = Intl.getCanonicalLocales(lang)[0]!;\n    const locale = new Intl.Locale(canonical) as LocaleWithTextInfo;\n    const isCJK = ['zh', 'ja', 'kr'].includes(locale.language);\n    const direction = (locale.getTextInfo?.() ?? locale.textInfo)?.direction;\n    return { canonical, locale, isCJK, direction };\n  } catch (e) {\n    console.warn(e);\n    return {};\n  }\n};\n","/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise, SuppressedError, Symbol, Iterator */\r\n\r\n\r\nfunction __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nfunction __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\ntypeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\r\n    var e = new Error(message);\r\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\r\n};\n\nexport { __classPrivateFieldGet, __classPrivateFieldSet };\n","import { __classPrivateFieldGet, __classPrivateFieldSet } from './external/tslib/tslib.es6.js';\n\n// Copyright 2019-2024 Tauri Programme within The Commons Conservancy\n// SPDX-License-Identifier: Apache-2.0\n// SPDX-License-Identifier: MIT\nvar _Channel_onmessage, _Channel_nextMessageIndex, _Channel_pendingMessages, _Channel_messageEndIndex, _Resource_rid;\n/**\n * Invoke your custom commands.\n *\n * This package is also accessible with `window.__TAURI__.core` when [`app.withGlobalTauri`](https://v2.tauri.app/reference/config/#withglobaltauri) in `tauri.conf.json` is set to `true`.\n * @module\n */\n/**\n * A key to be used to implement a special function\n * on your types that define how your type should be serialized\n * when passing across the IPC.\n * @example\n * Given a type in Rust that looks like this\n * ```rs\n * #[derive(serde::Serialize, serde::Deserialize)\n * enum UserId {\n *   String(String),\n *   Number(u32),\n * }\n * ```\n * `UserId::String(\"id\")` would be serialized into `{ String: \"id\" }`\n * and so we need to pass the same structure back to Rust\n * ```ts\n * import { SERIALIZE_TO_IPC_FN } from \"@tauri-apps/api/core\"\n *\n * class UserIdString {\n *   id\n *   constructor(id) {\n *     this.id = id\n *   }\n *\n *   [SERIALIZE_TO_IPC_FN]() {\n *     return { String: this.id }\n *   }\n * }\n *\n * class UserIdNumber {\n *   id\n *   constructor(id) {\n *     this.id = id\n *   }\n *\n *   [SERIALIZE_TO_IPC_FN]() {\n *     return { Number: this.id }\n *   }\n * }\n *\n * type UserId = UserIdString | UserIdNumber\n * ```\n *\n */\n// if this value changes, make sure to update it in:\n// 1. ipc.js\n// 2. process-ipc-message-fn.js\nconst SERIALIZE_TO_IPC_FN = '__TAURI_TO_IPC_KEY__';\n/**\n * Stores the callback in a known location, and returns an identifier that can be passed to the backend.\n * The backend uses the identifier to `eval()` the callback.\n *\n * @return An unique identifier associated with the callback function.\n *\n * @since 1.0.0\n */\nfunction transformCallback(\n// TODO: Make this not optional in v3\ncallback, once = false) {\n    return window.__TAURI_INTERNALS__.transformCallback(callback, once);\n}\nclass Channel {\n    constructor(onmessage) {\n        _Channel_onmessage.set(this, void 0);\n        // the index is used as a mechanism to preserve message order\n        _Channel_nextMessageIndex.set(this, 0);\n        _Channel_pendingMessages.set(this, []);\n        _Channel_messageEndIndex.set(this, void 0);\n        __classPrivateFieldSet(this, _Channel_onmessage, onmessage || (() => { }), \"f\");\n        this.id = transformCallback((rawMessage) => {\n            const index = rawMessage.index;\n            if ('end' in rawMessage) {\n                if (index == __classPrivateFieldGet(this, _Channel_nextMessageIndex, \"f\")) {\n                    this.cleanupCallback();\n                }\n                else {\n                    __classPrivateFieldSet(this, _Channel_messageEndIndex, index, \"f\");\n                }\n                return;\n            }\n            const message = rawMessage.message;\n            // Process the message if we're at the right order\n            if (index == __classPrivateFieldGet(this, _Channel_nextMessageIndex, \"f\")) {\n                __classPrivateFieldGet(this, _Channel_onmessage, \"f\").call(this, message);\n                __classPrivateFieldSet(this, _Channel_nextMessageIndex, __classPrivateFieldGet(this, _Channel_nextMessageIndex, \"f\") + 1, \"f\");\n                // process pending messages\n                while (__classPrivateFieldGet(this, _Channel_nextMessageIndex, \"f\") in __classPrivateFieldGet(this, _Channel_pendingMessages, \"f\")) {\n                    const message = __classPrivateFieldGet(this, _Channel_pendingMessages, \"f\")[__classPrivateFieldGet(this, _Channel_nextMessageIndex, \"f\")];\n                    __classPrivateFieldGet(this, _Channel_onmessage, \"f\").call(this, message);\n                    // eslint-disable-next-line @typescript-eslint/no-array-delete\n                    delete __classPrivateFieldGet(this, _Channel_pendingMessages, \"f\")[__classPrivateFieldGet(this, _Channel_nextMessageIndex, \"f\")];\n                    __classPrivateFieldSet(this, _Channel_nextMessageIndex, __classPrivateFieldGet(this, _Channel_nextMessageIndex, \"f\") + 1, \"f\");\n                }\n                if (__classPrivateFieldGet(this, _Channel_nextMessageIndex, \"f\") === __classPrivateFieldGet(this, _Channel_messageEndIndex, \"f\")) {\n                    this.cleanupCallback();\n                }\n            }\n            // Queue the message if we're not\n            else {\n                // eslint-disable-next-line security/detect-object-injection\n                __classPrivateFieldGet(this, _Channel_pendingMessages, \"f\")[index] = message;\n            }\n        });\n    }\n    cleanupCallback() {\n        window.__TAURI_INTERNALS__.unregisterCallback(this.id);\n    }\n    set onmessage(handler) {\n        __classPrivateFieldSet(this, _Channel_onmessage, handler, \"f\");\n    }\n    get onmessage() {\n        return __classPrivateFieldGet(this, _Channel_onmessage, \"f\");\n    }\n    [(_Channel_onmessage = new WeakMap(), _Channel_nextMessageIndex = new WeakMap(), _Channel_pendingMessages = new WeakMap(), _Channel_messageEndIndex = new WeakMap(), SERIALIZE_TO_IPC_FN)]() {\n        return `__CHANNEL__:${this.id}`;\n    }\n    toJSON() {\n        // eslint-disable-next-line security/detect-object-injection\n        return this[SERIALIZE_TO_IPC_FN]();\n    }\n}\nclass PluginListener {\n    constructor(plugin, event, channelId) {\n        this.plugin = plugin;\n        this.event = event;\n        this.channelId = channelId;\n    }\n    async unregister() {\n        return invoke(`plugin:${this.plugin}|remove_listener`, {\n            event: this.event,\n            channelId: this.channelId\n        });\n    }\n}\n/**\n * Adds a listener to a plugin event.\n *\n * @returns The listener object to stop listening to the events.\n *\n * @since 2.0.0\n */\nasync function addPluginListener(plugin, event, cb) {\n    const handler = new Channel(cb);\n    try {\n        await invoke(`plugin:${plugin}|register_listener`, {\n            event,\n            handler\n        });\n        return new PluginListener(plugin, event, handler.id);\n    }\n    catch {\n        // TODO(v3): remove this fallback\n        // note: we must try with camelCase here for backwards compatibility\n        await invoke(`plugin:${plugin}|registerListener`, { event, handler });\n        return new PluginListener(plugin, event, handler.id);\n    }\n}\n/**\n * Get permission state for a plugin.\n *\n * This should be used by plugin authors to wrap their actual implementation.\n */\nasync function checkPermissions(plugin) {\n    return invoke(`plugin:${plugin}|check_permissions`);\n}\n/**\n * Request permissions.\n *\n * This should be used by plugin authors to wrap their actual implementation.\n */\nasync function requestPermissions(plugin) {\n    return invoke(`plugin:${plugin}|request_permissions`);\n}\n/**\n * Sends a message to the backend.\n * @example\n * ```typescript\n * import { invoke } from '@tauri-apps/api/core';\n * await invoke('login', { user: 'tauri', password: 'poiwe3h4r5ip3yrhtew9ty' });\n * ```\n *\n * @param cmd The command name.\n * @param args The optional arguments to pass to the command.\n * @param options The request options.\n * @return A promise resolving or rejecting to the backend response.\n *\n * @since 1.0.0\n */\nasync function invoke(cmd, args = {}, options) {\n    return window.__TAURI_INTERNALS__.invoke(cmd, args, options);\n}\n/**\n * Convert a device file path to an URL that can be loaded by the webview.\n * Note that `asset:` and `http://asset.localhost` must be added to [`app.security.csp`](https://v2.tauri.app/reference/config/#csp-1) in `tauri.conf.json`.\n * Example CSP value: `\"csp\": \"default-src 'self' ipc: http://ipc.localhost; img-src 'self' asset: http://asset.localhost\"` to use the asset protocol on image sources.\n *\n * Additionally, `\"enable\" : \"true\"` must be added to [`app.security.assetProtocol`](https://v2.tauri.app/reference/config/#assetprotocolconfig)\n * in `tauri.conf.json` and its access scope must be defined on the `scope` array on the same `assetProtocol` object.\n *\n * @param  filePath The file path.\n * @param  protocol The protocol to use. Defaults to `asset`. You only need to set this when using a custom protocol.\n * @example\n * ```typescript\n * import { appDataDir, join } from '@tauri-apps/api/path';\n * import { convertFileSrc } from '@tauri-apps/api/core';\n * const appDataDirPath = await appDataDir();\n * const filePath = await join(appDataDirPath, 'assets/video.mp4');\n * const assetUrl = convertFileSrc(filePath);\n *\n * const video = document.getElementById('my-video');\n * const source = document.createElement('source');\n * source.type = 'video/mp4';\n * source.src = assetUrl;\n * video.appendChild(source);\n * video.load();\n * ```\n *\n * @return the URL that can be used as source on the webview.\n *\n * @since 1.0.0\n */\nfunction convertFileSrc(filePath, protocol = 'asset') {\n    return window.__TAURI_INTERNALS__.convertFileSrc(filePath, protocol);\n}\n/**\n * A rust-backed resource stored through `tauri::Manager::resources_table` API.\n *\n * The resource lives in the main process and does not exist\n * in the Javascript world, and thus will not be cleaned up automatically\n * except on application exit. If you want to clean it up early, call {@linkcode Resource.close}\n *\n * @example\n * ```typescript\n * import { Resource, invoke } from '@tauri-apps/api/core';\n * export class DatabaseHandle extends Resource {\n *   static async open(path: string): Promise<DatabaseHandle> {\n *     const rid: number = await invoke('open_db', { path });\n *     return new DatabaseHandle(rid);\n *   }\n *\n *   async execute(sql: string): Promise<void> {\n *     await invoke('execute_sql', { rid: this.rid, sql });\n *   }\n * }\n * ```\n */\nclass Resource {\n    get rid() {\n        return __classPrivateFieldGet(this, _Resource_rid, \"f\");\n    }\n    constructor(rid) {\n        _Resource_rid.set(this, void 0);\n        __classPrivateFieldSet(this, _Resource_rid, rid, \"f\");\n    }\n    /**\n     * Destroys and cleans up this resource from memory.\n     * **You should not call any method on this object anymore and should drop any reference to it.**\n     */\n    async close() {\n        return invoke('plugin:resources|close', {\n            rid: this.rid\n        });\n    }\n}\n_Resource_rid = new WeakMap();\nfunction isTauri() {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/no-unsafe-member-access\n    return !!(globalThis || window).isTauri;\n}\n\nexport { Channel, PluginListener, Resource, SERIALIZE_TO_IPC_FN, addPluginListener, checkPermissions, convertFileSrc, invoke, isTauri, requestPermissions, transformCallback };\n","import { invoke } from '@tauri-apps/api/core';\n\n// Copyright 2019-2023 Tauri Programme within The Commons Conservancy\n// SPDX-License-Identifier: Apache-2.0\n// SPDX-License-Identifier: MIT\n/**\n * Make HTTP requests with the Rust backend.\n *\n * ## Security\n *\n * This API has a scope configuration that forces you to restrict the URLs that can be accessed using glob patterns.\n *\n * For instance, this scope configuration only allows making HTTP requests to all subdomains for `tauri.app` except for `https://private.tauri.app`:\n * ```json\n * {\n *   \"permissions\": [\n *     {\n *       \"identifier\": \"http:default\",\n *       \"allow\": [{ \"url\": \"https://*.tauri.app\" }],\n *       \"deny\": [{ \"url\": \"https://private.tauri.app\" }]\n *     }\n *   ]\n * }\n * ```\n * Trying to execute any API with a URL not configured on the scope results in a promise rejection due to denied access.\n *\n * @module\n */\nconst ERROR_REQUEST_CANCELLED = 'Request cancelled';\n/**\n * Fetch a resource from the network. It returns a `Promise` that resolves to the\n * `Response` to that `Request`, whether it is successful or not.\n *\n * @example\n * ```typescript\n * const response = await fetch(\"http://my.json.host/data.json\");\n * console.log(response.status);  // e.g. 200\n * console.log(response.statusText); // e.g. \"OK\"\n * const jsonData = await response.json();\n * ```\n *\n * @since 2.0.0\n */\nasync function fetch(input, init) {\n    // Optimistically check for abort signal and avoid doing any work\n    const signal = init?.signal;\n    if (signal?.aborted) {\n        throw new Error(ERROR_REQUEST_CANCELLED);\n    }\n    const maxRedirections = init?.maxRedirections;\n    const connectTimeout = init?.connectTimeout;\n    const proxy = init?.proxy;\n    const danger = init?.danger;\n    // Remove these fields before creating the request\n    if (init) {\n        delete init.maxRedirections;\n        delete init.connectTimeout;\n        delete init.proxy;\n        delete init.danger;\n    }\n    const headers = init?.headers\n        ? init.headers instanceof Headers\n            ? init.headers\n            : new Headers(init.headers)\n        : new Headers();\n    const req = new Request(input, init);\n    const buffer = await req.arrayBuffer();\n    const data = buffer.byteLength !== 0 ? Array.from(new Uint8Array(buffer)) : null;\n    // append new headers created by the browser `Request` implementation,\n    // if not already declared by the caller of this function\n    for (const [key, value] of req.headers) {\n        if (!headers.get(key)) {\n            headers.set(key, value);\n        }\n    }\n    const headersArray = headers instanceof Headers\n        ? Array.from(headers.entries())\n        : Array.isArray(headers)\n            ? headers\n            : Object.entries(headers);\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n    const mappedHeaders = headersArray.map(([name, val]) => [\n        name,\n        // we need to ensure we have all header values as strings\n        // eslint-disable-next-line\n        typeof val === 'string' ? val : val.toString()\n    ]);\n    // Optimistically check for abort signal and avoid doing any work on the Rust side\n    if (signal?.aborted) {\n        throw new Error(ERROR_REQUEST_CANCELLED);\n    }\n    const rid = await invoke('plugin:http|fetch', {\n        clientConfig: {\n            method: req.method,\n            url: req.url,\n            headers: mappedHeaders,\n            data,\n            maxRedirections,\n            connectTimeout,\n            proxy,\n            danger\n        }\n    });\n    const abort = () => invoke('plugin:http|fetch_cancel', { rid });\n    // Optimistically check for abort signal\n    // and avoid doing any work after doing intial work on the Rust side\n    if (signal?.aborted) {\n        // we don't care about the result of this proimse\n        // eslint-disable-next-line @typescript-eslint/no-floating-promises\n        abort();\n        throw new Error(ERROR_REQUEST_CANCELLED);\n    }\n    signal?.addEventListener('abort', () => void abort());\n    const { status, statusText, url, headers: responseHeaders, rid: responseRid } = await invoke('plugin:http|fetch_send', {\n        rid\n    });\n    const dropBody = () => {\n        return invoke('plugin:http|fetch_cancel_body', { rid: responseRid });\n    };\n    const readChunk = async (controller) => {\n        let data;\n        try {\n            data = await invoke('plugin:http|fetch_read_body', {\n                rid: responseRid\n            });\n        }\n        catch (e) {\n            // close the stream if an error occurs\n            // and drop the body on Rust side\n            controller.error(e);\n            void dropBody();\n            return;\n        }\n        const dataUint8 = new Uint8Array(data);\n        const lastByte = dataUint8[dataUint8.byteLength - 1];\n        const actualData = dataUint8.slice(0, dataUint8.byteLength - 1);\n        // close when the signal to close (last byte is 1) is sent from the IPC.\n        if (lastByte === 1) {\n            controller.close();\n            return;\n        }\n        controller.enqueue(actualData);\n    };\n    // no body for 101, 103, 204, 205 and 304\n    // see https://fetch.spec.whatwg.org/#null-body-status\n    const body = [101, 103, 204, 205, 304].includes(status)\n        ? null\n        : new ReadableStream({\n            start: (controller) => {\n                // listen for abort events to cancel reading\n                signal?.addEventListener('abort', () => {\n                    controller.error(ERROR_REQUEST_CANCELLED);\n                    void dropBody();\n                });\n            },\n            pull: (controller) => readChunk(controller)\n        });\n    const res = new Response(body, {\n        status,\n        statusText\n    });\n    // Set `Response` properties that are ignored by the\n    // constructor, like url and some headers\n    //\n    // Since url and headers are read only properties\n    // this is the only way to set them.\n    Object.defineProperty(res, 'url', { value: url });\n    Object.defineProperty(res, 'headers', {\n        value: new Headers(responseHeaders)\n    });\n    return res;\n}\n\nexport { fetch };\n"],"names":[],"mappings":"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","ignoreList":[4,5,6]}
module.exports=[696351,e=>e.a(async(t,r)=>{try{let t=await e.y("uuid");e.n(t),r()}catch(e){r(e)}},!0),747153,e=>{"use strict";let t,r=(e,t)=>[-1,...t,e.length].reduce(({xs:t,a:r},n)=>({xs:t?.concat([e.slice(r+1,n)])??[],a:n}),{}).xs,n=/\d/,l=/^epubcfi\((.*)\)$/,s=e=>e.replace(/[\^[\](),;=]/g,"^$&"),a=e=>l.test(e)?e:`epubcfi(${e})`,i=(t=(...e)=>e.join("!"),(...e)=>`epubcfi(${t(...e.map(e=>e.match(l)?.[1]??e))})`),f=(e,t)=>{let r;return r=([e])=>e===t,e.map((e,t,n)=>r(e,t,n)?t:null).filter(e=>null!=e)},o=e=>{let t,r=[];for(let[n,l]of e){if("/"===n)r.push({index:l});else{let e=r[r.length-1];if(":"===n)e.offset=l;else if("~"===n)e.temporal=l;else if("@"===n)e.spatial=(e.spatial??[]).concat(l);else if(";s"===n)e.side=l;else if("["===n)if("/"===t&&l)e.id=l;else{e.text=(e.text??[]).concat(l);continue}}t=n}return r},u=e=>r(e,f(e,"!")).map(o),c=e=>{let t=(e=>{let t=[],r,l,s="",a=e=>(t.push(e),r=null,s=""),i=e=>(s+=e,l=!1);for(let t of Array.from(e.trim()).concat("")){if("^"===t&&!l){l=!0;continue}if("!"===r)a(["!"]);else if(","===r)a([","]);else if("/"===r||":"===r)if(n.test(t)){i(t);continue}else a([r,parseInt(s)]);else if("~"===r)if(n.test(t)||"."===t){i(t);continue}else a(["~",parseFloat(s)]);else if("@"===r){if(":"===t){a(["@",parseFloat(s)]),r="@";continue}if(n.test(t)||"."===t){i(t);continue}a(["@",parseFloat(s)])}else if("["===r){";"!==t||l?","!==t||l?"]"!==t||l?i(t):a(["[",s]):(a(["[",s]),r="["):(a(["[",s]),r=";");continue}else if(r?.startsWith(";")){"="!==t||l?";"!==t||l?"]"!==t||l?i(t):a([r,s]):(a([r,s]),r=";"):(r=`;${s}`,s="");continue}("/"===t||":"===t||"~"===t||"@"===t||"["===t||"!"===t||","===t)&&(r=t)}return t})(e.match(l)?.[1]??e),s=f(t,",");if(!s.length)return u(t);let[a,i,o]=r(t,s).map(u);return{parent:a,start:i,end:o}},p=({index:e,id:t,offset:r,temporal:n,spatial:l,text:a,side:i})=>{let f=i?`;s=${i}`:"";return`/${e}`+(t?`[${s(t)}${f}]`:"")+(null!=r&&e%2?`:${r}`:"")+(n?`~${n}`:"")+(l?`@${l.join(":")}`:"")+(a||!t&&i?"["+(a?.map(s)?.join(",")??"")+f+"]":"")},h=e=>e.parent?[e.parent,e.start,e.end].map(h).join(","):e.map(e=>e.map(p).join("")).join("!"),d=e=>a(h(e)),m=(e,t)=>{let r,n;return"string"==typeof e?d(m(c(e),t)):e.parent?(r=e.parent,n=e[t?"end":"start"],r.slice(0,-1).concat([r[r.length-1].concat(n[0])]).concat(n.slice(1))):e},g=(e,t)=>{"string"==typeof e&&(e=c(e)),"string"==typeof t&&(t=c(t)),e=m(e),t=m(t,!0);let r=e[e.length-1],n=t[t.length-1],l=[],s=[],a=[],i=!0,f=Math.max(r.length,n.length);for(let e=0;e<f;e++){let t=r[e],f=n[e];(i&&=t?.index===f?.index&&!t?.offset&&!f?.offset)?l.push(t):(t&&s.push(t),f&&a.push(f))}return d({parent:e.slice(0,-1).concat([l]),start:[s],end:[a]})},_=(e,t)=>{if("string"==typeof e&&(e=c(e)),"string"==typeof t&&(t=c(t)),e.start||t.start)return _(m(e),m(t))||_(m(e,!0),m(t,!0));for(let r=0;r<Math.max(e.length,t.length);r++){let n=e[r]??[],l=t[r]??[],s=Math.max(n.length,l.length)-1;for(let e=0;e<=s;e++){let t=n[e],r=l[e];if(!t)return -1;if(!r||t.index>r.index)return 1;if(t.index<r.index)return -1;if(e===s){if(t.offset>r.offset)return 1;if(t.offset<r.offset)return -1}}}return 0},x=({nodeType:e})=>3===e||4===e,y=(e,t)=>{let r=Array.from(e.childNodes).filter(e=>x(e)||(({nodeType:e})=>1===e)(e));return t?r.map(e=>{let r=t(e);return r===NodeFilter.FILTER_REJECT?null:r===NodeFilter.FILTER_SKIP?y(e,t):e}).flat().filter(e=>e):r},j=(e,t)=>{let r=y(e,t).reduce((e,t)=>{let r=e[e.length-1];return r?x(t)?Array.isArray(r)?r.push(t):x(r)?e[e.length-1]=[r,t]:e.push(t):(({nodeType:e})=>1===e)(r)?e.push(null,t):e.push(t):e.push(t),e},[]);return(({nodeType:e})=>1===e)(r[0])&&r.unshift("first"),(({nodeType:e})=>1===e)(r[r.length-1])&&r.push("last"),r.unshift("before"),r.push("after"),r},b=(e,t,r)=>{let{id:n}=t[t.length-1];if(n){let t=e.ownerDocument.getElementById(n);if(t)return{node:t,offset:0}}for(let{index:n}of t){let t=e?j(e,r)[n]:null;if("first"===t)return{node:e.firstChild??e};if("last"===t)return{node:e.lastChild??e};if("before"===t)return{node:e,before:!0};if("after"===t)return{node:e,after:!0};e=t}let{offset:l}=t[t.length-1];if(!Array.isArray(e))return{node:e,offset:l};let s=0;for(let t of e){let{length:e}=t.nodeValue;if(s+e>=l)return{node:t,offset:l-s};s+=e}},k=(e,t,r)=>{let{parentNode:n,id:l}=e,s=j(n,r),a=s.findIndex(t=>Array.isArray(t)?t.some(t=>t===e):t===e),i=s[a];if(Array.isArray(i)){let r=0;for(let n of i)if(n===e){r+=t;break}else r+=n.nodeValue.length;t=r}let f={id:l,index:a,offset:t};return(n!==e.ownerDocument.documentElement?k(n,null,r).concat(f):[f]).filter(e=>-1!==e.index)},v={fromIndex:e=>a(`/6/${(e+1)*2}`),toIndex:e=>e?.at(-1).index/2-1};e.s(["collapse",0,m,"compare",0,_,"fake",0,v,"fromCalibreHighlight",0,({spine_index:e,start_cfi:t,end_cfi:r})=>{let n=v.fromIndex(e)+"!";return g(n+t.slice(2),n+r.slice(2))},"fromCalibrePos",0,e=>{let[t]=c(e),r=t.shift();return t.shift(),d([[{index:6},r],t])},"fromElements",0,e=>{let t=[],{parentNode:r}=e[0],n=k(r);for(let[l,s]of j(r).entries()){let r=e[t.length];s===r&&t.push(d([n.concat({id:r.id,index:l})]))}return t},"fromRange",0,(e,t)=>{let{startContainer:r,startOffset:n,endContainer:l,endOffset:s}=e,a=k(r,n,t);return e.collapsed?d([a]):g([a],[k(l,s,t)])},"isCFI",0,l,"joinIndir",0,i,"parse",0,c,"toElement",0,(e,t)=>b(e.documentElement,m(t)).node,"toRange",0,(e,t,r)=>{let n=m(t),l=m(t,!0),s=e.documentElement,a=b(s,n[0],r),i=b(s,l[0],r),f=e.createRange();return a.before?f.setStartBefore(a.node):a.after?f.setStartAfter(a.node):f.setStart(a.node,a.offset),i.before?f.setEndBefore(i.node):i.after?f.setEndAfter(i.node):f.setEnd(i.node,i.offset),f}])},413414,e=>e.a(async(t,r)=>{try{let t=await e.y("@choochmeque/tauri-plugin-sharekit-api");e.n(t),r()}catch(e){r(e)}},!0),831930,e=>{e.v(t=>Promise.all(["server/chunks/[externals]_@zip_js_zip_4d21a2e3.js"].map(t=>e.l(t))).then(()=>t(436738)))},334401,e=>{e.v(t=>Promise.all(["server/chunks/packages_foliate-js_mobi_09383c34.js"].map(t=>e.l(t))).then(()=>t(690606)))},695,e=>{e.v(t=>Promise.all(["server/chunks/packages_foliate-js_fb2_65908e1c.js"].map(t=>e.l(t))).then(()=>t(679346)))},871513,e=>{e.v(t=>Promise.all(["server/chunks/packages_foliate-js_vendor_fflate_1f591fdd.js"].map(t=>e.l(t))).then(()=>t(498866)))},497701,e=>{e.v(t=>Promise.all(["server/chunks/packages_foliate-js_pdf_4807594a.js"].map(t=>e.l(t))).then(()=>t(633640)))},157117,e=>{e.v(t=>Promise.all(["server/chunks/packages_foliate-js_epub_f73ceaff.js"].map(t=>e.l(t))).then(()=>t(690357)))},701822,e=>{e.v(t=>Promise.all(["server/chunks/packages_foliate-js_comic-book_ba207c9b.js"].map(t=>e.l(t))).then(()=>t(166102)))}];

//# sourceMappingURL=%5Broot-of-the-server%5D__e8a8cc14._.js.map
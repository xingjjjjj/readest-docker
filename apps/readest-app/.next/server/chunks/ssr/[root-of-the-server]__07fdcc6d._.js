module.exports=[918622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},680472,a=>{a.v({name:"@readest/readest-app",version:"0.9.97",private:!0,scripts:{dev:"dotenv -e .env.tauri -- next dev",build:"dotenv -e .env.tauri -- next build",start:"dotenv -e .env.tauri -- next start","dev-web":"dotenv -e .env.web -- next dev","build-web":"dotenv -e .env.web -- next build","start-web":"dotenv -e .env.web -- next start","build-tauri":"dotenv -e .env.tauri -- next build","i18n:extract":"i18next-scanner",lint:"eslint .",test:"dotenv -e .env -e .env.test.local vitest",tauri:"tauri",clippy:"cargo clippy -p Readest --no-deps -- -D warnings","prepare-public-vendor":"mkdirp ./public/vendor/pdfjs ./public/vendor/simplecc","copy-pdfjs-js":'cpx "../../packages/foliate-js/node_modules/pdfjs-dist/legacy/build/{pdf.worker.min.mjs,pdf.min.mjs,pdf.d.mts}" ./public/vendor/pdfjs',"copy-pdfjs-wasm":'cpx "../../packages/foliate-js/node_modules/pdfjs-dist/wasm/{openjpeg.wasm,qcms_bg.wasm}" ./public/vendor/pdfjs',"copy-pdfjs-fonts":'cpx "../../packages/foliate-js/node_modules/pdfjs-dist/{cmaps,standard_fonts}/*" ./public/vendor/pdfjs',"copy-flatten-pdfjs-annotation-layer-css":'npx postcss "../../packages/foliate-js/vendor/pdfjs/annotation_layer_builder.css" --no-map -u postcss-nested > ./public/vendor/pdfjs/annotation_layer_builder.css',"copy-flatten-pdfjs-text-layer-css":'npx postcss "../../packages/foliate-js/vendor/pdfjs/text_layer_builder.css" --no-map -u postcss-nested > ./public/vendor/pdfjs/text_layer_builder.css',"copy-flatten-pdfjs-css":"pnpm copy-flatten-pdfjs-annotation-layer-css && pnpm copy-flatten-pdfjs-text-layer-css","copy-pdfjs":"pnpm copy-pdfjs-js && pnpm copy-pdfjs-wasm && pnpm copy-pdfjs-fonts && pnpm copy-flatten-pdfjs-css","copy-simplecc":'cpx "../../packages/simplecc-wasm/dist/web/*" ./public/vendor/simplecc',"setup-pdfjs":"pnpm prepare-public-vendor && pnpm copy-pdfjs","setup-simplecc":"pnpm prepare-public-vendor && pnpm copy-simplecc","setup-vendors":"pnpm setup-pdfjs && pnpm setup-simplecc","build-win-x64":"dotenv -e .env.tauri.local -- tauri build --target i686-pc-windows-msvc --bundles nsis","build-win-arm64":"dotenv -e .env.tauri.local -- tauri build --target aarch64-pc-windows-msvc --bundles nsis","build-linux-x64":"dotenv -e .env.tauri.local -- tauri build --target x86_64-unknown-linux-gnu --bundles appimage","build-macos-universial":"dotenv -e .env.tauri.local -e .env.apple-nonstore.local -- tauri build -t universal-apple-darwin --bundles dmg","build-macos-universial-appstore":"dotenv -e .env.tauri.local -e .env.apple-appstore.local -- tauri build -t universal-apple-darwin --bundles app --config src-tauri/tauri.appstore.conf.json","build-macos-universial-appstore-dev":"dotenv -e .env.tauri.local -e .env.apple-appstore-dev.local -- tauri build -t universal-apple-darwin --bundles app --config src-tauri/tauri.appstore-dev.conf.json","build-ios":"dotenv -e .env.ios-appstore-dev.local -- tauri ios build","build-ios-appstore":"dotenv -e .env.ios-appstore.local -- tauri ios build --export-method app-store-connect","release-macos-universial-appstore":"dotenv -e .env.tauri.local -e .env.apple-appstore.local -- bash scripts/release-mac-appstore.sh","release-ios-appstore":"dotenv -e .env.ios-appstore.local -- bash scripts/release-ios-appstore.sh","release-google-play":"dotenv -e .env.google-play.local -- bash scripts/release-google-play.sh","config-wrangler":'sed -i "s/\\${TRANSLATIONS_KV_ID}/$TRANSLATIONS_KV_ID/g" wrangler.toml',preview:"pnpm patch-build-webpack && NEXT_PUBLIC_APP_PLATFORM=web opennextjs-cloudflare build && pnpm restore-build-original && opennextjs-cloudflare preview --ip 0.0.0.0 --port 3001",deploy:"pnpm patch-build-webpack && NEXT_PUBLIC_APP_PLATFORM=web opennextjs-cloudflare build && pnpm restore-build-original && opennextjs-cloudflare deploy",upload:"pnpm patch-build-webpack && NEXT_PUBLIC_APP_PLATFORM=web opennextjs-cloudflare build && pnpm restore-build-original && opennextjs-cloudflare upload","cf-typegen":"wrangler types --env-interface CloudflareEnv cloudflare-env.d.ts","patch-build-webpack":'if [ "$(uname)" = "Darwin" ]; then sed -i \'\' \'s/next build"/next build --webpack"/\' package.json; else sed -i \'s/next build"/next build --webpack"/\' package.json; fi',"restore-build-original":'if [ "$(uname)" = "Darwin" ]; then sed -i \'\' \'s/next build --webpack"/next build"/\' package.json; else sed -i \'s/next build --webpack"/next build"/\' package.json; fi',"update-metadata":"bash ./scripts/sync-release-notes.sh release-notes.json ../../data/metainfo/appdata.xml","check:optional-chaining":"count=$(grep -rno '\\?\\.[a-zA-Z_$]' .next/static/chunks/* out/_next/static/chunks/* | wc -l); if [ \"$count\" -gt 0 ]; then echo '❌ Optional chaining found in output!'; exit 1; else echo '✅ No optional chaining found.'; fi","check:translations":"count=$(grep -rno '__STRING_NOT_TRANSLATED__' public/locales/* | wc -l); if [ \"$count\" -gt 0 ]; then echo '❌ Untranslated strings found!'; exit 1; else echo '✅ All strings translated.'; fi","check:lookbehind-regex":"count=$(grep -rnoE '\\(\\?<[!=]' .next/static/chunks/* out/_next/static/chunks/* | wc -l); if [ \"$count\" -gt 0 ]; then echo '❌ Lookbehind regex found in output!'; exit 1; else echo '✅ No lookbehind regex found.'; fi","check:all":"pnpm check:translations && pnpm check:lookbehind-regex","build-check":"pnpm build && pnpm build-web && pnpm check:all"},dependencies:{"@choochmeque/tauri-plugin-sharekit-api":"^0.3.0","@fabianlars/tauri-plugin-oauth":"2","@opennextjs/cloudflare":"^1.14.7","@serwist/next":"^9.4.2",jose:"^5.9.6","@tauri-apps/api":"2.9.1","@tauri-apps/plugin-cli":"^2.4.1","@tauri-apps/plugin-deep-link":"^2.4.6","@tauri-apps/plugin-dialog":"^2.6.0","@tauri-apps/plugin-fs":"^2.4.5","@tauri-apps/plugin-haptics":"^2.3.2","@tauri-apps/plugin-http":"^2.5.6","@tauri-apps/plugin-log":"^2.8.0","@tauri-apps/plugin-opener":"^2.5.3","@tauri-apps/plugin-os":"^2.3.2","@tauri-apps/plugin-process":"^2.3.1","@tauri-apps/plugin-shell":"~2.3.4","@tauri-apps/plugin-updater":"^2.9.0","@tauri-apps/plugin-websocket":"~2.4.2","@zip.js/zip.js":"^2.7.53","abortcontroller-polyfill":"^1.7.8",clsx:"^2.1.1",cors:"^2.8.5",dayjs:"^1.11.13",dompurify:"^3.3.0","foliate-js":"workspace:*","franc-min":"^6.2.0","highlight.js":"^11.11.1",i18next:"^24.2.0","i18next-browser-languagedetector":"^8.0.2","i18next-http-backend":"^3.0.1","iso-639-2":"^3.0.2","iso-639-3":"^3.0.1","isomorphic-ws":"^5.0.0","js-md5":"^0.8.3","jwt-decode":"^4.0.0",marked:"^15.0.12",next:"16.0.10",overlayscrollbars:"^2.11.4","overlayscrollbars-react":"^0.5.6","posthog-js":"^1.246.0",react:"19.2.0","react-color":"^2.19.3","react-dom":"19.2.0","react-i18next":"^15.2.0","react-icons":"^5.4.0","react-responsive":"^10.0.0","react-virtuoso":"^4.17.0","react-window":"^1.8.11",semver:"^7.7.1","styled-jsx":"^5.1.7",tinycolor2:"^1.6.0",uuid:"^11.1.0",ws:"^8.18.3",zod:"^4.0.8",zustand:"5.0.6"},devDependencies:{"@next/bundle-analyzer":"^15.4.2","@tailwindcss/typography":"^0.5.16","@tauri-apps/cli":"2.9.6","@testing-library/dom":"^10.4.0","@testing-library/react":"^16.3.0","@types/cors":"^2.8.17","@types/cssbeautify":"^0.3.5","@types/node":"^22.15.31","@types/react":"18.3.12","@types/react-color":"^3.0.13","@types/react-dom":"18.3.1","@types/react-window":"^1.8.8","@types/semver":"^7.7.0","@types/tinycolor2":"^1.4.6","@types/uuid":"^10.0.0","@types/ws":"^8.18.1","@typescript-eslint/eslint-plugin":"^8.48.0","@typescript-eslint/parser":"^8.48.0","@vitejs/plugin-react":"^5.1.1",autoprefixer:"^10.4.20","caniuse-lite":"^1.0.30001746",cpx2:"^8.0.0",daisyui:"^4.12.24","dotenv-cli":"^7.4.4",eslint:"^9.16.0","eslint-config-next":"16.0.0","eslint-plugin-jsx-a11y":"^6.10.2","i18next-scanner":"^4.6.0",jsdom:"^26.1.0",mkdirp:"^3.0.1","node-env-run":"^4.0.2",postcss:"^8.4.49","postcss-cli":"^11.0.0","postcss-nested":"^7.0.2","raw-loader":"^4.0.2",serwist:"^9.3.0",tailwindcss:"^3.4.18",typescript:"^5.7.2","vite-tsconfig-paths":"^5.1.4",vitest:"^4.0.15",wrangler:"^4.56.0"}})},328851,a=>{"use strict";var b=a.i(836458);let c="readest-telemetry-opt-out";a.s(["optInTelemetry",0,()=>{localStorage.setItem(c,"false"),b.default.opt_in_capturing()},"optOutTelemetry",0,()=>{localStorage.setItem(c,"true"),b.default.opt_out_capturing()}])},933912,a=>{"use strict";var b=a.i(649970),c=a.i(952820),d=a.i(947218);a.s(["useBackgroundTexture",0,()=>({applyBackgroundTexture:(0,b.useCallback)((a,b)=>{let e=b.backgroundTextureId,f=b.backgroundOpacity,g=b.backgroundSize;if(!e||"none"===e)return;document.documentElement.style.setProperty("--bg-texture-opacity",`${f}`),document.documentElement.style.setProperty("--bg-texture-size",g);let h=d.useSettingsStore.getState().settings,i=h.customTextures?.find(a=>a.id===e);i&&c.useCustomTextureStore.getState().addTexture(i.path),c.useCustomTextureStore.getState().applyTexture(a,e)},[])})])},132259,(a,b,c)=>{Object.groupBy??=(a,b)=>{let c=Object.create(null),d=0;for(let e of a){let a=b(e,d++);a in c?c[a].push(e):c[a]=[e]}return c},Map.groupBy??=(a,b)=>{let c=new Map,d=0;for(let e of a){let a=b(e,d++),f=c.get(a);f?f.push(e):c.set(a,[e])}return c}},931485,a=>{"use strict";var b=a.i(92585);a.i(132259);var c=a.i(802161),d=a.i(649970),e=a.i(338005),f=a.i(863052),g=a.i(592385),h=a.i(836458),i=(0,d.createContext)({client:h.default});function j(a){var b=a.children,c=a.client,e=a.apiKey,f=a.options,g=(0,d.useRef)(null),j=(0,d.useMemo)(function(){return c?(e&&console.warn("[PostHog.js] You have provided both `client` and `apiKey` to `PostHogProvider`. `apiKey` will be ignored in favour of `client`."),f&&console.warn("[PostHog.js] You have provided both `client` and `options` to `PostHogProvider`. `options` will be ignored in favour of `client`."),c):(e||console.warn("[PostHog.js] No `apiKey` or `client` were provided to `PostHogProvider`. Using default global `window.posthog` instance. You must initialize it manually. This is not recommended behavior."),h.default)},[c,e,JSON.stringify(f)]);return(0,d.useEffect)(function(){if(!c){var a=g.current;a?(e!==a.apiKey&&console.warn("[PostHog.js] You have provided a different `apiKey` to `PostHogProvider` than the one that was already initialized. This is not supported by our provider and we'll keep using the previous key. If you need to toggle between API Keys you need to control the `client` yourself and pass it in as a prop rather than an `apiKey` prop."),f&&!function a(b,c,d){if(void 0===d&&(d=new WeakMap),b===c)return!0;if("object"!=typeof b||null===b||"object"!=typeof c||null===c)return!1;if(d.has(b)&&d.get(b)===c)return!0;d.set(b,c);var e=Object.keys(b),f=Object.keys(c);if(e.length!==f.length)return!1;for(var g=0;g<e.length;g++){var h=e[g];if(!f.includes(h)||!a(b[h],c[h],d))return!1}return!0}(f,a.options)&&h.default.set_config(f)):(h.default.__loaded&&console.warn("[PostHog.js] `posthog` was already loaded elsewhere. This may cause issues."),h.default.init(e,f)),g.current={apiKey:e,options:null!=f?f:{}}}},[c,e,JSON.stringify(f)]),d.default.createElement(i.Provider,{value:{client:j}},b)}var k=function(a,b){return(k=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(a,b)},l=function(a){return"function"==typeof a},m={componentStack:null,error:null};!function(a){if("function"!=typeof a&&null!==a)throw TypeError("Class extends value "+String(a)+" is not a constructor or null");function b(){this.constructor=c}function c(b){var c=a.call(this,b)||this;return c.state=m,c}k(c,a),c.prototype=null===a?Object.create(a):(b.prototype=a.prototype,new b),c.prototype.componentDidCatch=function(a,b){var c,d=b.componentStack,e=this.props.additionalProperties;this.setState({error:a,componentStack:d}),l(e)?c=e(a):"object"==typeof e&&(c=e),this.context.client.captureException(a,c)},c.prototype.render=function(){var a=this.props,b=a.children,c=a.fallback,e=this.state;if(null==e.componentStack)return l(b)?b():b;var f=l(c)?d.default.createElement(c,{error:e.error,componentStack:e.componentStack}):c;return d.default.isValidElement(f)?f:(console.warn("[PostHog.js][PostHogErrorBoundary] Invalid fallback prop, provide a valid React element or a function that returns a valid React element."),d.default.createElement(d.default.Fragment,null))},c.contextType=i}(d.default.Component),a.i(328851);var n=a.i(877048);process.env.NEXT_PUBLIC_POSTHOG_HOST||atob("aHR0cHM6Ly91cy5pLnBvc3Rob2cuY29t"),process.env.NEXT_PUBLIC_POSTHOG_KEY||atob("cGhjX2ViNXowbVRxWm8yZm5YYnZGNmE3bFh5TThpTmRSNTNsR1A3VFM3VGh4S08=");let o=({children:a})=>((0,d.useEffect)(()=>{h.default.register_for_session({$app_version:(0,n.getAppVersion)()})},[]),(0,b.jsx)(j,{client:h.default,children:a}));var p=a.i(467475),q=a.i(407027),r=a.i(947218),s=a.i(649661),t=a.i(268120),u=a.i(933912),v=a.i(168780),w=a.i(73552),x=a.i(243648);a.s(["default",0,({children:a})=>{let{envConfig:h,appService:i}=(0,g.useEnv)(),{applyUILanguage:j}=(0,r.useSettingsStore)(),{applyBackgroundTexture:k}=(0,u.useBackgroundTexture)(),{applyEinkMode:l}=(0,v.useEinkMode)(),m=(0,t.useDefaultIconSize)();if((()=>{let{appService:a}=(0,g.useEnv)(),b=(0,d.useRef)({top:0,right:0,bottom:0,left:0}),{updateSafeAreaInsets:c}=(0,q.useThemeStore)(),e=a=>{let{top:d,right:e,bottom:f,left:g}=b.current;(a.top!==d||a.right!==e||a.bottom!==f||a.left!==g)&&(b.current=a,c(a))},f=(0,d.useCallback)(()=>{if(!a)return;if(!a.hasSafeAreaInset)return void e(b.current);let c=getComputedStyle(document.documentElement),d=c.getPropertyValue("--safe-area-inset-top"),f=/Chrome\/139/.test(navigator.userAgent);a.isAndroidApp&&f?(0,s.getSafeAreaInsets)().then(a=>{a.error?console.error("Error getting safe area insets from native bridge:",a.error):e({top:Math.round(a.top),right:Math.round(a.right),bottom:Math.round(a.bottom),left:Math.round(a.left)})}):d&&e({top:Math.round(parseFloat(c.getPropertyValue("--safe-area-inset-top"))||0),right:Math.round(parseFloat(c.getPropertyValue("--safe-area-inset-right"))||0),bottom:Math.round(parseFloat(c.getPropertyValue("--safe-area-inset-bottom"))||0),left:Math.round(parseFloat(c.getPropertyValue("--safe-area-inset-left"))||0)})},[a]);(0,d.useEffect)(()=>(f(),window.screen?.orientation?window.screen.orientation.addEventListener("change",f):window.addEventListener("orientationchange",f),()=>{window.screen?.orientation?window.screen.orientation.removeEventListener("change",f):window.removeEventListener("orientationchange",f)}),[f])})(),(0,d.useEffect)(()=>{window.__STORAGE_MODE__||(window.__STORAGE_MODE__="local"),console.log("[Providers] useEffect: window.__STORAGE_MODE__ =",window.__STORAGE_MODE__);let a=a=>{document.documentElement.lang=a,"rtl"===(0,x.getDirFromUILanguage)()?document.documentElement.classList.add("ui-rtl"):document.documentElement.classList.remove("ui-rtl")};return a((0,w.getLocale)()),c.default.on("languageChanged",a),()=>{c.default.off("languageChanged",a)}},[]),(0,d.useEffect)(()=>{(0,q.loadDataTheme)(),i&&((0,q.initSystemThemeListener)(i),i.loadSettings().then(a=>{let b=a.globalViewSettings;j(b.uiLanguage),k(h,b),b.isEink&&l(!0)}))},[h,i,j,k,l]),i)return(0,b.jsx)(o,{children:(0,b.jsx)(f.AuthProvider,{children:(0,b.jsx)(e.IconContext.Provider,{value:{size:`${m}px`},children:(0,b.jsx)(p.SyncProvider,{children:a})})})})}],931485)},30888,a=>{a.v(b=>Promise.all(["server/chunks/ssr/_af692a6e._.js","server/chunks/ssr/_a200d5df._.js","server/chunks/ssr/_6457b47d._.js","server/chunks/ssr/apps_readest-app_src_utils_file_ts_64883864._.js","server/chunks/ssr/apps_readest-app_src_services_nativeAppService_ts_858e48cb._.js"].map(b=>a.l(b))).then(()=>b(523556)))},778702,a=>{a.v(b=>Promise.all(["server/chunks/ssr/_ae62b9e8._.js","server/chunks/ssr/_a200d5df._.js","server/chunks/ssr/apps_readest-app_src_utils_file_ts_64883864._.js","server/chunks/ssr/_6457b47d._.js"].map(b=>a.l(b))).then(()=>b(753954)))}];

//# sourceMappingURL=%5Broot-of-the-server%5D__07fdcc6d._.js.map
module.exports=[402707,(a,b,c)=>{"use strict";b.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||0x1fffffffffffff,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}},621173,(a,b,c)=>{"use strict";b.exports="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...a)=>console.error("SEMVER",...a):()=>{}},811039,(a,b,c)=>{"use strict";let{MAX_SAFE_COMPONENT_LENGTH:d,MAX_SAFE_BUILD_LENGTH:e,MAX_LENGTH:f}=a.r(402707),g=a.r(621173),h=(c=b.exports={}).re=[],i=c.safeRe=[],j=c.src=[],k=c.safeSrc=[],l=c.t={},m=0,n="[a-zA-Z0-9-]",o=[["\\s",1],["\\d",f],[n,e]],p=(a,b,c)=>{let d=(a=>{for(let[b,c]of o)a=a.split(`${b}*`).join(`${b}{0,${c}}`).split(`${b}+`).join(`${b}{1,${c}}`);return a})(b),e=m++;g(a,e,b),l[a]=e,j[e]=b,k[e]=d,h[e]=new RegExp(b,c?"g":void 0),i[e]=new RegExp(d,c?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${n}*`),p("MAINVERSION",`(${j[l.NUMERICIDENTIFIER]})\\.(${j[l.NUMERICIDENTIFIER]})\\.(${j[l.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${j[l.NUMERICIDENTIFIERLOOSE]})\\.(${j[l.NUMERICIDENTIFIERLOOSE]})\\.(${j[l.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${j[l.NONNUMERICIDENTIFIER]}|${j[l.NUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${j[l.NONNUMERICIDENTIFIER]}|${j[l.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASE",`(?:-(${j[l.PRERELEASEIDENTIFIER]}(?:\\.${j[l.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${j[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${j[l.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${n}+`),p("BUILD",`(?:\\+(${j[l.BUILDIDENTIFIER]}(?:\\.${j[l.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${j[l.MAINVERSION]}${j[l.PRERELEASE]}?${j[l.BUILD]}?`),p("FULL",`^${j[l.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${j[l.MAINVERSIONLOOSE]}${j[l.PRERELEASELOOSE]}?${j[l.BUILD]}?`),p("LOOSE",`^${j[l.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${j[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${j[l.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${j[l.XRANGEIDENTIFIER]})(?:\\.(${j[l.XRANGEIDENTIFIER]})(?:\\.(${j[l.XRANGEIDENTIFIER]})(?:${j[l.PRERELEASE]})?${j[l.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${j[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${j[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${j[l.XRANGEIDENTIFIERLOOSE]})(?:${j[l.PRERELEASELOOSE]})?${j[l.BUILD]}?)?)?`),p("XRANGE",`^${j[l.GTLT]}\\s*${j[l.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${j[l.GTLT]}\\s*${j[l.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${d}})(?:\\.(\\d{1,${d}}))?(?:\\.(\\d{1,${d}}))?`),p("COERCE",`${j[l.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",j[l.COERCEPLAIN]+`(?:${j[l.PRERELEASE]})?`+`(?:${j[l.BUILD]})?`+"(?:$|[^\\d])"),p("COERCERTL",j[l.COERCE],!0),p("COERCERTLFULL",j[l.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${j[l.LONETILDE]}\\s+`,!0),c.tildeTrimReplace="$1~",p("TILDE",`^${j[l.LONETILDE]}${j[l.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${j[l.LONETILDE]}${j[l.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${j[l.LONECARET]}\\s+`,!0),c.caretTrimReplace="$1^",p("CARET",`^${j[l.LONECARET]}${j[l.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${j[l.LONECARET]}${j[l.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${j[l.GTLT]}\\s*(${j[l.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${j[l.GTLT]}\\s*(${j[l.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${j[l.GTLT]}\\s*(${j[l.LOOSEPLAIN]}|${j[l.XRANGEPLAIN]})`,!0),c.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${j[l.XRANGEPLAIN]})\\s+-\\s+(${j[l.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${j[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${j[l.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")},154404,(a,b,c)=>{"use strict";let d=Object.freeze({loose:!0}),e=Object.freeze({});b.exports=a=>a?"object"!=typeof a?d:a:e},957153,(a,b,c)=>{"use strict";let d=/^[0-9]+$/,e=(a,b)=>{let c=d.test(a),e=d.test(b);return c&&e&&(a*=1,b*=1),a===b?0:c&&!e?-1:e&&!c?1:a<b?-1:1};b.exports={compareIdentifiers:e,rcompareIdentifiers:(a,b)=>e(b,a)}},312975,(a,b,c)=>{"use strict";let d=a.r(621173),{MAX_LENGTH:e,MAX_SAFE_INTEGER:f}=a.r(402707),{safeRe:g,t:h}=a.r(811039),i=a.r(154404),{compareIdentifiers:j}=a.r(957153);class k{constructor(a,b){if(b=i(b),a instanceof k)if(!!b.loose===a.loose&&!!b.includePrerelease===a.includePrerelease)return a;else a=a.version;else if("string"!=typeof a)throw TypeError(`Invalid version. Must be a string. Got type "${typeof a}".`);if(a.length>e)throw TypeError(`version is longer than ${e} characters`);d("SemVer",a,b),this.options=b,this.loose=!!b.loose,this.includePrerelease=!!b.includePrerelease;const c=a.trim().match(b.loose?g[h.LOOSE]:g[h.FULL]);if(!c)throw TypeError(`Invalid Version: ${a}`);if(this.raw=a,this.major=+c[1],this.minor=+c[2],this.patch=+c[3],this.major>f||this.major<0)throw TypeError("Invalid major version");if(this.minor>f||this.minor<0)throw TypeError("Invalid minor version");if(this.patch>f||this.patch<0)throw TypeError("Invalid patch version");c[4]?this.prerelease=c[4].split(".").map(a=>{if(/^[0-9]+$/.test(a)){let b=+a;if(b>=0&&b<f)return b}return a}):this.prerelease=[],this.build=c[5]?c[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(a){if(d("SemVer.compare",this.version,this.options,a),!(a instanceof k)){if("string"==typeof a&&a===this.version)return 0;a=new k(a,this.options)}return a.version===this.version?0:this.compareMain(a)||this.comparePre(a)}compareMain(a){return a instanceof k||(a=new k(a,this.options)),j(this.major,a.major)||j(this.minor,a.minor)||j(this.patch,a.patch)}comparePre(a){if(a instanceof k||(a=new k(a,this.options)),this.prerelease.length&&!a.prerelease.length)return -1;if(!this.prerelease.length&&a.prerelease.length)return 1;if(!this.prerelease.length&&!a.prerelease.length)return 0;let b=0;do{let c=this.prerelease[b],e=a.prerelease[b];if(d("prerelease compare",b,c,e),void 0===c&&void 0===e)return 0;if(void 0===e)return 1;if(void 0===c)return -1;else if(c===e)continue;else return j(c,e)}while(++b)}compareBuild(a){a instanceof k||(a=new k(a,this.options));let b=0;do{let c=this.build[b],e=a.build[b];if(d("build compare",b,c,e),void 0===c&&void 0===e)return 0;if(void 0===e)return 1;if(void 0===c)return -1;else if(c===e)continue;else return j(c,e)}while(++b)}inc(a,b,c){if(a.startsWith("pre")){if(!b&&!1===c)throw Error("invalid increment argument: identifier is empty");if(b){let a=`-${b}`.match(this.options.loose?g[h.PRERELEASELOOSE]:g[h.PRERELEASE]);if(!a||a[1]!==b)throw Error(`invalid identifier: ${b}`)}}switch(a){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",b,c);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",b,c);break;case"prepatch":this.prerelease.length=0,this.inc("patch",b,c),this.inc("pre",b,c);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",b,c),this.inc("pre",b,c);break;case"release":if(0===this.prerelease.length)throw Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(0!==this.minor||0!==this.patch||0===this.prerelease.length)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(0!==this.patch||0===this.prerelease.length)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{let a=+!!Number(c);if(0===this.prerelease.length)this.prerelease=[a];else{let d=this.prerelease.length;for(;--d>=0;)"number"==typeof this.prerelease[d]&&(this.prerelease[d]++,d=-2);if(-1===d){if(b===this.prerelease.join(".")&&!1===c)throw Error("invalid increment argument: identifier already exists");this.prerelease.push(a)}}if(b){let d=[b,a];!1===c&&(d=[b]),0===j(this.prerelease[0],b)?isNaN(this.prerelease[1])&&(this.prerelease=d):this.prerelease=d}break}default:throw Error(`invalid increment argument: ${a}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}b.exports=k},407570,(a,b,c)=>{"use strict";let d=a.r(312975);b.exports=(a,b,c=!1)=>{if(a instanceof d)return a;try{return new d(a,b)}catch(a){if(!c)return null;throw a}}},117456,(a,b,c)=>{"use strict";let d=a.r(407570);b.exports=(a,b)=>{let c=d(a,b);return c?c.version:null}},902088,(a,b,c)=>{"use strict";let d=a.r(407570);b.exports=(a,b)=>{let c=d(a.trim().replace(/^[=v]+/,""),b);return c?c.version:null}},687866,(a,b,c)=>{"use strict";let d=a.r(312975);b.exports=(a,b,c,e,f)=>{"string"==typeof c&&(f=e,e=c,c=void 0);try{return new d(a instanceof d?a.version:a,c).inc(b,e,f).version}catch(a){return null}}},601300,(a,b,c)=>{"use strict";let d=a.r(407570);b.exports=(a,b)=>{let c=d(a,null,!0),e=d(b,null,!0),f=c.compare(e);if(0===f)return null;let g=f>0,h=g?c:e,i=g?e:c,j=!!h.prerelease.length;if(i.prerelease.length&&!j){if(!i.patch&&!i.minor)return"major";if(0===i.compareMain(h))return i.minor&&!i.patch?"minor":"patch"}let k=j?"pre":"";return c.major!==e.major?k+"major":c.minor!==e.minor?k+"minor":c.patch!==e.patch?k+"patch":"prerelease"}},679060,(a,b,c)=>{"use strict";let d=a.r(312975);b.exports=(a,b)=>new d(a,b).major},255371,(a,b,c)=>{"use strict";let d=a.r(312975);b.exports=(a,b)=>new d(a,b).minor},917232,(a,b,c)=>{"use strict";let d=a.r(312975);b.exports=(a,b)=>new d(a,b).patch},75338,(a,b,c)=>{"use strict";let d=a.r(407570);b.exports=(a,b)=>{let c=d(a,b);return c&&c.prerelease.length?c.prerelease:null}},595965,(a,b,c)=>{"use strict";let d=a.r(312975);b.exports=(a,b,c)=>new d(a,c).compare(new d(b,c))},529721,(a,b,c)=>{"use strict";let d=a.r(595965);b.exports=(a,b,c)=>d(b,a,c)},403844,(a,b,c)=>{"use strict";let d=a.r(595965);b.exports=(a,b)=>d(a,b,!0)},54658,(a,b,c)=>{"use strict";let d=a.r(312975);b.exports=(a,b,c)=>{let e=new d(a,c),f=new d(b,c);return e.compare(f)||e.compareBuild(f)}},297873,(a,b,c)=>{"use strict";let d=a.r(54658);b.exports=(a,b)=>a.sort((a,c)=>d(a,c,b))},612918,(a,b,c)=>{"use strict";let d=a.r(54658);b.exports=(a,b)=>a.sort((a,c)=>d(c,a,b))},429794,(a,b,c)=>{"use strict";let d=a.r(595965);b.exports=(a,b,c)=>d(a,b,c)>0},536831,(a,b,c)=>{"use strict";let d=a.r(595965);b.exports=(a,b,c)=>0>d(a,b,c)},298379,(a,b,c)=>{"use strict";let d=a.r(595965);b.exports=(a,b,c)=>0===d(a,b,c)},811916,(a,b,c)=>{"use strict";let d=a.r(595965);b.exports=(a,b,c)=>0!==d(a,b,c)},853551,(a,b,c)=>{"use strict";let d=a.r(595965);b.exports=(a,b,c)=>d(a,b,c)>=0},879354,(a,b,c)=>{"use strict";let d=a.r(595965);b.exports=(a,b,c)=>0>=d(a,b,c)},93403,(a,b,c)=>{"use strict";let d=a.r(298379),e=a.r(811916),f=a.r(429794),g=a.r(853551),h=a.r(536831),i=a.r(879354);b.exports=(a,b,c,j)=>{switch(b){case"===":return"object"==typeof a&&(a=a.version),"object"==typeof c&&(c=c.version),a===c;case"!==":return"object"==typeof a&&(a=a.version),"object"==typeof c&&(c=c.version),a!==c;case"":case"=":case"==":return d(a,c,j);case"!=":return e(a,c,j);case">":return f(a,c,j);case">=":return g(a,c,j);case"<":return h(a,c,j);case"<=":return i(a,c,j);default:throw TypeError(`Invalid operator: ${b}`)}}},699080,(a,b,c)=>{"use strict";let d=a.r(312975),e=a.r(407570),{safeRe:f,t:g}=a.r(811039);b.exports=(a,b)=>{if(a instanceof d)return a;if("number"==typeof a&&(a=String(a)),"string"!=typeof a)return null;let c=null;if((b=b||{}).rtl){let d,e=b.includePrerelease?f[g.COERCERTLFULL]:f[g.COERCERTL];for(;(d=e.exec(a))&&(!c||c.index+c[0].length!==a.length);)c&&d.index+d[0].length===c.index+c[0].length||(c=d),e.lastIndex=d.index+d[1].length+d[2].length;e.lastIndex=-1}else c=a.match(b.includePrerelease?f[g.COERCEFULL]:f[g.COERCE]);if(null===c)return null;let h=c[2],i=c[3]||"0",j=c[4]||"0",k=b.includePrerelease&&c[5]?`-${c[5]}`:"",l=b.includePrerelease&&c[6]?`+${c[6]}`:"";return e(`${h}.${i}.${j}${k}${l}`,b)}},192846,(a,b,c)=>{"use strict";b.exports=class{constructor(){this.max=1e3,this.map=new Map}get(a){let b=this.map.get(a);if(void 0!==b)return this.map.delete(a),this.map.set(a,b),b}delete(a){return this.map.delete(a)}set(a,b){if(!this.delete(a)&&void 0!==b){if(this.map.size>=this.max){let a=this.map.keys().next().value;this.delete(a)}this.map.set(a,b)}return this}}},988064,(a,b,c)=>{"use strict";let d=/\s+/g;class e{constructor(a,b){if(b=g(b),a instanceof e)if(!!b.loose===a.loose&&!!b.includePrerelease===a.includePrerelease)return a;else return new e(a.raw,b);if(a instanceof h)return this.raw=a.value,this.set=[[a]],this.formatted=void 0,this;if(this.options=b,this.loose=!!b.loose,this.includePrerelease=!!b.includePrerelease,this.raw=a.trim().replace(d," "),this.set=this.raw.split("||").map(a=>this.parseRange(a.trim())).filter(a=>a.length),!this.set.length)throw TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const a=this.set[0];if(this.set=this.set.filter(a=>!r(a[0])),0===this.set.length)this.set=[a];else if(this.set.length>1){for(const a of this.set)if(1===a.length&&s(a[0])){this.set=[a];break}}}this.formatted=void 0}get range(){if(void 0===this.formatted){this.formatted="";for(let a=0;a<this.set.length;a++){a>0&&(this.formatted+="||");let b=this.set[a];for(let a=0;a<b.length;a++)a>0&&(this.formatted+=" "),this.formatted+=b[a].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(a){let b=((this.options.includePrerelease&&p)|(this.options.loose&&q))+":"+a,c=f.get(b);if(c)return c;let d=this.options.loose,e=d?k[l.HYPHENRANGELOOSE]:k[l.HYPHENRANGE];i("hyphen replace",a=a.replace(e,E(this.options.includePrerelease))),i("comparator trim",a=a.replace(k[l.COMPARATORTRIM],m)),i("tilde trim",a=a.replace(k[l.TILDETRIM],n)),i("caret trim",a=a.replace(k[l.CARETTRIM],o));let g=a.split(" ").map(a=>u(a,this.options)).join(" ").split(/\s+/).map(a=>D(a,this.options));d&&(g=g.filter(a=>(i("loose invalid filter",a,this.options),!!a.match(k[l.COMPARATORLOOSE])))),i("range list",g);let j=new Map;for(let a of g.map(a=>new h(a,this.options))){if(r(a))return[a];j.set(a.value,a)}j.size>1&&j.has("")&&j.delete("");let s=[...j.values()];return f.set(b,s),s}intersects(a,b){if(!(a instanceof e))throw TypeError("a Range is required");return this.set.some(c=>t(c,b)&&a.set.some(a=>t(a,b)&&c.every(c=>a.every(a=>c.intersects(a,b)))))}test(a){if(!a)return!1;if("string"==typeof a)try{a=new j(a,this.options)}catch(a){return!1}for(let b=0;b<this.set.length;b++)if(F(this.set[b],a,this.options))return!0;return!1}}b.exports=e;let f=new(a.r(192846)),g=a.r(154404),h=a.r(519603),i=a.r(621173),j=a.r(312975),{safeRe:k,t:l,comparatorTrimReplace:m,tildeTrimReplace:n,caretTrimReplace:o}=a.r(811039),{FLAG_INCLUDE_PRERELEASE:p,FLAG_LOOSE:q}=a.r(402707),r=a=>"<0.0.0-0"===a.value,s=a=>""===a.value,t=(a,b)=>{let c=!0,d=a.slice(),e=d.pop();for(;c&&d.length;)c=d.every(a=>e.intersects(a,b)),e=d.pop();return c},u=(a,b)=>(i("comp",a,b),i("caret",a=y(a,b)),i("tildes",a=w(a,b)),i("xrange",a=A(a,b)),i("stars",a=C(a,b)),a),v=a=>!a||"x"===a.toLowerCase()||"*"===a,w=(a,b)=>a.trim().split(/\s+/).map(a=>x(a,b)).join(" "),x=(a,b)=>{let c=b.loose?k[l.TILDELOOSE]:k[l.TILDE];return a.replace(c,(b,c,d,e,f)=>{let g;return i("tilde",a,b,c,d,e,f),v(c)?g="":v(d)?g=`>=${c}.0.0 <${+c+1}.0.0-0`:v(e)?g=`>=${c}.${d}.0 <${c}.${+d+1}.0-0`:f?(i("replaceTilde pr",f),g=`>=${c}.${d}.${e}-${f} <${c}.${+d+1}.0-0`):g=`>=${c}.${d}.${e} <${c}.${+d+1}.0-0`,i("tilde return",g),g})},y=(a,b)=>a.trim().split(/\s+/).map(a=>z(a,b)).join(" "),z=(a,b)=>{i("caret",a,b);let c=b.loose?k[l.CARETLOOSE]:k[l.CARET],d=b.includePrerelease?"-0":"";return a.replace(c,(b,c,e,f,g)=>{let h;return i("caret",a,b,c,e,f,g),v(c)?h="":v(e)?h=`>=${c}.0.0${d} <${+c+1}.0.0-0`:v(f)?h="0"===c?`>=${c}.${e}.0${d} <${c}.${+e+1}.0-0`:`>=${c}.${e}.0${d} <${+c+1}.0.0-0`:g?(i("replaceCaret pr",g),h="0"===c?"0"===e?`>=${c}.${e}.${f}-${g} <${c}.${e}.${+f+1}-0`:`>=${c}.${e}.${f}-${g} <${c}.${+e+1}.0-0`:`>=${c}.${e}.${f}-${g} <${+c+1}.0.0-0`):(i("no pr"),h="0"===c?"0"===e?`>=${c}.${e}.${f}${d} <${c}.${e}.${+f+1}-0`:`>=${c}.${e}.${f}${d} <${c}.${+e+1}.0-0`:`>=${c}.${e}.${f} <${+c+1}.0.0-0`),i("caret return",h),h})},A=(a,b)=>(i("replaceXRanges",a,b),a.split(/\s+/).map(a=>B(a,b)).join(" ")),B=(a,b)=>{a=a.trim();let c=b.loose?k[l.XRANGELOOSE]:k[l.XRANGE];return a.replace(c,(c,d,e,f,g,h)=>{i("xRange",a,c,d,e,f,g,h);let j=v(e),k=j||v(f),l=k||v(g);return"="===d&&l&&(d=""),h=b.includePrerelease?"-0":"",j?c=">"===d||"<"===d?"<0.0.0-0":"*":d&&l?(k&&(f=0),g=0,">"===d?(d=">=",k?(e=+e+1,f=0):f=+f+1,g=0):"<="===d&&(d="<",k?e=+e+1:f=+f+1),"<"===d&&(h="-0"),c=`${d+e}.${f}.${g}${h}`):k?c=`>=${e}.0.0${h} <${+e+1}.0.0-0`:l&&(c=`>=${e}.${f}.0${h} <${e}.${+f+1}.0-0`),i("xRange return",c),c})},C=(a,b)=>(i("replaceStars",a,b),a.trim().replace(k[l.STAR],"")),D=(a,b)=>(i("replaceGTE0",a,b),a.trim().replace(k[b.includePrerelease?l.GTE0PRE:l.GTE0],"")),E=a=>(b,c,d,e,f,g,h,i,j,k,l,m)=>(c=v(d)?"":v(e)?`>=${d}.0.0${a?"-0":""}`:v(f)?`>=${d}.${e}.0${a?"-0":""}`:g?`>=${c}`:`>=${c}${a?"-0":""}`,i=v(j)?"":v(k)?`<${+j+1}.0.0-0`:v(l)?`<${j}.${+k+1}.0-0`:m?`<=${j}.${k}.${l}-${m}`:a?`<${j}.${k}.${+l+1}-0`:`<=${i}`,`${c} ${i}`.trim()),F=(a,b,c)=>{for(let c=0;c<a.length;c++)if(!a[c].test(b))return!1;if(b.prerelease.length&&!c.includePrerelease){for(let c=0;c<a.length;c++)if(i(a[c].semver),a[c].semver!==h.ANY&&a[c].semver.prerelease.length>0){let d=a[c].semver;if(d.major===b.major&&d.minor===b.minor&&d.patch===b.patch)return!0}return!1}return!0}},519603,(a,b,c)=>{"use strict";let d=Symbol("SemVer ANY");class e{static get ANY(){return d}constructor(a,b){if(b=f(b),a instanceof e)if(!!b.loose===a.loose)return a;else a=a.value;j("comparator",a=a.trim().split(/\s+/).join(" "),b),this.options=b,this.loose=!!b.loose,this.parse(a),this.semver===d?this.value="":this.value=this.operator+this.semver.version,j("comp",this)}parse(a){let b=this.options.loose?g[h.COMPARATORLOOSE]:g[h.COMPARATOR],c=a.match(b);if(!c)throw TypeError(`Invalid comparator: ${a}`);this.operator=void 0!==c[1]?c[1]:"","="===this.operator&&(this.operator=""),c[2]?this.semver=new k(c[2],this.options.loose):this.semver=d}toString(){return this.value}test(a){if(j("Comparator.test",a,this.options.loose),this.semver===d||a===d)return!0;if("string"==typeof a)try{a=new k(a,this.options)}catch(a){return!1}return i(a,this.operator,this.semver,this.options)}intersects(a,b){if(!(a instanceof e))throw TypeError("a Comparator is required");return""===this.operator?""===this.value||new l(a.value,b).test(this.value):""===a.operator?""===a.value||new l(this.value,b).test(a.semver):!((b=f(b)).includePrerelease&&("<0.0.0-0"===this.value||"<0.0.0-0"===a.value)||!b.includePrerelease&&(this.value.startsWith("<0.0.0")||a.value.startsWith("<0.0.0")))&&!!(this.operator.startsWith(">")&&a.operator.startsWith(">")||this.operator.startsWith("<")&&a.operator.startsWith("<")||this.semver.version===a.semver.version&&this.operator.includes("=")&&a.operator.includes("=")||i(this.semver,"<",a.semver,b)&&this.operator.startsWith(">")&&a.operator.startsWith("<")||i(this.semver,">",a.semver,b)&&this.operator.startsWith("<")&&a.operator.startsWith(">"))}}b.exports=e;let f=a.r(154404),{safeRe:g,t:h}=a.r(811039),i=a.r(93403),j=a.r(621173),k=a.r(312975),l=a.r(988064)},935473,(a,b,c)=>{"use strict";let d=a.r(988064);b.exports=(a,b,c)=>{try{b=new d(b,c)}catch(a){return!1}return b.test(a)}},825202,(a,b,c)=>{"use strict";let d=a.r(988064);b.exports=(a,b)=>new d(a,b).set.map(a=>a.map(a=>a.value).join(" ").trim().split(" "))},222130,(a,b,c)=>{"use strict";let d=a.r(312975),e=a.r(988064);b.exports=(a,b,c)=>{let f=null,g=null,h=null;try{h=new e(b,c)}catch(a){return null}return a.forEach(a=>{h.test(a)&&(!f||-1===g.compare(a))&&(g=new d(f=a,c))}),f}},916632,(a,b,c)=>{"use strict";let d=a.r(312975),e=a.r(988064);b.exports=(a,b,c)=>{let f=null,g=null,h=null;try{h=new e(b,c)}catch(a){return null}return a.forEach(a=>{h.test(a)&&(!f||1===g.compare(a))&&(g=new d(f=a,c))}),f}},689650,(a,b,c)=>{"use strict";let d=a.r(312975),e=a.r(988064),f=a.r(429794);b.exports=(a,b)=>{a=new e(a,b);let c=new d("0.0.0");if(a.test(c)||(c=new d("0.0.0-0"),a.test(c)))return c;c=null;for(let b=0;b<a.set.length;++b){let e=a.set[b],g=null;e.forEach(a=>{let b=new d(a.semver.version);switch(a.operator){case">":0===b.prerelease.length?b.patch++:b.prerelease.push(0),b.raw=b.format();case"":case">=":(!g||f(b,g))&&(g=b);break;case"<":case"<=":break;default:throw Error(`Unexpected operation: ${a.operator}`)}}),g&&(!c||f(c,g))&&(c=g)}return c&&a.test(c)?c:null}},683131,(a,b,c)=>{"use strict";let d=a.r(988064);b.exports=(a,b)=>{try{return new d(a,b).range||"*"}catch(a){return null}}},863022,(a,b,c)=>{"use strict";let d=a.r(312975),e=a.r(519603),{ANY:f}=e,g=a.r(988064),h=a.r(935473),i=a.r(429794),j=a.r(536831),k=a.r(879354),l=a.r(853551);b.exports=(a,b,c,m)=>{let n,o,p,q,r;switch(a=new d(a,m),b=new g(b,m),c){case">":n=i,o=k,p=j,q=">",r=">=";break;case"<":n=j,o=l,p=i,q="<",r="<=";break;default:throw TypeError('Must provide a hilo val of "<" or ">"')}if(h(a,b,m))return!1;for(let c=0;c<b.set.length;++c){let d=b.set[c],g=null,h=null;if(d.forEach(a=>{a.semver===f&&(a=new e(">=0.0.0")),g=g||a,h=h||a,n(a.semver,g.semver,m)?g=a:p(a.semver,h.semver,m)&&(h=a)}),g.operator===q||g.operator===r||(!h.operator||h.operator===q)&&o(a,h.semver)||h.operator===r&&p(a,h.semver))return!1}return!0}},581509,(a,b,c)=>{"use strict";let d=a.r(863022);b.exports=(a,b,c)=>d(a,b,">",c)},925749,(a,b,c)=>{"use strict";let d=a.r(863022);b.exports=(a,b,c)=>d(a,b,"<",c)},694045,(a,b,c)=>{"use strict";let d=a.r(988064);b.exports=(a,b,c)=>(a=new d(a,c),b=new d(b,c),a.intersects(b,c))},852768,(a,b,c)=>{"use strict";let d=a.r(935473),e=a.r(595965);b.exports=(a,b,c)=>{let f=[],g=null,h=null,i=a.sort((a,b)=>e(a,b,c));for(let a of i)d(a,b,c)?(h=a,g||(g=a)):(h&&f.push([g,h]),h=null,g=null);g&&f.push([g,null]);let j=[];for(let[a,b]of f)a===b?j.push(a):b||a!==i[0]?b?a===i[0]?j.push(`<=${b}`):j.push(`${a} - ${b}`):j.push(`>=${a}`):j.push("*");let k=j.join(" || "),l="string"==typeof b.raw?b.raw:String(b);return k.length<l.length?k:b}},927102,(a,b,c)=>{"use strict";let d=a.r(988064),e=a.r(519603),{ANY:f}=e,g=a.r(935473),h=a.r(595965),i=[new e(">=0.0.0-0")],j=[new e(">=0.0.0")],k=(a,b,c)=>{let d,e,k,n,o,p,q;if(a===b)return!0;if(1===a.length&&a[0].semver===f)if(1===b.length&&b[0].semver===f)return!0;else a=c.includePrerelease?i:j;if(1===b.length&&b[0].semver===f)if(c.includePrerelease)return!0;else b=j;let r=new Set;for(let b of a)">"===b.operator||">="===b.operator?d=l(d,b,c):"<"===b.operator||"<="===b.operator?e=m(e,b,c):r.add(b.semver);if(r.size>1)return null;if(d&&e&&((k=h(d.semver,e.semver,c))>0||0===k&&(">="!==d.operator||"<="!==e.operator)))return null;for(let a of r){if(d&&!g(a,String(d),c)||e&&!g(a,String(e),c))return null;for(let d of b)if(!g(a,String(d),c))return!1;return!0}let s=!!e&&!c.includePrerelease&&!!e.semver.prerelease.length&&e.semver,t=!!d&&!c.includePrerelease&&!!d.semver.prerelease.length&&d.semver;for(let a of(s&&1===s.prerelease.length&&"<"===e.operator&&0===s.prerelease[0]&&(s=!1),b)){if(q=q||">"===a.operator||">="===a.operator,p=p||"<"===a.operator||"<="===a.operator,d){if(t&&a.semver.prerelease&&a.semver.prerelease.length&&a.semver.major===t.major&&a.semver.minor===t.minor&&a.semver.patch===t.patch&&(t=!1),">"===a.operator||">="===a.operator){if((n=l(d,a,c))===a&&n!==d)return!1}else if(">="===d.operator&&!g(d.semver,String(a),c))return!1}if(e){if(s&&a.semver.prerelease&&a.semver.prerelease.length&&a.semver.major===s.major&&a.semver.minor===s.minor&&a.semver.patch===s.patch&&(s=!1),"<"===a.operator||"<="===a.operator){if((o=m(e,a,c))===a&&o!==e)return!1}else if("<="===e.operator&&!g(e.semver,String(a),c))return!1}if(!a.operator&&(e||d)&&0!==k)return!1}return(!d||!p||!!e||0===k)&&(!e||!q||!!d||0===k)&&!t&&!s&&!0},l=(a,b,c)=>{if(!a)return b;let d=h(a.semver,b.semver,c);return d>0?a:d<0||">"===b.operator&&">="===a.operator?b:a},m=(a,b,c)=>{if(!a)return b;let d=h(a.semver,b.semver,c);return d<0?a:d>0||"<"===b.operator&&"<="===a.operator?b:a};b.exports=(a,b,c={})=>{if(a===b)return!0;a=new d(a,c),b=new d(b,c);let e=!1;a:for(let d of a.set){for(let a of b.set){let b=k(d,a,c);if(e=e||null!==b,b)continue a}if(e)return!1}return!0}},412510,(a,b,c)=>{"use strict";let d=a.r(811039),e=a.r(402707),f=a.r(312975),g=a.r(957153),h=a.r(407570),i=a.r(117456),j=a.r(902088),k=a.r(687866),l=a.r(601300),m=a.r(679060),n=a.r(255371),o=a.r(917232),p=a.r(75338),q=a.r(595965),r=a.r(529721),s=a.r(403844),t=a.r(54658),u=a.r(297873),v=a.r(612918),w=a.r(429794),x=a.r(536831),y=a.r(298379),z=a.r(811916),A=a.r(853551),B=a.r(879354),C=a.r(93403),D=a.r(699080),E=a.r(519603),F=a.r(988064),G=a.r(935473),H=a.r(825202),I=a.r(222130),J=a.r(916632),K=a.r(689650),L=a.r(683131),M=a.r(863022),N=a.r(581509),O=a.r(925749),P=a.r(694045);b.exports={parse:h,valid:i,clean:j,inc:k,diff:l,major:m,minor:n,patch:o,prerelease:p,compare:q,rcompare:r,compareLoose:s,compareBuild:t,sort:u,rsort:v,gt:w,lt:x,eq:y,neq:z,gte:A,lte:B,cmp:C,coerce:D,Comparator:E,Range:F,satisfies:G,toComparators:H,maxSatisfying:I,minSatisfying:J,minVersion:K,validRange:L,outside:M,gtr:N,ltr:O,intersects:P,simplifyRange:a.r(852768),subset:a.r(927102),SemVer:f,re:d.re,src:d.src,tokens:d.t,SEMVER_SPEC_VERSION:e.SEMVER_SPEC_VERSION,RELEASE_TYPES:e.RELEASE_TYPES,compareIdentifiers:g.compareIdentifiers,rcompareIdentifiers:g.rcompareIdentifiers}},924953,736134,394849,448083,394712,a=>{"use strict";var b=a.i(11491);class c extends b.Resource{constructor(a){super(a.rid),this.available=!0,this.currentVersion=a.currentVersion,this.version=a.version,this.date=a.date,this.body=a.body,this.rawJson=a.rawJson}async download(a,c){e(c);let d=new b.Channel;a&&(d.onmessage=a);let f=await (0,b.invoke)("plugin:updater|download",{onEvent:d,rid:this.rid,...c});this.downloadedBytes=new b.Resource(f)}async install(){if(!this.downloadedBytes)throw Error("Update.install called before Update.download");await (0,b.invoke)("plugin:updater|install",{updateRid:this.rid,bytesRid:this.downloadedBytes.rid}),this.downloadedBytes=void 0}async downloadAndInstall(a,c){e(c);let d=new b.Channel;a&&(d.onmessage=a),await (0,b.invoke)("plugin:updater|download_and_install",{onEvent:d,rid:this.rid,...c})}async close(){await this.downloadedBytes?.close(),await super.close()}}async function d(a){e(a);let d=await (0,b.invoke)("plugin:updater|check",{...a});return d?new c(d):null}function e(a){a?.headers&&(a.headers=Array.from(new Headers(a.headers).entries()))}a.s(["check",()=>d],924953);class f{constructor(){this.eventListeners=Object.create(null)}addListener(a,b){return this.on(a,b)}removeListener(a,b){return this.off(a,b)}on(a,b){return a in this.eventListeners?this.eventListeners[a].push(b):this.eventListeners[a]=[b],this}once(a,b){let c=d=>{this.removeListener(a,c),b(d)};return this.addListener(a,c)}off(a,b){return a in this.eventListeners&&(this.eventListeners[a]=this.eventListeners[a].filter(a=>a!==b)),this}removeAllListeners(a){return a?delete this.eventListeners[a]:this.eventListeners=Object.create(null),this}emit(a,b){if(a in this.eventListeners){for(let c of this.eventListeners[a])c(b);return!0}return!1}listenerCount(a){return a in this.eventListeners?this.eventListeners[a].length:0}prependListener(a,b){return a in this.eventListeners?this.eventListeners[a].unshift(b):this.eventListeners[a]=[b],this}prependOnceListener(a,b){let c=d=>{this.removeListener(a,c),b(d)};return this.prependListener(a,c)}}class g{constructor(a){this.pid=a}async write(a){await (0,b.invoke)("plugin:shell|stdin_write",{pid:this.pid,buffer:a})}async kill(){await (0,b.invoke)("plugin:shell|kill",{cmd:"killChild",pid:this.pid})}}class h extends f{constructor(a,b=[],c){super(),this.stdout=new f,this.stderr=new f,this.program=a,this.args="string"==typeof b?[b]:b,this.options=c??{}}static create(a,b=[],c){return new h(a,b,c)}static sidecar(a,b=[],c){let d=new h(a,b,c);return d.options.sidecar=!0,d}async spawn(){let a=this.program,c=this.args,d=this.options;"object"==typeof c&&Object.freeze(c);let e=new b.Channel;return e.onmessage=a=>{switch(a.event){case"Error":this.emit("error",a.payload);break;case"Terminated":this.emit("close",a.payload);break;case"Stdout":this.stdout.emit("data",a.payload);break;case"Stderr":this.stderr.emit("data",a.payload)}},await (0,b.invoke)("plugin:shell|spawn",{program:a,args:c,options:d,onEvent:e}).then(a=>new g(a))}async execute(){let a=this.program,c=this.args,d=this.options;return"object"==typeof c&&Object.freeze(c),await (0,b.invoke)("plugin:shell|execute",{program:a,args:c,options:d})}}a.s(["Command",()=>h],736134);var i=a.i(649970),j=a.i(863052);let k="Daily Quota Exceeded",l="translations",m={},n={},o=()=>new Promise((a,b)=>{if(!window.indexedDB){console.warn("IndexedDB not supported. Using in-memory cache only."),b(Error("IndexedDB not supported"));return}let c=indexedDB.open("TranslationCache",1);c.onerror=a=>{console.error("IndexedDB error:",a),b(Error("Could not open IndexedDB"))},c.onsuccess=b=>{a(b.target.result)},c.onupgradeneeded=a=>{let b=a.target.result;if(!b.objectStoreNames.contains(l)){let a=b.createObjectStore(l,{keyPath:"key"});a.createIndex("provider","provider",{unique:!1}),a.createIndex("timestamp","timestamp",{unique:!1})}}}),p=(a,b,c,d)=>`${d}:${b}:${c}:${a}`,q=async(a,b,c,d)=>{if(!a?.trim())return null;let e=p(a,b,c,d);if(m[e])return m[e];try{let a=await o(),b=a.transaction(l,"readonly"),c=b.objectStore(l).get(e);return new Promise(d=>{c.onsuccess=()=>{let a=c.result;a?(m[e]=a.translation,n[e]=a.timestamp,d(a.translation)):d(null)},c.onerror=()=>{d(null)},b.oncomplete=()=>{a.close()}})}catch(a){return console.error("Error accessing IndexedDB:",a),null}},r=async(a,b,c,d,e)=>{if(!a?.trim()||!b)return;let f=p(a,c,d,e),g=Date.now();m[f]=b,n[f]=g;try{let h=await o(),i=h.transaction(l,"readwrite");return i.objectStore(l).put({key:f,translation:b,timestamp:g,provider:e,sourceLang:c,targetLang:d,originalText:a}),new Promise((a,b)=>{i.oncomplete=()=>{h.close(),a()},i.onerror=a=>{console.error("Error storing in IndexedDB:",a),b(Error("Failed to store in IndexedDB"))}})}catch(a){console.error("Error accessing IndexedDB:",a)}},s={zh:a=>a.replace(/--/g,"⸺").replace(/\s+([。、！？])/g,"$1").replace(/([。、！？])\s+/g,"$1"),es:a=>a.replace(/\?([A-ZÁÉÍÓÚÑÜ])/g,"? $1").replace(/\!([A-ZÁÉÍÓÚÑÜ])/g,"! $1"),fr:a=>a.replace(/\s+([!?:;])/g," $1").replace(/([!?:;])\s+/g,"$1 "),ja:a=>a.replace(/\s+([。、！？])/g,"$1").replace(/([。、！？])\s+/g,"$1")},t=a=>a.replace(/\s+/g," ").replace(/\s+([.,!?;:])/g,"$1").trim();function u(a,b){let c,d=(c=s[b.split("-")[0].toLowerCase()])?a=>c(t(a)):t;return a.map(d)}let v={Cover:"The Cover",Dedication:"Dedication Page",Acknowledgements:"The Acknowledgements"};var w=a.i(833047),x=a.i(73552),y=a.i(339144),z=a.i(506892),A=a.i(657123),B=a.i(568338);let C=(0,w.getAPIBaseUrl)()+"/deepl/translate",D={name:"deepl",label:(0,x.stubTranslation)("DeepL"),authRequired:!0,quotaExceeded:!1,translate:async(a,b,c,d,e=!1)=>{let f=D.authRequired,g={"Content-Type":"application/json"},h="free";if(d&&(h=(0,y.getSubscriptionPlan)(d),g.Authorization=`Bearer ${d}`),f&&!d)throw Error("Authentication token is required for DeepL translation");let i=JSON.stringify({text:a,source_lang:(0,z.normalizeToShortLang)(b).toUpperCase(),target_lang:(0,z.normalizeToShortLang)(c).toUpperCase(),use_cache:e}),j=A.DEFAULT_DAILY_TRANSLATION_QUOTA[h];try{let b=await fetch(C,{method:"POST",headers:g,body:i});if(!b.ok){let a=await b.json();if(a&&a.error&&a.error===k)throw(0,B.saveDailyUsage)(j),D.quotaExceeded=!0,Error(k);throw Error(`Translation failed with status ${b.status}`)}let c=await b.json();if(!c||!c.translations)throw Error("Invalid response from translation service");return a.map((a,b)=>{if(!a?.trim().length)return a;let d=c.translations?.[b];return d?.daily_usage&&((0,B.saveDailyUsage)(d.daily_usage),D.quotaExceeded=c.daily_usage>=j),d?.text||a})}catch(a){throw a}}};var E=a.i(288638);let F=null,G=async()=>{let a=Date.now();if(F&&F.expiresAt>a)return F.token;try{let b=(0,w.isTauriAppPlatform)()?E.fetch:window.fetch,c=await b("https://edge.microsoft.com/translate/auth",{method:"GET",headers:{"User-Agent":"Mozilla/5.0"}});if(!c.ok)throw Error(`Failed to get auth token: ${c.status}`);let d=await c.text();return F={token:d,expiresAt:a+48e4},d}catch(a){throw console.error("Error getting Microsoft translation auth token:",a),a}},H={name:"azure",label:(0,x.stubTranslation)("Azure Translator"),translate:async(a,b,c)=>{if(!a.length)return[];let d=[],e=b?(0,z.normalizeToFullLang)(b):"",f=(0,z.normalizeToFullLang)(c),g=a.map(async(a,b)=>{if(!a?.trim().length){d[b]=a;return}let c=new URLSearchParams({to:f,"api-version":"3.0"});e&&"auto"!==e.toLowerCase()&&c.append("from",e);let g=await G(),h=(0,w.isTauriAppPlatform)()?E.fetch:window.fetch,i=await h(`https://api-edge.cognitive.microsofttranslator.com/translate?${c.toString()}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${g}`},body:JSON.stringify([{Text:a}])});if(!i.ok)throw Error(`Translation failed with status ${i.status}`);let j=await i.json();Array.isArray(j)&&j.length>0&&j[0].translations?d[b]=j[0].translations[0].text||a:d[b]=a});return await Promise.all(g),d}},I={name:"google",label:(0,x.stubTranslation)("Google Translate"),translate:async(a,b,c)=>{if(!a.length)return[];let d=[],e=a.map(async(a,e)=>{if(!a?.trim().length){d[e]=a;return}let f=new URL("https://translate.googleapis.com/translate_a/single");f.searchParams.append("client","gtx"),f.searchParams.append("dt","t"),f.searchParams.append("sl",(0,z.normalizeToShortLang)(b).toLowerCase()||"auto"),f.searchParams.append("tl",(0,z.normalizeToShortLang)(c).toLowerCase()),f.searchParams.append("q",a);let g=(0,w.isTauriAppPlatform)()?E.fetch:window.fetch,h=await g(f.toString());if(!h.ok)throw Error(`Translation failed with status ${h.status}`);let i=await h.json();if(Array.isArray(i)&&Array.isArray(i[0])){let b=i[0].filter(a=>Array.isArray(a)&&a[0]).map(a=>a[0]).join("");d[e]=b||a}else d[e]=a});return await Promise.all(e),d}};async function J(a,b,c){let d=(0,w.isTauriAppPlatform)()?E.fetch:window.fetch,e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({lang:b,service:c,text:a})},f=await d("https://translate.toil.cc/v2/translate/",e);if(!f.ok){let b=JSON.stringify(await f.json());throw Error(`${c} failed with status ${f.status}
${a.length}
${JSON.stringify(e)}
${b}`)}let g=await f.json();return g&&Array.isArray(g.translations)?g.translations:[a]}let K={name:"yandex",label:(0,x.stubTranslation)("Yandex Translate"),authRequired:!1,translate:async(a,b,c)=>{if(!a.length)return[];let d="AUTO"==b?"en":(0,z.normalizeToShortLang)(b).toLowerCase(),e=(0,z.normalizeToShortLang)(c).toLowerCase(),f=`${d}-${e}`;return(await Promise.all(a.map(async a=>await J(a,f,"yandexgpt")))).flat()}};function L(a,b){if(a!==b.name)throw Error(`Translator name "${a}" does not match implementation name "${b.name}"`);return b}let M=[L("deepl",D),L("azure",H),L("google",I),L("yandex",K)],N=a=>M.find(b=>b.name===a),O=()=>M;a.s(["getTranslator",0,N,"getTranslators",0,O],394849),a.s([],448083);var P=a.i(690557),Q=a.i(506017);function R({provider:a="deepl",sourceLang:b="AUTO",targetLang:c="EN",enablePolishing:d=!0,enablePreprocessing:e=!0}={}){let f=(0,Q.useTranslation)(),{token:g}=(0,j.useAuth)(),[h,l]=(0,i.useState)(!1),[m,n]=(0,i.useState)(a),[o,p]=(0,i.useState)(()=>N(a)),[s]=(0,i.useState)(()=>O());return(0,i.useEffect)(()=>{l(!1)},[a,b,c]),(0,i.useEffect)(()=>{let b=O().filter(a=>(!a.authRequired||!!g)&&!a.quotaExceeded),c=(b.find(b=>b.name===a)||b[0]).name;p(N(c)),n(c)},[a]),{translate:(0,i.useCallback)(async(a,h)=>{let i=h?.source||b,j=h?.target||c||(0,x.getLocale)(),o=h?.useCache??!1,p=e?function(a,b={}){let c=function(a={}){return b=>{let c;return 0===Object.keys(c={...v,...a}).length?b:c[b]?c[b]:b}}(b);return a.map(c)}(a):a;if(0===p.length||p.every(a=>!a?.trim()))return p;let t=[],w=[];if(await Promise.all(p.map(async(a,b)=>{!a?.trim()||await q(a,i,j,m)||(t.push(a),w.push(b))})),0===t.length){let a=await Promise.all(p.map(a=>q(a,i,j,m).then(b=>b||a)));return d?u(a,j):a}l(!0);try{let a=s.find(a=>a.name===m);if(!a)throw Error(`No translator found for provider: ${m}`);let b=await a.translate(t,i,j,g,o);await Promise.all(t.map(async(a,c)=>r(a,b[c]||"",i,j,m)));let c=[...p];return w.forEach((a,d)=>{c[a]=b[d]||""}),await Promise.all(c.map(async(a,b)=>{if(!w.includes(b)){let a=p[b];if(!a?.trim())return;let d=await q(a,i,j,m);d&&(c[b]=d)}})),l(!1),d?u(c,j):c}catch(a){throw a instanceof Error&&a.message.includes(k)&&(P.eventDispatcher.dispatch("toast",{timeout:5e3,message:f("Daily translation quota reached. Upgrade your plan to continue using AI translations."),type:"error"}),n("azure")),l(!1),a instanceof Error?a:Error(String(a))}},[m,b,c,o,g]),translator:o,translators:s,loading:h}}a.s(["useTranslator",()=>R],394712)},325219,804638,392212,383729,359978,a=>{"use strict";a.s(["UpdaterContent",()=>O,"UpdaterWindow",()=>Q,"setUpdaterWindowVisible",()=>P],325219);var b=a.i(92585),c=a.i(239337),d=a.i(412510),e=a.i(499527),f=a.i(592385),g=a.i(649970),h=a.i(619974),i=a.i(924953),j=a.i(858630),k=a.i(288638),l=a.i(736134),m=a.i(11491),n=a.i(833047),o=a.i(394712),p=a.i(506017),q=a.i(165696),r=a.i(877048),s=a.i(504621),t=a.i(649661),u=a.i(461937),v=a.i(73552),w=a.i(865950),x=a.i(657123),y=a.i(205558);let z=(a,b,c)=>{let d=(0,g.useRef)(!1),e=(0,g.useRef)(0),f=(0,g.useRef)(0),h=(0,g.useRef)(0),i=(0,g.useRef)(0),j=(0,g.useRef)(0);return{handleDragStart:(0,g.useCallback)(b=>{d.current=!0,"touches"in b?(f.current=b.touches[0].clientY,e.current=b.touches[0].clientX):(f.current=b.clientY,e.current=b.clientX),j.current=performance.now(),document.body.style.pointerEvents="none",document.body.style.userSelect="none",document.documentElement.style.cursor="col-resize";let g=b=>{if(d.current){let c=0,d=0,e=0,f=0;if("touches"in b&&b.touches.length>0){let a=b.touches[0];e=a.clientX,f=a.clientY}else e=b.clientX,f=b.clientY;c=e-h.current,d=f-i.current,h.current=e,i.current=f,a({clientX:e,clientY:f,deltaX:c,deltaY:d})}},k=a=>{d.current=!1,document.body.style.pointerEvents="",document.body.style.userSelect="",document.documentElement.style.cursor="";let b=0,h=0,i=0,l=0,m=performance.now()-j.current;if("touches"in a){let b=a.changedTouches[0];i=b.clientX,l=b.clientY}else i=a.clientX,l=a.clientY;b=i-e.current;let n=(h=l-f.current)/m;c&&c({velocity:n,deltaT:m,clientX:i,clientY:l,deltaX:b,deltaY:h}),window.removeEventListener("mousemove",g),window.removeEventListener("mouseup",k),window.removeEventListener("touchmove",g),window.removeEventListener("touchend",k)};window.addEventListener("mousemove",g,{passive:!0}),window.addEventListener("mouseup",k),window.addEventListener("touchmove",g,{passive:!0}),window.addEventListener("touchend",k)},[a,c]),handleDragKeyDown:(0,g.useCallback)(a=>{switch(a.key){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":b({key:a.key,step:.02});break;default:return}a.preventDefault(),a.stopPropagation()},[b])}};a.s(["useDrag",0,z],804638);var A=a.i(407027),B=a.i(968366),C=a.i(690557);let D=a=>"VolumeUp"===a||"VolumeDown"===a?C.eventDispatcher.dispatch("native-key-down",{keyName:a}):"Back"===a&&C.eventDispatcher.dispatchSync("native-key-down",{keyName:a}),E=(0,B.create)((a,b)=>({volumeKeysIntercepted:!1,backKeyIntercepted:!1,volumeKeysInterceptionCount:0,backKeyInterceptionCount:0,acquireVolumeKeyInterception:()=>{let{volumeKeysInterceptionCount:c}=b();0==c&&(window.onNativeKeyDown=D,(0,t.interceptKeys)({volumeKeys:!0}),a({volumeKeysIntercepted:!0})),a({volumeKeysInterceptionCount:c+1})},releaseVolumeKeyInterception:()=>{let{volumeKeysInterceptionCount:c}=b();c<=1?((0,t.interceptKeys)({volumeKeys:!1}),a({volumeKeysIntercepted:!1,volumeKeysInterceptionCount:0})):a({volumeKeysInterceptionCount:c-1})},acquireBackKeyInterception:()=>{let{backKeyInterceptionCount:c}=b();0==c&&(window.onNativeKeyDown=D,(0,t.interceptKeys)({backKey:!0}),a({backKeyIntercepted:!0})),a({backKeyInterceptionCount:c+1})},releaseBackKeyInterception:()=>{let{backKeyInterceptionCount:c}=b();c<=1?((0,t.interceptKeys)({backKey:!1}),a({backKeyIntercepted:!1,backKeyInterceptionCount:0})):a({backKeyInterceptionCount:c-1})},listenToNativeTouchEvents:()=>{window.onNativeTouch=a=>C.eventDispatcher.dispatch("native-touch",a)},getScreenBrightness:async()=>(await (0,t.getScreenBrightness)()).brightness,setScreenBrightness:async a=>{await (0,t.setScreenBrightness)({brightness:a})}}));a.s(["useDeviceControlStore",0,E],392212);var F=a.i(268120);a.i(586360);let{vibrate:G,impactFeedback:H,notificationFeedback:I,selectionFeedback:J}={async vibrate(a){try{return{status:"ok",data:await (0,m.invoke)("plugin:haptics|vibrate",{duration:a})}}catch(a){if(!(a instanceof Error))return{status:"error",error:a};throw a}},async impactFeedback(a){try{return{status:"ok",data:await (0,m.invoke)("plugin:haptics|impact_feedback",{style:a})}}catch(a){if(!(a instanceof Error))return{status:"error",error:a};throw a}},async notificationFeedback(a){try{return{status:"ok",data:await (0,m.invoke)("plugin:haptics|notification_feedback",{type:a})}}catch(a){if(!(a instanceof Error))return{status:"error",error:a};throw a}},async selectionFeedback(){try{return{status:"ok",data:await (0,m.invoke)("plugin:haptics|selection_feedback")}}catch(a){if(!(a instanceof Error))return{status:"error",error:a};throw a}}};a.s(["impactFeedback",()=>H],383729);var K=a.i(243648),L=a.i(883639);let M=({id:a,isOpen:d,children:e,snapHeight:h,header:i,title:j,className:k,bgClassName:l,boxClassName:m,contentClassName:n,onClose:o})=>{let q=(0,p.useTranslation)(),{appService:r}=(0,f.useEnv)(),{systemUIVisible:s,statusBarHeight:t,safeAreaInsets:u}=(0,A.useThemeStore)(),{acquireBackKeyInterception:v,releaseBackKeyInterception:w}=E(),[x,B]=(0,g.useState)(!h),[D]=(0,g.useState)(()=>"rtl"===(0,K.getDirFromUILanguage)()),G=(0,g.useRef)(null),I=(0,g.useRef)(null),J=(0,F.useResponsiveSize)(22),M=window.innerWidth<640||window.innerHeight<640,N=a=>{if(a instanceof CustomEvent){if("Back"===a.detail.keyName)return o(),!0}else"Escape"===a.key&&o(),a.stopPropagation();return!1};(0,g.useEffect)(()=>{if(!d){I.current&&(I.current.focus(),I.current=null);return}I.current=document.activeElement,B(!h&&M),window.addEventListener("keydown",N),G.current&&G.current.addEventListener("keydown",N),r?.isAndroidApp&&(v(),C.eventDispatcher.onSync("native-key-down",N));let a=setTimeout(()=>{G.current&&G.current.focus()},100);return()=>{clearTimeout(a),window.removeEventListener("keydown",N),r?.isAndroidApp&&(w(),C.eventDispatcher.offSync("native-key-down",N))}},[d]);let{handleDragStart:O}=z(a=>{if(!M||!G.current)return;let b=G.current.querySelector(".modal-box"),c=G.current.querySelector(".overlay"),d=a.clientY/window.innerHeight,e=Math.max(0,Math.min(1,d));b&&c&&(b.style.height="100%",b.style.transform=`translateY(${100*e}%)`,c.style.opacity=`${1-d}`,B(a.clientY<44),b.style.transition="padding-top 0.3s ease-out")},()=>{},a=>{if(!M||!G.current)return;let b=G.current.querySelector(".modal-box"),c=G.current.querySelector(".overlay");if(!b||!c)return;let d=h?1-h+.2:.5;if(a.velocity>.5||a.velocity>=0&&a.clientY>=window.innerHeight*d){let d=.15/Math.max(a.velocity,.5);b.style.height="100%",b.style.transition=`transform ${d}s ease-out`,b.style.transform="translateY(100%)",c.style.transition=`opacity ${d}s ease-out`,c.style.opacity="0",o(),setTimeout(()=>{b.style.transform="translateY(0%)"},300)}else h&&a.clientY>window.innerHeight*(h?1-h-.2:.5)&&a.clientY<window.innerHeight*d?(c.style.transition="opacity 0.3s ease-out",c.style.opacity=`${1-h}`,b.style.height=`${100*h}%`,b.style.bottom="0",b.style.transition="transform 0.3s ease-out",b.style.transform=""):(B(!0),b.style.height="100%",b.style.transition="transform 0.3s ease-out",b.style.transform="translateY(0%)",c.style.opacity="0");r?.hasHaptics&&H("medium")});return(0,b.jsxs)("dialog",{ref:G,id:a??"dialog",tabIndex:-1,open:d,"aria-hidden":!d,className:(0,c.default)("modal sm:min-w-90 z-50 h-full w-full !items-start !bg-transparent sm:w-full sm:!items-center",k),dir:D?"rtl":void 0,children:[(0,b.jsx)(L.Overlay,{className:(0,c.default)("dialog-overlay z-10 bg-black/50 sm:bg-black/50",r?.hasRoundedWindow&&"rounded-window",l),onDismiss:o}),(0,b.jsxs)("div",{className:(0,c.default)("modal-box settings-content absolute z-20 flex flex-col rounded-none rounded-tl-2xl rounded-tr-2xl p-0 sm:rounded-2xl","h-full max-h-full w-full max-w-full",window.innerWidth<window.innerHeight?"sm:h-[50%] sm:w-3/4":"sm:h-[65%] sm:w-1/2 sm:max-w-[600px]",m),style:{paddingTop:r?.hasSafeAreaInset&&x?`${Math.max(u?.top||0,s?t:0)}px`:"0px",...M?{height:h?`${100*h}%`:"100%",bottom:0}:{}},children:[(0,b.jsx)("div",{className:(0,c.default)("drag-handle h-10 max-h-10 min-h-10 w-full cursor-row-resize items-center justify-center","transition-padding-top flex duration-300 ease-out sm:hidden"),onMouseDown:O,onTouchStart:O,children:(0,b.jsx)("div",{className:"bg-base-content/50 h-1 w-10 rounded-full"})}),(0,b.jsx)("div",{className:"dialog-header sticky top-1 z-10 flex items-center justify-between px-2 sm:px-4",children:i||(0,b.jsxs)("div",{className:"flex h-11 w-full items-center justify-between",children:[(0,b.jsx)("button",{"aria-label":q("Close"),onClick:o,className:"btn btn-ghost btn-circle flex h-8 min-h-8 w-8 hover:bg-transparent focus:outline-none sm:hidden",children:D?(0,b.jsx)(y.MdArrowForwardIos,{size:J}):(0,b.jsx)(y.MdArrowBackIosNew,{size:J})}),(0,b.jsx)("div",{className:"z-15 pointer-events-none absolute inset-0 flex h-11 items-center justify-center",children:(0,b.jsx)("span",{className:"line-clamp-1 text-center font-bold",children:j??""})}),(0,b.jsx)("button",{"aria-label":q("Close"),onClick:o,className:"bg-base-300/65 btn btn-ghost btn-circle ml-auto hidden h-6 min-h-6 w-6 focus:outline-none sm:flex",children:(0,b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{fill:"currentColor",d:"M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12z"})})})]})}),(0,b.jsx)("div",{className:(0,c.default)("text-base-content my-2 flex-grow overflow-y-auto px-6 sm:px-[10%]",n),children:e})]})]})};a.s(["default",0,M],359978);var N=a.i(646207);let O=({latestVersion:a,lastVersion:y,checkUpdate:z=!0})=>{let A=(0,p.useTranslation)(),[B,C]=(0,g.useState)("EN"),{translate:D}=(0,o.useTranslator)({provider:"azure",sourceLang:"AUTO",targetLang:B}),{appService:E}=(0,f.useEnv)(),F=(0,q.useSearchParams)(),G=(0,r.getAppVersion)(),[H,I]=(0,g.useState)(a??F?.get("latestVersion")??""),[J,K]=(0,g.useState)(y??F?.get("lastVersion")??""),[L,M]=(0,g.useState)(null),[O,P]=(0,g.useState)([]),[Q,R]=(0,g.useState)(null),[S,T]=(0,g.useState)(null),[U,V]=(0,g.useState)(!1),[W,X]=(0,g.useState)(null),[Y,Z]=(0,g.useState)(!1);(0,g.useEffect)(()=>{C((0,v.getLocale)())},[]),(0,g.useEffect)(()=>{let a=async()=>{let a=await (0,i.check)();a&&M(a)},b=async()=>{if(!E)return;let a=(0,n.isTauriAppPlatform)()?k.fetch:window.fetch,b=await a(x.READEST_UPDATER_FILE),c=await b.json();if(d.default.gt(c.version,G)){let a=(0,h.arch)(),b=c.platforms["aarch64"===a?"android-arm64":"android-universal"]?.url,d=await E.resolveFilePath(`Readest_${c.version}_${"aarch64"===a?"arm64":"universal"}.apk`,"Cache");M({currentVersion:G,version:c.version,date:c.pub_date,body:c.notes,downloadAndInstall:async a=>{await new Promise(async(c,e)=>{let f=0,g=0;await (0,s.tauriDownload)(b,d,b=>{a&&(!g&&b.total?a({event:"Started",data:{contentLength:g=b.total}}):f>0&&b.progress===b.total&&(console.log("APK downloaded to",d),a?.({event:"Finished"}),setTimeout(()=>{c()},1e3)),a({event:"Progress",data:{chunkLength:b.progress-f}}),f=b.progress)}).catch(a=>{console.error("Download failed:",a),e(a)})});let c=await (0,t.installPackage)({path:d});c.success?console.log("APK installed successfully"):console.error("Failed to install APK:",c.error)}})}},c=async()=>{if(!E)return;let a=(0,n.isTauriAppPlatform)()?k.fetch:window.fetch,b=await a(x.READEST_UPDATER_FILE),c=await b.json();if(d.default.gt(c.version,G)){let a=(0,h.arch)(),b=c.platforms["x86_64"===a?"windows-x86_64-portable":"windows-aarch64-portable"]?.url,d=await (0,m.invoke)("get_executable_dir"),e=`Readest_${c.version}_${"x86_64"===a?"x64":"arm64"}-portable.exe`,f=await (0,u.join)(d,e);M({currentVersion:G,version:c.version,date:c.pub_date,body:c.notes,downloadAndInstall:async a=>{await new Promise(async(c,d)=>{let e=0,g=0;await (0,s.tauriDownload)(b,f,b=>{a&&(!g&&b.total?a({event:"Started",data:{contentLength:g=b.total}}):e>0&&b.progress===b.total&&(console.log("Portable EXE downloaded to",f),a?.({event:"Finished"}),setTimeout(()=>{c()},1e3)),a({event:"Progress",data:{chunkLength:b.progress-e}}),e=b.progress)}).catch(a=>{console.error("Download failed:",a),d(a)})});try{console.log("Launching new executable:",f);let a=l.Command.create("start-readest",["/C","start","",f]);await a.spawn(),console.log("New executable launched, exiting current app..."),setTimeout(async()=>{await (0,j.exit)(0)},500)}catch(a){console.error("Failed to launch new executable:",a)}}})}},e=async()=>{let d=(0,h.type)();E?.isPortableApp&&"windows"===d?c():["macos","windows","linux"].includes(d)?a():"android"===d&&b()};E?.hasUpdater&&z&&e()},[E?.hasUpdater]),(0,g.useEffect)(()=>{a&&I(a),y&&K(y),z||M({currentVersion:G,version:a,date:"",body:""})},[a,y,z]),(0,g.useEffect)(()=>{let a=async a=>{try{let b=(0,n.isTauriAppPlatform)()?k.fetch:window.fetch,c=await b(x.READEST_CHANGELOG_FILE),e=(await c.json()).releases,f=Object.entries(e).filter(([b])=>d.default.gt(b,a)).sort(([a],[b])=>d.default.rcompare(a,b));return(f=f.length?f:Object.entries(e).slice(0,3)).map(([a,b])=>({version:a,date:new Date(b.date).toLocaleDateString(),notes:b.notes}))}catch(a){return console.error("Failed to fetch changelog:",a),[]}},b=async b=>{I(b.version);let c=await a(J||G);if(0===c.length&&b.date&&b.body&&(c=[{version:b.version,date:new Date(b.date).toLocaleDateString(),notes:(b.body??"").split(/(?:^|\s)\d+\.\s/).map(a=>a.trim()).filter(a=>a.length>0)}]),!B.toLowerCase().startsWith("en"))for(let a of c)try{a.notes=await D(a.notes,{useCache:!0})}catch(a){console.log("Failed to translate changelog:",a)}P(c),(0,w.setLastShownReleaseNotesVersion)(H)};L&&b(L)},[L]),(0,g.useEffect)(()=>{Z(!0)},[]);let $=async()=>{if(!L)return;let a=0,b=0,c=0;R(0),V(!0),await L.downloadAndInstall?.(d=>{switch(d.event){case"Started":T(b=d.data.contentLength);break;case"Progress":X(a+=d.data.chunkLength),R(Math.floor(a/b*100)),a-c>=1048576&&(console.log(`downloaded ${a} bytes from ${b}`),c=a);break;case"Finished":console.log("download finished"),R(100)}}),console.log("package installed"),E?.isAndroidApp||await (0,j.relaunch)()};return Y&&H?(0,b.jsx)("div",{className:"bg-base-100 flex min-h-screen justify-center",children:(0,b.jsxs)("div",{className:"flex w-full max-w-2xl flex-col gap-4",children:[(0,b.jsxs)("div",{className:"flex flex-col justify-center gap-4 sm:flex-row sm:items-start",children:[(0,b.jsx)("div",{className:"flex items-center justify-center",children:(0,b.jsx)(e.default,{src:"/icon.png",alt:"Logo",className:"h-20 w-20",width:64,height:64})}),z?(0,b.jsxs)("div",{className:"text-base-content flex-grow text-sm",children:[(0,b.jsx)("h2",{className:"mb-4 text-center font-bold sm:text-start",children:A("A new version of Readest is available!")}),(0,b.jsx)("p",{className:"mb-2",children:A("Readest {{newVersion}} is available (installed version {{currentVersion}}).",{newVersion:H,currentVersion:G})}),(0,b.jsx)("p",{className:"mb-2",children:A("Download and install now?")}),(0,b.jsxs)("div",{className:"flex w-full flex-row items-center justify-end gap-4",children:[null!==Q&&(0,b.jsxs)("div",{className:"flex flex-grow flex-col",children:[(0,b.jsx)("progress",{className:"progress my-1 h-4 w-full",value:Q,max:"100"}),(0,b.jsx)("p",{className:"text-base-content/75 flex items-center justify-center text-sm",children:Q<100?A("Downloading {{downloaded}} of {{contentLength}}",{downloaded:W?`${Math.floor(W/1024/1024)} MB`:"0 MB",contentLength:S?`${Math.floor(S/1024/1024)} MB`:"0 MB"}):A("Download finished")})]}),(0,b.jsx)("div",{className:"card-actions",children:(0,b.jsx)("button",{className:(0,c.default)("btn btn-warning text-base-100 px-6 font-bold",(!L||U)&&"btn-disabled"),onClick:$,children:A("DOWNLOAD & INSTALL")})})]})]}):(0,b.jsx)("div",{className:"text-base-content flex h-full flex-grow flex-col text-sm sm:flex-row",children:(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center gap-4 p-1 sm:items-start sm:gap-2",children:[(0,b.jsx)("h2",{className:"text-center font-bold sm:text-start",children:A("Version {{version}}",{version:G})}),O.length>0&&d.default.gt(O[0].version,G)?(0,b.jsxs)("div",{className:"flex gap-2",children:[(E?.isIOSApp||E?.isMacOSApp)&&(0,b.jsx)(N.default,{href:"https://apps.apple.com/app/id6738622779",target:"_blank",rel:"noopener noreferrer",className:"btn btn-primary btn-sm",children:A("Check Update")}),E?.isAndroidApp&&(0,b.jsx)(N.default,{href:"https://play.google.com/store/apps/details?id=com.bilingify.readest",target:"_blank",rel:"noopener noreferrer",className:"btn btn-primary btn-sm",children:A("Check Update")})]}):(0,b.jsx)("div",{className:"flex",children:(0,b.jsx)("p",{className:"text-sm font-bold",children:A("Already the latest version")})})]})})]}),(0,b.jsxs)("div",{className:"text-base-content text-sm",children:[(0,b.jsx)("h3",{className:"mb-2 font-bold",children:A("Changelog")}),(0,b.jsx)("div",{className:"not-eink:bg-base-200 not-eink:px-4 mb-4 rounded-lg pb-2 pt-4",children:O.length>0?O.map(a=>(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsxs)("h4",{className:"mb-2 font-bold",children:[a.version," (",a.date,")"]}),(0,b.jsx)("ul",{className:"list-disc space-y-1 ps-6 text-sm",children:a.notes.map((a,c)=>(0,b.jsx)("li",{children:a},c))})]},a.version)):(0,b.jsxs)("div",{className:"flex h-56 w-full flex-col gap-4",children:[(0,b.jsx)("div",{className:"skeleton h-4 w-28"}),(0,b.jsx)("div",{className:"skeleton h-4 w-full"}),(0,b.jsx)("div",{className:"skeleton h-4 w-full"})]})})]})]})}):null},P=(a,b,c,d=!0)=>{let e=document.getElementById("updater_window");if(e){let f=new CustomEvent("setDialogVisibility",{detail:{visible:a,latestVersion:b,lastVersion:c,checkUpdate:d}});e.dispatchEvent(f)}},Q=()=>{let a=(0,p.useTranslation)(),[c,d]=(0,g.useState)(""),[e,f]=(0,g.useState)(""),[h,i]=(0,g.useState)(!0),[j,k]=(0,g.useState)(!1);return(0,g.useEffect)(()=>{let a=a=>{let{visible:b,latestVersion:c,lastVersion:e,checkUpdate:g}=a.detail;k(b),i(g),c&&d(c),e&&f(e)},b=document.getElementById("updater_window");return b&&b.addEventListener("setDialogVisibility",a),()=>{b&&b.removeEventListener("setDialogVisibility",a)}},[]),(0,b.jsx)(M,{id:"updater_window",isOpen:j,title:a(h?"Software Update":"What's New in Readest"),onClose:()=>k(!1),boxClassName:"sm:!w-[75%] sm:h-auto sm:!max-h-[85vh] sm:!max-w-2xl",children:j&&(0,b.jsx)(O,{latestVersion:c??void 0,lastVersion:e??void 0,checkUpdate:h})})}},865950,a=>{"use strict";a.s(["checkAppReleaseNotes",()=>o,"checkForAppUpdates",()=>l,"setLastShownReleaseNotesVersion",()=>n]);var b=a.i(412510),c=a.i(924953),d=a.i(619974),e=a.i(288638),f=a.i(284696),g=a.i(325219),h=a.i(833047),i=a.i(877048),j=a.i(657123);let k="lastAppUpdateCheck",l=async(a,h=!0)=>{let l=localStorage.getItem(k),m=Date.now();if(h&&l&&m-parseInt(l,10)<1e3*j.CHECK_UPDATE_INTERVAL_SEC)return!1;localStorage.setItem(k,m.toString()),console.log("Checking for updates");let n=(0,d.type)();if(["macos","windows","linux"].includes(n)){var o;let a,b=await (0,c.check)();return b&&(o=b.version,(a=new f.WebviewWindow("updater",{url:`/updater?latestVersion=${o}`,title:"Software Update",width:626,height:406,center:!0,resizable:!0})).once("tauri://created",()=>{console.log("new window created")}),a.once("tauri://error",a=>{console.error("error creating window",a)})),!!b}if("android"===n)try{let a=await (0,e.fetch)(j.READEST_UPDATER_FILE,{connectTimeout:5e3}),c=await a.json(),d=b.default.gt(c.version,(0,i.getAppVersion)());return d&&("android-arm64"in c.platforms||"android-universal"in c.platforms)&&(0,g.setUpdaterWindowVisible)(!0,c.version,(0,i.getAppVersion)()),d}catch(a){throw console.warn("Failed to fetch Android update info",a),Error("Failed to fetch Android update info")}return!1},m="lastShownReleaseNotesVersion",n=a=>{localStorage.setItem(m,a)},o=async(a=!0)=>{let c=(0,i.getAppVersion)(),d=localStorage.getItem(m)||"";if(d&&b.default.gt(c,d)||!a)try{let a=(0,h.isTauriAppPlatform)()?e.fetch:window.fetch;if((await a(j.READEST_CHANGELOG_FILE)).ok)return(0,g.setUpdaterWindowVisible)(!0,c,d,!1),!0}catch(a){console.warn("Failed to fetch release notes",a)}else d||n(c);return!1}},963508,a=>{"use strict";var b=a.i(92585),c=a.i(239337),d=a.i(407027),e=a.i(506017);a.s(["default",0,({loading:a,className:f})=>{let g=(0,e.useTranslation)(),{safeAreaInsets:h}=(0,d.useThemeStore)();return a?(0,b.jsxs)("div",{className:(0,c.default)("absolute left-1/2 top-4 -translate-x-1/2 transform text-center"),style:{paddingTop:`${(h?.top||0)+64}px`},role:"status",children:[(0,b.jsx)("span",{className:(0,c.default)("loading loading-lg not-eink:loading-dots eink:loading-spinner",f)}),(0,b.jsx)("span",{className:"sr-only",children:g("Loading...")})]}):null}])}];

//# sourceMappingURL=_527f98bd._.js.map
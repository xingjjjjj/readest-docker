{"version":3,"sources":["../../../../../../packages/foliate-js/epub.js"],"sourcesContent":["import * as CFI from './epubcfi.js'\n\nconst NS = {\n    CONTAINER: 'urn:oasis:names:tc:opendocument:xmlns:container',\n    XHTML: 'http://www.w3.org/1999/xhtml',\n    OPF: 'http://www.idpf.org/2007/opf',\n    EPUB: 'http://www.idpf.org/2007/ops',\n    DC: 'http://purl.org/dc/elements/1.1/',\n    DCTERMS: 'http://purl.org/dc/terms/',\n    ENC: 'http://www.w3.org/2001/04/xmlenc#',\n    NCX: 'http://www.daisy.org/z3986/2005/ncx/',\n    XLINK: 'http://www.w3.org/1999/xlink',\n    SMIL: 'http://www.w3.org/ns/SMIL',\n}\n\nconst MIME = {\n    XML: 'application/xml',\n    NCX: 'application/x-dtbncx+xml',\n    XHTML: 'application/xhtml+xml',\n    HTML: 'text/html',\n    CSS: 'text/css',\n    SVG: 'image/svg+xml',\n    JS: /\\/(x-)?(javascript|ecmascript)/,\n}\n\n// https://www.w3.org/TR/epub-33/#sec-reserved-prefixes\nconst PREFIX = {\n    a11y: 'http://www.idpf.org/epub/vocab/package/a11y/#',\n    dcterms: 'http://purl.org/dc/terms/',\n    marc: 'http://id.loc.gov/vocabulary/',\n    media: 'http://www.idpf.org/epub/vocab/overlays/#',\n    onix: 'http://www.editeur.org/ONIX/book/codelists/current.html#',\n    rendition: 'http://www.idpf.org/vocab/rendition/#',\n    schema: 'http://schema.org/',\n    xsd: 'http://www.w3.org/2001/XMLSchema#',\n    msv: 'http://www.idpf.org/epub/vocab/structure/magazine/#',\n    prism: 'http://www.prismstandard.org/specifications/3.0/PRISM_CV_Spec_3.0.htm#',\n}\n\nconst RELATORS = {\n    art: 'artist',\n    aut: 'author',\n    clr: 'colorist',\n    edt: 'editor',\n    ill: 'illustrator',\n    nrt: 'narrator',\n    trl: 'translator',\n    pbl: 'publisher',\n}\n\nconst ONIX5 = {\n    '02': 'isbn',\n    '06': 'doi',\n    '15': 'isbn',\n    '26': 'doi',\n    '34': 'issn',\n}\n\n// convert to camel case\nconst camel = x => x.toLowerCase().replace(/[-:](.)/g, (_, g) => g.toUpperCase())\n\n// strip and collapse ASCII whitespace\n// https://infra.spec.whatwg.org/#strip-and-collapse-ascii-whitespace\nconst normalizeWhitespace = str => str ? str\n    .replace(/[\\t\\n\\f\\r ]+/g, ' ')\n    .replace(/^[\\t\\n\\f\\r ]+/, '')\n    .replace(/[\\t\\n\\f\\r ]+$/, '') : ''\n\nconst filterAttribute = (attr, value, isList) => isList\n    ? el => el.getAttribute(attr)?.split(/\\s/)?.includes(value)\n    : typeof value === 'function'\n        ? el => value(el.getAttribute(attr))\n        : el => el.getAttribute(attr) === value\n\nconst getAttributes = (...xs) => el =>\n    el ? Object.fromEntries(xs.map(x => [camel(x), el.getAttribute(x)])) : null\n\nconst getElementText = el => normalizeWhitespace(el?.textContent)\n\nconst childGetter = (doc, ns) => {\n    // ignore the namespace if it doesn't appear in document at all\n    const useNS = doc.lookupNamespaceURI(null) === ns || doc.lookupPrefix(ns)\n    const f = useNS\n        ? (el, name) => el => el.namespaceURI === ns && el.localName === name\n        : (el, name) => el => el.localName === name\n    return {\n        $: (el, name) => [...el.children].find(f(el, name)),\n        $$: (el, name) => [...el.children].filter(f(el, name)),\n        $$$: useNS\n            ? (el, name) => [...el.getElementsByTagNameNS(ns, name)]\n            : (el, name) => [...el.getElementsByTagName(name)],\n    }\n}\n\nconst resolveURL = (url, relativeTo) => {\n    try {\n        // replace %2c in the url with a comma, this might be introduced by calibre\n        url = url.replace(/%2c/gi, ',').replace(/%3a/gi, ':')\n        if (relativeTo.includes(':') && !relativeTo.startsWith('OEBPS')) return new URL(url, relativeTo)\n        // the base needs to be a valid URL, so set a base URL and then remove it\n        const root = 'https://invalid.invalid/'\n        const obj = new URL(url, root + relativeTo)\n        obj.search = ''\n        return decodeURI(obj.href.replace(root, ''))\n    } catch(e) {\n        console.warn(e)\n        return url\n    }\n}\n\nconst isExternal = uri => /^(?!blob)\\w+:/i.test(uri)\n\n// like `path.relative()` in Node.js\nconst pathRelative = (from, to) => {\n    if (!from) return to\n    const as = from.replace(/\\/$/, '').split('/')\n    const bs = to.replace(/\\/$/, '').split('/')\n    const i = (as.length > bs.length ? as : bs).findIndex((_, i) => as[i] !== bs[i])\n    return i < 0 ? '' : Array(as.length - i).fill('..').concat(bs.slice(i)).join('/')\n}\n\nconst pathDirname = str => str.slice(0, str.lastIndexOf('/') + 1)\n\n// replace asynchronously and sequentially\n// same technique as https://stackoverflow.com/a/48032528\nconst replaceSeries = async (str, regex, f) => {\n    const matches = []\n    str.replace(regex, (...args) => (matches.push(args), null))\n    const results = []\n    for (const args of matches) results.push(await f(...args))\n    return str.replace(regex, () => results.shift())\n}\n\nconst regexEscape = str => str.replace(/[-/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&')\n\nconst tidy = obj => {\n    for (const [key, val] of Object.entries(obj))\n        if (val == null) delete obj[key]\n        else if (Array.isArray(val)) {\n            obj[key] = val.filter(x => x).map(x =>\n                typeof x === 'object' && !Array.isArray(x) ? tidy(x) : x)\n            if (!obj[key].length) delete obj[key]\n            else if (obj[key].length === 1) obj[key] = obj[key][0]\n        }\n        else if (typeof val === 'object') {\n            obj[key] = tidy(val)\n            if (!Object.keys(val).length) delete obj[key]\n        }\n    const keys = Object.keys(obj)\n    if (keys.length === 1 && keys[0] === 'name') return obj[keys[0]]\n    return obj\n}\n\n// https://www.w3.org/TR/epub/#sec-prefix-attr\nconst getPrefixes = doc => {\n    const map = new Map(Object.entries(PREFIX))\n    const value = doc.documentElement.getAttributeNS(NS.EPUB, 'prefix')\n        || doc.documentElement.getAttribute('prefix')\n    if (value) for (const [, prefix, url] of value\n        .matchAll(/(.+): +(.+)[ \\t\\r\\n]*/g)) map.set(prefix, url)\n    return map\n}\n\n// https://www.w3.org/TR/epub-rs/#sec-property-values\n// but ignoring the case where the prefix is omitted\nconst getPropertyURL = (value, prefixes) => {\n    if (!value) return null\n    const [a, b] = value.split(':')\n    const prefix = b ? a : null\n    const reference = b ? b : a\n    const baseURL = prefixes.get(prefix)\n    return baseURL ? baseURL + reference : null\n}\n\nconst getMetadata = opf => {\n    const { $ } = childGetter(opf, NS.OPF)\n    const $metadata = $(opf.documentElement, 'metadata')\n\n    // first pass: convert to JS objects\n    const els = Object.groupBy($metadata.children, el =>\n        el.namespaceURI === NS.DC ? 'dc'\n        : el.namespaceURI === NS.OPF && el.localName === 'meta' ?\n            (el.hasAttribute('name') ? 'legacyMeta' : 'meta') : '')\n    const baseLang = $metadata.getAttribute('xml:lang')\n        ?? opf.documentElement.getAttribute('xml:lang') ?? 'und'\n    const prefixes = getPrefixes(opf)\n    const parse = el => {\n        const property = el.getAttribute('property')\n        const scheme = el.getAttribute('scheme')\n        return {\n            property: getPropertyURL(property, prefixes) ?? property,\n            scheme: getPropertyURL(scheme, prefixes) ?? scheme,\n            lang: el.getAttribute('xml:lang'),\n            value: getElementText(el),\n            props: getProperties(el),\n            // `opf:` attributes from EPUB 2 & EPUB 3.1 (removed in EPUB 3.2)\n            attrs: Object.fromEntries(Array.from(el.attributes)\n                .filter(attr => attr.namespaceURI === NS.OPF)\n                .map(attr => [attr.localName, attr.value])),\n        }\n    }\n    const refines = Map.groupBy(els.meta ?? [], el => el.getAttribute('refines'))\n    const getProperties = el => {\n        const els = refines.get(el ? '#' + el.getAttribute('id') : null)\n        if (!els) return null\n        return Object.groupBy(els.map(parse), x => x.property)\n    }\n    const dc = Object.fromEntries(Object.entries(Object.groupBy(els.dc || [], el => el.localName))\n        .map(([name, els]) => [name, els.map(parse)]))\n    const properties = getProperties() ?? {}\n    const legacyMeta = Object.fromEntries(els.legacyMeta?.map(el =>\n        [el.getAttribute('name'), el.getAttribute('content')]) ?? [])\n\n    // second pass: map to webpub\n    const one = x => x?.[0]?.value\n    const prop = (x, p) => one(x?.props?.[p])\n    const makeLanguageMap = x => {\n        if (!x) return null\n        const alts = x.props?.['alternate-script'] ?? []\n        const altRep = x.attrs['alt-rep']\n        if (!alts.length && (!x.lang || x.lang === baseLang) && !altRep) return x.value\n        const map = { [x.lang ?? baseLang]: x.value }\n        if (altRep) map[x.attrs['alt-rep-lang']] = altRep\n        for (const y of alts) map[y.lang] ??= y.value\n        return map\n    }\n    const makeContributor = x => x ? ({\n        name: makeLanguageMap(x),\n        sortAs: makeLanguageMap(x.props?.['file-as']?.[0]) ?? x.attrs['file-as'],\n        role: x.props?.role?.filter(x => x.scheme === PREFIX.marc + 'relators')\n            ?.map(x => x.value) ?? [x.attrs.role],\n        code: prop(x, 'term') ?? x.attrs.term,\n        scheme: prop(x, 'authority') ?? x.attrs.authority,\n    }) : null\n    const makeCollection = x => ({\n        name: makeLanguageMap(x),\n        // NOTE: webpub requires number but EPUB allows values like \"2.2.1\"\n        position: one(x.props?.['group-position']),\n    })\n    const makeAltIdentifier = x => {\n        const { value } = x\n        if (/^urn:/i.test(value)) return value\n        if (/^doi:/i.test(value)) return `urn:${value}`\n        const type = x.props?.['identifier-type']\n        if (!type) {\n            const scheme = x.attrs.scheme\n            if (!scheme) return value\n            // https://idpf.github.io/epub-registries/identifiers/\n            // but no \"jdcn\", which isn't a registered URN namespace\n            if (/^(doi|isbn|uuid)$/i.test(scheme)) return `urn:${scheme}:${value}`\n            // NOTE: webpub requires scheme to be a URI; EPUB allows anything\n            return { scheme, value }\n        }\n        if (type.scheme === PREFIX.onix + 'codelist5') {\n            const nid = ONIX5[type.value]\n            if (nid) return `urn:${nid}:${value}`\n        }\n        return value\n    }\n    const belongsTo = Object.groupBy(properties['belongs-to-collection'] ?? [],\n        x => prop(x, 'collection-type') === 'series' ? 'series' : 'collection')\n    const mainTitle = dc.title?.find(x => prop(x, 'title-type') === 'main') ?? dc.title?.[0]\n    const metadata = {\n        identifier: getIdentifier(opf),\n        title: makeLanguageMap(mainTitle),\n        sortAs: makeLanguageMap(mainTitle?.props?.['file-as']?.[0])\n            ?? mainTitle?.attrs?.['file-as']\n            ?? legacyMeta?.['calibre:title_sort'],\n        subtitle: dc.title?.find(x => prop(x, 'title-type') === 'subtitle')?.value,\n        language: dc.language?.map(x => x.value),\n        description: one(dc.description),\n        publisher: makeContributor(dc.publisher?.[0]),\n        published: dc.date?.find(x => x.attrs.event === 'publication')?.value\n            ?? one(dc.date),\n        modified: one(properties[PREFIX.dcterms + 'modified'])\n            ?? dc.date?.find(x => x.attrs.event === 'modification')?.value,\n        subject: dc.subject?.map(makeContributor),\n        belongsTo: {\n            collection: belongsTo.collection?.map(makeCollection),\n            series: belongsTo.series?.map(makeCollection)\n            ?? legacyMeta?.['calibre:series'] ? {\n                name: legacyMeta?.['calibre:series'],\n                position: parseFloat(legacyMeta?.['calibre:series_index']),\n            } : null,\n        },\n        altIdentifier: dc.identifier?.map(makeAltIdentifier),\n        source: dc.source?.map(makeAltIdentifier), // NOTE: not in webpub schema\n        rights: one(dc.rights), // NOTE: not in webpub schema\n    }\n    const remapContributor = defaultKey => x => {\n        const keys = new Set(x.role?.map(role => RELATORS[role] ?? defaultKey))\n        return [keys.size ? keys : [defaultKey], x]\n    }\n    for (const [keys, val] of [].concat(\n        dc.creator?.map(makeContributor)?.map(remapContributor('author')) ?? [],\n        dc.contributor?.map(makeContributor)?.map(remapContributor('contributor')) ?? []))\n        for (const key of keys) {\n            // if already parsed publisher don't remap it from author/contributor again\n            if (key === 'publisher' && metadata.publisher) continue\n            if (metadata[key]) metadata[key].push(val)\n            else metadata[key] = [val]\n        }\n    tidy(metadata)\n    if (metadata.altIdentifier === metadata.identifier)\n        delete metadata.altIdentifier\n\n    const rendition = {}\n    const media = {}\n    for (const [key, val] of Object.entries(properties)) {\n        if (key.startsWith(PREFIX.rendition))\n            rendition[camel(key.replace(PREFIX.rendition, ''))] = one(val)\n        else if (key.startsWith(PREFIX.media))\n            media[camel(key.replace(PREFIX.media, ''))] = one(val)\n    }\n    if (media.duration) media.duration = parseClock(media.duration)\n    return { metadata, rendition, media }\n}\n\nconst parseNav = (doc, resolve = f => f) => {\n    const { $, $$, $$$ } = childGetter(doc, NS.XHTML)\n    const resolveHref = href => href ? decodeURI(resolve(href)) : null\n    const parseLI = getType => $li => {\n        const $a = $($li, 'a') ?? $($li, 'span')\n        const $ol = $($li, 'ol')\n        const href = resolveHref($a?.getAttribute('href'))\n        const label = getElementText($a) || $a?.getAttribute('title')\n        // TODO: get and concat alt/title texts in content\n        const result = { label, href, subitems: parseOL($ol) }\n        if (getType) result.type = $a?.getAttributeNS(NS.EPUB, 'type')?.split(/\\s/)\n        return result\n    }\n    const parseOL = ($ol, getType) => $ol ? $$($ol, 'li').map(parseLI(getType)) : null\n    const parseNav = ($nav, getType) => parseOL($($nav, 'ol'), getType)\n\n    const $$nav = $$$(doc, 'nav')\n    let toc = null, pageList = null, landmarks = null, others = []\n    for (const $nav of $$nav) {\n        const type = $nav.getAttributeNS(NS.EPUB, 'type')?.split(/\\s/) ?? []\n        if (type.includes('toc')) toc ??= parseNav($nav)\n        else if (type.includes('page-list')) pageList ??= parseNav($nav)\n        else if (type.includes('landmarks')) landmarks ??= parseNav($nav, true)\n        else others.push({\n            label: getElementText($nav.firstElementChild), type,\n            list: parseNav($nav),\n        })\n    }\n    return { toc, pageList, landmarks, others }\n}\n\nconst parseNCX = (doc, resolve = f => f) => {\n    const { $, $$ } = childGetter(doc, NS.NCX)\n    const resolveHref = href => href ? decodeURI(resolve(href)) : null\n    const parseItem = el => {\n        const $label = $(el, 'navLabel')\n        const $content = $(el, 'content')\n        const label = getElementText($label)\n        const href = resolveHref($content.getAttribute('src'))\n        if (el.localName === 'navPoint') {\n            const els = $$(el, 'navPoint')\n            return { label, href, subitems: els.length ? els.map(parseItem) : null }\n        }\n        return { label, href }\n    }\n    const parseList = (el, itemName) => $$(el, itemName).map(parseItem)\n    const getSingle = (container, itemName) => {\n        const $container = $(doc.documentElement, container)\n        return $container ? parseList($container, itemName) : null\n    }\n    return {\n        toc: getSingle('navMap', 'navPoint'),\n        pageList: getSingle('pageList', 'pageTarget'),\n        others: $$(doc.documentElement, 'navList').map(el => ({\n            label: getElementText($(el, 'navLabel')),\n            list: parseList(el, 'navTarget'),\n        })),\n    }\n}\n\nconst parseClock = str => {\n    if (!str) return\n    const parts = str.split(':').map(x => parseFloat(x))\n    if (parts.length === 3) {\n        const [h, m, s] = parts\n        return h * 60 * 60 + m * 60 + s\n    }\n    if (parts.length === 2) {\n        const [m, s] = parts\n        return m * 60 + s\n    }\n    const [x, unit] = str.split(/(?=[^\\d.])/)\n    const n = parseFloat(x)\n    const f = unit === 'h' ? 60 * 60\n        : unit === 'min' ? 60\n        : unit === 'ms' ? .001\n        : 1\n    return n * f\n}\n\nconst IMAGE_EXTENSIONS = ['jpg', 'jpeg', 'png', 'gif', 'webp']\n\nconst getImageMediaType = (path) => {\n    const extension = path.toLowerCase().split('.').pop()\n    const mediaTypeMap = {\n        'jpg': 'image/jpeg',\n        'jpeg': 'image/jpeg',\n        'png': 'image/png',\n        'gif': 'image/gif',\n        'webp': 'image/webp',\n    }\n    return mediaTypeMap[extension] || 'image/jpeg'\n}\n\nclass MediaOverlay extends EventTarget {\n    #entries\n    #lastMediaOverlayItem\n    #sectionIndex\n    #audioIndex\n    #itemIndex\n    #audio\n    #volume = 1\n    #rate = 1\n    #state\n    constructor(book, loadXML) {\n        super()\n        this.book = book\n        this.loadXML = loadXML\n    }\n    async #loadSMIL(item) {\n        if (this.#lastMediaOverlayItem === item) return\n        const doc = await this.loadXML(item.href)\n        const resolve = href => href ? resolveURL(href, item.href) : null\n        const { $, $$$ } = childGetter(doc, NS.SMIL)\n        this.#audioIndex = -1\n        this.#itemIndex = -1\n        this.#entries = $$$(doc, 'par').reduce((arr, $par) => {\n            const text = resolve($($par, 'text')?.getAttribute('src'))\n            const $audio = $($par, 'audio')\n            if (!text || !$audio) return arr\n            const src = resolve($audio.getAttribute('src'))\n            const begin = parseClock($audio.getAttribute('clipBegin'))\n            const end = parseClock($audio.getAttribute('clipEnd'))\n            const last = arr.at(-1)\n            if (last?.src === src) last.items.push({ text, begin, end })\n            else arr.push({ src, items: [{ text, begin, end }] })\n            return arr\n        }, [])\n        this.#lastMediaOverlayItem = item\n    }\n    get #activeAudio() {\n        return this.#entries[this.#audioIndex]\n    }\n    get #activeItem() {\n        return this.#activeAudio?.items?.[this.#itemIndex]\n    }\n    #error(e) {\n        console.error(e)\n        this.dispatchEvent(new CustomEvent('error', { detail: e }))\n    }\n    #highlight() {\n        this.dispatchEvent(new CustomEvent('highlight', { detail: this.#activeItem }))\n    }\n    #unhighlight() {\n        this.dispatchEvent(new CustomEvent('unhighlight', { detail: this.#activeItem }))\n    }\n    async #play(audioIndex, itemIndex) {\n        this.#stop()\n        this.#audioIndex = audioIndex\n        this.#itemIndex = itemIndex\n        const src = this.#activeAudio?.src\n        if (!src || !this.#activeItem) return this.start(this.#sectionIndex + 1)\n\n        const url = URL.createObjectURL(await this.book.loadBlob(src))\n        const audio = new Audio(url)\n        this.#audio = audio\n        audio.volume = this.#volume\n        audio.playbackRate = this.#rate\n        audio.addEventListener('timeupdate', () => {\n            if (audio.paused) return\n            const t = audio.currentTime\n            const { items } = this.#activeAudio\n            if (t > this.#activeItem?.end) {\n                this.#unhighlight()\n                if (this.#itemIndex === items.length - 1) {\n                    this.#play(this.#audioIndex + 1, 0).catch(e => this.#error(e))\n                    return\n                }\n            }\n            const oldIndex = this.#itemIndex\n            while (items[this.#itemIndex + 1]?.begin <= t) this.#itemIndex++\n            if (this.#itemIndex !== oldIndex) this.#highlight()\n        })\n        audio.addEventListener('error', () =>\n            this.#error(new Error(`Failed to load ${src}`)))\n        audio.addEventListener('playing', () => this.#highlight())\n        audio.addEventListener('ended', () => {\n            this.#unhighlight()\n            URL.revokeObjectURL(url)\n            this.#audio = null\n            this.#play(audioIndex + 1, 0).catch(e => this.#error(e))\n        })\n        if (this.#state === 'paused') {\n            this.#highlight()\n            audio.currentTime = this.#activeItem.begin ?? 0\n        }\n        else audio.addEventListener('canplaythrough', () => {\n            // for some reason need to seek in `canplaythrough`\n            // or it won't play when skipping in WebKit\n            audio.currentTime = this.#activeItem.begin ?? 0\n            this.#state = 'playing'\n            audio.play().catch(e => this.#error(e))\n        }, { once: true })\n    }\n    async start(sectionIndex, filter = () => true) {\n        this.#audio?.pause()\n        const section = this.book.sections[sectionIndex]\n        const href = section?.id\n        if (!href) return\n\n        const { mediaOverlay } = section\n        if (!mediaOverlay) return this.start(sectionIndex + 1)\n        this.#sectionIndex = sectionIndex\n        await this.#loadSMIL(mediaOverlay)\n\n        for (let i = 0; i < this.#entries.length; i++) {\n            const { items } = this.#entries[i]\n            for (let j = 0; j < items.length; j++) {\n                if (items[j].text.split('#')[0] === href && filter(items[j], j, items))\n                    return this.#play(i, j).catch(e => this.#error(e))\n            }\n        }\n    }\n    pause() {\n        this.#state = 'paused'\n        this.#audio?.pause()\n    }\n    resume() {\n        this.#state = 'playing'\n        this.#audio?.play().catch(e => this.#error(e))\n    }\n    #stop() {\n        if (this.#audio) {\n            this.#audio.pause()\n            URL.revokeObjectURL(this.#audio.src)\n            this.#audio = null\n            this.#unhighlight()\n        }\n    }\n    stop() {\n        this.#state = 'stopped'\n        this.#stop()\n    }\n    prev() {\n        if (this.#itemIndex > 0) this.#play(this.#audioIndex, this.#itemIndex - 1)\n        else if (this.#audioIndex > 0) this.#play(this.#audioIndex - 1,\n            this.#entries[this.#audioIndex - 1].items.length - 1)\n        else if (this.#sectionIndex > 0)\n            this.start(this.#sectionIndex - 1, (_, i, items) => i === items.length - 1)\n    }\n    next() {\n        this.#play(this.#audioIndex, this.#itemIndex + 1)\n    }\n    setVolume(volume) {\n        this.#volume = volume\n        if (this.#audio) this.#audio.volume = volume\n    }\n    setRate(rate) {\n        this.#rate = rate\n        if (this.#audio) this.#audio.playbackRate = rate\n    }\n}\n\nconst isUUID = /([0-9a-f]{8})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{12})/\n\nconst getUUID = opf => {\n    for (const el of opf.getElementsByTagNameNS(NS.DC, 'identifier')) {\n        const [id] = getElementText(el).split(':').slice(-1)\n        if (isUUID.test(id)) return id\n    }\n    return ''\n}\n\nconst getIdentifier = opf => getElementText(\n    opf.getElementById(opf.documentElement.getAttribute('unique-identifier'))\n    ?? opf.getElementsByTagNameNS(NS.DC, 'identifier')[0])\n\n// https://www.w3.org/publishing/epub32/epub-ocf.html#sec-resource-obfuscation\nconst deobfuscate = async (key, length, blob) => {\n    const array = new Uint8Array(await blob.slice(0, length).arrayBuffer())\n    length = Math.min(length, array.length)\n    for (var i = 0; i < length; i++) array[i] = array[i] ^ key[i % key.length]\n    return new Blob([array, blob.slice(length)], { type: blob.type })\n}\n\nconst WebCryptoSHA1 = async str => {\n    const data = new TextEncoder().encode(str)\n    const buffer = await globalThis.crypto.subtle.digest('SHA-1', data)\n    return new Uint8Array(buffer)\n}\n\nconst deobfuscators = (sha1 = WebCryptoSHA1) => ({\n    'http://www.idpf.org/2008/embedding': {\n        key: opf => sha1(getIdentifier(opf)\n            // eslint-disable-next-line no-control-regex\n            .replaceAll(/[\\u0020\\u0009\\u000d\\u000a]/g, '')),\n        decode: (key, blob) => deobfuscate(key, 1040, blob),\n    },\n    'http://ns.adobe.com/pdf/enc#RC': {\n        key: opf => {\n            const uuid = getUUID(opf).replaceAll('-', '')\n            return Uint8Array.from({ length: 16 }, (_, i) =>\n                parseInt(uuid.slice(i * 2, i * 2 + 2), 16))\n        },\n        decode: (key, blob) => deobfuscate(key, 1024, blob),\n    },\n})\n\nclass Encryption {\n    #uris = new Map()\n    #decoders = new Map()\n    #algorithms\n    constructor(algorithms) {\n        this.#algorithms = algorithms\n    }\n    async init(encryption, opf) {\n        if (!encryption) return\n        const data = Array.from(\n            encryption.getElementsByTagNameNS(NS.ENC, 'EncryptedData'), el => ({\n                algorithm: el.getElementsByTagNameNS(NS.ENC, 'EncryptionMethod')[0]\n                    ?.getAttribute('Algorithm'),\n                uri: el.getElementsByTagNameNS(NS.ENC, 'CipherReference')[0]\n                    ?.getAttribute('URI'),\n            }))\n        for (const { algorithm, uri } of data) {\n            if (!this.#decoders.has(algorithm)) {\n                const algo = this.#algorithms[algorithm]\n                if (!algo) {\n                    console.warn('Unknown encryption algorithm')\n                    continue\n                }\n                const key = await algo.key(opf)\n                this.#decoders.set(algorithm, blob => algo.decode(key, blob))\n            }\n            this.#uris.set(uri, algorithm)\n        }\n    }\n    getDecoder(uri) {\n        return this.#decoders.get(this.#uris.get(uri)) ?? (x => x)\n    }\n}\n\nclass Resources {\n    constructor({ opf, resolveHref }) {\n        this.opf = opf\n        const { $, $$, $$$ } = childGetter(opf, NS.OPF)\n\n        const $manifest = $(opf.documentElement, 'manifest')\n        const $spine = $(opf.documentElement, 'spine')\n        const $$itemref = $$($spine, 'itemref')\n\n        this.manifest = $$($manifest, 'item')\n            .map(getAttributes('href', 'id', 'media-type', 'properties', 'media-overlay'))\n            .map(item => {\n                item.href = resolveHref(item.href)\n                item.properties = item.properties?.split(/\\s/)\n                return item\n            })\n        this.manifestById = new Map(this.manifest.map(item => [item.id, item]))\n        this.spine = $$itemref\n            .map(getAttributes('idref', 'id', 'linear', 'properties'))\n            .map(item => (item.properties = item.properties?.split(/\\s/), item))\n        this.pageProgressionDirection = $spine\n            .getAttribute('page-progression-direction')\n\n        this.navPath = this.getItemByProperty('nav')?.href\n        this.ncxPath = (this.getItemByID($spine.getAttribute('toc'))\n            ?? this.manifest.find(item => item.mediaType === MIME.NCX))?.href\n\n        const $guide = $(opf.documentElement, 'guide')\n        if ($guide) this.guide = $$($guide, 'reference')\n            .map(getAttributes('type', 'title', 'href'))\n            .map(({ type, title, href }) => ({\n                label: title,\n                type: type.split(/\\s/),\n                href: resolveHref(href),\n            }))\n\n        this.cover = this.getItemByProperty('cover-image')\n            // EPUB 2 compat\n            ?? this.getItemByID($$$(opf, 'meta')\n                .find(filterAttribute('name', 'cover'))\n                ?.getAttribute('content'))\n            ?? this.manifest.find(item => item.id === 'cover'\n                && item.mediaType.startsWith('image'))\n            ?? this.manifest.find(item => item.href.includes('cover')\n                && item.mediaType.startsWith('image'))\n            ?? this.getItemByHref(this.guide\n                ?.find(ref => ref.type.includes('cover'))?.href)\n            // last resort: first image in manifest\n            ?? this.manifest.find(item => item.mediaType.startsWith('image'))\n\n        this.cfis = CFI.fromElements($$itemref)\n    }\n    getItemByID(id) {\n        return this.manifestById.get(id)\n    }\n    getItemByHref(href) {\n        return this.manifest.find(item => item.href === href)\n    }\n    getItemByProperty(prop) {\n        return this.manifest.find(item => item.properties?.includes(prop))\n    }\n    resolveCFI(cfi) {\n        const parts = CFI.parse(cfi)\n        const top = (parts.parent ?? parts).shift()\n        let $itemref = CFI.toElement(this.opf, top)\n        // make sure it's an idref; if not, try again without the ID assertion\n        // mainly because Epub.js used to generate wrong ID assertions\n        // https://github.com/futurepress/epub.js/issues/1236\n        if ($itemref && $itemref.nodeName !== 'idref') {\n            top.at(-1).id = null\n            $itemref = CFI.toElement(this.opf, top)\n        }\n        const idref = $itemref?.getAttribute('idref')\n        const index = this.spine.findIndex(item => item.idref === idref)\n        const anchor = doc => CFI.toRange(doc, parts)\n        return { index, anchor }\n    }\n}\n\nclass Loader {\n    #cache = new Map()\n    #cacheXHTMLContent = new Map()\n    #children = new Map()\n    #refCount = new Map()\n    eventTarget = new EventTarget()\n    constructor({ loadText, loadBlob, resources, entries }) {\n        this.loadText = loadText\n        this.loadBlob = loadBlob\n        this.manifest = resources.manifest\n        this.assets = resources.manifest\n        this.entries = entries\n        // needed only when replacing in (X)HTML w/o parsing (see below)\n        //.filter(({ mediaType }) => ![MIME.XHTML, MIME.HTML].includes(mediaType))\n    }\n    async createURL(href, data, type, parent) {\n        if (!data) return ''\n        const detail = { data, type }\n        Object.defineProperty(detail, 'name', { value: href }) // readonly\n        const event = new CustomEvent('data', { detail })\n        this.eventTarget.dispatchEvent(event)\n        const newData = await event.detail.data\n        const newType = await event.detail.type\n        const url = URL.createObjectURL(new Blob([newData], { type: newType }))\n        this.#cache.set(href, url)\n        this.#refCount.set(href, 1)\n        if (newType === MIME.XHTML) {\n            this.#cacheXHTMLContent.set(url, {href, type: newType, data: newData})\n        }\n        if (parent) {\n            const childList = this.#children.get(parent)\n            if (childList) childList.push(href)\n            else this.#children.set(parent, [href])\n        }\n        return url\n    }\n    ref(href, parent) {\n        const childList = this.#children.get(parent)\n        if (!childList?.includes(href)) {\n            this.#refCount.set(href, this.#refCount.get(href) + 1)\n            //console.log(`referencing ${href}, now ${this.#refCount.get(href)}`)\n            if (childList) childList.push(href)\n            else this.#children.set(parent, [href])\n        }\n        return this.#cache.get(href)\n    }\n    unref(href) {\n        if (!this.#refCount.has(href)) return\n        const count = this.#refCount.get(href) - 1\n        //console.log(`unreferencing ${href}, now ${count}`)\n        if (count < 1) {\n            //console.log(`unloading ${href}`)\n            const url = this.#cache.get(href)\n            URL.revokeObjectURL(url)\n            this.#cache.delete(href)\n            this.#cacheXHTMLContent.delete(url)\n            this.#refCount.delete(href)\n            // unref children\n            const childList = this.#children.get(href)\n            if (childList) while (childList.length) this.unref(childList.pop())\n            this.#children.delete(href)\n        } else this.#refCount.set(href, count)\n    }\n    // load manifest item, recursively loading all resources as needed\n    async loadItem(item, parents = []) {\n        if (!item) return null\n        const { href, mediaType } = item\n\n        const isScript = MIME.JS.test(item.mediaType)\n        const detail = { type: mediaType, isScript, allow: true}\n        const event = new CustomEvent('load', { detail })\n        this.eventTarget.dispatchEvent(event)\n        const allow = await event.detail.allow\n        if (!allow) return null\n\n        const parent = parents.at(-1)\n        if (this.#cache.has(href)) return this.ref(href, parent)\n\n        const shouldReplace =\n            (isScript || [MIME.XHTML, MIME.HTML, MIME.CSS, MIME.SVG].includes(mediaType))\n            // prevent circular references\n            && parents.every(p => p !== href)\n        if (shouldReplace) return this.loadReplaced(item, parents)\n        // NOTE: this can be replaced with `Promise.try()`\n        const tryLoadBlob = Promise.resolve().then(() => this.loadBlob(href))\n        return this.createURL(href, tryLoadBlob, mediaType, parent)\n    }\n    async loadItemXHTMLContent(item, parents = []) {\n        const url = await this.loadItem(item, parents)\n        if (url) return this.#cacheXHTMLContent.get(url)?.data\n    }\n    tryImageEntryItem(path) {\n        if (!IMAGE_EXTENSIONS.some(ext => path.toLowerCase().endsWith(`.${ext}`))) {\n            return null\n        }\n        if (!this.entries.get(path)) {\n            return null\n        }\n        return {\n            href: path,\n            mediaType: getImageMediaType(path),\n        }\n    }\n    async loadHref(href, base, parents = []) {\n        if (isExternal(href)) return href\n        const path = resolveURL(href, base)\n        let item = this.manifest.find(item => item.href === path)\n        if (!item) {\n            item = this.tryImageEntryItem(path)\n            if (!item) {\n                return href\n            }\n        }\n        return this.loadItem(item, parents.concat(base))\n    }\n    async loadReplaced(item, parents = []) {\n        const { href, mediaType } = item\n        const parent = parents.at(-1)\n        let str = ''\n        try {\n            str = await this.loadText(href)\n        } catch (e) {\n            return this.createURL(href, Promise.reject(e), mediaType, parent)\n        }\n        if (!str) return null\n\n        // note that one can also just use `replaceString` for everything:\n        // ```\n        // const replaced = await this.replaceString(str, href, parents)\n        // return this.createURL(href, replaced, mediaType, parent)\n        // ```\n        // which is basically what Epub.js does, which is simpler, but will\n        // break things like iframes (because you don't want to replace links)\n        // or text that just happen to be paths\n\n        // parse and replace in HTML\n        if ([MIME.XHTML, MIME.HTML, MIME.SVG].includes(mediaType)) {\n            let doc = new DOMParser().parseFromString(str, mediaType)\n            // change to HTML if it's not valid XHTML\n            if (mediaType === MIME.XHTML && (doc.querySelector('parsererror')\n            || !doc.documentElement?.namespaceURI)) {\n                console.warn(doc.querySelector('parsererror')?.innerText ?? 'Invalid XHTML')\n                item.mediaType = MIME.HTML\n                doc = new DOMParser().parseFromString(str, item.mediaType)\n            }\n            // replace hrefs in XML processing instructions\n            // this is mainly for SVGs that use xml-stylesheet\n            if ([MIME.XHTML, MIME.SVG].includes(item.mediaType)) {\n                let child = doc.firstChild\n                while (child instanceof ProcessingInstruction) {\n                    if (child.data) {\n                        const replacedData = await replaceSeries(child.data,\n                            /(?:^|\\s*)(href\\s*=\\s*['\"])([^'\"]*)(['\"])/i,\n                            (_, p1, p2, p3) => this.loadHref(p2, href, parents)\n                                .then(p2 => `${p1}${p2}${p3}`))\n                        child.replaceWith(doc.createProcessingInstruction(\n                            child.target, replacedData))\n                    }\n                    child = child.nextSibling\n                }\n            }\n            // replace hrefs (excluding anchors)\n            const replace = async (el, attr) => el.setAttribute(attr,\n                await this.loadHref(el.getAttribute(attr), href, parents))\n            for (const el of doc.querySelectorAll('link[href]')) await replace(el, 'href')\n            for (const el of doc.querySelectorAll('[src]')) await replace(el, 'src')\n            for (const el of doc.querySelectorAll('[poster]')) await replace(el, 'poster')\n            for (const el of doc.querySelectorAll('object[data]')) await replace(el, 'data')\n            for (const el of doc.querySelectorAll('[*|href]:not([href])'))\n                el.setAttributeNS(NS.XLINK, 'href', await this.loadHref(\n                    el.getAttributeNS(NS.XLINK, 'href'), href, parents))\n            for (const el of doc.querySelectorAll('[srcset]'))\n                el.setAttribute('srcset', await replaceSeries(el.getAttribute('srcset'),\n                    /(\\s*)(.+?)\\s*((?:\\s[\\d.]+[wx])+\\s*(?:,|$)|,\\s+|$)/g,\n                    (_, p1, p2, p3) => this.loadHref(p2, href, parents)\n                        .then(p2 => `${p1}${p2}${p3}`)))\n            // replace inline styles\n            for (const el of doc.querySelectorAll('style'))\n                if (el.textContent) el.textContent =\n                    await this.replaceCSS(el.textContent, href, parents)\n            for (const el of doc.querySelectorAll('[style]'))\n                el.setAttribute('style',\n                    await this.replaceCSS(el.getAttribute('style'), href, parents))\n            // TODO: replace inline scripts? probably not worth the trouble\n            const result = new XMLSerializer().serializeToString(doc)\n            return this.createURL(href, result, item.mediaType, parent)\n        }\n\n        const result = mediaType === MIME.CSS\n            ? await this.replaceCSS(str, href, parents)\n            : await this.replaceString(str, href, parents)\n        return this.createURL(href, result, mediaType, parent)\n    }\n    async replaceCSS(str, href, parents = []) {\n        const replacedUrls = await replaceSeries(str,\n            /url\\(\\s*[\"']?([^'\"\\n]*?)\\s*[\"']?\\s*\\)/gi,\n            (_, url) => this.loadHref(url, href, parents)\n                .then(url => `url(\"${url}\")`))\n        // apart from `url()`, strings can be used for `@import` (but why?!)\n        return replaceSeries(replacedUrls,\n            /@import\\s*[\"']([^\"'\\n]*?)[\"']/gi,\n            (_, url) => this.loadHref(url, href, parents)\n                .then(url => `@import \"${url}\"`))\n    }\n    // find & replace all possible relative paths for all assets without parsing\n    replaceString(str, href, parents = []) {\n        const assetMap = new Map()\n        const urls = this.assets.map(asset => {\n            // do not replace references to the file itself\n            if (asset.href === href) return\n            // href was decoded and resolved when parsing the manifest\n            const relative = pathRelative(pathDirname(href), asset.href)\n            const relativeEnc = encodeURI(relative)\n            const rootRelative = '/' + asset.href\n            const rootRelativeEnc = encodeURI(rootRelative)\n            const set = new Set([relative, relativeEnc, rootRelative, rootRelativeEnc])\n            for (const url of set) assetMap.set(url, asset)\n            return Array.from(set)\n        }).flat().filter(x => x)\n        if (!urls.length) return str\n        const regex = new RegExp(urls.map(regexEscape).join('|'), 'g')\n        return replaceSeries(str, regex, async match =>\n            this.loadItem(assetMap.get(match.replace(/^\\//, '')),\n                parents.concat(href)))\n    }\n    unloadItem(item) {\n        this.unref(item?.href)\n    }\n    destroy() {\n        for (const url of this.#cache.values()) URL.revokeObjectURL(url)\n    }\n}\n\nconst getHTMLFragment = (doc, id) => doc.getElementById(id)\n    ?? doc.querySelector(`[name=\"${CSS.escape(id)}\"]`)\n\nconst getPageSpread = properties => {\n    for (const p of properties) {\n        if (p === 'page-spread-left' || p === 'rendition:page-spread-left')\n            return 'left'\n        if (p === 'page-spread-right' || p === 'rendition:page-spread-right')\n            return 'right'\n        if (p === 'rendition:page-spread-center') return 'center'\n    }\n}\n\nconst getDisplayOptions = doc => {\n    if (!doc) return null\n    return {\n        fixedLayout: getElementText(doc.querySelector('option[name=\"fixed-layout\"]')),\n        openToSpread: getElementText(doc.querySelector('option[name=\"open-to-spread\"]')),\n    }\n}\n\nexport class EPUB {\n    parser = new DOMParser()\n    #loader\n    #encryption\n    constructor({ entries, loadText, loadBlob, getSize, sha1 }) {\n        this.entries = entries.reduce((map, entry) => {\n            map.set(entry.filename, entry)\n            return map\n        }, new Map())\n        this.loadText = loadText\n        this.loadBlob = loadBlob\n        this.getSize = getSize\n        this.#encryption = new Encryption(deobfuscators(sha1))\n    }\n    #sanitizeXMLEntities(str) {\n        // Common HTML entities that aren't valid in XML\n        const entityMap = {\n            'nbsp': '&#160;',\n            'mdash': '&#8212;',\n            'ndash': '&#8211;',\n            'ldquo': '&#8220;',\n            'rdquo': '&#8221;',\n            'lsquo': '&#8216;',\n            'rsquo': '&#8217;',\n            'hellip': '&#8230;',\n            'copy': '&#169;',\n            'reg': '&#174;',\n            'trade': '&#8482;',\n            'bull': '&#8226;',\n            'middot': '&#183;',\n        }\n        return str.replace(/&([a-z]+);/gi, (match, entity) => {\n            return entityMap[entity.toLowerCase()] || match\n        })\n    }\n    async #loadXML(uri) {\n        const str = await this.loadText(uri)\n        if (!str) return null\n        const sanitized = this.#sanitizeXMLEntities(str)\n        const doc = this.parser.parseFromString(sanitized, MIME.XML)\n        if (doc.querySelector('parsererror'))\n            throw new Error(`XML parsing error: ${uri}\n${doc.querySelector('parsererror').innerText}`)\n        return doc\n    }\n    async init() {\n        const $container = await this.#loadXML('META-INF/container.xml')\n        if (!$container) throw new Error('Failed to load container file')\n\n        const opfs = Array.from(\n            $container.getElementsByTagNameNS(NS.CONTAINER, 'rootfile'),\n            getAttributes('full-path', 'media-type'))\n            .filter(file => file.mediaType === 'application/oebps-package+xml')\n\n        if (!opfs.length) throw new Error('No package document defined in container')\n        const opfPath = opfs[0].fullPath\n        const opf = await this.#loadXML(opfPath)\n        if (!opf) throw new Error('Failed to load package document')\n\n        const $encryption = await this.#loadXML('META-INF/encryption.xml')\n        await this.#encryption.init($encryption, opf)\n\n        this.resources = new Resources({\n            opf,\n            resolveHref: url => resolveURL(url, opfPath),\n        })\n        this.#loader = new Loader({\n            loadText: this.loadText,\n            loadBlob: uri => Promise.resolve(this.loadBlob(uri))\n                .then(this.#encryption.getDecoder(uri)),\n            resources: this.resources,\n            entries: this.entries,\n        })\n        this.transformTarget = this.#loader.eventTarget\n        this.sections = this.resources.spine.map((spineItem, index) => {\n            const { idref, linear, properties = [] } = spineItem\n            const item = this.resources.getItemByID(idref)\n            if (!item) {\n                console.warn(`Could not find item with ID \"${idref}\" in manifest`)\n                return null\n            }\n            return {\n                id: item.href,\n                load: () => this.#loader.loadItem(item),\n                unload: () => this.#loader.unloadItem(item),\n                loadContent: () => this.#loader.loadItemXHTMLContent(item),\n                createDocument: () => this.loadDocument(item),\n                size: this.getSize(item.href),\n                cfi: this.resources.cfis[index],\n                linear,\n                pageSpread: getPageSpread(properties),\n                resolveHref: href => resolveURL(href, item.href),\n                mediaOverlay: item.mediaOverlay\n                    ? this.resources.getItemByID(item.mediaOverlay) : null,\n            }\n        }).filter(s => s)\n\n        const { navPath, ncxPath } = this.resources\n        if (navPath) try {\n            const resolve = url => resolveURL(url, navPath)\n            const nav = parseNav(await this.#loadXML(navPath), resolve)\n            this.toc = nav.toc\n            this.pageList = nav.pageList\n            this.landmarks = nav.landmarks\n        } catch(e) {\n            console.warn(e)\n        }\n        if (!this.toc && ncxPath) try {\n            const resolve = url => resolveURL(url, ncxPath)\n            const ncx = parseNCX(await this.#loadXML(ncxPath), resolve)\n            this.toc = ncx.toc\n            this.pageList = ncx.pageList\n        } catch(e) {\n            console.warn(e)\n        }\n        this.landmarks ??= this.resources.guide\n\n        const { metadata, rendition, media } = getMetadata(opf)\n        this.metadata = metadata\n        this.rendition = rendition\n        this.media = media\n        this.dir = this.resources.pageProgressionDirection\n        const displayOptions = getDisplayOptions(\n            await this.#loadXML('META-INF/com.apple.ibooks.display-options.xml')\n            ?? await this.#loadXML('META-INF/com.kobobooks.display-options.xml'))\n        if (displayOptions) {\n            if (displayOptions.fixedLayout === 'true')\n                this.rendition.layout ??= 'pre-paginated'\n            if (displayOptions.openToSpread === 'false') this.sections\n                .find(section => section.linear !== 'no').pageSpread ??=\n                    this.dir === 'rtl' ? 'left' : 'right'\n        }\n        return this\n    }\n    async loadDocument(item) {\n        const str = await this.loadText(item.href)\n        return this.parser.parseFromString(str, item.mediaType)\n    }\n    getMediaOverlay() {\n        return new MediaOverlay(this, this.#loadXML.bind(this))\n    }\n    resolveCFI(cfi) {\n        return this.resources.resolveCFI(cfi)\n    }\n    resolveHref(href) {\n        const [path, hash] = href.split('#')\n        const item = this.resources.getItemByHref(decodeURI(path))\n        if (!item) return null\n        const index = this.resources.spine.findIndex(({ idref }) => idref === item.id)\n        const anchor = hash ? doc => getHTMLFragment(doc, hash) : () => 0\n        return { index, anchor }\n    }\n    splitTOCHref(href) {\n        return href?.split('#') ?? []\n    }\n    getTOCFragment(doc, id) {\n        return doc.getElementById(id)\n            ?? doc.querySelector(`[name=\"${CSS.escape(id)}\"]`)\n    }\n    isExternal(uri) {\n        return isExternal(uri)\n    }\n    async getCover() {\n        const cover = this.resources?.cover\n        return cover?.href\n            ? new Blob([await this.loadBlob(cover.href)], { type: cover.mediaType })\n            : null\n    }\n    async getCalibreBookmarks() {\n        const txt = await this.loadText('META-INF/calibre_bookmarks.txt')\n        const magic = 'encoding=json+base64:'\n        if (txt?.startsWith(magic)) {\n            const json = atob(txt.slice(magic.length))\n            return JSON.parse(json)\n        }\n    }\n    destroy() {\n        this.#loader?.destroy()\n    }\n}\n"],"names":[],"mappings":"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"}
{"version":3,"sources":["../../../../../../node_modules/.pnpm/%40tauri-apps%2Bplugin-websocket%402.4.2/node_modules/%40tauri-apps/plugin-websocket/dist-js/index.js"],"sourcesContent":["import { Channel, invoke } from '@tauri-apps/api/core';\n\n// Copyright 2019-2023 Tauri Programme within The Commons Conservancy\n// SPDX-License-Identifier: Apache-2.0\n// SPDX-License-Identifier: MIT\nclass WebSocket {\n    constructor(id, listeners) {\n        this.id = id;\n        this.listeners = listeners;\n    }\n    static async connect(url, config) {\n        const listeners = new Set();\n        const onMessage = new Channel();\n        onMessage.onmessage = (message) => {\n            listeners.forEach((l) => {\n                l(message);\n            });\n        };\n        if (config?.headers) {\n            config.headers = Array.from(new Headers(config.headers).entries());\n        }\n        return await invoke('plugin:websocket|connect', {\n            url,\n            onMessage,\n            config\n        }).then((id) => new WebSocket(id, listeners));\n    }\n    addListener(cb) {\n        this.listeners.add(cb);\n        return () => {\n            this.listeners.delete(cb);\n        };\n    }\n    async send(message) {\n        let m;\n        if (typeof message === 'string') {\n            m = { type: 'Text', data: message };\n        }\n        else if (typeof message === 'object' && 'type' in message) {\n            m = message;\n        }\n        else if (Array.isArray(message)) {\n            m = { type: 'Binary', data: message };\n        }\n        else {\n            throw new Error('invalid `message` type, expected a `{ type: string, data: any }` object, a string or a numeric array');\n        }\n        await invoke('plugin:websocket|send', {\n            id: this.id,\n            message: m\n        });\n    }\n    async disconnect() {\n        await this.send({\n            type: 'Close',\n            data: {\n                code: 1000,\n                reason: 'Disconnected by client'\n            }\n        });\n    }\n}\n\nexport { WebSocket as default };\n"],"names":[],"mappings":"wCAAA,IAAA,EAAA,EAAA,CAAA,CAAA,MAKA,OAAM,EACF,YAAY,CAAE,CAAE,CAAS,CAAE,CACvB,IAAI,CAAC,EAAE,CAAG,EACV,IAAI,CAAC,SAAS,CAAG,CACrB,CACA,aAAa,QAAQ,CAAG,CAAE,CAAM,CAAE,CAC9B,IAAM,EAAY,IAAI,IAChB,EAAY,IAAI,EAAA,OAAO,CAS7B,OARA,EAAU,SAAS,CAAG,AAAC,IACnB,EAAU,OAAO,CAAC,AAAC,IACf,EAAE,EACN,EACJ,EACI,GAAQ,SAAS,AACjB,GAAO,OAAO,CAAG,MAAM,IAAI,CAAC,IAAI,QAAQ,EAAO,OAAO,EAAE,OAAO,GAAA,EAE5D,MAAM,CAAA,EAAA,EAAA,MAAA,AAAM,EAAC,2BAA4B,CAC5C,gBACA,SACA,CACJ,GAAG,IAAI,CAAE,AAAD,GAAQ,IAAI,EAAU,EAAI,GACtC,CACA,YAAY,CAAE,CAAE,CAEZ,OADA,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,GACZ,KACH,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,EAC1B,CACJ,CACA,MAAM,KAAK,CAAO,CAAE,CAChB,IAAI,EACJ,GAAuB,UAAnB,AAA6B,OAAtB,EACP,EAAI,CAAE,KAAM,OAAQ,KAAM,CAAQ,OAEjC,GAAuB,UAAnB,OAAO,GAAwB,SAAU,EAC9C,EAAI,KADmD,EAGtD,GAAI,MAAM,OAAO,CAAC,GACnB,EAAI,CAAE,IADuB,CACjB,SAAU,KAAM,CAAQ,OAGpC,MAAU,AAAJ,MAAU,uGAEpB,OAAM,CAAA,EAAA,EAAA,MAAA,AAAM,EAAC,wBAAyB,CAClC,GAAI,IAAI,CAAC,EAAE,CACX,QAAS,CACb,EACJ,CACA,MAAM,YAAa,CACf,MAAM,IAAI,CAAC,IAAI,CAAC,CACZ,KAAM,QACN,KAAM,CACF,KAAM,IACN,OAAQ,wBACZ,CACJ,EACJ,CACJ","ignoreList":[0]}
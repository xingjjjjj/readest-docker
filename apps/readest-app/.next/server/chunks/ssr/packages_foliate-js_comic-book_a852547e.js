module.exports=[760326,a=>{"use strict";let b=async({entries:a,loadBlob:b,getSize:c,getComment:d},e)=>{let f=new Map,g=new Map,h=async a=>{if(f.has(a))return f.get(a);let c=URL.createObjectURL(await b(a)),d=URL.createObjectURL(new Blob([`<!DOCTYPE html><html><head><meta charset="utf-8"></head><body style="margin: 0"><img src="${c}"></body></html>`],{type:"text/html"}));return g.set(a,[c,d]),f.set(a,d),d},i=[".jpg",".jpeg",".png",".gif",".bmp",".webp",".svg",".jxl",".avif"],j=a.map(a=>a.filename).filter(a=>i.some(b=>a.endsWith(b))).sort();if(!j.length)throw Error("No supported image files in archive");let k={};try{let a=JSON.parse(await d()||"")["ComicBookInfo/1.0"];if(a){let b=a.publicationYear,c=a.publicationMonth,d=c&&c>=1&&c<=12?String(c).padStart(2,"0"):null;k.metadata={title:a.title||e.name,publisher:a.publisher,language:a.language||a.lang,author:a.credits?a.credits.map(a=>`${a.person} (${a.role})`).join(", "):"",published:b&&c?`${b}-${d}`:void 0}}else k.metadata={title:e.name}}catch{k.metadata={title:e.name}}return k.getCover=()=>b(j[0]),k.sections=j.map(a=>({id:a,load:()=>h(a),unload:()=>{g.get(a)?.forEach?.(a=>URL.revokeObjectURL(a)),g.delete(a),f.delete(a)},size:c(a)})),k.toc=j.map(a=>({label:a,href:a})),k.rendition={layout:"pre-paginated"},k.resolveHref=a=>({index:k.sections.findIndex(b=>b.id===a)}),k.splitTOCHref=a=>[a,null],k.getTOCFragment=a=>a.documentElement,k.destroy=()=>{for(let a of g.values())for(let b of a)URL.revokeObjectURL(b)},k};a.s(["makeComicBook",0,b])}];

//# sourceMappingURL=packages_foliate-js_comic-book_a852547e.js.map
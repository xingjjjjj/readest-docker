{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///app/readest/apps/readest-app/src/app/reader/components/footerbar/utils.ts"],"sourcesContent":["import React from 'react';\n\nexport const getNavigationIcon = (\n  rtl: boolean | undefined,\n  prevIcon: React.ReactNode,\n  nextIcon: React.ReactNode,\n) => (rtl ? nextIcon : prevIcon);\n\nexport const getNavigationLabel = (\n  rtl: boolean | undefined,\n  prevLabel: string,\n  nextLabel: string,\n) => (rtl ? nextLabel : prevLabel);\n\nexport const getNavigationHandler = (\n  rtl: boolean | undefined,\n  prevHandler: () => void,\n  nextHandler: () => void,\n) => (rtl ? nextHandler : prevHandler);\n"],"names":[],"mappings":";;;;;;;;AAEO,MAAM,oBAAoB,CAC/B,KACA,UACA,WACI,MAAM,WAAW;AAEhB,MAAM,qBAAqB,CAChC,KACA,WACA,YACI,MAAM,YAAY;AAEjB,MAAM,uBAAuB,CAClC,KACA,aACA,cACI,MAAM,cAAc"}},
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///app/readest/apps/readest-app/src/app/reader/components/footerbar/NavigationPanel.tsx"],"sourcesContent":["'use client';\n\nimport clsx from 'clsx';\nimport React, { useCallback, useEffect } from 'react';\nimport { RiArrowLeftSLine, RiArrowRightSLine } from 'react-icons/ri';\nimport { RiArrowGoBackLine, RiArrowGoForwardLine } from 'react-icons/ri';\nimport { RiArrowLeftDoubleLine, RiArrowRightDoubleLine } from 'react-icons/ri';\nimport { getNavigationIcon, getNavigationLabel, getNavigationHandler } from './utils';\nimport { useReaderStore } from '@/store/readerStore';\nimport { useTranslation } from '@/hooks/useTranslation';\nimport { ViewSettings } from '@/types/book';\nimport { NavigationHandlers } from './types';\nimport Button from '@/components/Button';\nimport Slider from '@/components/Slider';\n\ninterface NavigationPanelProps {\n  bookKey: string;\n  actionTab: string;\n  progressFraction: number;\n  progressValid: boolean;\n  navigationHandlers: NavigationHandlers;\n  viewSettings?: ViewSettings;\n  bottomOffset: string;\n  sliderHeight: number;\n}\n\nexport const NavigationPanel: React.FC<NavigationPanelProps> = ({\n  bookKey,\n  actionTab,\n  progressFraction,\n  progressValid,\n  navigationHandlers,\n  viewSettings,\n  bottomOffset: mobileBottomOffset,\n  sliderHeight,\n}) => {\n  const _ = useTranslation();\n  const { getView } = useReaderStore();\n  const view = getView(bookKey);\n\n  const [progressValue, setProgressValue] = React.useState(\n    progressValid ? progressFraction * 100 : 0,\n  );\n\n  useEffect(() => {\n    if (progressValid) {\n      // eslint-disable-next-line react-hooks/set-state-in-effect\n      setProgressValue(progressFraction * 100);\n    }\n  }, [progressValid, progressFraction]);\n\n  const handleProgressChange = useCallback(\n    (value: number) => {\n      setProgressValue(value);\n      navigationHandlers.onProgressChange(value);\n    },\n    [navigationHandlers],\n  );\n\n  const classes = clsx(\n    'footerbar-progress-mobile bg-base-200 absolute flex w-full flex-col items-center gap-y-8 px-4 transition-all sm:hidden',\n    actionTab === 'progress'\n      ? 'pointer-events-auto translate-y-0 pb-4 pt-8 ease-out'\n      : 'pointer-events-none invisible translate-y-full overflow-hidden pb-0 pt-0 ease-in',\n  );\n\n  return (\n    <div className={classes} style={{ bottom: mobileBottomOffset }}>\n      <div className='flex w-full items-center justify-between gap-x-6'>\n        <Slider\n          label={_('Reading Progress')}\n          heightPx={sliderHeight}\n          bubbleLabel={`${Math.round(progressValue)}%`}\n          initialValue={progressValue}\n          onChange={handleProgressChange}\n        />\n      </div>\n      <div className='flex w-full items-center justify-between gap-x-6'>\n        <Button\n          icon={getNavigationIcon(\n            viewSettings?.rtl,\n            <RiArrowLeftDoubleLine />,\n            <RiArrowRightDoubleLine />,\n          )}\n          onClick={getNavigationHandler(\n            viewSettings?.rtl,\n            navigationHandlers.onPrevSection,\n            navigationHandlers.onNextSection,\n          )}\n          label={getNavigationLabel(viewSettings?.rtl, _('Previous Section'), _('Next Section'))}\n        />\n        <Button\n          icon={getNavigationIcon(viewSettings?.rtl, <RiArrowLeftSLine />, <RiArrowRightSLine />)}\n          onClick={getNavigationHandler(\n            viewSettings?.rtl,\n            navigationHandlers.onPrevPage,\n            navigationHandlers.onNextPage,\n          )}\n          label={getNavigationLabel(viewSettings?.rtl, _('Previous Page'), _('Next Page'))}\n        />\n        <Button\n          icon={getNavigationIcon(\n            viewSettings?.rtl,\n            <RiArrowGoBackLine />,\n            <RiArrowGoForwardLine />,\n          )}\n          onClick={navigationHandlers.onGoBack}\n          label={_('Go Back')}\n          disabled={!view?.history.canGoBack}\n        />\n        <Button\n          icon={getNavigationIcon(\n            viewSettings?.rtl,\n            <RiArrowGoForwardLine />,\n            <RiArrowGoBackLine />,\n          )}\n          onClick={navigationHandlers.onGoForward}\n          label={_('Go Forward')}\n          disabled={!view?.history.canGoForward}\n        />\n        <Button\n          icon={getNavigationIcon(viewSettings?.rtl, <RiArrowRightSLine />, <RiArrowLeftSLine />)}\n          onClick={getNavigationHandler(\n            viewSettings?.rtl,\n            navigationHandlers.onNextPage,\n            navigationHandlers.onPrevPage,\n          )}\n          label={getNavigationLabel(viewSettings?.rtl, _('Next Page'), _('Previous Page'))}\n        />\n        <Button\n          icon={getNavigationIcon(\n            viewSettings?.rtl,\n            <RiArrowRightDoubleLine />,\n            <RiArrowLeftDoubleLine />,\n          )}\n          onClick={getNavigationHandler(\n            viewSettings?.rtl,\n            navigationHandlers.onNextSection,\n            navigationHandlers.onPrevSection,\n          )}\n          label={getNavigationLabel(viewSettings?.rtl, _('Next Section'), _('Previous Section'))}\n        />\n      </div>\n    </div>\n  );\n};\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAGA;AACA;AACA;AAGA;AACA;;;AAbA;;;;;;;;;;;AA0BO,MAAM,kBAAkD,CAAC,EAC9D,OAAO,EACP,SAAS,EACT,gBAAgB,EAChB,aAAa,EACb,kBAAkB,EAClB,YAAY,EACZ,cAAc,kBAAkB,EAChC,YAAY,EACb;;IACC,MAAM,IAAI,IAAA,sKAAc;IACxB,MAAM,EAAE,OAAO,EAAE,GAAG,IAAA,mKAAc;IAClC,MAAM,OAAO,QAAQ;IAErB,MAAM,CAAC,eAAe,iBAAiB,GAAG,wLAAK,CAAC,QAAQ,CACtD,gBAAgB,mBAAmB,MAAM;IAG3C,IAAA,0LAAS;qCAAC;YACR,IAAI,eAAe;gBACjB,2DAA2D;gBAC3D,iBAAiB,mBAAmB;YACtC;QACF;oCAAG;QAAC;QAAe;KAAiB;IAEpC,MAAM,uBAAuB,IAAA,4LAAW;6DACtC,CAAC;YACC,iBAAiB;YACjB,mBAAmB,gBAAgB,CAAC;QACtC;4DACA;QAAC;KAAmB;IAGtB,MAAM,UAAU,IAAA,6LAAI,EAClB,0HACA,cAAc,aACV,yDACA;IAGN,qBACE,6MAAC;QAAI,WAAW;QAAS,OAAO;YAAE,QAAQ;QAAmB;;0BAC3D,6MAAC;gBAAI,WAAU;0BACb,cAAA,6MAAC,6JAAM;oBACL,OAAO,EAAE;oBACT,UAAU;oBACV,aAAa,GAAG,KAAK,KAAK,CAAC,eAAe,CAAC,CAAC;oBAC5C,cAAc;oBACd,UAAU;;;;;;;;;;;0BAGd,6MAAC;gBAAI,WAAU;;kCACb,6MAAC,6JAAM;wBACL,MAAM,IAAA,mMAAiB,EACrB,cAAc,mBACd,6MAAC,oPAAqB;;;;kDACtB,6MAAC,qPAAsB;;;;;wBAEzB,SAAS,IAAA,sMAAoB,EAC3B,cAAc,KACd,mBAAmB,aAAa,EAChC,mBAAmB,aAAa;wBAElC,OAAO,IAAA,oMAAkB,EAAC,cAAc,KAAK,EAAE,qBAAqB,EAAE;;;;;;kCAExE,6MAAC,6JAAM;wBACL,MAAM,IAAA,mMAAiB,EAAC,cAAc,mBAAK,6MAAC,+OAAgB;;;;kDAAK,6MAAC,gPAAiB;;;;;wBACnF,SAAS,IAAA,sMAAoB,EAC3B,cAAc,KACd,mBAAmB,UAAU,EAC7B,mBAAmB,UAAU;wBAE/B,OAAO,IAAA,oMAAkB,EAAC,cAAc,KAAK,EAAE,kBAAkB,EAAE;;;;;;kCAErE,6MAAC,6JAAM;wBACL,MAAM,IAAA,mMAAiB,EACrB,cAAc,mBACd,6MAAC,gPAAiB;;;;kDAClB,6MAAC,mPAAoB;;;;;wBAEvB,SAAS,mBAAmB,QAAQ;wBACpC,OAAO,EAAE;wBACT,UAAU,CAAC,MAAM,QAAQ;;;;;;kCAE3B,6MAAC,6JAAM;wBACL,MAAM,IAAA,mMAAiB,EACrB,cAAc,mBACd,6MAAC,mPAAoB;;;;kDACrB,6MAAC,gPAAiB;;;;;wBAEpB,SAAS,mBAAmB,WAAW;wBACvC,OAAO,EAAE;wBACT,UAAU,CAAC,MAAM,QAAQ;;;;;;kCAE3B,6MAAC,6JAAM;wBACL,MAAM,IAAA,mMAAiB,EAAC,cAAc,mBAAK,6MAAC,gPAAiB;;;;kDAAK,6MAAC,+OAAgB;;;;;wBACnF,SAAS,IAAA,sMAAoB,EAC3B,cAAc,KACd,mBAAmB,UAAU,EAC7B,mBAAmB,UAAU;wBAE/B,OAAO,IAAA,oMAAkB,EAAC,cAAc,KAAK,EAAE,cAAc,EAAE;;;;;;kCAEjE,6MAAC,6JAAM;wBACL,MAAM,IAAA,mMAAiB,EACrB,cAAc,mBACd,6MAAC,qPAAsB;;;;kDACvB,6MAAC,oPAAqB;;;;;wBAExB,SAAS,IAAA,sMAAoB,EAC3B,cAAc,KACd,mBAAmB,aAAa,EAChC,mBAAmB,aAAa;wBAElC,OAAO,IAAA,oMAAkB,EAAC,cAAc,KAAK,EAAE,iBAAiB,EAAE;;;;;;;;;;;;;;;;;;AAK5E;GAvHa;;QAUD,sKAAc;QACJ,mKAAc;;;KAXvB"}},
    {"offset": {"line": 234, "column": 0}, "map": {"version":3,"sources":["file:///app/readest/apps/readest-app/src/app/reader/components/footerbar/FontLayoutPanel.tsx"],"sourcesContent":["'use client';\n\nimport clsx from 'clsx';\nimport React, { useCallback } from 'react';\nimport { TbBoxMargin } from 'react-icons/tb';\nimport { RxLineHeight } from 'react-icons/rx';\nimport { useEnv } from '@/context/EnvContext';\nimport { useReaderStore } from '@/store/readerStore';\nimport { useTranslation } from '@/hooks/useTranslation';\nimport { saveViewSettings } from '@/helpers/settings';\nimport Slider from '@/components/Slider';\n\nconst FONT_SIZE_LIMITS = {\n  MIN: 8,\n  MAX: 30,\n  DEFAULT: 16,\n} as const;\n\nconst LINE_HEIGHT_LIMITS = {\n  MIN: 8,\n  MAX: 24,\n  DEFAULT: 16,\n  MULTIPLIER: 10,\n} as const;\n\nconst MARGIN_CONSTANTS = {\n  MAX_MARGIN_PX: 88,\n  MAX_GAP_PERCENT: 10,\n  MARGIN_RATIO: 50,\n} as const;\n\ninterface FontLayoutPanelProps {\n  bookKey: string;\n  actionTab: string;\n  bottomOffset: string;\n  marginIconSize: number;\n}\n\nexport const FontLayoutPanel: React.FC<FontLayoutPanelProps> = ({\n  bookKey,\n  actionTab,\n  bottomOffset,\n  marginIconSize,\n}) => {\n  const _ = useTranslation();\n  const { envConfig } = useEnv();\n  const { getView, getViewSettings } = useReaderStore();\n  const viewSettings = getViewSettings(bookKey);\n  const view = getView(bookKey);\n\n  const handleFontSizeChange = useCallback(\n    (value: number) => {\n      saveViewSettings(envConfig, bookKey, 'defaultFontSize', value);\n    },\n    [envConfig, bookKey],\n  );\n\n  const handleMarginChange = useCallback(\n    (value: number) => {\n      const currentViewSettings = getViewSettings(bookKey);\n      if (!currentViewSettings) return;\n\n      const { MAX_MARGIN_PX, MAX_GAP_PERCENT } = MARGIN_CONSTANTS;\n      const marginPx = Math.round((value / 100) * MAX_MARGIN_PX);\n      const gapPercent = Math.round((value / 100) * MAX_GAP_PERCENT);\n\n      currentViewSettings.marginTopPx = marginPx;\n      currentViewSettings.marginBottomPx = marginPx / 2;\n      currentViewSettings.marginLeftPx = marginPx / 2;\n      currentViewSettings.marginRightPx = marginPx / 2;\n\n      saveViewSettings(envConfig, bookKey, 'gapPercent', gapPercent, false, false);\n      view?.renderer.setAttribute('margin', `${marginPx}px`);\n      view?.renderer.setAttribute('gap', `${gapPercent}%`);\n\n      if (currentViewSettings?.scrolled) {\n        view?.renderer.setAttribute('flow', 'scrolled');\n      }\n    },\n    [envConfig, bookKey, view, getViewSettings],\n  );\n\n  const handleLineHeightChange = useCallback(\n    (value: number) => {\n      saveViewSettings(envConfig, bookKey, 'lineHeight', value / LINE_HEIGHT_LIMITS.MULTIPLIER);\n    },\n    [envConfig, bookKey],\n  );\n\n  const getMarginProgressValue = useCallback((marginPx: number, gapPercent: number) => {\n    const { MAX_MARGIN_PX, MAX_GAP_PERCENT, MARGIN_RATIO } = MARGIN_CONSTANTS;\n    return (marginPx / MAX_MARGIN_PX + gapPercent / MAX_GAP_PERCENT) * MARGIN_RATIO;\n  }, []);\n\n  const classes = clsx(\n    'footerbar-font-mobile bg-base-200 absolute flex w-full flex-col items-center gap-y-8 px-4 transition-all sm:hidden',\n    actionTab === 'font'\n      ? 'pointer-events-auto translate-y-0 pb-4 pt-8 ease-out'\n      : 'pointer-events-none invisible translate-y-full overflow-hidden pb-0 pt-0 ease-in',\n  );\n\n  return (\n    <div className={classes} style={{ bottom: bottomOffset }}>\n      <Slider\n        label={_('Font Size')}\n        initialValue={viewSettings?.defaultFontSize ?? FONT_SIZE_LIMITS.DEFAULT}\n        bubbleLabel={`${viewSettings?.defaultFontSize ?? FONT_SIZE_LIMITS.DEFAULT}`}\n        minLabel='A'\n        maxLabel='A'\n        minClassName='text-xs'\n        maxClassName='text-base'\n        onChange={handleFontSizeChange}\n        min={FONT_SIZE_LIMITS.MIN}\n        max={FONT_SIZE_LIMITS.MAX}\n      />\n      <div className='flex w-full items-center justify-between gap-x-6'>\n        <Slider\n          label={_('Page Margin')}\n          initialValue={getMarginProgressValue(\n            viewSettings?.marginTopPx ?? 44,\n            viewSettings?.gapPercent ?? 5,\n          )}\n          bubbleElement={<TbBoxMargin size={marginIconSize} />}\n          minLabel={_('Small')}\n          maxLabel={_('Large')}\n          step={10}\n          onChange={handleMarginChange}\n        />\n        <Slider\n          label={_('Line Spacing')}\n          initialValue={(viewSettings?.lineHeight ?? 1.6) * LINE_HEIGHT_LIMITS.MULTIPLIER}\n          bubbleElement={<RxLineHeight size={marginIconSize} />}\n          minLabel={_('Small')}\n          maxLabel={_('Large')}\n          min={LINE_HEIGHT_LIMITS.MIN}\n          max={LINE_HEIGHT_LIMITS.MAX}\n          onChange={handleLineHeightChange}\n        />\n      </div>\n    </div>\n  );\n};\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAVA;;;;;;;;;;AAYA,MAAM,mBAAmB;IACvB,KAAK;IACL,KAAK;IACL,SAAS;AACX;AAEA,MAAM,qBAAqB;IACzB,KAAK;IACL,KAAK;IACL,SAAS;IACT,YAAY;AACd;AAEA,MAAM,mBAAmB;IACvB,eAAe;IACf,iBAAiB;IACjB,cAAc;AAChB;AASO,MAAM,kBAAkD,CAAC,EAC9D,OAAO,EACP,SAAS,EACT,YAAY,EACZ,cAAc,EACf;;IACC,MAAM,IAAI,IAAA,sKAAc;IACxB,MAAM,EAAE,SAAS,EAAE,GAAG,IAAA,6JAAM;IAC5B,MAAM,EAAE,OAAO,EAAE,eAAe,EAAE,GAAG,IAAA,mKAAc;IACnD,MAAM,eAAe,gBAAgB;IACrC,MAAM,OAAO,QAAQ;IAErB,MAAM,uBAAuB,IAAA,4LAAW;6DACtC,CAAC;YACC,IAAA,oKAAgB,EAAC,WAAW,SAAS,mBAAmB;QAC1D;4DACA;QAAC;QAAW;KAAQ;IAGtB,MAAM,qBAAqB,IAAA,4LAAW;2DACpC,CAAC;YACC,MAAM,sBAAsB,gBAAgB;YAC5C,IAAI,CAAC,qBAAqB;YAE1B,MAAM,EAAE,aAAa,EAAE,eAAe,EAAE,GAAG;YAC3C,MAAM,WAAW,KAAK,KAAK,CAAC,AAAC,QAAQ,MAAO;YAC5C,MAAM,aAAa,KAAK,KAAK,CAAC,AAAC,QAAQ,MAAO;YAE9C,oBAAoB,WAAW,GAAG;YAClC,oBAAoB,cAAc,GAAG,WAAW;YAChD,oBAAoB,YAAY,GAAG,WAAW;YAC9C,oBAAoB,aAAa,GAAG,WAAW;YAE/C,IAAA,oKAAgB,EAAC,WAAW,SAAS,cAAc,YAAY,OAAO;YACtE,MAAM,SAAS,aAAa,UAAU,GAAG,SAAS,EAAE,CAAC;YACrD,MAAM,SAAS,aAAa,OAAO,GAAG,WAAW,CAAC,CAAC;YAEnD,IAAI,qBAAqB,UAAU;gBACjC,MAAM,SAAS,aAAa,QAAQ;YACtC;QACF;0DACA;QAAC;QAAW;QAAS;QAAM;KAAgB;IAG7C,MAAM,yBAAyB,IAAA,4LAAW;+DACxC,CAAC;YACC,IAAA,oKAAgB,EAAC,WAAW,SAAS,cAAc,QAAQ,mBAAmB,UAAU;QAC1F;8DACA;QAAC;QAAW;KAAQ;IAGtB,MAAM,yBAAyB,IAAA,4LAAW;+DAAC,CAAC,UAAkB;YAC5D,MAAM,EAAE,aAAa,EAAE,eAAe,EAAE,YAAY,EAAE,GAAG;YACzD,OAAO,CAAC,WAAW,gBAAgB,aAAa,eAAe,IAAI;QACrE;8DAAG,EAAE;IAEL,MAAM,UAAU,IAAA,6LAAI,EAClB,sHACA,cAAc,SACV,yDACA;IAGN,qBACE,6MAAC;QAAI,WAAW;QAAS,OAAO;YAAE,QAAQ;QAAa;;0BACrD,6MAAC,6JAAM;gBACL,OAAO,EAAE;gBACT,cAAc,cAAc,mBAAmB,iBAAiB,OAAO;gBACvE,aAAa,GAAG,cAAc,mBAAmB,iBAAiB,OAAO,EAAE;gBAC3E,UAAS;gBACT,UAAS;gBACT,cAAa;gBACb,cAAa;gBACb,UAAU;gBACV,KAAK,iBAAiB,GAAG;gBACzB,KAAK,iBAAiB,GAAG;;;;;;0BAE3B,6MAAC;gBAAI,WAAU;;kCACb,6MAAC,6JAAM;wBACL,OAAO,EAAE;wBACT,cAAc,uBACZ,cAAc,eAAe,IAC7B,cAAc,cAAc;wBAE9B,6BAAe,6MAAC,0OAAW;4BAAC,MAAM;;;;;;wBAClC,UAAU,EAAE;wBACZ,UAAU,EAAE;wBACZ,MAAM;wBACN,UAAU;;;;;;kCAEZ,6MAAC,6JAAM;wBACL,OAAO,EAAE;wBACT,cAAc,CAAC,cAAc,cAAc,GAAG,IAAI,mBAAmB,UAAU;wBAC/E,6BAAe,6MAAC,2OAAY;4BAAC,MAAM;;;;;;wBACnC,UAAU,EAAE;wBACZ,UAAU,EAAE;wBACZ,KAAK,mBAAmB,GAAG;wBAC3B,KAAK,mBAAmB,GAAG;wBAC3B,UAAU;;;;;;;;;;;;;;;;;;AAKpB;GAvGa;;QAMD,sKAAc;QACF,6JAAM;QACS,mKAAc;;;KARxC"}},
    {"offset": {"line": 424, "column": 0}, "map": {"version":3,"sources":["file:///app/readest/apps/readest-app/src/app/reader/components/footerbar/ColorPanel.tsx"],"sourcesContent":["'use client';\n\nimport clsx from 'clsx';\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport { PiSun, PiMoon } from 'react-icons/pi';\nimport { TbSunMoon } from 'react-icons/tb';\nimport { useEnv } from '@/context/EnvContext';\nimport { useThemeStore } from '@/store/themeStore';\nimport { useTranslation } from '@/hooks/useTranslation';\nimport { useSettingsStore } from '@/store/settingsStore';\nimport { useDeviceControlStore } from '@/store/deviceStore';\nimport { saveSysSettings } from '@/helpers/settings';\nimport { themes } from '@/styles/themes';\nimport { debounce } from '@/utils/debounce';\nimport Slider from '@/components/Slider';\n\nconst SCREEN_BRIGHTNESS_LIMITS = {\n  MIN: 0,\n  MAX: 100,\n  DEFAULT: 50,\n} as const;\n\ninterface ColorPanelProps {\n  actionTab: string;\n  bottomOffset: string;\n}\n\nexport const ColorPanel: React.FC<ColorPanelProps> = ({ actionTab, bottomOffset }) => {\n  const _ = useTranslation();\n  const { envConfig, appService } = useEnv();\n  const { settings } = useSettingsStore();\n  const { getScreenBrightness, setScreenBrightness } = useDeviceControlStore();\n  const { themeMode, themeColor, isDarkMode, setThemeMode, setThemeColor } = useThemeStore();\n\n  const [screenBrightnessValue, setScreenBrightnessValue] = useState(\n    settings.screenBrightness >= 0 ? settings.screenBrightness : SCREEN_BRIGHTNESS_LIMITS.DEFAULT,\n  );\n\n  useEffect(() => {\n    if (!appService?.isMobileApp) return;\n    if (actionTab !== 'color') return;\n\n    getScreenBrightness().then((brightness) => {\n      if (brightness >= 0.0 && brightness <= 1.0) {\n        const screenBrightness = Math.round(brightness * 100);\n        setScreenBrightnessValue(screenBrightness);\n      }\n    });\n  }, [actionTab, appService, getScreenBrightness]);\n\n  const debouncedSetScreenBrightness = useMemo(\n    () =>\n      debounce(async (value: number) => {\n        saveSysSettings(envConfig, 'screenBrightness', value);\n        saveSysSettings(envConfig, 'autoScreenBrightness', false);\n        await setScreenBrightness(value / 100);\n      }, 100),\n    [envConfig, setScreenBrightness],\n  );\n\n  const handleScreenBrightnessChange = useCallback(\n    async (value: number) => {\n      if (!appService?.isMobileApp) return;\n\n      setScreenBrightnessValue(value);\n      debouncedSetScreenBrightness(value);\n    },\n    [appService, debouncedSetScreenBrightness],\n  );\n\n  const cycleThemeMode = () => {\n    const nextMode = themeMode === 'auto' ? 'light' : themeMode === 'light' ? 'dark' : 'auto';\n    setThemeMode(nextMode);\n  };\n\n  const classes = clsx(\n    'footerbar-color-mobile bg-base-200 absolute flex w-full flex-col items-center gap-y-8 px-4 transition-all sm:hidden',\n    actionTab === 'color'\n      ? 'pointer-events-auto translate-y-0 pb-4 pt-8 ease-out'\n      : 'pointer-events-none invisible translate-y-full overflow-hidden pb-0 pt-0 ease-in',\n  );\n\n  return (\n    <div className={classes} style={{ bottom: bottomOffset }}>\n      {appService?.hasScreenBrightness && (\n        <Slider\n          label={_('Screen Brightness')}\n          initialValue={screenBrightnessValue}\n          bubbleLabel={`${screenBrightnessValue}`}\n          minIcon={<PiSun size={16} />}\n          maxIcon={<PiSun size={24} />}\n          onChange={handleScreenBrightnessChange}\n          min={SCREEN_BRIGHTNESS_LIMITS.MIN}\n          max={SCREEN_BRIGHTNESS_LIMITS.MAX}\n          valueToPosition={(value: number, min: number, max: number): number => {\n            if (value <= min) return 0;\n            if (value >= max) return 100;\n            // Use exponential mapping: position = 100 * ((value/max)^0.5)\n            const normalized = value / max;\n            const position = Math.pow(normalized, 0.5) * 100;\n            return position;\n          }}\n          positionToValue={(position: number, min: number, max: number): number => {\n            if (position <= 0) return min;\n            if (position >= 100) return max;\n            // Inverse of the above: value = max * (position/100)^2\n            const normalized = position / 100;\n            const value = Math.pow(normalized, 2) * max;\n            return Math.max(min, Math.min(max, value));\n          }}\n        />\n      )}\n\n      <div className='w-full'>\n        <div className='flex items-center justify-between p-2'>\n          <span className='text-sm font-medium'>{_('Color')}</span>\n        </div>\n        <div\n          className='flex gap-3 overflow-x-auto p-2'\n          style={{ scrollbarWidth: 'none', msOverflowStyle: 'none' }}\n        >\n          {themes.map(({ name, label, colors }) => (\n            <button\n              key={name}\n              onClick={() => setThemeColor(name)}\n              className={clsx(\n                'flex flex-shrink-0 flex-col items-center justify-center rounded-lg p-3 transition-all',\n                'h-[40px] min-w-[80px]',\n                themeColor === name\n                  ? 'ring-primary ring-offset-base-200 ring-2 ring-offset-2'\n                  : 'hover:opacity-80',\n              )}\n              style={{\n                backgroundColor: isDarkMode ? colors.dark['base-100'] : colors.light['base-100'],\n                color: isDarkMode ? colors.dark['base-content'] : colors.light['base-content'],\n              }}\n            >\n              <span className='text-xs font-medium'>{_(label)}</span>\n            </button>\n          ))}\n          <button\n            onClick={() => cycleThemeMode()}\n            className={clsx(\n              'flex flex-shrink-0 flex-col items-center justify-center rounded-lg p-3 transition-all',\n              'h-[40px] min-w-[80px]',\n              themeMode === 'dark'\n                ? 'ring-primary ring-offset-base-200 ring-2 ring-offset-2'\n                : 'hover:opacity-80',\n            )}\n            style={{\n              backgroundColor: (themes.find((t) => t.name === themeColor) || themes[0]!).colors\n                .dark['base-100'],\n              color: (themes.find((t) => t.name === themeColor) || themes[0]!).colors.dark[\n                'base-content'\n              ],\n            }}\n          >\n            {themeMode === 'light' ? (\n              <PiSun size={20} />\n            ) : themeMode === 'dark' ? (\n              <PiMoon size={20} />\n            ) : (\n              <TbSunMoon size={20} />\n            )}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 678, "column": 0}, "map": {"version":3,"sources":["file:///app/readest/apps/readest-app/src/app/reader/components/footerbar/NavigationBar.tsx"],"sourcesContent":["import clsx from 'clsx';\nimport React from 'react';\nimport { IoIosList as TOCIcon } from 'react-icons/io';\nimport { RxSlider as SliderIcon } from 'react-icons/rx';\nimport { RiFontFamily as FontIcon } from 'react-icons/ri';\nimport { PiSun as ColorIcon } from 'react-icons/pi';\nimport { MdOutlineHeadphones as TTSIcon } from 'react-icons/md';\nimport { useReaderStore } from '@/store/readerStore';\nimport { useTranslation } from '@/hooks/useTranslation';\nimport { useResponsiveSize } from '@/hooks/useResponsiveSize';\nimport Button from '@/components/Button';\n\ninterface NavigationBarProps {\n  bookKey: string;\n  actionTab: string;\n  navPadding: string;\n  onSetActionTab: (tab: string) => void;\n}\n\nexport const NavigationBar: React.FC<NavigationBarProps> = ({\n  bookKey,\n  actionTab,\n  navPadding: mobileNavPadding,\n  onSetActionTab,\n}) => {\n  const _ = useTranslation();\n  const { getViewState } = useReaderStore();\n  const viewState = getViewState(bookKey);\n  const tocIconSize = useResponsiveSize(23);\n  const fontIconSize = useResponsiveSize(18);\n\n  return (\n    <div\n      className={clsx('bg-base-200 z-30 mt-auto flex w-full justify-between px-8 py-4 sm:hidden')}\n      style={{ paddingBottom: mobileNavPadding }}\n    >\n      <Button\n        label={_('Table of Contents')}\n        icon={<TOCIcon size={tocIconSize} />}\n        onClick={() => onSetActionTab('toc')}\n      />\n      <Button\n        label={_('Color')}\n        icon={<ColorIcon className={clsx(actionTab === 'color' && 'text-blue-500')} />}\n        onClick={() => onSetActionTab('color')}\n      />\n      <Button\n        label={_('Reading Progress')}\n        icon={<SliderIcon className={clsx(actionTab === 'progress' && 'text-blue-500')} />}\n        onClick={() => onSetActionTab('progress')}\n      />\n      <Button\n        label={_('Font & Layout')}\n        icon={\n          <FontIcon size={fontIconSize} className={clsx(actionTab === 'font' && 'text-blue-500')} />\n        }\n        onClick={() => onSetActionTab('font')}\n      />\n      <Button\n        label={_('Speak')}\n        icon={<TTSIcon className={viewState?.ttsEnabled ? 'text-blue-500' : ''} />}\n        onClick={() => onSetActionTab('tts')}\n      />\n    </div>\n  );\n};\n"],"names":[],"mappings":";;;;;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AASO,MAAM,gBAA8C,CAAC,EAC1D,OAAO,EACP,SAAS,EACT,YAAY,gBAAgB,EAC5B,cAAc,EACf;;IACC,MAAM,IAAI,IAAA,sKAAc;IACxB,MAAM,EAAE,YAAY,EAAE,GAAG,IAAA,mKAAc;IACvC,MAAM,YAAY,aAAa;IAC/B,MAAM,cAAc,IAAA,4KAAiB,EAAC;IACtC,MAAM,eAAe,IAAA,4KAAiB,EAAC;IAEvC,qBACE,6MAAC;QACC,WAAW,IAAA,6LAAI,EAAC;QAChB,OAAO;YAAE,eAAe;QAAiB;;0BAEzC,6MAAC,6JAAM;gBACL,OAAO,EAAE;gBACT,oBAAM,6MAAC,wOAAO;oBAAC,MAAM;;;;;;gBACrB,SAAS,IAAM,eAAe;;;;;;0BAEhC,6MAAC,6JAAM;gBACL,OAAO,EAAE;gBACT,oBAAM,6MAAC,oOAAS;oBAAC,WAAW,IAAA,6LAAI,EAAC,cAAc,WAAW;;;;;;gBAC1D,SAAS,IAAM,eAAe;;;;;;0BAEhC,6MAAC,6JAAM;gBACL,OAAO,EAAE;gBACT,oBAAM,6MAAC,uOAAU;oBAAC,WAAW,IAAA,6LAAI,EAAC,cAAc,cAAc;;;;;;gBAC9D,SAAS,IAAM,eAAe;;;;;;0BAEhC,6MAAC,6JAAM;gBACL,OAAO,EAAE;gBACT,oBACE,6MAAC,2OAAQ;oBAAC,MAAM;oBAAc,WAAW,IAAA,6LAAI,EAAC,cAAc,UAAU;;;;;;gBAExE,SAAS,IAAM,eAAe;;;;;;0BAEhC,6MAAC,6JAAM;gBACL,OAAO,EAAE;gBACT,oBAAM,6MAAC,kPAAO;oBAAC,WAAW,WAAW,aAAa,kBAAkB;;;;;;gBACpE,SAAS,IAAM,eAAe;;;;;;;;;;;;AAItC;GA9Ca;;QAMD,sKAAc;QACC,mKAAc;QAEnB,4KAAiB;QAChB,4KAAiB;;;KAV3B"}},
    {"offset": {"line": 819, "column": 0}, "map": {"version":3,"sources":["file:///app/readest/apps/readest-app/src/app/reader/components/footerbar/MobileFooterBar.tsx"],"sourcesContent":["import React from 'react';\nimport { useResponsiveSize } from '@/hooks/useResponsiveSize';\nimport { FooterBarChildProps } from './types';\nimport { NavigationPanel } from './NavigationPanel';\nimport { FontLayoutPanel } from './FontLayoutPanel';\nimport { ColorPanel } from './ColorPanel';\nimport { NavigationBar } from './NavigationBar';\n\nconst MobileFooterBar: React.FC<FooterBarChildProps> = ({\n  bookKey,\n  gridInsets,\n  actionTab,\n  progressValid,\n  progressFraction,\n  navigationHandlers,\n  onSetActionTab,\n}) => {\n  const isMobile = window.innerWidth < 640 || window.innerHeight < 640;\n  const sliderHeight = useResponsiveSize(28);\n  const marginIconSize = useResponsiveSize(20);\n  const bottomOffset = isMobile ? `${gridInsets.bottom * 0.33 + 64}px` : '64px';\n  const navPadding = isMobile ? `${gridInsets.bottom * 0.33 + 16}px` : '0px';\n\n  return (\n    <>\n      <ColorPanel actionTab={actionTab} bottomOffset={bottomOffset} />\n      <NavigationPanel\n        bookKey={bookKey}\n        actionTab={actionTab}\n        progressFraction={progressFraction}\n        progressValid={progressValid}\n        navigationHandlers={navigationHandlers}\n        bottomOffset={bottomOffset}\n        sliderHeight={sliderHeight}\n      />\n      <FontLayoutPanel\n        bookKey={bookKey}\n        actionTab={actionTab}\n        bottomOffset={bottomOffset}\n        marginIconSize={marginIconSize}\n      />\n      <NavigationBar\n        bookKey={bookKey}\n        actionTab={actionTab}\n        navPadding={navPadding}\n        onSetActionTab={onSetActionTab!}\n      />\n    </>\n  );\n};\n\nexport default MobileFooterBar;\n"],"names":[],"mappings":";;;;;AACA;AAEA;AACA;AACA;AACA;;;;;;;;AAEA,MAAM,kBAAiD,CAAC,EACtD,OAAO,EACP,UAAU,EACV,SAAS,EACT,aAAa,EACb,gBAAgB,EAChB,kBAAkB,EAClB,cAAc,EACf;;IACC,MAAM,WAAW,OAAO,UAAU,GAAG,OAAO,OAAO,WAAW,GAAG;IACjE,MAAM,eAAe,IAAA,4KAAiB,EAAC;IACvC,MAAM,iBAAiB,IAAA,4KAAiB,EAAC;IACzC,MAAM,eAAe,WAAW,GAAG,WAAW,MAAM,GAAG,OAAO,GAAG,EAAE,CAAC,GAAG;IACvE,MAAM,aAAa,WAAW,GAAG,WAAW,MAAM,GAAG,OAAO,GAAG,EAAE,CAAC,GAAG;IAErE,qBACE;;0BACE,6MAAC,kMAAU;gBAAC,WAAW;gBAAW,cAAc;;;;;;0BAChD,6MAAC,4MAAe;gBACd,SAAS;gBACT,WAAW;gBACX,kBAAkB;gBAClB,eAAe;gBACf,oBAAoB;gBACpB,cAAc;gBACd,cAAc;;;;;;0BAEhB,6MAAC,4MAAe;gBACd,SAAS;gBACT,WAAW;gBACX,cAAc;gBACd,gBAAgB;;;;;;0BAElB,6MAAC,wMAAa;gBACZ,SAAS;gBACT,WAAW;gBACX,YAAY;gBACZ,gBAAgB;;;;;;;;AAIxB;GAzCM;;QAUiB,4KAAiB;QACf,4KAAiB;;;KAXpC;uCA2CS"}},
    {"offset": {"line": 906, "column": 0}, "map": {"version":3,"sources":["file:///app/readest/apps/readest-app/src/app/reader/components/footerbar/DesktopFooterBar.tsx"],"sourcesContent":["'use client';\n\nimport React, { useCallback, useEffect, useRef } from 'react';\nimport { FaHeadphones } from 'react-icons/fa6';\nimport { RiArrowLeftSLine, RiArrowRightSLine } from 'react-icons/ri';\nimport { RiArrowGoBackLine, RiArrowGoForwardLine } from 'react-icons/ri';\nimport { RiArrowLeftDoubleLine, RiArrowRightDoubleLine } from 'react-icons/ri';\nimport { getNavigationIcon, getNavigationLabel, getNavigationHandler } from './utils';\nimport { useReaderStore } from '@/store/readerStore';\nimport { useTranslation } from '@/hooks/useTranslation';\nimport { useBookDataStore } from '@/store/bookDataStore';\nimport { FooterBarChildProps } from './types';\nimport { formatProgress } from '@/utils/progress';\nimport Button from '@/components/Button';\n\nconst DesktopFooterBar: React.FC<FooterBarChildProps> = ({\n  bookKey,\n  gridInsets,\n  progressValid,\n  progressFraction,\n  navigationHandlers,\n  onSpeakText,\n}) => {\n  const _ = useTranslation();\n  const { hoveredBookKey, getView, getViewState, getProgress, getViewSettings } = useReaderStore();\n  const { getBookData } = useBookDataStore();\n  const view = getView(bookKey);\n  const bookData = getBookData(bookKey);\n  const progress = getProgress(bookKey);\n  const viewState = getViewState(bookKey);\n  const viewSettings = getViewSettings(bookKey);\n  const progressStyle = viewSettings?.progressStyle || 'percentage';\n\n  const [progressValue, setProgressValue] = React.useState(\n    progressValid ? progressFraction * 100 : 0,\n  );\n\n  const { section, pageinfo } = progress || {};\n  const template = progressStyle === 'fraction' ? '{current} / {total}' : '{percent}%';\n  const pageInfo = bookData?.isFixedLayout ? section : pageinfo;\n  const progressInfo = formatProgress(pageInfo?.current, pageInfo?.total, template, false, 'en', 0);\n\n  const rangeInputRef = useRef<HTMLInputElement>(null);\n\n  useEffect(() => {\n    if (hoveredBookKey !== bookKey) {\n      if (rangeInputRef.current && document.activeElement === rangeInputRef.current) {\n        rangeInputRef.current.blur();\n      }\n    }\n  }, [hoveredBookKey, bookKey]);\n\n  useEffect(() => {\n    if (progressValid) {\n      // eslint-disable-next-line react-hooks/set-state-in-effect\n      setProgressValue(progressFraction * 100);\n    }\n  }, [progressValid, progressFraction]);\n\n  const handleProgressChange = useCallback(\n    (value: number) => {\n      setProgressValue(value);\n      navigationHandlers.onProgressChange(value);\n    },\n    [navigationHandlers],\n  );\n\n  const isMobile = window.innerWidth < 640 || window.innerHeight < 640;\n\n  return (\n    <div\n      className='absolute hidden h-8 w-full items-center gap-x-4 px-4 sm:flex'\n      style={{ bottom: isMobile ? `${gridInsets.bottom * 0.33}px` : '0px' }}\n    >\n      <Button\n        icon={getNavigationIcon(\n          viewSettings?.rtl,\n          <RiArrowLeftDoubleLine />,\n          <RiArrowRightDoubleLine />,\n        )}\n        onClick={getNavigationHandler(\n          viewSettings?.rtl,\n          navigationHandlers.onPrevSection,\n          navigationHandlers.onNextSection,\n        )}\n        label={getNavigationLabel(viewSettings?.rtl, _('Previous Section'), _('Next Section'))}\n      />\n      <Button\n        icon={getNavigationIcon(viewSettings?.rtl, <RiArrowLeftSLine />, <RiArrowRightSLine />)}\n        onClick={getNavigationHandler(\n          viewSettings?.rtl,\n          navigationHandlers.onPrevPage,\n          navigationHandlers.onNextPage,\n        )}\n        label={getNavigationLabel(viewSettings?.rtl, _('Previous Page'), _('Next Page'))}\n      />\n      <Button\n        icon={getNavigationIcon(viewSettings?.rtl, <RiArrowGoBackLine />, <RiArrowGoForwardLine />)}\n        onClick={navigationHandlers.onGoBack}\n        label={_('Go Back')}\n        disabled={!view?.history.canGoBack}\n      />\n      <Button\n        icon={getNavigationIcon(viewSettings?.rtl, <RiArrowGoForwardLine />, <RiArrowGoBackLine />)}\n        onClick={navigationHandlers.onGoForward}\n        label={_('Go Forward')}\n        disabled={!view?.history.canGoForward}\n      />\n      {progressValid && (\n        <span\n          title={_('Reading Progress')}\n          aria-label={`${_('Reading Progress')}: ${Math.round(progressFraction * 100)}%`}\n          className='mx-2 text-center text-sm'\n        >\n          <span aria-hidden='true'>{progressInfo}</span>\n        </span>\n      )}\n      <input\n        ref={rangeInputRef}\n        type='range'\n        className='text-base-content mx-2 min-w-0 flex-1'\n        min={0}\n        max={100}\n        aria-label={_('Jump to Location')}\n        value={progressValue}\n        onChange={(e) => handleProgressChange(parseInt(e.target.value, 10))}\n      />\n      <Button\n        icon={<FaHeadphones className={viewState?.ttsEnabled ? 'text-blue-500' : ''} />}\n        onClick={onSpeakText!}\n        label={_('Speak')}\n      />\n      <Button\n        icon={getNavigationIcon(viewSettings?.rtl, <RiArrowRightSLine />, <RiArrowLeftSLine />)}\n        onClick={getNavigationHandler(\n          viewSettings?.rtl,\n          navigationHandlers.onNextPage,\n          navigationHandlers.onPrevPage,\n        )}\n        label={getNavigationLabel(viewSettings?.rtl, _('Next Page'), _('Previous Page'))}\n      />\n      <Button\n        icon={getNavigationIcon(\n          viewSettings?.rtl,\n          <RiArrowRightDoubleLine />,\n          <RiArrowLeftDoubleLine />,\n        )}\n        onClick={getNavigationHandler(\n          viewSettings?.rtl,\n          navigationHandlers.onNextSection,\n          navigationHandlers.onPrevSection,\n        )}\n        label={getNavigationLabel(viewSettings?.rtl, _('Next Section'), _('Previous Section'))}\n      />\n    </div>\n  );\n};\n\nexport default DesktopFooterBar;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1164, "column": 0}, "map": {"version":3,"sources":["file:///app/readest/apps/readest-app/src/app/reader/components/footerbar/FooterBar.tsx"],"sourcesContent":["'use client';\n\nimport clsx from 'clsx';\nimport React, { useState, useCallback, useMemo, useEffect } from 'react';\nimport { useEnv } from '@/context/EnvContext';\nimport { useReaderStore } from '@/store/readerStore';\nimport { useSidebarStore } from '@/store/sidebarStore';\nimport { useBookDataStore } from '@/store/bookDataStore';\nimport { useTranslation } from '@/hooks/useTranslation';\nimport { useDeviceControlStore } from '@/store/deviceStore';\nimport { eventDispatcher } from '@/utils/event';\nimport { FooterBarProps, NavigationHandlers, FooterBarChildProps } from './types';\nimport { debounce } from '@/utils/debounce';\nimport { viewPagination } from '../../hooks/usePagination';\nimport MobileFooterBar from './MobileFooterBar';\nimport DesktopFooterBar from './DesktopFooterBar';\nimport TTSControl from '../tts/TTSControl';\n\nconst FooterBar: React.FC<FooterBarProps> = ({\n  bookKey,\n  bookFormat,\n  section,\n  pageinfo,\n  isHoveredAnim,\n  gridInsets,\n}) => {\n  const _ = useTranslation();\n  const { appService } = useEnv();\n  const { getConfig, setConfig, getBookData } = useBookDataStore();\n  const { hoveredBookKey, setHoveredBookKey } = useReaderStore();\n  const { getView, getViewState, getProgress, getViewSettings } = useReaderStore();\n  const { isSideBarVisible, setSideBarVisible } = useSidebarStore();\n  const { acquireBackKeyInterception, releaseBackKeyInterception } = useDeviceControlStore();\n\n  const view = getView(bookKey);\n  const config = getConfig(bookKey);\n  const bookData = getBookData(bookKey);\n  const viewState = getViewState(bookKey);\n  const progress = getProgress(bookKey);\n  const viewSettings = getViewSettings(bookKey);\n\n  const [userSelectedTab, setUserSelectedTab] = useState('');\n  const actionTab = hoveredBookKey === bookKey ? userSelectedTab : '';\n  const isVisible = hoveredBookKey === bookKey;\n\n  const docs = view?.renderer.getContents() ?? [];\n  const pointerInDoc = docs.some(({ doc }) => doc?.body?.style.cursor === 'pointer');\n\n  const progressInfo = useMemo(\n    () => (bookFormat === 'PDF' ? section : pageinfo),\n    [bookFormat, section, pageinfo],\n  );\n\n  const progressValid = !!progressInfo && progressInfo.total > 0 && progressInfo.current >= 0;\n  const progressFraction = useMemo(() => {\n    if (progressValid && progressInfo.total > 0 && progressInfo.current >= 0) {\n      return (progressInfo.current + 1) / progressInfo.total;\n    }\n    return 0;\n  }, [progressValid, progressInfo]);\n\n  const handleProgressChange = useMemo(\n    () =>\n      debounce((value: number) => {\n        view?.goToFraction(value / 100.0);\n      }, 100),\n    [view],\n  );\n\n  const handleGoPrevPage = useCallback(() => {\n    viewPagination(view, viewSettings, 'left', 'page');\n  }, [view, viewSettings]);\n\n  const handleGoNextPage = useCallback(() => {\n    viewPagination(view, viewSettings, 'right', 'page');\n  }, [view, viewSettings]);\n\n  const handleGoPrevSection = useCallback(() => {\n    view?.renderer.prevSection?.();\n  }, [view]);\n\n  const handleGoNextSection = useCallback(() => {\n    view?.renderer.nextSection?.();\n  }, [view]);\n\n  const handleGoBack = useCallback(() => {\n    view?.history.back();\n  }, [view]);\n\n  const handleGoForward = useCallback(() => {\n    view?.history.forward();\n  }, [view]);\n\n  const handleSpeakText = useCallback(async () => {\n    if (!view || !progress || !viewState) return;\n\n    const eventType = viewState.ttsEnabled ? 'tts-stop' : 'tts-speak';\n    eventDispatcher.dispatch(eventType, { bookKey });\n  }, [view, progress, viewState, bookKey]);\n\n  const handleSetActionTab = useCallback(\n    (tab: string) => {\n      setUserSelectedTab((prevTab) => (prevTab === tab ? '' : tab));\n\n      if (tab === 'tts') {\n        if (viewState?.ttsEnabled) {\n          setHoveredBookKey('');\n        }\n        handleSpeakText();\n      } else if (tab === 'toc') {\n        setHoveredBookKey('');\n        if (config?.viewSettings) {\n          setConfig(bookKey, { viewSettings: { ...config.viewSettings, sideBarTab: 'toc' } });\n        }\n        setSideBarVisible(true);\n      } else if (tab === 'note') {\n        setHoveredBookKey('');\n        setSideBarVisible(true);\n        if (config?.viewSettings) {\n          setConfig(bookKey, {\n            viewSettings: { ...config.viewSettings, sideBarTab: 'annotations' },\n          });\n        }\n      }\n    },\n    [\n      config,\n      bookKey,\n      viewState?.ttsEnabled,\n      setConfig,\n      setSideBarVisible,\n      setHoveredBookKey,\n      handleSpeakText,\n    ],\n  );\n\n  const navigationHandlers: NavigationHandlers = useMemo(\n    () => ({\n      onPrevPage: handleGoPrevPage,\n      onNextPage: handleGoNextPage,\n      onPrevSection: handleGoPrevSection,\n      onNextSection: handleGoNextSection,\n      onGoBack: handleGoBack,\n      onGoForward: handleGoForward,\n      onProgressChange: handleProgressChange,\n    }),\n    [\n      handleGoPrevPage,\n      handleGoNextPage,\n      handleGoPrevSection,\n      handleGoNextSection,\n      handleGoBack,\n      handleGoForward,\n      handleProgressChange,\n    ],\n  );\n\n  const handleKeyDown = useCallback(\n    (event: KeyboardEvent | CustomEvent) => {\n      if (event instanceof CustomEvent) {\n        if (event.detail.keyName === 'Back') {\n          setHoveredBookKey('');\n          return true;\n        }\n      } else {\n        if (event.key === 'Escape') {\n          setHoveredBookKey('');\n        }\n        event.stopPropagation();\n      }\n      return false;\n    },\n    [setHoveredBookKey],\n  );\n\n  useEffect(() => {\n    if (!appService?.isAndroidApp) return;\n\n    if (hoveredBookKey) {\n      acquireBackKeyInterception();\n      eventDispatcher.onSync('native-key-down', handleKeyDown);\n    }\n    return () => {\n      if (hoveredBookKey) {\n        releaseBackKeyInterception();\n        eventDispatcher.offSync('native-key-down', handleKeyDown);\n      }\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [hoveredBookKey]);\n\n  const commonProps: FooterBarChildProps = {\n    bookKey,\n    gridInsets,\n    actionTab,\n    progressValid,\n    progressFraction,\n    navigationHandlers,\n    onSetActionTab: handleSetActionTab,\n    onSpeakText: handleSpeakText,\n  };\n\n  const needHorizontalScroll =\n    (viewSettings?.vertical && viewSettings?.scrolled) ||\n    (bookData?.isFixedLayout && viewSettings?.zoomLevel && viewSettings.zoomLevel > 100);\n\n  const containerClasses = clsx(\n    'footer-bar shadow-xs bottom-0 z-10 flex w-full flex-col',\n    'sm:h-[52px] sm:justify-center',\n    'sm:bg-base-100 border-base-300/50 border-t sm:border-none',\n    'transition-[opacity,transform] duration-300',\n    window.innerWidth < 640 ? 'fixed' : 'absolute',\n    appService?.hasRoundedWindow && 'rounded-window-bottom-right',\n    !isSideBarVisible && appService?.hasRoundedWindow && 'rounded-window-bottom-left',\n    isHoveredAnim && 'hover-bar-anim',\n    needHorizontalScroll && 'sm:!bottom-3 sm:!h-10 sm:justify-end',\n    isVisible\n      ? 'pointer-events-auto translate-y-0 opacity-100'\n      : 'pointer-events-none translate-y-full opacity-0 sm:translate-y-0',\n  );\n\n  const isMobile = appService?.isMobile || window.innerWidth < 640;\n\n  return (\n    <>\n      {/* Hover trigger area */}\n      <div\n        role='none'\n        className={clsx(\n          'absolute bottom-0 left-0 z-10 flex h-[52px] w-full',\n          needHorizontalScroll && 'sm:!bottom-3 sm:!h-7',\n          isMobile || pointerInDoc ? 'pointer-events-none' : '',\n        )}\n        onMouseEnter={() => !isMobile && setHoveredBookKey(bookKey)}\n        onTouchStart={() => !isMobile && setHoveredBookKey(bookKey)}\n      />\n\n      {/* Main footer container */}\n      <div\n        role='group'\n        aria-label={_('Footer Bar')}\n        className={containerClasses}\n        dir={viewSettings?.rtl ? 'rtl' : 'ltr'}\n        onFocus={() => !appService?.isMobile && setHoveredBookKey(bookKey)}\n        onMouseLeave={() => window.innerWidth >= 640 && setHoveredBookKey('')}\n      >\n        <MobileFooterBar {...commonProps} />\n        <DesktopFooterBar {...commonProps} />\n      </div>\n      {isVisible && needHorizontalScroll && (\n        <div className='bg-base-100 pointer-events-none absolute bottom-0 left-0 hidden h-3 w-full sm:block' />\n      )}\n\n      <TTSControl bookKey={bookKey} gridInsets={gridInsets} />\n    </>\n  );\n};\n\nexport default FooterBar;\n"],"names":[],"mappings":"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"}}]
}
{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///app/readest/node_modules/.pnpm/%40tauri-apps%2Bplugin-websocket%402.4.2/node_modules/%40tauri-apps/plugin-websocket/dist-js/index.js"],"sourcesContent":["import { Channel, invoke } from '@tauri-apps/api/core';\n\n// Copyright 2019-2023 Tauri Programme within The Commons Conservancy\n// SPDX-License-Identifier: Apache-2.0\n// SPDX-License-Identifier: MIT\nclass WebSocket {\n    constructor(id, listeners) {\n        this.id = id;\n        this.listeners = listeners;\n    }\n    static async connect(url, config) {\n        const listeners = new Set();\n        const onMessage = new Channel();\n        onMessage.onmessage = (message) => {\n            listeners.forEach((l) => {\n                l(message);\n            });\n        };\n        if (config?.headers) {\n            config.headers = Array.from(new Headers(config.headers).entries());\n        }\n        return await invoke('plugin:websocket|connect', {\n            url,\n            onMessage,\n            config\n        }).then((id) => new WebSocket(id, listeners));\n    }\n    addListener(cb) {\n        this.listeners.add(cb);\n        return () => {\n            this.listeners.delete(cb);\n        };\n    }\n    async send(message) {\n        let m;\n        if (typeof message === 'string') {\n            m = { type: 'Text', data: message };\n        }\n        else if (typeof message === 'object' && 'type' in message) {\n            m = message;\n        }\n        else if (Array.isArray(message)) {\n            m = { type: 'Binary', data: message };\n        }\n        else {\n            throw new Error('invalid `message` type, expected a `{ type: string, data: any }` object, a string or a numeric array');\n        }\n        await invoke('plugin:websocket|send', {\n            id: this.id,\n            message: m\n        });\n    }\n    async disconnect() {\n        await this.send({\n            type: 'Close',\n            data: {\n                code: 1000,\n                reason: 'Disconnected by client'\n            }\n        });\n    }\n}\n\nexport { WebSocket as default };\n"],"names":[],"mappings":";;;;AAAA;;AAEA,qEAAqE;AACrE,sCAAsC;AACtC,+BAA+B;AAC/B,MAAM;IACF,YAAY,EAAE,EAAE,SAAS,CAAE;QACvB,IAAI,CAAC,EAAE,GAAG;QACV,IAAI,CAAC,SAAS,GAAG;IACrB;IACA,aAAa,QAAQ,GAAG,EAAE,MAAM,EAAE;QAC9B,MAAM,YAAY,IAAI;QACtB,MAAM,YAAY,IAAI,wNAAO;QAC7B,UAAU,SAAS,GAAG,CAAC;YACnB,UAAU,OAAO,CAAC,CAAC;gBACf,EAAE;YACN;QACJ;QACA,IAAI,QAAQ,SAAS;YACjB,OAAO,OAAO,GAAG,MAAM,IAAI,CAAC,IAAI,QAAQ,OAAO,OAAO,EAAE,OAAO;QACnE;QACA,OAAO,MAAM,IAAA,uNAAM,EAAC,4BAA4B;YAC5C;YACA;YACA;QACJ,GAAG,IAAI,CAAC,CAAC,KAAO,IAAI,UAAU,IAAI;IACtC;IACA,YAAY,EAAE,EAAE;QACZ,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC;QACnB,OAAO;YACH,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;QAC1B;IACJ;IACA,MAAM,KAAK,OAAO,EAAE;QAChB,IAAI;QACJ,IAAI,OAAO,YAAY,UAAU;YAC7B,IAAI;gBAAE,MAAM;gBAAQ,MAAM;YAAQ;QACtC,OACK,IAAI,OAAO,YAAY,YAAY,UAAU,SAAS;YACvD,IAAI;QACR,OACK,IAAI,MAAM,OAAO,CAAC,UAAU;YAC7B,IAAI;gBAAE,MAAM;gBAAU,MAAM;YAAQ;QACxC,OACK;YACD,MAAM,IAAI,MAAM;QACpB;QACA,MAAM,IAAA,uNAAM,EAAC,yBAAyB;YAClC,IAAI,IAAI,CAAC,EAAE;YACX,SAAS;QACb;IACJ;IACA,MAAM,aAAa;QACf,MAAM,IAAI,CAAC,IAAI,CAAC;YACZ,MAAM;YACN,MAAM;gBACF,MAAM;gBACN,QAAQ;YACZ;QACJ;IACJ;AACJ","ignoreList":[0]}}]
}
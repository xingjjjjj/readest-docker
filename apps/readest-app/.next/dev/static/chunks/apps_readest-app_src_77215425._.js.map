{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///app/readest/apps/readest-app/src/hooks/useTranslation.ts"],"sourcesContent":["'use client';\n\nimport '@/i18n/i18n';\nimport { useCallback } from 'react';\nimport { useTranslation as _useTranslation } from 'react-i18next';\n\nexport type TranslationFunc = (key: string, options?: Record<string, number | string>) => string;\n\nexport const useTranslation = (namespace: string = 'translation') => {\n  const { t } = _useTranslation(namespace);\n\n  return useCallback((key: string, options = {}) => t(key, { defaultValue: key, ...options }), [t]);\n};\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAAA;;AAJA;;;;AAQO,MAAM,iBAAiB,CAAC,YAAoB,aAAa;;IAC9D,MAAM,EAAE,CAAC,EAAE,GAAG,IAAA,sXAAe,EAAC;IAE9B,OAAO,IAAA,8UAAW;sCAAC,CAAC,KAAa,UAAU,CAAC,CAAC,GAAK,EAAE,KAAK;gBAAE,cAAc;gBAAK,GAAG,OAAO;YAAC;qCAAI;QAAC;KAAE;AAClG;GAJa"}},
    {"offset": {"line": 37, "column": 0}, "map": {"version":3,"sources":["file:///app/readest/apps/readest-app/src/utils/ua.ts"],"sourcesContent":["import { AppService } from '@/types/system';\n\nexport const parseWebViewInfo = (appService: AppService | null): string => {\n  const ua = navigator.userAgent;\n\n  if (appService?.isAndroidApp) {\n    // Android WebView\n    const chromeMatch = ua.match(/Chrome\\/([0-9.]+)/);\n    return chromeMatch ? `WebView ${chromeMatch[1]}` : 'Android WebView';\n  } else if (appService?.isIOSApp) {\n    // iOS WebView\n    const webkitMatch = ua.match(/AppleWebKit\\/([0-9.]+)/);\n    return webkitMatch ? `WebView ${webkitMatch[1]}` : 'iOS WebView';\n  } else if (appService?.isMacOSApp) {\n    // macOS WebView\n    const webkitMatch = ua.match(/AppleWebKit\\/([0-9.]+)/);\n    return webkitMatch ? `WebView ${webkitMatch[1]}` : 'macOS WebView';\n  } else if (appService?.appPlatform === 'tauri' && appService?.osPlatform === 'windows') {\n    // Windows WebView2\n    const match = ua.match(/Edg\\/([0-9.]+)/);\n    return match ? `Edge ${match[1]}` : 'Edge WebView2';\n  } else if (appService?.appPlatform === 'tauri' && appService?.osPlatform === 'linux') {\n    // Linux WebView\n    const match = ua.match(/AppleWebKit\\/([0-9.]+)/);\n    return match ? `WebView ${match[1]}` : 'Linux WebView';\n  } else if (ua.includes('CriOS') && ua.includes('Mobile/') && ua.includes('Safari')) {\n    // iOS Chrome WebView\n    const match = ua.match(/CriOS\\/([0-9.]+)/);\n    return match ? `Chrome ${match[1]}` : 'iOS Chrome';\n  } else if (ua.includes('FxiOS') && ua.includes('Mobile/') && ua.includes('Safari')) {\n    // iOS Firefox WebView\n    const match = ua.match(/FxiOS\\/([0-9.]+)/);\n    return match ? `Firefox ${match[1]}` : 'iOS Firefox';\n  } else if (ua.includes('Chrome') && ua.includes('AppleWebKit') && ua.includes('Macintosh')) {\n    // macOS Chrome\n    const match = ua.match(/Chrome\\/([0-9.]+)/);\n    return match ? `Chrome ${match[1]}` : 'macOS Chrome';\n  } else if (ua.includes('Safari') && ua.includes('AppleWebKit') && ua.includes('Macintosh')) {\n    // macOS Safari\n    const match = ua.match(/Safari\\/([0-9.]+)/);\n    return match ? `Safari ${match[1]}` : 'macOS Safari';\n  } else if (ua.includes('Edg/')) {\n    // Microsoft Edge\n    const match = ua.match(/Edg\\/([0-9.]+)/);\n    return match ? `Edge ${match[1]}` : 'Edge WebView';\n  } else if (ua.includes('Firefox/')) {\n    // Firefox\n    const match = ua.match(/Firefox\\/([0-9.]+)/);\n    return match ? `Firefox ${match[1]}` : 'Firefox Gecko';\n  } else if (ua.includes('Chrome/') && !ua.includes('Chromium')) {\n    // Chrome\n    const match = ua.match(/Chrome\\/([0-9.]+)/);\n    return match ? `Chrome ${match[1]}` : 'Chrome';\n  } else if (ua.includes('Chromium/')) {\n    // Chromium\n    const match = ua.match(/Chromium\\/([0-9.]+)/);\n    return match ? `Chromium ${match[1]}` : 'Chromium';\n  } else if (ua.includes('MSIE ')) {\n    // Internet Explorer\n    const match = ua.match(/MSIE ([0-9.]+)/);\n    return match ? `IE ${match[1]}` : 'Internet Explorer';\n  } else {\n    return 'Unknown';\n  }\n};\n\nexport const parseWebViewVersion = (appService: AppService | null): number => {\n  const webViewInfo = parseWebViewInfo(appService);\n  const versionMatch = webViewInfo.match(/([0-9]+)\\./);\n  return versionMatch ? parseFloat(versionMatch[1]!) : 0;\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 117, "column": 0}, "map": {"version":3,"sources":["file:///app/readest/apps/readest-app/src/utils/error.ts"],"sourcesContent":["export const handleGlobalError = (e: Error) => {\n  const isChunkError = e?.message?.includes('Loading chunk');\n\n  if (!isChunkError) {\n    const now = Date.now();\n    const lastReload = Number(sessionStorage.getItem('lastErrorReload') || '0');\n    if (now - lastReload > 60_000) {\n      sessionStorage.setItem('lastErrorReload', String(now));\n      window.location.reload();\n    } else {\n      console.warn('Error detected, but reload suppressed (rate limit)');\n    }\n  }\n};\n"],"names":[],"mappings":";;;;AAAO,MAAM,oBAAoB,CAAC;IAChC,MAAM,eAAe,GAAG,SAAS,SAAS;IAE1C,IAAI,CAAC,cAAc;QACjB,MAAM,MAAM,KAAK,GAAG;QACpB,MAAM,aAAa,OAAO,eAAe,OAAO,CAAC,sBAAsB;QACvE,IAAI,MAAM,aAAa,QAAQ;YAC7B,eAAe,OAAO,CAAC,mBAAmB,OAAO;YACjD,OAAO,QAAQ,CAAC,MAAM;QACxB,OAAO;YACL,QAAQ,IAAI,CAAC;QACf;IACF;AACF"}},
    {"offset": {"line": 141, "column": 0}, "map": {"version":3,"sources":["file:///app/readest/apps/readest-app/src/app/error.tsx"],"sourcesContent":["'use client';\n\nimport posthog from 'posthog-js';\nimport { useEffect, useState } from 'react';\nimport { useEnv } from '@/context/EnvContext';\nimport { useTranslation } from '@/hooks/useTranslation';\nimport { parseWebViewInfo } from '@/utils/ua';\nimport { handleGlobalError } from '@/utils/error';\n\ninterface ErrorPageProps {\n  error: Error & { digest?: string };\n  reset: () => void;\n}\n\nexport default function Error({ error, reset }: ErrorPageProps) {\n  const _ = useTranslation();\n  const { appService } = useEnv();\n  const [browserInfo, setBrowserInfo] = useState('');\n\n  useEffect(() => {\n    setBrowserInfo(parseWebViewInfo(appService));\n  }, [appService]);\n\n  useEffect(() => {\n    posthog.captureException(error);\n    handleGlobalError(error);\n  }, [appService, error]);\n\n  const handleGoHome = () => {\n    window.location.href = '/library';\n  };\n\n  const handleGoBack = () => {\n    if (window.history.length > 1) {\n      window.history.back();\n    } else {\n      handleGoHome();\n    }\n  };\n\n  return (\n    <div className='hero bg-base-200 min-h-screen'>\n      <div className='hero-content text-center'>\n        <div className='w-full max-w-2xl p-1'>\n          <div className='mb-8 mt-6'>\n            <div className='text-error animate-pulse text-8xl'>⚠️</div>\n          </div>\n\n          <h1 className='text-base-content mb-4 text-5xl font-bold'>Oops!</h1>\n\n          <p className='text-base-content/70 mb-8 text-lg'>\n            {_(\n              \"Something went wrong. Don't worry, our team has been notified and we're working on a fix.\",\n            )}\n          </p>\n\n          <div className='alert alert-error mb-8 overflow-hidden'>\n            <div className='w-full min-w-0 flex-col items-start text-left'>\n              <h3 className='mb-2 font-bold'>{_('Error Details:')}</h3>\n              <p className='overflow-wrap-anywhere w-full break-words font-mono text-sm'>\n                {error.message}\n              </p>\n              {browserInfo && (\n                <p className='overflow-wrap-anywhere mt-2 w-full break-words font-mono text-sm'>\n                  Browser: {browserInfo}\n                </p>\n              )}\n              {error.stack && (\n                <p className='overflow-wrap-anywhere mt-2 w-full whitespace-pre-wrap break-words font-mono text-sm'>\n                  {error.stack.split('\\n').slice(0, 3).join('\\n')}\n                </p>\n              )}\n              {error.digest && (\n                <p className='overflow-wrap-anywhere mt-2 w-full break-words text-xs opacity-70'>\n                  Error ID: {error.digest}\n                </p>\n              )}\n            </div>\n          </div>\n\n          <div className='flex flex-col gap-4'>\n            <button onClick={reset} className='btn btn-primary btn-lg'>\n              <svg className='mr-2 h-5 w-5' fill='none' stroke='currentColor' viewBox='0 0 24 24'>\n                <path\n                  strokeLinecap='round'\n                  strokeLinejoin='round'\n                  strokeWidth={2}\n                  d='M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15'\n                />\n              </svg>\n              {_('Try Again')}\n            </button>\n\n            <div className='flex gap-3'>\n              <button onClick={handleGoBack} className='btn btn-outline flex-1'>\n                <svg className='mr-2 h-4 w-4' fill='none' stroke='currentColor' viewBox='0 0 24 24'>\n                  <path\n                    strokeLinecap='round'\n                    strokeLinejoin='round'\n                    strokeWidth={2}\n                    d='M10 19l-7-7m0 0l7-7m-7 7h18'\n                  />\n                </svg>\n                {_('Go Back')}\n              </button>\n\n              <button onClick={handleGoHome} className='btn btn-outline flex-1'>\n                <svg className='mr-2 h-4 w-4' fill='none' stroke='currentColor' viewBox='0 0 24 24'>\n                  <path\n                    strokeLinecap='round'\n                    strokeLinejoin='round'\n                    strokeWidth={2}\n                    d='M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6'\n                  />\n                </svg>\n                {_('Your Library')}\n              </button>\n            </div>\n          </div>\n\n          <div className='border-base-300 mt-8 border-t pt-6'>\n            <p className='text-base-content/60 text-sm'>\n              {_('Need help?')}{' '}\n              <a href='mailto:support@readest.com' className='link link-primary'>\n                {_('Contact Support')}\n              </a>\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAPA;;;;;;;AAce,SAAS,MAAM,EAAE,KAAK,EAAE,KAAK,EAAkB;;IAC5D,MAAM,IAAI,IAAA,6KAAc;IACxB,MAAM,EAAE,UAAU,EAAE,GAAG,IAAA,oKAAM;IAC7B,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,2UAAQ,EAAC;IAE/C,IAAA,4UAAS;2BAAC;YACR,eAAe,IAAA,mKAAgB,EAAC;QAClC;0BAAG;QAAC;KAAW;IAEf,IAAA,4UAAS;2BAAC;YACR,yNAAO,CAAC,gBAAgB,CAAC;YACzB,IAAA,uKAAiB,EAAC;QACpB;0BAAG;QAAC;QAAY;KAAM;IAEtB,MAAM,eAAe;QACnB,OAAO,QAAQ,CAAC,IAAI,GAAG;IACzB;IAEA,MAAM,eAAe;QACnB,IAAI,OAAO,OAAO,CAAC,MAAM,GAAG,GAAG;YAC7B,OAAO,OAAO,CAAC,IAAI;QACrB,OAAO;YACL;QACF;IACF;IAEA,qBACE,+VAAC;QAAI,WAAU;kBACb,cAAA,+VAAC;YAAI,WAAU;sBACb,cAAA,+VAAC;gBAAI,WAAU;;kCACb,+VAAC;wBAAI,WAAU;kCACb,cAAA,+VAAC;4BAAI,WAAU;sCAAoC;;;;;;;;;;;kCAGrD,+VAAC;wBAAG,WAAU;kCAA4C;;;;;;kCAE1D,+VAAC;wBAAE,WAAU;kCACV,EACC;;;;;;kCAIJ,+VAAC;wBAAI,WAAU;kCACb,cAAA,+VAAC;4BAAI,WAAU;;8CACb,+VAAC;oCAAG,WAAU;8CAAkB,EAAE;;;;;;8CAClC,+VAAC;oCAAE,WAAU;8CACV,MAAM,OAAO;;;;;;gCAEf,6BACC,+VAAC;oCAAE,WAAU;;wCAAmE;wCACpE;;;;;;;gCAGb,MAAM,KAAK,kBACV,+VAAC;oCAAE,WAAU;8CACV,MAAM,KAAK,CAAC,KAAK,CAAC,MAAM,KAAK,CAAC,GAAG,GAAG,IAAI,CAAC;;;;;;gCAG7C,MAAM,MAAM,kBACX,+VAAC;oCAAE,WAAU;;wCAAoE;wCACpE,MAAM,MAAM;;;;;;;;;;;;;;;;;;kCAM/B,+VAAC;wBAAI,WAAU;;0CACb,+VAAC;gCAAO,SAAS;gCAAO,WAAU;;kDAChC,+VAAC;wCAAI,WAAU;wCAAe,MAAK;wCAAO,QAAO;wCAAe,SAAQ;kDACtE,cAAA,+VAAC;4CACC,eAAc;4CACd,gBAAe;4CACf,aAAa;4CACb,GAAE;;;;;;;;;;;oCAGL,EAAE;;;;;;;0CAGL,+VAAC;gCAAI,WAAU;;kDACb,+VAAC;wCAAO,SAAS;wCAAc,WAAU;;0DACvC,+VAAC;gDAAI,WAAU;gDAAe,MAAK;gDAAO,QAAO;gDAAe,SAAQ;0DACtE,cAAA,+VAAC;oDACC,eAAc;oDACd,gBAAe;oDACf,aAAa;oDACb,GAAE;;;;;;;;;;;4CAGL,EAAE;;;;;;;kDAGL,+VAAC;wCAAO,SAAS;wCAAc,WAAU;;0DACvC,+VAAC;gDAAI,WAAU;gDAAe,MAAK;gDAAO,QAAO;gDAAe,SAAQ;0DACtE,cAAA,+VAAC;oDACC,eAAc;oDACd,gBAAe;oDACf,aAAa;oDACb,GAAE;;;;;;;;;;;4CAGL,EAAE;;;;;;;;;;;;;;;;;;;kCAKT,+VAAC;wBAAI,WAAU;kCACb,cAAA,+VAAC;4BAAE,WAAU;;gCACV,EAAE;gCAAe;8CAClB,+VAAC;oCAAE,MAAK;oCAA6B,WAAU;8CAC5C,EAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQnB;GAtHwB;;QACZ,6KAAc;QACD,oKAAM;;;KAFP"}}]
}